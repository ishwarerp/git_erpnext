{
  "version": 3,
  "sources": ["../../../../../apps/erpnext/erpnext/public/js/website_utils.js", "../../../../../apps/erpnext/erpnext/public/js/wishlist.js", "../../../../../apps/erpnext/erpnext/public/js/shopping_cart.js", "../../../../../apps/erpnext/erpnext/public/js/customer_reviews.js", "../../../../../apps/erpnext/erpnext/e_commerce/product_ui/list.js", "../../../../../apps/erpnext/erpnext/e_commerce/product_ui/views.js", "../../../../../apps/erpnext/erpnext/e_commerce/product_ui/grid.js", "../../../../../apps/erpnext/erpnext/e_commerce/product_ui/search.js"],
  "sourcesContent": ["// Copyright (c) 2015, Frappe Technologies Pvt. Ltd. and Contributors\n// License: GNU General Public License v3. See license.txt\n\nif(!window.erpnext) window.erpnext = {};\n\n// Add / update a new Lead / Communication\n// subject, sender, description\nfrappe.send_message = function(opts, btn) {\n\treturn frappe.call({\n\t\ttype: \"POST\",\n\t\tmethod: \"erpnext.templates.utils.send_message\",\n\t\tbtn: btn,\n\t\targs: opts,\n\t\tcallback: opts.callback\n\t});\n};\n\nerpnext.subscribe_to_newsletter = function(opts, btn) {\n\treturn frappe.call({\n\t\ttype: \"POST\",\n\t\tmethod: \"frappe.email.doctype.newsletter.newsletter.subscribe\",\n\t\tbtn: btn,\n\t\targs: {\"email\": opts.email},\n\t\tcallback: opts.callback\n\t});\n}\n\n// for backward compatibility\nerpnext.send_message = frappe.send_message;\n", "frappe.provide(\"erpnext.e_commerce.wishlist\");\nvar wishlist = erpnext.e_commerce.wishlist;\n\nfrappe.provide(\"erpnext.e_commerce.shopping_cart\");\nvar shopping_cart = erpnext.e_commerce.shopping_cart;\n\n$.extend(wishlist, {\n\tset_wishlist_count: function(animate=false) {\n\t\t// set badge count for wishlist icon\n\t\tvar wish_count = frappe.get_cookie(\"wish_count\");\n\t\tif (frappe.session.user===\"Guest\") {\n\t\t\twish_count = 0;\n\t\t}\n\n\t\tif (wish_count) {\n\t\t\t$(\".wishlist\").toggleClass('hidden', false);\n\t\t}\n\n\t\tvar $wishlist = $('.wishlist-icon');\n\t\tvar $badge = $wishlist.find(\"#wish-count\");\n\n\t\tif (parseInt(wish_count) === 0 || wish_count === undefined) {\n\t\t\t$wishlist.css(\"display\", \"none\");\n\t\t} else {\n\t\t\t$wishlist.css(\"display\", \"inline\");\n\t\t}\n\t\tif (wish_count) {\n\t\t\t$badge.html(wish_count);\n\t\t\tif (animate) {\n\t\t\t\t$wishlist.addClass('cart-animate');\n\t\t\t\tsetTimeout(() => {\n\t\t\t\t\t$wishlist.removeClass('cart-animate');\n\t\t\t\t}, 500);\n\t\t\t}\n\t\t} else {\n\t\t\t$badge.remove();\n\t\t}\n\t},\n\n\tbind_move_to_cart_action: function() {\n\t\t// move item to cart from wishlist\n\t\t$('.page_content').on(\"click\", \".btn-add-to-cart\", (e) => {\n\t\t\tconst $move_to_cart_btn = $(e.currentTarget);\n\t\t\tlet item_code = $move_to_cart_btn.data(\"item-code\");\n\n\t\t\tshopping_cart.shopping_cart_update({\n\t\t\t\titem_code,\n\t\t\t\tqty: 1,\n\t\t\t\tcart_dropdown: true\n\t\t\t});\n\n\t\t\tlet success_action = function() {\n\t\t\t\tconst $card_wrapper = $move_to_cart_btn.closest(\".wishlist-card\");\n\t\t\t\t$card_wrapper.addClass(\"wish-removed\");\n\t\t\t};\n\t\t\tlet args = { item_code: item_code };\n\t\t\tthis.add_remove_from_wishlist(\"remove\", args, success_action, null, true);\n\t\t});\n\t},\n\n\tbind_remove_action: function() {\n\t\t// remove item from wishlist\n\t\tlet me = this;\n\n\t\t$('.page_content').on(\"click\", \".remove-wish\", (e) => {\n\t\t\tconst $remove_wish_btn = $(e.currentTarget);\n\t\t\tlet item_code = $remove_wish_btn.data(\"item-code\");\n\n\t\t\tlet success_action = function() {\n\t\t\t\tconst $card_wrapper = $remove_wish_btn.closest(\".wishlist-card\");\n\t\t\t\t$card_wrapper.addClass(\"wish-removed\");\n\t\t\t\tif (frappe.get_cookie(\"wish_count\") == 0) {\n\t\t\t\t\t$(\".page_content\").empty();\n\t\t\t\t\tme.render_empty_state();\n\t\t\t\t}\n\t\t\t};\n\t\t\tlet args = { item_code: item_code };\n\t\t\tthis.add_remove_from_wishlist(\"remove\", args, success_action);\n\t\t});\n\t},\n\n\tbind_wishlist_action() {\n\t\t// 'wish'('like') or 'unwish' item in product listing\n\t\t$('.page_content').on('click', '.like-action, .like-action-list', (e) => {\n\t\t\tconst $btn = $(e.currentTarget);\n\t\t\tthis.wishlist_action($btn);\n\t\t});\n\t},\n\n\twishlist_action(btn) {\n\t\tconst $wish_icon = btn.find('.wish-icon');\n\t\tlet me = this;\n\n\t\tif (frappe.session.user===\"Guest\") {\n\t\t\tif (localStorage) {\n\t\t\t\tlocalStorage.setItem(\"last_visited\", window.location.pathname);\n\t\t\t}\n\t\t\tthis.redirect_guest();\n\t\t\treturn;\n\t\t}\n\n\t\tlet success_action = function() {\n\t\t\terpnext.e_commerce.wishlist.set_wishlist_count(true);\n\t\t};\n\n\t\tif ($wish_icon.hasClass('wished')) {\n\t\t\t// un-wish item\n\t\t\tbtn.removeClass(\"like-animate\");\n\t\t\tbtn.addClass(\"like-action-wished\");\n\t\t\tthis.toggle_button_class($wish_icon, 'wished', 'not-wished');\n\n\t\t\tlet args = { item_code: btn.data('item-code') };\n\t\t\tlet failure_action = function() {\n\t\t\t\tme.toggle_button_class($wish_icon, 'not-wished', 'wished');\n\t\t\t};\n\t\t\tthis.add_remove_from_wishlist(\"remove\", args, success_action, failure_action);\n\t\t} else {\n\t\t\t// wish item\n\t\t\tbtn.addClass(\"like-animate\");\n\t\t\tbtn.addClass(\"like-action-wished\");\n\t\t\tthis.toggle_button_class($wish_icon, 'not-wished', 'wished');\n\n\t\t\tlet args = {item_code: btn.data('item-code')};\n\t\t\tlet failure_action = function() {\n\t\t\t\tme.toggle_button_class($wish_icon, 'wished', 'not-wished');\n\t\t\t};\n\t\t\tthis.add_remove_from_wishlist(\"add\", args, success_action, failure_action);\n\t\t}\n\t},\n\n\ttoggle_button_class(button, remove, add) {\n\t\tbutton.removeClass(remove);\n\t\tbutton.addClass(add);\n\t},\n\n\tadd_remove_from_wishlist(action, args, success_action, failure_action, async=false) {\n\t\t/*\tAJAX call to add or remove Item from Wishlist\n\t\t\taction: \"add\" or \"remove\"\n\t\t\targs: args for method (item_code, price, formatted_price),\n\t\t\tsuccess_action: method to execute on successs,\n\t\t\tfailure_action: method to execute on failure,\n\t\t\tasync: make call asynchronously (true/false).\t*/\n\t\tif (frappe.session.user===\"Guest\") {\n\t\t\tif (localStorage) {\n\t\t\t\tlocalStorage.setItem(\"last_visited\", window.location.pathname);\n\t\t\t}\n\t\t\tthis.redirect_guest();\n\t\t} else {\n\t\t\tlet method = \"erpnext.e_commerce.doctype.wishlist.wishlist.add_to_wishlist\";\n\t\t\tif (action === \"remove\") {\n\t\t\t\tmethod = \"erpnext.e_commerce.doctype.wishlist.wishlist.remove_from_wishlist\";\n\t\t\t}\n\n\t\t\tfrappe.call({\n\t\t\t\tasync: async,\n\t\t\t\ttype: \"POST\",\n\t\t\t\tmethod: method,\n\t\t\t\targs: args,\n\t\t\t\tcallback: function (r) {\n\t\t\t\t\tif (r.exc) {\n\t\t\t\t\t\tif (failure_action && (typeof failure_action === 'function')) {\n\t\t\t\t\t\t\tfailure_action();\n\t\t\t\t\t\t}\n\t\t\t\t\t\tfrappe.msgprint({\n\t\t\t\t\t\t\tmessage: __(\"Sorry, something went wrong. Please refresh.\"),\n\t\t\t\t\t\t\tindicator: \"red\", title: __(\"Note\")\n\t\t\t\t\t\t});\n\t\t\t\t\t} else if (success_action && (typeof success_action === 'function')) {\n\t\t\t\t\t\tsuccess_action();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t},\n\n\tredirect_guest() {\n\t\tfrappe.call('erpnext.e_commerce.api.get_guest_redirect_on_action').then((res) => {\n\t\t\twindow.location.href = res.message || \"/login\";\n\t\t});\n\t},\n\n\trender_empty_state() {\n\t\t$(\".page_content\").append(`\n\t\t\t<div class=\"cart-empty frappe-card\">\n\t\t\t\t<div class=\"cart-empty-state\">\n\t\t\t\t\t<img src=\"/assets/erpnext/images/ui-states/cart-empty-state.png\" alt=\"Empty Cart\">\n\t\t\t\t</div>\n\t\t\t\t<div class=\"cart-empty-message mt-4\">${ __('Wishlist is empty !') }</p>\n\t\t\t</div>\n\t\t`);\n\t}\n\n});\n\nfrappe.ready(function() {\n\tif (window.location.pathname !== \"/wishlist\") {\n\t\t$(\".wishlist\").toggleClass('hidden', true);\n\t\twishlist.set_wishlist_count();\n\t} else {\n\t\twishlist.bind_move_to_cart_action();\n\t\twishlist.bind_remove_action();\n\t}\n\n});", "// Copyright (c) 2015, Frappe Technologies Pvt. Ltd. and Contributors\n// License: GNU General Public License v3. See license.txt\n\n// shopping cart\nfrappe.provide(\"erpnext.e_commerce.shopping_cart\");\nvar shopping_cart = erpnext.e_commerce.shopping_cart;\n\nvar getParams = function (url) {\n\tvar params = [];\n\tvar parser = document.createElement('a');\n\tparser.href = url;\n\tvar query = parser.search.substring(1);\n\tvar vars = query.split('&');\n\tfor (var i = 0; i < vars.length; i++) {\n\t\tvar pair = vars[i].split('=');\n\t\tparams[pair[0]] = decodeURIComponent(pair[1]);\n\t}\n\treturn params;\n};\n\nfrappe.ready(function() {\n\tvar full_name = frappe.session && frappe.session.user_fullname;\n\t// update user\n\tif(full_name) {\n\t\t$('.navbar li[data-label=\"User\"] a')\n\t\t\t.html('<i class=\"fa fa-fixed-width fa fa-user\"></i> ' + full_name);\n\t}\n\t// set coupon code and sales partner code\n\n\tvar url_args = getParams(window.location.href);\n\n\tvar referral_coupon_code = url_args['cc'];\n\tvar referral_sales_partner = url_args['sp'];\n\n\tvar d = new Date();\n\t// expires within 30 minutes\n\td.setTime(d.getTime() + (0.02 * 24 * 60 * 60 * 1000));\n\tvar expires = \"expires=\"+d.toUTCString();\n\tif (referral_coupon_code) {\n\t\tdocument.cookie = \"referral_coupon_code=\" + referral_coupon_code + \";\" + expires + \";path=/\";\n\t}\n\tif (referral_sales_partner) {\n\t\tdocument.cookie = \"referral_sales_partner=\" + referral_sales_partner + \";\" + expires + \";path=/\";\n\t}\n\treferral_coupon_code=frappe.get_cookie(\"referral_coupon_code\");\n\treferral_sales_partner=frappe.get_cookie(\"referral_sales_partner\");\n\n\tif (referral_coupon_code && $(\".tot_quotation_discount\").val()==undefined ) {\n\t\t$(\".txtcoupon\").val(referral_coupon_code);\n\t}\n\tif (referral_sales_partner) {\n\t\t$(\".txtreferral_sales_partner\").val(referral_sales_partner);\n\t}\n\n\t// update login\n\tshopping_cart.show_shoppingcart_dropdown();\n\tshopping_cart.set_cart_count();\n\tshopping_cart.show_cart_navbar();\n});\n\n$.extend(shopping_cart, {\n\tshow_shoppingcart_dropdown: function() {\n\t\t$(\".shopping-cart\").on('shown.bs.dropdown', function() {\n\t\t\tif (!$('.shopping-cart-menu .cart-container').length) {\n\t\t\t\treturn frappe.call({\n\t\t\t\t\tmethod: 'erpnext.e_commerce.shopping_cart.cart.get_shopping_cart_menu',\n\t\t\t\t\tcallback: function(r) {\n\t\t\t\t\t\tif (r.message) {\n\t\t\t\t\t\t\t$('.shopping-cart-menu').html(r.message);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t});\n\t},\n\n\tupdate_cart: function(opts) {\n\t\tif (frappe.session.user===\"Guest\") {\n\t\t\tif (localStorage) {\n\t\t\t\tlocalStorage.setItem(\"last_visited\", window.location.pathname);\n\t\t\t}\n\t\t\tfrappe.call('erpnext.e_commerce.api.get_guest_redirect_on_action').then((res) => {\n\t\t\t\twindow.location.href = res.message || \"/login\";\n\t\t\t});\n\t\t} else {\n\t\t\tshopping_cart.freeze();\n\t\t\treturn frappe.call({\n\t\t\t\ttype: \"POST\",\n\t\t\t\tmethod: \"erpnext.e_commerce.shopping_cart.cart.update_cart\",\n\t\t\t\targs: {\n\t\t\t\t\titem_code: opts.item_code,\n\t\t\t\t\tqty: opts.qty,\n\t\t\t\t\tadditional_notes: opts.additional_notes !== undefined ? opts.additional_notes : undefined,\n\t\t\t\t\twith_items: opts.with_items || 0\n\t\t\t\t},\n\t\t\t\tbtn: opts.btn,\n\t\t\t\tcallback: function(r) {\n\t\t\t\t\tshopping_cart.unfreeze();\n\t\t\t\t\tshopping_cart.set_cart_count(true);\n\t\t\t\t\tif(opts.callback)\n\t\t\t\t\t\topts.callback(r);\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t},\n\n\tset_cart_count: function(animate=false) {\n\t\t$(\".intermediate-empty-cart\").remove();\n\n\t\tvar cart_count = frappe.get_cookie(\"cart_count\");\n\t\tif(frappe.session.user===\"Guest\") {\n\t\t\tcart_count = 0;\n\t\t}\n\n\t\tif(cart_count) {\n\t\t\t$(\".shopping-cart\").toggleClass('hidden', false);\n\t\t}\n\n\t\tvar $cart = $('.cart-icon');\n\t\tvar $badge = $cart.find(\"#cart-count\");\n\n\t\tif(parseInt(cart_count) === 0 || cart_count === undefined) {\n\t\t\t$cart.css(\"display\", \"none\");\n\t\t\t$(\".cart-tax-items\").hide();\n\t\t\t$(\".btn-place-order\").hide();\n\t\t\t$(\".cart-payment-addresses\").hide();\n\n\t\t\tlet intermediate_empty_cart_msg = `\n\t\t\t\t<div class=\"text-center w-100 intermediate-empty-cart mt-4 mb-4 text-muted\">\n\t\t\t\t\t${ __(\"Cart is Empty\") }\n\t\t\t\t</div>\n\t\t\t`;\n\t\t\t$(\".cart-table\").after(intermediate_empty_cart_msg);\n\t\t}\n\t\telse {\n\t\t\t$cart.css(\"display\", \"inline\");\n\t\t\t$(\"#cart-count\").text(cart_count);\n\t\t}\n\n\t\tif(cart_count) {\n\t\t\t$badge.html(cart_count);\n\n\t\t\tif (animate) {\n\t\t\t\t$cart.addClass(\"cart-animate\");\n\t\t\t\tsetTimeout(() => {\n\t\t\t\t\t$cart.removeClass(\"cart-animate\");\n\t\t\t\t}, 500);\n\t\t\t}\n\t\t} else {\n\t\t\t$badge.remove();\n\t\t}\n\t},\n\n\tshopping_cart_update: function({item_code, qty, cart_dropdown, additional_notes}) {\n\t\tshopping_cart.update_cart({\n\t\t\titem_code,\n\t\t\tqty,\n\t\t\tadditional_notes,\n\t\t\twith_items: 1,\n\t\t\tbtn: this,\n\t\t\tcallback: function(r) {\n\t\t\t\tif(!r.exc) {\n\t\t\t\t\t$(\".cart-items\").html(r.message.items);\n\t\t\t\t\t$(\".cart-tax-items\").html(r.message.total);\n\t\t\t\t\t$(\".payment-summary\").html(r.message.taxes_and_totals);\n\t\t\t\t\tshopping_cart.set_cart_count();\n\n\t\t\t\t\tif (cart_dropdown != true) {\n\t\t\t\t\t\t$(\".cart-icon\").hide();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t},\n\t\t});\n\t},\n\n\tshow_cart_navbar: function () {\n\t\tfrappe.call({\n\t\t\tmethod: \"erpnext.e_commerce.doctype.e_commerce_settings.e_commerce_settings.is_cart_enabled\",\n\t\t\tcallback: function(r) {\n\t\t\t\t$(\".shopping-cart\").toggleClass('hidden', r.message ? false : true);\n\t\t\t}\n\t\t});\n\t},\n\n\ttoggle_button_class(button, remove, add) {\n\t\tbutton.removeClass(remove);\n\t\tbutton.addClass(add);\n\t},\n\n\tbind_add_to_cart_action() {\n\t\t$('.page_content').on('click', '.btn-add-to-cart-list', (e) => {\n\t\t\tconst $btn = $(e.currentTarget);\n\t\t\t$btn.prop('disabled', true);\n\n\t\t\tif (frappe.session.user===\"Guest\") {\n\t\t\t\tif (localStorage) {\n\t\t\t\t\tlocalStorage.setItem(\"last_visited\", window.location.pathname);\n\t\t\t\t}\n\t\t\t\tfrappe.call('erpnext.e_commerce.api.get_guest_redirect_on_action').then((res) => {\n\t\t\t\t\twindow.location.href = res.message || \"/login\";\n\t\t\t\t});\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t$btn.addClass('hidden');\n\t\t\t$btn.closest('.cart-action-container').addClass('d-flex');\n\t\t\t$btn.parent().find('.go-to-cart').removeClass('hidden');\n\t\t\t$btn.parent().find('.go-to-cart-grid').removeClass('hidden');\n\t\t\t$btn.parent().find('.cart-indicator').removeClass('hidden');\n\n\t\t\tconst item_code = $btn.data('item-code');\n\t\t\terpnext.e_commerce.shopping_cart.update_cart({\n\t\t\t\titem_code,\n\t\t\t\tqty: 1\n\t\t\t});\n\n\t\t});\n\t},\n\n\tfreeze() {\n\t\tif (window.location.pathname !== \"/cart\") return;\n\n\t\tif (!$('#freeze').length) {\n\t\t\tlet freeze = $('<div id=\"freeze\" class=\"modal-backdrop fade\"></div>')\n\t\t\t\t.appendTo(\"body\");\n\n\t\t\tsetTimeout(function() {\n\t\t\t\tfreeze.addClass(\"show\");\n\t\t\t}, 1);\n\t\t} else {\n\t\t\t$(\"#freeze\").addClass(\"show\");\n\t\t}\n\t},\n\n\tunfreeze() {\n\t\tif ($('#freeze').length) {\n\t\t\tlet freeze = $('#freeze').removeClass(\"show\");\n\t\t\tsetTimeout(function() {\n\t\t\t\tfreeze.remove();\n\t\t\t}, 1);\n\t\t}\n\t}\n});\n", "$(() => {\n\tclass CustomerReviews {\n\t\tconstructor() {\n\t\t\tthis.bind_button_actions();\n\t\t\tthis.start = 0;\n\t\t\tthis.page_length = 10;\n\t\t}\n\n\t\tbind_button_actions() {\n\t\t\tthis.write_review();\n\t\t\tthis.view_more();\n\t\t}\n\n\t\twrite_review() {\n\t\t\t//TODO: make dialog popup on stray page\n\t\t\t$('.page_content').on('click', '.btn-write-review', (e) => {\n\t\t\t\t// Bind action on write a review button\n\t\t\t\tconst $btn = $(e.currentTarget);\n\n\t\t\t\tlet d = new frappe.ui.Dialog({\n\t\t\t\t\ttitle: __(\"Write a Review\"),\n\t\t\t\t\tfields: [\n\t\t\t\t\t\t{fieldname: \"title\", fieldtype: \"Data\", label: \"Headline\", reqd: 1},\n\t\t\t\t\t\t{fieldname: \"rating\", fieldtype: \"Rating\", label: \"Overall Rating\", reqd: 1},\n\t\t\t\t\t\t{fieldtype: \"Section Break\"},\n\t\t\t\t\t\t{fieldname: \"comment\", fieldtype: \"Small Text\", label: \"Your Review\"}\n\t\t\t\t\t],\n\t\t\t\t\tprimary_action: function() {\n\t\t\t\t\t\tlet data = d.get_values();\n\t\t\t\t\t\tfrappe.call({\n\t\t\t\t\t\t\tmethod: \"erpnext.e_commerce.doctype.item_review.item_review.add_item_review\",\n\t\t\t\t\t\t\targs: {\n\t\t\t\t\t\t\t\tweb_item: $btn.attr('data-web-item'),\n\t\t\t\t\t\t\t\ttitle: data.title,\n\t\t\t\t\t\t\t\trating: data.rating,\n\t\t\t\t\t\t\t\tcomment: data.comment\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tfreeze: true,\n\t\t\t\t\t\t\tfreeze_message: __(\"Submitting Review ...\"),\n\t\t\t\t\t\t\tcallback: (r) => {\n\t\t\t\t\t\t\t\tif (!r.exc) {\n\t\t\t\t\t\t\t\t\tfrappe.msgprint({\n\t\t\t\t\t\t\t\t\t\tmessage: __(\"Thank you for submitting your review\"),\n\t\t\t\t\t\t\t\t\t\ttitle: __(\"Review Submitted\"),\n\t\t\t\t\t\t\t\t\t\tindicator: \"green\"\n\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t\td.hide();\n\t\t\t\t\t\t\t\t\tlocation.reload();\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t},\n\t\t\t\t\tprimary_action_label: __('Submit')\n\t\t\t\t});\n\t\t\t\td.show();\n\t\t\t});\n\t\t}\n\n\t\tview_more() {\n\t\t\t$('.page_content').on('click', '.btn-view-more', (e) => {\n\t\t\t\t// Bind action on view more button\n\t\t\t\tconst $btn = $(e.currentTarget);\n\t\t\t\t$btn.prop('disabled', true);\n\n\t\t\t\tthis.start += this.page_length;\n\t\t\t\tlet me = this;\n\n\t\t\t\tfrappe.call({\n\t\t\t\t\tmethod: \"erpnext.e_commerce.doctype.item_review.item_review.get_item_reviews\",\n\t\t\t\t\targs: {\n\t\t\t\t\t\tweb_item: $btn.attr('data-web-item'),\n\t\t\t\t\t\tstart: me.start,\n\t\t\t\t\t\tend: me.page_length\n\t\t\t\t\t},\n\t\t\t\t\tcallback: (result) => {\n\t\t\t\t\t\tif (result.message) {\n\t\t\t\t\t\t\tlet res = result.message;\n\t\t\t\t\t\t\tme.get_user_review_html(res.reviews);\n\n\t\t\t\t\t\t\t$btn.prop('disabled', false);\n\t\t\t\t\t\t\tif (res.total_reviews <= (me.start + me.page_length)) {\n\t\t\t\t\t\t\t\t$btn.hide();\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t});\n\n\t\t}\n\n\t\tget_user_review_html(reviews) {\n\t\t\tlet me = this;\n\t\t\tlet $content = $('.user-reviews');\n\n\t\t\treviews.forEach((review) => {\n\t\t\t\t$content.append(`\n\t\t\t\t\t<div class=\"mb-3 review\">\n\t\t\t\t\t\t<div class=\"d-flex\">\n\t\t\t\t\t\t\t<p class=\"mr-4 user-review-title\">\n\t\t\t\t\t\t\t\t<span>${__(review.review_title)}</span>\n\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t<div class=\"rating\">\n\t\t\t\t\t\t\t\t${me.get_review_stars(review.rating)}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t<div class=\"product-description mb-4\">\n\t\t\t\t\t\t\t<p>\n\t\t\t\t\t\t\t\t${__(review.comment)}\n\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class=\"review-signature mb-2\">\n\t\t\t\t\t\t\t<span class=\"reviewer\">${__(review.customer)}</span>\n\t\t\t\t\t\t\t<span class=\"indicator grey\" style=\"--text-on-gray: var(--gray-300);\"></span>\n\t\t\t\t\t\t\t<span class=\"reviewer\">${__(review.published_on)}</span>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t`);\n\t\t\t});\n\t\t}\n\n\t\tget_review_stars(rating) {\n\t\t\tlet stars = ``;\n\t\t\tfor (let i = 1; i < 6; i++) {\n\t\t\t\tlet fill_class = i <= rating ? 'star-click' : '';\n\t\t\t\tstars += `\n\t\t\t\t\t<svg class=\"icon icon-sm ${fill_class}\">\n\t\t\t\t\t\t<use href=\"#icon-star\"></use>\n\t\t\t\t\t</svg>\n\t\t\t\t`;\n\t\t\t}\n\t\t\treturn stars;\n\t\t}\n\t}\n\n\tnew CustomerReviews();\n});", "erpnext.ProductList = class {\n\t/* Options:\n\t\t- items: Items\n\t\t- settings: E Commerce Settings\n\t\t- products_section: Products Wrapper\n\t\t- preference: If preference is not list view, render but hide\n\t*/\n\tconstructor(options) {\n\t\tObject.assign(this, options);\n\n\t\tif (this.preference !== \"List View\") {\n\t\t\tthis.products_section.addClass(\"hidden\");\n\t\t}\n\n\t\tthis.products_section.empty();\n\t\tthis.make();\n\t}\n\n\tmake() {\n\t\tlet me = this;\n\t\tlet html = `<br><br>`;\n\n\t\tthis.items.forEach(item => {\n\t\t\tlet title = item.web_item_name || item.item_name || item.item_code || \"\";\n\t\t\ttitle =  title.length > 200 ? title.substr(0, 200) + \"...\" : title;\n\n\t\t\thtml += `<div class='row list-row w-100 mb-4'>`;\n\t\t\thtml += me.get_image_html(item, title, me.settings);\n\t\t\thtml += me.get_row_body_html(item, title, me.settings);\n\t\t\thtml += `</div>`;\n\t\t});\n\n\t\tlet $product_wrapper = this.products_section;\n\t\t$product_wrapper.append(html);\n\t}\n\n\tget_image_html(item, title, settings) {\n\t\tlet image = item.website_image;\n\t\tlet wishlist_enabled = !item.has_variants && settings.enable_wishlist;\n\t\tlet image_html = ``;\n\n\t\tif (image) {\n\t\t\timage_html += `\n\t\t\t\t<div class=\"col-2 border text-center rounded list-image\">\n\t\t\t\t\t<a class=\"product-link product-list-link\" href=\"/${ item.route || '#' }\">\n\t\t\t\t\t\t<img itemprop=\"image\" class=\"website-image h-100 w-100\" alt=\"${ title }\"\n\t\t\t\t\t\t\tsrc=\"${ image }\">\n\t\t\t\t\t</a>\n\t\t\t\t\t${ wishlist_enabled ? this.get_wishlist_icon(item): '' }\n\t\t\t\t</div>\n\t\t\t`;\n\t\t} else {\n\t\t\timage_html += `\n\t\t\t\t<div class=\"col-2 border text-center rounded list-image\">\n\t\t\t\t\t<a class=\"product-link product-list-link\" href=\"/${ item.route || '#' }\"\n\t\t\t\t\t\tstyle=\"text-decoration: none\">\n\t\t\t\t\t\t<div class=\"card-img-top no-image-list\">\n\t\t\t\t\t\t\t${ frappe.get_abbr(title) }\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</a>\n\t\t\t\t\t${ wishlist_enabled ? this.get_wishlist_icon(item): '' }\n\t\t\t\t</div>\n\t\t\t`;\n\t\t}\n\n\t\treturn image_html;\n\t}\n\n\tget_row_body_html(item, title, settings) {\n\t\tlet body_html = `<div class='col-10 text-left'>`;\n\t\tbody_html += this.get_title_html(item, title, settings);\n\t\tbody_html += this.get_item_details(item, settings);\n\t\tbody_html += `</div>`;\n\t\treturn body_html;\n\t}\n\n\tget_title_html(item, title, settings) {\n\t\tlet title_html = `<div style=\"display: flex; margin-left: -15px;\">`;\n\t\ttitle_html += `\n\t\t\t<div class=\"col-8\" style=\"margin-right: -15px;\">\n\t\t\t\t<a class=\"\" href=\"/${ item.route || '#' }\"\n\t\t\t\t\tstyle=\"color: var(--gray-800); font-weight: 500;\">\n\t\t\t\t\t${ title }\n\t\t\t\t</a>\n\t\t\t</div>\n\t\t`;\n\n\t\tif (settings.enabled) {\n\t\t\ttitle_html += `<div class=\"col-4 cart-action-container ${item.in_cart ? 'd-flex' : ''}\">`;\n\t\t\ttitle_html += this.get_primary_button(item, settings);\n\t\t\ttitle_html += `</div>`;\n\t\t}\n\t\ttitle_html += `</div>`;\n\n\t\treturn title_html;\n\t}\n\n\tget_item_details(item, settings) {\n\t\tlet details = `\n\t\t\t<p class=\"product-code\">\n\t\t\t\t${ item.item_group } | Item Code : ${ item.item_code }\n\t\t\t</p>\n\t\t\t<div class=\"mt-2\" style=\"color: var(--gray-600) !important; font-size: 13px;\">\n\t\t\t\t${ item.short_description || '' }\n\t\t\t</div>\n\t\t\t<div class=\"product-price\">\n\t\t\t\t${ item.formatted_price || '' }\n\t\t`;\n\n\t\tif (item.formatted_mrp) {\n\t\t\tdetails += `\n\t\t\t\t<small class=\"striked-price\">\n\t\t\t\t\t<s>${ item.formatted_mrp ? item.formatted_mrp.replace(/ +/g, \"\") : \"\" }</s>\n\t\t\t\t</small>\n\t\t\t\t<small class=\"ml-1 product-info-green\">\n\t\t\t\t\t${ item.discount } OFF\n\t\t\t\t</small>\n\t\t\t`;\n\t\t}\n\n\t\tdetails += this.get_stock_availability(item, settings);\n\t\tdetails += `</div>`;\n\n\t\treturn details;\n\t}\n\n\tget_stock_availability(item, settings) {\n\t\tif (settings.show_stock_availability && !item.has_variants) {\n\t\t\tif (item.on_backorder) {\n\t\t\t\treturn `\n\t\t\t\t\t<br>\n\t\t\t\t\t<span class=\"out-of-stock mt-2\" style=\"color: var(--primary-color)\">\n\t\t\t\t\t\t${ __(\"Available on backorder\") }\n\t\t\t\t\t</span>\n\t\t\t\t`;\n\t\t\t} else if (!item.in_stock) {\n\t\t\t\treturn `\n\t\t\t\t\t<br>\n\t\t\t\t\t<span class=\"out-of-stock mt-2\">${ __(\"Out of stock\") }</span>\n\t\t\t\t`;\n\t\t\t}\n\t\t}\n\t\treturn ``;\n\t}\n\n\tget_wishlist_icon(item) {\n\t\tlet icon_class = item.wished ? \"wished\" : \"not-wished\";\n\n\t\treturn `\n\t\t\t<div class=\"like-action-list ${ item.wished ? \"like-action-wished\" : ''}\"\n\t\t\t\tdata-item-code=\"${ item.item_code }\">\n\t\t\t\t<svg class=\"icon sm\">\n\t\t\t\t\t<use class=\"${ icon_class } wish-icon\" href=\"#icon-heart\"></use>\n\t\t\t\t</svg>\n\t\t\t</div>\n\t\t`;\n\t}\n\n\tget_primary_button(item, settings) {\n\t\tif (item.has_variants) {\n\t\t\treturn `\n\t\t\t\t<a href=\"/${ item.route || '#' }\">\n\t\t\t\t\t<div class=\"btn btn-sm btn-explore-variants btn mb-0 mt-0\">\n\t\t\t\t\t\t${ __('Explore') }\n\t\t\t\t\t</div>\n\t\t\t\t</a>\n\t\t\t`;\n\t\t} else if (settings.enabled && (settings.allow_items_not_in_stock || item.in_stock)) {\n\t\t\treturn `\n\t\t\t\t<div id=\"${ item.name }\" class=\"btn\n\t\t\t\t\tbtn-sm btn-primary btn-add-to-cart-list mb-0\n\t\t\t\t\t${ item.in_cart ? 'hidden' : '' }\"\n\t\t\t\t\tdata-item-code=\"${ item.item_code }\"\n\t\t\t\t\tstyle=\"margin-top: 0px !important; max-height: 30px; float: right;\n\t\t\t\t\t\tpadding: 0.25rem 1rem; min-width: 135px;\">\n\t\t\t\t\t<span class=\"mr-2\">\n\t\t\t\t\t\t<svg class=\"icon icon-md\">\n\t\t\t\t\t\t\t<use href=\"#icon-assets\"></use>\n\t\t\t\t\t\t</svg>\n\t\t\t\t\t</span>\n\t\t\t\t\t${ settings.enable_checkout ? __('Add to Cart') :  __('Add to Quote') }\n\t\t\t\t</div>\n\n\t\t\t\t<div class=\"cart-indicator list-indicator ${item.in_cart ? '' : 'hidden'}\">\n\t\t\t\t\t1\n\t\t\t\t</div>\n\n\t\t\t\t<a href=\"/cart\">\n\t\t\t\t\t<div id=\"${ item.name }\" class=\"btn\n\t\t\t\t\t\tbtn-sm btn-primary btn-add-to-cart-list\n\t\t\t\t\t\tml-4 go-to-cart mb-0 mt-0\n\t\t\t\t\t\t${ item.in_cart ? '' : 'hidden' }\"\n\t\t\t\t\t\tdata-item-code=\"${ item.item_code }\"\n\t\t\t\t\t\tstyle=\"padding: 0.25rem 1rem; min-width: 135px;\">\n\t\t\t\t\t\t${ settings.enable_checkout ? __('Go to Cart') :  __('Go to Quote') }\n\t\t\t\t\t</div>\n\t\t\t\t</a>\n\t\t\t`;\n\t\t} else {\n\t\t\treturn ``;\n\t\t}\n\t}\n\n};", "erpnext.ProductView =  class {\n\t/* Options:\n\t\t- View Type\n\t\t- Products Section Wrapper,\n\t\t- Item Group: If its an Item Group page\n\t*/\n\tconstructor(options) {\n\t\tObject.assign(this, options);\n\t\tthis.preference = this.view_type;\n\t\tthis.make();\n\t}\n\n\tmake(from_filters=false) {\n\t\tthis.products_section.empty();\n\t\tthis.prepare_toolbar();\n\t\tthis.get_item_filter_data(from_filters);\n\t}\n\n\tprepare_toolbar() {\n\t\tthis.products_section.append(`\n\t\t\t<div class=\"toolbar d-flex\">\n\t\t\t</div>\n\t\t`);\n\t\tthis.prepare_search();\n\t\tthis.prepare_view_toggler();\n\n\t\tnew erpnext.ProductSearch();\n\t}\n\n\tprepare_view_toggler() {\n\n\t\tif (!$(\"#list\").length || !$(\"#image-view\").length) {\n\t\t\tthis.render_view_toggler();\n\t\t\tthis.bind_view_toggler_actions();\n\t\t\tthis.set_view_state();\n\t\t}\n\t}\n\n\tget_item_filter_data(from_filters=false) {\n\t\t// Get and render all Product related views\n\t\tlet me = this;\n\t\tthis.from_filters = from_filters;\n\t\tlet args = this.get_query_filters();\n\n\t\tthis.disable_view_toggler(true);\n\n\t\tfrappe.call({\n\t\t\tmethod: \"erpnext.e_commerce.api.get_product_filter_data\",\n\t\t\targs: {\n\t\t\t\tquery_args: args\n\t\t\t},\n\t\t\tcallback: function(result) {\n\t\t\t\tif (!result || result.exc || !result.message || result.message.exc) {\n\t\t\t\t\tme.render_no_products_section(true);\n\t\t\t\t} else {\n\t\t\t\t\t// Sub Category results are independent of Items\n\t\t\t\t\tif (me.item_group && result.message[\"sub_categories\"].length) {\n\t\t\t\t\t\tme.render_item_sub_categories(result.message[\"sub_categories\"]);\n\t\t\t\t\t}\n\n\t\t\t\t\tif (!result.message[\"items\"].length) {\n\t\t\t\t\t\t// if result has no items or result is empty\n\t\t\t\t\t\tme.render_no_products_section();\n\t\t\t\t\t} else {\n\t\t\t\t\t\t// Add discount filters\n\t\t\t\t\t\tme.re_render_discount_filters(result.message[\"filters\"].discount_filters);\n\n\t\t\t\t\t\t// Render views\n\t\t\t\t\t\tme.render_list_view(result.message[\"items\"], result.message[\"settings\"]);\n\t\t\t\t\t\tme.render_grid_view(result.message[\"items\"], result.message[\"settings\"]);\n\n\t\t\t\t\t\tme.products = result.message[\"items\"];\n\t\t\t\t\t\tme.product_count = result.message[\"items_count\"];\n\t\t\t\t\t}\n\n\t\t\t\t\t// Bind filter actions\n\t\t\t\t\tif (!from_filters) {\n\t\t\t\t\t\t// If `get_product_filter_data` was triggered after checking a filter,\n\t\t\t\t\t\t// don't touch filters unnecessarily, only data must change\n\t\t\t\t\t\t// filter persistence is handle on filter change event\n\t\t\t\t\t\tme.bind_filters();\n\t\t\t\t\t\tme.restore_filters_state();\n\t\t\t\t\t}\n\n\t\t\t\t\t// Bottom paging\n\t\t\t\t\tme.add_paging_section(result.message[\"settings\"]);\n\t\t\t\t}\n\n\t\t\t\tme.disable_view_toggler(false);\n\t\t\t}\n\t\t});\n\t}\n\n\tdisable_view_toggler(disable=false) {\n\t\t$('#list').prop('disabled', disable);\n\t\t$('#image-view').prop('disabled', disable);\n\t}\n\n\trender_grid_view(items, settings) {\n\t\t// loop over data and add grid html to it\n\t\tlet me = this;\n\t\tthis.prepare_product_area_wrapper(\"grid\");\n\n\t\tnew erpnext.ProductGrid({\n\t\t\titems: items,\n\t\t\tproducts_section: $(\"#products-grid-area\"),\n\t\t\tsettings: settings,\n\t\t\tpreference: me.preference\n\t\t});\n\t}\n\n\trender_list_view(items, settings) {\n\t\tlet me = this;\n\t\tthis.prepare_product_area_wrapper(\"list\");\n\n\t\tnew erpnext.ProductList({\n\t\t\titems: items,\n\t\t\tproducts_section: $(\"#products-list-area\"),\n\t\t\tsettings: settings,\n\t\t\tpreference: me.preference\n\t\t});\n\t}\n\n\tprepare_product_area_wrapper(view) {\n\t\tlet left_margin = view == \"list\" ? \"ml-2\" : \"\";\n\t\tlet top_margin = view == \"list\" ? \"mt-6\" : \"mt-minus-1\";\n\t\treturn this.products_section.append(`\n\t\t\t<br>\n\t\t\t<div id=\"products-${view}-area\" class=\"row products-list ${ top_margin } ${ left_margin }\"></div>\n\t\t`);\n\t}\n\n\tget_query_filters() {\n\t\tconst filters = frappe.utils.get_query_params();\n\t\tlet {field_filters, attribute_filters} = filters;\n\n\t\tfield_filters = field_filters ? JSON.parse(field_filters) : {};\n\t\tattribute_filters = attribute_filters ? JSON.parse(attribute_filters) : {};\n\n\t\treturn {\n\t\t\tfield_filters: field_filters,\n\t\t\tattribute_filters: attribute_filters,\n\t\t\titem_group: this.item_group,\n\t\t\tstart: filters.start || null,\n\t\t\tfrom_filters: this.from_filters || false\n\t\t};\n\t}\n\n\tadd_paging_section(settings) {\n\t\t$(\".product-paging-area\").remove();\n\n\t\tif (this.products) {\n\t\t\tlet paging_html = `\n\t\t\t\t<div class=\"row product-paging-area mt-5\">\n\t\t\t\t\t<div class=\"col-3\">\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"col-9 text-right\">\n\t\t\t`;\n\t\t\tlet query_params = frappe.utils.get_query_params();\n\t\t\tlet start = query_params.start ? cint(JSON.parse(query_params.start)) : 0;\n\t\t\tlet page_length = settings.products_per_page || 0;\n\n\t\t\tlet prev_disable = start > 0 ? \"\" : \"disabled\";\n\t\t\tlet next_disable = (this.product_count > page_length) ? \"\" : \"disabled\";\n\n\t\t\tpaging_html += `\n\t\t\t\t<button class=\"btn btn-default btn-prev\" data-start=\"${ start - page_length }\"\n\t\t\t\t\tstyle=\"float: left\" ${prev_disable}>\n\t\t\t\t\t${ __(\"Prev\") }\n\t\t\t\t</button>`;\n\n\t\t\tpaging_html += `\n\t\t\t\t<button class=\"btn btn-default btn-next\" data-start=\"${ start + page_length }\"\n\t\t\t\t\t${next_disable}>\n\t\t\t\t\t${ __(\"Next\") }\n\t\t\t\t</button>\n\t\t\t`;\n\n\t\t\tpaging_html += `</div></div>`;\n\n\t\t\t$(\".page_content\").append(paging_html);\n\t\t\tthis.bind_paging_action();\n\t\t}\n\t}\n\n\tprepare_search() {\n\t\t$(\".toolbar\").append(`\n\t\t\t<div class=\"input-group col-8 p-0\">\n\t\t\t\t<div class=\"dropdown w-100\" id=\"dropdownMenuSearch\">\n\t\t\t\t\t<input type=\"search\" name=\"query\" id=\"search-box\" class=\"form-control font-md\"\n\t\t\t\t\t\tplaceholder=\"Search for Products\"\n\t\t\t\t\t\taria-label=\"Product\" aria-describedby=\"button-addon2\">\n\t\t\t\t\t<div class=\"search-icon\">\n\t\t\t\t\t\t<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"16\" height=\"16\" viewBox=\"0 0 24 24\"\n\t\t\t\t\t\t\tfill=\"none\"\n\t\t\t\t\t\t\tstroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\"\n\t\t\t\t\t\t\tstroke-linejoin=\"round\"\n\t\t\t\t\t\t\tclass=\"feather feather-search\">\n\t\t\t\t\t\t\t<circle cx=\"11\" cy=\"11\" r=\"8\"></circle>\n\t\t\t\t\t\t\t<line x1=\"21\" y1=\"21\" x2=\"16.65\" y2=\"16.65\"></line>\n\t\t\t\t\t\t</svg>\n\t\t\t\t\t</div>\n\t\t\t\t\t<!-- Results dropdown rendered in product_search.js -->\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t`);\n\t}\n\n\trender_view_toggler() {\n\t\t$(\".toolbar\").append(`<div class=\"toggle-container col-4 p-0\"></div>`);\n\n\t\t[\"btn-list-view\", \"btn-grid-view\"].forEach(view => {\n\t\t\tlet icon = view === \"btn-list-view\" ? \"list\" : \"image-view\";\n\t\t\t$(\".toggle-container\").append(`\n\t\t\t\t<div class=\"form-group mb-0\" id=\"toggle-view\">\n\t\t\t\t\t<button id=\"${ icon }\" class=\"btn ${ view } mr-2\">\n\t\t\t\t\t\t<span>\n\t\t\t\t\t\t\t<svg class=\"icon icon-md\">\n\t\t\t\t\t\t\t\t<use href=\"#icon-${ icon }\"></use>\n\t\t\t\t\t\t\t</svg>\n\t\t\t\t\t\t</span>\n\t\t\t\t\t</button>\n\t\t\t\t</div>\n\t\t\t`);\n\t\t});\n\t}\n\n\tbind_view_toggler_actions() {\n\t\t$(\"#list\").click(function() {\n\t\t\tlet $btn = $(this);\n\t\t\t$btn.removeClass('btn-primary');\n\t\t\t$btn.addClass('btn-primary');\n\t\t\t$(\".btn-grid-view\").removeClass('btn-primary');\n\n\t\t\t$(\"#products-grid-area\").addClass(\"hidden\");\n\t\t\t$(\"#products-list-area\").removeClass(\"hidden\");\n\t\t\tlocalStorage.setItem(\"product_view\", \"List View\");\n\t\t});\n\n\t\t$(\"#image-view\").click(function() {\n\t\t\tlet $btn = $(this);\n\t\t\t$btn.removeClass('btn-primary');\n\t\t\t$btn.addClass('btn-primary');\n\t\t\t$(\".btn-list-view\").removeClass('btn-primary');\n\n\t\t\t$(\"#products-list-area\").addClass(\"hidden\");\n\t\t\t$(\"#products-grid-area\").removeClass(\"hidden\");\n\t\t\tlocalStorage.setItem(\"product_view\", \"Grid View\");\n\t\t});\n\t}\n\n\tset_view_state() {\n\t\tif (this.preference === \"List View\") {\n\t\t\t$(\"#list\").addClass('btn-primary');\n\t\t\t$(\"#image-view\").removeClass('btn-primary');\n\t\t} else {\n\t\t\t$(\"#image-view\").addClass('btn-primary');\n\t\t\t$(\"#list\").removeClass('btn-primary');\n\t\t}\n\t}\n\n\tbind_paging_action() {\n\t\tlet me = this;\n\t\t$('.btn-prev, .btn-next').click((e) => {\n\t\t\tconst $btn = $(e.target);\n\t\t\tme.from_filters = false;\n\n\t\t\t$btn.prop('disabled', true);\n\t\t\tconst start = $btn.data('start');\n\n\t\t\tlet query_params = frappe.utils.get_query_params();\n\t\t\tquery_params.start = start;\n\t\t\tlet path = window.location.pathname + '?' + frappe.utils.get_url_from_dict(query_params);\n\t\t\twindow.location.href = path;\n\t\t});\n\t}\n\n\tre_render_discount_filters(filter_data) {\n\t\tthis.get_discount_filter_html(filter_data);\n\t\tif (this.from_filters) {\n\t\t\t// Bind filter action if triggered via filters\n\t\t\t// if not from filter action, page load will bind actions\n\t\t\tthis.bind_discount_filter_action();\n\t\t}\n\t\t// discount filters are rendered with Items (later)\n\t\t// unlike the other filters\n\t\tthis.restore_discount_filter();\n\t}\n\n\tget_discount_filter_html(filter_data) {\n\t\t$(\"#discount-filters\").remove();\n\t\tif (filter_data) {\n\t\t\t$(\"#product-filters\").append(`\n\t\t\t\t<div id=\"discount-filters\" class=\"mb-4 filter-block pb-5\">\n\t\t\t\t\t<div class=\"filter-label mb-3\">${ __(\"Discounts\") }</div>\n\t\t\t\t</div>\n\t\t\t`);\n\n\t\t\tlet html = `<div class=\"filter-options\">`;\n\t\t\tfilter_data.forEach(filter => {\n\t\t\t\thtml += `\n\t\t\t\t\t<div class=\"checkbox\">\n\t\t\t\t\t\t<label data-value=\"${ filter[0] }\">\n\t\t\t\t\t\t\t<input type=\"radio\"\n\t\t\t\t\t\t\t\tclass=\"product-filter discount-filter\"\n\t\t\t\t\t\t\t\tname=\"discount\" id=\"${ filter[0] }\"\n\t\t\t\t\t\t\t\tdata-filter-name=\"discount\"\n\t\t\t\t\t\t\t\tdata-filter-value=\"${ filter[0] }\"\n\t\t\t\t\t\t\t\tstyle=\"width: 14px !important\"\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<span class=\"label-area\" for=\"${ filter[0] }\">\n\t\t\t\t\t\t\t\t\t${ filter[1] }\n\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t</label>\n\t\t\t\t\t</div>\n\t\t\t\t`;\n\t\t\t});\n\t\t\thtml += `</div>`;\n\n\t\t\t$(\"#discount-filters\").append(html);\n\t\t}\n\t}\n\n\trestore_discount_filter() {\n\t\tconst filters = frappe.utils.get_query_params();\n\t\tlet field_filters = filters.field_filters;\n\t\tif (!field_filters) return;\n\n\t\tfield_filters = JSON.parse(field_filters);\n\n\t\tif (field_filters && field_filters[\"discount\"]) {\n\t\t\tconst values = field_filters[\"discount\"];\n\t\t\tconst selector = values.map(value => {\n\t\t\t\treturn `input[data-filter-name=\"discount\"][data-filter-value=\"${value}\"]`;\n\t\t\t}).join(',');\n\t\t\t$(selector).prop('checked', true);\n\t\t\tthis.field_filters = field_filters;\n\t\t}\n\t}\n\n\tbind_discount_filter_action() {\n\t\tlet me = this;\n\t\t$('.discount-filter').on('change', (e) => {\n\t\t\tconst $checkbox = $(e.target);\n\t\t\tconst is_checked = $checkbox.is(':checked');\n\n\t\t\tconst {\n\t\t\t\tfilterValue: filter_value\n\t\t\t} = $checkbox.data();\n\n\t\t\tdelete this.field_filters[\"discount\"];\n\n\t\t\tif (is_checked) {\n\t\t\t\tthis.field_filters[\"discount\"] = [];\n\t\t\t\tthis.field_filters[\"discount\"].push(filter_value);\n\t\t\t}\n\n\t\t\tif (this.field_filters[\"discount\"].length === 0) {\n\t\t\t\tdelete this.field_filters[\"discount\"];\n\t\t\t}\n\n\t\t\tme.change_route_with_filters();\n\t\t});\n\t}\n\n\tbind_filters() {\n\t\tlet me = this;\n\t\tthis.field_filters = {};\n\t\tthis.attribute_filters = {};\n\n\t\t$('.product-filter').on('change', (e) => {\n\t\t\tme.from_filters = true;\n\n\t\t\tconst $checkbox = $(e.target);\n\t\t\tconst is_checked = $checkbox.is(':checked');\n\n\t\t\tif ($checkbox.is('.attribute-filter')) {\n\t\t\t\tconst {\n\t\t\t\t\tattributeName: attribute_name,\n\t\t\t\t\tattributeValue: attribute_value\n\t\t\t\t} = $checkbox.data();\n\n\t\t\t\tif (is_checked) {\n\t\t\t\t\tthis.attribute_filters[attribute_name] = this.attribute_filters[attribute_name] || [];\n\t\t\t\t\tthis.attribute_filters[attribute_name].push(attribute_value);\n\t\t\t\t} else {\n\t\t\t\t\tthis.attribute_filters[attribute_name] = this.attribute_filters[attribute_name] || [];\n\t\t\t\t\tthis.attribute_filters[attribute_name] = this.attribute_filters[attribute_name].filter(v => v !== attribute_value);\n\t\t\t\t}\n\n\t\t\t\tif (this.attribute_filters[attribute_name].length === 0) {\n\t\t\t\t\tdelete this.attribute_filters[attribute_name];\n\t\t\t\t}\n\t\t\t} else if ($checkbox.is('.field-filter') || $checkbox.is('.discount-filter')) {\n\t\t\t\tconst {\n\t\t\t\t\tfilterName: filter_name,\n\t\t\t\t\tfilterValue: filter_value\n\t\t\t\t} = $checkbox.data();\n\n\t\t\t\tif ($checkbox.is('.discount-filter')) {\n\t\t\t\t\t// clear previous discount filter to accomodate new\n\t\t\t\t\tdelete this.field_filters[\"discount\"];\n\t\t\t\t}\n\t\t\t\tif (is_checked) {\n\t\t\t\t\tthis.field_filters[filter_name] = this.field_filters[filter_name] || [];\n\t\t\t\t\tif (!in_list(this.field_filters[filter_name], filter_value)) {\n\t\t\t\t\t\tthis.field_filters[filter_name].push(filter_value);\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tthis.field_filters[filter_name] = this.field_filters[filter_name] || [];\n\t\t\t\t\tthis.field_filters[filter_name] = this.field_filters[filter_name].filter(v => v !== filter_value);\n\t\t\t\t}\n\n\t\t\t\tif (this.field_filters[filter_name].length === 0) {\n\t\t\t\t\tdelete this.field_filters[filter_name];\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tme.change_route_with_filters();\n\t\t});\n\n\t\t// bind filter lookup input box\n\t\t$('.filter-lookup-input').on('keydown', frappe.utils.debounce((e) => {\n\t\t\tconst $input = $(e.target);\n\t\t\tconst keyword = ($input.val() || '').toLowerCase();\n\t\t\tconst $filter_options = $input.next('.filter-options');\n\n\t\t\t$filter_options.find('.filter-lookup-wrapper').show();\n\t\t\t$filter_options.find('.filter-lookup-wrapper').each((i, el) => {\n\t\t\t\tconst $el = $(el);\n\t\t\t\tconst value = $el.data('value').toLowerCase();\n\t\t\t\tif (!value.includes(keyword)) {\n\t\t\t\t\t$el.hide();\n\t\t\t\t}\n\t\t\t});\n\t\t}, 300));\n\t}\n\n\tchange_route_with_filters() {\n\t\tlet route_params = frappe.utils.get_query_params();\n\n\t\tlet start = this.if_key_exists(route_params.start) || 0;\n\t\tif (this.from_filters) {\n\t\t\tstart = 0; // show items from first page if new filters are triggered\n\t\t}\n\n\t\tconst query_string = this.get_query_string({\n\t\t\tstart: start,\n\t\t\tfield_filters: JSON.stringify(this.if_key_exists(this.field_filters)),\n\t\t\tattribute_filters: JSON.stringify(this.if_key_exists(this.attribute_filters)),\n\t\t});\n\t\twindow.history.pushState('filters', '', `${location.pathname}?` + query_string);\n\n\t\t$('.page_content input').prop('disabled', true);\n\n\t\tthis.make(true);\n\t\t$('.page_content input').prop('disabled', false);\n\t}\n\n\trestore_filters_state() {\n\t\tconst filters = frappe.utils.get_query_params();\n\t\tlet {field_filters, attribute_filters} = filters;\n\n\t\tif (field_filters) {\n\t\t\tfield_filters = JSON.parse(field_filters);\n\t\t\tfor (let fieldname in field_filters) {\n\t\t\t\tconst values = field_filters[fieldname];\n\t\t\t\tconst selector = values.map(value => {\n\t\t\t\t\treturn `input[data-filter-name=\"${fieldname}\"][data-filter-value=\"${value}\"]`;\n\t\t\t\t}).join(',');\n\t\t\t\t$(selector).prop('checked', true);\n\t\t\t}\n\t\t\tthis.field_filters = field_filters;\n\t\t}\n\t\tif (attribute_filters) {\n\t\t\tattribute_filters = JSON.parse(attribute_filters);\n\t\t\tfor (let attribute in attribute_filters) {\n\t\t\t\tconst values = attribute_filters[attribute];\n\t\t\t\tconst selector = values.map(value => {\n\t\t\t\t\treturn `input[data-attribute-name=\"${attribute}\"][data-attribute-value=\"${value}\"]`;\n\t\t\t\t}).join(',');\n\t\t\t\t$(selector).prop('checked', true);\n\t\t\t}\n\t\t\tthis.attribute_filters = attribute_filters;\n\t\t}\n\t}\n\n\trender_no_products_section(error=false) {\n\t\tlet error_section = `\n\t\t\t<div class=\"mt-4 w-100 alert alert-error font-md\">\n\t\t\t\tSomething went wrong. Please refresh or contact us.\n\t\t\t</div>\n\t\t`;\n\t\tlet no_results_section = `\n\t\t\t<div class=\"cart-empty frappe-card mt-4\">\n\t\t\t\t<div class=\"cart-empty-state\">\n\t\t\t\t\t<img src=\"/assets/erpnext/images/ui-states/cart-empty-state.png\" alt=\"Empty Cart\">\n\t\t\t\t</div>\n\t\t\t\t<div class=\"cart-empty-message mt-4\">${ __('No products found') }</p>\n\t\t\t</div>\n\t\t`;\n\n\t\tthis.products_section.append(error ? error_section : no_results_section);\n\t}\n\n\trender_item_sub_categories(categories) {\n\t\tif (categories && categories.length) {\n\t\t\tlet sub_group_html = `\n\t\t\t\t<div class=\"sub-category-container scroll-categories\">\n\t\t\t`;\n\n\t\t\tcategories.forEach(category => {\n\t\t\t\tsub_group_html += `\n\t\t\t\t\t<a href=\"/${ category.route || '#' }\" style=\"text-decoration: none;\">\n\t\t\t\t\t\t<div class=\"category-pill\">\n\t\t\t\t\t\t\t${ category.name }\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</a>\n\t\t\t\t`;\n\t\t\t});\n\t\t\tsub_group_html += `</div>`;\n\n\t\t\t$(\"#product-listing\").prepend(sub_group_html);\n\t\t}\n\t}\n\n\tget_query_string(object) {\n\t\tconst url = new URLSearchParams();\n\t\tfor (let key in object) {\n\t\t\tconst value = object[key];\n\t\t\tif (value) {\n\t\t\t\turl.append(key, value);\n\t\t\t}\n\t\t}\n\t\treturn url.toString();\n\t}\n\n\tif_key_exists(obj) {\n\t\tlet exists = false;\n\t\tfor (let key in obj) {\n\t\t\tif (Object.prototype.hasOwnProperty.call(obj, key) && obj[key]) {\n\t\t\t\texists = true;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t\treturn exists ? obj : undefined;\n\t}\n};", "erpnext.ProductGrid = class {\n\t/* Options:\n\t\t- items: Items\n\t\t- settings: E Commerce Settings\n\t\t- products_section: Products Wrapper\n\t\t- preference: If preference is not grid view, render but hide\n\t*/\n\tconstructor(options) {\n\t\tObject.assign(this, options);\n\n\t\tif (this.preference !== \"Grid View\") {\n\t\t\tthis.products_section.addClass(\"hidden\");\n\t\t}\n\n\t\tthis.products_section.empty();\n\t\tthis.make();\n\t}\n\n\tmake() {\n\t\tlet me = this;\n\t\tlet html = ``;\n\n\t\tthis.items.forEach(item => {\n\t\t\tlet title = item.web_item_name || item.item_name || item.item_code || \"\";\n\t\t\ttitle =  title.length > 90 ? title.substr(0, 90) + \"...\" : title;\n\n\t\t\thtml += `<div class=\"col-sm-4 item-card\"><div class=\"card text-left\">`;\n\t\t\thtml += me.get_image_html(item, title);\n\t\t\thtml += me.get_card_body_html(item, title, me.settings);\n\t\t\thtml += `</div></div>`;\n\t\t});\n\n\t\tlet $product_wrapper = this.products_section;\n\t\t$product_wrapper.append(html);\n\t}\n\n\tget_image_html(item, title) {\n\t\tlet image = item.website_image;\n\n\t\tif (image) {\n\t\t\treturn `\n\t\t\t\t<div class=\"card-img-container\">\n\t\t\t\t\t<a href=\"/${ item.route || '#' }\" style=\"text-decoration: none;\">\n\t\t\t\t\t\t<img class=\"card-img\" src=\"${ image }\" alt=\"${ title }\">\n\t\t\t\t\t</a>\n\t\t\t\t</div>\n\t\t\t`;\n\t\t} else {\n\t\t\treturn `\n\t\t\t\t<div class=\"card-img-container\">\n\t\t\t\t\t<a href=\"/${ item.route || '#' }\" style=\"text-decoration: none;\">\n\t\t\t\t\t\t<div class=\"card-img-top no-image\">\n\t\t\t\t\t\t\t${ frappe.get_abbr(title) }\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</a>\n\t\t\t\t</div>\n\t\t\t`;\n\t\t}\n\t}\n\n\tget_card_body_html(item, title, settings) {\n\t\tlet body_html = `\n\t\t\t<div class=\"card-body text-left card-body-flex\" style=\"width:100%\">\n\t\t\t\t<div style=\"margin-top: 1rem; display: flex;\">\n\t\t`;\n\t\tbody_html += this.get_title(item, title);\n\n\t\t// get floating elements\n\t\tif (!item.has_variants) {\n\t\t\tif (settings.enable_wishlist) {\n\t\t\t\tbody_html += this.get_wishlist_icon(item);\n\t\t\t}\n\t\t\tif (settings.enabled) {\n\t\t\t\tbody_html += this.get_cart_indicator(item);\n\t\t\t}\n\n\t\t}\n\n\t\tbody_html += `</div>`;\n\t\tbody_html += `<div class=\"product-category\">${ item.item_group || '' }</div>`;\n\n\t\tif (item.formatted_price) {\n\t\t\tbody_html += this.get_price_html(item);\n\t\t}\n\n\t\tbody_html += this.get_stock_availability(item, settings);\n\t\tbody_html += this.get_primary_button(item, settings);\n\t\tbody_html += `</div>`; // close div on line 49\n\n\t\treturn body_html;\n\t}\n\n\tget_title(item, title) {\n\t\tlet title_html = `\n\t\t\t<a href=\"/${ item.route || '#' }\">\n\t\t\t\t<div class=\"product-title\">\n\t\t\t\t\t${ title || '' }\n\t\t\t\t</div>\n\t\t\t</a>\n\t\t`;\n\t\treturn title_html;\n\t}\n\n\tget_wishlist_icon(item) {\n\t\tlet icon_class = item.wished ? \"wished\" : \"not-wished\";\n\t\treturn `\n\t\t\t<div class=\"like-action ${ item.wished ? \"like-action-wished\" : ''}\"\n\t\t\t\tdata-item-code=\"${ item.item_code }\">\n\t\t\t\t<svg class=\"icon sm\">\n\t\t\t\t\t<use class=\"${ icon_class } wish-icon\" href=\"#icon-heart\"></use>\n\t\t\t\t</svg>\n\t\t\t</div>\n\t\t`;\n\t}\n\n\tget_cart_indicator(item) {\n\t\treturn `\n\t\t\t<div class=\"cart-indicator ${item.in_cart ? '' : 'hidden'}\" data-item-code=\"${ item.item_code }\">\n\t\t\t\t1\n\t\t\t</div>\n\t\t`;\n\t}\n\n\tget_price_html(item) {\n\t\tlet price_html = `\n\t\t\t<div class=\"product-price\">\n\t\t\t\t${ item.formatted_price || '' }\n\t\t`;\n\n\t\tif (item.formatted_mrp) {\n\t\t\tprice_html += `\n\t\t\t\t<small class=\"striked-price\">\n\t\t\t\t\t<s>${ item.formatted_mrp ? item.formatted_mrp.replace(/ +/g, \"\") : \"\" }</s>\n\t\t\t\t</small>\n\t\t\t\t<small class=\"ml-1 product-info-green\">\n\t\t\t\t\t${ item.discount } OFF\n\t\t\t\t</small>\n\t\t\t`;\n\t\t}\n\t\tprice_html += `</div>`;\n\t\treturn price_html;\n\t}\n\n\tget_stock_availability(item, settings) {\n\t\tif (settings.show_stock_availability && !item.has_variants) {\n\t\t\tif (item.on_backorder) {\n\t\t\t\treturn `\n\t\t\t\t\t<span class=\"out-of-stock mb-2 mt-1\" style=\"color: var(--primary-color)\">\n\t\t\t\t\t\t${ __(\"Available on backorder\") }\n\t\t\t\t\t</span>\n\t\t\t\t`;\n\t\t\t} else if (!item.in_stock) {\n\t\t\t\treturn `\n\t\t\t\t\t<span class=\"out-of-stock mb-2 mt-1\">\n\t\t\t\t\t\t${ __(\"Out of stock\") }\n\t\t\t\t\t</span>\n\t\t\t\t`;\n\t\t\t}\n\t\t}\n\n\t\treturn ``;\n\t}\n\n\tget_primary_button(item, settings) {\n\t\tif (item.has_variants) {\n\t\t\treturn `\n\t\t\t\t<a href=\"/${ item.route || '#' }\">\n\t\t\t\t\t<div class=\"btn btn-sm btn-explore-variants w-100 mt-4\">\n\t\t\t\t\t\t${ __('Explore') }\n\t\t\t\t\t</div>\n\t\t\t\t</a>\n\t\t\t`;\n\t\t} else if (settings.enabled && (settings.allow_items_not_in_stock || item.in_stock)) {\n\t\t\treturn `\n\t\t\t\t<div id=\"${ item.name }\" class=\"btn\n\t\t\t\t\tbtn-sm btn-primary btn-add-to-cart-list\n\t\t\t\t\tw-100 mt-2 ${ item.in_cart ? 'hidden' : '' }\"\n\t\t\t\t\tdata-item-code=\"${ item.item_code }\">\n\t\t\t\t\t<span class=\"mr-2\">\n\t\t\t\t\t\t<svg class=\"icon icon-md\">\n\t\t\t\t\t\t\t<use href=\"#icon-assets\"></use>\n\t\t\t\t\t\t</svg>\n\t\t\t\t\t</span>\n\t\t\t\t\t${ settings.enable_checkout ? __('Add to Cart') :  __('Add to Quote') }\n\t\t\t\t</div>\n\n\t\t\t\t<a href=\"/cart\">\n\t\t\t\t\t<div id=\"${ item.name }\" class=\"btn\n\t\t\t\t\t\tbtn-sm btn-primary btn-add-to-cart-list\n\t\t\t\t\t\tw-100 mt-4 go-to-cart-grid\n\t\t\t\t\t\t${ item.in_cart ? '' : 'hidden' }\"\n\t\t\t\t\t\tdata-item-code=\"${ item.item_code }\">\n\t\t\t\t\t\t${ settings.enable_checkout ? __('Go to Cart') :  __('Go to Quote') }\n\t\t\t\t\t</div>\n\t\t\t\t</a>\n\t\t\t`;\n\t\t} else {\n\t\t\treturn ``;\n\t\t}\n\t}\n};", "erpnext.ProductSearch = class {\n\tconstructor(opts) {\n\t\t/* Options: search_box_id (for custom search box) */\n\t\t$.extend(this, opts);\n\t\tthis.MAX_RECENT_SEARCHES = 4;\n\t\tthis.search_box_id = this.search_box_id || \"#search-box\";\n\t\tthis.searchBox = $(this.search_box_id);\n\n\t\tthis.setupSearchDropDown();\n\t\tthis.bindSearchAction();\n\t}\n\n\tsetupSearchDropDown() {\n\t\tthis.search_area = $(\"#dropdownMenuSearch\");\n\t\tthis.setupSearchResultContainer();\n\t\tthis.populateRecentSearches();\n\t}\n\n\tbindSearchAction() {\n\t\tlet me = this;\n\n\t\t// Show Search dropdown\n\t\tthis.searchBox.on(\"focus\", () => {\n\t\t\tthis.search_dropdown.removeClass(\"hidden\");\n\t\t});\n\n\t\t// If click occurs outside search input/results, hide results.\n\t\t// Click can happen anywhere on the page\n\t\t$(\"body\").on(\"click\", (e) => {\n\t\t\tlet searchEvent = $(e.target).closest(this.search_box_id).length;\n\t\t\tlet resultsEvent = $(e.target).closest('#search-results-container').length;\n\t\t\tlet isResultHidden = this.search_dropdown.hasClass(\"hidden\");\n\n\t\t\tif (!searchEvent && !resultsEvent && !isResultHidden) {\n\t\t\t\tthis.search_dropdown.addClass(\"hidden\");\n\t\t\t}\n\t\t});\n\n\t\t// Process search input\n\t\tthis.searchBox.on(\"input\", (e) => {\n\t\t\tlet query = e.target.value;\n\n\t\t\tif (query.length == 0) {\n\t\t\t\tme.populateResults(null);\n\t\t\t\tme.populateCategoriesList(null);\n\t\t\t}\n\n\t\t\tif (query.length < 3 || !query.length) return;\n\n\t\t\tfrappe.call({\n\t\t\t\tmethod: \"erpnext.templates.pages.product_search.search\",\n\t\t\t\targs: {\n\t\t\t\t\tquery: query\n\t\t\t\t},\n\t\t\t\tcallback: (data) => {\n\t\t\t\t\tlet product_results = null, category_results = null;\n\n\t\t\t\t\t// Populate product results\n\t\t\t\t\tproduct_results = data.message ? data.message.product_results : null;\n\t\t\t\t\tme.populateResults(product_results);\n\n\t\t\t\t\t// Populate categories\n\t\t\t\t\tif (me.category_container) {\n\t\t\t\t\t\tcategory_results = data.message ? data.message.category_results : null;\n\t\t\t\t\t\tme.populateCategoriesList(category_results);\n\t\t\t\t\t}\n\n\t\t\t\t\t// Populate recent search chips only on successful queries\n\t\t\t\t\tif (!$.isEmptyObject(product_results) || !$.isEmptyObject(category_results)) {\n\t\t\t\t\t\tme.setRecentSearches(query);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tthis.search_dropdown.removeClass(\"hidden\");\n\t\t});\n\t}\n\n\tsetupSearchResultContainer() {\n\t\tthis.search_dropdown = this.search_area.append(`\n\t\t\t<div class=\"overflow-hidden shadow dropdown-menu w-100 hidden\"\n\t\t\t\tid=\"search-results-container\"\n\t\t\t\taria-labelledby=\"dropdownMenuSearch\"\n\t\t\t\tstyle=\"display: flex; flex-direction: column;\">\n\t\t\t</div>\n\t\t`).find(\"#search-results-container\");\n\n\t\tthis.setupCategoryContainer();\n\t\tthis.setupProductsContainer();\n\t\tthis.setupRecentsContainer();\n\t}\n\n\tsetupProductsContainer() {\n\t\tthis.products_container = this.search_dropdown.append(`\n\t\t\t<div id=\"product-results mt-2\">\n\t\t\t\t<div id=\"product-scroll\" style=\"overflow: scroll; max-height: 300px\">\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t`).find(\"#product-scroll\");\n\t}\n\n\tsetupCategoryContainer() {\n\t\tthis.category_container = this.search_dropdown.append(`\n\t\t\t<div class=\"category-container mt-2 mb-1\">\n\t\t\t\t<div class=\"category-chips\">\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t`).find(\".category-chips\");\n\t}\n\n\tsetupRecentsContainer() {\n\t\tlet $recents_section = this.search_dropdown.append(`\n\t\t\t<div class=\"mb-2 mt-2 recent-searches\">\n\t\t\t\t<div>\n\t\t\t\t\t<b>${ __(\"Recent\") }</b>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t`).find(\".recent-searches\");\n\n\t\tthis.recents_container = $recents_section.append(`\n\t\t\t<div id=\"recents\" style=\"padding: .25rem 0 1rem 0;\">\n\t\t\t</div>\n\t\t`).find(\"#recents\");\n\t}\n\n\tgetRecentSearches() {\n\t\treturn JSON.parse(localStorage.getItem(\"recent_searches\") || \"[]\");\n\t}\n\n\tattachEventListenersToChips() {\n\t\tlet me  = this;\n\t\tconst chips = $(\".recent-search\");\n\t\twindow.chips = chips;\n\n\t\tfor (let chip of chips) {\n\t\t\tchip.addEventListener(\"click\", () => {\n\t\t\t\tme.searchBox[0].value = chip.innerText.trim();\n\n\t\t\t\t// Start search with `recent query`\n\t\t\t\tme.searchBox.trigger(\"input\");\n\t\t\t\tme.searchBox.focus();\n\t\t\t});\n\t\t}\n\t}\n\n\tsetRecentSearches(query) {\n\t\tlet recents = this.getRecentSearches();\n\t\tif (recents.length >= this.MAX_RECENT_SEARCHES) {\n\t\t\t// Remove the `first` query\n\t\t\trecents.splice(0, 1);\n\t\t}\n\n\t\tif (recents.indexOf(query) >= 0) {\n\t\t\treturn;\n\t\t}\n\n\t\trecents.push(query);\n\t\tlocalStorage.setItem(\"recent_searches\", JSON.stringify(recents));\n\n\t\tthis.populateRecentSearches();\n\t}\n\n\tpopulateRecentSearches() {\n\t\tlet recents = this.getRecentSearches();\n\n\t\tif (!recents.length) {\n\t\t\tthis.recents_container.html(`<span class=\"\"text-muted\">No searches yet.</span>`);\n\t\t\treturn;\n\t\t}\n\n\t\tlet html = \"\";\n\t\trecents.forEach((key) => {\n\t\t\thtml += `\n\t\t\t\t<div class=\"recent-search mr-1\" style=\"font-size: 13px\">\n\t\t\t\t\t<span class=\"mr-2\">\n\t\t\t\t\t\t<svg width=\"20\" height=\"20\" viewBox=\"0 0 16 16\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n\t\t\t\t\t\t\t<path d=\"M8 14C11.3137 14 14 11.3137 14 8C14 4.68629 11.3137 2 8 2C4.68629 2 2 4.68629 2 8C2 11.3137 4.68629 14 8 14Z\" stroke=\"var(--gray-500)\"\" stroke-miterlimit=\"10\" stroke-linecap=\"round\" stroke-linejoin=\"round\"/>\n\t\t\t\t\t\t\t<path d=\"M8.00027 5.20947V8.00017L10 10\" stroke=\"var(--gray-500)\" stroke-miterlimit=\"10\" stroke-linecap=\"round\" stroke-linejoin=\"round\"/>\n\t\t\t\t\t\t</svg>\n\t\t\t\t\t</span>\n\t\t\t\t\t${ key }\n\t\t\t\t</div>\n\t\t\t`;\n\t\t});\n\n\t\tthis.recents_container.html(html);\n\t\tthis.attachEventListenersToChips();\n\t}\n\n\tpopulateResults(product_results) {\n\t\tif (!product_results || product_results.length === 0) {\n\t\t\tlet empty_html = ``;\n\t\t\tthis.products_container.html(empty_html);\n\t\t\treturn;\n\t\t}\n\n\t\tlet html = \"\";\n\n\t\tproduct_results.forEach((res) => {\n\t\t\tlet thumbnail = res.thumbnail || '/assets/erpnext/images/ui-states/cart-empty-state.png';\n\t\t\thtml += `\n\t\t\t\t<div class=\"dropdown-item\" style=\"display: flex;\">\n\t\t\t\t\t<img class=\"item-thumb col-2\" src=${thumbnail} />\n\t\t\t\t\t<div class=\"col-9\" style=\"white-space: normal;\">\n\t\t\t\t\t\t<a href=\"/${res.route}\">${res.web_item_name}</a><br>\n\t\t\t\t\t\t<span class=\"brand-line\">${res.brand ? \"by \" + res.brand : \"\"}</span>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t`;\n\t\t});\n\n\t\tthis.products_container.html(html);\n\t}\n\n\tpopulateCategoriesList(category_results) {\n\t\tif (!category_results || category_results.length === 0) {\n\t\t\tlet empty_html = `\n\t\t\t\t<div class=\"category-container mt-2\">\n\t\t\t\t\t<div class=\"category-chips\">\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t`;\n\t\t\tthis.category_container.html(empty_html);\n\t\t\treturn;\n\t\t}\n\n\t\tlet html = `\n\t\t\t<div class=\"mb-2\">\n\t\t\t\t<b>${ __(\"Categories\") }</b>\n\t\t\t</div>\n\t\t`;\n\n\t\tcategory_results.forEach((category) => {\n\t\t\thtml += `\n\t\t\t\t<a href=\"/${category.route}\" class=\"btn btn-sm category-chip mr-2 mb-2\"\n\t\t\t\t\tstyle=\"font-size: 13px\" role=\"button\">\n\t\t\t\t${ category.name }\n\t\t\t\t</button>\n\t\t\t`;\n\t\t});\n\n\t\tthis.category_container.html(html);\n\t}\n};"],
  "mappings": "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",
  "names": []
}
