(()=>{var op=Object.create;var Bi=Object.defineProperty,ap=Object.defineProperties,sp=Object.getOwnPropertyDescriptor,lp=Object.getOwnPropertyDescriptors,cp=Object.getOwnPropertyNames,ba=Object.getOwnPropertySymbols,up=Object.getPrototypeOf,wa=Object.prototype.hasOwnProperty,dp=Object.prototype.propertyIsEnumerable;var ya=(r,t,e)=>t in r?Bi(r,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):r[t]=e,lt=(r,t)=>{for(var e in t||(t={}))wa.call(t,e)&&ya(r,e,t[e]);if(ba)for(var e of ba(t))dp.call(t,e)&&ya(r,e,t[e]);return r},Ht=(r,t)=>ap(r,lp(t));var ti=(r=>typeof require!="undefined"?require:typeof Proxy!="undefined"?new Proxy(r,{get:(t,e)=>(typeof require!="undefined"?require:t)[e]}):r)(function(r){if(typeof require!="undefined")return require.apply(this,arguments);throw new Error('Dynamic require of "'+r+'" is not supported')});var we=(r,t)=>()=>(t||r((t={exports:{}}).exports,t),t.exports),fp=(r,t)=>{for(var e in t)Bi(r,e,{get:t[e],enumerable:!0})},pp=(r,t,e,i)=>{if(t&&typeof t=="object"||typeof t=="function")for(let n of cp(t))!wa.call(r,n)&&n!==e&&Bi(r,n,{get:()=>t[n],enumerable:!(i=sp(t,n))||i.enumerable});return r};var Vt=(r,t,e)=>(e=r!=null?op(up(r)):{},pp(t||!r||!r.__esModule?Bi(e,"default",{value:r,enumerable:!0}):e,r));var rs=we((O3,ts)=>{"use strict";var Qa=Array.isArray,es=Object.keys,zp=Object.prototype.hasOwnProperty;ts.exports=function r(t,e){if(t===e)return!0;if(t&&e&&typeof t=="object"&&typeof e=="object"){var i=Qa(t),n=Qa(e),o,a,s;if(i&&n){if(a=t.length,a!=e.length)return!1;for(o=a;o--!==0;)if(!r(t[o],e[o]))return!1;return!0}if(i!=n)return!1;var l=t instanceof Date,d=e instanceof Date;if(l!=d)return!1;if(l&&d)return t.getTime()==e.getTime();var u=t instanceof RegExp,h=e instanceof RegExp;if(u!=h)return!1;if(u&&h)return t.toString()==e.toString();var p=es(t);if(a=p.length,a!==es(e).length)return!1;for(o=a;o--!==0;)if(!zp.call(e,p[o]))return!1;for(o=a;o--!==0;)if(s=p[o],!r(t[s],e[s]))return!1;return!0}return t!==t&&e!==e}});var ns=we(($3,is)=>{function Hp(){this.__data__=[],this.size=0}is.exports=Hp});var oo=we((L3,os)=>{function qp(r,t){return r===t||r!==r&&t!==t}os.exports=qp});var ui=we((B3,as)=>{var Wp=oo();function Up(r,t){for(var e=r.length;e--;)if(Wp(r[e][0],t))return e;return-1}as.exports=Up});var ls=we((I3,ss)=>{var Vp=ui(),Yp=Array.prototype,Gp=Yp.splice;function Xp(r){var t=this.__data__,e=Vp(t,r);if(e<0)return!1;var i=t.length-1;return e==i?t.pop():Gp.call(t,e,1),--this.size,!0}ss.exports=Xp});var us=we((R3,cs)=>{var Kp=ui();function Jp(r){var t=this.__data__,e=Kp(t,r);return e<0?void 0:t[e][1]}cs.exports=Jp});var fs=we((P3,ds)=>{var Zp=ui();function Qp(r){return Zp(this.__data__,r)>-1}ds.exports=Qp});var hs=we((N3,ps)=>{var eh=ui();function th(r,t){var e=this.__data__,i=eh(e,r);return i<0?(++this.size,e.push([r,t])):e[i][1]=t,this}ps.exports=th});var di=we((j3,_s)=>{var rh=ns(),ih=ls(),nh=us(),oh=fs(),ah=hs();function Rr(r){var t=-1,e=r==null?0:r.length;for(this.clear();++t<e;){var i=r[t];this.set(i[0],i[1])}}Rr.prototype.clear=rh;Rr.prototype.delete=ih;Rr.prototype.get=nh;Rr.prototype.has=oh;Rr.prototype.set=ah;_s.exports=Rr});var ms=we((D3,gs)=>{var sh=di();function lh(){this.__data__=new sh,this.size=0}gs.exports=lh});var bs=we((F3,vs)=>{function ch(r){var t=this.__data__,e=t.delete(r);return this.size=t.size,e}vs.exports=ch});var ws=we((z3,ys)=>{function uh(r){return this.__data__.get(r)}ys.exports=uh});var xs=we((H3,ks)=>{function dh(r){return this.__data__.has(r)}ks.exports=dh});var ao=we((q3,Cs)=>{var fh=typeof global=="object"&&global&&global.Object===Object&&global;Cs.exports=fh});var lr=we((W3,Ss)=>{var ph=ao(),hh=typeof self=="object"&&self&&self.Object===Object&&self,_h=ph||hh||Function("return this")();Ss.exports=_h});var Vi=we((U3,Ts)=>{var gh=lr(),mh=gh.Symbol;Ts.exports=mh});var Ms=we((V3,Os)=>{var Es=Vi(),As=Object.prototype,vh=As.hasOwnProperty,bh=As.toString,fi=Es?Es.toStringTag:void 0;function yh(r){var t=vh.call(r,fi),e=r[fi];try{r[fi]=void 0;var i=!0}catch(o){}var n=bh.call(r);return i&&(t?r[fi]=e:delete r[fi]),n}Os.exports=yh});var Ls=we((Y3,$s)=>{var wh=Object.prototype,kh=wh.toString;function xh(r){return kh.call(r)}$s.exports=xh});var pi=we((G3,Rs)=>{var Bs=Vi(),Ch=Ms(),Sh=Ls(),Th="[object Null]",Eh="[object Undefined]",Is=Bs?Bs.toStringTag:void 0;function Ah(r){return r==null?r===void 0?Eh:Th:Is&&Is in Object(r)?Ch(r):Sh(r)}Rs.exports=Ah});var Pr=we((X3,Ps)=>{function Oh(r){var t=typeof r;return r!=null&&(t=="object"||t=="function")}Ps.exports=Oh});var so=we((K3,Ns)=>{var Mh=pi(),$h=Pr(),Lh="[object AsyncFunction]",Bh="[object Function]",Ih="[object GeneratorFunction]",Rh="[object Proxy]";function Ph(r){if(!$h(r))return!1;var t=Mh(r);return t==Bh||t==Ih||t==Lh||t==Rh}Ns.exports=Ph});var Ds=we((J3,js)=>{var Nh=lr(),jh=Nh["__core-js_shared__"];js.exports=jh});var Hs=we((Z3,zs)=>{var lo=Ds(),Fs=function(){var r=/[^.]+$/.exec(lo&&lo.keys&&lo.keys.IE_PROTO||"");return r?"Symbol(src)_1."+r:""}();function Dh(r){return!!Fs&&Fs in r}zs.exports=Dh});var co=we((Q3,qs)=>{var Fh=Function.prototype,zh=Fh.toString;function Hh(r){if(r!=null){try{return zh.call(r)}catch(t){}try{return r+""}catch(t){}}return""}qs.exports=Hh});var Us=we((e8,Ws)=>{var qh=so(),Wh=Hs(),Uh=Pr(),Vh=co(),Yh=/[\\^$.*+?()[\]{}|]/g,Gh=/^\[object .+?Constructor\]$/,Xh=Function.prototype,Kh=Object.prototype,Jh=Xh.toString,Zh=Kh.hasOwnProperty,Qh=RegExp("^"+Jh.call(Zh).replace(Yh,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function e_(r){if(!Uh(r)||Wh(r))return!1;var t=qh(r)?Qh:Gh;return t.test(Vh(r))}Ws.exports=e_});var Ys=we((t8,Vs)=>{function t_(r,t){return r==null?void 0:r[t]}Vs.exports=t_});var yr=we((r8,Gs)=>{var r_=Us(),i_=Ys();function n_(r,t){var e=i_(r,t);return r_(e)?e:void 0}Gs.exports=n_});var Yi=we((i8,Xs)=>{var o_=yr(),a_=lr(),s_=o_(a_,"Map");Xs.exports=s_});var hi=we((n8,Ks)=>{var l_=yr(),c_=l_(Object,"create");Ks.exports=c_});var Qs=we((o8,Zs)=>{var Js=hi();function u_(){this.__data__=Js?Js(null):{},this.size=0}Zs.exports=u_});var tl=we((a8,el)=>{function d_(r){var t=this.has(r)&&delete this.__data__[r];return this.size-=t?1:0,t}el.exports=d_});var il=we((s8,rl)=>{var f_=hi(),p_="__lodash_hash_undefined__",h_=Object.prototype,g_=h_.hasOwnProperty;function m_(r){var t=this.__data__;if(f_){var e=t[r];return e===p_?void 0:e}return g_.call(t,r)?t[r]:void 0}rl.exports=m_});var ol=we((l8,nl)=>{var v_=hi(),b_=Object.prototype,y_=b_.hasOwnProperty;function w_(r){var t=this.__data__;return v_?t[r]!==void 0:y_.call(t,r)}nl.exports=w_});var sl=we((c8,al)=>{var k_=hi(),x_="__lodash_hash_undefined__";function C_(r,t){var e=this.__data__;return this.size+=this.has(r)?0:1,e[r]=k_&&t===void 0?x_:t,this}al.exports=C_});var cl=we((u8,ll)=>{var S_=Qs(),T_=tl(),E_=il(),A_=ol(),O_=sl();function Nr(r){var t=-1,e=r==null?0:r.length;for(this.clear();++t<e;){var i=r[t];this.set(i[0],i[1])}}Nr.prototype.clear=S_;Nr.prototype.delete=T_;Nr.prototype.get=E_;Nr.prototype.has=A_;Nr.prototype.set=O_;ll.exports=Nr});var fl=we((d8,dl)=>{var ul=cl(),M_=di(),$_=Yi();function L_(){this.size=0,this.__data__={hash:new ul,map:new($_||M_),string:new ul}}dl.exports=L_});var hl=we((f8,pl)=>{function B_(r){var t=typeof r;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?r!=="__proto__":r===null}pl.exports=B_});var _i=we((p8,_l)=>{var I_=hl();function R_(r,t){var e=r.__data__;return I_(t)?e[typeof t=="string"?"string":"hash"]:e.map}_l.exports=R_});var ml=we((h8,gl)=>{var P_=_i();function N_(r){var t=P_(this,r).delete(r);return this.size-=t?1:0,t}gl.exports=N_});var bl=we((_8,vl)=>{var j_=_i();function D_(r){return j_(this,r).get(r)}vl.exports=D_});var wl=we((g8,yl)=>{var F_=_i();function z_(r){return F_(this,r).has(r)}yl.exports=z_});var xl=we((m8,kl)=>{var H_=_i();function q_(r,t){var e=H_(this,r),i=e.size;return e.set(r,t),this.size+=e.size==i?0:1,this}kl.exports=q_});var Sl=we((v8,Cl)=>{var W_=fl(),U_=ml(),V_=bl(),Y_=wl(),G_=xl();function jr(r){var t=-1,e=r==null?0:r.length;for(this.clear();++t<e;){var i=r[t];this.set(i[0],i[1])}}jr.prototype.clear=W_;jr.prototype.delete=U_;jr.prototype.get=V_;jr.prototype.has=Y_;jr.prototype.set=G_;Cl.exports=jr});var El=we((b8,Tl)=>{var X_=di(),K_=Yi(),J_=Sl(),Z_=200;function Q_(r,t){var e=this.__data__;if(e instanceof X_){var i=e.__data__;if(!K_||i.length<Z_-1)return i.push([r,t]),this.size=++e.size,this;e=this.__data__=new J_(i)}return e.set(r,t),this.size=e.size,this}Tl.exports=Q_});var Ol=we((y8,Al)=>{var eg=di(),tg=ms(),rg=bs(),ig=ws(),ng=xs(),og=El();function Dr(r){var t=this.__data__=new eg(r);this.size=t.size}Dr.prototype.clear=tg;Dr.prototype.delete=rg;Dr.prototype.get=ig;Dr.prototype.has=ng;Dr.prototype.set=og;Al.exports=Dr});var $l=we((w8,Ml)=>{function ag(r,t){for(var e=-1,i=r==null?0:r.length;++e<i&&t(r[e],e,r)!==!1;);return r}Ml.exports=ag});var Bl=we((k8,Ll)=>{var sg=yr(),lg=function(){try{var r=sg(Object,"defineProperty");return r({},"",{}),r}catch(t){}}();Ll.exports=lg});var uo=we((x8,Rl)=>{var Il=Bl();function cg(r,t,e){t=="__proto__"&&Il?Il(r,t,{configurable:!0,enumerable:!0,value:e,writable:!0}):r[t]=e}Rl.exports=cg});var fo=we((C8,Pl)=>{var ug=uo(),dg=oo(),fg=Object.prototype,pg=fg.hasOwnProperty;function hg(r,t,e){var i=r[t];(!(pg.call(r,t)&&dg(i,e))||e===void 0&&!(t in r))&&ug(r,t,e)}Pl.exports=hg});var gi=we((S8,Nl)=>{var _g=fo(),gg=uo();function mg(r,t,e,i){var n=!e;e||(e={});for(var o=-1,a=t.length;++o<a;){var s=t[o],l=i?i(e[s],r[s],s,e,r):void 0;l===void 0&&(l=r[s]),n?gg(e,s,l):_g(e,s,l)}return e}Nl.exports=mg});var Dl=we((T8,jl)=>{function vg(r,t){for(var e=-1,i=Array(r);++e<r;)i[e]=t(e);return i}jl.exports=vg});var Fr=we((E8,Fl)=>{function bg(r){return r!=null&&typeof r=="object"}Fl.exports=bg});var Hl=we((A8,zl)=>{var yg=pi(),wg=Fr(),kg="[object Arguments]";function xg(r){return wg(r)&&yg(r)==kg}zl.exports=xg});var Vl=we((O8,Ul)=>{var ql=Hl(),Cg=Fr(),Wl=Object.prototype,Sg=Wl.hasOwnProperty,Tg=Wl.propertyIsEnumerable,Eg=ql(function(){return arguments}())?ql:function(r){return Cg(r)&&Sg.call(r,"callee")&&!Tg.call(r,"callee")};Ul.exports=Eg});var Gi=we((M8,Yl)=>{var Ag=Array.isArray;Yl.exports=Ag});var Xl=we(($8,Gl)=>{function Og(){return!1}Gl.exports=Og});var po=we((mi,zr)=>{var Mg=lr(),$g=Xl(),Zl=typeof mi=="object"&&mi&&!mi.nodeType&&mi,Kl=Zl&&typeof zr=="object"&&zr&&!zr.nodeType&&zr,Lg=Kl&&Kl.exports===Zl,Jl=Lg?Mg.Buffer:void 0,Bg=Jl?Jl.isBuffer:void 0,Ig=Bg||$g;zr.exports=Ig});var ec=we((L8,Ql)=>{var Rg=9007199254740991,Pg=/^(?:0|[1-9]\d*)$/;function Ng(r,t){var e=typeof r;return t=t==null?Rg:t,!!t&&(e=="number"||e!="symbol"&&Pg.test(r))&&r>-1&&r%1==0&&r<t}Ql.exports=Ng});var ho=we((B8,tc)=>{var jg=9007199254740991;function Dg(r){return typeof r=="number"&&r>-1&&r%1==0&&r<=jg}tc.exports=Dg});var ic=we((I8,rc)=>{var Fg=pi(),zg=ho(),Hg=Fr(),qg="[object Arguments]",Wg="[object Array]",Ug="[object Boolean]",Vg="[object Date]",Yg="[object Error]",Gg="[object Function]",Xg="[object Map]",Kg="[object Number]",Jg="[object Object]",Zg="[object RegExp]",Qg="[object Set]",em="[object String]",tm="[object WeakMap]",rm="[object ArrayBuffer]",im="[object DataView]",nm="[object Float32Array]",om="[object Float64Array]",am="[object Int8Array]",sm="[object Int16Array]",lm="[object Int32Array]",cm="[object Uint8Array]",um="[object Uint8ClampedArray]",dm="[object Uint16Array]",fm="[object Uint32Array]",bt={};bt[nm]=bt[om]=bt[am]=bt[sm]=bt[lm]=bt[cm]=bt[um]=bt[dm]=bt[fm]=!0;bt[qg]=bt[Wg]=bt[rm]=bt[Ug]=bt[im]=bt[Vg]=bt[Yg]=bt[Gg]=bt[Xg]=bt[Kg]=bt[Jg]=bt[Zg]=bt[Qg]=bt[em]=bt[tm]=!1;function pm(r){return Hg(r)&&zg(r.length)&&!!bt[Fg(r)]}rc.exports=pm});var Xi=we((R8,nc)=>{function hm(r){return function(t){return r(t)}}nc.exports=hm});var Ki=we((vi,Hr)=>{var _m=ao(),oc=typeof vi=="object"&&vi&&!vi.nodeType&&vi,bi=oc&&typeof Hr=="object"&&Hr&&!Hr.nodeType&&Hr,gm=bi&&bi.exports===oc,_o=gm&&_m.process,mm=function(){try{var r=bi&&bi.require&&bi.require("util").types;return r||_o&&_o.binding&&_o.binding("util")}catch(t){}}();Hr.exports=mm});var cc=we((P8,lc)=>{var vm=ic(),bm=Xi(),ac=Ki(),sc=ac&&ac.isTypedArray,ym=sc?bm(sc):vm;lc.exports=ym});var go=we((N8,uc)=>{var wm=Dl(),km=Vl(),xm=Gi(),Cm=po(),Sm=ec(),Tm=cc(),Em=Object.prototype,Am=Em.hasOwnProperty;function Om(r,t){var e=xm(r),i=!e&&km(r),n=!e&&!i&&Cm(r),o=!e&&!i&&!n&&Tm(r),a=e||i||n||o,s=a?wm(r.length,String):[],l=s.length;for(var d in r)(t||Am.call(r,d))&&!(a&&(d=="length"||n&&(d=="offset"||d=="parent")||o&&(d=="buffer"||d=="byteLength"||d=="byteOffset")||Sm(d,l)))&&s.push(d);return s}uc.exports=Om});var Ji=we((j8,dc)=>{var Mm=Object.prototype;function $m(r){var t=r&&r.constructor,e=typeof t=="function"&&t.prototype||Mm;return r===e}dc.exports=$m});var mo=we((D8,fc)=>{function Lm(r,t){return function(e){return r(t(e))}}fc.exports=Lm});var hc=we((F8,pc)=>{var Bm=mo(),Im=Bm(Object.keys,Object);pc.exports=Im});var gc=we((z8,_c)=>{var Rm=Ji(),Pm=hc(),Nm=Object.prototype,jm=Nm.hasOwnProperty;function Dm(r){if(!Rm(r))return Pm(r);var t=[];for(var e in Object(r))jm.call(r,e)&&e!="constructor"&&t.push(e);return t}_c.exports=Dm});var vo=we((H8,mc)=>{var Fm=so(),zm=ho();function Hm(r){return r!=null&&zm(r.length)&&!Fm(r)}mc.exports=Hm});var Zi=we((q8,vc)=>{var qm=go(),Wm=gc(),Um=vo();function Vm(r){return Um(r)?qm(r):Wm(r)}vc.exports=Vm});var yc=we((W8,bc)=>{var Ym=gi(),Gm=Zi();function Xm(r,t){return r&&Ym(t,Gm(t),r)}bc.exports=Xm});var kc=we((U8,wc)=>{function Km(r){var t=[];if(r!=null)for(var e in Object(r))t.push(e);return t}wc.exports=Km});var Cc=we((V8,xc)=>{var Jm=Pr(),Zm=Ji(),Qm=kc(),ev=Object.prototype,tv=ev.hasOwnProperty;function rv(r){if(!Jm(r))return Qm(r);var t=Zm(r),e=[];for(var i in r)i=="constructor"&&(t||!tv.call(r,i))||e.push(i);return e}xc.exports=rv});var Qi=we((Y8,Sc)=>{var iv=go(),nv=Cc(),ov=vo();function av(r){return ov(r)?iv(r,!0):nv(r)}Sc.exports=av});var Ec=we((G8,Tc)=>{var sv=gi(),lv=Qi();function cv(r,t){return r&&sv(t,lv(t),r)}Tc.exports=cv});var Lc=we((yi,qr)=>{var uv=lr(),$c=typeof yi=="object"&&yi&&!yi.nodeType&&yi,Ac=$c&&typeof qr=="object"&&qr&&!qr.nodeType&&qr,dv=Ac&&Ac.exports===$c,Oc=dv?uv.Buffer:void 0,Mc=Oc?Oc.allocUnsafe:void 0;function fv(r,t){if(t)return r.slice();var e=r.length,i=Mc?Mc(e):new r.constructor(e);return r.copy(i),i}qr.exports=fv});var Ic=we((X8,Bc)=>{function pv(r,t){var e=-1,i=r.length;for(t||(t=Array(i));++e<i;)t[e]=r[e];return t}Bc.exports=pv});var Pc=we((K8,Rc)=>{function hv(r,t){for(var e=-1,i=r==null?0:r.length,n=0,o=[];++e<i;){var a=r[e];t(a,e,r)&&(o[n++]=a)}return o}Rc.exports=hv});var bo=we((J8,Nc)=>{function _v(){return[]}Nc.exports=_v});var en=we((Z8,Dc)=>{var gv=Pc(),mv=bo(),vv=Object.prototype,bv=vv.propertyIsEnumerable,jc=Object.getOwnPropertySymbols,yv=jc?function(r){return r==null?[]:(r=Object(r),gv(jc(r),function(t){return bv.call(r,t)}))}:mv;Dc.exports=yv});var zc=we((Q8,Fc)=>{var wv=gi(),kv=en();function xv(r,t){return wv(r,kv(r),t)}Fc.exports=xv});var yo=we((eS,Hc)=>{function Cv(r,t){for(var e=-1,i=t.length,n=r.length;++e<i;)r[n+e]=t[e];return r}Hc.exports=Cv});var wo=we((tS,qc)=>{var Sv=mo(),Tv=Sv(Object.getPrototypeOf,Object);qc.exports=Tv});var ko=we((rS,Wc)=>{var Ev=yo(),Av=wo(),Ov=en(),Mv=bo(),$v=Object.getOwnPropertySymbols,Lv=$v?function(r){for(var t=[];r;)Ev(t,Ov(r)),r=Av(r);return t}:Mv;Wc.exports=Lv});var Vc=we((iS,Uc)=>{var Bv=gi(),Iv=ko();function Rv(r,t){return Bv(r,Iv(r),t)}Uc.exports=Rv});var xo=we((nS,Yc)=>{var Pv=yo(),Nv=Gi();function jv(r,t,e){var i=t(r);return Nv(r)?i:Pv(i,e(r))}Yc.exports=jv});var Xc=we((oS,Gc)=>{var Dv=xo(),Fv=en(),zv=Zi();function Hv(r){return Dv(r,zv,Fv)}Gc.exports=Hv});var Jc=we((aS,Kc)=>{var qv=xo(),Wv=ko(),Uv=Qi();function Vv(r){return qv(r,Uv,Wv)}Kc.exports=Vv});var Qc=we((sS,Zc)=>{var Yv=yr(),Gv=lr(),Xv=Yv(Gv,"DataView");Zc.exports=Xv});var tu=we((lS,eu)=>{var Kv=yr(),Jv=lr(),Zv=Kv(Jv,"Promise");eu.exports=Zv});var iu=we((cS,ru)=>{var Qv=yr(),eb=lr(),tb=Qv(eb,"Set");ru.exports=tb});var ou=we((uS,nu)=>{var rb=yr(),ib=lr(),nb=rb(ib,"WeakMap");nu.exports=nb});var tn=we((dS,fu)=>{var Co=Qc(),So=Yi(),To=tu(),Eo=iu(),Ao=ou(),du=pi(),Wr=co(),au="[object Map]",ob="[object Object]",su="[object Promise]",lu="[object Set]",cu="[object WeakMap]",uu="[object DataView]",ab=Wr(Co),sb=Wr(So),lb=Wr(To),cb=Wr(Eo),ub=Wr(Ao),Or=du;(Co&&Or(new Co(new ArrayBuffer(1)))!=uu||So&&Or(new So)!=au||To&&Or(To.resolve())!=su||Eo&&Or(new Eo)!=lu||Ao&&Or(new Ao)!=cu)&&(Or=function(r){var t=du(r),e=t==ob?r.constructor:void 0,i=e?Wr(e):"";if(i)switch(i){case ab:return uu;case sb:return au;case lb:return su;case cb:return lu;case ub:return cu}return t});fu.exports=Or});var hu=we((fS,pu)=>{var db=Object.prototype,fb=db.hasOwnProperty;function pb(r){var t=r.length,e=new r.constructor(t);return t&&typeof r[0]=="string"&&fb.call(r,"index")&&(e.index=r.index,e.input=r.input),e}pu.exports=pb});var gu=we((pS,_u)=>{var hb=lr(),_b=hb.Uint8Array;_u.exports=_b});var rn=we((hS,vu)=>{var mu=gu();function gb(r){var t=new r.constructor(r.byteLength);return new mu(t).set(new mu(r)),t}vu.exports=gb});var yu=we((_S,bu)=>{var mb=rn();function vb(r,t){var e=t?mb(r.buffer):r.buffer;return new r.constructor(e,r.byteOffset,r.byteLength)}bu.exports=vb});var ku=we((gS,wu)=>{var bb=/\w*$/;function yb(r){var t=new r.constructor(r.source,bb.exec(r));return t.lastIndex=r.lastIndex,t}wu.exports=yb});var Eu=we((mS,Tu)=>{var xu=Vi(),Cu=xu?xu.prototype:void 0,Su=Cu?Cu.valueOf:void 0;function wb(r){return Su?Object(Su.call(r)):{}}Tu.exports=wb});var Ou=we((vS,Au)=>{var kb=rn();function xb(r,t){var e=t?kb(r.buffer):r.buffer;return new r.constructor(e,r.byteOffset,r.length)}Au.exports=xb});var $u=we((bS,Mu)=>{var Cb=rn(),Sb=yu(),Tb=ku(),Eb=Eu(),Ab=Ou(),Ob="[object Boolean]",Mb="[object Date]",$b="[object Map]",Lb="[object Number]",Bb="[object RegExp]",Ib="[object Set]",Rb="[object String]",Pb="[object Symbol]",Nb="[object ArrayBuffer]",jb="[object DataView]",Db="[object Float32Array]",Fb="[object Float64Array]",zb="[object Int8Array]",Hb="[object Int16Array]",qb="[object Int32Array]",Wb="[object Uint8Array]",Ub="[object Uint8ClampedArray]",Vb="[object Uint16Array]",Yb="[object Uint32Array]";function Gb(r,t,e){var i=r.constructor;switch(t){case Nb:return Cb(r);case Ob:case Mb:return new i(+r);case jb:return Sb(r,e);case Db:case Fb:case zb:case Hb:case qb:case Wb:case Ub:case Vb:case Yb:return Ab(r,e);case $b:return new i;case Lb:case Rb:return new i(r);case Bb:return Tb(r);case Ib:return new i;case Pb:return Eb(r)}}Mu.exports=Gb});var Iu=we((yS,Bu)=>{var Xb=Pr(),Lu=Object.create,Kb=function(){function r(){}return function(t){if(!Xb(t))return{};if(Lu)return Lu(t);r.prototype=t;var e=new r;return r.prototype=void 0,e}}();Bu.exports=Kb});var Pu=we((wS,Ru)=>{var Jb=Iu(),Zb=wo(),Qb=Ji();function ey(r){return typeof r.constructor=="function"&&!Qb(r)?Jb(Zb(r)):{}}Ru.exports=ey});var ju=we((kS,Nu)=>{var ty=tn(),ry=Fr(),iy="[object Map]";function ny(r){return ry(r)&&ty(r)==iy}Nu.exports=ny});var Hu=we((xS,zu)=>{var oy=ju(),ay=Xi(),Du=Ki(),Fu=Du&&Du.isMap,sy=Fu?ay(Fu):oy;zu.exports=sy});var Wu=we((CS,qu)=>{var ly=tn(),cy=Fr(),uy="[object Set]";function dy(r){return cy(r)&&ly(r)==uy}qu.exports=dy});var Gu=we((SS,Yu)=>{var fy=Wu(),py=Xi(),Uu=Ki(),Vu=Uu&&Uu.isSet,hy=Vu?py(Vu):fy;Yu.exports=hy});var Qu=we((TS,Zu)=>{var _y=Ol(),gy=$l(),my=fo(),vy=yc(),by=Ec(),yy=Lc(),wy=Ic(),ky=zc(),xy=Vc(),Cy=Xc(),Sy=Jc(),Ty=tn(),Ey=hu(),Ay=$u(),Oy=Pu(),My=Gi(),$y=po(),Ly=Hu(),By=Pr(),Iy=Gu(),Ry=Zi(),Py=Qi(),Ny=1,jy=2,Dy=4,Xu="[object Arguments]",Fy="[object Array]",zy="[object Boolean]",Hy="[object Date]",qy="[object Error]",Ku="[object Function]",Wy="[object GeneratorFunction]",Uy="[object Map]",Vy="[object Number]",Ju="[object Object]",Yy="[object RegExp]",Gy="[object Set]",Xy="[object String]",Ky="[object Symbol]",Jy="[object WeakMap]",Zy="[object ArrayBuffer]",Qy="[object DataView]",ew="[object Float32Array]",tw="[object Float64Array]",rw="[object Int8Array]",iw="[object Int16Array]",nw="[object Int32Array]",ow="[object Uint8Array]",aw="[object Uint8ClampedArray]",sw="[object Uint16Array]",lw="[object Uint32Array]",mt={};mt[Xu]=mt[Fy]=mt[Zy]=mt[Qy]=mt[zy]=mt[Hy]=mt[ew]=mt[tw]=mt[rw]=mt[iw]=mt[nw]=mt[Uy]=mt[Vy]=mt[Ju]=mt[Yy]=mt[Gy]=mt[Xy]=mt[Ky]=mt[ow]=mt[aw]=mt[sw]=mt[lw]=!0;mt[qy]=mt[Ku]=mt[Jy]=!1;function nn(r,t,e,i,n,o){var a,s=t&Ny,l=t&jy,d=t&Dy;if(e&&(a=n?e(r,i,n,o):e(r)),a!==void 0)return a;if(!By(r))return r;var u=My(r);if(u){if(a=Ey(r),!s)return wy(r,a)}else{var h=Ty(r),p=h==Ku||h==Wy;if($y(r))return yy(r,s);if(h==Ju||h==Xu||p&&!n){if(a=l||p?{}:Oy(r),!s)return l?xy(r,by(a,r)):ky(r,vy(a,r))}else{if(!mt[h])return n?r:{};a=Ay(r,h,s)}}o||(o=new _y);var m=o.get(r);if(m)return m;o.set(r,a),Iy(r)?r.forEach(function(v){a.add(nn(v,t,e,v,r,o))}):Ly(r)&&r.forEach(function(v,w){a.set(w,nn(v,t,e,w,r,o))});var x=d?l?Sy:Cy:l?Py:Ry,y=u?void 0:x(r);return gy(y||r,function(v,w){y&&(w=v,v=r[w]),my(a,w,nn(v,t,e,w,r,o))}),a}Zu.exports=nn});var td=we((ES,ed)=>{var cw=Qu(),uw=1,dw=4;function fw(r,t){return t=typeof t=="function"?t:void 0,cw(r,uw|dw,t)}ed.exports=fw});var nd=we((exports,module)=>{frappe.provide("frappe.model");$.extend(frappe.model,{no_value_type:["Section Break","Column Break","Tab Break","HTML","Table","Table MultiSelect","Button","Image","Fold","Heading"],layout_fields:["Section Break","Column Break","Tab Break","Fold"],std_fields_list:["name","owner","creation","modified","modified_by","_user_tags","_comments","_assign","_liked_by","docstatus","idx"],child_table_field_list:["parent","parenttype","parentfield"],core_doctypes_list:["DocType","DocField","DocPerm","User","Role","Has Role","Page","Module Def","Print Format","Report","Customize Form","Customize Form Field","Property Setter","Custom Field","Client Script"],restricted_fields:["name","parent","creation","modified","modified_by","parentfield","parenttype","file_list","flags","docstatus"],std_fields:[{fieldname:"name",fieldtype:"Link",label:__("ID")},{fieldname:"owner",fieldtype:"Link",label:__("Created By"),options:"User"},{fieldname:"idx",fieldtype:"Int",label:__("Index")},{fieldname:"creation",fieldtype:"Datetime",label:__("Created On")},{fieldname:"modified",fieldtype:"Datetime",label:__("Last Updated On")},{fieldname:"modified_by",fieldtype:"Link",label:__("Last Updated By"),options:"User"},{fieldname:"_user_tags",fieldtype:"Data",label:__("Tags")},{fieldname:"_liked_by",fieldtype:"Data",label:__("Liked By")},{fieldname:"_comments",fieldtype:"Text",label:__("Comments")},{fieldname:"_assign",fieldtype:"Text",label:__("Assigned To")},{fieldname:"docstatus",fieldtype:"Int",label:__("Document Status")}],numeric_fieldtypes:["Int","Float","Currency","Percent","Duration"],std_fields_table:[{fieldname:"parent",fieldtype:"Data",label:__("Parent")}],table_fields:["Table","Table MultiSelect"],new_names:{},events:{},user_settings:{},init:function(){frappe.realtime.on("doc_update",function(r){var t=locals[r.doctype]&&locals[r.doctype][r.name];t&&(frappe.get_route()[0]==="Form"&&cur_frm.doc.doctype===t.doctype&&cur_frm.doc.name===t.name?r.modified!==cur_frm.doc.modified&&(cur_frm.is_dirty()?frappe.ui.form.is_saving||(t.__needs_refresh=!0,cur_frm.show_conflict_message()):cur_frm.reload_doc()):t.__unsaved?t.__needs_refresh=!0:frappe.model.remove_from_locals(t.doctype,t.name))})},is_value_type:function(r){return typeof r=="object"&&(r=r.fieldtype),frappe.model.no_value_type.indexOf(r)===-1},is_non_std_field:function(r){return![...frappe.model.std_fields_list,...frappe.model.child_table_field_list].includes(r)},get_std_field:function(r,t=!1){var e=$.map([].concat(frappe.model.std_fields).concat(frappe.model.std_fields_table),function(i){if(i.fieldname==r)return i});if(!e.length){if(t)return{fieldname:r};frappe.msgprint(__("Unknown Column: {0}",[r]))}return e[0]},get_from_localstorage:function(r){if(localStorage["_doctype:"+r])return JSON.parse(localStorage["_doctype:"+r])},set_in_localstorage:function(r,t){try{localStorage["_doctype:"+r]=JSON.stringify(t)}catch(e){console.warn("localStorage quota exceeded, clearing doctype cache"),frappe.model.clear_local_storage(),localStorage["_doctype:"+r]=JSON.stringify(t)}},clear_local_storage:function(){for(var r in localStorage)r.startsWith("_doctype:")&&localStorage.removeItem(r)},with_doctype:function(r,t,e){if(locals.DocType[r])return t&&t(),Promise.resolve();{let i=null,n=null,o=frappe.model.get_from_localstorage(r);return o&&(n=o.filter(a=>a.name===r)[0],n&&(i=n.modified)),frappe.call({method:"frappe.desk.form.load.getdoctype",type:"GET",args:{doctype:r,with_parent:1,cached_timestamp:i},async:e,callback:function(a){if(a.exc)throw frappe.msgprint(__("Unable to load: {0}",[__(r)])),"No doctype";a.message=="use_cache"?frappe.model.sync(n):frappe.model.set_in_localstorage(r,a.docs),frappe.model.init_doctype(r),a.user_settings&&(frappe.model.user_settings[r]=JSON.parse(a.user_settings),frappe.model.user_settings[r].updated_on=moment().toString()),t&&t(a)}})}},init_doctype:function(doctype){var meta=locals.DocType[doctype];meta.__list_js&&eval(meta.__list_js),meta.__custom_list_js&&eval(meta.__custom_list_js),meta.__calendar_js&&eval(meta.__calendar_js),meta.__map_js&&eval(meta.__map_js),meta.__tree_js&&eval(meta.__tree_js),meta.__templates&&$.extend(frappe.templates,meta.__templates)},with_doc:function(r,t,e){return new Promise(i=>{if(t||(t=r),locals[r]&&locals[r][t]&&frappe.model.get_docinfo(r,t))e&&e(t),i(frappe.get_doc(r,t));else return frappe.call({method:"frappe.desk.form.load.getdoc",type:"GET",args:{doctype:r,name:t},callback:function(n){e&&e(t,n),i(frappe.get_doc(r,t))}})})},get_docinfo:function(r,t){return frappe.model.docinfo[r]&&frappe.model.docinfo[r][t]||null},set_docinfo:function(r,t,e,i){frappe.model.docinfo[r]&&frappe.model.docinfo[r][t]&&(frappe.model.docinfo[r][t][e]=i)},get_shared:function(r,t){return frappe.model.get_docinfo(r,t).shared},get_server_module_name:function(r){var t=frappe.model.scrub(r),e=frappe.model.scrub(locals.DocType[r].module),i=frappe.boot.module_app[e];return i+"."+e+".doctype."+t+"."+t},scrub:function(r){return r.replace(/ /g,"_").toLowerCase()},unscrub:function(r){return __(r||"").replace(/-|_/g," ").replace(/\w*/g,function(t){return t.charAt(0).toUpperCase()+t.substr(1).toLowerCase()})},can_create:function(r){return frappe.boot.user.can_create.indexOf(r)!==-1},can_select:function(r){if(frappe.boot.user)return frappe.boot.user.can_select.indexOf(r)!==-1},can_read:function(r){if(frappe.boot.user)return frappe.boot.user.can_read.indexOf(r)!==-1},can_write:function(r){return frappe.boot.user.can_write.indexOf(r)!==-1},can_get_report:function(r){return frappe.boot.user.can_get_report.indexOf(r)!==-1},can_delete:function(r){return r?frappe.boot.user.can_delete.indexOf(r)!==-1:!1},can_cancel:function(r){return r?frappe.boot.user.can_cancel.indexOf(r)!==-1:!1},has_workflow:function(r){return frappe.get_list("Workflow",{document_type:r,is_active:1}).length},is_submittable:function(r){return r?locals.DocType[r]&&locals.DocType[r].is_submittable:!1},is_table:function(r){return r?locals.DocType[r]&&locals.DocType[r].istable:!1},is_single:function(r){return r?frappe.boot.single_types.indexOf(r)!=-1:!1},is_tree:function(r){return r?locals.DocType[r]&&locals.DocType[r].is_tree:!1},is_fresh(r){return r&&r.__last_sync_on&&new Date-r.__last_sync_on<5e3},can_import:function(r,t,e=null){return e&&!e.allow_import?!1:frappe.user_roles.includes("System Manager")?!0:t?t.perm[0].import===1:frappe.boot.user.can_import.indexOf(r)!==-1},can_export:function(r,t){return frappe.user_roles.includes("System Manager")?!0:t?t.perm[0].export===1:frappe.boot.user.can_export.indexOf(r)!==-1},can_print:function(r,t){return t?t.perm[0].print===1:frappe.boot.user.can_print.indexOf(r)!==-1},can_email:function(r,t){return t?t.perm[0].email===1:frappe.boot.user.can_email.indexOf(r)!==-1},can_share:function(r,t){return cint(frappe.sys_defaults.disable_document_sharing)&&frappe.session.user!=="Administrator"?!1:t?t.perm[0].share===1:frappe.boot.user.can_share.indexOf(r)!==-1},can_set_user_permissions:function(r,t){return frappe.user_roles.includes("System Manager")?!0:t?t.perm[0].set_user_permissions===1:frappe.boot.user.can_set_user_permissions.indexOf(r)!==-1},has_value:function(r,t,e){var i=locals[r]&&locals[r][t]&&locals[r][t][e],n=frappe.meta.get_docfield(r,e,t);if(frappe.model.table_fields.includes(n.fieldtype)){var o=!1;$.each(locals[n.options]||{},function(a,s){if(s.parent==t&&s.parenttype==r&&s.parentfield==n.fieldname)return o=!0,!1})}else var o=!is_null(i);return!!o},get_list:function(r,t){var e=locals[r]||locals[":"+r]||{};return $.isEmptyObject(e)?[]:frappe.utils.filter_dict(e,t)},get_value:function(r,t,e,i){if(i)frappe.call({method:"frappe.client.get_value",args:{doctype:r,fieldname:e,filters:t},callback:function(o){o.exc||i(o.message)}});else{if(["number","string"].includes(typeof t)&&locals[r]&&locals[r][t])return locals[r][t][e];var n=frappe.get_list(r,t);return n.length&&n[0]?n[0][e]:null}},set_value:function(r,t,e,i,n,o=!1){var a;$.isPlainObject(r)?(a=r,e=t,i=e):a=locals[r]&&locals[r][t];let s=e,l=[];return $.isPlainObject(s)||(s={},s[e]=i),$.each(s,(d,u)=>{a&&a[d]!==u?(a.__unedited&&!(!a[d]&&!u)&&(a.__unedited=!1),a[d]=u,l.push(()=>frappe.model.trigger(d,u,a,o))):in_list(["Link","Dynamic Link"],n)&&a&&l.push(()=>frappe.model.trigger(d,u,a,o))}),frappe.run_serially(l)},on:function(r,t,e){frappe.provide("frappe.model.events."+r),frappe.model.events[r][t]||(frappe.model.events[r][t]=[]),frappe.model.events[r][t].push(e)},trigger:function(r,t,e,i=!1){let n=[];function o(a){if(!!a)for(let s of a)!s||n.push(()=>{let l=s(r,t,e,i);return l&&l.then?l:frappe.after_server_call()})}return frappe.model.events[e.doctype]&&(o(frappe.model.events[e.doctype][r]),o(frappe.model.events[e.doctype]["*"])),frappe.run_serially(n)},get_doc:function(r,t){if(t||(t=r),$.isPlainObject(t)){var e=frappe.get_list(r,t);return e&&e.length?e[0]:null}return locals[r]?locals[r][t]:null},get_children:function(r,t,e,i){if($.isPlainObject(r))var n=r,i=e,e=t;else var n=frappe.get_doc(r,t);var o=n[e]||[];return i?frappe.utils.filter_dict(o,i):o},clear_table:function(r,t){for(var e=0,i=(r[t]||[]).length;e<i;e++){var n=r[t][e];delete locals[n.doctype][n.name]}r[t]=[]},remove_from_locals:function(r,t){this.clear_doc(r,t),frappe.views.formview[r]&&delete frappe.views.formview[r].frm.opendocs[t]},clear_doc:function(r,t){var e=locals[r]&&locals[r][t];if(!!e){var i=null;if(e.parenttype)var i=e.parent,n=e.parenttype,o=e.parentfield;if(delete locals[r][t],i){var a=locals[n][i],s=[],l=1;$.each(a[o],function(d,u){u.name!=t&&(s.push(u),u.idx=l,l++),a[o]=s})}}},get_no_copy_list:function(r){for(var t=["name","amended_from","amendment_date","cancel_reason"],e=frappe.get_doc("DocType",r).fields||[],i=0,n=e.length;i<n;i++){var o=e[i];cint(o.no_copy)&&t.push(o.fieldname)}return t},delete_doc:function(r,t,e){let i=t,n=frappe.get_meta(r).title_field;if(frappe.get_meta(r).autoname=="hash"&&n){let o=frappe.model.get_value(r,t,n);o&&(i=`${o} (${t})`)}frappe.confirm(__("Permanently delete {0}?",[i.bold()]),function(){return frappe.call({method:"frappe.client.delete",args:{doctype:r,name:t},freeze:!0,freeze_message:__("Deleting {0}...",[i]),callback:function(o,a){o.exc||(frappe.utils.play_sound("delete"),frappe.model.clear_doc(r,t),e&&e(o,a))}})})},rename_doc:function(r,t,e){let i=__("Merge with existing"),n=__("This cannot be undone"),o=i+" <b>("+n+")</b>";var a=new frappe.ui.Dialog({title:__("Rename {0}",[__(t)]),fields:[{label:__("New Name"),fieldname:"new_name",fieldtype:"Data",reqd:1,default:t},{label:o,fieldtype:"Check",fieldname:"merge"}]});a.set_primary_action(__("Rename"),function(){a.hide();var s=a.get_values();if(!!s)return frappe.call({method:"frappe.rename_doc",freeze:!0,freeze_message:"Updating related fields...",args:{doctype:r,old:t,new:s.new_name,merge:s.merge},btn:a.get_primary_btn(),callback:function(l,d){l.exc||($(document).trigger("rename",[r,t,l.message||s.new_name]),locals[r]&&locals[r][t]&&delete locals[r][t],a.hide(),e&&e(l.message))}})}),a.show()},round_floats_in:function(r,t){t||(t=frappe.meta.get_fieldnames(r.doctype,r.parent,{fieldtype:["in",["Currency","Float"]]}));for(var e=0,i=t.length;e<i;e++){var n=t[e];r[n]=flt(r[n],precision(n,r))}},validate_missing:function(r,t){r[t]||frappe.throw(__("Please specify")+": "+__(frappe.meta.get_label(r.doctype,t,r.parent||r.name)))},get_all_docs:function(r){var t=[r];for(var e in r)if($.isArray(r[e]))for(var i=r[e],n=0,o=i.length;n<o;n++)t.push(i[n]);return t},get_full_column_name:function(r,t){return r.includes("`tab")?r:"`tab"+t+"`.`"+r+"`"},is_numeric_field:function(r){if(!!r)return typeof r=="object"&&(r=r.fieldtype),frappe.model.numeric_fieldtypes.includes(r)},set_default_views_for_doctype(r,t){frappe.model.with_doctype(r,()=>{let e=frappe.get_meta(r),i=["List","Report","Dashboard","Kanban"];if(e.is_calendar_and_gantt&&frappe.views.calendar[r]){let n=["Calendar","Gantt"];i.push(...n)}e.is_tree&&i.push("Tree"),t.doc.image_field&&i.push("Image"),r==="Communication"&&frappe.boot.email_accounts.length&&i.push("Inbox"),(t.doc.fields.find(n=>n.fieldname==="latitude")&&t.doc.fields.find(n=>n.fieldname==="longitude")||t.doc.fields.find(n=>n.fieldname==="location"&&n.fieldtype=="Geolocation"))&&i.push("Map"),t.set_df_property("default_view","options",i)})}});frappe.get_doc=frappe.model.get_doc;frappe.get_children=frappe.model.get_children;frappe.get_list=frappe.model.get_list;var getchildren=function(r,t,e){var i=[];return $.each(locals[r]||{},function(n,o){o.parent===t&&o.parentfield===e&&i.push(o)}),i}});var ad=we((jS,od)=>{(function(){var r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",t={rotl:function(e,i){return e<<i|e>>>32-i},rotr:function(e,i){return e<<32-i|e>>>i},endian:function(e){if(e.constructor==Number)return t.rotl(e,8)&16711935|t.rotl(e,24)&4278255360;for(var i=0;i<e.length;i++)e[i]=t.endian(e[i]);return e},randomBytes:function(e){for(var i=[];e>0;e--)i.push(Math.floor(Math.random()*256));return i},bytesToWords:function(e){for(var i=[],n=0,o=0;n<e.length;n++,o+=8)i[o>>>5]|=e[n]<<24-o%32;return i},wordsToBytes:function(e){for(var i=[],n=0;n<e.length*32;n+=8)i.push(e[n>>>5]>>>24-n%32&255);return i},bytesToHex:function(e){for(var i=[],n=0;n<e.length;n++)i.push((e[n]>>>4).toString(16)),i.push((e[n]&15).toString(16));return i.join("")},hexToBytes:function(e){for(var i=[],n=0;n<e.length;n+=2)i.push(parseInt(e.substr(n,2),16));return i},bytesToBase64:function(e){for(var i=[],n=0;n<e.length;n+=3)for(var o=e[n]<<16|e[n+1]<<8|e[n+2],a=0;a<4;a++)n*8+a*6<=e.length*8?i.push(r.charAt(o>>>6*(3-a)&63)):i.push("=");return i.join("")},base64ToBytes:function(e){e=e.replace(/[^A-Z0-9+\/]/ig,"");for(var i=[],n=0,o=0;n<e.length;o=++n%4)o!=0&&i.push((r.indexOf(e.charAt(n-1))&Math.pow(2,-2*o+8)-1)<<o*2|r.indexOf(e.charAt(n))>>>6-o*2);return i}};od.exports=t})()});var Mo=we((DS,sd)=>{var Oo={utf8:{stringToBytes:function(r){return Oo.bin.stringToBytes(unescape(encodeURIComponent(r)))},bytesToString:function(r){return decodeURIComponent(escape(Oo.bin.bytesToString(r)))}},bin:{stringToBytes:function(r){for(var t=[],e=0;e<r.length;e++)t.push(r.charCodeAt(e)&255);return t},bytesToString:function(r){for(var t=[],e=0;e<r.length;e++)t.push(String.fromCharCode(r[e]));return t.join("")}}};sd.exports=Oo});var ud=we((FS,cd)=>{cd.exports=function(r){return r!=null&&(ld(r)||bw(r)||!!r._isBuffer)};function ld(r){return!!r.constructor&&typeof r.constructor.isBuffer=="function"&&r.constructor.isBuffer(r)}function bw(r){return typeof r.readFloatLE=="function"&&typeof r.slice=="function"&&ld(r.slice(0,0))}});var fd=we((zS,dd)=>{(function(){var r=ad(),t=Mo().utf8,e=ud(),i=Mo().bin,n=function(o,a){o.constructor==String?a&&a.encoding==="binary"?o=i.stringToBytes(o):o=t.stringToBytes(o):e(o)?o=Array.prototype.slice.call(o,0):!Array.isArray(o)&&o.constructor!==Uint8Array&&(o=o.toString());for(var s=r.bytesToWords(o),l=o.length*8,d=1732584193,u=-271733879,h=-1732584194,p=271733878,m=0;m<s.length;m++)s[m]=(s[m]<<8|s[m]>>>24)&16711935|(s[m]<<24|s[m]>>>8)&4278255360;s[l>>>5]|=128<<l%32,s[(l+64>>>9<<4)+14]=l;for(var x=n._ff,y=n._gg,v=n._hh,w=n._ii,m=0;m<s.length;m+=16){var k=d,c=u,_=h,g=p;d=x(d,u,h,p,s[m+0],7,-680876936),p=x(p,d,u,h,s[m+1],12,-389564586),h=x(h,p,d,u,s[m+2],17,606105819),u=x(u,h,p,d,s[m+3],22,-1044525330),d=x(d,u,h,p,s[m+4],7,-176418897),p=x(p,d,u,h,s[m+5],12,1200080426),h=x(h,p,d,u,s[m+6],17,-1473231341),u=x(u,h,p,d,s[m+7],22,-45705983),d=x(d,u,h,p,s[m+8],7,1770035416),p=x(p,d,u,h,s[m+9],12,-1958414417),h=x(h,p,d,u,s[m+10],17,-42063),u=x(u,h,p,d,s[m+11],22,-1990404162),d=x(d,u,h,p,s[m+12],7,1804603682),p=x(p,d,u,h,s[m+13],12,-40341101),h=x(h,p,d,u,s[m+14],17,-1502002290),u=x(u,h,p,d,s[m+15],22,1236535329),d=y(d,u,h,p,s[m+1],5,-165796510),p=y(p,d,u,h,s[m+6],9,-1069501632),h=y(h,p,d,u,s[m+11],14,643717713),u=y(u,h,p,d,s[m+0],20,-373897302),d=y(d,u,h,p,s[m+5],5,-701558691),p=y(p,d,u,h,s[m+10],9,38016083),h=y(h,p,d,u,s[m+15],14,-660478335),u=y(u,h,p,d,s[m+4],20,-405537848),d=y(d,u,h,p,s[m+9],5,568446438),p=y(p,d,u,h,s[m+14],9,-1019803690),h=y(h,p,d,u,s[m+3],14,-187363961),u=y(u,h,p,d,s[m+8],20,1163531501),d=y(d,u,h,p,s[m+13],5,-1444681467),p=y(p,d,u,h,s[m+2],9,-51403784),h=y(h,p,d,u,s[m+7],14,1735328473),u=y(u,h,p,d,s[m+12],20,-1926607734),d=v(d,u,h,p,s[m+5],4,-378558),p=v(p,d,u,h,s[m+8],11,-2022574463),h=v(h,p,d,u,s[m+11],16,1839030562),u=v(u,h,p,d,s[m+14],23,-35309556),d=v(d,u,h,p,s[m+1],4,-1530992060),p=v(p,d,u,h,s[m+4],11,1272893353),h=v(h,p,d,u,s[m+7],16,-155497632),u=v(u,h,p,d,s[m+10],23,-1094730640),d=v(d,u,h,p,s[m+13],4,681279174),p=v(p,d,u,h,s[m+0],11,-358537222),h=v(h,p,d,u,s[m+3],16,-722521979),u=v(u,h,p,d,s[m+6],23,76029189),d=v(d,u,h,p,s[m+9],4,-640364487),p=v(p,d,u,h,s[m+12],11,-421815835),h=v(h,p,d,u,s[m+15],16,530742520),u=v(u,h,p,d,s[m+2],23,-995338651),d=w(d,u,h,p,s[m+0],6,-198630844),p=w(p,d,u,h,s[m+7],10,1126891415),h=w(h,p,d,u,s[m+14],15,-1416354905),u=w(u,h,p,d,s[m+5],21,-57434055),d=w(d,u,h,p,s[m+12],6,1700485571),p=w(p,d,u,h,s[m+3],10,-1894986606),h=w(h,p,d,u,s[m+10],15,-1051523),u=w(u,h,p,d,s[m+1],21,-2054922799),d=w(d,u,h,p,s[m+8],6,1873313359),p=w(p,d,u,h,s[m+15],10,-30611744),h=w(h,p,d,u,s[m+6],15,-1560198380),u=w(u,h,p,d,s[m+13],21,1309151649),d=w(d,u,h,p,s[m+4],6,-145523070),p=w(p,d,u,h,s[m+11],10,-1120210379),h=w(h,p,d,u,s[m+2],15,718787259),u=w(u,h,p,d,s[m+9],21,-343485551),d=d+k>>>0,u=u+c>>>0,h=h+_>>>0,p=p+g>>>0}return r.endian([d,u,h,p])};n._ff=function(o,a,s,l,d,u,h){var p=o+(a&s|~a&l)+(d>>>0)+h;return(p<<u|p>>>32-u)+a},n._gg=function(o,a,s,l,d,u,h){var p=o+(a&l|s&~l)+(d>>>0)+h;return(p<<u|p>>>32-u)+a},n._hh=function(o,a,s,l,d,u,h){var p=o+(a^s^l)+(d>>>0)+h;return(p<<u|p>>>32-u)+a},n._ii=function(o,a,s,l,d,u,h){var p=o+(s^(a|~l))+(d>>>0)+h;return(p<<u|p>>>32-u)+a},n._blocksize=16,n._digestsize=16,dd.exports=function(o,a){if(o==null)throw new Error("Illegal argument "+o);var s=r.wordsToBytes(n(o,a));return a&&a.asBytes?s:a&&a.asString?i.bytesToString(s):r.bytesToHex(s)}})()});var hd=we((pd,on)=>{(function(){function r(c){"use strict";var _={omitExtraWLInCodeBlocks:{defaultValue:!1,describe:"Omit the default extra whiteline added to code blocks",type:"boolean"},noHeaderId:{defaultValue:!1,describe:"Turn on/off generated header id",type:"boolean"},prefixHeaderId:{defaultValue:!1,describe:"Add a prefix to the generated header ids. Passing a string will prefix that string to the header id. Setting to true will add a generic 'section-' prefix",type:"string"},rawPrefixHeaderId:{defaultValue:!1,describe:'Setting this option to true will prevent showdown from modifying the prefix. This might result in malformed IDs (if, for instance, the " char is used in the prefix)',type:"boolean"},ghCompatibleHeaderId:{defaultValue:!1,describe:"Generate header ids compatible with github style (spaces are replaced with dashes, a bunch of non alphanumeric chars are removed)",type:"boolean"},rawHeaderId:{defaultValue:!1,describe:`Remove only spaces, ' and " from generated header ids (including prefixes), replacing them with dashes (-). WARNING: This might result in malformed ids`,type:"boolean"},headerLevelStart:{defaultValue:!1,describe:"The header blocks level start",type:"integer"},parseImgDimensions:{defaultValue:!1,describe:"Turn on/off image dimension parsing",type:"boolean"},simplifiedAutoLink:{defaultValue:!1,describe:"Turn on/off GFM autolink style",type:"boolean"},excludeTrailingPunctuationFromURLs:{defaultValue:!1,describe:"Excludes trailing punctuation from links generated with autoLinking",type:"boolean"},literalMidWordUnderscores:{defaultValue:!1,describe:"Parse midword underscores as literal underscores",type:"boolean"},literalMidWordAsterisks:{defaultValue:!1,describe:"Parse midword asterisks as literal asterisks",type:"boolean"},strikethrough:{defaultValue:!1,describe:"Turn on/off strikethrough support",type:"boolean"},tables:{defaultValue:!1,describe:"Turn on/off tables support",type:"boolean"},tablesHeaderId:{defaultValue:!1,describe:"Add an id to table headers",type:"boolean"},ghCodeBlocks:{defaultValue:!0,describe:"Turn on/off GFM fenced code blocks support",type:"boolean"},tasklists:{defaultValue:!1,describe:"Turn on/off GFM tasklist support",type:"boolean"},smoothLivePreview:{defaultValue:!1,describe:"Prevents weird effects in live previews due to incomplete input",type:"boolean"},smartIndentationFix:{defaultValue:!1,describe:"Tries to smartly fix indentation in es6 strings",type:"boolean"},disableForced4SpacesIndentedSublists:{defaultValue:!1,describe:"Disables the requirement of indenting nested sublists by 4 spaces",type:"boolean"},simpleLineBreaks:{defaultValue:!1,describe:"Parses simple line breaks as <br> (GFM Style)",type:"boolean"},requireSpaceBeforeHeadingText:{defaultValue:!1,describe:"Makes adding a space between `#` and the header text mandatory (GFM Style)",type:"boolean"},ghMentions:{defaultValue:!1,describe:"Enables github @mentions",type:"boolean"},ghMentionsLink:{defaultValue:"https://github.com/{u}",describe:"Changes the link generated by @mentions. Only applies if ghMentions option is enabled.",type:"string"},encodeEmails:{defaultValue:!0,describe:"Encode e-mail addresses through the use of Character Entities, transforming ASCII e-mail addresses into its equivalent decimal entities",type:"boolean"},openLinksInNewWindow:{defaultValue:!1,describe:"Open all links in new windows",type:"boolean"},backslashEscapesHTMLTags:{defaultValue:!1,describe:"Support for HTML Tag escaping. ex: <div>foo</div>",type:"boolean"},emoji:{defaultValue:!1,describe:"Enable emoji support. Ex: `this is a :smile: emoji`",type:"boolean"},underline:{defaultValue:!1,describe:"Enable support for underline. Syntax is double or triple underscores: `__underline word__`. With this option enabled, underscores no longer parses into `<em>` and `<strong>`",type:"boolean"},ellipsis:{defaultValue:!0,describe:"Replaces three dots with the ellipsis unicode character",type:"boolean"},completeHTMLDocument:{defaultValue:!1,describe:"Outputs a complete html document, including `<html>`, `<head>` and `<body>` tags",type:"boolean"},metadata:{defaultValue:!1,describe:"Enable support for document metadata (defined at the top of the document between `\xAB\xAB\xAB` and `\xBB\xBB\xBB` or between `---` and `---`).",type:"boolean"},splitAdjacentBlockquotes:{defaultValue:!1,describe:"Split adjacent blockquote blocks",type:"boolean"}};if(c===!1)return JSON.parse(JSON.stringify(_));var g={};for(var b in _)_.hasOwnProperty(b)&&(g[b]=_[b].defaultValue);return g}function t(){"use strict";var c=r(!0),_={};for(var g in c)c.hasOwnProperty(g)&&(_[g]=!0);return _}var e={},i={},n={},o=r(!0),a="vanilla",s={github:{omitExtraWLInCodeBlocks:!0,simplifiedAutoLink:!0,excludeTrailingPunctuationFromURLs:!0,literalMidWordUnderscores:!0,strikethrough:!0,tables:!0,tablesHeaderId:!0,ghCodeBlocks:!0,tasklists:!0,disableForced4SpacesIndentedSublists:!0,simpleLineBreaks:!0,requireSpaceBeforeHeadingText:!0,ghCompatibleHeaderId:!0,ghMentions:!0,backslashEscapesHTMLTags:!0,emoji:!0,splitAdjacentBlockquotes:!0},original:{noHeaderId:!0,ghCodeBlocks:!1},ghost:{omitExtraWLInCodeBlocks:!0,parseImgDimensions:!0,simplifiedAutoLink:!0,excludeTrailingPunctuationFromURLs:!0,literalMidWordUnderscores:!0,strikethrough:!0,tables:!0,tablesHeaderId:!0,ghCodeBlocks:!0,tasklists:!0,smoothLivePreview:!0,simpleLineBreaks:!0,requireSpaceBeforeHeadingText:!0,ghMentions:!1,encodeEmails:!0},vanilla:r(!0),allOn:t()};e.helper={},e.extensions={},e.setOption=function(c,_){"use strict";return o[c]=_,this},e.getOption=function(c){"use strict";return o[c]},e.getOptions=function(){"use strict";return o},e.resetOptions=function(){"use strict";o=r(!0)},e.setFlavor=function(c){"use strict";if(!s.hasOwnProperty(c))throw Error(c+" flavor was not found");e.resetOptions();var _=s[c];a=c;for(var g in _)_.hasOwnProperty(g)&&(o[g]=_[g])},e.getFlavor=function(){"use strict";return a},e.getFlavorOptions=function(c){"use strict";if(s.hasOwnProperty(c))return s[c]},e.getDefaultOptions=function(c){"use strict";return r(c)},e.subParser=function(c,_){"use strict";if(e.helper.isString(c))if(typeof _!="undefined")i[c]=_;else{if(i.hasOwnProperty(c))return i[c];throw Error("SubParser named "+c+" not registered!")}},e.extension=function(c,_){"use strict";if(!e.helper.isString(c))throw Error("Extension 'name' must be a string");if(c=e.helper.stdExtName(c),e.helper.isUndefined(_)){if(!n.hasOwnProperty(c))throw Error("Extension named "+c+" is not registered!");return n[c]}else{typeof _=="function"&&(_=_()),e.helper.isArray(_)||(_=[_]);var g=l(_,c);if(g.valid)n[c]=_;else throw Error(g.error)}},e.getAllExtensions=function(){"use strict";return n},e.removeExtension=function(c){"use strict";delete n[c]},e.resetExtensions=function(){"use strict";n={}};function l(c,_){"use strict";var g=_?"Error in "+_+" extension->":"Error in unnamed extension",b={valid:!0,error:""};e.helper.isArray(c)||(c=[c]);for(var E=0;E<c.length;++E){var T=g+" sub-extension "+E+": ",C=c[E];if(typeof C!="object")return b.valid=!1,b.error=T+"must be an object, but "+typeof C+" given",b;if(!e.helper.isString(C.type))return b.valid=!1,b.error=T+'property "type" must be a string, but '+typeof C.type+" given",b;var S=C.type=C.type.toLowerCase();if(S==="language"&&(S=C.type="lang"),S==="html"&&(S=C.type="output"),S!=="lang"&&S!=="output"&&S!=="listener")return b.valid=!1,b.error=T+"type "+S+' is not recognized. Valid values: "lang/language", "output/html" or "listener"',b;if(S==="listener"){if(e.helper.isUndefined(C.listeners))return b.valid=!1,b.error=T+'. Extensions of type "listener" must have a property called "listeners"',b}else if(e.helper.isUndefined(C.filter)&&e.helper.isUndefined(C.regex))return b.valid=!1,b.error=T+S+' extensions must define either a "regex" property or a "filter" method',b;if(C.listeners){if(typeof C.listeners!="object")return b.valid=!1,b.error=T+'"listeners" property must be an object but '+typeof C.listeners+" given",b;for(var A in C.listeners)if(C.listeners.hasOwnProperty(A)&&typeof C.listeners[A]!="function")return b.valid=!1,b.error=T+'"listeners" property must be an hash of [event name]: [callback]. listeners.'+A+" must be a function but "+typeof C.listeners[A]+" given",b}if(C.filter){if(typeof C.filter!="function")return b.valid=!1,b.error=T+'"filter" must be a function, but '+typeof C.filter+" given",b}else if(C.regex){if(e.helper.isString(C.regex)&&(C.regex=new RegExp(C.regex,"g")),!(C.regex instanceof RegExp))return b.valid=!1,b.error=T+'"regex" property must either be a string or a RegExp object, but '+typeof C.regex+" given",b;if(e.helper.isUndefined(C.replace))return b.valid=!1,b.error=T+'"regex" extensions must implement a replace string or function',b}}return b}e.validateExtension=function(c){"use strict";var _=l(c,null);return _.valid?!0:(console.warn(_.error),!1)},e.hasOwnProperty("helper")||(e.helper={}),e.helper.isString=function(c){"use strict";return typeof c=="string"||c instanceof String},e.helper.isFunction=function(c){"use strict";var _={};return c&&_.toString.call(c)==="[object Function]"},e.helper.isArray=function(c){"use strict";return Array.isArray(c)},e.helper.isUndefined=function(c){"use strict";return typeof c=="undefined"},e.helper.forEach=function(c,_){"use strict";if(e.helper.isUndefined(c))throw new Error("obj param is required");if(e.helper.isUndefined(_))throw new Error("callback param is required");if(!e.helper.isFunction(_))throw new Error("callback param must be a function/closure");if(typeof c.forEach=="function")c.forEach(_);else if(e.helper.isArray(c))for(var g=0;g<c.length;g++)_(c[g],g,c);else if(typeof c=="object")for(var b in c)c.hasOwnProperty(b)&&_(c[b],b,c);else throw new Error("obj does not seem to be an array or an iterable object")},e.helper.stdExtName=function(c){"use strict";return c.replace(/[_?*+\/\\.^-]/g,"").replace(/\s/g,"").toLowerCase()};function d(c,_){"use strict";var g=_.charCodeAt(0);return"\xA8E"+g+"E"}e.helper.escapeCharactersCallback=d,e.helper.escapeCharacters=function(c,_,g){"use strict";var b="(["+_.replace(/([\[\]\\])/g,"\\$1")+"])";g&&(b="\\\\"+b);var E=new RegExp(b,"g");return c=c.replace(E,d),c},e.helper.unescapeHTMLEntities=function(c){"use strict";return c.replace(/&quot;/g,'"').replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&amp;/g,"&")};var u=function(c,_,g,b){"use strict";var E=b||"",T=E.indexOf("g")>-1,C=new RegExp(_+"|"+g,"g"+E.replace(/g/g,"")),S=new RegExp(_,E.replace(/g/g,"")),A=[],L,B,P,M,O;do for(L=0;P=C.exec(c);)if(S.test(P[0]))L++||(B=C.lastIndex,M=B-P[0].length);else if(L&&!--L){O=P.index+P[0].length;var I={left:{start:M,end:B},match:{start:B,end:P.index},right:{start:P.index,end:O},wholeMatch:{start:M,end:O}};if(A.push(I),!T)return A}while(L&&(C.lastIndex=B));return A};e.helper.matchRecursiveRegExp=function(c,_,g,b){"use strict";for(var E=u(c,_,g,b),T=[],C=0;C<E.length;++C)T.push([c.slice(E[C].wholeMatch.start,E[C].wholeMatch.end),c.slice(E[C].match.start,E[C].match.end),c.slice(E[C].left.start,E[C].left.end),c.slice(E[C].right.start,E[C].right.end)]);return T},e.helper.replaceRecursiveRegExp=function(c,_,g,b,E){"use strict";if(!e.helper.isFunction(_)){var T=_;_=function(){return T}}var C=u(c,g,b,E),S=c,A=C.length;if(A>0){var L=[];C[0].wholeMatch.start!==0&&L.push(c.slice(0,C[0].wholeMatch.start));for(var B=0;B<A;++B)L.push(_(c.slice(C[B].wholeMatch.start,C[B].wholeMatch.end),c.slice(C[B].match.start,C[B].match.end),c.slice(C[B].left.start,C[B].left.end),c.slice(C[B].right.start,C[B].right.end))),B<A-1&&L.push(c.slice(C[B].wholeMatch.end,C[B+1].wholeMatch.start));C[A-1].wholeMatch.end<c.length&&L.push(c.slice(C[A-1].wholeMatch.end)),S=L.join("")}return S},e.helper.regexIndexOf=function(c,_,g){"use strict";if(!e.helper.isString(c))throw"InvalidArgumentError: first parameter of showdown.helper.regexIndexOf function must be a string";if(!(_ instanceof RegExp))throw"InvalidArgumentError: second parameter of showdown.helper.regexIndexOf function must be an instance of RegExp";var b=c.substring(g||0).search(_);return b>=0?b+(g||0):b},e.helper.splitAtIndex=function(c,_){"use strict";if(!e.helper.isString(c))throw"InvalidArgumentError: first parameter of showdown.helper.regexIndexOf function must be a string";return[c.substring(0,_),c.substring(_)]},e.helper.encodeEmailAddress=function(c){"use strict";var _=[function(g){return"&#"+g.charCodeAt(0)+";"},function(g){return"&#x"+g.charCodeAt(0).toString(16)+";"},function(g){return g}];return c=c.replace(/./g,function(g){if(g==="@")g=_[Math.floor(Math.random()*2)](g);else{var b=Math.random();g=b>.9?_[2](g):b>.45?_[1](g):_[0](g)}return g}),c},e.helper.padEnd=function(_,g,b){"use strict";return g=g>>0,b=String(b||" "),_.length>g?String(_):(g=g-_.length,g>b.length&&(b+=b.repeat(g/b.length)),String(_)+b.slice(0,g))},typeof console=="undefined"&&(console={warn:function(c){"use strict";alert(c)},log:function(c){"use strict";alert(c)},error:function(c){"use strict";throw c}}),e.helper.regexes={asteriskDashAndColon:/([*_:~])/g},e.helper.emojis={"+1":"\u{1F44D}","-1":"\u{1F44E}","100":"\u{1F4AF}","1234":"\u{1F522}","1st_place_medal":"\u{1F947}","2nd_place_medal":"\u{1F948}","3rd_place_medal":"\u{1F949}","8ball":"\u{1F3B1}",a:"\u{1F170}\uFE0F",ab:"\u{1F18E}",abc:"\u{1F524}",abcd:"\u{1F521}",accept:"\u{1F251}",aerial_tramway:"\u{1F6A1}",airplane:"\u2708\uFE0F",alarm_clock:"\u23F0",alembic:"\u2697\uFE0F",alien:"\u{1F47D}",ambulance:"\u{1F691}",amphora:"\u{1F3FA}",anchor:"\u2693\uFE0F",angel:"\u{1F47C}",anger:"\u{1F4A2}",angry:"\u{1F620}",anguished:"\u{1F627}",ant:"\u{1F41C}",apple:"\u{1F34E}",aquarius:"\u2652\uFE0F",aries:"\u2648\uFE0F",arrow_backward:"\u25C0\uFE0F",arrow_double_down:"\u23EC",arrow_double_up:"\u23EB",arrow_down:"\u2B07\uFE0F",arrow_down_small:"\u{1F53D}",arrow_forward:"\u25B6\uFE0F",arrow_heading_down:"\u2935\uFE0F",arrow_heading_up:"\u2934\uFE0F",arrow_left:"\u2B05\uFE0F",arrow_lower_left:"\u2199\uFE0F",arrow_lower_right:"\u2198\uFE0F",arrow_right:"\u27A1\uFE0F",arrow_right_hook:"\u21AA\uFE0F",arrow_up:"\u2B06\uFE0F",arrow_up_down:"\u2195\uFE0F",arrow_up_small:"\u{1F53C}",arrow_upper_left:"\u2196\uFE0F",arrow_upper_right:"\u2197\uFE0F",arrows_clockwise:"\u{1F503}",arrows_counterclockwise:"\u{1F504}",art:"\u{1F3A8}",articulated_lorry:"\u{1F69B}",artificial_satellite:"\u{1F6F0}",astonished:"\u{1F632}",athletic_shoe:"\u{1F45F}",atm:"\u{1F3E7}",atom_symbol:"\u269B\uFE0F",avocado:"\u{1F951}",b:"\u{1F171}\uFE0F",baby:"\u{1F476}",baby_bottle:"\u{1F37C}",baby_chick:"\u{1F424}",baby_symbol:"\u{1F6BC}",back:"\u{1F519}",bacon:"\u{1F953}",badminton:"\u{1F3F8}",baggage_claim:"\u{1F6C4}",baguette_bread:"\u{1F956}",balance_scale:"\u2696\uFE0F",balloon:"\u{1F388}",ballot_box:"\u{1F5F3}",ballot_box_with_check:"\u2611\uFE0F",bamboo:"\u{1F38D}",banana:"\u{1F34C}",bangbang:"\u203C\uFE0F",bank:"\u{1F3E6}",bar_chart:"\u{1F4CA}",barber:"\u{1F488}",baseball:"\u26BE\uFE0F",basketball:"\u{1F3C0}",basketball_man:"\u26F9\uFE0F",basketball_woman:"\u26F9\uFE0F&zwj;\u2640\uFE0F",bat:"\u{1F987}",bath:"\u{1F6C0}",bathtub:"\u{1F6C1}",battery:"\u{1F50B}",beach_umbrella:"\u{1F3D6}",bear:"\u{1F43B}",bed:"\u{1F6CF}",bee:"\u{1F41D}",beer:"\u{1F37A}",beers:"\u{1F37B}",beetle:"\u{1F41E}",beginner:"\u{1F530}",bell:"\u{1F514}",bellhop_bell:"\u{1F6CE}",bento:"\u{1F371}",biking_man:"\u{1F6B4}",bike:"\u{1F6B2}",biking_woman:"\u{1F6B4}&zwj;\u2640\uFE0F",bikini:"\u{1F459}",biohazard:"\u2623\uFE0F",bird:"\u{1F426}",birthday:"\u{1F382}",black_circle:"\u26AB\uFE0F",black_flag:"\u{1F3F4}",black_heart:"\u{1F5A4}",black_joker:"\u{1F0CF}",black_large_square:"\u2B1B\uFE0F",black_medium_small_square:"\u25FE\uFE0F",black_medium_square:"\u25FC\uFE0F",black_nib:"\u2712\uFE0F",black_small_square:"\u25AA\uFE0F",black_square_button:"\u{1F532}",blonde_man:"\u{1F471}",blonde_woman:"\u{1F471}&zwj;\u2640\uFE0F",blossom:"\u{1F33C}",blowfish:"\u{1F421}",blue_book:"\u{1F4D8}",blue_car:"\u{1F699}",blue_heart:"\u{1F499}",blush:"\u{1F60A}",boar:"\u{1F417}",boat:"\u26F5\uFE0F",bomb:"\u{1F4A3}",book:"\u{1F4D6}",bookmark:"\u{1F516}",bookmark_tabs:"\u{1F4D1}",books:"\u{1F4DA}",boom:"\u{1F4A5}",boot:"\u{1F462}",bouquet:"\u{1F490}",bowing_man:"\u{1F647}",bow_and_arrow:"\u{1F3F9}",bowing_woman:"\u{1F647}&zwj;\u2640\uFE0F",bowling:"\u{1F3B3}",boxing_glove:"\u{1F94A}",boy:"\u{1F466}",bread:"\u{1F35E}",bride_with_veil:"\u{1F470}",bridge_at_night:"\u{1F309}",briefcase:"\u{1F4BC}",broken_heart:"\u{1F494}",bug:"\u{1F41B}",building_construction:"\u{1F3D7}",bulb:"\u{1F4A1}",bullettrain_front:"\u{1F685}",bullettrain_side:"\u{1F684}",burrito:"\u{1F32F}",bus:"\u{1F68C}",business_suit_levitating:"\u{1F574}",busstop:"\u{1F68F}",bust_in_silhouette:"\u{1F464}",busts_in_silhouette:"\u{1F465}",butterfly:"\u{1F98B}",cactus:"\u{1F335}",cake:"\u{1F370}",calendar:"\u{1F4C6}",call_me_hand:"\u{1F919}",calling:"\u{1F4F2}",camel:"\u{1F42B}",camera:"\u{1F4F7}",camera_flash:"\u{1F4F8}",camping:"\u{1F3D5}",cancer:"\u264B\uFE0F",candle:"\u{1F56F}",candy:"\u{1F36C}",canoe:"\u{1F6F6}",capital_abcd:"\u{1F520}",capricorn:"\u2651\uFE0F",car:"\u{1F697}",card_file_box:"\u{1F5C3}",card_index:"\u{1F4C7}",card_index_dividers:"\u{1F5C2}",carousel_horse:"\u{1F3A0}",carrot:"\u{1F955}",cat:"\u{1F431}",cat2:"\u{1F408}",cd:"\u{1F4BF}",chains:"\u26D3",champagne:"\u{1F37E}",chart:"\u{1F4B9}",chart_with_downwards_trend:"\u{1F4C9}",chart_with_upwards_trend:"\u{1F4C8}",checkered_flag:"\u{1F3C1}",cheese:"\u{1F9C0}",cherries:"\u{1F352}",cherry_blossom:"\u{1F338}",chestnut:"\u{1F330}",chicken:"\u{1F414}",children_crossing:"\u{1F6B8}",chipmunk:"\u{1F43F}",chocolate_bar:"\u{1F36B}",christmas_tree:"\u{1F384}",church:"\u26EA\uFE0F",cinema:"\u{1F3A6}",circus_tent:"\u{1F3AA}",city_sunrise:"\u{1F307}",city_sunset:"\u{1F306}",cityscape:"\u{1F3D9}",cl:"\u{1F191}",clamp:"\u{1F5DC}",clap:"\u{1F44F}",clapper:"\u{1F3AC}",classical_building:"\u{1F3DB}",clinking_glasses:"\u{1F942}",clipboard:"\u{1F4CB}",clock1:"\u{1F550}",clock10:"\u{1F559}",clock1030:"\u{1F565}",clock11:"\u{1F55A}",clock1130:"\u{1F566}",clock12:"\u{1F55B}",clock1230:"\u{1F567}",clock130:"\u{1F55C}",clock2:"\u{1F551}",clock230:"\u{1F55D}",clock3:"\u{1F552}",clock330:"\u{1F55E}",clock4:"\u{1F553}",clock430:"\u{1F55F}",clock5:"\u{1F554}",clock530:"\u{1F560}",clock6:"\u{1F555}",clock630:"\u{1F561}",clock7:"\u{1F556}",clock730:"\u{1F562}",clock8:"\u{1F557}",clock830:"\u{1F563}",clock9:"\u{1F558}",clock930:"\u{1F564}",closed_book:"\u{1F4D5}",closed_lock_with_key:"\u{1F510}",closed_umbrella:"\u{1F302}",cloud:"\u2601\uFE0F",cloud_with_lightning:"\u{1F329}",cloud_with_lightning_and_rain:"\u26C8",cloud_with_rain:"\u{1F327}",cloud_with_snow:"\u{1F328}",clown_face:"\u{1F921}",clubs:"\u2663\uFE0F",cocktail:"\u{1F378}",coffee:"\u2615\uFE0F",coffin:"\u26B0\uFE0F",cold_sweat:"\u{1F630}",comet:"\u2604\uFE0F",computer:"\u{1F4BB}",computer_mouse:"\u{1F5B1}",confetti_ball:"\u{1F38A}",confounded:"\u{1F616}",confused:"\u{1F615}",congratulations:"\u3297\uFE0F",construction:"\u{1F6A7}",construction_worker_man:"\u{1F477}",construction_worker_woman:"\u{1F477}&zwj;\u2640\uFE0F",control_knobs:"\u{1F39B}",convenience_store:"\u{1F3EA}",cookie:"\u{1F36A}",cool:"\u{1F192}",policeman:"\u{1F46E}",copyright:"\xA9\uFE0F",corn:"\u{1F33D}",couch_and_lamp:"\u{1F6CB}",couple:"\u{1F46B}",couple_with_heart_woman_man:"\u{1F491}",couple_with_heart_man_man:"\u{1F468}&zwj;\u2764\uFE0F&zwj;\u{1F468}",couple_with_heart_woman_woman:"\u{1F469}&zwj;\u2764\uFE0F&zwj;\u{1F469}",couplekiss_man_man:"\u{1F468}&zwj;\u2764\uFE0F&zwj;\u{1F48B}&zwj;\u{1F468}",couplekiss_man_woman:"\u{1F48F}",couplekiss_woman_woman:"\u{1F469}&zwj;\u2764\uFE0F&zwj;\u{1F48B}&zwj;\u{1F469}",cow:"\u{1F42E}",cow2:"\u{1F404}",cowboy_hat_face:"\u{1F920}",crab:"\u{1F980}",crayon:"\u{1F58D}",credit_card:"\u{1F4B3}",crescent_moon:"\u{1F319}",cricket:"\u{1F3CF}",crocodile:"\u{1F40A}",croissant:"\u{1F950}",crossed_fingers:"\u{1F91E}",crossed_flags:"\u{1F38C}",crossed_swords:"\u2694\uFE0F",crown:"\u{1F451}",cry:"\u{1F622}",crying_cat_face:"\u{1F63F}",crystal_ball:"\u{1F52E}",cucumber:"\u{1F952}",cupid:"\u{1F498}",curly_loop:"\u27B0",currency_exchange:"\u{1F4B1}",curry:"\u{1F35B}",custard:"\u{1F36E}",customs:"\u{1F6C3}",cyclone:"\u{1F300}",dagger:"\u{1F5E1}",dancer:"\u{1F483}",dancing_women:"\u{1F46F}",dancing_men:"\u{1F46F}&zwj;\u2642\uFE0F",dango:"\u{1F361}",dark_sunglasses:"\u{1F576}",dart:"\u{1F3AF}",dash:"\u{1F4A8}",date:"\u{1F4C5}",deciduous_tree:"\u{1F333}",deer:"\u{1F98C}",department_store:"\u{1F3EC}",derelict_house:"\u{1F3DA}",desert:"\u{1F3DC}",desert_island:"\u{1F3DD}",desktop_computer:"\u{1F5A5}",male_detective:"\u{1F575}\uFE0F",diamond_shape_with_a_dot_inside:"\u{1F4A0}",diamonds:"\u2666\uFE0F",disappointed:"\u{1F61E}",disappointed_relieved:"\u{1F625}",dizzy:"\u{1F4AB}",dizzy_face:"\u{1F635}",do_not_litter:"\u{1F6AF}",dog:"\u{1F436}",dog2:"\u{1F415}",dollar:"\u{1F4B5}",dolls:"\u{1F38E}",dolphin:"\u{1F42C}",door:"\u{1F6AA}",doughnut:"\u{1F369}",dove:"\u{1F54A}",dragon:"\u{1F409}",dragon_face:"\u{1F432}",dress:"\u{1F457}",dromedary_camel:"\u{1F42A}",drooling_face:"\u{1F924}",droplet:"\u{1F4A7}",drum:"\u{1F941}",duck:"\u{1F986}",dvd:"\u{1F4C0}","e-mail":"\u{1F4E7}",eagle:"\u{1F985}",ear:"\u{1F442}",ear_of_rice:"\u{1F33E}",earth_africa:"\u{1F30D}",earth_americas:"\u{1F30E}",earth_asia:"\u{1F30F}",egg:"\u{1F95A}",eggplant:"\u{1F346}",eight_pointed_black_star:"\u2734\uFE0F",eight_spoked_asterisk:"\u2733\uFE0F",electric_plug:"\u{1F50C}",elephant:"\u{1F418}",email:"\u2709\uFE0F",end:"\u{1F51A}",envelope_with_arrow:"\u{1F4E9}",euro:"\u{1F4B6}",european_castle:"\u{1F3F0}",european_post_office:"\u{1F3E4}",evergreen_tree:"\u{1F332}",exclamation:"\u2757\uFE0F",expressionless:"\u{1F611}",eye:"\u{1F441}",eye_speech_bubble:"\u{1F441}&zwj;\u{1F5E8}",eyeglasses:"\u{1F453}",eyes:"\u{1F440}",face_with_head_bandage:"\u{1F915}",face_with_thermometer:"\u{1F912}",fist_oncoming:"\u{1F44A}",factory:"\u{1F3ED}",fallen_leaf:"\u{1F342}",family_man_woman_boy:"\u{1F46A}",family_man_boy:"\u{1F468}&zwj;\u{1F466}",family_man_boy_boy:"\u{1F468}&zwj;\u{1F466}&zwj;\u{1F466}",family_man_girl:"\u{1F468}&zwj;\u{1F467}",family_man_girl_boy:"\u{1F468}&zwj;\u{1F467}&zwj;\u{1F466}",family_man_girl_girl:"\u{1F468}&zwj;\u{1F467}&zwj;\u{1F467}",family_man_man_boy:"\u{1F468}&zwj;\u{1F468}&zwj;\u{1F466}",family_man_man_boy_boy:"\u{1F468}&zwj;\u{1F468}&zwj;\u{1F466}&zwj;\u{1F466}",family_man_man_girl:"\u{1F468}&zwj;\u{1F468}&zwj;\u{1F467}",family_man_man_girl_boy:"\u{1F468}&zwj;\u{1F468}&zwj;\u{1F467}&zwj;\u{1F466}",family_man_man_girl_girl:"\u{1F468}&zwj;\u{1F468}&zwj;\u{1F467}&zwj;\u{1F467}",family_man_woman_boy_boy:"\u{1F468}&zwj;\u{1F469}&zwj;\u{1F466}&zwj;\u{1F466}",family_man_woman_girl:"\u{1F468}&zwj;\u{1F469}&zwj;\u{1F467}",family_man_woman_girl_boy:"\u{1F468}&zwj;\u{1F469}&zwj;\u{1F467}&zwj;\u{1F466}",family_man_woman_girl_girl:"\u{1F468}&zwj;\u{1F469}&zwj;\u{1F467}&zwj;\u{1F467}",family_woman_boy:"\u{1F469}&zwj;\u{1F466}",family_woman_boy_boy:"\u{1F469}&zwj;\u{1F466}&zwj;\u{1F466}",family_woman_girl:"\u{1F469}&zwj;\u{1F467}",family_woman_girl_boy:"\u{1F469}&zwj;\u{1F467}&zwj;\u{1F466}",family_woman_girl_girl:"\u{1F469}&zwj;\u{1F467}&zwj;\u{1F467}",family_woman_woman_boy:"\u{1F469}&zwj;\u{1F469}&zwj;\u{1F466}",family_woman_woman_boy_boy:"\u{1F469}&zwj;\u{1F469}&zwj;\u{1F466}&zwj;\u{1F466}",family_woman_woman_girl:"\u{1F469}&zwj;\u{1F469}&zwj;\u{1F467}",family_woman_woman_girl_boy:"\u{1F469}&zwj;\u{1F469}&zwj;\u{1F467}&zwj;\u{1F466}",family_woman_woman_girl_girl:"\u{1F469}&zwj;\u{1F469}&zwj;\u{1F467}&zwj;\u{1F467}",fast_forward:"\u23E9",fax:"\u{1F4E0}",fearful:"\u{1F628}",feet:"\u{1F43E}",female_detective:"\u{1F575}\uFE0F&zwj;\u2640\uFE0F",ferris_wheel:"\u{1F3A1}",ferry:"\u26F4",field_hockey:"\u{1F3D1}",file_cabinet:"\u{1F5C4}",file_folder:"\u{1F4C1}",film_projector:"\u{1F4FD}",film_strip:"\u{1F39E}",fire:"\u{1F525}",fire_engine:"\u{1F692}",fireworks:"\u{1F386}",first_quarter_moon:"\u{1F313}",first_quarter_moon_with_face:"\u{1F31B}",fish:"\u{1F41F}",fish_cake:"\u{1F365}",fishing_pole_and_fish:"\u{1F3A3}",fist_raised:"\u270A",fist_left:"\u{1F91B}",fist_right:"\u{1F91C}",flags:"\u{1F38F}",flashlight:"\u{1F526}",fleur_de_lis:"\u269C\uFE0F",flight_arrival:"\u{1F6EC}",flight_departure:"\u{1F6EB}",floppy_disk:"\u{1F4BE}",flower_playing_cards:"\u{1F3B4}",flushed:"\u{1F633}",fog:"\u{1F32B}",foggy:"\u{1F301}",football:"\u{1F3C8}",footprints:"\u{1F463}",fork_and_knife:"\u{1F374}",fountain:"\u26F2\uFE0F",fountain_pen:"\u{1F58B}",four_leaf_clover:"\u{1F340}",fox_face:"\u{1F98A}",framed_picture:"\u{1F5BC}",free:"\u{1F193}",fried_egg:"\u{1F373}",fried_shrimp:"\u{1F364}",fries:"\u{1F35F}",frog:"\u{1F438}",frowning:"\u{1F626}",frowning_face:"\u2639\uFE0F",frowning_man:"\u{1F64D}&zwj;\u2642\uFE0F",frowning_woman:"\u{1F64D}",middle_finger:"\u{1F595}",fuelpump:"\u26FD\uFE0F",full_moon:"\u{1F315}",full_moon_with_face:"\u{1F31D}",funeral_urn:"\u26B1\uFE0F",game_die:"\u{1F3B2}",gear:"\u2699\uFE0F",gem:"\u{1F48E}",gemini:"\u264A\uFE0F",ghost:"\u{1F47B}",gift:"\u{1F381}",gift_heart:"\u{1F49D}",girl:"\u{1F467}",globe_with_meridians:"\u{1F310}",goal_net:"\u{1F945}",goat:"\u{1F410}",golf:"\u26F3\uFE0F",golfing_man:"\u{1F3CC}\uFE0F",golfing_woman:"\u{1F3CC}\uFE0F&zwj;\u2640\uFE0F",gorilla:"\u{1F98D}",grapes:"\u{1F347}",green_apple:"\u{1F34F}",green_book:"\u{1F4D7}",green_heart:"\u{1F49A}",green_salad:"\u{1F957}",grey_exclamation:"\u2755",grey_question:"\u2754",grimacing:"\u{1F62C}",grin:"\u{1F601}",grinning:"\u{1F600}",guardsman:"\u{1F482}",guardswoman:"\u{1F482}&zwj;\u2640\uFE0F",guitar:"\u{1F3B8}",gun:"\u{1F52B}",haircut_woman:"\u{1F487}",haircut_man:"\u{1F487}&zwj;\u2642\uFE0F",hamburger:"\u{1F354}",hammer:"\u{1F528}",hammer_and_pick:"\u2692",hammer_and_wrench:"\u{1F6E0}",hamster:"\u{1F439}",hand:"\u270B",handbag:"\u{1F45C}",handshake:"\u{1F91D}",hankey:"\u{1F4A9}",hatched_chick:"\u{1F425}",hatching_chick:"\u{1F423}",headphones:"\u{1F3A7}",hear_no_evil:"\u{1F649}",heart:"\u2764\uFE0F",heart_decoration:"\u{1F49F}",heart_eyes:"\u{1F60D}",heart_eyes_cat:"\u{1F63B}",heartbeat:"\u{1F493}",heartpulse:"\u{1F497}",hearts:"\u2665\uFE0F",heavy_check_mark:"\u2714\uFE0F",heavy_division_sign:"\u2797",heavy_dollar_sign:"\u{1F4B2}",heavy_heart_exclamation:"\u2763\uFE0F",heavy_minus_sign:"\u2796",heavy_multiplication_x:"\u2716\uFE0F",heavy_plus_sign:"\u2795",helicopter:"\u{1F681}",herb:"\u{1F33F}",hibiscus:"\u{1F33A}",high_brightness:"\u{1F506}",high_heel:"\u{1F460}",hocho:"\u{1F52A}",hole:"\u{1F573}",honey_pot:"\u{1F36F}",horse:"\u{1F434}",horse_racing:"\u{1F3C7}",hospital:"\u{1F3E5}",hot_pepper:"\u{1F336}",hotdog:"\u{1F32D}",hotel:"\u{1F3E8}",hotsprings:"\u2668\uFE0F",hourglass:"\u231B\uFE0F",hourglass_flowing_sand:"\u23F3",house:"\u{1F3E0}",house_with_garden:"\u{1F3E1}",houses:"\u{1F3D8}",hugs:"\u{1F917}",hushed:"\u{1F62F}",ice_cream:"\u{1F368}",ice_hockey:"\u{1F3D2}",ice_skate:"\u26F8",icecream:"\u{1F366}",id:"\u{1F194}",ideograph_advantage:"\u{1F250}",imp:"\u{1F47F}",inbox_tray:"\u{1F4E5}",incoming_envelope:"\u{1F4E8}",tipping_hand_woman:"\u{1F481}",information_source:"\u2139\uFE0F",innocent:"\u{1F607}",interrobang:"\u2049\uFE0F",iphone:"\u{1F4F1}",izakaya_lantern:"\u{1F3EE}",jack_o_lantern:"\u{1F383}",japan:"\u{1F5FE}",japanese_castle:"\u{1F3EF}",japanese_goblin:"\u{1F47A}",japanese_ogre:"\u{1F479}",jeans:"\u{1F456}",joy:"\u{1F602}",joy_cat:"\u{1F639}",joystick:"\u{1F579}",kaaba:"\u{1F54B}",key:"\u{1F511}",keyboard:"\u2328\uFE0F",keycap_ten:"\u{1F51F}",kick_scooter:"\u{1F6F4}",kimono:"\u{1F458}",kiss:"\u{1F48B}",kissing:"\u{1F617}",kissing_cat:"\u{1F63D}",kissing_closed_eyes:"\u{1F61A}",kissing_heart:"\u{1F618}",kissing_smiling_eyes:"\u{1F619}",kiwi_fruit:"\u{1F95D}",koala:"\u{1F428}",koko:"\u{1F201}",label:"\u{1F3F7}",large_blue_circle:"\u{1F535}",large_blue_diamond:"\u{1F537}",large_orange_diamond:"\u{1F536}",last_quarter_moon:"\u{1F317}",last_quarter_moon_with_face:"\u{1F31C}",latin_cross:"\u271D\uFE0F",laughing:"\u{1F606}",leaves:"\u{1F343}",ledger:"\u{1F4D2}",left_luggage:"\u{1F6C5}",left_right_arrow:"\u2194\uFE0F",leftwards_arrow_with_hook:"\u21A9\uFE0F",lemon:"\u{1F34B}",leo:"\u264C\uFE0F",leopard:"\u{1F406}",level_slider:"\u{1F39A}",libra:"\u264E\uFE0F",light_rail:"\u{1F688}",link:"\u{1F517}",lion:"\u{1F981}",lips:"\u{1F444}",lipstick:"\u{1F484}",lizard:"\u{1F98E}",lock:"\u{1F512}",lock_with_ink_pen:"\u{1F50F}",lollipop:"\u{1F36D}",loop:"\u27BF",loud_sound:"\u{1F50A}",loudspeaker:"\u{1F4E2}",love_hotel:"\u{1F3E9}",love_letter:"\u{1F48C}",low_brightness:"\u{1F505}",lying_face:"\u{1F925}",m:"\u24C2\uFE0F",mag:"\u{1F50D}",mag_right:"\u{1F50E}",mahjong:"\u{1F004}\uFE0F",mailbox:"\u{1F4EB}",mailbox_closed:"\u{1F4EA}",mailbox_with_mail:"\u{1F4EC}",mailbox_with_no_mail:"\u{1F4ED}",man:"\u{1F468}",man_artist:"\u{1F468}&zwj;\u{1F3A8}",man_astronaut:"\u{1F468}&zwj;\u{1F680}",man_cartwheeling:"\u{1F938}&zwj;\u2642\uFE0F",man_cook:"\u{1F468}&zwj;\u{1F373}",man_dancing:"\u{1F57A}",man_facepalming:"\u{1F926}&zwj;\u2642\uFE0F",man_factory_worker:"\u{1F468}&zwj;\u{1F3ED}",man_farmer:"\u{1F468}&zwj;\u{1F33E}",man_firefighter:"\u{1F468}&zwj;\u{1F692}",man_health_worker:"\u{1F468}&zwj;\u2695\uFE0F",man_in_tuxedo:"\u{1F935}",man_judge:"\u{1F468}&zwj;\u2696\uFE0F",man_juggling:"\u{1F939}&zwj;\u2642\uFE0F",man_mechanic:"\u{1F468}&zwj;\u{1F527}",man_office_worker:"\u{1F468}&zwj;\u{1F4BC}",man_pilot:"\u{1F468}&zwj;\u2708\uFE0F",man_playing_handball:"\u{1F93E}&zwj;\u2642\uFE0F",man_playing_water_polo:"\u{1F93D}&zwj;\u2642\uFE0F",man_scientist:"\u{1F468}&zwj;\u{1F52C}",man_shrugging:"\u{1F937}&zwj;\u2642\uFE0F",man_singer:"\u{1F468}&zwj;\u{1F3A4}",man_student:"\u{1F468}&zwj;\u{1F393}",man_teacher:"\u{1F468}&zwj;\u{1F3EB}",man_technologist:"\u{1F468}&zwj;\u{1F4BB}",man_with_gua_pi_mao:"\u{1F472}",man_with_turban:"\u{1F473}",tangerine:"\u{1F34A}",mans_shoe:"\u{1F45E}",mantelpiece_clock:"\u{1F570}",maple_leaf:"\u{1F341}",martial_arts_uniform:"\u{1F94B}",mask:"\u{1F637}",massage_woman:"\u{1F486}",massage_man:"\u{1F486}&zwj;\u2642\uFE0F",meat_on_bone:"\u{1F356}",medal_military:"\u{1F396}",medal_sports:"\u{1F3C5}",mega:"\u{1F4E3}",melon:"\u{1F348}",memo:"\u{1F4DD}",men_wrestling:"\u{1F93C}&zwj;\u2642\uFE0F",menorah:"\u{1F54E}",mens:"\u{1F6B9}",metal:"\u{1F918}",metro:"\u{1F687}",microphone:"\u{1F3A4}",microscope:"\u{1F52C}",milk_glass:"\u{1F95B}",milky_way:"\u{1F30C}",minibus:"\u{1F690}",minidisc:"\u{1F4BD}",mobile_phone_off:"\u{1F4F4}",money_mouth_face:"\u{1F911}",money_with_wings:"\u{1F4B8}",moneybag:"\u{1F4B0}",monkey:"\u{1F412}",monkey_face:"\u{1F435}",monorail:"\u{1F69D}",moon:"\u{1F314}",mortar_board:"\u{1F393}",mosque:"\u{1F54C}",motor_boat:"\u{1F6E5}",motor_scooter:"\u{1F6F5}",motorcycle:"\u{1F3CD}",motorway:"\u{1F6E3}",mount_fuji:"\u{1F5FB}",mountain:"\u26F0",mountain_biking_man:"\u{1F6B5}",mountain_biking_woman:"\u{1F6B5}&zwj;\u2640\uFE0F",mountain_cableway:"\u{1F6A0}",mountain_railway:"\u{1F69E}",mountain_snow:"\u{1F3D4}",mouse:"\u{1F42D}",mouse2:"\u{1F401}",movie_camera:"\u{1F3A5}",moyai:"\u{1F5FF}",mrs_claus:"\u{1F936}",muscle:"\u{1F4AA}",mushroom:"\u{1F344}",musical_keyboard:"\u{1F3B9}",musical_note:"\u{1F3B5}",musical_score:"\u{1F3BC}",mute:"\u{1F507}",nail_care:"\u{1F485}",name_badge:"\u{1F4DB}",national_park:"\u{1F3DE}",nauseated_face:"\u{1F922}",necktie:"\u{1F454}",negative_squared_cross_mark:"\u274E",nerd_face:"\u{1F913}",neutral_face:"\u{1F610}",new:"\u{1F195}",new_moon:"\u{1F311}",new_moon_with_face:"\u{1F31A}",newspaper:"\u{1F4F0}",newspaper_roll:"\u{1F5DE}",next_track_button:"\u23ED",ng:"\u{1F196}",no_good_man:"\u{1F645}&zwj;\u2642\uFE0F",no_good_woman:"\u{1F645}",night_with_stars:"\u{1F303}",no_bell:"\u{1F515}",no_bicycles:"\u{1F6B3}",no_entry:"\u26D4\uFE0F",no_entry_sign:"\u{1F6AB}",no_mobile_phones:"\u{1F4F5}",no_mouth:"\u{1F636}",no_pedestrians:"\u{1F6B7}",no_smoking:"\u{1F6AD}","non-potable_water":"\u{1F6B1}",nose:"\u{1F443}",notebook:"\u{1F4D3}",notebook_with_decorative_cover:"\u{1F4D4}",notes:"\u{1F3B6}",nut_and_bolt:"\u{1F529}",o:"\u2B55\uFE0F",o2:"\u{1F17E}\uFE0F",ocean:"\u{1F30A}",octopus:"\u{1F419}",oden:"\u{1F362}",office:"\u{1F3E2}",oil_drum:"\u{1F6E2}",ok:"\u{1F197}",ok_hand:"\u{1F44C}",ok_man:"\u{1F646}&zwj;\u2642\uFE0F",ok_woman:"\u{1F646}",old_key:"\u{1F5DD}",older_man:"\u{1F474}",older_woman:"\u{1F475}",om:"\u{1F549}",on:"\u{1F51B}",oncoming_automobile:"\u{1F698}",oncoming_bus:"\u{1F68D}",oncoming_police_car:"\u{1F694}",oncoming_taxi:"\u{1F696}",open_file_folder:"\u{1F4C2}",open_hands:"\u{1F450}",open_mouth:"\u{1F62E}",open_umbrella:"\u2602\uFE0F",ophiuchus:"\u26CE",orange_book:"\u{1F4D9}",orthodox_cross:"\u2626\uFE0F",outbox_tray:"\u{1F4E4}",owl:"\u{1F989}",ox:"\u{1F402}",package:"\u{1F4E6}",page_facing_up:"\u{1F4C4}",page_with_curl:"\u{1F4C3}",pager:"\u{1F4DF}",paintbrush:"\u{1F58C}",palm_tree:"\u{1F334}",pancakes:"\u{1F95E}",panda_face:"\u{1F43C}",paperclip:"\u{1F4CE}",paperclips:"\u{1F587}",parasol_on_ground:"\u26F1",parking:"\u{1F17F}\uFE0F",part_alternation_mark:"\u303D\uFE0F",partly_sunny:"\u26C5\uFE0F",passenger_ship:"\u{1F6F3}",passport_control:"\u{1F6C2}",pause_button:"\u23F8",peace_symbol:"\u262E\uFE0F",peach:"\u{1F351}",peanuts:"\u{1F95C}",pear:"\u{1F350}",pen:"\u{1F58A}",pencil2:"\u270F\uFE0F",penguin:"\u{1F427}",pensive:"\u{1F614}",performing_arts:"\u{1F3AD}",persevere:"\u{1F623}",person_fencing:"\u{1F93A}",pouting_woman:"\u{1F64E}",phone:"\u260E\uFE0F",pick:"\u26CF",pig:"\u{1F437}",pig2:"\u{1F416}",pig_nose:"\u{1F43D}",pill:"\u{1F48A}",pineapple:"\u{1F34D}",ping_pong:"\u{1F3D3}",pisces:"\u2653\uFE0F",pizza:"\u{1F355}",place_of_worship:"\u{1F6D0}",plate_with_cutlery:"\u{1F37D}",play_or_pause_button:"\u23EF",point_down:"\u{1F447}",point_left:"\u{1F448}",point_right:"\u{1F449}",point_up:"\u261D\uFE0F",point_up_2:"\u{1F446}",police_car:"\u{1F693}",policewoman:"\u{1F46E}&zwj;\u2640\uFE0F",poodle:"\u{1F429}",popcorn:"\u{1F37F}",post_office:"\u{1F3E3}",postal_horn:"\u{1F4EF}",postbox:"\u{1F4EE}",potable_water:"\u{1F6B0}",potato:"\u{1F954}",pouch:"\u{1F45D}",poultry_leg:"\u{1F357}",pound:"\u{1F4B7}",rage:"\u{1F621}",pouting_cat:"\u{1F63E}",pouting_man:"\u{1F64E}&zwj;\u2642\uFE0F",pray:"\u{1F64F}",prayer_beads:"\u{1F4FF}",pregnant_woman:"\u{1F930}",previous_track_button:"\u23EE",prince:"\u{1F934}",princess:"\u{1F478}",printer:"\u{1F5A8}",purple_heart:"\u{1F49C}",purse:"\u{1F45B}",pushpin:"\u{1F4CC}",put_litter_in_its_place:"\u{1F6AE}",question:"\u2753",rabbit:"\u{1F430}",rabbit2:"\u{1F407}",racehorse:"\u{1F40E}",racing_car:"\u{1F3CE}",radio:"\u{1F4FB}",radio_button:"\u{1F518}",radioactive:"\u2622\uFE0F",railway_car:"\u{1F683}",railway_track:"\u{1F6E4}",rainbow:"\u{1F308}",rainbow_flag:"\u{1F3F3}\uFE0F&zwj;\u{1F308}",raised_back_of_hand:"\u{1F91A}",raised_hand_with_fingers_splayed:"\u{1F590}",raised_hands:"\u{1F64C}",raising_hand_woman:"\u{1F64B}",raising_hand_man:"\u{1F64B}&zwj;\u2642\uFE0F",ram:"\u{1F40F}",ramen:"\u{1F35C}",rat:"\u{1F400}",record_button:"\u23FA",recycle:"\u267B\uFE0F",red_circle:"\u{1F534}",registered:"\xAE\uFE0F",relaxed:"\u263A\uFE0F",relieved:"\u{1F60C}",reminder_ribbon:"\u{1F397}",repeat:"\u{1F501}",repeat_one:"\u{1F502}",rescue_worker_helmet:"\u26D1",restroom:"\u{1F6BB}",revolving_hearts:"\u{1F49E}",rewind:"\u23EA",rhinoceros:"\u{1F98F}",ribbon:"\u{1F380}",rice:"\u{1F35A}",rice_ball:"\u{1F359}",rice_cracker:"\u{1F358}",rice_scene:"\u{1F391}",right_anger_bubble:"\u{1F5EF}",ring:"\u{1F48D}",robot:"\u{1F916}",rocket:"\u{1F680}",rofl:"\u{1F923}",roll_eyes:"\u{1F644}",roller_coaster:"\u{1F3A2}",rooster:"\u{1F413}",rose:"\u{1F339}",rosette:"\u{1F3F5}",rotating_light:"\u{1F6A8}",round_pushpin:"\u{1F4CD}",rowing_man:"\u{1F6A3}",rowing_woman:"\u{1F6A3}&zwj;\u2640\uFE0F",rugby_football:"\u{1F3C9}",running_man:"\u{1F3C3}",running_shirt_with_sash:"\u{1F3BD}",running_woman:"\u{1F3C3}&zwj;\u2640\uFE0F",sa:"\u{1F202}\uFE0F",sagittarius:"\u2650\uFE0F",sake:"\u{1F376}",sandal:"\u{1F461}",santa:"\u{1F385}",satellite:"\u{1F4E1}",saxophone:"\u{1F3B7}",school:"\u{1F3EB}",school_satchel:"\u{1F392}",scissors:"\u2702\uFE0F",scorpion:"\u{1F982}",scorpius:"\u264F\uFE0F",scream:"\u{1F631}",scream_cat:"\u{1F640}",scroll:"\u{1F4DC}",seat:"\u{1F4BA}",secret:"\u3299\uFE0F",see_no_evil:"\u{1F648}",seedling:"\u{1F331}",selfie:"\u{1F933}",shallow_pan_of_food:"\u{1F958}",shamrock:"\u2618\uFE0F",shark:"\u{1F988}",shaved_ice:"\u{1F367}",sheep:"\u{1F411}",shell:"\u{1F41A}",shield:"\u{1F6E1}",shinto_shrine:"\u26E9",ship:"\u{1F6A2}",shirt:"\u{1F455}",shopping:"\u{1F6CD}",shopping_cart:"\u{1F6D2}",shower:"\u{1F6BF}",shrimp:"\u{1F990}",signal_strength:"\u{1F4F6}",six_pointed_star:"\u{1F52F}",ski:"\u{1F3BF}",skier:"\u26F7",skull:"\u{1F480}",skull_and_crossbones:"\u2620\uFE0F",sleeping:"\u{1F634}",sleeping_bed:"\u{1F6CC}",sleepy:"\u{1F62A}",slightly_frowning_face:"\u{1F641}",slightly_smiling_face:"\u{1F642}",slot_machine:"\u{1F3B0}",small_airplane:"\u{1F6E9}",small_blue_diamond:"\u{1F539}",small_orange_diamond:"\u{1F538}",small_red_triangle:"\u{1F53A}",small_red_triangle_down:"\u{1F53B}",smile:"\u{1F604}",smile_cat:"\u{1F638}",smiley:"\u{1F603}",smiley_cat:"\u{1F63A}",smiling_imp:"\u{1F608}",smirk:"\u{1F60F}",smirk_cat:"\u{1F63C}",smoking:"\u{1F6AC}",snail:"\u{1F40C}",snake:"\u{1F40D}",sneezing_face:"\u{1F927}",snowboarder:"\u{1F3C2}",snowflake:"\u2744\uFE0F",snowman:"\u26C4\uFE0F",snowman_with_snow:"\u2603\uFE0F",sob:"\u{1F62D}",soccer:"\u26BD\uFE0F",soon:"\u{1F51C}",sos:"\u{1F198}",sound:"\u{1F509}",space_invader:"\u{1F47E}",spades:"\u2660\uFE0F",spaghetti:"\u{1F35D}",sparkle:"\u2747\uFE0F",sparkler:"\u{1F387}",sparkles:"\u2728",sparkling_heart:"\u{1F496}",speak_no_evil:"\u{1F64A}",speaker:"\u{1F508}",speaking_head:"\u{1F5E3}",speech_balloon:"\u{1F4AC}",speedboat:"\u{1F6A4}",spider:"\u{1F577}",spider_web:"\u{1F578}",spiral_calendar:"\u{1F5D3}",spiral_notepad:"\u{1F5D2}",spoon:"\u{1F944}",squid:"\u{1F991}",stadium:"\u{1F3DF}",star:"\u2B50\uFE0F",star2:"\u{1F31F}",star_and_crescent:"\u262A\uFE0F",star_of_david:"\u2721\uFE0F",stars:"\u{1F320}",station:"\u{1F689}",statue_of_liberty:"\u{1F5FD}",steam_locomotive:"\u{1F682}",stew:"\u{1F372}",stop_button:"\u23F9",stop_sign:"\u{1F6D1}",stopwatch:"\u23F1",straight_ruler:"\u{1F4CF}",strawberry:"\u{1F353}",stuck_out_tongue:"\u{1F61B}",stuck_out_tongue_closed_eyes:"\u{1F61D}",stuck_out_tongue_winking_eye:"\u{1F61C}",studio_microphone:"\u{1F399}",stuffed_flatbread:"\u{1F959}",sun_behind_large_cloud:"\u{1F325}",sun_behind_rain_cloud:"\u{1F326}",sun_behind_small_cloud:"\u{1F324}",sun_with_face:"\u{1F31E}",sunflower:"\u{1F33B}",sunglasses:"\u{1F60E}",sunny:"\u2600\uFE0F",sunrise:"\u{1F305}",sunrise_over_mountains:"\u{1F304}",surfing_man:"\u{1F3C4}",surfing_woman:"\u{1F3C4}&zwj;\u2640\uFE0F",sushi:"\u{1F363}",suspension_railway:"\u{1F69F}",sweat:"\u{1F613}",sweat_drops:"\u{1F4A6}",sweat_smile:"\u{1F605}",sweet_potato:"\u{1F360}",swimming_man:"\u{1F3CA}",swimming_woman:"\u{1F3CA}&zwj;\u2640\uFE0F",symbols:"\u{1F523}",synagogue:"\u{1F54D}",syringe:"\u{1F489}",taco:"\u{1F32E}",tada:"\u{1F389}",tanabata_tree:"\u{1F38B}",taurus:"\u2649\uFE0F",taxi:"\u{1F695}",tea:"\u{1F375}",telephone_receiver:"\u{1F4DE}",telescope:"\u{1F52D}",tennis:"\u{1F3BE}",tent:"\u26FA\uFE0F",thermometer:"\u{1F321}",thinking:"\u{1F914}",thought_balloon:"\u{1F4AD}",ticket:"\u{1F3AB}",tickets:"\u{1F39F}",tiger:"\u{1F42F}",tiger2:"\u{1F405}",timer_clock:"\u23F2",tipping_hand_man:"\u{1F481}&zwj;\u2642\uFE0F",tired_face:"\u{1F62B}",tm:"\u2122\uFE0F",toilet:"\u{1F6BD}",tokyo_tower:"\u{1F5FC}",tomato:"\u{1F345}",tongue:"\u{1F445}",top:"\u{1F51D}",tophat:"\u{1F3A9}",tornado:"\u{1F32A}",trackball:"\u{1F5B2}",tractor:"\u{1F69C}",traffic_light:"\u{1F6A5}",train:"\u{1F68B}",train2:"\u{1F686}",tram:"\u{1F68A}",triangular_flag_on_post:"\u{1F6A9}",triangular_ruler:"\u{1F4D0}",trident:"\u{1F531}",triumph:"\u{1F624}",trolleybus:"\u{1F68E}",trophy:"\u{1F3C6}",tropical_drink:"\u{1F379}",tropical_fish:"\u{1F420}",truck:"\u{1F69A}",trumpet:"\u{1F3BA}",tulip:"\u{1F337}",tumbler_glass:"\u{1F943}",turkey:"\u{1F983}",turtle:"\u{1F422}",tv:"\u{1F4FA}",twisted_rightwards_arrows:"\u{1F500}",two_hearts:"\u{1F495}",two_men_holding_hands:"\u{1F46C}",two_women_holding_hands:"\u{1F46D}",u5272:"\u{1F239}",u5408:"\u{1F234}",u55b6:"\u{1F23A}",u6307:"\u{1F22F}\uFE0F",u6708:"\u{1F237}\uFE0F",u6709:"\u{1F236}",u6e80:"\u{1F235}",u7121:"\u{1F21A}\uFE0F",u7533:"\u{1F238}",u7981:"\u{1F232}",u7a7a:"\u{1F233}",umbrella:"\u2614\uFE0F",unamused:"\u{1F612}",underage:"\u{1F51E}",unicorn:"\u{1F984}",unlock:"\u{1F513}",up:"\u{1F199}",upside_down_face:"\u{1F643}",v:"\u270C\uFE0F",vertical_traffic_light:"\u{1F6A6}",vhs:"\u{1F4FC}",vibration_mode:"\u{1F4F3}",video_camera:"\u{1F4F9}",video_game:"\u{1F3AE}",violin:"\u{1F3BB}",virgo:"\u264D\uFE0F",volcano:"\u{1F30B}",volleyball:"\u{1F3D0}",vs:"\u{1F19A}",vulcan_salute:"\u{1F596}",walking_man:"\u{1F6B6}",walking_woman:"\u{1F6B6}&zwj;\u2640\uFE0F",waning_crescent_moon:"\u{1F318}",waning_gibbous_moon:"\u{1F316}",warning:"\u26A0\uFE0F",wastebasket:"\u{1F5D1}",watch:"\u231A\uFE0F",water_buffalo:"\u{1F403}",watermelon:"\u{1F349}",wave:"\u{1F44B}",wavy_dash:"\u3030\uFE0F",waxing_crescent_moon:"\u{1F312}",wc:"\u{1F6BE}",weary:"\u{1F629}",wedding:"\u{1F492}",weight_lifting_man:"\u{1F3CB}\uFE0F",weight_lifting_woman:"\u{1F3CB}\uFE0F&zwj;\u2640\uFE0F",whale:"\u{1F433}",whale2:"\u{1F40B}",wheel_of_dharma:"\u2638\uFE0F",wheelchair:"\u267F\uFE0F",white_check_mark:"\u2705",white_circle:"\u26AA\uFE0F",white_flag:"\u{1F3F3}\uFE0F",white_flower:"\u{1F4AE}",white_large_square:"\u2B1C\uFE0F",white_medium_small_square:"\u25FD\uFE0F",white_medium_square:"\u25FB\uFE0F",white_small_square:"\u25AB\uFE0F",white_square_button:"\u{1F533}",wilted_flower:"\u{1F940}",wind_chime:"\u{1F390}",wind_face:"\u{1F32C}",wine_glass:"\u{1F377}",wink:"\u{1F609}",wolf:"\u{1F43A}",woman:"\u{1F469}",woman_artist:"\u{1F469}&zwj;\u{1F3A8}",woman_astronaut:"\u{1F469}&zwj;\u{1F680}",woman_cartwheeling:"\u{1F938}&zwj;\u2640\uFE0F",woman_cook:"\u{1F469}&zwj;\u{1F373}",woman_facepalming:"\u{1F926}&zwj;\u2640\uFE0F",woman_factory_worker:"\u{1F469}&zwj;\u{1F3ED}",woman_farmer:"\u{1F469}&zwj;\u{1F33E}",woman_firefighter:"\u{1F469}&zwj;\u{1F692}",woman_health_worker:"\u{1F469}&zwj;\u2695\uFE0F",woman_judge:"\u{1F469}&zwj;\u2696\uFE0F",woman_juggling:"\u{1F939}&zwj;\u2640\uFE0F",woman_mechanic:"\u{1F469}&zwj;\u{1F527}",woman_office_worker:"\u{1F469}&zwj;\u{1F4BC}",woman_pilot:"\u{1F469}&zwj;\u2708\uFE0F",woman_playing_handball:"\u{1F93E}&zwj;\u2640\uFE0F",woman_playing_water_polo:"\u{1F93D}&zwj;\u2640\uFE0F",woman_scientist:"\u{1F469}&zwj;\u{1F52C}",woman_shrugging:"\u{1F937}&zwj;\u2640\uFE0F",woman_singer:"\u{1F469}&zwj;\u{1F3A4}",woman_student:"\u{1F469}&zwj;\u{1F393}",woman_teacher:"\u{1F469}&zwj;\u{1F3EB}",woman_technologist:"\u{1F469}&zwj;\u{1F4BB}",woman_with_turban:"\u{1F473}&zwj;\u2640\uFE0F",womans_clothes:"\u{1F45A}",womans_hat:"\u{1F452}",women_wrestling:"\u{1F93C}&zwj;\u2640\uFE0F",womens:"\u{1F6BA}",world_map:"\u{1F5FA}",worried:"\u{1F61F}",wrench:"\u{1F527}",writing_hand:"\u270D\uFE0F",x:"\u274C",yellow_heart:"\u{1F49B}",yen:"\u{1F4B4}",yin_yang:"\u262F\uFE0F",yum:"\u{1F60B}",zap:"\u26A1\uFE0F",zipper_mouth_face:"\u{1F910}",zzz:"\u{1F4A4}",octocat:'<img alt=":octocat:" height="20" width="20" align="absmiddle" src="https://assets-cdn.github.com/images/icons/emoji/octocat.png">',showdown:`<span style="font-family: 'Anonymous Pro', monospace; text-decoration: underline; text-decoration-style: dashed; text-decoration-color: #3e8b8a;text-underline-position: under;">S</span>`},e.Converter=function(c){"use strict";var _={},g=[],b=[],E={},T=a,C={parsed:{},raw:"",format:""};S();function S(){c=c||{};for(var M in o)o.hasOwnProperty(M)&&(_[M]=o[M]);if(typeof c=="object")for(var O in c)c.hasOwnProperty(O)&&(_[O]=c[O]);else throw Error("Converter expects the passed parameter to be an object, but "+typeof c+" was passed instead.");_.extensions&&e.helper.forEach(_.extensions,A)}function A(M,O){if(O=O||null,e.helper.isString(M))if(M=e.helper.stdExtName(M),O=M,e.extensions[M]){console.warn("DEPRECATION WARNING: "+M+" is an old extension that uses a deprecated loading method.Please inform the developer that the extension should be updated!"),L(e.extensions[M],M);return}else if(!e.helper.isUndefined(n[M]))M=n[M];else throw Error('Extension "'+M+'" could not be loaded. It was either not found or is not a valid extension.');typeof M=="function"&&(M=M()),e.helper.isArray(M)||(M=[M]);var I=l(M,O);if(!I.valid)throw Error(I.error);for(var j=0;j<M.length;++j){switch(M[j].type){case"lang":g.push(M[j]);break;case"output":b.push(M[j]);break}if(M[j].hasOwnProperty("listeners"))for(var H in M[j].listeners)M[j].listeners.hasOwnProperty(H)&&B(H,M[j].listeners[H])}}function L(M,O){typeof M=="function"&&(M=M(new e.Converter)),e.helper.isArray(M)||(M=[M]);var I=l(M,O);if(!I.valid)throw Error(I.error);for(var j=0;j<M.length;++j)switch(M[j].type){case"lang":g.push(M[j]);break;case"output":b.push(M[j]);break;default:throw Error("Extension loader error: Type unrecognized!!!")}}function B(M,O){if(!e.helper.isString(M))throw Error("Invalid argument in converter.listen() method: name must be a string, but "+typeof M+" given");if(typeof O!="function")throw Error("Invalid argument in converter.listen() method: callback must be a function, but "+typeof O+" given");E.hasOwnProperty(M)||(E[M]=[]),E[M].push(O)}function P(M){var O=M.match(/^\s*/)[0].length,I=new RegExp("^\\s{0,"+O+"}","gm");return M.replace(I,"")}this._dispatch=function(O,I,j,H){if(E.hasOwnProperty(O))for(var N=0;N<E[O].length;++N){var D=E[O][N](O,I,this,j,H);D&&typeof D!="undefined"&&(I=D)}return I},this.listen=function(M,O){return B(M,O),this},this.makeHtml=function(M){if(!M)return M;var O={gHtmlBlocks:[],gHtmlMdBlocks:[],gHtmlSpans:[],gUrls:{},gTitles:{},gDimensions:{},gListLevel:0,hashLinkCounts:{},langExtensions:g,outputModifiers:b,converter:this,ghCodeBlocks:[],metadata:{parsed:{},raw:"",format:""}};return M=M.replace(/¨/g,"\xA8T"),M=M.replace(/\$/g,"\xA8D"),M=M.replace(/\r\n/g,`
`),M=M.replace(/\r/g,`
`),M=M.replace(/\u00A0/g,"&nbsp;"),_.smartIndentationFix&&(M=P(M)),M=`

`+M+`

`,M=e.subParser("detab")(M,_,O),M=M.replace(/^[ \t]+$/mg,""),e.helper.forEach(g,function(I){M=e.subParser("runExtension")(I,M,_,O)}),M=e.subParser("metadata")(M,_,O),M=e.subParser("hashPreCodeTags")(M,_,O),M=e.subParser("githubCodeBlocks")(M,_,O),M=e.subParser("hashHTMLBlocks")(M,_,O),M=e.subParser("hashCodeTags")(M,_,O),M=e.subParser("stripLinkDefinitions")(M,_,O),M=e.subParser("blockGamut")(M,_,O),M=e.subParser("unhashHTMLSpans")(M,_,O),M=e.subParser("unescapeSpecialChars")(M,_,O),M=M.replace(/¨D/g,"$$"),M=M.replace(/¨T/g,"\xA8"),M=e.subParser("completeHTMLDocument")(M,_,O),e.helper.forEach(b,function(I){M=e.subParser("runExtension")(I,M,_,O)}),C=O.metadata,M},this.makeMarkdown=this.makeMd=function(M,O){if(M=M.replace(/\r\n/g,`
`),M=M.replace(/\r/g,`
`),M=M.replace(/>[ \t]+</,">\xA8NBSP;<"),!O)if(window&&window.document)O=window.document;else throw new Error("HTMLParser is undefined. If in a webworker or nodejs environment, you need to provide a WHATWG DOM and HTML such as JSDOM");var I=O.createElement("div");I.innerHTML=M;var j={preList:q(I)};K(I);for(var H=I.childNodes,N="",D=0;D<H.length;D++)N+=e.subParser("makeMarkdown.node")(H[D],j);function K(U){for(var G=0;G<U.childNodes.length;++G){var Q=U.childNodes[G];Q.nodeType===3?!/\S/.test(Q.nodeValue)&&!/^[ ]+$/.test(Q.nodeValue)?(U.removeChild(Q),--G):(Q.nodeValue=Q.nodeValue.split(`
`).join(" "),Q.nodeValue=Q.nodeValue.replace(/(\s)+/g,"$1")):Q.nodeType===1&&K(Q)}}function q(U){for(var G=U.querySelectorAll("pre"),Q=[],X=0;X<G.length;++X)if(G[X].childElementCount===1&&G[X].firstChild.tagName.toLowerCase()==="code"){var ie=G[X].firstChild.innerHTML.trim(),ue=G[X].firstChild.getAttribute("data-language")||"";if(ue==="")for(var fe=G[X].firstChild.className.split(" "),be=0;be<fe.length;++be){var Se=fe[be].match(/^language-(.+)$/);if(Se!==null){ue=Se[1];break}}ie=e.helper.unescapeHTMLEntities(ie),Q.push(ie),G[X].outerHTML='<precode language="'+ue+'" precodenum="'+X.toString()+'"></precode>'}else Q.push(G[X].innerHTML),G[X].innerHTML="",G[X].setAttribute("prenum",X.toString());return Q}return N},this.setOption=function(M,O){_[M]=O},this.getOption=function(M){return _[M]},this.getOptions=function(){return _},this.addExtension=function(M,O){O=O||null,A(M,O)},this.useExtension=function(M){A(M)},this.setFlavor=function(M){if(!s.hasOwnProperty(M))throw Error(M+" flavor was not found");var O=s[M];T=M;for(var I in O)O.hasOwnProperty(I)&&(_[I]=O[I])},this.getFlavor=function(){return T},this.removeExtension=function(M){e.helper.isArray(M)||(M=[M]);for(var O=0;O<M.length;++O){for(var I=M[O],j=0;j<g.length;++j)g[j]===I&&g.splice(j,1);for(var H=0;H<b.length;++H)b[H]===I&&b.splice(H,1)}},this.getAllExtensions=function(){return{language:g,output:b}},this.getMetadata=function(M){return M?C.raw:C.parsed},this.getMetadataFormat=function(){return C.format},this._setMetadataPair=function(M,O){C.parsed[M]=O},this._setMetadataFormat=function(M){C.format=M},this._setMetadataRaw=function(M){C.raw=M}},e.subParser("anchors",function(c,_,g){"use strict";c=g.converter._dispatch("anchors.before",c,_,g);var b=function(E,T,C,S,A,L,B){if(e.helper.isUndefined(B)&&(B=""),C=C.toLowerCase(),E.search(/\(<?\s*>? ?(['"].*['"])?\)$/m)>-1)S="";else if(!S)if(C||(C=T.toLowerCase().replace(/ ?\n/g," ")),S="#"+C,!e.helper.isUndefined(g.gUrls[C]))S=g.gUrls[C],e.helper.isUndefined(g.gTitles[C])||(B=g.gTitles[C]);else return E;S=S.replace(e.helper.regexes.asteriskDashAndColon,e.helper.escapeCharactersCallback);var P='<a href="'+S+'"';return B!==""&&B!==null&&(B=B.replace(/"/g,"&quot;"),B=B.replace(e.helper.regexes.asteriskDashAndColon,e.helper.escapeCharactersCallback),P+=' title="'+B+'"'),_.openLinksInNewWindow&&!/^#/.test(S)&&(P+=' rel="noopener noreferrer" target="\xA8E95Eblank"'),P+=">"+T+"</a>",P};return c=c.replace(/\[((?:\[[^\]]*]|[^\[\]])*)] ?(?:\n *)?\[(.*?)]()()()()/g,b),c=c.replace(/\[((?:\[[^\]]*]|[^\[\]])*)]()[ \t]*\([ \t]?<([^>]*)>(?:[ \t]*((["'])([^"]*?)\5))?[ \t]?\)/g,b),c=c.replace(/\[((?:\[[^\]]*]|[^\[\]])*)]()[ \t]*\([ \t]?<?([\S]+?(?:\([\S]*?\)[\S]*?)?)>?(?:[ \t]*((["'])([^"]*?)\5))?[ \t]?\)/g,b),c=c.replace(/\[([^\[\]]+)]()()()()()/g,b),_.ghMentions&&(c=c.replace(/(^|\s)(\\)?(@([a-z\d]+(?:[a-z\d.-]+?[a-z\d]+)*))/gmi,function(E,T,C,S,A){if(C==="\\")return T+S;if(!e.helper.isString(_.ghMentionsLink))throw new Error("ghMentionsLink option must be a string");var L=_.ghMentionsLink.replace(/\{u}/g,A),B="";return _.openLinksInNewWindow&&(B=' rel="noopener noreferrer" target="\xA8E95Eblank"'),T+'<a href="'+L+'"'+B+">"+S+"</a>"})),c=g.converter._dispatch("anchors.after",c,_,g),c});var h=/([*~_]+|\b)(((https?|ftp|dict):\/\/|www\.)[^'">\s]+?\.[^'">\s]+?)()(\1)?(?=\s|$)(?!["<>])/gi,p=/([*~_]+|\b)(((https?|ftp|dict):\/\/|www\.)[^'">\s]+\.[^'">\s]+?)([.!?,()\[\]])?(\1)?(?=\s|$)(?!["<>])/gi,m=/()<(((https?|ftp|dict):\/\/|www\.)[^'">\s]+)()>()/gi,x=/(^|\s)(?:mailto:)?([A-Za-z0-9!#$%&'*+-/=?^_`{|}~.]+@[-a-z0-9]+(\.[-a-z0-9]+)*\.[a-z]+)(?=$|\s)/gmi,y=/<()(?:mailto:)?([-.\w]+@[-a-z0-9]+(\.[-a-z0-9]+)*\.[a-z]+)>/gi,v=function(c){"use strict";return function(_,g,b,E,T,C,S){b=b.replace(e.helper.regexes.asteriskDashAndColon,e.helper.escapeCharactersCallback);var A=b,L="",B="",P=g||"",M=S||"";return/^www\./i.test(b)&&(b=b.replace(/^www\./i,"http://www.")),c.excludeTrailingPunctuationFromURLs&&C&&(L=C),c.openLinksInNewWindow&&(B=' rel="noopener noreferrer" target="\xA8E95Eblank"'),P+'<a href="'+b+'"'+B+">"+A+"</a>"+L+M}},w=function(c,_){"use strict";return function(g,b,E){var T="mailto:";return b=b||"",E=e.subParser("unescapeSpecialChars")(E,c,_),c.encodeEmails?(T=e.helper.encodeEmailAddress(T+E),E=e.helper.encodeEmailAddress(E)):T=T+E,b+'<a href="'+T+'">'+E+"</a>"}};e.subParser("autoLinks",function(c,_,g){"use strict";return c=g.converter._dispatch("autoLinks.before",c,_,g),c=c.replace(m,v(_)),c=c.replace(y,w(_,g)),c=g.converter._dispatch("autoLinks.after",c,_,g),c}),e.subParser("simplifiedAutoLinks",function(c,_,g){"use strict";return _.simplifiedAutoLink&&(c=g.converter._dispatch("simplifiedAutoLinks.before",c,_,g),_.excludeTrailingPunctuationFromURLs?c=c.replace(p,v(_)):c=c.replace(h,v(_)),c=c.replace(x,w(_,g)),c=g.converter._dispatch("simplifiedAutoLinks.after",c,_,g)),c}),e.subParser("blockGamut",function(c,_,g){"use strict";return c=g.converter._dispatch("blockGamut.before",c,_,g),c=e.subParser("blockQuotes")(c,_,g),c=e.subParser("headers")(c,_,g),c=e.subParser("horizontalRule")(c,_,g),c=e.subParser("lists")(c,_,g),c=e.subParser("codeBlocks")(c,_,g),c=e.subParser("tables")(c,_,g),c=e.subParser("hashHTMLBlocks")(c,_,g),c=e.subParser("paragraphs")(c,_,g),c=g.converter._dispatch("blockGamut.after",c,_,g),c}),e.subParser("blockQuotes",function(c,_,g){"use strict";c=g.converter._dispatch("blockQuotes.before",c,_,g),c=c+`

`;var b=/(^ {0,3}>[ \t]?.+\n(.+\n)*\n*)+/gm;return _.splitAdjacentBlockquotes&&(b=/^ {0,3}>[\s\S]*?(?:\n\n)/gm),c=c.replace(b,function(E){return E=E.replace(/^[ \t]*>[ \t]?/gm,""),E=E.replace(/¨0/g,""),E=E.replace(/^[ \t]+$/gm,""),E=e.subParser("githubCodeBlocks")(E,_,g),E=e.subParser("blockGamut")(E,_,g),E=E.replace(/(^|\n)/g,"$1  "),E=E.replace(/(\s*<pre>[^\r]+?<\/pre>)/gm,function(T,C){var S=C;return S=S.replace(/^  /mg,"\xA80"),S=S.replace(/¨0/g,""),S}),e.subParser("hashBlock")(`<blockquote>
`+E+`
</blockquote>`,_,g)}),c=g.converter._dispatch("blockQuotes.after",c,_,g),c}),e.subParser("codeBlocks",function(c,_,g){"use strict";c=g.converter._dispatch("codeBlocks.before",c,_,g),c+="\xA80";var b=/(?:\n\n|^)((?:(?:[ ]{4}|\t).*\n+)+)(\n*[ ]{0,3}[^ \t\n]|(?=¨0))/g;return c=c.replace(b,function(E,T,C){var S=T,A=C,L=`
`;return S=e.subParser("outdent")(S,_,g),S=e.subParser("encodeCode")(S,_,g),S=e.subParser("detab")(S,_,g),S=S.replace(/^\n+/g,""),S=S.replace(/\n+$/g,""),_.omitExtraWLInCodeBlocks&&(L=""),S="<pre><code>"+S+L+"</code></pre>",e.subParser("hashBlock")(S,_,g)+A}),c=c.replace(/¨0/,""),c=g.converter._dispatch("codeBlocks.after",c,_,g),c}),e.subParser("codeSpans",function(c,_,g){"use strict";return c=g.converter._dispatch("codeSpans.before",c,_,g),typeof c=="undefined"&&(c=""),c=c.replace(/(^|[^\\])(`+)([^\r]*?[^`])\2(?!`)/gm,function(b,E,T,C){var S=C;return S=S.replace(/^([ \t]*)/g,""),S=S.replace(/[ \t]*$/g,""),S=e.subParser("encodeCode")(S,_,g),S=E+"<code>"+S+"</code>",S=e.subParser("hashHTMLSpans")(S,_,g),S}),c=g.converter._dispatch("codeSpans.after",c,_,g),c}),e.subParser("completeHTMLDocument",function(c,_,g){"use strict";if(!_.completeHTMLDocument)return c;c=g.converter._dispatch("completeHTMLDocument.before",c,_,g);var b="html",E=`<!DOCTYPE HTML>
`,T="",C=`<meta charset="utf-8">
`,S="",A="";typeof g.metadata.parsed.doctype!="undefined"&&(E="<!DOCTYPE "+g.metadata.parsed.doctype+`>
`,b=g.metadata.parsed.doctype.toString().toLowerCase(),(b==="html"||b==="html5")&&(C='<meta charset="utf-8">'));for(var L in g.metadata.parsed)if(g.metadata.parsed.hasOwnProperty(L))switch(L.toLowerCase()){case"doctype":break;case"title":T="<title>"+g.metadata.parsed.title+`</title>
`;break;case"charset":b==="html"||b==="html5"?C='<meta charset="'+g.metadata.parsed.charset+`">
`:C='<meta name="charset" content="'+g.metadata.parsed.charset+`">
`;break;case"language":case"lang":S=' lang="'+g.metadata.parsed[L]+'"',A+='<meta name="'+L+'" content="'+g.metadata.parsed[L]+`">
`;break;default:A+='<meta name="'+L+'" content="'+g.metadata.parsed[L]+`">
`}return c=E+"<html"+S+`>
<head>
`+T+C+A+`</head>
<body>
`+c.trim()+`
</body>
</html>`,c=g.converter._dispatch("completeHTMLDocument.after",c,_,g),c}),e.subParser("detab",function(c,_,g){"use strict";return c=g.converter._dispatch("detab.before",c,_,g),c=c.replace(/\t(?=\t)/g,"    "),c=c.replace(/\t/g,"\xA8A\xA8B"),c=c.replace(/¨B(.+?)¨A/g,function(b,E){for(var T=E,C=4-T.length%4,S=0;S<C;S++)T+=" ";return T}),c=c.replace(/¨A/g,"    "),c=c.replace(/¨B/g,""),c=g.converter._dispatch("detab.after",c,_,g),c}),e.subParser("ellipsis",function(c,_,g){"use strict";return _.ellipsis&&(c=g.converter._dispatch("ellipsis.before",c,_,g),c=c.replace(/\.\.\./g,"\u2026"),c=g.converter._dispatch("ellipsis.after",c,_,g)),c}),e.subParser("emoji",function(c,_,g){"use strict";if(!_.emoji)return c;c=g.converter._dispatch("emoji.before",c,_,g);var b=/:([\S]+?):/g;return c=c.replace(b,function(E,T){return e.helper.emojis.hasOwnProperty(T)?e.helper.emojis[T]:E}),c=g.converter._dispatch("emoji.after",c,_,g),c}),e.subParser("encodeAmpsAndAngles",function(c,_,g){"use strict";return c=g.converter._dispatch("encodeAmpsAndAngles.before",c,_,g),c=c.replace(/&(?!#?[xX]?(?:[0-9a-fA-F]+|\w+);)/g,"&amp;"),c=c.replace(/<(?![a-z\/?$!])/gi,"&lt;"),c=c.replace(/</g,"&lt;"),c=c.replace(/>/g,"&gt;"),c=g.converter._dispatch("encodeAmpsAndAngles.after",c,_,g),c}),e.subParser("encodeBackslashEscapes",function(c,_,g){"use strict";return c=g.converter._dispatch("encodeBackslashEscapes.before",c,_,g),c=c.replace(/\\(\\)/g,e.helper.escapeCharactersCallback),c=c.replace(/\\([`*_{}\[\]()>#+.!~=|:-])/g,e.helper.escapeCharactersCallback),c=g.converter._dispatch("encodeBackslashEscapes.after",c,_,g),c}),e.subParser("encodeCode",function(c,_,g){"use strict";return c=g.converter._dispatch("encodeCode.before",c,_,g),c=c.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/([*_{}\[\]\\=~-])/g,e.helper.escapeCharactersCallback),c=g.converter._dispatch("encodeCode.after",c,_,g),c}),e.subParser("escapeSpecialCharsWithinTagAttributes",function(c,_,g){"use strict";c=g.converter._dispatch("escapeSpecialCharsWithinTagAttributes.before",c,_,g);var b=/<\/?[a-z\d_:-]+(?:[\s]+[\s\S]+?)?>/gi,E=/<!(--(?:(?:[^>-]|-[^>])(?:[^-]|-[^-])*)--)>/gi;return c=c.replace(b,function(T){return T.replace(/(.)<\/?code>(?=.)/g,"$1`").replace(/([\\`*_~=|])/g,e.helper.escapeCharactersCallback)}),c=c.replace(E,function(T){return T.replace(/([\\`*_~=|])/g,e.helper.escapeCharactersCallback)}),c=g.converter._dispatch("escapeSpecialCharsWithinTagAttributes.after",c,_,g),c}),e.subParser("githubCodeBlocks",function(c,_,g){"use strict";return _.ghCodeBlocks?(c=g.converter._dispatch("githubCodeBlocks.before",c,_,g),c+="\xA80",c=c.replace(/(?:^|\n)(?: {0,3})(```+|~~~+)(?: *)([^\s`~]*)\n([\s\S]*?)\n(?: {0,3})\1/g,function(b,E,T,C){var S=_.omitExtraWLInCodeBlocks?"":`
`;return C=e.subParser("encodeCode")(C,_,g),C=e.subParser("detab")(C,_,g),C=C.replace(/^\n+/g,""),C=C.replace(/\n+$/g,""),C="<pre><code"+(T?' class="'+T+" language-"+T+'"':"")+">"+C+S+"</code></pre>",C=e.subParser("hashBlock")(C,_,g),`

\xA8G`+(g.ghCodeBlocks.push({text:b,codeblock:C})-1)+`G

`}),c=c.replace(/¨0/,""),g.converter._dispatch("githubCodeBlocks.after",c,_,g)):c}),e.subParser("hashBlock",function(c,_,g){"use strict";return c=g.converter._dispatch("hashBlock.before",c,_,g),c=c.replace(/(^\n+|\n+$)/g,""),c=`

\xA8K`+(g.gHtmlBlocks.push(c)-1)+`K

`,c=g.converter._dispatch("hashBlock.after",c,_,g),c}),e.subParser("hashCodeTags",function(c,_,g){"use strict";c=g.converter._dispatch("hashCodeTags.before",c,_,g);var b=function(E,T,C,S){var A=C+e.subParser("encodeCode")(T,_,g)+S;return"\xA8C"+(g.gHtmlSpans.push(A)-1)+"C"};return c=e.helper.replaceRecursiveRegExp(c,b,"<code\\b[^>]*>","</code>","gim"),c=g.converter._dispatch("hashCodeTags.after",c,_,g),c}),e.subParser("hashElement",function(c,_,g){"use strict";return function(b,E){var T=E;return T=T.replace(/\n\n/g,`
`),T=T.replace(/^\n/,""),T=T.replace(/\n+$/g,""),T=`

\xA8K`+(g.gHtmlBlocks.push(T)-1)+`K

`,T}}),e.subParser("hashHTMLBlocks",function(c,_,g){"use strict";c=g.converter._dispatch("hashHTMLBlocks.before",c,_,g);var b=["pre","div","h1","h2","h3","h4","h5","h6","blockquote","table","dl","ol","ul","script","noscript","form","fieldset","iframe","math","style","section","header","footer","nav","article","aside","address","audio","canvas","figure","hgroup","output","video","p"],E=function(M,O,I,j){var H=M;return I.search(/\bmarkdown\b/)!==-1&&(H=I+g.converter.makeHtml(O)+j),`

\xA8K`+(g.gHtmlBlocks.push(H)-1)+`K

`};_.backslashEscapesHTMLTags&&(c=c.replace(/\\<(\/?[^>]+?)>/g,function(M,O){return"&lt;"+O+"&gt;"}));for(var T=0;T<b.length;++T)for(var C,S=new RegExp("^ {0,3}(<"+b[T]+"\\b[^>]*>)","im"),A="<"+b[T]+"\\b[^>]*>",L="</"+b[T]+">";(C=e.helper.regexIndexOf(c,S))!==-1;){var B=e.helper.splitAtIndex(c,C),P=e.helper.replaceRecursiveRegExp(B[1],E,A,L,"im");if(P===B[1])break;c=B[0].concat(P)}return c=c.replace(/(\n {0,3}(<(hr)\b([^<>])*?\/?>)[ \t]*(?=\n{2,}))/g,e.subParser("hashElement")(c,_,g)),c=e.helper.replaceRecursiveRegExp(c,function(M){return`

\xA8K`+(g.gHtmlBlocks.push(M)-1)+`K

`},"^ {0,3}<!--","-->","gm"),c=c.replace(/(?:\n\n)( {0,3}(?:<([?%])[^\r]*?\2>)[ \t]*(?=\n{2,}))/g,e.subParser("hashElement")(c,_,g)),c=g.converter._dispatch("hashHTMLBlocks.after",c,_,g),c}),e.subParser("hashHTMLSpans",function(c,_,g){"use strict";c=g.converter._dispatch("hashHTMLSpans.before",c,_,g);function b(E){return"\xA8C"+(g.gHtmlSpans.push(E)-1)+"C"}return c=c.replace(/<[^>]+?\/>/gi,function(E){return b(E)}),c=c.replace(/<([^>]+?)>[\s\S]*?<\/\1>/g,function(E){return b(E)}),c=c.replace(/<([^>]+?)\s[^>]+?>[\s\S]*?<\/\1>/g,function(E){return b(E)}),c=c.replace(/<[^>]+?>/gi,function(E){return b(E)}),c=g.converter._dispatch("hashHTMLSpans.after",c,_,g),c}),e.subParser("unhashHTMLSpans",function(c,_,g){"use strict";c=g.converter._dispatch("unhashHTMLSpans.before",c,_,g);for(var b=0;b<g.gHtmlSpans.length;++b){for(var E=g.gHtmlSpans[b],T=0;/¨C(\d+)C/.test(E);){var C=RegExp.$1;if(E=E.replace("\xA8C"+C+"C",g.gHtmlSpans[C]),T===10){console.error("maximum nesting of 10 spans reached!!!");break}++T}c=c.replace("\xA8C"+b+"C",E)}return c=g.converter._dispatch("unhashHTMLSpans.after",c,_,g),c}),e.subParser("hashPreCodeTags",function(c,_,g){"use strict";c=g.converter._dispatch("hashPreCodeTags.before",c,_,g);var b=function(E,T,C,S){var A=C+e.subParser("encodeCode")(T,_,g)+S;return`

\xA8G`+(g.ghCodeBlocks.push({text:E,codeblock:A})-1)+`G

`};return c=e.helper.replaceRecursiveRegExp(c,b,"^ {0,3}<pre\\b[^>]*>\\s*<code\\b[^>]*>","^ {0,3}</code>\\s*</pre>","gim"),c=g.converter._dispatch("hashPreCodeTags.after",c,_,g),c}),e.subParser("headers",function(c,_,g){"use strict";c=g.converter._dispatch("headers.before",c,_,g);var b=isNaN(parseInt(_.headerLevelStart))?1:parseInt(_.headerLevelStart),E=_.smoothLivePreview?/^(.+)[ \t]*\n={2,}[ \t]*\n+/gm:/^(.+)[ \t]*\n=+[ \t]*\n+/gm,T=_.smoothLivePreview?/^(.+)[ \t]*\n-{2,}[ \t]*\n+/gm:/^(.+)[ \t]*\n-+[ \t]*\n+/gm;c=c.replace(E,function(A,L){var B=e.subParser("spanGamut")(L,_,g),P=_.noHeaderId?"":' id="'+S(L)+'"',M=b,O="<h"+M+P+">"+B+"</h"+M+">";return e.subParser("hashBlock")(O,_,g)}),c=c.replace(T,function(A,L){var B=e.subParser("spanGamut")(L,_,g),P=_.noHeaderId?"":' id="'+S(L)+'"',M=b+1,O="<h"+M+P+">"+B+"</h"+M+">";return e.subParser("hashBlock")(O,_,g)});var C=_.requireSpaceBeforeHeadingText?/^(#{1,6})[ \t]+(.+?)[ \t]*#*\n+/gm:/^(#{1,6})[ \t]*(.+?)[ \t]*#*\n+/gm;c=c.replace(C,function(A,L,B){var P=B;_.customizedHeaderId&&(P=B.replace(/\s?\{([^{]+?)}\s*$/,""));var M=e.subParser("spanGamut")(P,_,g),O=_.noHeaderId?"":' id="'+S(B)+'"',I=b-1+L.length,j="<h"+I+O+">"+M+"</h"+I+">";return e.subParser("hashBlock")(j,_,g)});function S(A){var L,B;if(_.customizedHeaderId){var P=A.match(/\{([^{]+?)}\s*$/);P&&P[1]&&(A=P[1])}return L=A,e.helper.isString(_.prefixHeaderId)?B=_.prefixHeaderId:_.prefixHeaderId===!0?B="section-":B="",_.rawPrefixHeaderId||(L=B+L),_.ghCompatibleHeaderId?L=L.replace(/ /g,"-").replace(/&amp;/g,"").replace(/¨T/g,"").replace(/¨D/g,"").replace(/[&+$,\/:;=?@"#{}|^¨~\[\]`\\*)(%.!'<>]/g,"").toLowerCase():_.rawHeaderId?L=L.replace(/ /g,"-").replace(/&amp;/g,"&").replace(/¨T/g,"\xA8").replace(/¨D/g,"$").replace(/["']/g,"-").toLowerCase():L=L.replace(/[^\w]/g,"").toLowerCase(),_.rawPrefixHeaderId&&(L=B+L),g.hashLinkCounts[L]?L=L+"-"+g.hashLinkCounts[L]++:g.hashLinkCounts[L]=1,L}return c=g.converter._dispatch("headers.after",c,_,g),c}),e.subParser("horizontalRule",function(c,_,g){"use strict";c=g.converter._dispatch("horizontalRule.before",c,_,g);var b=e.subParser("hashBlock")("<hr />",_,g);return c=c.replace(/^ {0,2}( ?-){3,}[ \t]*$/gm,b),c=c.replace(/^ {0,2}( ?\*){3,}[ \t]*$/gm,b),c=c.replace(/^ {0,2}( ?_){3,}[ \t]*$/gm,b),c=g.converter._dispatch("horizontalRule.after",c,_,g),c}),e.subParser("images",function(c,_,g){"use strict";c=g.converter._dispatch("images.before",c,_,g);var b=/!\[([^\]]*?)][ \t]*()\([ \t]?<?([\S]+?(?:\([\S]*?\)[\S]*?)?)>?(?: =([*\d]+[A-Za-z%]{0,4})x([*\d]+[A-Za-z%]{0,4}))?[ \t]*(?:(["'])([^"]*?)\6)?[ \t]?\)/g,E=/!\[([^\]]*?)][ \t]*()\([ \t]?<([^>]*)>(?: =([*\d]+[A-Za-z%]{0,4})x([*\d]+[A-Za-z%]{0,4}))?[ \t]*(?:(?:(["'])([^"]*?)\6))?[ \t]?\)/g,T=/!\[([^\]]*?)][ \t]*()\([ \t]?<?(data:.+?\/.+?;base64,[A-Za-z0-9+/=\n]+?)>?(?: =([*\d]+[A-Za-z%]{0,4})x([*\d]+[A-Za-z%]{0,4}))?[ \t]*(?:(["'])([^"]*?)\6)?[ \t]?\)/g,C=/!\[([^\]]*?)] ?(?:\n *)?\[([\s\S]*?)]()()()()()/g,S=/!\[([^\[\]]+)]()()()()()/g;function A(B,P,M,O,I,j,H,N){return O=O.replace(/\s/g,""),L(B,P,M,O,I,j,H,N)}function L(B,P,M,O,I,j,H,N){var D=g.gUrls,K=g.gTitles,q=g.gDimensions;if(M=M.toLowerCase(),N||(N=""),B.search(/\(<?\s*>? ?(['"].*['"])?\)$/m)>-1)O="";else if(O===""||O===null)if((M===""||M===null)&&(M=P.toLowerCase().replace(/ ?\n/g," ")),O="#"+M,!e.helper.isUndefined(D[M]))O=D[M],e.helper.isUndefined(K[M])||(N=K[M]),e.helper.isUndefined(q[M])||(I=q[M].width,j=q[M].height);else return B;P=P.replace(/"/g,"&quot;").replace(e.helper.regexes.asteriskDashAndColon,e.helper.escapeCharactersCallback),O=O.replace(e.helper.regexes.asteriskDashAndColon,e.helper.escapeCharactersCallback);var U='<img src="'+O+'" alt="'+P+'"';return N&&e.helper.isString(N)&&(N=N.replace(/"/g,"&quot;").replace(e.helper.regexes.asteriskDashAndColon,e.helper.escapeCharactersCallback),U+=' title="'+N+'"'),I&&j&&(I=I==="*"?"auto":I,j=j==="*"?"auto":j,U+=' width="'+I+'"',U+=' height="'+j+'"'),U+=" />",U}return c=c.replace(C,L),c=c.replace(T,A),c=c.replace(E,L),c=c.replace(b,L),c=c.replace(S,L),c=g.converter._dispatch("images.after",c,_,g),c}),e.subParser("italicsAndBold",function(c,_,g){"use strict";c=g.converter._dispatch("italicsAndBold.before",c,_,g);function b(E,T,C){return T+E+C}return _.literalMidWordUnderscores?(c=c.replace(/\b___(\S[\s\S]*?)___\b/g,function(E,T){return b(T,"<strong><em>","</em></strong>")}),c=c.replace(/\b__(\S[\s\S]*?)__\b/g,function(E,T){return b(T,"<strong>","</strong>")}),c=c.replace(/\b_(\S[\s\S]*?)_\b/g,function(E,T){return b(T,"<em>","</em>")})):(c=c.replace(/___(\S[\s\S]*?)___/g,function(E,T){return/\S$/.test(T)?b(T,"<strong><em>","</em></strong>"):E}),c=c.replace(/__(\S[\s\S]*?)__/g,function(E,T){return/\S$/.test(T)?b(T,"<strong>","</strong>"):E}),c=c.replace(/_([^\s_][\s\S]*?)_/g,function(E,T){return/\S$/.test(T)?b(T,"<em>","</em>"):E})),_.literalMidWordAsterisks?(c=c.replace(/([^*]|^)\B\*\*\*(\S[\s\S]*?)\*\*\*\B(?!\*)/g,function(E,T,C){return b(C,T+"<strong><em>","</em></strong>")}),c=c.replace(/([^*]|^)\B\*\*(\S[\s\S]*?)\*\*\B(?!\*)/g,function(E,T,C){return b(C,T+"<strong>","</strong>")}),c=c.replace(/([^*]|^)\B\*(\S[\s\S]*?)\*\B(?!\*)/g,function(E,T,C){return b(C,T+"<em>","</em>")})):(c=c.replace(/\*\*\*(\S[\s\S]*?)\*\*\*/g,function(E,T){return/\S$/.test(T)?b(T,"<strong><em>","</em></strong>"):E}),c=c.replace(/\*\*(\S[\s\S]*?)\*\*/g,function(E,T){return/\S$/.test(T)?b(T,"<strong>","</strong>"):E}),c=c.replace(/\*([^\s*][\s\S]*?)\*/g,function(E,T){return/\S$/.test(T)?b(T,"<em>","</em>"):E})),c=g.converter._dispatch("italicsAndBold.after",c,_,g),c}),e.subParser("lists",function(c,_,g){"use strict";function b(C,S){g.gListLevel++,C=C.replace(/\n{2,}$/,`
`),C+="\xA80";var A=/(\n)?(^ {0,3})([*+-]|\d+[.])[ \t]+((\[(x|X| )?])?[ \t]*[^\r]+?(\n{1,2}))(?=\n*(¨0| {0,3}([*+-]|\d+[.])[ \t]+))/gm,L=/\n[ \t]*\n(?!¨0)/.test(C);return _.disableForced4SpacesIndentedSublists&&(A=/(\n)?(^ {0,3})([*+-]|\d+[.])[ \t]+((\[(x|X| )?])?[ \t]*[^\r]+?(\n{1,2}))(?=\n*(¨0|\2([*+-]|\d+[.])[ \t]+))/gm),C=C.replace(A,function(B,P,M,O,I,j,H){H=H&&H.trim()!=="";var N=e.subParser("outdent")(I,_,g),D="";return j&&_.tasklists&&(D=' class="task-list-item" style="list-style-type: none;"',N=N.replace(/^[ \t]*\[(x|X| )?]/m,function(){var K='<input type="checkbox" disabled style="margin: 0px 0.35em 0.25em -1.6em; vertical-align: middle;"';return H&&(K+=" checked"),K+=">",K})),N=N.replace(/^([-*+]|\d\.)[ \t]+[\S\n ]*/g,function(K){return"\xA8A"+K}),P||N.search(/\n{2,}/)>-1?(N=e.subParser("githubCodeBlocks")(N,_,g),N=e.subParser("blockGamut")(N,_,g)):(N=e.subParser("lists")(N,_,g),N=N.replace(/\n$/,""),N=e.subParser("hashHTMLBlocks")(N,_,g),N=N.replace(/\n\n+/g,`

`),L?N=e.subParser("paragraphs")(N,_,g):N=e.subParser("spanGamut")(N,_,g)),N=N.replace("\xA8A",""),N="<li"+D+">"+N+`</li>
`,N}),C=C.replace(/¨0/g,""),g.gListLevel--,S&&(C=C.replace(/\s+$/,"")),C}function E(C,S){if(S==="ol"){var A=C.match(/^ *(\d+)\./);if(A&&A[1]!=="1")return' start="'+A[1]+'"'}return""}function T(C,S,A){var L=_.disableForced4SpacesIndentedSublists?/^ ?\d+\.[ \t]/gm:/^ {0,3}\d+\.[ \t]/gm,B=_.disableForced4SpacesIndentedSublists?/^ ?[*+-][ \t]/gm:/^ {0,3}[*+-][ \t]/gm,P=S==="ul"?L:B,M="";if(C.search(P)!==-1)(function I(j){var H=j.search(P),N=E(C,S);H!==-1?(M+=`

<`+S+N+`>
`+b(j.slice(0,H),!!A)+"</"+S+`>
`,S=S==="ul"?"ol":"ul",P=S==="ul"?L:B,I(j.slice(H))):M+=`

<`+S+N+`>
`+b(j,!!A)+"</"+S+`>
`})(C);else{var O=E(C,S);M=`

<`+S+O+`>
`+b(C,!!A)+"</"+S+`>
`}return M}return c=g.converter._dispatch("lists.before",c,_,g),c+="\xA80",g.gListLevel?c=c.replace(/^(( {0,3}([*+-]|\d+[.])[ \t]+)[^\r]+?(¨0|\n{2,}(?=\S)(?![ \t]*(?:[*+-]|\d+[.])[ \t]+)))/gm,function(C,S,A){var L=A.search(/[*+-]/g)>-1?"ul":"ol";return T(S,L,!0)}):c=c.replace(/(\n\n|^\n?)(( {0,3}([*+-]|\d+[.])[ \t]+)[^\r]+?(¨0|\n{2,}(?=\S)(?![ \t]*(?:[*+-]|\d+[.])[ \t]+)))/gm,function(C,S,A,L){var B=L.search(/[*+-]/g)>-1?"ul":"ol";return T(A,B,!1)}),c=c.replace(/¨0/,""),c=g.converter._dispatch("lists.after",c,_,g),c}),e.subParser("metadata",function(c,_,g){"use strict";if(!_.metadata)return c;c=g.converter._dispatch("metadata.before",c,_,g);function b(E){g.metadata.raw=E,E=E.replace(/&/g,"&amp;").replace(/"/g,"&quot;"),E=E.replace(/\n {4}/g," "),E.replace(/^([\S ]+): +([\s\S]+?)$/gm,function(T,C,S){return g.metadata.parsed[C]=S,""})}return c=c.replace(/^\s*«««+(\S*?)\n([\s\S]+?)\n»»»+\n/,function(E,T,C){return b(C),"\xA8M"}),c=c.replace(/^\s*---+(\S*?)\n([\s\S]+?)\n---+\n/,function(E,T,C){return T&&(g.metadata.format=T),b(C),"\xA8M"}),c=c.replace(/¨M/g,""),c=g.converter._dispatch("metadata.after",c,_,g),c}),e.subParser("outdent",function(c,_,g){"use strict";return c=g.converter._dispatch("outdent.before",c,_,g),c=c.replace(/^(\t|[ ]{1,4})/gm,"\xA80"),c=c.replace(/¨0/g,""),c=g.converter._dispatch("outdent.after",c,_,g),c}),e.subParser("paragraphs",function(c,_,g){"use strict";c=g.converter._dispatch("paragraphs.before",c,_,g),c=c.replace(/^\n+/g,""),c=c.replace(/\n+$/g,"");for(var b=c.split(/\n{2,}/g),E=[],T=b.length,C=0;C<T;C++){var S=b[C];S.search(/¨(K|G)(\d+)\1/g)>=0?E.push(S):S.search(/\S/)>=0&&(S=e.subParser("spanGamut")(S,_,g),S=S.replace(/^([ \t]*)/g,"<p>"),S+="</p>",E.push(S))}for(T=E.length,C=0;C<T;C++){for(var A="",L=E[C],B=!1;/¨(K|G)(\d+)\1/.test(L);){var P=RegExp.$1,M=RegExp.$2;P==="K"?A=g.gHtmlBlocks[M]:B?A=e.subParser("encodeCode")(g.ghCodeBlocks[M].text,_,g):A=g.ghCodeBlocks[M].codeblock,A=A.replace(/\$/g,"$$$$"),L=L.replace(/(\n\n)?¨(K|G)\d+\2(\n\n)?/,A),/^<pre\b[^>]*>\s*<code\b[^>]*>/.test(L)&&(B=!0)}E[C]=L}return c=E.join(`
`),c=c.replace(/^\n+/g,""),c=c.replace(/\n+$/g,""),g.converter._dispatch("paragraphs.after",c,_,g)}),e.subParser("runExtension",function(c,_,g,b){"use strict";if(c.filter)_=c.filter(_,b.converter,g);else if(c.regex){var E=c.regex;E instanceof RegExp||(E=new RegExp(E,"g")),_=_.replace(E,c.replace)}return _}),e.subParser("spanGamut",function(c,_,g){"use strict";return c=g.converter._dispatch("spanGamut.before",c,_,g),c=e.subParser("codeSpans")(c,_,g),c=e.subParser("escapeSpecialCharsWithinTagAttributes")(c,_,g),c=e.subParser("encodeBackslashEscapes")(c,_,g),c=e.subParser("images")(c,_,g),c=e.subParser("anchors")(c,_,g),c=e.subParser("autoLinks")(c,_,g),c=e.subParser("simplifiedAutoLinks")(c,_,g),c=e.subParser("emoji")(c,_,g),c=e.subParser("underline")(c,_,g),c=e.subParser("italicsAndBold")(c,_,g),c=e.subParser("strikethrough")(c,_,g),c=e.subParser("ellipsis")(c,_,g),c=e.subParser("hashHTMLSpans")(c,_,g),c=e.subParser("encodeAmpsAndAngles")(c,_,g),_.simpleLineBreaks?/\n\n¨K/.test(c)||(c=c.replace(/\n+/g,`<br />
`)):c=c.replace(/  +\n/g,`<br />
`),c=g.converter._dispatch("spanGamut.after",c,_,g),c}),e.subParser("strikethrough",function(c,_,g){"use strict";function b(E){return _.simplifiedAutoLink&&(E=e.subParser("simplifiedAutoLinks")(E,_,g)),"<del>"+E+"</del>"}return _.strikethrough&&(c=g.converter._dispatch("strikethrough.before",c,_,g),c=c.replace(/(?:~){2}([\s\S]+?)(?:~){2}/g,function(E,T){return b(T)}),c=g.converter._dispatch("strikethrough.after",c,_,g)),c}),e.subParser("stripLinkDefinitions",function(c,_,g){"use strict";var b=/^ {0,3}\[([^\]]+)]:[ \t]*\n?[ \t]*<?([^>\s]+)>?(?: =([*\d]+[A-Za-z%]{0,4})x([*\d]+[A-Za-z%]{0,4}))?[ \t]*\n?[ \t]*(?:(\n*)["|'(](.+?)["|')][ \t]*)?(?:\n+|(?=¨0))/gm,E=/^ {0,3}\[([^\]]+)]:[ \t]*\n?[ \t]*<?(data:.+?\/.+?;base64,[A-Za-z0-9+/=\n]+?)>?(?: =([*\d]+[A-Za-z%]{0,4})x([*\d]+[A-Za-z%]{0,4}))?[ \t]*\n?[ \t]*(?:(\n*)["|'(](.+?)["|')][ \t]*)?(?:\n\n|(?=¨0)|(?=\n\[))/gm;c+="\xA80";var T=function(C,S,A,L,B,P,M){return S=S.toLowerCase(),c.toLowerCase().split(S).length-1<2?C:(A.match(/^data:.+?\/.+?;base64,/)?g.gUrls[S]=A.replace(/\s/g,""):g.gUrls[S]=e.subParser("encodeAmpsAndAngles")(A,_,g),P?P+M:(M&&(g.gTitles[S]=M.replace(/"|'/g,"&quot;")),_.parseImgDimensions&&L&&B&&(g.gDimensions[S]={width:L,height:B}),""))};return c=c.replace(E,T),c=c.replace(b,T),c=c.replace(/¨0/,""),c}),e.subParser("tables",function(c,_,g){"use strict";if(!_.tables)return c;var b=/^ {0,3}\|?.+\|.+\n {0,3}\|?[ \t]*:?[ \t]*(?:[-=]){2,}[ \t]*:?[ \t]*\|[ \t]*:?[ \t]*(?:[-=]){2,}[\s\S]+?(?:\n\n|¨0)/gm,E=/^ {0,3}\|.+\|[ \t]*\n {0,3}\|[ \t]*:?[ \t]*(?:[-=]){2,}[ \t]*:?[ \t]*\|[ \t]*\n( {0,3}\|.+\|[ \t]*\n)*(?:\n|¨0)/gm;function T(B){return/^:[ \t]*--*$/.test(B)?' style="text-align:left;"':/^--*[ \t]*:[ \t]*$/.test(B)?' style="text-align:right;"':/^:[ \t]*--*[ \t]*:$/.test(B)?' style="text-align:center;"':""}function C(B,P){var M="";return B=B.trim(),(_.tablesHeaderId||_.tableHeaderId)&&(M=' id="'+B.replace(/ /g,"_").toLowerCase()+'"'),B=e.subParser("spanGamut")(B,_,g),"<th"+M+P+">"+B+`</th>
`}function S(B,P){var M=e.subParser("spanGamut")(B,_,g);return"<td"+P+">"+M+`</td>
`}function A(B,P){for(var M=`<table>
<thead>
<tr>
`,O=B.length,I=0;I<O;++I)M+=B[I];for(M+=`</tr>
</thead>
<tbody>
`,I=0;I<P.length;++I){M+=`<tr>
`;for(var j=0;j<O;++j)M+=P[I][j];M+=`</tr>
`}return M+=`</tbody>
</table>
`,M}function L(B){var P,M=B.split(`
`);for(P=0;P<M.length;++P)/^ {0,3}\|/.test(M[P])&&(M[P]=M[P].replace(/^ {0,3}\|/,"")),/\|[ \t]*$/.test(M[P])&&(M[P]=M[P].replace(/\|[ \t]*$/,"")),M[P]=e.subParser("codeSpans")(M[P],_,g);var O=M[0].split("|").map(function(U){return U.trim()}),I=M[1].split("|").map(function(U){return U.trim()}),j=[],H=[],N=[],D=[];for(M.shift(),M.shift(),P=0;P<M.length;++P)M[P].trim()!==""&&j.push(M[P].split("|").map(function(U){return U.trim()}));if(O.length<I.length)return B;for(P=0;P<I.length;++P)N.push(T(I[P]));for(P=0;P<O.length;++P)e.helper.isUndefined(N[P])&&(N[P]=""),H.push(C(O[P],N[P]));for(P=0;P<j.length;++P){for(var K=[],q=0;q<H.length;++q)e.helper.isUndefined(j[P][q]),K.push(S(j[P][q],N[q]));D.push(K)}return A(H,D)}return c=g.converter._dispatch("tables.before",c,_,g),c=c.replace(/\\(\|)/g,e.helper.escapeCharactersCallback),c=c.replace(b,L),c=c.replace(E,L),c=g.converter._dispatch("tables.after",c,_,g),c}),e.subParser("underline",function(c,_,g){"use strict";return _.underline&&(c=g.converter._dispatch("underline.before",c,_,g),_.literalMidWordUnderscores?(c=c.replace(/\b___(\S[\s\S]*?)___\b/g,function(b,E){return"<u>"+E+"</u>"}),c=c.replace(/\b__(\S[\s\S]*?)__\b/g,function(b,E){return"<u>"+E+"</u>"})):(c=c.replace(/___(\S[\s\S]*?)___/g,function(b,E){return/\S$/.test(E)?"<u>"+E+"</u>":b}),c=c.replace(/__(\S[\s\S]*?)__/g,function(b,E){return/\S$/.test(E)?"<u>"+E+"</u>":b})),c=c.replace(/(_)/g,e.helper.escapeCharactersCallback),c=g.converter._dispatch("underline.after",c,_,g)),c}),e.subParser("unescapeSpecialChars",function(c,_,g){"use strict";return c=g.converter._dispatch("unescapeSpecialChars.before",c,_,g),c=c.replace(/¨E(\d+)E/g,function(b,E){var T=parseInt(E);return String.fromCharCode(T)}),c=g.converter._dispatch("unescapeSpecialChars.after",c,_,g),c}),e.subParser("makeMarkdown.blockquote",function(c,_){"use strict";var g="";if(c.hasChildNodes())for(var b=c.childNodes,E=b.length,T=0;T<E;++T){var C=e.subParser("makeMarkdown.node")(b[T],_);C!==""&&(g+=C)}return g=g.trim(),g="> "+g.split(`
`).join(`
> `),g}),e.subParser("makeMarkdown.codeBlock",function(c,_){"use strict";var g=c.getAttribute("language"),b=c.getAttribute("precodenum");return"```"+g+`
`+_.preList[b]+"\n```"}),e.subParser("makeMarkdown.codeSpan",function(c){"use strict";return"`"+c.innerHTML+"`"}),e.subParser("makeMarkdown.emphasis",function(c,_){"use strict";var g="";if(c.hasChildNodes()){g+="*";for(var b=c.childNodes,E=b.length,T=0;T<E;++T)g+=e.subParser("makeMarkdown.node")(b[T],_);g+="*"}return g}),e.subParser("makeMarkdown.header",function(c,_,g){"use strict";var b=new Array(g+1).join("#"),E="";if(c.hasChildNodes()){E=b+" ";for(var T=c.childNodes,C=T.length,S=0;S<C;++S)E+=e.subParser("makeMarkdown.node")(T[S],_)}return E}),e.subParser("makeMarkdown.hr",function(){"use strict";return"---"}),e.subParser("makeMarkdown.image",function(c){"use strict";var _="";return c.hasAttribute("src")&&(_+="!["+c.getAttribute("alt")+"](",_+="<"+c.getAttribute("src")+">",c.hasAttribute("width")&&c.hasAttribute("height")&&(_+=" ="+c.getAttribute("width")+"x"+c.getAttribute("height")),c.hasAttribute("title")&&(_+=' "'+c.getAttribute("title")+'"'),_+=")"),_}),e.subParser("makeMarkdown.links",function(c,_){"use strict";var g="";if(c.hasChildNodes()&&c.hasAttribute("href")){var b=c.childNodes,E=b.length;g="[";for(var T=0;T<E;++T)g+=e.subParser("makeMarkdown.node")(b[T],_);g+="](",g+="<"+c.getAttribute("href")+">",c.hasAttribute("title")&&(g+=' "'+c.getAttribute("title")+'"'),g+=")"}return g}),e.subParser("makeMarkdown.list",function(c,_,g){"use strict";var b="";if(!c.hasChildNodes())return"";for(var E=c.childNodes,T=E.length,C=c.getAttribute("start")||1,S=0;S<T;++S)if(!(typeof E[S].tagName=="undefined"||E[S].tagName.toLowerCase()!=="li")){var A="";g==="ol"?A=C.toString()+". ":A="- ",b+=A+e.subParser("makeMarkdown.listItem")(E[S],_),++C}return b+=`
<!-- -->
`,b.trim()}),e.subParser("makeMarkdown.listItem",function(c,_){"use strict";for(var g="",b=c.childNodes,E=b.length,T=0;T<E;++T)g+=e.subParser("makeMarkdown.node")(b[T],_);return/\n$/.test(g)?g=g.split(`
`).join(`
    `).replace(/^ {4}$/gm,"").replace(/\n\n+/g,`

`):g+=`
`,g}),e.subParser("makeMarkdown.node",function(c,_,g){"use strict";g=g||!1;var b="";if(c.nodeType===3)return e.subParser("makeMarkdown.txt")(c,_);if(c.nodeType===8)return"<!--"+c.data+`-->

`;if(c.nodeType!==1)return"";var E=c.tagName.toLowerCase();switch(E){case"h1":g||(b=e.subParser("makeMarkdown.header")(c,_,1)+`

`);break;case"h2":g||(b=e.subParser("makeMarkdown.header")(c,_,2)+`

`);break;case"h3":g||(b=e.subParser("makeMarkdown.header")(c,_,3)+`

`);break;case"h4":g||(b=e.subParser("makeMarkdown.header")(c,_,4)+`

`);break;case"h5":g||(b=e.subParser("makeMarkdown.header")(c,_,5)+`

`);break;case"h6":g||(b=e.subParser("makeMarkdown.header")(c,_,6)+`

`);break;case"p":g||(b=e.subParser("makeMarkdown.paragraph")(c,_)+`

`);break;case"blockquote":g||(b=e.subParser("makeMarkdown.blockquote")(c,_)+`

`);break;case"hr":g||(b=e.subParser("makeMarkdown.hr")(c,_)+`

`);break;case"ol":g||(b=e.subParser("makeMarkdown.list")(c,_,"ol")+`

`);break;case"ul":g||(b=e.subParser("makeMarkdown.list")(c,_,"ul")+`

`);break;case"precode":g||(b=e.subParser("makeMarkdown.codeBlock")(c,_)+`

`);break;case"pre":g||(b=e.subParser("makeMarkdown.pre")(c,_)+`

`);break;case"table":g||(b=e.subParser("makeMarkdown.table")(c,_)+`

`);break;case"code":b=e.subParser("makeMarkdown.codeSpan")(c,_);break;case"em":case"i":b=e.subParser("makeMarkdown.emphasis")(c,_);break;case"strong":case"b":b=e.subParser("makeMarkdown.strong")(c,_);break;case"del":b=e.subParser("makeMarkdown.strikethrough")(c,_);break;case"a":b=e.subParser("makeMarkdown.links")(c,_);break;case"img":b=e.subParser("makeMarkdown.image")(c,_);break;default:b=c.outerHTML+`

`}return b}),e.subParser("makeMarkdown.paragraph",function(c,_){"use strict";var g="";if(c.hasChildNodes())for(var b=c.childNodes,E=b.length,T=0;T<E;++T)g+=e.subParser("makeMarkdown.node")(b[T],_);return g=g.trim(),g}),e.subParser("makeMarkdown.pre",function(c,_){"use strict";var g=c.getAttribute("prenum");return"<pre>"+_.preList[g]+"</pre>"}),e.subParser("makeMarkdown.strikethrough",function(c,_){"use strict";var g="";if(c.hasChildNodes()){g+="~~";for(var b=c.childNodes,E=b.length,T=0;T<E;++T)g+=e.subParser("makeMarkdown.node")(b[T],_);g+="~~"}return g}),e.subParser("makeMarkdown.strong",function(c,_){"use strict";var g="";if(c.hasChildNodes()){g+="**";for(var b=c.childNodes,E=b.length,T=0;T<E;++T)g+=e.subParser("makeMarkdown.node")(b[T],_);g+="**"}return g}),e.subParser("makeMarkdown.table",function(c,_){"use strict";var g="",b=[[],[]],E=c.querySelectorAll("thead>tr>th"),T=c.querySelectorAll("tbody>tr"),C,S;for(C=0;C<E.length;++C){var A=e.subParser("makeMarkdown.tableCell")(E[C],_),L="---";if(E[C].hasAttribute("style")){var B=E[C].getAttribute("style").toLowerCase().replace(/\s/g,"");switch(B){case"text-align:left;":L=":---";break;case"text-align:right;":L="---:";break;case"text-align:center;":L=":---:";break}}b[0][C]=A.trim(),b[1][C]=L}for(C=0;C<T.length;++C){var P=b.push([])-1,M=T[C].getElementsByTagName("td");for(S=0;S<E.length;++S){var O=" ";typeof M[S]!="undefined"&&(O=e.subParser("makeMarkdown.tableCell")(M[S],_)),b[P].push(O)}}var I=3;for(C=0;C<b.length;++C)for(S=0;S<b[C].length;++S){var j=b[C][S].length;j>I&&(I=j)}for(C=0;C<b.length;++C){for(S=0;S<b[C].length;++S)C===1?b[C][S].slice(-1)===":"?b[C][S]=e.helper.padEnd(b[C][S].slice(-1),I-1,"-")+":":b[C][S]=e.helper.padEnd(b[C][S],I,"-"):b[C][S]=e.helper.padEnd(b[C][S],I);g+="| "+b[C].join(" | ")+` |
`}return g.trim()}),e.subParser("makeMarkdown.tableCell",function(c,_){"use strict";var g="";if(!c.hasChildNodes())return"";for(var b=c.childNodes,E=b.length,T=0;T<E;++T)g+=e.subParser("makeMarkdown.node")(b[T],_,!0);return g.trim()}),e.subParser("makeMarkdown.txt",function(c){"use strict";var _=c.nodeValue;return _=_.replace(/ +/g," "),_=_.replace(/¨NBSP;/g," "),_=e.helper.unescapeHTMLEntities(_),_=_.replace(/([*_~|`])/g,"\\$1"),_=_.replace(/^(\s*)>/g,"\\$1>"),_=_.replace(/^#/gm,"\\#"),_=_.replace(/^(\s*)([-=]{3,})(\s*)$/,"$1\\$2$3"),_=_.replace(/^( {0,3}\d+)\./gm,"$1\\."),_=_.replace(/^( {0,3})([+-])/gm,"$1\\$2"),_=_.replace(/]([\s]*)\(/g,"\\]$1\\("),_=_.replace(/^ {0,3}\[([\S \t]*?)]:/gm,"\\[$1]:"),_});var k=this;typeof define=="function"&&define.amd?define(function(){"use strict";return e}):typeof on!="undefined"&&on.exports?on.exports=e:k.showdown=e}).call(pd)});var Md=we((Do,Fo)=>{(function(r,t){typeof Do=="object"&&typeof Fo!="undefined"?Fo.exports=t():typeof define=="function"&&define.amd?define(t):(r=typeof globalThis!="undefined"?globalThis:r||self,r.Cropper=t())})(Do,function(){"use strict";function r(W,R){var z=Object.keys(W);if(Object.getOwnPropertySymbols){var F=Object.getOwnPropertySymbols(W);R&&(F=F.filter(function(te){return Object.getOwnPropertyDescriptor(W,te).enumerable})),z.push.apply(z,F)}return z}function t(W){for(var R=1;R<arguments.length;R++){var z=arguments[R]!=null?arguments[R]:{};R%2?r(Object(z),!0).forEach(function(F){a(W,F,z[F])}):Object.getOwnPropertyDescriptors?Object.defineProperties(W,Object.getOwnPropertyDescriptors(z)):r(Object(z)).forEach(function(F){Object.defineProperty(W,F,Object.getOwnPropertyDescriptor(z,F))})}return W}function e(W){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?e=function(R){return typeof R}:e=function(R){return R&&typeof Symbol=="function"&&R.constructor===Symbol&&R!==Symbol.prototype?"symbol":typeof R},e(W)}function i(W,R){if(!(W instanceof R))throw new TypeError("Cannot call a class as a function")}function n(W,R){for(var z=0;z<R.length;z++){var F=R[z];F.enumerable=F.enumerable||!1,F.configurable=!0,"value"in F&&(F.writable=!0),Object.defineProperty(W,F.key,F)}}function o(W,R,z){return R&&n(W.prototype,R),z&&n(W,z),W}function a(W,R,z){return R in W?Object.defineProperty(W,R,{value:z,enumerable:!0,configurable:!0,writable:!0}):W[R]=z,W}function s(W){return l(W)||d(W)||u(W)||p()}function l(W){if(Array.isArray(W))return h(W)}function d(W){if(typeof Symbol!="undefined"&&W[Symbol.iterator]!=null||W["@@iterator"]!=null)return Array.from(W)}function u(W,R){if(!!W){if(typeof W=="string")return h(W,R);var z=Object.prototype.toString.call(W).slice(8,-1);if(z==="Object"&&W.constructor&&(z=W.constructor.name),z==="Map"||z==="Set")return Array.from(W);if(z==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(z))return h(W,R)}}function h(W,R){(R==null||R>W.length)&&(R=W.length);for(var z=0,F=new Array(R);z<R;z++)F[z]=W[z];return F}function p(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var m=typeof window!="undefined"&&typeof window.document!="undefined",x=m?window:{},y=m&&x.document.documentElement?"ontouchstart"in x.document.documentElement:!1,v=m?"PointerEvent"in x:!1,w="cropper",k="all",c="crop",_="move",g="zoom",b="e",E="w",T="s",C="n",S="ne",A="nw",L="se",B="sw",P="".concat(w,"-crop"),M="".concat(w,"-disabled"),O="".concat(w,"-hidden"),I="".concat(w,"-hide"),j="".concat(w,"-invisible"),H="".concat(w,"-modal"),N="".concat(w,"-move"),D="".concat(w,"Action"),K="".concat(w,"Preview"),q="crop",U="move",G="none",Q="crop",X="cropend",ie="cropmove",ue="cropstart",fe="dblclick",be=y?"touchstart":"mousedown",Se=y?"touchmove":"mousemove",le=y?"touchend touchcancel":"mouseup",ke=v?"pointerdown":be,Re=v?"pointermove":Se,Me=v?"pointerup pointercancel":le,Ne="ready",et="resize",Ke="wheel",Je="zoom",Ue="image/jpeg",nt=/^e|w|s|n|se|sw|ne|nw|all|crop|move|zoom$/,Ze=/^data:/,de=/^data:image\/jpeg;base64,/,ye=/^img|canvas$/i,Ie=200,Fe=100,it={viewMode:0,dragMode:q,initialAspectRatio:NaN,aspectRatio:NaN,data:null,preview:"",responsive:!0,restore:!0,checkCrossOrigin:!0,checkOrientation:!0,modal:!0,guides:!0,center:!0,highlight:!0,background:!0,autoCrop:!0,autoCropArea:.8,movable:!0,rotatable:!0,scalable:!0,zoomable:!0,zoomOnTouch:!0,zoomOnWheel:!0,wheelZoomRatio:.1,cropBoxMovable:!0,cropBoxResizable:!0,toggleDragModeOnDblclick:!0,minCanvasWidth:0,minCanvasHeight:0,minCropBoxWidth:0,minCropBoxHeight:0,minContainerWidth:Ie,minContainerHeight:Fe,ready:null,cropstart:null,cropmove:null,cropend:null,crop:null,zoom:null},ht='<div class="cropper-container" touch-action="none"><div class="cropper-wrap-box"><div class="cropper-canvas"></div></div><div class="cropper-drag-box"></div><div class="cropper-crop-box"><span class="cropper-view-box"></span><span class="cropper-dashed dashed-h"></span><span class="cropper-dashed dashed-v"></span><span class="cropper-center"></span><span class="cropper-face"></span><span class="cropper-line line-e" data-cropper-action="e"></span><span class="cropper-line line-n" data-cropper-action="n"></span><span class="cropper-line line-w" data-cropper-action="w"></span><span class="cropper-line line-s" data-cropper-action="s"></span><span class="cropper-point point-e" data-cropper-action="e"></span><span class="cropper-point point-n" data-cropper-action="n"></span><span class="cropper-point point-w" data-cropper-action="w"></span><span class="cropper-point point-s" data-cropper-action="s"></span><span class="cropper-point point-ne" data-cropper-action="ne"></span><span class="cropper-point point-nw" data-cropper-action="nw"></span><span class="cropper-point point-sw" data-cropper-action="sw"></span><span class="cropper-point point-se" data-cropper-action="se"></span></div></div>',_t=Number.isNaN||x.isNaN;function Pe(W){return typeof W=="number"&&!_t(W)}var yt=function(R){return R>0&&R<1/0};function Ut(W){return typeof W=="undefined"}function zt(W){return e(W)==="object"&&W!==null}var Ge=Object.prototype.hasOwnProperty;function Xe(W){if(!zt(W))return!1;try{var R=W.constructor,z=R.prototype;return R&&z&&Ge.call(z,"isPrototypeOf")}catch(F){return!1}}function tt(W){return typeof W=="function"}var qe=Array.prototype.slice;function er(W){return Array.from?Array.from(W):qe.call(W)}function dt(W,R){return W&&tt(R)&&(Array.isArray(W)||Pe(W.length)?er(W).forEach(function(z,F){R.call(W,z,F,W)}):zt(W)&&Object.keys(W).forEach(function(z){R.call(W,W[z],z,W)})),W}var je=Object.assign||function(R){for(var z=arguments.length,F=new Array(z>1?z-1:0),te=1;te<z;te++)F[te-1]=arguments[te];return zt(R)&&F.length>0&&F.forEach(function(J){zt(J)&&Object.keys(J).forEach(function(re){R[re]=J[re]})}),R},tr=/\.\d*(?:0|9){12}\d*$/;function rt(W){var R=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1e11;return tr.test(W)?Math.round(W*R)/R:W}var rr=/^width|height|left|top|marginLeft|marginTop$/;function It(W,R){var z=W.style;dt(R,function(F,te){rr.test(te)&&Pe(F)&&(F="".concat(F,"px")),z[te]=F})}function dr(W,R){return W.classList?W.classList.contains(R):W.className.indexOf(R)>-1}function pt(W,R){if(!!R){if(Pe(W.length)){dt(W,function(F){pt(F,R)});return}if(W.classList){W.classList.add(R);return}var z=W.className.trim();z?z.indexOf(R)<0&&(W.className="".concat(z," ").concat(R)):W.className=R}}function Bt(W,R){if(!!R){if(Pe(W.length)){dt(W,function(z){Bt(z,R)});return}if(W.classList){W.classList.remove(R);return}W.className.indexOf(R)>=0&&(W.className=W.className.replace(R,""))}}function Xt(W,R,z){if(!!R){if(Pe(W.length)){dt(W,function(F){Xt(F,R,z)});return}z?pt(W,R):Bt(W,R)}}var xr=/([a-z\d])([A-Z])/g;function Pt(W){return W.replace(xr,"$1-$2").toLowerCase()}function ir(W,R){return zt(W[R])?W[R]:W.dataset?W.dataset[R]:W.getAttribute("data-".concat(Pt(R)))}function Nt(W,R,z){zt(z)?W[R]=z:W.dataset?W.dataset[R]=z:W.setAttribute("data-".concat(Pt(R)),z)}function hr(W,R){if(zt(W[R]))try{delete W[R]}catch(z){W[R]=void 0}else if(W.dataset)try{delete W.dataset[R]}catch(z){W.dataset[R]=void 0}else W.removeAttribute("data-".concat(Pt(R)))}var Kt=/\s\s*/,nr=function(){var W=!1;if(m){var R=!1,z=function(){},F=Object.defineProperty({},"once",{get:function(){return W=!0,R},set:function(J){R=J}});x.addEventListener("test",z,F),x.removeEventListener("test",z,F)}return W}();function Et(W,R,z){var F=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},te=z;R.trim().split(Kt).forEach(function(J){if(!nr){var re=W.listeners;re&&re[J]&&re[J][z]&&(te=re[J][z],delete re[J][z],Object.keys(re[J]).length===0&&delete re[J],Object.keys(re).length===0&&delete W.listeners)}W.removeEventListener(J,te,F)})}function At(W,R,z){var F=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},te=z;R.trim().split(Kt).forEach(function(J){if(F.once&&!nr){var re=W.listeners,se=re===void 0?{}:re;te=function(){delete se[J][z],W.removeEventListener(J,te,F);for(var me=arguments.length,_e=new Array(me),ge=0;ge<me;ge++)_e[ge]=arguments[ge];z.apply(W,_e)},se[J]||(se[J]={}),se[J][z]&&W.removeEventListener(J,se[J][z],F),se[J][z]=te,W.listeners=se}W.addEventListener(J,te,F)})}function wt(W,R,z){var F;return tt(Event)&&tt(CustomEvent)?F=new CustomEvent(R,{detail:z,bubbles:!0,cancelable:!0}):(F=document.createEvent("CustomEvent"),F.initCustomEvent(R,!0,!0,z)),W.dispatchEvent(F)}function Ae(W){var R=W.getBoundingClientRect();return{left:R.left+(window.pageXOffset-document.documentElement.clientLeft),top:R.top+(window.pageYOffset-document.documentElement.clientTop)}}var Ee=x.location,ze=/^(\w+:)\/\/([^:/?#]*):?(\d*)/i;function V(W){var R=W.match(ze);return R!==null&&(R[1]!==Ee.protocol||R[2]!==Ee.hostname||R[3]!==Ee.port)}function ee(W){var R="timestamp=".concat(new Date().getTime());return W+(W.indexOf("?")===-1?"?":"&")+R}function ne(W){var R=W.rotate,z=W.scaleX,F=W.scaleY,te=W.translateX,J=W.translateY,re=[];Pe(te)&&te!==0&&re.push("translateX(".concat(te,"px)")),Pe(J)&&J!==0&&re.push("translateY(".concat(J,"px)")),Pe(R)&&R!==0&&re.push("rotate(".concat(R,"deg)")),Pe(z)&&z!==1&&re.push("scaleX(".concat(z,")")),Pe(F)&&F!==1&&re.push("scaleY(".concat(F,")"));var se=re.length?re.join(" "):"none";return{WebkitTransform:se,msTransform:se,transform:se}}function he(W){var R=t({},W),z=0;return dt(W,function(F,te){delete R[te],dt(R,function(J){var re=Math.abs(F.startX-J.startX),se=Math.abs(F.startY-J.startY),ve=Math.abs(F.endX-J.endX),me=Math.abs(F.endY-J.endY),_e=Math.sqrt(re*re+se*se),ge=Math.sqrt(ve*ve+me*me),xe=(ge-_e)/_e;Math.abs(xe)>Math.abs(z)&&(z=xe)})}),z}function ce(W,R){var z=W.pageX,F=W.pageY,te={endX:z,endY:F};return R?te:t({startX:z,startY:F},te)}function Ce(W){var R=0,z=0,F=0;return dt(W,function(te){var J=te.startX,re=te.startY;R+=J,z+=re,F+=1}),R/=F,z/=F,{pageX:R,pageY:z}}function Te(W){var R=W.aspectRatio,z=W.height,F=W.width,te=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"contain",J=yt(F),re=yt(z);if(J&&re){var se=z*R;te==="contain"&&se>F||te==="cover"&&se<F?z=F/R:F=z*R}else J?z=F/R:re&&(F=z*R);return{width:F,height:z}}function Be(W){var R=W.width,z=W.height,F=W.degree;if(F=Math.abs(F)%180,F===90)return{width:z,height:R};var te=F%90*Math.PI/180,J=Math.sin(te),re=Math.cos(te),se=R*re+z*J,ve=R*J+z*re;return F>90?{width:ve,height:se}:{width:se,height:ve}}function Oe(W,R,z,F){var te=R.aspectRatio,J=R.naturalWidth,re=R.naturalHeight,se=R.rotate,ve=se===void 0?0:se,me=R.scaleX,_e=me===void 0?1:me,ge=R.scaleY,xe=ge===void 0?1:ge,De=z.aspectRatio,Ye=z.naturalWidth,ft=z.naturalHeight,st=F.fillColor,kt=st===void 0?"transparent":st,$t=F.imageSmoothingEnabled,Ct=$t===void 0?!0:$t,or=F.imageSmoothingQuality,jt=or===void 0?"low":or,Le=F.maxWidth,ct=Le===void 0?1/0:Le,Lt=F.maxHeight,Jt=Lt===void 0?1/0:Lt,_r=F.minWidth,Cr=_r===void 0?0:_r,Sr=F.minHeight,br=Sr===void 0?0:Sr,fr=document.createElement("canvas"),qt=fr.getContext("2d"),Tr=Te({aspectRatio:De,width:ct,height:Jt}),Li=Te({aspectRatio:De,width:Cr,height:br},"cover"),Vn=Math.min(Tr.width,Math.max(Li.width,Ye)),Yn=Math.min(Tr.height,Math.max(Li.height,ft)),_a=Te({aspectRatio:te,width:ct,height:Jt}),ga=Te({aspectRatio:te,width:Cr,height:br},"cover"),ma=Math.min(_a.width,Math.max(ga.width,J)),va=Math.min(_a.height,Math.max(ga.height,re)),ip=[-ma/2,-va/2,ma,va];return fr.width=rt(Vn),fr.height=rt(Yn),qt.fillStyle=kt,qt.fillRect(0,0,Vn,Yn),qt.save(),qt.translate(Vn/2,Yn/2),qt.rotate(ve*Math.PI/180),qt.scale(_e,xe),qt.imageSmoothingEnabled=Ct,qt.imageSmoothingQuality=jt,qt.drawImage.apply(qt,[W].concat(s(ip.map(function(np){return Math.floor(rt(np))})))),qt.restore(),fr}var $e=String.fromCharCode;function Ve(W,R,z){var F="";z+=R;for(var te=R;te<z;te+=1)F+=$e(W.getUint8(te));return F}var He=/^data:.*,/;function ot(W){var R=W.replace(He,""),z=atob(R),F=new ArrayBuffer(z.length),te=new Uint8Array(F);return dt(te,function(J,re){te[re]=z.charCodeAt(re)}),F}function vt(W,R){for(var z=[],F=8192,te=new Uint8Array(W);te.length>0;)z.push($e.apply(null,er(te.subarray(0,F)))),te=te.subarray(F);return"data:".concat(R,";base64,").concat(btoa(z.join("")))}function Qe(W){var R=new DataView(W),z;try{var F,te,J;if(R.getUint8(0)===255&&R.getUint8(1)===216)for(var re=R.byteLength,se=2;se+1<re;){if(R.getUint8(se)===255&&R.getUint8(se+1)===225){te=se;break}se+=1}if(te){var ve=te+4,me=te+10;if(Ve(R,ve,4)==="Exif"){var _e=R.getUint16(me);if(F=_e===18761,(F||_e===19789)&&R.getUint16(me+2,F)===42){var ge=R.getUint32(me+4,F);ge>=8&&(J=me+ge)}}}if(J){var xe=R.getUint16(J,F),De,Ye;for(Ye=0;Ye<xe;Ye+=1)if(De=J+Ye*12+2,R.getUint16(De,F)===274){De+=8,z=R.getUint16(De,F),R.setUint16(De,1,F);break}}}catch(ft){z=1}return z}function We(W){var R=0,z=1,F=1;switch(W){case 2:z=-1;break;case 3:R=-180;break;case 4:F=-1;break;case 5:R=90,F=-1;break;case 6:R=90;break;case 7:R=90,z=-1;break;case 8:R=-90;break}return{rotate:R,scaleX:z,scaleY:F}}var Ot={render:function(){this.initContainer(),this.initCanvas(),this.initCropBox(),this.renderCanvas(),this.cropped&&this.renderCropBox()},initContainer:function(){var R=this.element,z=this.options,F=this.container,te=this.cropper,J=Number(z.minContainerWidth),re=Number(z.minContainerHeight);pt(te,O),Bt(R,O);var se={width:Math.max(F.offsetWidth,J>=0?J:Ie),height:Math.max(F.offsetHeight,re>=0?re:Fe)};this.containerData=se,It(te,{width:se.width,height:se.height}),pt(R,O),Bt(te,O)},initCanvas:function(){var R=this.containerData,z=this.imageData,F=this.options.viewMode,te=Math.abs(z.rotate)%180===90,J=te?z.naturalHeight:z.naturalWidth,re=te?z.naturalWidth:z.naturalHeight,se=J/re,ve=R.width,me=R.height;R.height*se>R.width?F===3?ve=R.height*se:me=R.width/se:F===3?me=R.width/se:ve=R.height*se;var _e={aspectRatio:se,naturalWidth:J,naturalHeight:re,width:ve,height:me};this.canvasData=_e,this.limited=F===1||F===2,this.limitCanvas(!0,!0),_e.width=Math.min(Math.max(_e.width,_e.minWidth),_e.maxWidth),_e.height=Math.min(Math.max(_e.height,_e.minHeight),_e.maxHeight),_e.left=(R.width-_e.width)/2,_e.top=(R.height-_e.height)/2,_e.oldLeft=_e.left,_e.oldTop=_e.top,this.initialCanvasData=je({},_e)},limitCanvas:function(R,z){var F=this.options,te=this.containerData,J=this.canvasData,re=this.cropBoxData,se=F.viewMode,ve=J.aspectRatio,me=this.cropped&&re;if(R){var _e=Number(F.minCanvasWidth)||0,ge=Number(F.minCanvasHeight)||0;se>1?(_e=Math.max(_e,te.width),ge=Math.max(ge,te.height),se===3&&(ge*ve>_e?_e=ge*ve:ge=_e/ve)):se>0&&(_e?_e=Math.max(_e,me?re.width:0):ge?ge=Math.max(ge,me?re.height:0):me&&(_e=re.width,ge=re.height,ge*ve>_e?_e=ge*ve:ge=_e/ve));var xe=Te({aspectRatio:ve,width:_e,height:ge});_e=xe.width,ge=xe.height,J.minWidth=_e,J.minHeight=ge,J.maxWidth=1/0,J.maxHeight=1/0}if(z)if(se>(me?0:1)){var De=te.width-J.width,Ye=te.height-J.height;J.minLeft=Math.min(0,De),J.minTop=Math.min(0,Ye),J.maxLeft=Math.max(0,De),J.maxTop=Math.max(0,Ye),me&&this.limited&&(J.minLeft=Math.min(re.left,re.left+(re.width-J.width)),J.minTop=Math.min(re.top,re.top+(re.height-J.height)),J.maxLeft=re.left,J.maxTop=re.top,se===2&&(J.width>=te.width&&(J.minLeft=Math.min(0,De),J.maxLeft=Math.max(0,De)),J.height>=te.height&&(J.minTop=Math.min(0,Ye),J.maxTop=Math.max(0,Ye))))}else J.minLeft=-J.width,J.minTop=-J.height,J.maxLeft=te.width,J.maxTop=te.height},renderCanvas:function(R,z){var F=this.canvasData,te=this.imageData;if(z){var J=Be({width:te.naturalWidth*Math.abs(te.scaleX||1),height:te.naturalHeight*Math.abs(te.scaleY||1),degree:te.rotate||0}),re=J.width,se=J.height,ve=F.width*(re/F.naturalWidth),me=F.height*(se/F.naturalHeight);F.left-=(ve-F.width)/2,F.top-=(me-F.height)/2,F.width=ve,F.height=me,F.aspectRatio=re/se,F.naturalWidth=re,F.naturalHeight=se,this.limitCanvas(!0,!1)}(F.width>F.maxWidth||F.width<F.minWidth)&&(F.left=F.oldLeft),(F.height>F.maxHeight||F.height<F.minHeight)&&(F.top=F.oldTop),F.width=Math.min(Math.max(F.width,F.minWidth),F.maxWidth),F.height=Math.min(Math.max(F.height,F.minHeight),F.maxHeight),this.limitCanvas(!1,!0),F.left=Math.min(Math.max(F.left,F.minLeft),F.maxLeft),F.top=Math.min(Math.max(F.top,F.minTop),F.maxTop),F.oldLeft=F.left,F.oldTop=F.top,It(this.canvas,je({width:F.width,height:F.height},ne({translateX:F.left,translateY:F.top}))),this.renderImage(R),this.cropped&&this.limited&&this.limitCropBox(!0,!0)},renderImage:function(R){var z=this.canvasData,F=this.imageData,te=F.naturalWidth*(z.width/z.naturalWidth),J=F.naturalHeight*(z.height/z.naturalHeight);je(F,{width:te,height:J,left:(z.width-te)/2,top:(z.height-J)/2}),It(this.image,je({width:F.width,height:F.height},ne(je({translateX:F.left,translateY:F.top},F)))),R&&this.output()},initCropBox:function(){var R=this.options,z=this.canvasData,F=R.aspectRatio||R.initialAspectRatio,te=Number(R.autoCropArea)||.8,J={width:z.width,height:z.height};F&&(z.height*F>z.width?J.height=J.width/F:J.width=J.height*F),this.cropBoxData=J,this.limitCropBox(!0,!0),J.width=Math.min(Math.max(J.width,J.minWidth),J.maxWidth),J.height=Math.min(Math.max(J.height,J.minHeight),J.maxHeight),J.width=Math.max(J.minWidth,J.width*te),J.height=Math.max(J.minHeight,J.height*te),J.left=z.left+(z.width-J.width)/2,J.top=z.top+(z.height-J.height)/2,J.oldLeft=J.left,J.oldTop=J.top,this.initialCropBoxData=je({},J)},limitCropBox:function(R,z){var F=this.options,te=this.containerData,J=this.canvasData,re=this.cropBoxData,se=this.limited,ve=F.aspectRatio;if(R){var me=Number(F.minCropBoxWidth)||0,_e=Number(F.minCropBoxHeight)||0,ge=se?Math.min(te.width,J.width,J.width+J.left,te.width-J.left):te.width,xe=se?Math.min(te.height,J.height,J.height+J.top,te.height-J.top):te.height;me=Math.min(me,te.width),_e=Math.min(_e,te.height),ve&&(me&&_e?_e*ve>me?_e=me/ve:me=_e*ve:me?_e=me/ve:_e&&(me=_e*ve),xe*ve>ge?xe=ge/ve:ge=xe*ve),re.minWidth=Math.min(me,ge),re.minHeight=Math.min(_e,xe),re.maxWidth=ge,re.maxHeight=xe}z&&(se?(re.minLeft=Math.max(0,J.left),re.minTop=Math.max(0,J.top),re.maxLeft=Math.min(te.width,J.left+J.width)-re.width,re.maxTop=Math.min(te.height,J.top+J.height)-re.height):(re.minLeft=0,re.minTop=0,re.maxLeft=te.width-re.width,re.maxTop=te.height-re.height))},renderCropBox:function(){var R=this.options,z=this.containerData,F=this.cropBoxData;(F.width>F.maxWidth||F.width<F.minWidth)&&(F.left=F.oldLeft),(F.height>F.maxHeight||F.height<F.minHeight)&&(F.top=F.oldTop),F.width=Math.min(Math.max(F.width,F.minWidth),F.maxWidth),F.height=Math.min(Math.max(F.height,F.minHeight),F.maxHeight),this.limitCropBox(!1,!0),F.left=Math.min(Math.max(F.left,F.minLeft),F.maxLeft),F.top=Math.min(Math.max(F.top,F.minTop),F.maxTop),F.oldLeft=F.left,F.oldTop=F.top,R.movable&&R.cropBoxMovable&&Nt(this.face,D,F.width>=z.width&&F.height>=z.height?_:k),It(this.cropBox,je({width:F.width,height:F.height},ne({translateX:F.left,translateY:F.top}))),this.cropped&&this.limited&&this.limitCanvas(!0,!0),this.disabled||this.output()},output:function(){this.preview(),wt(this.element,Q,this.getData())}},Mt={initPreview:function(){var R=this.element,z=this.crossOrigin,F=this.options.preview,te=z?this.crossOriginUrl:this.url,J=R.alt||"The image to preview",re=document.createElement("img");if(z&&(re.crossOrigin=z),re.src=te,re.alt=J,this.viewBox.appendChild(re),this.viewBoxImage=re,!!F){var se=F;typeof F=="string"?se=R.ownerDocument.querySelectorAll(F):F.querySelector&&(se=[F]),this.previews=se,dt(se,function(ve){var me=document.createElement("img");Nt(ve,K,{width:ve.offsetWidth,height:ve.offsetHeight,html:ve.innerHTML}),z&&(me.crossOrigin=z),me.src=te,me.alt=J,me.style.cssText='display:block;width:100%;height:auto;min-width:0!important;min-height:0!important;max-width:none!important;max-height:none!important;image-orientation:0deg!important;"',ve.innerHTML="",ve.appendChild(me)})}},resetPreview:function(){dt(this.previews,function(R){var z=ir(R,K);It(R,{width:z.width,height:z.height}),R.innerHTML=z.html,hr(R,K)})},preview:function(){var R=this.imageData,z=this.canvasData,F=this.cropBoxData,te=F.width,J=F.height,re=R.width,se=R.height,ve=F.left-z.left-R.left,me=F.top-z.top-R.top;!this.cropped||this.disabled||(It(this.viewBoxImage,je({width:re,height:se},ne(je({translateX:-ve,translateY:-me},R)))),dt(this.previews,function(_e){var ge=ir(_e,K),xe=ge.width,De=ge.height,Ye=xe,ft=De,st=1;te&&(st=xe/te,ft=J*st),J&&ft>De&&(st=De/J,Ye=te*st,ft=De),It(_e,{width:Ye,height:ft}),It(_e.getElementsByTagName("img")[0],je({width:re*st,height:se*st},ne(je({translateX:-ve*st,translateY:-me*st},R))))}))}},xt={bind:function(){var R=this.element,z=this.options,F=this.cropper;tt(z.cropstart)&&At(R,ue,z.cropstart),tt(z.cropmove)&&At(R,ie,z.cropmove),tt(z.cropend)&&At(R,X,z.cropend),tt(z.crop)&&At(R,Q,z.crop),tt(z.zoom)&&At(R,Je,z.zoom),At(F,ke,this.onCropStart=this.cropStart.bind(this)),z.zoomable&&z.zoomOnWheel&&At(F,Ke,this.onWheel=this.wheel.bind(this),{passive:!1,capture:!0}),z.toggleDragModeOnDblclick&&At(F,fe,this.onDblclick=this.dblclick.bind(this)),At(R.ownerDocument,Re,this.onCropMove=this.cropMove.bind(this)),At(R.ownerDocument,Me,this.onCropEnd=this.cropEnd.bind(this)),z.responsive&&At(window,et,this.onResize=this.resize.bind(this))},unbind:function(){var R=this.element,z=this.options,F=this.cropper;tt(z.cropstart)&&Et(R,ue,z.cropstart),tt(z.cropmove)&&Et(R,ie,z.cropmove),tt(z.cropend)&&Et(R,X,z.cropend),tt(z.crop)&&Et(R,Q,z.crop),tt(z.zoom)&&Et(R,Je,z.zoom),Et(F,ke,this.onCropStart),z.zoomable&&z.zoomOnWheel&&Et(F,Ke,this.onWheel,{passive:!1,capture:!0}),z.toggleDragModeOnDblclick&&Et(F,fe,this.onDblclick),Et(R.ownerDocument,Re,this.onCropMove),Et(R.ownerDocument,Me,this.onCropEnd),z.responsive&&Et(window,et,this.onResize)}},St={resize:function(){if(!this.disabled){var R=this.options,z=this.container,F=this.containerData,te=z.offsetWidth/F.width,J=z.offsetHeight/F.height,re=Math.abs(te-1)>Math.abs(J-1)?te:J;if(re!==1){var se,ve;R.restore&&(se=this.getCanvasData(),ve=this.getCropBoxData()),this.render(),R.restore&&(this.setCanvasData(dt(se,function(me,_e){se[_e]=me*re})),this.setCropBoxData(dt(ve,function(me,_e){ve[_e]=me*re})))}}},dblclick:function(){this.disabled||this.options.dragMode===G||this.setDragMode(dr(this.dragBox,P)?U:q)},wheel:function(R){var z=this,F=Number(this.options.wheelZoomRatio)||.1,te=1;this.disabled||(R.preventDefault(),!this.wheeling&&(this.wheeling=!0,setTimeout(function(){z.wheeling=!1},50),R.deltaY?te=R.deltaY>0?1:-1:R.wheelDelta?te=-R.wheelDelta/120:R.detail&&(te=R.detail>0?1:-1),this.zoom(-te*F,R)))},cropStart:function(R){var z=R.buttons,F=R.button;if(!(this.disabled||(R.type==="mousedown"||R.type==="pointerdown"&&R.pointerType==="mouse")&&(Pe(z)&&z!==1||Pe(F)&&F!==0||R.ctrlKey))){var te=this.options,J=this.pointers,re;R.changedTouches?dt(R.changedTouches,function(se){J[se.identifier]=ce(se)}):J[R.pointerId||0]=ce(R),Object.keys(J).length>1&&te.zoomable&&te.zoomOnTouch?re=g:re=ir(R.target,D),!!nt.test(re)&&wt(this.element,ue,{originalEvent:R,action:re})!==!1&&(R.preventDefault(),this.action=re,this.cropping=!1,re===c&&(this.cropping=!0,pt(this.dragBox,H)))}},cropMove:function(R){var z=this.action;if(!(this.disabled||!z)){var F=this.pointers;R.preventDefault(),wt(this.element,ie,{originalEvent:R,action:z})!==!1&&(R.changedTouches?dt(R.changedTouches,function(te){je(F[te.identifier]||{},ce(te,!0))}):je(F[R.pointerId||0]||{},ce(R,!0)),this.change(R))}},cropEnd:function(R){if(!this.disabled){var z=this.action,F=this.pointers;R.changedTouches?dt(R.changedTouches,function(te){delete F[te.identifier]}):delete F[R.pointerId||0],z&&(R.preventDefault(),Object.keys(F).length||(this.action=""),this.cropping&&(this.cropping=!1,Xt(this.dragBox,H,this.cropped&&this.options.modal)),wt(this.element,X,{originalEvent:R,action:z}))}}},Y={change:function(R){var z=this.options,F=this.canvasData,te=this.containerData,J=this.cropBoxData,re=this.pointers,se=this.action,ve=z.aspectRatio,me=J.left,_e=J.top,ge=J.width,xe=J.height,De=me+ge,Ye=_e+xe,ft=0,st=0,kt=te.width,$t=te.height,Ct=!0,or;!ve&&R.shiftKey&&(ve=ge&&xe?ge/xe:1),this.limited&&(ft=J.minLeft,st=J.minTop,kt=ft+Math.min(te.width,F.width,F.left+F.width),$t=st+Math.min(te.height,F.height,F.top+F.height));var jt=re[Object.keys(re)[0]],Le={x:jt.endX-jt.startX,y:jt.endY-jt.startY},ct=function(Jt){switch(Jt){case b:De+Le.x>kt&&(Le.x=kt-De);break;case E:me+Le.x<ft&&(Le.x=ft-me);break;case C:_e+Le.y<st&&(Le.y=st-_e);break;case T:Ye+Le.y>$t&&(Le.y=$t-Ye);break}};switch(se){case k:me+=Le.x,_e+=Le.y;break;case b:if(Le.x>=0&&(De>=kt||ve&&(_e<=st||Ye>=$t))){Ct=!1;break}ct(b),ge+=Le.x,ge<0&&(se=E,ge=-ge,me-=ge),ve&&(xe=ge/ve,_e+=(J.height-xe)/2);break;case C:if(Le.y<=0&&(_e<=st||ve&&(me<=ft||De>=kt))){Ct=!1;break}ct(C),xe-=Le.y,_e+=Le.y,xe<0&&(se=T,xe=-xe,_e-=xe),ve&&(ge=xe*ve,me+=(J.width-ge)/2);break;case E:if(Le.x<=0&&(me<=ft||ve&&(_e<=st||Ye>=$t))){Ct=!1;break}ct(E),ge-=Le.x,me+=Le.x,ge<0&&(se=b,ge=-ge,me-=ge),ve&&(xe=ge/ve,_e+=(J.height-xe)/2);break;case T:if(Le.y>=0&&(Ye>=$t||ve&&(me<=ft||De>=kt))){Ct=!1;break}ct(T),xe+=Le.y,xe<0&&(se=C,xe=-xe,_e-=xe),ve&&(ge=xe*ve,me+=(J.width-ge)/2);break;case S:if(ve){if(Le.y<=0&&(_e<=st||De>=kt)){Ct=!1;break}ct(C),xe-=Le.y,_e+=Le.y,ge=xe*ve}else ct(C),ct(b),Le.x>=0?De<kt?ge+=Le.x:Le.y<=0&&_e<=st&&(Ct=!1):ge+=Le.x,Le.y<=0?_e>st&&(xe-=Le.y,_e+=Le.y):(xe-=Le.y,_e+=Le.y);ge<0&&xe<0?(se=B,xe=-xe,ge=-ge,_e-=xe,me-=ge):ge<0?(se=A,ge=-ge,me-=ge):xe<0&&(se=L,xe=-xe,_e-=xe);break;case A:if(ve){if(Le.y<=0&&(_e<=st||me<=ft)){Ct=!1;break}ct(C),xe-=Le.y,_e+=Le.y,ge=xe*ve,me+=J.width-ge}else ct(C),ct(E),Le.x<=0?me>ft?(ge-=Le.x,me+=Le.x):Le.y<=0&&_e<=st&&(Ct=!1):(ge-=Le.x,me+=Le.x),Le.y<=0?_e>st&&(xe-=Le.y,_e+=Le.y):(xe-=Le.y,_e+=Le.y);ge<0&&xe<0?(se=L,xe=-xe,ge=-ge,_e-=xe,me-=ge):ge<0?(se=S,ge=-ge,me-=ge):xe<0&&(se=B,xe=-xe,_e-=xe);break;case B:if(ve){if(Le.x<=0&&(me<=ft||Ye>=$t)){Ct=!1;break}ct(E),ge-=Le.x,me+=Le.x,xe=ge/ve}else ct(T),ct(E),Le.x<=0?me>ft?(ge-=Le.x,me+=Le.x):Le.y>=0&&Ye>=$t&&(Ct=!1):(ge-=Le.x,me+=Le.x),Le.y>=0?Ye<$t&&(xe+=Le.y):xe+=Le.y;ge<0&&xe<0?(se=S,xe=-xe,ge=-ge,_e-=xe,me-=ge):ge<0?(se=L,ge=-ge,me-=ge):xe<0&&(se=A,xe=-xe,_e-=xe);break;case L:if(ve){if(Le.x>=0&&(De>=kt||Ye>=$t)){Ct=!1;break}ct(b),ge+=Le.x,xe=ge/ve}else ct(T),ct(b),Le.x>=0?De<kt?ge+=Le.x:Le.y>=0&&Ye>=$t&&(Ct=!1):ge+=Le.x,Le.y>=0?Ye<$t&&(xe+=Le.y):xe+=Le.y;ge<0&&xe<0?(se=A,xe=-xe,ge=-ge,_e-=xe,me-=ge):ge<0?(se=B,ge=-ge,me-=ge):xe<0&&(se=S,xe=-xe,_e-=xe);break;case _:this.move(Le.x,Le.y),Ct=!1;break;case g:this.zoom(he(re),R),Ct=!1;break;case c:if(!Le.x||!Le.y){Ct=!1;break}or=Ae(this.cropper),me=jt.startX-or.left,_e=jt.startY-or.top,ge=J.minWidth,xe=J.minHeight,Le.x>0?se=Le.y>0?L:S:Le.x<0&&(me-=ge,se=Le.y>0?B:A),Le.y<0&&(_e-=xe),this.cropped||(Bt(this.cropBox,O),this.cropped=!0,this.limited&&this.limitCropBox(!0,!0));break}Ct&&(J.width=ge,J.height=xe,J.left=me,J.top=_e,this.action=se,this.renderCropBox()),dt(re,function(Lt){Lt.startX=Lt.endX,Lt.startY=Lt.endY})}},oe={crop:function(){return this.ready&&!this.cropped&&!this.disabled&&(this.cropped=!0,this.limitCropBox(!0,!0),this.options.modal&&pt(this.dragBox,H),Bt(this.cropBox,O),this.setCropBoxData(this.initialCropBoxData)),this},reset:function(){return this.ready&&!this.disabled&&(this.imageData=je({},this.initialImageData),this.canvasData=je({},this.initialCanvasData),this.cropBoxData=je({},this.initialCropBoxData),this.renderCanvas(),this.cropped&&this.renderCropBox()),this},clear:function(){return this.cropped&&!this.disabled&&(je(this.cropBoxData,{left:0,top:0,width:0,height:0}),this.cropped=!1,this.renderCropBox(),this.limitCanvas(!0,!0),this.renderCanvas(),Bt(this.dragBox,H),pt(this.cropBox,O)),this},replace:function(R){var z=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;return!this.disabled&&R&&(this.isImg&&(this.element.src=R),z?(this.url=R,this.image.src=R,this.ready&&(this.viewBoxImage.src=R,dt(this.previews,function(F){F.getElementsByTagName("img")[0].src=R}))):(this.isImg&&(this.replaced=!0),this.options.data=null,this.uncreate(),this.load(R))),this},enable:function(){return this.ready&&this.disabled&&(this.disabled=!1,Bt(this.cropper,M)),this},disable:function(){return this.ready&&!this.disabled&&(this.disabled=!0,pt(this.cropper,M)),this},destroy:function(){var R=this.element;return R[w]?(R[w]=void 0,this.isImg&&this.replaced&&(R.src=this.originalUrl),this.uncreate(),this):this},move:function(R){var z=arguments.length>1&&arguments[1]!==void 0?arguments[1]:R,F=this.canvasData,te=F.left,J=F.top;return this.moveTo(Ut(R)?R:te+Number(R),Ut(z)?z:J+Number(z))},moveTo:function(R){var z=arguments.length>1&&arguments[1]!==void 0?arguments[1]:R,F=this.canvasData,te=!1;return R=Number(R),z=Number(z),this.ready&&!this.disabled&&this.options.movable&&(Pe(R)&&(F.left=R,te=!0),Pe(z)&&(F.top=z,te=!0),te&&this.renderCanvas(!0)),this},zoom:function(R,z){var F=this.canvasData;return R=Number(R),R<0?R=1/(1-R):R=1+R,this.zoomTo(F.width*R/F.naturalWidth,null,z)},zoomTo:function(R,z,F){var te=this.options,J=this.canvasData,re=J.width,se=J.height,ve=J.naturalWidth,me=J.naturalHeight;if(R=Number(R),R>=0&&this.ready&&!this.disabled&&te.zoomable){var _e=ve*R,ge=me*R;if(wt(this.element,Je,{ratio:R,oldRatio:re/ve,originalEvent:F})===!1)return this;if(F){var xe=this.pointers,De=Ae(this.cropper),Ye=xe&&Object.keys(xe).length?Ce(xe):{pageX:F.pageX,pageY:F.pageY};J.left-=(_e-re)*((Ye.pageX-De.left-J.left)/re),J.top-=(ge-se)*((Ye.pageY-De.top-J.top)/se)}else Xe(z)&&Pe(z.x)&&Pe(z.y)?(J.left-=(_e-re)*((z.x-J.left)/re),J.top-=(ge-se)*((z.y-J.top)/se)):(J.left-=(_e-re)/2,J.top-=(ge-se)/2);J.width=_e,J.height=ge,this.renderCanvas(!0)}return this},rotate:function(R){return this.rotateTo((this.imageData.rotate||0)+Number(R))},rotateTo:function(R){return R=Number(R),Pe(R)&&this.ready&&!this.disabled&&this.options.rotatable&&(this.imageData.rotate=R%360,this.renderCanvas(!0,!0)),this},scaleX:function(R){var z=this.imageData.scaleY;return this.scale(R,Pe(z)?z:1)},scaleY:function(R){var z=this.imageData.scaleX;return this.scale(Pe(z)?z:1,R)},scale:function(R){var z=arguments.length>1&&arguments[1]!==void 0?arguments[1]:R,F=this.imageData,te=!1;return R=Number(R),z=Number(z),this.ready&&!this.disabled&&this.options.scalable&&(Pe(R)&&(F.scaleX=R,te=!0),Pe(z)&&(F.scaleY=z,te=!0),te&&this.renderCanvas(!0,!0)),this},getData:function(){var R=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,z=this.options,F=this.imageData,te=this.canvasData,J=this.cropBoxData,re;if(this.ready&&this.cropped){re={x:J.left-te.left,y:J.top-te.top,width:J.width,height:J.height};var se=F.width/F.naturalWidth;if(dt(re,function(_e,ge){re[ge]=_e/se}),R){var ve=Math.round(re.y+re.height),me=Math.round(re.x+re.width);re.x=Math.round(re.x),re.y=Math.round(re.y),re.width=me-re.x,re.height=ve-re.y}}else re={x:0,y:0,width:0,height:0};return z.rotatable&&(re.rotate=F.rotate||0),z.scalable&&(re.scaleX=F.scaleX||1,re.scaleY=F.scaleY||1),re},setData:function(R){var z=this.options,F=this.imageData,te=this.canvasData,J={};if(this.ready&&!this.disabled&&Xe(R)){var re=!1;z.rotatable&&Pe(R.rotate)&&R.rotate!==F.rotate&&(F.rotate=R.rotate,re=!0),z.scalable&&(Pe(R.scaleX)&&R.scaleX!==F.scaleX&&(F.scaleX=R.scaleX,re=!0),Pe(R.scaleY)&&R.scaleY!==F.scaleY&&(F.scaleY=R.scaleY,re=!0)),re&&this.renderCanvas(!0,!0);var se=F.width/F.naturalWidth;Pe(R.x)&&(J.left=R.x*se+te.left),Pe(R.y)&&(J.top=R.y*se+te.top),Pe(R.width)&&(J.width=R.width*se),Pe(R.height)&&(J.height=R.height*se),this.setCropBoxData(J)}return this},getContainerData:function(){return this.ready?je({},this.containerData):{}},getImageData:function(){return this.sized?je({},this.imageData):{}},getCanvasData:function(){var R=this.canvasData,z={};return this.ready&&dt(["left","top","width","height","naturalWidth","naturalHeight"],function(F){z[F]=R[F]}),z},setCanvasData:function(R){var z=this.canvasData,F=z.aspectRatio;return this.ready&&!this.disabled&&Xe(R)&&(Pe(R.left)&&(z.left=R.left),Pe(R.top)&&(z.top=R.top),Pe(R.width)?(z.width=R.width,z.height=R.width/F):Pe(R.height)&&(z.height=R.height,z.width=R.height*F),this.renderCanvas(!0)),this},getCropBoxData:function(){var R=this.cropBoxData,z;return this.ready&&this.cropped&&(z={left:R.left,top:R.top,width:R.width,height:R.height}),z||{}},setCropBoxData:function(R){var z=this.cropBoxData,F=this.options.aspectRatio,te,J;return this.ready&&this.cropped&&!this.disabled&&Xe(R)&&(Pe(R.left)&&(z.left=R.left),Pe(R.top)&&(z.top=R.top),Pe(R.width)&&R.width!==z.width&&(te=!0,z.width=R.width),Pe(R.height)&&R.height!==z.height&&(J=!0,z.height=R.height),F&&(te?z.height=z.width/F:J&&(z.width=z.height*F)),this.renderCropBox()),this},getCroppedCanvas:function(){var R=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(!this.ready||!window.HTMLCanvasElement)return null;var z=this.canvasData,F=Oe(this.image,this.imageData,z,R);if(!this.cropped)return F;var te=this.getData(),J=te.x,re=te.y,se=te.width,ve=te.height,me=F.width/Math.floor(z.naturalWidth);me!==1&&(J*=me,re*=me,se*=me,ve*=me);var _e=se/ve,ge=Te({aspectRatio:_e,width:R.maxWidth||1/0,height:R.maxHeight||1/0}),xe=Te({aspectRatio:_e,width:R.minWidth||0,height:R.minHeight||0},"cover"),De=Te({aspectRatio:_e,width:R.width||(me!==1?F.width:se),height:R.height||(me!==1?F.height:ve)}),Ye=De.width,ft=De.height;Ye=Math.min(ge.width,Math.max(xe.width,Ye)),ft=Math.min(ge.height,Math.max(xe.height,ft));var st=document.createElement("canvas"),kt=st.getContext("2d");st.width=rt(Ye),st.height=rt(ft),kt.fillStyle=R.fillColor||"transparent",kt.fillRect(0,0,Ye,ft);var $t=R.imageSmoothingEnabled,Ct=$t===void 0?!0:$t,or=R.imageSmoothingQuality;kt.imageSmoothingEnabled=Ct,or&&(kt.imageSmoothingQuality=or);var jt=F.width,Le=F.height,ct=J,Lt=re,Jt,_r,Cr,Sr,br,fr;ct<=-se||ct>jt?(ct=0,Jt=0,Cr=0,br=0):ct<=0?(Cr=-ct,ct=0,Jt=Math.min(jt,se+ct),br=Jt):ct<=jt&&(Cr=0,Jt=Math.min(se,jt-ct),br=Jt),Jt<=0||Lt<=-ve||Lt>Le?(Lt=0,_r=0,Sr=0,fr=0):Lt<=0?(Sr=-Lt,Lt=0,_r=Math.min(Le,ve+Lt),fr=_r):Lt<=Le&&(Sr=0,_r=Math.min(ve,Le-Lt),fr=_r);var qt=[ct,Lt,Jt,_r];if(br>0&&fr>0){var Tr=Ye/se;qt.push(Cr*Tr,Sr*Tr,br*Tr,fr*Tr)}return kt.drawImage.apply(kt,[F].concat(s(qt.map(function(Li){return Math.floor(rt(Li))})))),st},setAspectRatio:function(R){var z=this.options;return!this.disabled&&!Ut(R)&&(z.aspectRatio=Math.max(0,R)||NaN,this.ready&&(this.initCropBox(),this.cropped&&this.renderCropBox())),this},setDragMode:function(R){var z=this.options,F=this.dragBox,te=this.face;if(this.ready&&!this.disabled){var J=R===q,re=z.movable&&R===U;R=J||re?R:G,z.dragMode=R,Nt(F,D,R),Xt(F,P,J),Xt(F,N,re),z.cropBoxMovable||(Nt(te,D,R),Xt(te,P,J),Xt(te,N,re))}return this}},Z=x.Cropper,ae=function(){function W(R){var z=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(i(this,W),!R||!ye.test(R.tagName))throw new Error("The first argument is required and must be an <img> or <canvas> element.");this.element=R,this.options=je({},it,Xe(z)&&z),this.cropped=!1,this.disabled=!1,this.pointers={},this.ready=!1,this.reloading=!1,this.replaced=!1,this.sized=!1,this.sizing=!1,this.init()}return o(W,[{key:"init",value:function(){var z=this.element,F=z.tagName.toLowerCase(),te;if(!z[w]){if(z[w]=this,F==="img"){if(this.isImg=!0,te=z.getAttribute("src")||"",this.originalUrl=te,!te)return;te=z.src}else F==="canvas"&&window.HTMLCanvasElement&&(te=z.toDataURL());this.load(te)}}},{key:"load",value:function(z){var F=this;if(!!z){this.url=z,this.imageData={};var te=this.element,J=this.options;if(!J.rotatable&&!J.scalable&&(J.checkOrientation=!1),!J.checkOrientation||!window.ArrayBuffer){this.clone();return}if(Ze.test(z)){de.test(z)?this.read(ot(z)):this.clone();return}var re=new XMLHttpRequest,se=this.clone.bind(this);this.reloading=!0,this.xhr=re,re.onabort=se,re.onerror=se,re.ontimeout=se,re.onprogress=function(){re.getResponseHeader("content-type")!==Ue&&re.abort()},re.onload=function(){F.read(re.response)},re.onloadend=function(){F.reloading=!1,F.xhr=null},J.checkCrossOrigin&&V(z)&&te.crossOrigin&&(z=ee(z)),re.open("GET",z,!0),re.responseType="arraybuffer",re.withCredentials=te.crossOrigin==="use-credentials",re.send()}}},{key:"read",value:function(z){var F=this.options,te=this.imageData,J=Qe(z),re=0,se=1,ve=1;if(J>1){this.url=vt(z,Ue);var me=We(J);re=me.rotate,se=me.scaleX,ve=me.scaleY}F.rotatable&&(te.rotate=re),F.scalable&&(te.scaleX=se,te.scaleY=ve),this.clone()}},{key:"clone",value:function(){var z=this.element,F=this.url,te=z.crossOrigin,J=F;this.options.checkCrossOrigin&&V(F)&&(te||(te="anonymous"),J=ee(F)),this.crossOrigin=te,this.crossOriginUrl=J;var re=document.createElement("img");te&&(re.crossOrigin=te),re.src=J||F,re.alt=z.alt||"The image to crop",this.image=re,re.onload=this.start.bind(this),re.onerror=this.stop.bind(this),pt(re,I),z.parentNode.insertBefore(re,z.nextSibling)}},{key:"start",value:function(){var z=this,F=this.image;F.onload=null,F.onerror=null,this.sizing=!0;var te=x.navigator&&/(?:iPad|iPhone|iPod).*?AppleWebKit/i.test(x.navigator.userAgent),J=function(me,_e){je(z.imageData,{naturalWidth:me,naturalHeight:_e,aspectRatio:me/_e}),z.initialImageData=je({},z.imageData),z.sizing=!1,z.sized=!0,z.build()};if(F.naturalWidth&&!te){J(F.naturalWidth,F.naturalHeight);return}var re=document.createElement("img"),se=document.body||document.documentElement;this.sizingImage=re,re.onload=function(){J(re.width,re.height),te||se.removeChild(re)},re.src=F.src,te||(re.style.cssText="left:0;max-height:none!important;max-width:none!important;min-height:0!important;min-width:0!important;opacity:0;position:absolute;top:0;z-index:-1;",se.appendChild(re))}},{key:"stop",value:function(){var z=this.image;z.onload=null,z.onerror=null,z.parentNode.removeChild(z),this.image=null}},{key:"build",value:function(){if(!(!this.sized||this.ready)){var z=this.element,F=this.options,te=this.image,J=z.parentNode,re=document.createElement("div");re.innerHTML=ht;var se=re.querySelector(".".concat(w,"-container")),ve=se.querySelector(".".concat(w,"-canvas")),me=se.querySelector(".".concat(w,"-drag-box")),_e=se.querySelector(".".concat(w,"-crop-box")),ge=_e.querySelector(".".concat(w,"-face"));this.container=J,this.cropper=se,this.canvas=ve,this.dragBox=me,this.cropBox=_e,this.viewBox=se.querySelector(".".concat(w,"-view-box")),this.face=ge,ve.appendChild(te),pt(z,O),J.insertBefore(se,z.nextSibling),this.isImg||Bt(te,I),this.initPreview(),this.bind(),F.initialAspectRatio=Math.max(0,F.initialAspectRatio)||NaN,F.aspectRatio=Math.max(0,F.aspectRatio)||NaN,F.viewMode=Math.max(0,Math.min(3,Math.round(F.viewMode)))||0,pt(_e,O),F.guides||pt(_e.getElementsByClassName("".concat(w,"-dashed")),O),F.center||pt(_e.getElementsByClassName("".concat(w,"-center")),O),F.background&&pt(se,"".concat(w,"-bg")),F.highlight||pt(ge,j),F.cropBoxMovable&&(pt(ge,N),Nt(ge,D,k)),F.cropBoxResizable||(pt(_e.getElementsByClassName("".concat(w,"-line")),O),pt(_e.getElementsByClassName("".concat(w,"-point")),O)),this.render(),this.ready=!0,this.setDragMode(F.dragMode),F.autoCrop&&this.crop(),this.setData(F.data),tt(F.ready)&&At(z,Ne,F.ready,{once:!0}),wt(z,Ne)}}},{key:"unbuild",value:function(){!this.ready||(this.ready=!1,this.unbind(),this.resetPreview(),this.cropper.parentNode.removeChild(this.cropper),Bt(this.element,O))}},{key:"uncreate",value:function(){this.ready?(this.unbuild(),this.ready=!1,this.cropped=!1):this.sizing?(this.sizingImage.onload=null,this.sizing=!1,this.sized=!1):this.reloading?(this.xhr.onabort=null,this.xhr.abort()):this.image&&this.stop()}}],[{key:"noConflict",value:function(){return window.Cropper=Z,W}},{key:"setDefaults",value:function(z){je(it,Xe(z)&&z)}}]),W}();return je(ae.prototype,Ot,Mt,xt,St,Y,oe),ae})});var Pd=we((exports,module)=>{frappe.provide("frappe.search");frappe.provide("frappe.tags");frappe.search.AwesomeBar=class{setup(r){var t=this;$(".search-bar").removeClass("hidden");var e=$(r),i=e.get(0);this.options=[],this.global_results=[];var n=new Awesomplete(i,{minChars:0,maxItems:99,autoFirst:!0,list:[],filter:function(a,s){return!0},data:function(a,s){return{label:a.index||"",value:a.value}},item:function(a,s){var l=this.get_item(a.value),d=__(l.label||l.value),u="<span>"+d+"</span>";return l.description&&l.value!==l.description&&(u+='<br><span class="text-muted ellipsis">'+__(l.description)+"</span>"),$("<li></li>").data("item.autocomplete",l).html(`<a style="font-weight:normal">${u}</a>`).get(0)},sort:function(a,s){return s.label-a.label}});i.awesomplete=n,this.awesomplete=n,e.on("input",frappe.utils.debounce(function(a){var s=a.target.value,l=s.trim().replace(/\s\s+/g," "),d=l.lastIndexOf(" ");t.global_results=[],t.options=[],l&&l.length>1?(d!==-1&&t.set_specifics(l.slice(0,d),l.slice(d+1)),t.add_defaults(l),t.options=t.options.concat(t.build_options(l)),t.options=t.options.concat(t.global_results)):(t.options=t.options.concat(t.deduplicate(frappe.search.utils.get_recent_pages(l||""))),t.options=t.options.concat(frappe.search.utils.get_frequent_links())),t.add_help(),n.list=t.deduplicate(t.options)},100));var o=function(){this.autocomplete_open||$(this).trigger("input")};e.on("focus",o),e.on("awesomplete-open",function(a){t.autocomplete_open=a.target}),e.on("awesomplete-close",function(a){t.autocomplete_open=!1}),e.on("awesomplete-select",function(a){var s=a.originalEvent,l=s.text.value,d=n.get_item(l);if(d.route_options&&(frappe.route_options=d.route_options),d.onclick)d.onclick(d.match);else{let u=s.originalEvent;(u.ctrlKey||u.metaKey)&&(frappe.open_in_new_tab=!0),frappe.set_route(d.route)}e.val(""),e.trigger("blur")}),e.on("awesomplete-selectcomplete",function(a){e.val("")}),e.on("keydown",a=>{a.key=="Escape"&&e.trigger("blur")}),frappe.search.utils.setup_recent(),frappe.tags.utils.fetch_tags()}add_help(){this.options.push({value:__("Help on Search"),index:-10,default:"Help",onclick:function(){var r='<table class="table table-bordered">					<tr><td style="width: 50%">'+__("Create a new record")+"</td><td>"+__("new type of document")+"</td></tr>					<tr><td>"+__("List a document type")+"</td><td>"+__("document type..., e.g. customer")+"</td></tr>					<tr><td>"+__("Search in a document type")+"</td><td>"+__("text in document type")+"</td></tr>					<tr><td>"+__("Tags")+"</td><td>"+__("tag name..., e.g. #tag")+"</td></tr>					<tr><td>"+__("Open a module or tool")+"</td><td>"+__("module name...")+"</td></tr>					<tr><td>"+__("Calculate")+"</td><td>"+__("e.g. (55 + 434) / 4 or =Math.sin(Math.PI/2)...")+"</td></tr>				</table>";frappe.msgprint(r,__("Search Help"))}})}set_specifics(r,t){var e=this,i=this.build_options(r);i.forEach(function(n){n.type&&n.type.toLowerCase().indexOf(t.toLowerCase())===0&&e.options.push(n)})}add_defaults(r){this.make_global_search(r),this.make_search_in_current(r),this.make_calculator(r),this.make_random(r)}build_options(r){var t=frappe.search.utils.get_creatables(r).concat(frappe.search.utils.get_search_in_list(r),frappe.search.utils.get_doctypes(r),frappe.search.utils.get_reports(r),frappe.search.utils.get_pages(r),frappe.search.utils.get_workspaces(r),frappe.search.utils.get_dashboards(r),frappe.search.utils.get_recent_pages(r||""),frappe.search.utils.get_executables(r));r.charAt(0)==="#"&&(t=frappe.tags.utils.get_tags(r));var e=this.deduplicate(t);return e.sort(function(i,n){return n.index-i.index})}deduplicate(r){var t=[],e=[];return r.forEach(function(i){if(i.route){i.route[0]==="List"&&i.route[2]!=="Report"&&i.route[2]!=="Inbox"&&i.route.splice(2);var n=typeof i.route=="string"?i.route:i.route.join("/");if(e.indexOf(n)===-1)t.push(i),e.push(n);else{var o=e.indexOf(n);t[o].index<i.index&&!i.recent&&(t[o]=i)}}else t.push(i),e.push("")}),t}set_global_results(r,t){this.global_results=this.global_results.concat(r)}make_global_search(r){r.charAt(0)!=="#"&&this.options.push({label:`
				<span class="flex justify-between text-medium">
					<span class="ellipsis">${__("Search for {0}",[frappe.utils.xss_sanitise(r).bold()])}</span>
					<kbd>\u21B5</kbd>
				</span>
			`,value:__("Search for {0}",[r]),match:r,index:100,default:"Search",onclick:function(){frappe.searchdialog.search.init_search(r,"global_search")}})}make_search_in_current(r){var t=frappe.get_route();if(t[0]==="List"&&r.indexOf(" in")===-1){var e=frappe.get_meta(frappe.container.page.list_view.doctype),i=e.title_field||"name",n={};n[i]=["like","%"+r+"%"],this.options.push({label:__("Find {0} in {1}",[r.bold(),__(t[1]).bold()]),value:__("Find {0} in {1}",[r,__(t[1])]),route_options:n,onclick:function(){cur_list.show()},index:90,default:"Current",match:r})}}make_calculator(txt){var first=txt.substr(0,1);if(first==parseInt(first)||first==="("||first==="="){first==="="&&(txt=txt.substr(1));try{var val=eval(txt),formatted_value=__("{0} = {1}",[txt,(val+"").bold()]);this.options.push({label:formatted_value,value:__("{0} = {1}",[txt,val]),match:val,index:80,default:"Calculator",onclick:function(){frappe.msgprint(formatted_value,__("Result"))}})}catch(r){}}}make_random(r){r.toLowerCase().includes("random")&&this.options.push({label:__("Generate Random Password"),value:frappe.utils.get_random(16),onclick:function(){frappe.msgprint(frappe.utils.get_random(16),__("Result"))}})}}});var zd=we((Fd,Uo)=>{(function(r){if(typeof Fd=="object"&&typeof Uo!="undefined")Uo.exports=r();else if(typeof define=="function"&&define.amd)define([],r);else{var t;typeof window!="undefined"?t=window:typeof global!="undefined"?t=global:typeof self!="undefined"?t=self:t=this,t.localforage=r()}})(function(){var r,t,e;return function i(n,o,a){function s(u,h){if(!o[u]){if(!n[u]){var p=typeof ti=="function"&&ti;if(!h&&p)return p(u,!0);if(l)return l(u,!0);var m=new Error("Cannot find module '"+u+"'");throw m.code="MODULE_NOT_FOUND",m}var x=o[u]={exports:{}};n[u][0].call(x.exports,function(y){var v=n[u][1][y];return s(v||y)},x,x.exports,i,n,o,a)}return o[u].exports}for(var l=typeof ti=="function"&&ti,d=0;d<a.length;d++)s(a[d]);return s}({1:[function(i,n,o){(function(a){"use strict";var s=a.MutationObserver||a.WebKitMutationObserver,l;if(s){var d=0,u=new s(y),h=a.document.createTextNode("");u.observe(h,{characterData:!0}),l=function(){h.data=d=++d%2}}else if(!a.setImmediate&&typeof a.MessageChannel!="undefined"){var p=new a.MessageChannel;p.port1.onmessage=y,l=function(){p.port2.postMessage(0)}}else"document"in a&&"onreadystatechange"in a.document.createElement("script")?l=function(){var w=a.document.createElement("script");w.onreadystatechange=function(){y(),w.onreadystatechange=null,w.parentNode.removeChild(w),w=null},a.document.documentElement.appendChild(w)}:l=function(){setTimeout(y,0)};var m,x=[];function y(){m=!0;for(var w,k,c=x.length;c;){for(k=x,x=[],w=-1;++w<c;)k[w]();c=x.length}m=!1}n.exports=v;function v(w){x.push(w)===1&&!m&&l()}}).call(this,typeof global!="undefined"?global:typeof self!="undefined"?self:typeof window!="undefined"?window:{})},{}],2:[function(i,n,o){"use strict";var a=i(1);function s(){}var l={},d=["REJECTED"],u=["FULFILLED"],h=["PENDING"];n.exports=p;function p(b){if(typeof b!="function")throw new TypeError("resolver must be a function");this.state=h,this.queue=[],this.outcome=void 0,b!==s&&v(this,b)}p.prototype.catch=function(b){return this.then(null,b)},p.prototype.then=function(b,E){if(typeof b!="function"&&this.state===u||typeof E!="function"&&this.state===d)return this;var T=new this.constructor(s);if(this.state!==h){var C=this.state===u?b:E;x(T,C,this.outcome)}else this.queue.push(new m(T,b,E));return T};function m(b,E,T){this.promise=b,typeof E=="function"&&(this.onFulfilled=E,this.callFulfilled=this.otherCallFulfilled),typeof T=="function"&&(this.onRejected=T,this.callRejected=this.otherCallRejected)}m.prototype.callFulfilled=function(b){l.resolve(this.promise,b)},m.prototype.otherCallFulfilled=function(b){x(this.promise,this.onFulfilled,b)},m.prototype.callRejected=function(b){l.reject(this.promise,b)},m.prototype.otherCallRejected=function(b){x(this.promise,this.onRejected,b)};function x(b,E,T){a(function(){var C;try{C=E(T)}catch(S){return l.reject(b,S)}C===b?l.reject(b,new TypeError("Cannot resolve promise with itself")):l.resolve(b,C)})}l.resolve=function(b,E){var T=w(y,E);if(T.status==="error")return l.reject(b,T.value);var C=T.value;if(C)v(b,C);else{b.state=u,b.outcome=E;for(var S=-1,A=b.queue.length;++S<A;)b.queue[S].callFulfilled(E)}return b},l.reject=function(b,E){b.state=d,b.outcome=E;for(var T=-1,C=b.queue.length;++T<C;)b.queue[T].callRejected(E);return b};function y(b){var E=b&&b.then;if(b&&(typeof b=="object"||typeof b=="function")&&typeof E=="function")return function(){E.apply(b,arguments)}}function v(b,E){var T=!1;function C(B){T||(T=!0,l.reject(b,B))}function S(B){T||(T=!0,l.resolve(b,B))}function A(){E(S,C)}var L=w(A);L.status==="error"&&C(L.value)}function w(b,E){var T={};try{T.value=b(E),T.status="success"}catch(C){T.status="error",T.value=C}return T}p.resolve=k;function k(b){return b instanceof this?b:l.resolve(new this(s),b)}p.reject=c;function c(b){var E=new this(s);return l.reject(E,b)}p.all=_;function _(b){var E=this;if(Object.prototype.toString.call(b)!=="[object Array]")return this.reject(new TypeError("must be an array"));var T=b.length,C=!1;if(!T)return this.resolve([]);for(var S=new Array(T),A=0,L=-1,B=new this(s);++L<T;)P(b[L],L);return B;function P(M,O){E.resolve(M).then(I,function(j){C||(C=!0,l.reject(B,j))});function I(j){S[O]=j,++A===T&&!C&&(C=!0,l.resolve(B,S))}}}p.race=g;function g(b){var E=this;if(Object.prototype.toString.call(b)!=="[object Array]")return this.reject(new TypeError("must be an array"));var T=b.length,C=!1;if(!T)return this.resolve([]);for(var S=-1,A=new this(s);++S<T;)L(b[S]);return A;function L(B){E.resolve(B).then(function(P){C||(C=!0,l.resolve(A,P))},function(P){C||(C=!0,l.reject(A,P))})}}},{"1":1}],3:[function(i,n,o){(function(a){"use strict";typeof a.Promise!="function"&&(a.Promise=i(2))}).call(this,typeof global!="undefined"?global:typeof self!="undefined"?self:typeof window!="undefined"?window:{})},{"2":2}],4:[function(i,n,o){"use strict";var a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(Y){return typeof Y}:function(Y){return Y&&typeof Symbol=="function"&&Y.constructor===Symbol&&Y!==Symbol.prototype?"symbol":typeof Y};function s(Y,oe){if(!(Y instanceof oe))throw new TypeError("Cannot call a class as a function")}function l(){try{if(typeof indexedDB!="undefined")return indexedDB;if(typeof webkitIndexedDB!="undefined")return webkitIndexedDB;if(typeof mozIndexedDB!="undefined")return mozIndexedDB;if(typeof OIndexedDB!="undefined")return OIndexedDB;if(typeof msIndexedDB!="undefined")return msIndexedDB}catch(Y){return}}var d=l();function u(){try{if(!d||!d.open)return!1;var Y=typeof openDatabase!="undefined"&&/(Safari|iPhone|iPad|iPod)/.test(navigator.userAgent)&&!/Chrome/.test(navigator.userAgent)&&!/BlackBerry/.test(navigator.platform),oe=typeof fetch=="function"&&fetch.toString().indexOf("[native code")!==-1;return(!Y||oe)&&typeof indexedDB!="undefined"&&typeof IDBKeyRange!="undefined"}catch(Z){return!1}}function h(Y,oe){Y=Y||[],oe=oe||{};try{return new Blob(Y,oe)}catch(R){if(R.name!=="TypeError")throw R;for(var Z=typeof BlobBuilder!="undefined"?BlobBuilder:typeof MSBlobBuilder!="undefined"?MSBlobBuilder:typeof MozBlobBuilder!="undefined"?MozBlobBuilder:WebKitBlobBuilder,ae=new Z,W=0;W<Y.length;W+=1)ae.append(Y[W]);return ae.getBlob(oe.type)}}typeof Promise=="undefined"&&i(3);var p=Promise;function m(Y,oe){oe&&Y.then(function(Z){oe(null,Z)},function(Z){oe(Z)})}function x(Y,oe,Z){typeof oe=="function"&&Y.then(oe),typeof Z=="function"&&Y.catch(Z)}function y(Y){return typeof Y!="string"&&(console.warn(Y+" used as a key, but it is not a string."),Y=String(Y)),Y}function v(){if(arguments.length&&typeof arguments[arguments.length-1]=="function")return arguments[arguments.length-1]}var w="local-forage-detect-blob-support",k=void 0,c={},_=Object.prototype.toString,g="readonly",b="readwrite";function E(Y){for(var oe=Y.length,Z=new ArrayBuffer(oe),ae=new Uint8Array(Z),W=0;W<oe;W++)ae[W]=Y.charCodeAt(W);return Z}function T(Y){return new p(function(oe){var Z=Y.transaction(w,b),ae=h([""]);Z.objectStore(w).put(ae,"key"),Z.onabort=function(W){W.preventDefault(),W.stopPropagation(),oe(!1)},Z.oncomplete=function(){var W=navigator.userAgent.match(/Chrome\/(\d+)/),R=navigator.userAgent.match(/Edge\//);oe(R||!W||parseInt(W[1],10)>=43)}}).catch(function(){return!1})}function C(Y){return typeof k=="boolean"?p.resolve(k):T(Y).then(function(oe){return k=oe,k})}function S(Y){var oe=c[Y.name],Z={};Z.promise=new p(function(ae,W){Z.resolve=ae,Z.reject=W}),oe.deferredOperations.push(Z),oe.dbReady?oe.dbReady=oe.dbReady.then(function(){return Z.promise}):oe.dbReady=Z.promise}function A(Y){var oe=c[Y.name],Z=oe.deferredOperations.pop();if(Z)return Z.resolve(),Z.promise}function L(Y,oe){var Z=c[Y.name],ae=Z.deferredOperations.pop();if(ae)return ae.reject(oe),ae.promise}function B(Y,oe){return new p(function(Z,ae){if(c[Y.name]=c[Y.name]||q(),Y.db)if(oe)S(Y),Y.db.close();else return Z(Y.db);var W=[Y.name];oe&&W.push(Y.version);var R=d.open.apply(d,W);oe&&(R.onupgradeneeded=function(z){var F=R.result;try{F.createObjectStore(Y.storeName),z.oldVersion<=1&&F.createObjectStore(w)}catch(te){if(te.name==="ConstraintError")console.warn('The database "'+Y.name+'" has been upgraded from version '+z.oldVersion+" to version "+z.newVersion+', but the storage "'+Y.storeName+'" already exists.');else throw te}}),R.onerror=function(z){z.preventDefault(),ae(R.error)},R.onsuccess=function(){Z(R.result),A(Y)}})}function P(Y){return B(Y,!1)}function M(Y){return B(Y,!0)}function O(Y,oe){if(!Y.db)return!0;var Z=!Y.db.objectStoreNames.contains(Y.storeName),ae=Y.version<Y.db.version,W=Y.version>Y.db.version;if(ae&&(Y.version!==oe&&console.warn('The database "'+Y.name+`" can't be downgraded from version `+Y.db.version+" to version "+Y.version+"."),Y.version=Y.db.version),W||Z){if(Z){var R=Y.db.version+1;R>Y.version&&(Y.version=R)}return!0}return!1}function I(Y){return new p(function(oe,Z){var ae=new FileReader;ae.onerror=Z,ae.onloadend=function(W){var R=btoa(W.target.result||"");oe({__local_forage_encoded_blob:!0,data:R,type:Y.type})},ae.readAsBinaryString(Y)})}function j(Y){var oe=E(atob(Y.data));return h([oe],{type:Y.type})}function H(Y){return Y&&Y.__local_forage_encoded_blob}function N(Y){var oe=this,Z=oe._initReady().then(function(){var ae=c[oe._dbInfo.name];if(ae&&ae.dbReady)return ae.dbReady});return x(Z,Y,Y),Z}function D(Y){S(Y);for(var oe=c[Y.name],Z=oe.forages,ae=0;ae<Z.length;ae++){var W=Z[ae];W._dbInfo.db&&(W._dbInfo.db.close(),W._dbInfo.db=null)}return Y.db=null,P(Y).then(function(R){return Y.db=R,O(Y)?M(Y):R}).then(function(R){Y.db=oe.db=R;for(var z=0;z<Z.length;z++)Z[z]._dbInfo.db=R}).catch(function(R){throw L(Y,R),R})}function K(Y,oe,Z,ae){ae===void 0&&(ae=1);try{var W=Y.db.transaction(Y.storeName,oe);Z(null,W)}catch(R){if(ae>0&&(!Y.db||R.name==="InvalidStateError"||R.name==="NotFoundError"))return p.resolve().then(function(){if(!Y.db||R.name==="NotFoundError"&&!Y.db.objectStoreNames.contains(Y.storeName)&&Y.version<=Y.db.version)return Y.db&&(Y.version=Y.db.version+1),M(Y)}).then(function(){return D(Y).then(function(){K(Y,oe,Z,ae-1)})}).catch(Z);Z(R)}}function q(){return{forages:[],db:null,dbReady:null,deferredOperations:[]}}function U(Y){var oe=this,Z={db:null};if(Y)for(var ae in Y)Z[ae]=Y[ae];var W=c[Z.name];W||(W=q(),c[Z.name]=W),W.forages.push(oe),oe._initReady||(oe._initReady=oe.ready,oe.ready=N);var R=[];function z(){return p.resolve()}for(var F=0;F<W.forages.length;F++){var te=W.forages[F];te!==oe&&R.push(te._initReady().catch(z))}var J=W.forages.slice(0);return p.all(R).then(function(){return Z.db=W.db,P(Z)}).then(function(re){return Z.db=re,O(Z,oe._defaultConfig.version)?M(Z):re}).then(function(re){Z.db=W.db=re,oe._dbInfo=Z;for(var se=0;se<J.length;se++){var ve=J[se];ve!==oe&&(ve._dbInfo.db=Z.db,ve._dbInfo.version=Z.version)}})}function G(Y,oe){var Z=this;Y=y(Y);var ae=new p(function(W,R){Z.ready().then(function(){K(Z._dbInfo,g,function(z,F){if(z)return R(z);try{var te=F.objectStore(Z._dbInfo.storeName),J=te.get(Y);J.onsuccess=function(){var re=J.result;re===void 0&&(re=null),H(re)&&(re=j(re)),W(re)},J.onerror=function(){R(J.error)}}catch(re){R(re)}})}).catch(R)});return m(ae,oe),ae}function Q(Y,oe){var Z=this,ae=new p(function(W,R){Z.ready().then(function(){K(Z._dbInfo,g,function(z,F){if(z)return R(z);try{var te=F.objectStore(Z._dbInfo.storeName),J=te.openCursor(),re=1;J.onsuccess=function(){var se=J.result;if(se){var ve=se.value;H(ve)&&(ve=j(ve));var me=Y(ve,se.key,re++);me!==void 0?W(me):se.continue()}else W()},J.onerror=function(){R(J.error)}}catch(se){R(se)}})}).catch(R)});return m(ae,oe),ae}function X(Y,oe,Z){var ae=this;Y=y(Y);var W=new p(function(R,z){var F;ae.ready().then(function(){return F=ae._dbInfo,_.call(oe)==="[object Blob]"?C(F.db).then(function(te){return te?oe:I(oe)}):oe}).then(function(te){K(ae._dbInfo,b,function(J,re){if(J)return z(J);try{var se=re.objectStore(ae._dbInfo.storeName);te===null&&(te=void 0);var ve=se.put(te,Y);re.oncomplete=function(){te===void 0&&(te=null),R(te)},re.onabort=re.onerror=function(){var me=ve.error?ve.error:ve.transaction.error;z(me)}}catch(me){z(me)}})}).catch(z)});return m(W,Z),W}function ie(Y,oe){var Z=this;Y=y(Y);var ae=new p(function(W,R){Z.ready().then(function(){K(Z._dbInfo,b,function(z,F){if(z)return R(z);try{var te=F.objectStore(Z._dbInfo.storeName),J=te.delete(Y);F.oncomplete=function(){W()},F.onerror=function(){R(J.error)},F.onabort=function(){var re=J.error?J.error:J.transaction.error;R(re)}}catch(re){R(re)}})}).catch(R)});return m(ae,oe),ae}function ue(Y){var oe=this,Z=new p(function(ae,W){oe.ready().then(function(){K(oe._dbInfo,b,function(R,z){if(R)return W(R);try{var F=z.objectStore(oe._dbInfo.storeName),te=F.clear();z.oncomplete=function(){ae()},z.onabort=z.onerror=function(){var J=te.error?te.error:te.transaction.error;W(J)}}catch(J){W(J)}})}).catch(W)});return m(Z,Y),Z}function fe(Y){var oe=this,Z=new p(function(ae,W){oe.ready().then(function(){K(oe._dbInfo,g,function(R,z){if(R)return W(R);try{var F=z.objectStore(oe._dbInfo.storeName),te=F.count();te.onsuccess=function(){ae(te.result)},te.onerror=function(){W(te.error)}}catch(J){W(J)}})}).catch(W)});return m(Z,Y),Z}function be(Y,oe){var Z=this,ae=new p(function(W,R){if(Y<0){W(null);return}Z.ready().then(function(){K(Z._dbInfo,g,function(z,F){if(z)return R(z);try{var te=F.objectStore(Z._dbInfo.storeName),J=!1,re=te.openKeyCursor();re.onsuccess=function(){var se=re.result;if(!se){W(null);return}Y===0||J?W(se.key):(J=!0,se.advance(Y))},re.onerror=function(){R(re.error)}}catch(se){R(se)}})}).catch(R)});return m(ae,oe),ae}function Se(Y){var oe=this,Z=new p(function(ae,W){oe.ready().then(function(){K(oe._dbInfo,g,function(R,z){if(R)return W(R);try{var F=z.objectStore(oe._dbInfo.storeName),te=F.openKeyCursor(),J=[];te.onsuccess=function(){var re=te.result;if(!re){ae(J);return}J.push(re.key),re.continue()},te.onerror=function(){W(te.error)}}catch(re){W(re)}})}).catch(W)});return m(Z,Y),Z}function le(Y,oe){oe=v.apply(this,arguments);var Z=this.config();Y=typeof Y!="function"&&Y||{},Y.name||(Y.name=Y.name||Z.name,Y.storeName=Y.storeName||Z.storeName);var ae=this,W;if(!Y.name)W=p.reject("Invalid arguments");else{var R=Y.name===Z.name&&ae._dbInfo.db,z=R?p.resolve(ae._dbInfo.db):P(Y).then(function(F){var te=c[Y.name],J=te.forages;te.db=F;for(var re=0;re<J.length;re++)J[re]._dbInfo.db=F;return F});Y.storeName?W=z.then(function(F){if(!!F.objectStoreNames.contains(Y.storeName)){var te=F.version+1;S(Y);var J=c[Y.name],re=J.forages;F.close();for(var se=0;se<re.length;se++){var ve=re[se];ve._dbInfo.db=null,ve._dbInfo.version=te}var me=new p(function(_e,ge){var xe=d.open(Y.name,te);xe.onerror=function(De){var Ye=xe.result;Ye.close(),ge(De)},xe.onupgradeneeded=function(){var De=xe.result;De.deleteObjectStore(Y.storeName)},xe.onsuccess=function(){var De=xe.result;De.close(),_e(De)}});return me.then(function(_e){J.db=_e;for(var ge=0;ge<re.length;ge++){var xe=re[ge];xe._dbInfo.db=_e,A(xe._dbInfo)}}).catch(function(_e){throw(L(Y,_e)||p.resolve()).catch(function(){}),_e})}}):W=z.then(function(F){S(Y);var te=c[Y.name],J=te.forages;F.close();for(var re=0;re<J.length;re++){var se=J[re];se._dbInfo.db=null}var ve=new p(function(me,_e){var ge=d.deleteDatabase(Y.name);ge.onerror=ge.onblocked=function(xe){var De=ge.result;De&&De.close(),_e(xe)},ge.onsuccess=function(){var xe=ge.result;xe&&xe.close(),me(xe)}});return ve.then(function(me){te.db=me;for(var _e=0;_e<J.length;_e++){var ge=J[_e];A(ge._dbInfo)}}).catch(function(me){throw(L(Y,me)||p.resolve()).catch(function(){}),me})})}return m(W,oe),W}var ke={_driver:"asyncStorage",_initStorage:U,_support:u(),iterate:Q,getItem:G,setItem:X,removeItem:ie,clear:ue,length:fe,key:be,keys:Se,dropInstance:le};function Re(){return typeof openDatabase=="function"}var Me="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Ne="~~local_forage_type~",et=/^~~local_forage_type~([^~]+)~/,Ke="__lfsc__:",Je=Ke.length,Ue="arbf",nt="blob",Ze="si08",de="ui08",ye="uic8",Ie="si16",Fe="si32",it="ur16",ht="ui32",_t="fl32",Pe="fl64",yt=Je+Ue.length,Ut=Object.prototype.toString;function zt(Y){var oe=Y.length*.75,Z=Y.length,ae,W=0,R,z,F,te;Y[Y.length-1]==="="&&(oe--,Y[Y.length-2]==="="&&oe--);var J=new ArrayBuffer(oe),re=new Uint8Array(J);for(ae=0;ae<Z;ae+=4)R=Me.indexOf(Y[ae]),z=Me.indexOf(Y[ae+1]),F=Me.indexOf(Y[ae+2]),te=Me.indexOf(Y[ae+3]),re[W++]=R<<2|z>>4,re[W++]=(z&15)<<4|F>>2,re[W++]=(F&3)<<6|te&63;return J}function Ge(Y){var oe=new Uint8Array(Y),Z="",ae;for(ae=0;ae<oe.length;ae+=3)Z+=Me[oe[ae]>>2],Z+=Me[(oe[ae]&3)<<4|oe[ae+1]>>4],Z+=Me[(oe[ae+1]&15)<<2|oe[ae+2]>>6],Z+=Me[oe[ae+2]&63];return oe.length%3===2?Z=Z.substring(0,Z.length-1)+"=":oe.length%3===1&&(Z=Z.substring(0,Z.length-2)+"=="),Z}function Xe(Y,oe){var Z="";if(Y&&(Z=Ut.call(Y)),Y&&(Z==="[object ArrayBuffer]"||Y.buffer&&Ut.call(Y.buffer)==="[object ArrayBuffer]")){var ae,W=Ke;Y instanceof ArrayBuffer?(ae=Y,W+=Ue):(ae=Y.buffer,Z==="[object Int8Array]"?W+=Ze:Z==="[object Uint8Array]"?W+=de:Z==="[object Uint8ClampedArray]"?W+=ye:Z==="[object Int16Array]"?W+=Ie:Z==="[object Uint16Array]"?W+=it:Z==="[object Int32Array]"?W+=Fe:Z==="[object Uint32Array]"?W+=ht:Z==="[object Float32Array]"?W+=_t:Z==="[object Float64Array]"?W+=Pe:oe(new Error("Failed to get type for BinaryArray"))),oe(W+Ge(ae))}else if(Z==="[object Blob]"){var R=new FileReader;R.onload=function(){var z=Ne+Y.type+"~"+Ge(this.result);oe(Ke+nt+z)},R.readAsArrayBuffer(Y)}else try{oe(JSON.stringify(Y))}catch(z){console.error("Couldn't convert value into a JSON string: ",Y),oe(null,z)}}function tt(Y){if(Y.substring(0,Je)!==Ke)return JSON.parse(Y);var oe=Y.substring(yt),Z=Y.substring(Je,yt),ae;if(Z===nt&&et.test(oe)){var W=oe.match(et);ae=W[1],oe=oe.substring(W[0].length)}var R=zt(oe);switch(Z){case Ue:return R;case nt:return h([R],{type:ae});case Ze:return new Int8Array(R);case de:return new Uint8Array(R);case ye:return new Uint8ClampedArray(R);case Ie:return new Int16Array(R);case it:return new Uint16Array(R);case Fe:return new Int32Array(R);case ht:return new Uint32Array(R);case _t:return new Float32Array(R);case Pe:return new Float64Array(R);default:throw new Error("Unkown type: "+Z)}}var qe={serialize:Xe,deserialize:tt,stringToBuffer:zt,bufferToString:Ge};function er(Y,oe,Z,ae){Y.executeSql("CREATE TABLE IF NOT EXISTS "+oe.storeName+" (id INTEGER PRIMARY KEY, key unique, value)",[],Z,ae)}function dt(Y){var oe=this,Z={db:null};if(Y)for(var ae in Y)Z[ae]=typeof Y[ae]!="string"?Y[ae].toString():Y[ae];var W=new p(function(R,z){try{Z.db=openDatabase(Z.name,String(Z.version),Z.description,Z.size)}catch(F){return z(F)}Z.db.transaction(function(F){er(F,Z,function(){oe._dbInfo=Z,R()},function(te,J){z(J)})},z)});return Z.serializer=qe,W}function je(Y,oe,Z,ae,W,R){Y.executeSql(Z,ae,W,function(z,F){F.code===F.SYNTAX_ERR?z.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name = ?",[oe.storeName],function(te,J){J.rows.length?R(te,F):er(te,oe,function(){te.executeSql(Z,ae,W,R)},R)},R):R(z,F)},R)}function tr(Y,oe){var Z=this;Y=y(Y);var ae=new p(function(W,R){Z.ready().then(function(){var z=Z._dbInfo;z.db.transaction(function(F){je(F,z,"SELECT * FROM "+z.storeName+" WHERE key = ? LIMIT 1",[Y],function(te,J){var re=J.rows.length?J.rows.item(0).value:null;re&&(re=z.serializer.deserialize(re)),W(re)},function(te,J){R(J)})})}).catch(R)});return m(ae,oe),ae}function rt(Y,oe){var Z=this,ae=new p(function(W,R){Z.ready().then(function(){var z=Z._dbInfo;z.db.transaction(function(F){je(F,z,"SELECT * FROM "+z.storeName,[],function(te,J){for(var re=J.rows,se=re.length,ve=0;ve<se;ve++){var me=re.item(ve),_e=me.value;if(_e&&(_e=z.serializer.deserialize(_e)),_e=Y(_e,me.key,ve+1),_e!==void 0){W(_e);return}}W()},function(te,J){R(J)})})}).catch(R)});return m(ae,oe),ae}function rr(Y,oe,Z,ae){var W=this;Y=y(Y);var R=new p(function(z,F){W.ready().then(function(){oe===void 0&&(oe=null);var te=oe,J=W._dbInfo;J.serializer.serialize(oe,function(re,se){se?F(se):J.db.transaction(function(ve){je(ve,J,"INSERT OR REPLACE INTO "+J.storeName+" (key, value) VALUES (?, ?)",[Y,re],function(){z(te)},function(me,_e){F(_e)})},function(ve){if(ve.code===ve.QUOTA_ERR){if(ae>0){z(rr.apply(W,[Y,te,Z,ae-1]));return}F(ve)}})})}).catch(F)});return m(R,Z),R}function It(Y,oe,Z){return rr.apply(this,[Y,oe,Z,1])}function dr(Y,oe){var Z=this;Y=y(Y);var ae=new p(function(W,R){Z.ready().then(function(){var z=Z._dbInfo;z.db.transaction(function(F){je(F,z,"DELETE FROM "+z.storeName+" WHERE key = ?",[Y],function(){W()},function(te,J){R(J)})})}).catch(R)});return m(ae,oe),ae}function pt(Y){var oe=this,Z=new p(function(ae,W){oe.ready().then(function(){var R=oe._dbInfo;R.db.transaction(function(z){je(z,R,"DELETE FROM "+R.storeName,[],function(){ae()},function(F,te){W(te)})})}).catch(W)});return m(Z,Y),Z}function Bt(Y){var oe=this,Z=new p(function(ae,W){oe.ready().then(function(){var R=oe._dbInfo;R.db.transaction(function(z){je(z,R,"SELECT COUNT(key) as c FROM "+R.storeName,[],function(F,te){var J=te.rows.item(0).c;ae(J)},function(F,te){W(te)})})}).catch(W)});return m(Z,Y),Z}function Xt(Y,oe){var Z=this,ae=new p(function(W,R){Z.ready().then(function(){var z=Z._dbInfo;z.db.transaction(function(F){je(F,z,"SELECT key FROM "+z.storeName+" WHERE id = ? LIMIT 1",[Y+1],function(te,J){var re=J.rows.length?J.rows.item(0).key:null;W(re)},function(te,J){R(J)})})}).catch(R)});return m(ae,oe),ae}function xr(Y){var oe=this,Z=new p(function(ae,W){oe.ready().then(function(){var R=oe._dbInfo;R.db.transaction(function(z){je(z,R,"SELECT key FROM "+R.storeName,[],function(F,te){for(var J=[],re=0;re<te.rows.length;re++)J.push(te.rows.item(re).key);ae(J)},function(F,te){W(te)})})}).catch(W)});return m(Z,Y),Z}function Pt(Y){return new p(function(oe,Z){Y.transaction(function(ae){ae.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name <> '__WebKitDatabaseInfoTable__'",[],function(W,R){for(var z=[],F=0;F<R.rows.length;F++)z.push(R.rows.item(F).name);oe({db:Y,storeNames:z})},function(W,R){Z(R)})},function(ae){Z(ae)})})}function ir(Y,oe){oe=v.apply(this,arguments);var Z=this.config();Y=typeof Y!="function"&&Y||{},Y.name||(Y.name=Y.name||Z.name,Y.storeName=Y.storeName||Z.storeName);var ae=this,W;return Y.name?W=new p(function(R){var z;Y.name===Z.name?z=ae._dbInfo.db:z=openDatabase(Y.name,"","",0),Y.storeName?R({db:z,storeNames:[Y.storeName]}):R(Pt(z))}).then(function(R){return new p(function(z,F){R.db.transaction(function(te){function J(me){return new p(function(_e,ge){te.executeSql("DROP TABLE IF EXISTS "+me,[],function(){_e()},function(xe,De){ge(De)})})}for(var re=[],se=0,ve=R.storeNames.length;se<ve;se++)re.push(J(R.storeNames[se]));p.all(re).then(function(){z()}).catch(function(me){F(me)})},function(te){F(te)})})}):W=p.reject("Invalid arguments"),m(W,oe),W}var Nt={_driver:"webSQLStorage",_initStorage:dt,_support:Re(),iterate:rt,getItem:tr,setItem:It,removeItem:dr,clear:pt,length:Bt,key:Xt,keys:xr,dropInstance:ir};function hr(){try{return typeof localStorage!="undefined"&&"setItem"in localStorage&&!!localStorage.setItem}catch(Y){return!1}}function Kt(Y,oe){var Z=Y.name+"/";return Y.storeName!==oe.storeName&&(Z+=Y.storeName+"/"),Z}function nr(){var Y="_localforage_support_test";try{return localStorage.setItem(Y,!0),localStorage.removeItem(Y),!1}catch(oe){return!0}}function Et(){return!nr()||localStorage.length>0}function At(Y){var oe=this,Z={};if(Y)for(var ae in Y)Z[ae]=Y[ae];return Z.keyPrefix=Kt(Y,oe._defaultConfig),Et()?(oe._dbInfo=Z,Z.serializer=qe,p.resolve()):p.reject()}function wt(Y){var oe=this,Z=oe.ready().then(function(){for(var ae=oe._dbInfo.keyPrefix,W=localStorage.length-1;W>=0;W--){var R=localStorage.key(W);R.indexOf(ae)===0&&localStorage.removeItem(R)}});return m(Z,Y),Z}function Ae(Y,oe){var Z=this;Y=y(Y);var ae=Z.ready().then(function(){var W=Z._dbInfo,R=localStorage.getItem(W.keyPrefix+Y);return R&&(R=W.serializer.deserialize(R)),R});return m(ae,oe),ae}function Ee(Y,oe){var Z=this,ae=Z.ready().then(function(){for(var W=Z._dbInfo,R=W.keyPrefix,z=R.length,F=localStorage.length,te=1,J=0;J<F;J++){var re=localStorage.key(J);if(re.indexOf(R)===0){var se=localStorage.getItem(re);if(se&&(se=W.serializer.deserialize(se)),se=Y(se,re.substring(z),te++),se!==void 0)return se}}});return m(ae,oe),ae}function ze(Y,oe){var Z=this,ae=Z.ready().then(function(){var W=Z._dbInfo,R;try{R=localStorage.key(Y)}catch(z){R=null}return R&&(R=R.substring(W.keyPrefix.length)),R});return m(ae,oe),ae}function V(Y){var oe=this,Z=oe.ready().then(function(){for(var ae=oe._dbInfo,W=localStorage.length,R=[],z=0;z<W;z++){var F=localStorage.key(z);F.indexOf(ae.keyPrefix)===0&&R.push(F.substring(ae.keyPrefix.length))}return R});return m(Z,Y),Z}function ee(Y){var oe=this,Z=oe.keys().then(function(ae){return ae.length});return m(Z,Y),Z}function ne(Y,oe){var Z=this;Y=y(Y);var ae=Z.ready().then(function(){var W=Z._dbInfo;localStorage.removeItem(W.keyPrefix+Y)});return m(ae,oe),ae}function he(Y,oe,Z){var ae=this;Y=y(Y);var W=ae.ready().then(function(){oe===void 0&&(oe=null);var R=oe;return new p(function(z,F){var te=ae._dbInfo;te.serializer.serialize(oe,function(J,re){if(re)F(re);else try{localStorage.setItem(te.keyPrefix+Y,J),z(R)}catch(se){(se.name==="QuotaExceededError"||se.name==="NS_ERROR_DOM_QUOTA_REACHED")&&F(se),F(se)}})})});return m(W,Z),W}function ce(Y,oe){if(oe=v.apply(this,arguments),Y=typeof Y!="function"&&Y||{},!Y.name){var Z=this.config();Y.name=Y.name||Z.name,Y.storeName=Y.storeName||Z.storeName}var ae=this,W;return Y.name?W=new p(function(R){Y.storeName?R(Kt(Y,ae._defaultConfig)):R(Y.name+"/")}).then(function(R){for(var z=localStorage.length-1;z>=0;z--){var F=localStorage.key(z);F.indexOf(R)===0&&localStorage.removeItem(F)}}):W=p.reject("Invalid arguments"),m(W,oe),W}var Ce={_driver:"localStorageWrapper",_initStorage:At,_support:hr(),iterate:Ee,getItem:Ae,setItem:he,removeItem:ne,clear:wt,length:ee,key:ze,keys:V,dropInstance:ce},Te=function(oe,Z){return oe===Z||typeof oe=="number"&&typeof Z=="number"&&isNaN(oe)&&isNaN(Z)},Be=function(oe,Z){for(var ae=oe.length,W=0;W<ae;){if(Te(oe[W],Z))return!0;W++}return!1},Oe=Array.isArray||function(Y){return Object.prototype.toString.call(Y)==="[object Array]"},$e={},Ve={},He={INDEXEDDB:ke,WEBSQL:Nt,LOCALSTORAGE:Ce},ot=[He.INDEXEDDB._driver,He.WEBSQL._driver,He.LOCALSTORAGE._driver],vt=["dropInstance"],Qe=["clear","getItem","iterate","key","keys","length","removeItem","setItem"].concat(vt),We={description:"",driver:ot.slice(),name:"localforage",size:4980736,storeName:"keyvaluepairs",version:1};function Ot(Y,oe){Y[oe]=function(){var Z=arguments;return Y.ready().then(function(){return Y[oe].apply(Y,Z)})}}function Mt(){for(var Y=1;Y<arguments.length;Y++){var oe=arguments[Y];if(oe)for(var Z in oe)oe.hasOwnProperty(Z)&&(Oe(oe[Z])?arguments[0][Z]=oe[Z].slice():arguments[0][Z]=oe[Z])}return arguments[0]}var xt=function(){function Y(oe){s(this,Y);for(var Z in He)if(He.hasOwnProperty(Z)){var ae=He[Z],W=ae._driver;this[Z]=W,$e[W]||this.defineDriver(ae)}this._defaultConfig=Mt({},We),this._config=Mt({},this._defaultConfig,oe),this._driverSet=null,this._initDriver=null,this._ready=!1,this._dbInfo=null,this._wrapLibraryMethodsWithReady(),this.setDriver(this._config.driver).catch(function(){})}return Y.prototype.config=function(Z){if((typeof Z=="undefined"?"undefined":a(Z))==="object"){if(this._ready)return new Error("Can't call config() after localforage has been used.");for(var ae in Z){if(ae==="storeName"&&(Z[ae]=Z[ae].replace(/\W/g,"_")),ae==="version"&&typeof Z[ae]!="number")return new Error("Database version must be a number.");this._config[ae]=Z[ae]}return"driver"in Z&&Z.driver?this.setDriver(this._config.driver):!0}else return typeof Z=="string"?this._config[Z]:this._config},Y.prototype.defineDriver=function(Z,ae,W){var R=new p(function(z,F){try{var te=Z._driver,J=new Error("Custom driver not compliant; see https://mozilla.github.io/localForage/#definedriver");if(!Z._driver){F(J);return}for(var re=Qe.concat("_initStorage"),se=0,ve=re.length;se<ve;se++){var me=re[se],_e=!Be(vt,me);if((_e||Z[me])&&typeof Z[me]!="function"){F(J);return}}var ge=function(){for(var Ye=function(Ct){return function(){var or=new Error("Method "+Ct+" is not implemented by the current driver"),jt=p.reject(or);return m(jt,arguments[arguments.length-1]),jt}},ft=0,st=vt.length;ft<st;ft++){var kt=vt[ft];Z[kt]||(Z[kt]=Ye(kt))}};ge();var xe=function(Ye){$e[te]&&console.info("Redefining LocalForage driver: "+te),$e[te]=Z,Ve[te]=Ye,z()};"_support"in Z?Z._support&&typeof Z._support=="function"?Z._support().then(xe,F):xe(!!Z._support):xe(!0)}catch(De){F(De)}});return x(R,ae,W),R},Y.prototype.driver=function(){return this._driver||null},Y.prototype.getDriver=function(Z,ae,W){var R=$e[Z]?p.resolve($e[Z]):p.reject(new Error("Driver not found."));return x(R,ae,W),R},Y.prototype.getSerializer=function(Z){var ae=p.resolve(qe);return x(ae,Z),ae},Y.prototype.ready=function(Z){var ae=this,W=ae._driverSet.then(function(){return ae._ready===null&&(ae._ready=ae._initDriver()),ae._ready});return x(W,Z,Z),W},Y.prototype.setDriver=function(Z,ae,W){var R=this;Oe(Z)||(Z=[Z]);var z=this._getSupportedDrivers(Z);function F(){R._config.driver=R.driver()}function te(se){return R._extend(se),F(),R._ready=R._initStorage(R._config),R._ready}function J(se){return function(){var ve=0;function me(){for(;ve<se.length;){var _e=se[ve];return ve++,R._dbInfo=null,R._ready=null,R.getDriver(_e).then(te).catch(me)}F();var ge=new Error("No available storage method found.");return R._driverSet=p.reject(ge),R._driverSet}return me()}}var re=this._driverSet!==null?this._driverSet.catch(function(){return p.resolve()}):p.resolve();return this._driverSet=re.then(function(){var se=z[0];return R._dbInfo=null,R._ready=null,R.getDriver(se).then(function(ve){R._driver=ve._driver,F(),R._wrapLibraryMethodsWithReady(),R._initDriver=J(z)})}).catch(function(){F();var se=new Error("No available storage method found.");return R._driverSet=p.reject(se),R._driverSet}),x(this._driverSet,ae,W),this._driverSet},Y.prototype.supports=function(Z){return!!Ve[Z]},Y.prototype._extend=function(Z){Mt(this,Z)},Y.prototype._getSupportedDrivers=function(Z){for(var ae=[],W=0,R=Z.length;W<R;W++){var z=Z[W];this.supports(z)&&ae.push(z)}return ae},Y.prototype._wrapLibraryMethodsWithReady=function(){for(var Z=0,ae=Qe.length;Z<ae;Z++)Ot(this,Qe[Z])},Y.prototype.createInstance=function(Z){return new Y(Z)},Y}(),St=new xt;n.exports=St},{"3":3}]},{},[4])(4)})});var qd=we((fn,Vo)=>{(function(r,t){typeof fn=="object"&&typeof Vo=="object"?Vo.exports=t():typeof define=="function"&&define.amd?define([],t):typeof fn=="object"?fn.EditorJS=t():r.EditorJS=t()})(window,function(){return function(r){var t={};function e(i){if(t[i])return t[i].exports;var n=t[i]={i,l:!1,exports:{}};return r[i].call(n.exports,n,n.exports,e),n.l=!0,n.exports}return e.m=r,e.c=t,e.d=function(i,n,o){e.o(i,n)||Object.defineProperty(i,n,{enumerable:!0,get:o})},e.r=function(i){typeof Symbol!="undefined"&&Symbol.toStringTag&&Object.defineProperty(i,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(i,"__esModule",{value:!0})},e.t=function(i,n){if(1&n&&(i=e(i)),8&n||4&n&&typeof i=="object"&&i&&i.__esModule)return i;var o=Object.create(null);if(e.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:i}),2&n&&typeof i!="string")for(var a in i)e.d(o,a,function(s){return i[s]}.bind(null,a));return o},e.n=function(i){var n=i&&i.__esModule?function(){return i.default}:function(){return i};return e.d(n,"a",n),n},e.o=function(i,n){return Object.prototype.hasOwnProperty.call(i,n)},e.p="",e(e.s=187)}([function(r,t,e){var i=e(10),n=e(16),o=e(27),a=e(23),s=e(31),l=function(d,u,h){var p,m,x,y,v=d&l.F,w=d&l.G,k=d&l.S,c=d&l.P,_=d&l.B,g=w?i:k?i[u]||(i[u]={}):(i[u]||{}).prototype,b=w?n:n[u]||(n[u]={}),E=b.prototype||(b.prototype={});for(p in w&&(h=u),h)x=((m=!v&&g&&g[p]!==void 0)?g:h)[p],y=_&&m?s(x,i):c&&typeof x=="function"?s(Function.call,x):x,g&&a(g,p,x,d&l.U),b[p]!=x&&o(b,p,y),c&&E[p]!=x&&(E[p]=x)};i.core=n,l.F=1,l.G=2,l.S=4,l.P=8,l.B=16,l.W=32,l.U=64,l.R=128,r.exports=l},function(r,t){r.exports=function(e){return e&&e.__esModule?e:{default:e}},r.exports.__esModule=!0,r.exports.default=r.exports},function(r,t){r.exports=function(e,i){if(!(e instanceof i))throw new TypeError("Cannot call a class as a function")},r.exports.__esModule=!0,r.exports.default=r.exports},function(r,t){function e(i,n){for(var o=0;o<n.length;o++){var a=n[o];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(i,a.key,a)}}r.exports=function(i,n,o){return n&&e(i.prototype,n),o&&e(i,o),Object.defineProperty(i,"prototype",{writable:!1}),i},r.exports.__esModule=!0,r.exports.default=r.exports},function(r,t){function e(i){return r.exports=e=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},r.exports.__esModule=!0,r.exports.default=r.exports,e(i)}r.exports=e,r.exports.__esModule=!0,r.exports.default=r.exports},function(r,t,e){var i=e(111);r.exports=function(n,o){if(typeof o!="function"&&o!==null)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(o&&o.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),o&&i(n,o)},r.exports.__esModule=!0,r.exports.default=r.exports},function(r,t,e){var i=e(7).default,n=e(152);r.exports=function(o,a){if(a&&(i(a)==="object"||typeof a=="function"))return a;if(a!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return n(o)},r.exports.__esModule=!0,r.exports.default=r.exports},function(r,t){function e(i){return r.exports=e=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(n){return typeof n}:function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},r.exports.__esModule=!0,r.exports.default=r.exports,e(i)}r.exports=e,r.exports.__esModule=!0,r.exports.default=r.exports},function(r,t,e){var i,n,o;n=[t,e(20),e(372),e(21),e(402),e(19)],(o=typeof(i=function(a,s,l,d,u,h){"use strict";var p,m=e(1);function x(C,S){var A=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"log",L=arguments.length>3?arguments[3]:void 0,B=arguments.length>4&&arguments[4]!==void 0?arguments[4]:"color: inherit";if("console"in window&&window.console[A]){var P=["info","log","warn","error"].includes(A),M=[];switch(x.logLevel){case p.ERROR:if(A!=="error")return;break;case p.WARN:if(!["error","warn"].includes(A))return;break;case p.INFO:if(!P||C)return}L&&M.push(L);var O="Editor.js ".concat("2.26.3"),I=`line-height: 1em;
            color: #006FEA;
            display: inline-block;
            font-size: 11px;
            line-height: 1em;
            background-color: #fff;
            padding: 4px 9px;
            border-radius: 30px;
            border: 1px solid rgba(56, 138, 229, 0.16);
            margin: 4px 5px 4px 0;`;C&&(P?(M.unshift(I,B),S="%c".concat(O,"%c ").concat(S)):S="( ".concat(O," )").concat(S));try{if(P)if(L){var j;(j=console)[A].apply(j,["".concat(S," %o")].concat(M))}else{var H;(H=console)[A].apply(H,[S].concat(M))}else console[A](S)}catch(N){}}}Object.defineProperty(a,"__esModule",{value:!0}),a.LogLevels=void 0,a.array=function(C){return Array.prototype.slice.call(C)},a.beautifyShortcut=function(C){var S=b();return C=C.replace(/shift/gi,"\u21E7").replace(/backspace/gi,"\u232B").replace(/enter/gi,"\u23CE").replace(/up/gi,"\u2191").replace(/left/gi,"\u2192").replace(/down/gi,"\u2193").replace(/right/gi,"\u2190").replace(/escape/gi,"\u238B").replace(/insert/gi,"Ins").replace(/delete/gi,"\u2421").replace(/\+/gi," + "),C=S.mac?C.replace(/ctrl|cmd/gi,"\u2318").replace(/alt/gi,"\u2325"):C.replace(/cmd/gi,"Ctrl").replace(/windows/gi,"WIN")},a.cacheable=function(C,S,A){var L=A.value?"value":"get",B=A[L],P="#".concat(S,"Cache");if(A[L]=function(){if(this[P]===void 0){for(var O=arguments.length,I=new Array(O),j=0;j<O;j++)I[j]=arguments[j];this[P]=B.apply.apply(B,[this].concat(I))}return this[P]},L==="get"&&A.set){var M=A.set;A.set=function(O){delete C[P],M.apply(this,O)}}return A},a.capitalize=function(C){return C[0].toUpperCase()+C.slice(1)},a.copyTextToClipboard=function(C){var S=h.default.make("div","codex-editor-clipboard",{innerHTML:C});document.body.appendChild(S);var A=window.getSelection(),L=document.createRange();L.selectNode(S),window.getSelection().removeAllRanges(),A.addRange(L),document.execCommand("copy"),document.body.removeChild(S)},a.debounce=function(C,S,A){var L,B=this;return function(){for(var P=arguments.length,M=new Array(P),O=0;O<P;O++)M[O]=arguments[O];var I=B,j=function(){L=null,A||C.apply(I,M)},H=A&&!L;window.clearTimeout(L),L=window.setTimeout(j,S),H&&C.apply(I,M)}},a.deepMerge=function C(S){for(var A=arguments.length,L=new Array(A>1?A-1:0),B=1;B<A;B++)L[B-1]=arguments[B];if(!L.length)return S;var P=L.shift();if(c(S)&&c(P))for(var M in P)c(P[M])?(S[M]||Object.assign(S,(0,l.default)({},M,{})),C(S[M],P[M])):Object.assign(S,(0,l.default)({},M,P[M]));return C.apply(void 0,[S].concat(L))},a.delay=function(C,S){return function(){var A=this,L=arguments;window.setTimeout(function(){return C.apply(A,L)},S)}},a.deprecationAssert=function(C,S,A){var L="\xAB".concat(S,"\xBB is deprecated and will be removed in the next major release. Please use the \xAB").concat(A,"\xBB instead.");C&&v(L,"warn")},a.equals=function(C,S){var A=Array.isArray(C)||c(C),L=Array.isArray(S)||c(S);return A||L?JSON.stringify(C)===JSON.stringify(S):C===S},a.generateBlockId=function(){return(0,u.nanoid)(10)},a.generateId=function(){var C=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"";return"".concat(C).concat(Math.floor(1e8*Math.random()).toString(16))},a.getFileExtension=function(C){return C.name.split(".").pop()},a.getUserOS=b,a.getValidUrl=function(C){try{return new URL(C).href}catch(S){}return C.substring(0,2)==="//"?window.location.protocol+C:window.location.origin+C},a.isBoolean=function(C){return w(C)==="boolean"},a.isClass=function(C){return k(C)&&/^\s*class\s+/.test(C.toString())},a.isEmpty=function(C){return!C||Object.keys(C).length===0&&C.constructor===Object},a.isFunction=k,a.isIosDevice=void 0,a.isMobileScreen=function(){return window.matchMedia("(max-width: ".concat(650,"px)")).matches},a.isNumber=function(C){return w(C)==="number"},a.isObject=c,a.isPrintableKey=function(C){return C>47&&C<58||C===32||C===13||C===229||C>64&&C<91||C>95&&C<112||C>185&&C<193||C>218&&C<223},a.isPromise=function(C){return Promise.resolve(C)===C},a.isString=function(C){return w(C)==="string"},a.isTouchSupported=void 0,a.isUndefined=_,a.isValidMimeType=function(C){return/^[-\w]+\/([-+\w]+|\*)$/.test(C)},a.mouseButtons=a.mobileScreenBreakpoint=a.logLabeled=a.log=a.keyCodes=void 0,a.openTab=function(C){window.open(C,"_blank")},a.sequence=function(C){return g.apply(this,arguments)},a.setLogLevel=function(C){x.logLevel=C},a.throttle=function(C,S){var A,L,B,P=arguments.length>2&&arguments[2]!==void 0?arguments[2]:void 0,M=null,O=0;P||(P={});var I=function(){O=P.leading===!1?0:Date.now(),M=null,B=C.apply(A,L),M||(A=L=null)};return function(){var j=Date.now();O||P.leading!==!1||(O=j);var H=S-(j-O);return A=this,L=arguments,H<=0||H>S?(M&&(clearTimeout(M),M=null),O=j,B=C.apply(A,L),M||(A=L=null)):M||P.trailing===!1||(M=setTimeout(I,H)),B}},a.typeOf=w,s=m(s),l=m(l),d=m(d),h=m(h),a.LogLevels=p,function(C){C.VERBOSE="VERBOSE",C.INFO="INFO",C.WARN="WARN",C.ERROR="ERROR"}(p||(a.LogLevels=p={})),a.keyCodes={BACKSPACE:8,TAB:9,ENTER:13,SHIFT:16,CTRL:17,ALT:18,ESC:27,SPACE:32,LEFT:37,UP:38,DOWN:40,RIGHT:39,DELETE:46,META:91},a.mouseButtons={LEFT:0,WHEEL:1,RIGHT:2,BACKWARD:3,FORWARD:4},x.logLevel=p.VERBOSE;var y=x.bind(window,!1);a.log=y;var v=x.bind(window,!0);function w(C){return Object.prototype.toString.call(C).match(/\s([a-zA-Z]+)/)[1].toLowerCase()}function k(C){return w(C)==="function"||w(C)==="asyncfunction"}function c(C){return w(C)==="object"}function _(C){return w(C)==="undefined"}function g(){return(g=(0,d.default)(s.default.mark(function C(S){var A,L,B,P,M=arguments;return s.default.wrap(function(O){for(;;)switch(O.prev=O.next){case 0:return P=function(){return(P=(0,d.default)(s.default.mark(function I(j,H,N){return s.default.wrap(function(D){for(;;)switch(D.prev=D.next){case 0:return D.prev=0,D.next=3,j.function(j.data);case 3:return D.next=5,H(_(j.data)?{}:j.data);case 5:D.next=10;break;case 7:D.prev=7,D.t0=D.catch(0),N(_(j.data)?{}:j.data);case 10:case"end":return D.stop()}},I,null,[[0,7]])}))).apply(this,arguments)},B=function(I,j,H){return P.apply(this,arguments)},A=M.length>1&&M[1]!==void 0?M[1]:function(){},L=M.length>2&&M[2]!==void 0?M[2]:function(){},O.abrupt("return",S.reduce(function(){var I=(0,d.default)(s.default.mark(function j(H,N){return s.default.wrap(function(D){for(;;)switch(D.prev=D.next){case 0:return D.next=2,H;case 2:return D.abrupt("return",B(N,A,L));case 3:case"end":return D.stop()}},j)}));return function(j,H){return I.apply(this,arguments)}}(),Promise.resolve()));case 5:case"end":return O.stop()}},C)}))).apply(this,arguments)}function b(){var C={win:!1,mac:!1,x11:!1,linux:!1},S=Object.keys(C).find(function(A){return window.navigator.appVersion.toLowerCase().indexOf(A)!==-1});return S&&(C[S]=!0),C}a.logLabeled=v;var E="ontouchstart"in document.documentElement;a.isTouchSupported=E,a.mobileScreenBreakpoint=650;var T=typeof window!="undefined"&&window.navigator&&window.navigator.platform&&(/iP(ad|hone|od)/.test(window.navigator.platform)||window.navigator.platform==="MacIntel"&&window.navigator.maxTouchPoints>1);a.isIosDevice=T})=="function"?i.apply(t,n):i)===void 0||(r.exports=o)},function(r,t,e){var i,n,o;n=[t,e(2),e(3),e(112)],(o=typeof(i=function(a,s,l,d){"use strict";var u=e(1);function h(x,y){var v=typeof Symbol!="undefined"&&x[Symbol.iterator]||x["@@iterator"];if(!v){if(Array.isArray(x)||(v=function(b,E){if(b){if(typeof b=="string")return p(b,E);var T=Object.prototype.toString.call(b).slice(8,-1);return T==="Object"&&b.constructor&&(T=b.constructor.name),T==="Map"||T==="Set"?Array.from(b):T==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(T)?p(b,E):void 0}}(x))||y&&x&&typeof x.length=="number"){v&&(x=v);var w=0,k=function(){};return{s:k,n:function(){return w>=x.length?{done:!0}:{done:!1,value:x[w++]}},e:function(b){throw b},f:k}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var c,_=!0,g=!1;return{s:function(){v=v.call(x)},n:function(){var b=v.next();return _=b.done,b},e:function(b){g=!0,c=b},f:function(){try{_||v.return==null||v.return()}finally{if(g)throw c}}}}function p(x,y){(y==null||y>x.length)&&(y=x.length);for(var v=0,w=new Array(y);v<y;v++)w[v]=x[v];return w}Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,s=u(s),l=u(l),d=u(d);var m=function(){function x(y){var v=this,w=y.config,k=y.eventsDispatcher;if((0,s.default)(this,x),this.nodes={},this.listeners=new d.default,this.readOnlyMutableListeners={on:function(c,_,g){var b=arguments.length>3&&arguments[3]!==void 0&&arguments[3];v.mutableListenerIds.push(v.listeners.on(c,_,g,b))},clearAll:function(){var c,_=h(v.mutableListenerIds);try{for(_.s();!(c=_.n()).done;){var g=c.value;v.listeners.offById(g)}}catch(b){_.e(b)}finally{_.f()}v.mutableListenerIds=[]}},this.mutableListenerIds=[],(this instanceof x?this.constructor:void 0)===x)throw new TypeError("Constructors for abstract class Module are not allowed.");this.config=w,this.eventsDispatcher=k}return(0,l.default)(x,[{key:"state",set:function(y){this.Editor=y}},{key:"removeAllNodes",value:function(){for(var y in this.nodes){var v=this.nodes[y];v instanceof HTMLElement&&v.remove()}}},{key:"isRtl",get:function(){return this.config.i18n.direction==="rtl"}}]),x}();a.default=m,m.displayName="Module",r.exports=t.default})=="function"?i.apply(t,n):i)===void 0||(r.exports=o)},function(r,t){var e=r.exports=typeof window!="undefined"&&window.Math==Math?window:typeof self!="undefined"&&self.Math==Math?self:Function("return this")();typeof __g=="number"&&(__g=e)},function(r,t){r.exports=function(e){try{return!!e()}catch(i){return!0}}},function(r,t,e){var i=e(13);r.exports=function(n){if(!i(n))throw TypeError(n+" is not an object!");return n}},function(r,t){r.exports=function(e){return typeof e=="object"?e!==null:typeof e=="function"}},function(r,t,e){var i=e(70)("wks"),n=e(45),o=e(10).Symbol,a=typeof o=="function";(r.exports=function(s){return i[s]||(i[s]=a&&o[s]||(a?o:n)("Symbol."+s))}).store=i},function(r,t,e){var i=e(33),n=Math.min;r.exports=function(o){return o>0?n(i(o),9007199254740991):0}},function(r,t){var e=r.exports={version:"2.6.12"};typeof __e=="number"&&(__e=e)},function(r,t,e){r.exports=!e(11)(function(){return Object.defineProperty({},"a",{get:function(){return 7}}).a!=7})},function(r,t,e){var i=e(12),n=e(117),o=e(42),a=Object.defineProperty;t.f=e(17)?Object.defineProperty:function(s,l,d){if(i(s),l=o(l,!0),i(d),n)try{return a(s,l,d)}catch(u){}if("get"in d||"set"in d)throw TypeError("Accessors not supported!");return"value"in d&&(s[l]=d.value),s}},function(r,t,e){var i,n,o,a=e(7);n=[t,e(40),e(2),e(3),e(8)],(o=typeof(i=function(s,l,d,u,h){"use strict";var p=e(1);function m(y){if(typeof WeakMap!="function")return null;var v=new WeakMap,w=new WeakMap;return(m=function(k){return k?w:v})(y)}Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0,l=p(l),d=p(d),u=p(u),h=function(y,v){if(!v&&y&&y.__esModule)return y;if(y===null||a(y)!=="object"&&typeof y!="function")return{default:y};var w=m(v);if(w&&w.has(y))return w.get(y);var k={},c=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var _ in y)if(_!=="default"&&Object.prototype.hasOwnProperty.call(y,_)){var g=c?Object.getOwnPropertyDescriptor(y,_):null;g&&(g.get||g.set)?Object.defineProperty(k,_,g):k[_]=y[_]}return k.default=y,w&&w.set(y,k),k}(h);var x=function(){function y(){(0,d.default)(this,y)}return(0,u.default)(y,null,[{key:"isSingleTag",value:function(v){return v.tagName&&["AREA","BASE","BR","COL","COMMAND","EMBED","HR","IMG","INPUT","KEYGEN","LINK","META","PARAM","SOURCE","TRACK","WBR"].includes(v.tagName)}},{key:"isLineBreakTag",value:function(v){return v&&v.tagName&&["BR","WBR"].includes(v.tagName)}},{key:"make",value:function(v){var w,k=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null,c=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},_=document.createElement(v);for(var g in Array.isArray(k)?(w=_.classList).add.apply(w,(0,l.default)(k)):k&&_.classList.add(k),c)Object.prototype.hasOwnProperty.call(c,g)&&(_[g]=c[g]);return _}},{key:"text",value:function(v){return document.createTextNode(v)}},{key:"append",value:function(v,w){Array.isArray(w)?w.forEach(function(k){return v.appendChild(k)}):v.appendChild(w)}},{key:"prepend",value:function(v,w){Array.isArray(w)?(w=w.reverse()).forEach(function(k){return v.prepend(k)}):v.prepend(w)}},{key:"swap",value:function(v,w){var k=document.createElement("div"),c=v.parentNode;c.insertBefore(k,v),c.insertBefore(v,w),c.insertBefore(w,k),c.removeChild(k)}},{key:"find",value:function(){var v=arguments.length>0&&arguments[0]!==void 0?arguments[0]:document,w=arguments.length>1?arguments[1]:void 0;return v.querySelector(w)}},{key:"get",value:function(v){return document.getElementById(v)}},{key:"findAll",value:function(){var v=arguments.length>0&&arguments[0]!==void 0?arguments[0]:document,w=arguments.length>1?arguments[1]:void 0;return v.querySelectorAll(w)}},{key:"allInputsSelector",get:function(){return"[contenteditable=true], textarea, input:not([type]), "+["text","password","email","number","search","tel","url"].map(function(v){return'input[type="'.concat(v,'"]')}).join(", ")}},{key:"findAllInputs",value:function(v){return h.array(v.querySelectorAll(y.allInputsSelector)).reduce(function(w,k){return y.isNativeInput(k)||y.containsOnlyInlineElements(k)?[].concat((0,l.default)(w),[k]):[].concat((0,l.default)(w),(0,l.default)(y.getDeepestBlockElements(k)))},[])}},{key:"getDeepestNode",value:function(v){var w=arguments.length>1&&arguments[1]!==void 0&&arguments[1],k=w?"lastChild":"firstChild",c=w?"previousSibling":"nextSibling";if(v&&v.nodeType===Node.ELEMENT_NODE&&v[k]){var _=v[k];if(y.isSingleTag(_)&&!y.isNativeInput(_)&&!y.isLineBreakTag(_))if(_[c])_=_[c];else{if(!_.parentNode[c])return _.parentNode;_=_.parentNode[c]}return this.getDeepestNode(_,w)}return v}},{key:"isElement",value:function(v){return!h.isNumber(v)&&v&&v.nodeType&&v.nodeType===Node.ELEMENT_NODE}},{key:"isFragment",value:function(v){return!h.isNumber(v)&&v&&v.nodeType&&v.nodeType===Node.DOCUMENT_FRAGMENT_NODE}},{key:"isContentEditable",value:function(v){return v.contentEditable==="true"}},{key:"isNativeInput",value:function(v){return!(!v||!v.tagName)&&["INPUT","TEXTAREA"].includes(v.tagName)}},{key:"canSetCaret",value:function(v){var w=!0;if(y.isNativeInput(v))switch(v.type){case"file":case"checkbox":case"radio":case"hidden":case"submit":case"button":case"image":case"reset":w=!1}else w=y.isContentEditable(v);return w}},{key:"isNodeEmpty",value:function(v){return!(this.isSingleTag(v)&&!this.isLineBreakTag(v))&&(this.isElement(v)&&this.isNativeInput(v)?v.value:v.textContent.replace("\u200B","")).trim().length===0}},{key:"isLeaf",value:function(v){return!!v&&v.childNodes.length===0}},{key:"isEmpty",value:function(v){v.normalize();for(var w=[v];w.length>0;)if(v=w.shift()){if(this.isLeaf(v)&&!this.isNodeEmpty(v))return!1;v.childNodes&&w.push.apply(w,(0,l.default)(Array.from(v.childNodes)))}return!0}},{key:"isHTMLString",value:function(v){var w=y.make("div");return w.innerHTML=v,w.childElementCount>0}},{key:"getContentLength",value:function(v){return y.isNativeInput(v)?v.value.length:v.nodeType===Node.TEXT_NODE?v.length:v.textContent.length}},{key:"blockElements",get:function(){return["address","article","aside","blockquote","canvas","div","dl","dt","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","header","hgroup","hr","li","main","nav","noscript","ol","output","p","pre","ruby","section","table","tbody","thead","tr","tfoot","ul","video"]}},{key:"containsOnlyInlineElements",value:function(v){var w;return h.isString(v)?(w=document.createElement("div")).innerHTML=v:w=v,Array.from(w.children).every(function k(c){return!y.blockElements.includes(c.tagName.toLowerCase())&&Array.from(c.children).every(k)})}},{key:"getDeepestBlockElements",value:function(v){return y.containsOnlyInlineElements(v)?[v]:Array.from(v.children).reduce(function(w,k){return[].concat((0,l.default)(w),(0,l.default)(y.getDeepestBlockElements(k)))},[])}},{key:"getHolder",value:function(v){return h.isString(v)?document.getElementById(v):v}},{key:"isExtensionNode",value:function(v){return v&&["GRAMMARLY-EXTENSION"].includes(v.nodeName)}},{key:"isAnchor",value:function(v){return v.tagName.toLowerCase()==="a"}},{key:"offset",value:function(v){var w=v.getBoundingClientRect(),k=window.pageXOffset||document.documentElement.scrollLeft,c=window.pageYOffset||document.documentElement.scrollTop,_=w.top+c,g=w.left+k;return{top:_,left:g,bottom:_+w.height,right:g+w.width}}}]),y}();s.default=x,x.displayName="Dom",r.exports=t.default})=="function"?i.apply(t,n):i)===void 0||(r.exports=o)},function(r,t,e){var i=e(368)();r.exports=i;try{regeneratorRuntime=i}catch(n){typeof globalThis=="object"?globalThis.regeneratorRuntime=i:Function("r","regeneratorRuntime = r")(i)}},function(r,t){function e(i,n,o,a,s,l,d){try{var u=i[l](d),h=u.value}catch(p){return void o(p)}u.done?n(h):Promise.resolve(h).then(a,s)}r.exports=function(i){return function(){var n=this,o=arguments;return new Promise(function(a,s){var l=i.apply(n,o);function d(h){e(l,a,s,d,u,"next",h)}function u(h){e(l,a,s,d,u,"throw",h)}d(void 0)})}},r.exports.__esModule=!0,r.exports.default=r.exports},function(r,t,e){var i=e(38);r.exports=function(n){return Object(i(n))}},function(r,t,e){var i=e(10),n=e(27),o=e(26),a=e(45)("src"),s=e(192),l=(""+s).split("toString");e(16).inspectSource=function(d){return s.call(d)},(r.exports=function(d,u,h,p){var m=typeof h=="function";m&&(o(h,"name")||n(h,"name",u)),d[u]!==h&&(m&&(o(h,a)||n(h,a,d[u]?""+d[u]:l.join(String(u)))),d===i?d[u]=h:p?d[u]?d[u]=h:n(d,u,h):(delete d[u],n(d,u,h)))})(Function.prototype,"toString",function(){return typeof this=="function"&&this[a]||s.call(this)})},function(r,t,e){var i=e(0),n=e(11),o=e(38),a=/"/g,s=function(l,d,u,h){var p=String(o(l)),m="<"+d;return u!==""&&(m+=" "+u+'="'+String(h).replace(a,"&quot;")+'"'),m+">"+p+"</"+d+">"};r.exports=function(l,d){var u={};u[l]=d(s),i(i.P+i.F*n(function(){var h=""[l]('"');return h!==h.toLowerCase()||h.split('"').length>3}),"String",u)}},function(r,t,e){var i,n,o,a=e(7);n=[t,e(2),e(3),e(8),e(19)],(o=typeof(i=function(s,l,d,u,h){"use strict";var p=e(1);function m(y){if(typeof WeakMap!="function")return null;var v=new WeakMap,w=new WeakMap;return(m=function(k){return k?w:v})(y)}Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0,l=p(l),d=p(d),u=function(y,v){if(!v&&y&&y.__esModule)return y;if(y===null||a(y)!=="object"&&typeof y!="function")return{default:y};var w=m(v);if(w&&w.has(y))return w.get(y);var k={},c=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var _ in y)if(_!=="default"&&Object.prototype.hasOwnProperty.call(y,_)){var g=c?Object.getOwnPropertyDescriptor(y,_):null;g&&(g.get||g.set)?Object.defineProperty(k,_,g):k[_]=y[_]}return k.default=y,w&&w.set(y,k),k}(u),h=p(h);var x=function(){function y(){(0,l.default)(this,y),this.instance=null,this.selection=null,this.savedSelectionRange=null,this.isFakeBackgroundEnabled=!1,this.commandBackground="backColor",this.commandRemoveFormat="removeFormat"}return(0,d.default)(y,[{key:"removeFakeBackground",value:function(){this.isFakeBackgroundEnabled&&(this.isFakeBackgroundEnabled=!1,document.execCommand(this.commandRemoveFormat))}},{key:"setFakeBackground",value:function(){document.execCommand(this.commandBackground,!1,"#a8d6ff"),this.isFakeBackgroundEnabled=!0}},{key:"save",value:function(){this.savedSelectionRange=y.range}},{key:"restore",value:function(){if(this.savedSelectionRange){var v=window.getSelection();v.removeAllRanges(),v.addRange(this.savedSelectionRange)}}},{key:"clearSaved",value:function(){this.savedSelectionRange=null}},{key:"collapseToEnd",value:function(){var v=window.getSelection(),w=document.createRange();w.selectNodeContents(v.focusNode),w.collapse(!1),v.removeAllRanges(),v.addRange(w)}},{key:"findParentTag",value:function(v,w){var k=arguments.length>2&&arguments[2]!==void 0?arguments[2]:10,c=window.getSelection(),_=null;if(!c||!c.anchorNode||!c.focusNode)return null;var g=[c.anchorNode,c.focusNode];return g.forEach(function(b){for(var E=k;E>0&&b.parentNode&&(b.tagName!==v||(_=b,w&&b.classList&&!b.classList.contains(w)&&(_=null),!_));)b=b.parentNode,E--}),_}},{key:"expandToTag",value:function(v){var w=window.getSelection();w.removeAllRanges();var k=document.createRange();k.selectNodeContents(v),w.addRange(k)}}],[{key:"CSS",get:function(){return{editorWrapper:"codex-editor",editorZone:"codex-editor__redactor"}}},{key:"anchorNode",get:function(){var v=window.getSelection();return v?v.anchorNode:null}},{key:"anchorElement",get:function(){var v=window.getSelection();if(!v)return null;var w=v.anchorNode;return w?h.default.isElement(w)?w:w.parentElement:null}},{key:"anchorOffset",get:function(){var v=window.getSelection();return v?v.anchorOffset:null}},{key:"isCollapsed",get:function(){var v=window.getSelection();return v?v.isCollapsed:null}},{key:"isAtEditor",get:function(){return this.isSelectionAtEditor(y.get())}},{key:"isSelectionAtEditor",value:function(v){if(!v)return!1;var w=v.anchorNode||v.focusNode;w&&w.nodeType===Node.TEXT_NODE&&(w=w.parentNode);var k=null;return w&&w instanceof Element&&(k=w.closest(".".concat(y.CSS.editorZone))),!!k&&k.nodeType===Node.ELEMENT_NODE}},{key:"isRangeAtEditor",value:function(v){if(v){var w=v.startContainer;w&&w.nodeType===Node.TEXT_NODE&&(w=w.parentNode);var k=null;return w&&w instanceof Element&&(k=w.closest(".".concat(y.CSS.editorZone))),!!k&&k.nodeType===Node.ELEMENT_NODE}}},{key:"isSelectionExists",get:function(){return!!y.get().anchorNode}},{key:"range",get:function(){return this.getRangeFromSelection(this.get())}},{key:"getRangeFromSelection",value:function(v){return v&&v.rangeCount?v.getRangeAt(0):null}},{key:"rect",get:function(){var v,w=document.selection,k={x:0,y:0,width:0,height:0};if(w&&w.type!=="Control")return v=(w=w).createRange(),k.x=v.boundingLeft,k.y=v.boundingTop,k.width=v.boundingWidth,k.height=v.boundingHeight,k;if(!window.getSelection)return u.log("Method window.getSelection is not supported","warn"),k;if((w=window.getSelection()).rangeCount===null||isNaN(w.rangeCount))return u.log("Method SelectionUtils.rangeCount is not supported","warn"),k;if(w.rangeCount===0)return k;if((v=w.getRangeAt(0).cloneRange()).getBoundingClientRect&&(k=v.getBoundingClientRect()),k.x===0&&k.y===0){var c=document.createElement("span");if(c.getBoundingClientRect){c.appendChild(document.createTextNode("\u200B")),v.insertNode(c),k=c.getBoundingClientRect();var _=c.parentNode;_.removeChild(c),_.normalize()}}return k}},{key:"text",get:function(){return window.getSelection?window.getSelection().toString():""}},{key:"get",value:function(){return window.getSelection()}},{key:"setCursor",value:function(v){var w=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,k=document.createRange(),c=window.getSelection();return h.default.isNativeInput(v)?h.default.canSetCaret(v)?(v.focus(),v.selectionStart=v.selectionEnd=w,v.getBoundingClientRect()):void 0:(k.setStart(v,w),k.setEnd(v,w),c.removeAllRanges(),c.addRange(k),k.getBoundingClientRect())}},{key:"addFakeCursor",value:function(v){var w=y.range,k=h.default.make("span","codex-editor__fake-cursor");k.dataset.mutationFree="true",!w||v&&!v.contains(w.startContainer)||(w.collapse(),w.insertNode(k))}},{key:"removeFakeCursor",value:function(){var v=arguments.length>0&&arguments[0]!==void 0?arguments[0]:document.body,w=h.default.find(v,".codex-editor__fake-cursor");w&&w.remove()}}]),y}();s.default=x,x.displayName="SelectionUtils",r.exports=t.default})=="function"?i.apply(t,n):i)===void 0||(r.exports=o)},function(r,t){var e={}.hasOwnProperty;r.exports=function(i,n){return e.call(i,n)}},function(r,t,e){var i=e(18),n=e(44);r.exports=e(17)?function(o,a,s){return i.f(o,a,n(1,s))}:function(o,a,s){return o[a]=s,o}},function(r,t,e){var i=e(62),n=e(38);r.exports=function(o){return i(n(o))}},function(r,t,e){"use strict";var i=e(11);r.exports=function(n,o){return!!n&&i(function(){o?n.call(null,function(){},1):n.call(null)})}},function(r,t,e){var i=e(362),n=e(363),o=e(148),a=e(364);r.exports=function(s,l){return i(s)||n(s,l)||o(s,l)||a()},r.exports.__esModule=!0,r.exports.default=r.exports},function(r,t,e){var i=e(32);r.exports=function(n,o,a){if(i(n),o===void 0)return n;switch(a){case 1:return function(s){return n.call(o,s)};case 2:return function(s,l){return n.call(o,s,l)};case 3:return function(s,l,d){return n.call(o,s,l,d)}}return function(){return n.apply(o,arguments)}}},function(r,t){r.exports=function(e){if(typeof e!="function")throw TypeError(e+" is not a function!");return e}},function(r,t){var e=Math.ceil,i=Math.floor;r.exports=function(n){return isNaN(n=+n)?0:(n>0?i:e)(n)}},function(r,t,e){var i=e(63),n=e(44),o=e(28),a=e(42),s=e(26),l=e(117),d=Object.getOwnPropertyDescriptor;t.f=e(17)?d:function(u,h){if(u=o(u),h=a(h,!0),l)try{return d(u,h)}catch(p){}if(s(u,h))return n(!i.f.call(u,h),u[h])}},function(r,t,e){var i=e(0),n=e(16),o=e(11);r.exports=function(a,s){var l=(n.Object||{})[a]||Object[a],d={};d[a]=s(l),i(i.S+i.F*o(function(){l(1)}),"Object",d)}},function(r,t,e){var i=e(31),n=e(62),o=e(22),a=e(15),s=e(133);r.exports=function(l,d){var u=l==1,h=l==2,p=l==3,m=l==4,x=l==6,y=l==5||x,v=d||s;return function(w,k,c){for(var _,g,b=o(w),E=n(b),T=i(k,c,3),C=a(E.length),S=0,A=u?v(w,C):h?v(w,0):void 0;C>S;S++)if((y||S in E)&&(g=T(_=E[S],S,b),l)){if(u)A[S]=g;else if(g)switch(l){case 3:return!0;case 5:return _;case 6:return S;case 2:A.push(_)}else if(m)return!1}return x?-1:p||m?m:A}}},function(r,t){var e={}.toString;r.exports=function(i){return e.call(i).slice(8,-1)}},function(r,t){r.exports=function(e){if(e==null)throw TypeError("Can't call method on  "+e);return e}},function(r,t,e){"use strict";if(e(17)){var i=e(46),n=e(10),o=e(11),a=e(0),s=e(81),l=e(110),d=e(31),u=e(59),h=e(44),p=e(27),m=e(60),x=e(33),y=e(15),v=e(144),w=e(48),k=e(42),c=e(26),_=e(64),g=e(13),b=e(22),E=e(102),T=e(49),C=e(51),S=e(50).f,A=e(104),L=e(45),B=e(14),P=e(36),M=e(71),O=e(65),I=e(106),j=e(57),H=e(74),N=e(58),D=e(105),K=e(135),q=e(18),U=e(34),G=q.f,Q=U.f,X=n.RangeError,ie=n.TypeError,ue=n.Uint8Array,fe=Array.prototype,be=l.ArrayBuffer,Se=l.DataView,le=P(0),ke=P(2),Re=P(3),Me=P(4),Ne=P(5),et=P(6),Ke=M(!0),Je=M(!1),Ue=I.values,nt=I.keys,Ze=I.entries,de=fe.lastIndexOf,ye=fe.reduce,Ie=fe.reduceRight,Fe=fe.join,it=fe.sort,ht=fe.slice,_t=fe.toString,Pe=fe.toLocaleString,yt=B("iterator"),Ut=B("toStringTag"),zt=L("typed_constructor"),Ge=L("def_constructor"),Xe=s.CONSTR,tt=s.TYPED,qe=s.VIEW,er=P(1,function(Ae,Ee){return rr(O(Ae,Ae[Ge]),Ee)}),dt=o(function(){return new ue(new Uint16Array([1]).buffer)[0]===1}),je=!!ue&&!!ue.prototype.set&&o(function(){new ue(1).set({})}),tr=function(Ae,Ee){var ze=x(Ae);if(ze<0||ze%Ee)throw X("Wrong offset!");return ze},rt=function(Ae){if(g(Ae)&&tt in Ae)return Ae;throw ie(Ae+" is not a typed array!")},rr=function(Ae,Ee){if(!g(Ae)||!(zt in Ae))throw ie("It is not a typed array constructor!");return new Ae(Ee)},It=function(Ae,Ee){return dr(O(Ae,Ae[Ge]),Ee)},dr=function(Ae,Ee){for(var ze=0,V=Ee.length,ee=rr(Ae,V);V>ze;)ee[ze]=Ee[ze++];return ee},pt=function(Ae,Ee,ze){G(Ae,Ee,{get:function(){return this._d[ze]}})},Bt=function(Ae){var Ee,ze,V,ee,ne,he,ce=b(Ae),Ce=arguments.length,Te=Ce>1?arguments[1]:void 0,Be=Te!==void 0,Oe=A(ce);if(Oe!=null&&!E(Oe)){for(he=Oe.call(ce),V=[],Ee=0;!(ne=he.next()).done;Ee++)V.push(ne.value);ce=V}for(Be&&Ce>2&&(Te=d(Te,arguments[2],2)),Ee=0,ze=y(ce.length),ee=rr(this,ze);ze>Ee;Ee++)ee[Ee]=Be?Te(ce[Ee],Ee):ce[Ee];return ee},Xt=function(){for(var Ae=0,Ee=arguments.length,ze=rr(this,Ee);Ee>Ae;)ze[Ae]=arguments[Ae++];return ze},xr=!!ue&&o(function(){Pe.call(new ue(1))}),Pt=function(){return Pe.apply(xr?ht.call(rt(this)):rt(this),arguments)},ir={copyWithin:function(Ae,Ee){return K.call(rt(this),Ae,Ee,arguments.length>2?arguments[2]:void 0)},every:function(Ae){return Me(rt(this),Ae,arguments.length>1?arguments[1]:void 0)},fill:function(Ae){return D.apply(rt(this),arguments)},filter:function(Ae){return It(this,ke(rt(this),Ae,arguments.length>1?arguments[1]:void 0))},find:function(Ae){return Ne(rt(this),Ae,arguments.length>1?arguments[1]:void 0)},findIndex:function(Ae){return et(rt(this),Ae,arguments.length>1?arguments[1]:void 0)},forEach:function(Ae){le(rt(this),Ae,arguments.length>1?arguments[1]:void 0)},indexOf:function(Ae){return Je(rt(this),Ae,arguments.length>1?arguments[1]:void 0)},includes:function(Ae){return Ke(rt(this),Ae,arguments.length>1?arguments[1]:void 0)},join:function(Ae){return Fe.apply(rt(this),arguments)},lastIndexOf:function(Ae){return de.apply(rt(this),arguments)},map:function(Ae){return er(rt(this),Ae,arguments.length>1?arguments[1]:void 0)},reduce:function(Ae){return ye.apply(rt(this),arguments)},reduceRight:function(Ae){return Ie.apply(rt(this),arguments)},reverse:function(){for(var Ae,Ee=rt(this).length,ze=Math.floor(Ee/2),V=0;V<ze;)Ae=this[V],this[V++]=this[--Ee],this[Ee]=Ae;return this},some:function(Ae){return Re(rt(this),Ae,arguments.length>1?arguments[1]:void 0)},sort:function(Ae){return it.call(rt(this),Ae)},subarray:function(Ae,Ee){var ze=rt(this),V=ze.length,ee=w(Ae,V);return new(O(ze,ze[Ge]))(ze.buffer,ze.byteOffset+ee*ze.BYTES_PER_ELEMENT,y((Ee===void 0?V:w(Ee,V))-ee))}},Nt=function(Ae,Ee){return It(this,ht.call(rt(this),Ae,Ee))},hr=function(Ae){rt(this);var Ee=tr(arguments[1],1),ze=this.length,V=b(Ae),ee=y(V.length),ne=0;if(ee+Ee>ze)throw X("Wrong length!");for(;ne<ee;)this[Ee+ne]=V[ne++]},Kt={entries:function(){return Ze.call(rt(this))},keys:function(){return nt.call(rt(this))},values:function(){return Ue.call(rt(this))}},nr=function(Ae,Ee){return g(Ae)&&Ae[tt]&&typeof Ee!="symbol"&&Ee in Ae&&String(+Ee)==String(Ee)},Et=function(Ae,Ee){return nr(Ae,Ee=k(Ee,!0))?h(2,Ae[Ee]):Q(Ae,Ee)},At=function(Ae,Ee,ze){return!(nr(Ae,Ee=k(Ee,!0))&&g(ze)&&c(ze,"value"))||c(ze,"get")||c(ze,"set")||ze.configurable||c(ze,"writable")&&!ze.writable||c(ze,"enumerable")&&!ze.enumerable?G(Ae,Ee,ze):(Ae[Ee]=ze.value,Ae)};Xe||(U.f=Et,q.f=At),a(a.S+a.F*!Xe,"Object",{getOwnPropertyDescriptor:Et,defineProperty:At}),o(function(){_t.call({})})&&(_t=Pe=function(){return Fe.call(this)});var wt=m({},ir);m(wt,Kt),p(wt,yt,Kt.values),m(wt,{slice:Nt,set:hr,constructor:function(){},toString:_t,toLocaleString:Pt}),pt(wt,"buffer","b"),pt(wt,"byteOffset","o"),pt(wt,"byteLength","l"),pt(wt,"length","e"),G(wt,Ut,{get:function(){return this[tt]}}),r.exports=function(Ae,Ee,ze,V){var ee=Ae+((V=!!V)?"Clamped":"")+"Array",ne="get"+Ae,he="set"+Ae,ce=n[ee],Ce=ce||{},Te=ce&&C(ce),Be=!ce||!s.ABV,Oe={},$e=ce&&ce.prototype,Ve=function(Qe,We){G(Qe,We,{get:function(){return function(Ot,Mt){var xt=Ot._d;return xt.v[ne](Mt*Ee+xt.o,dt)}(this,We)},set:function(Ot){return function(Mt,xt,St){var Y=Mt._d;V&&(St=(St=Math.round(St))<0?0:St>255?255:255&St),Y.v[he](xt*Ee+Y.o,St,dt)}(this,We,Ot)},enumerable:!0})};Be?(ce=ze(function(Qe,We,Ot,Mt){u(Qe,ce,ee,"_d");var xt,St,Y,oe,Z=0,ae=0;if(g(We)){if(!(We instanceof be||(oe=_(We))=="ArrayBuffer"||oe=="SharedArrayBuffer"))return tt in We?dr(ce,We):Bt.call(ce,We);xt=We,ae=tr(Ot,Ee);var W=We.byteLength;if(Mt===void 0){if(W%Ee||(St=W-ae)<0)throw X("Wrong length!")}else if((St=y(Mt)*Ee)+ae>W)throw X("Wrong length!");Y=St/Ee}else Y=v(We),xt=new be(St=Y*Ee);for(p(Qe,"_d",{b:xt,o:ae,l:St,e:Y,v:new Se(xt)});Z<Y;)Ve(Qe,Z++)}),$e=ce.prototype=T(wt),p($e,"constructor",ce)):o(function(){ce(1)})&&o(function(){new ce(-1)})&&H(function(Qe){new ce,new ce(null),new ce(1.5),new ce(Qe)},!0)||(ce=ze(function(Qe,We,Ot,Mt){var xt;return u(Qe,ce,ee),g(We)?We instanceof be||(xt=_(We))=="ArrayBuffer"||xt=="SharedArrayBuffer"?Mt!==void 0?new Ce(We,tr(Ot,Ee),Mt):Ot!==void 0?new Ce(We,tr(Ot,Ee)):new Ce(We):tt in We?dr(ce,We):Bt.call(ce,We):new Ce(v(We))}),le(Te!==Function.prototype?S(Ce).concat(S(Te)):S(Ce),function(Qe){Qe in ce||p(ce,Qe,Ce[Qe])}),ce.prototype=$e,i||($e.constructor=ce));var He=$e[yt],ot=!!He&&(He.name=="values"||He.name==null),vt=Kt.values;p(ce,zt,!0),p($e,tt,ee),p($e,qe,!0),p($e,Ge,ce),(V?new ce(1)[Ut]==ee:Ut in $e)||G($e,Ut,{get:function(){return ee}}),Oe[ee]=ce,a(a.G+a.W+a.F*(ce!=Ce),Oe),a(a.S,ee,{BYTES_PER_ELEMENT:Ee}),a(a.S+a.F*o(function(){Ce.of.call(ce,1)}),ee,{from:Bt,of:Xt}),"BYTES_PER_ELEMENT"in $e||p($e,"BYTES_PER_ELEMENT",Ee),a(a.P,ee,ir),N(ee),a(a.P+a.F*je,ee,{set:hr}),a(a.P+a.F*!ot,ee,Kt),i||$e.toString==_t||($e.toString=_t),a(a.P+a.F*o(function(){new ce(1).slice()}),ee,{slice:Nt}),a(a.P+a.F*(o(function(){return[1,2].toLocaleString()!=new ce([1,2]).toLocaleString()})||!o(function(){$e.toLocaleString.call([1,2])})),ee,{toLocaleString:Pt}),j[ee]=ot?He:vt,i||ot||p($e,yt,vt)}}else r.exports=function(){}},function(r,t,e){var i=e(369),n=e(370),o=e(148),a=e(371);r.exports=function(s){return i(s)||n(s)||o(s)||a()},r.exports.__esModule=!0,r.exports.default=r.exports},function(r,t,e){"use strict";e.r(t),e.d(t,"IconAddBackground",function(){return d}),e.d(t,"IconAddBorder",function(){return u}),e.d(t,"IconAlignCenter",function(){return h}),e.d(t,"IconAlignJustify",function(){return p}),e.d(t,"IconAlignLeft",function(){return m}),e.d(t,"IconAlignRight",function(){return x}),e.d(t,"IconBold",function(){return y}),e.d(t,"IconBrackets",function(){return v}),e.d(t,"IconChecklist",function(){return w}),e.d(t,"IconChevronDown",function(){return k}),e.d(t,"IconChevronLeft",function(){return c}),e.d(t,"IconChevronRight",function(){return _}),e.d(t,"IconChevronUp",function(){return g}),e.d(t,"IconClipboard",function(){return b}),e.d(t,"IconCode",function(){return E}),e.d(t,"IconCollapse",function(){return T}),e.d(t,"IconColor",function(){return C}),e.d(t,"IconCopy",function(){return S}),e.d(t,"IconCross",function(){return A}),e.d(t,"IconCurlyBrackets",function(){return L}),e.d(t,"IconDelimiter",function(){return B}),e.d(t,"IconDirectionDownRight",function(){return P}),e.d(t,"IconDirectionLeftDown",function(){return M}),e.d(t,"IconDirectionRightDown",function(){return O}),e.d(t,"IconDirectionUpRight",function(){return I}),e.d(t,"IconEtcHorisontal",function(){return j}),e.d(t,"IconEtcVertical",function(){return H}),e.d(t,"IconFile",function(){return N}),e.d(t,"IconGift",function(){return D}),e.d(t,"IconH1",function(){return i}),e.d(t,"IconH2",function(){return n}),e.d(t,"IconH3",function(){return o}),e.d(t,"IconH4",function(){return a}),e.d(t,"IconH5",function(){return s}),e.d(t,"IconH6",function(){return l}),e.d(t,"IconHeart",function(){return K}),e.d(t,"IconHidden",function(){return q}),e.d(t,"IconHtml",function(){return U}),e.d(t,"IconInlineCode",function(){return G}),e.d(t,"IconItalic",function(){return Q}),e.d(t,"IconLink",function(){return X}),e.d(t,"IconListBulleted",function(){return ie}),e.d(t,"IconListNumbered",function(){return ue}),e.d(t,"IconMarker",function(){return fe}),e.d(t,"IconMenu",function(){return be}),e.d(t,"IconPicture",function(){return Se}),e.d(t,"IconPlay",function(){return le}),e.d(t,"IconPlus",function(){return ke}),e.d(t,"IconQuote",function(){return Re}),e.d(t,"IconRedo",function(){return Me}),e.d(t,"IconRemoveBackground",function(){return Ne}),e.d(t,"IconReplace",function(){return et}),e.d(t,"IconSearch",function(){return Ke}),e.d(t,"IconStar",function(){return Je}),e.d(t,"IconStretch",function(){return Ue}),e.d(t,"IconTable",function(){return de}),e.d(t,"IconTableWithHeadings",function(){return nt}),e.d(t,"IconTableWithoutHeadings",function(){return Ze}),e.d(t,"IconText",function(){return ye}),e.d(t,"IconTrash",function(){return Ie}),e.d(t,"IconUndo",function(){return Fe}),e.d(t,"IconUnlink",function(){return it}),e.d(t,"IconUser",function(){return ht}),e.d(t,"IconUsersGroup",function(){return _t}),e.d(t,"IconWarning",function(){return Pe});let i='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M6 7L6 12M6 17L6 12M6 12L12 12M12 7V12M12 17L12 12"/><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M19 17V10.2135C19 10.1287 18.9011 10.0824 18.836 10.1367L16 12.5"/></svg>',n='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M6 7L6 12M6 17L6 12M6 12L12 12M12 7V12M12 17L12 12"/><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M16 11C16 10 19 9.5 19 12C19 13.9771 16.0684 13.9997 16.0012 16.8981C15.9999 16.9533 16.0448 17 16.1 17L19.3 17"/></svg>',o='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M6 7L6 12M6 17L6 12M6 12L12 12M12 7V12M12 17L12 12"/><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M16 11C16 10.5 16.8323 10 17.6 10C18.3677 10 19.5 10.311 19.5 11.5C19.5 12.5315 18.7474 12.9022 18.548 12.9823C18.5378 12.9864 18.5395 13.0047 18.5503 13.0063C18.8115 13.0456 20 13.3065 20 14.8C20 16 19.5 17 17.8 17C17.8 17 16 17 16 16.3"/></svg>',a='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M6 7L6 12M6 17L6 12M6 12L12 12M12 7V12M12 17L12 12"/><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M18 10L15.2834 14.8511C15.246 14.9178 15.294 15 15.3704 15C16.849 15 18.7561 15 20.2 15M19 17C19 15.7187 19 14.8813 19 13.6"/></svg>',s='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M6 7L6 12M6 17L6 12M6 12L12 12M12 7V12M12 17L12 12"/><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M16 15.9C16 15.9 16.3768 17 17.8 17C19.5 17 20 15.6199 20 14.7C20 12.7323 17.6745 12.0486 16.1635 12.9894C16.094 13.0327 16 12.9846 16 12.9027V10.1C16 10.0448 16.0448 10 16.1 10H19.8"/></svg>',l='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M6 7L6 12M6 17L6 12M6 12L12 12M12 7V12M12 17L12 12"/><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M19.5 10C16.5 10.5 16 13.3285 16 15M16 15V15C16 16.1046 16.8954 17 18 17H18.3246C19.3251 17 20.3191 16.3492 20.2522 15.3509C20.0612 12.4958 16 12.6611 16 15Z"/></svg>',d='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11 19V19C9.13623 19 8.20435 19 7.46927 18.6955C6.48915 18.2895 5.71046 17.5108 5.30448 16.5307C5 15.7956 5 14.8638 5 13V12C5 9.19108 5 7.78661 5.67412 6.77772C5.96596 6.34096 6.34096 5.96596 6.77772 5.67412C7.78661 5 9.19108 5 12 5H13.5C14.8956 5 15.5933 5 16.1611 5.17224C17.4395 5.56004 18.44 6.56046 18.8278 7.83886C19 8.40666 19 9.10444 19 10.5V10.5"/><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M16 13V16M16 19V16M19 16H16M16 16H13"/><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6.5 17.5L17.5 6.5"/><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M18.9919 10.5H19.0015"/><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10.9919 19H11.0015"/><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13L13 5"/></svg>',u='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path fill="currentColor" d="M14.625 4C14.0727 4 13.625 4.44772 13.625 5C13.625 5.55228 14.0727 6 14.625 6V4ZM18 9.375C18 9.92728 18.4477 10.375 19 10.375C19.5523 10.375 20 9.92728 20 9.375H18ZM9 6H9.375V4H9V6ZM14.625 6H15V4H14.625V6ZM9.375 18H9V20H9.375V18ZM6 9.375V9H4V9.375H6ZM6 15V14.625H4V15H6ZM18 9V9.375H20V9H18ZM9 18C7.34315 18 6 16.6569 6 15H4C4 17.7614 6.23858 20 9 20V18ZM15 6C16.6569 6 18 7.34315 18 9H20C20 6.23858 17.7614 4 15 4V6ZM9 4C6.23858 4 4 6.23858 4 9H6C6 7.34315 7.34315 6 9 6V4Z"/><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M18.9919 9.5H19.0015"/><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9.3725 5H9.38207"/><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M14.5 5H14.5096"/><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9.3725 19H9.38207"/><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 9.5H5.00957"/><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 14.55H5.00957"/><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M16 13V16M16 19V16M19 16H16M16 16H13"/></svg>',h='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M18 7L6 7"/><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M18 17H6"/><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M16 12L8 12"/></svg>',p='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M18 7L6 7"/><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M18 17H6"/><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M18 12L6 12"/></svg>',m='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M17 7L5 7"/><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M17 17H5"/><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M13 12L5 12"/></svg>',x='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M19 7L7 7"/><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M19 17H7"/><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M19 12L11 12"/></svg>',y='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M9 12L9 7.1C9 7.04477 9.04477 7 9.1 7H10.4C11.5 7 14 7.1 14 9.5C14 9.5 14 12 11 12M9 12V16.8C9 16.9105 9.08954 17 9.2 17H12.5C14 17 15 16 15 14.5C15 11.7046 11 12 11 12M9 12H11"/></svg>',v='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 8L5 12L9 16"/><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 8L19 12L15 16"/></svg>',w='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M9.2 12L11.0586 13.8586C11.1367 13.9367 11.2633 13.9367 11.3414 13.8586L14.7 10.5"/><rect width="14" height="14" x="5" y="5" stroke="currentColor" stroke-width="2" rx="4"/></svg>',k='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M7 10L11.8586 14.8586C11.9367 14.9367 12.0633 14.9367 12.1414 14.8586L17 10"/></svg>',c='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M14.5 17.5L9.64142 12.6414C9.56331 12.5633 9.56331 12.4367 9.64142 12.3586L14.5 7.5"/></svg>',_='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M9.58284 17.5L14.4414 12.6414C14.5195 12.5633 14.5195 12.4367 14.4414 12.3586L9.58284 7.5"/></svg>',g='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M7 15L11.8586 10.1414C11.9367 10.0633 12.0633 10.0633 12.1414 10.1414L17 15"/></svg>',b='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9.42857 7H7.71429C7.25963 7 6.82359 7.15804 6.5021 7.43934C6.18061 7.72064 6 8.10218 6 8.5V17.5C6 17.8978 6.18061 18.2794 6.5021 18.5607C6.82359 18.842 7.25963 19 7.71429 19H16.2857C16.7404 19 17.1764 18.842 17.4979 18.5607C17.8194 18.2794 18 17.8978 18 17.5V8.5C18 8.10218 17.8194 7.72064 17.4979 7.43934C17.1764 7.15804 16.7404 7 16.2857 7H14.5714"/><rect width="5.15789" height="3.36842" x="9.42105" y="5" stroke="currentColor" stroke-width="2" rx="1.5"/></svg>',E='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-width="2" d="M15.078 5.62637L15.6153 4.78296L15.078 5.62637C15.4261 5.84808 15.7393 6.15354 16.5711 6.98528L17.2782 6.27817L16.5711 6.98528L17.5251 7.93934C17.8347 8.2489 17.9496 8.36494 18.0489 8.48177C18.5907 9.11982 18.9188 9.91178 18.9868 10.7461C18.9992 10.8989 19 11.0622 19 11.5V12C19 13.4166 18.9992 14.419 18.9352 15.2026C18.8721 15.9745 18.7527 16.4457 18.564 16.816C18.1805 17.5686 17.5686 18.1805 16.816 18.564C16.4457 18.7527 15.9745 18.8721 15.2026 18.9352C14.419 18.9992 13.4166 19 12 19C10.5834 19 9.58104 18.9992 8.79744 18.9352C8.02552 18.8721 7.55435 18.7527 7.18404 18.564C6.43139 18.1805 5.81947 17.5686 5.43597 16.816C5.24729 16.4457 5.12787 15.9745 5.0648 15.2026C5.00078 14.419 5 13.4166 5 12V11.7782C5 10.4673 5.00067 9.53987 5.05572 8.81299C5.10998 8.09655 5.21284 7.65673 5.37487 7.3093C5.77229 6.45718 6.45718 5.77229 7.3093 5.37487C7.65673 5.21284 8.09655 5.10998 8.81299 5.05572C9.53986 5.00067 10.4673 5 11.7782 5C12.9544 5 13.3919 5.00552 13.7948 5.09484C14.2503 5.19583 14.6846 5.37572 15.078 5.62637Z"/><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 15C13.1046 15 14 14.1046 14 13C14 11.8954 13.1046 11 12 11C10.8954 11 10 11.8954 10 13C10 14.1046 10.8954 15 12 15Z"/><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M14 5.5V7C14 7.55228 13.5523 8 13 8H11C10.4477 8 10 7.55228 10 7V5.2"/></svg>',T='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 9L10 12M10 12L7 15M10 12H4"/><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 9L14 12M14 12L17 15M14 12H20"/></svg>',C='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M4.36396 10.364H14.364"/><path fill="currentColor" d="M11.7071 11.2071C12.0976 10.8166 12.0976 10.1834 11.7071 9.79289C11.3166 9.40237 10.6834 9.40237 10.2929 9.79289L11.7071 11.2071ZM8.20711 14.7071L11.7071 11.2071L10.2929 9.79289L6.79289 13.2929L8.20711 14.7071Z"/><path stroke="currentColor" stroke-width="2" d="M5.12132 12.4853C3.94975 11.3137 3.94975 9.41421 5.12132 8.24264L8.65685 4.70711C9.04738 4.31658 9.68089 4.31693 10.0714 4.70745C11.909 6.54503 13.1829 7.81893 15.0205 9.65651C15.411 10.047 15.4113 10.6805 15.0208 11.0711L11.4853 14.6066C10.3137 15.7782 8.41421 15.7782 7.24264 14.6066L5.12132 12.4853Z"/><path stroke="currentColor" stroke-width="2" d="M19 16C19 16.8284 18.3284 17.5 17.5 17.5C16.6716 17.5 16 16.8284 16 16C16 15.634 16.218 15.0998 16.6897 14.4372C16.9337 14.0943 17.2151 13.7588 17.5 13.4449C17.7849 13.7588 18.0663 14.0943 18.3103 14.4372C18.782 15.0998 19 15.634 19 16Z"/></svg>',S='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17.25 8.5H10.25C9.2835 8.5 8.5 9.2835 8.5 10.25V17.25C8.5 18.2165 9.2835 19 10.25 19H17.25C18.2165 19 19 18.2165 19 17.25V10.25C19 9.2835 18.2165 8.5 17.25 8.5Z"/><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15.5 8.5V6.75C15.5 6.28587 15.3156 5.84075 14.9874 5.51256C14.6592 5.18437 14.2141 5 13.75 5H6.75C6.28587 5 5.84075 5.18437 5.51256 5.51256C5.18437 5.84075 5 6.28587 5 6.75V13.75C5 14.2141 5.18437 14.6592 5.51256 14.9874C5.84075 15.3156 6.28587 15.5 6.75 15.5H8.5"/><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 12L15.5 12"/><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 15.5L15.5 15.5"/></svg>',A='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M8 8L12 12M12 12L16 16M12 12L16 8M12 12L8 16"/></svg>',L='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 17C7 17 7 15.2536 7 13.5L5.5 12L7 10.5C7 8.74644 7 7 9 7"/><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 17C17 17 17 15.2536 17 13.5L18.5 12L17 10.5C17 8.74644 17 7 15 7"/></svg>',B='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M6.5 16L6.5 8M10 14L3 10M10 10L3 14"/><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M17.5 16L17.5 8M21 14L14 10M21 10L14 14"/></svg>',P='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M14.8833 9.16666L18.2167 12.5M18.2167 12.5L14.8833 15.8333M18.2167 12.5H10.05C9.16594 12.5 8.31809 12.1488 7.69297 11.5237C7.06785 10.8986 6.71666 10.0507 6.71666 9.16666"/></svg>',M='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M14.9167 14.9167L11.5833 18.25M11.5833 18.25L8.25 14.9167M11.5833 18.25L11.5833 10.0833C11.5833 9.19928 11.9345 8.35143 12.5596 7.72631C13.1848 7.10119 14.0326 6.75 14.9167 6.75"/></svg>',O='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9.13333 14.9167L12.4667 18.25M12.4667 18.25L15.8 14.9167M12.4667 18.25L12.4667 10.0833C12.4667 9.19928 12.1155 8.35143 11.4904 7.72631C10.8652 7.10119 10.0174 6.75 9.13333 6.75"/></svg>',I='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M14.8833 15.8333L18.2167 12.5M18.2167 12.5L14.8833 9.16667M18.2167 12.5L10.05 12.5C9.16595 12.5 8.31811 12.8512 7.69299 13.4763C7.06787 14.1014 6.71667 14.9493 6.71667 15.8333"/></svg>',j='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-width="2.6" d="M7.30499 11.995L7.30499 12.005M12.005 11.995V12.005M16.705 11.995L16.705 12.005"/></svg>',H='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-width="2.6" d="M12.01 7.29999H12"/><path stroke="currentColor" stroke-linecap="round" stroke-width="2.6" d="M12.01 12H12"/><path stroke="currentColor" stroke-linecap="round" stroke-width="2.6" d="M12.01 16.7H12"/></svg>',N='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13.3236 8.43554L9.49533 12.1908C9.13119 12.5505 8.93118 13.043 8.9393 13.5598C8.94741 14.0767 9.163 14.5757 9.53862 14.947C9.91424 15.3182 10.4191 15.5314 10.9422 15.5397C11.4653 15.5479 11.9637 15.3504 12.3279 14.9908L16.1562 11.2355C16.8845 10.5161 17.2845 9.53123 17.2682 8.4975C17.252 7.46376 16.8208 6.46583 16.0696 5.72324C15.3184 4.98066 14.3086 4.55425 13.2624 4.53782C12.2162 4.52138 11.2193 4.91627 10.4911 5.63562L6.66277 9.39093C5.57035 10.4699 4.97032 11.9473 4.99467 13.4979C5.01903 15.0485 5.66578 16.5454 6.79264 17.6592C7.9195 18.7731 9.43417 19.4127 11.0034 19.4374C12.5727 19.462 14.068 18.8697 15.1604 17.7907L18.9887 14.0354"/></svg>',D='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path fill="currentColor" fill-rule="evenodd" d="M13 18H16C16.5523 18 17 17.5523 17 17V15C17 14.4477 16.5523 14 16 14H13V18ZM11 12H8C6.34315 12 5 13.3431 5 15V17C5 18.6569 6.34315 20 8 20H16C17.6569 20 19 18.6569 19 17V15C19 13.3431 17.6569 12 16 12H13V9H11V12ZM11 14V18H8C7.44772 18 7 17.5523 7 17V15C7 14.4477 7.44772 14 8 14H11Z" clip-rule="evenodd"/><path stroke="currentColor" stroke-width="2" d="M5 11C5 9.89543 5.89543 9 7 9H17C18.1046 9 19 9.89543 19 11V11C19 12.1046 18.1046 13 17 13H7C5.89543 13 5 12.1046 5 11V11Z"/><path stroke="currentColor" stroke-width="2" d="M16 9C16 7.89543 16 6 14 6C12 6 12 7.89543 12 9C12 7.89543 12 6 10 6C8 6 8 7.89543 8 9"/></svg>',K='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-miterlimit="2.9238" stroke-width="2" d="M5.4694 7.85715C8.08167 3.67856 12 7.85716 12 7.85716C12 7.85716 15.9185 3.67859 18.5306 7.85715C21.1428 12.0357 12 19 12 19C12 19 2.85712 12.0357 5.4694 7.85715Z"/></svg>',q='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6.77778 6L18.5 17.7222"/><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10.687 10C10.2473 10.4392 10.0002 11.035 10 11.6564C9.99978 12.2777 10.2465 12.8737 10.6858 13.3132C11.1251 13.7527 11.7211 13.9998 12.3427 14C12.9642 14.0002 13.5604 13.7536 14 13.3144"/><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 7C17 11.1666 20 11.17 20 11.67C20 12.17 19 13.17 19 13.17M8.2424 8.80936C7.59317 9.22876 6.97961 9.76732 6.4017 10.4251C5.70398 11.2193 5.35512 11.6164 5.35513 12.3702C5.35514 13.124 5.70406 13.5211 6.40191 14.3154C7.99587 16.1297 9.8618 17.0367 12 17.0367C13.1102 17.0367 14.1466 16.7917 15.1111 16.3024"/></svg>',U='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16.6954 5C17.912 5 18.8468 6.07716 18.6755 7.28165L17.426 16.0659C17.3183 16.8229 16.7885 17.4522 16.061 17.6873L12.6151 18.8012C12.2152 18.9304 11.7848 18.9304 11.3849 18.8012L7.93898 17.6873C7.21148 17.4522 6.6817 16.8229 6.57403 16.0659L5.32454 7.28165C5.15322 6.07716 6.088 5 7.30461 5H16.6954Z"/><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 8.4H9L9.42857 11.7939H14.5714L14.3571 13.2788L14.1429 14.7636L12 15.4L9.85714 14.7636L9.77143 14.3394"/></svg>',G='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M9.5 8L6.11524 11.8683C6.04926 11.9437 6.04926 12.0563 6.11524 12.1317L9.5 16"/><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M15 8L18.3848 11.8683C18.4507 11.9437 18.4507 12.0563 18.3848 12.1317L15 16"/></svg>',Q='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M13.34 10C12.4223 12.7337 11 17 11 17"/><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M14.21 7H14.2"/></svg>',X='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M7.69998 12.6L7.67896 12.62C6.53993 13.7048 6.52012 15.5155 7.63516 16.625V16.625C8.72293 17.7073 10.4799 17.7102 11.5712 16.6314L13.0263 15.193C14.0703 14.1609 14.2141 12.525 13.3662 11.3266L13.22 11.12"/><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M16.22 11.12L16.3564 10.9805C17.2895 10.0265 17.3478 8.5207 16.4914 7.49733V7.49733C15.569 6.39509 13.9269 6.25143 12.8271 7.17675L11.39 8.38588C10.0935 9.47674 9.95704 11.4241 11.0887 12.6852L11.12 12.72"/></svg>',ie='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><line x1="9" x2="19" y1="7" y2="7" stroke="currentColor" stroke-linecap="round" stroke-width="2"/><line x1="9" x2="19" y1="12" y2="12" stroke="currentColor" stroke-linecap="round" stroke-width="2"/><line x1="9" x2="19" y1="17" y2="17" stroke="currentColor" stroke-linecap="round" stroke-width="2"/><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M5.00001 17H4.99002"/><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M5.00001 12H4.99002"/><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M5.00001 7H4.99002"/></svg>',ue='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><line x1="12" x2="19" y1="7" y2="7" stroke="currentColor" stroke-linecap="round" stroke-width="2"/><line x1="12" x2="19" y1="12" y2="12" stroke="currentColor" stroke-linecap="round" stroke-width="2"/><line x1="12" x2="19" y1="17" y2="17" stroke="currentColor" stroke-linecap="round" stroke-width="2"/><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M7.79999 14L7.79999 7.2135C7.79999 7.12872 7.7011 7.0824 7.63597 7.13668L4.79999 9.5"/></svg>',fe='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-width="2" d="M11.3536 9.31802L12.7678 7.90381C13.5488 7.12276 14.8151 7.12276 15.5962 7.90381C16.3772 8.68486 16.3772 9.95119 15.5962 10.7322L14.182 12.1464M11.3536 9.31802L7.96729 12.7043C7.40889 13.2627 7.02827 13.9739 6.8734 14.7482L6.69798 15.6253C6.55804 16.325 7.17496 16.942 7.87468 16.802L8.75176 16.6266C9.52612 16.4717 10.2373 16.0911 10.7957 15.5327L14.182 12.1464M11.3536 9.31802L14.182 12.1464"/><line x1="15" x2="19" y1="17" y2="17" stroke="currentColor" stroke-linecap="round" stroke-width="2"/></svg>',be='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-width="2.6" d="M9.40999 7.29999H9.4"/><path stroke="currentColor" stroke-linecap="round" stroke-width="2.6" d="M14.6 7.29999H14.59"/><path stroke="currentColor" stroke-linecap="round" stroke-width="2.6" d="M9.30999 12H9.3"/><path stroke="currentColor" stroke-linecap="round" stroke-width="2.6" d="M14.6 12H14.59"/><path stroke="currentColor" stroke-linecap="round" stroke-width="2.6" d="M9.40999 16.7H9.4"/><path stroke="currentColor" stroke-linecap="round" stroke-width="2.6" d="M14.6 16.7H14.59"/></svg>',Se='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><rect width="14" height="14" x="5" y="5" stroke="currentColor" stroke-width="2" rx="4"/><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5.13968 15.32L8.69058 11.5661C9.02934 11.2036 9.48873 11 9.96774 11C10.4467 11 10.9061 11.2036 11.2449 11.5661L15.3871 16M13.5806 14.0664L15.0132 12.533C15.3519 12.1705 15.8113 11.9668 16.2903 11.9668C16.7693 11.9668 17.2287 12.1705 17.5675 12.533L18.841 13.9634"/><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13.7778 9.33331H13.7867"/></svg>',le='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-width="2" d="M10 10.5606V13.4394C10 14.4777 11.1572 15.0971 12.0211 14.5211L14.1803 13.0817C14.9536 12.5661 14.9503 11.4317 14.18 10.9181L12.0214 9.47907C11.1591 8.9042 10 9.5203 10 10.5606Z"/><rect width="14" height="14" x="5" y="5" stroke="currentColor" stroke-width="2" rx="4"/></svg>',ke='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M12 7V12M12 17V12M17 12H12M12 12H7"/></svg>',Re='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 11L9 11C8.80222 11 8.60888 10.9414 8.44443 10.8315C8.27998 10.7216 8.15181 10.5654 8.07612 10.3827C8.00043 10.2 7.98063 9.99889 8.01922 9.80491C8.0578 9.61093 8.15304 9.43275 8.29289 9.29289C8.43275 9.15304 8.61093 9.0578 8.80491 9.01921C8.99889 8.98063 9.19996 9.00043 9.38268 9.07612C9.56541 9.15181 9.72159 9.27998 9.83147 9.44443C9.94135 9.60888 10 9.80222 10 10L10 12.5C10 13.0304 9.78929 13.5391 9.41421 13.9142C9.03914 14.2893 8.53043 14.5 8 14.5"/><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 11L15 11C14.8022 11 14.6089 10.9414 14.4444 10.8315C14.28 10.7216 14.1518 10.5654 14.0761 10.3827C14.0004 10.2 13.9806 9.99889 14.0192 9.80491C14.0578 9.61093 14.153 9.43275 14.2929 9.29289C14.4327 9.15304 14.6109 9.0578 14.8049 9.01921C14.9989 8.98063 15.2 9.00043 15.3827 9.07612C15.5654 9.15181 15.7216 9.27998 15.8315 9.44443C15.9414 9.60888 16 9.80222 16 10L16 12.5C16 13.0304 15.7893 13.5391 15.4142 13.9142C15.0391 14.2893 14.5304 14.5 14 14.5"/></svg>',Me='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M14.6667 13.6667L18 10.3333L14.6667 7M18 10.3333H8.83333C7.94928 10.3333 7.10143 10.6845 6.47631 11.3096C5.85119 11.9348 5.5 12.7826 5.5 13.6667C5.5 14.5507 5.85119 15.3986 6.47631 16.0237C7.10143 16.6488 7.94928 17 8.83333 17H9.66667"/></svg>',Ne='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11 19V19C9.13623 19 8.20435 19 7.46927 18.6955C6.48915 18.2895 5.71046 17.5108 5.30448 16.5307C5 15.7956 5 14.8638 5 13V12C5 9.19108 5 7.78661 5.67412 6.77772C5.96596 6.34096 6.34096 5.96596 6.77772 5.67412C7.78661 5 9.19108 5 12 5H13.5C14.8956 5 15.5933 5 16.1611 5.17224C17.4395 5.56004 18.44 6.56046 18.8278 7.83886C19 8.40666 19 9.10444 19 10.5V10.5"/><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M19.1187 14.8787L16.9974 17M14.876 19.1213L16.9974 17M19.1187 19.1213L16.9974 17M16.9974 17L14.876 14.8787"/><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6.5 17.5L17.5 6.5"/><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M18.9919 10.5H19.0015"/><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10.9919 19H11.0015"/><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13L13 5"/></svg>',et='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path fill="currentColor" d="M10.7929 18.2071C11.1834 18.5976 11.8166 18.5976 12.2071 18.2071C12.5976 17.8166 12.5976 17.1834 12.2071 16.7929L10.7929 18.2071ZM5 11V10C4.44772 10 4 10.4477 4 11H5ZM4 15.5C4 16.0523 4.44772 16.5 5 16.5C5.55228 16.5 6 16.0523 6 15.5H4ZM9.5 12C10.0523 12 10.5 11.5523 10.5 11C10.5 10.4477 10.0523 10 9.5 10V12ZM12.2071 16.7929L5.70711 10.2929L4.29289 11.7071L10.7929 18.2071L12.2071 16.7929ZM4 11V15.5H6V11H4ZM5 12H9.5V10H5V12Z"/><path fill="currentColor" d="M13.2071 5.79289C12.8166 5.40237 12.1834 5.40237 11.7929 5.79289C11.4024 6.18342 11.4024 6.81658 11.7929 7.20711L13.2071 5.79289ZM19 13V14C19.5523 14 20 13.5523 20 13H19ZM20 8.5C20 7.94772 19.5523 7.5 19 7.5C18.4477 7.5 18 7.94772 18 8.5H20ZM14.5 12C13.9477 12 13.5 12.4477 13.5 13C13.5 13.5523 13.9477 14 14.5 14V12ZM11.7929 7.20711L18.2929 13.7071L19.7071 12.2929L13.2071 5.79289L11.7929 7.20711ZM20 13V8.5H18V13H20ZM19 12H14.5V14H19V12Z"/></svg>',Ke='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><circle cx="10.5" cy="10.5" r="5.5" stroke="currentColor" stroke-width="2"/><line x1="15.4142" x2="19" y1="15" y2="18.5858" stroke="currentColor" stroke-linecap="round" stroke-width="2"/></svg>',Je='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-width="2" d="M11.8197 6.04369C11.8924 5.8925 12.1076 5.8925 12.1803 6.04369L13.9776 9.78496C14.0068 9.84564 14.0645 9.88759 14.1312 9.89657L18.2448 10.4498C18.411 10.4722 18.4776 10.6769 18.3562 10.7927L15.3535 13.6582C15.3048 13.7047 15.2827 13.7726 15.2948 13.8388L16.0398 17.922C16.0699 18.087 15.8957 18.2136 15.7481 18.1339L12 16.1124L8.25192 18.1339C8.10429 18.2136 7.93012 18.087 7.96023 17.922L8.7052 13.8388C8.71729 13.7726 8.69523 13.7047 8.64653 13.6582L5.64378 10.7927C5.52244 10.6769 5.58896 10.4722 5.7552 10.4498L9.86876 9.89657C9.93549 9.88759 9.99322 9.84564 10.0224 9.78496L11.8197 6.04369Z"/></svg>',Ue='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 9L20 12L17 15"/><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M14 12H20"/><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 9L4 12L7 15"/><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 12H10"/></svg>',nt='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-width="2" d="M5 10H19"/><rect width="14" height="14" x="5" y="5" stroke="currentColor" stroke-width="2" rx="4"/></svg>',Ze='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-width="2" d="M10 5V18.5"/><path stroke="currentColor" stroke-width="2" d="M14 5V18.5"/><path stroke="currentColor" stroke-width="2" d="M5 10H19"/><path stroke="currentColor" stroke-width="2" d="M5 14H19"/><rect width="14" height="14" x="5" y="5" stroke="currentColor" stroke-width="2" rx="4"/></svg>',de='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-width="2" d="M10 5V18.5"/><path stroke="currentColor" stroke-width="2" d="M5 10H19"/><rect width="14" height="14" x="5" y="5" stroke="currentColor" stroke-width="2" rx="4"/></svg>',ye='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M8 9V7.2C8 7.08954 8.08954 7 8.2 7L12 7M16 9V7.2C16 7.08954 15.9105 7 15.8 7L12 7M12 7L12 17M12 17H10M12 17H14"/></svg>',Ie='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M18.1328 7.7234C18.423 7.7634 18.7115 7.80571 19 7.85109M18.1328 7.7234L17.2267 17.4023C17.1897 17.8371 16.973 18.2432 16.62 18.5394C16.267 18.8356 15.8037 19.0001 15.3227 19H8.67733C8.19632 19.0001 7.73299 18.8356 7.37998 18.5394C7.02698 18.2432 6.81032 17.8371 6.77333 17.4023L5.86715 7.7234M18.1328 7.7234C17.1536 7.58919 16.1693 7.48733 15.1818 7.41803M5.86715 7.7234C5.57697 7.76263 5.28848 7.80494 5 7.85032M5.86715 7.7234C6.84642 7.58919 7.83074 7.48733 8.81818 7.41803M15.1818 7.41803C13.0638 7.26963 10.9362 7.26963 8.81818 7.41803M15.1818 7.41803C15.1818 5.30368 13.7266 4.34834 12 4.34834C10.2734 4.34834 8.81818 5.43945 8.81818 7.41803"/><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10.5 15.5L10 11"/><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M14 11L13.5 15.5"/></svg>',Fe='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9.33333 13.6667L6 10.3333L9.33333 7M6 10.3333H15.1667C16.0507 10.3333 16.8986 10.6845 17.5237 11.3096C18.1488 11.9348 18.5 12.7826 18.5 13.6667C18.5 14.5507 18.1488 15.3986 17.5237 16.0237C16.8986 16.6488 16.0507 17 15.1667 17H14.3333"/></svg>',it='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M15.7795 11.5C15.7795 11.5 16.053 11.1962 16.5497 10.6722C17.4442 9.72856 17.47 8.2475 16.578 7.30145V7.30145C15.6482 6.31522 14.0873 6.29227 13.1288 7.25073L11.8795 8.49999"/><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M8.24516 12.3883C8.24516 12.3883 7.9717 12.6922 7.47503 13.2161C6.5805 14.1598 6.55465 15.6408 7.44665 16.5869V16.5869C8.37652 17.5731 9.93743 17.5961 10.8959 16.6376L12.1452 15.3883"/><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M17.7802 15.1032L16.597 14.9422C16.0109 14.8624 15.4841 15.3059 15.4627 15.8969L15.4199 17.0818"/><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M6.39063 9.03238L7.58431 9.06668C8.17549 9.08366 8.65218 8.58665 8.61055 7.99669L8.52708 6.81397"/><line x1="12.1142" x2="11.7" y1="12.2" y2="11.7858" stroke="currentColor" stroke-linecap="round" stroke-width="2"/></svg>',ht='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-width="2" d="M12 10C12.7145 10 13.239 9.56559 13.5392 9.11536C13.844 8.65814 14 8.0841 14 7.5C14 6.9159 13.844 6.34186 13.5392 5.88464C13.239 5.43441 12.7145 5 12 5C11.2855 5 10.761 5.43441 10.4608 5.88464C10.156 6.34186 10 6.9159 10 7.5C10 8.0841 10.156 8.65814 10.4608 9.11536C10.761 9.56559 11.2855 10 12 10Z"/><ellipse cx="12" cy="16" stroke="currentColor" stroke-width="2" rx="3" ry="5" transform="rotate(-90 12 16)"/></svg>',_t='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-width="2" d="M10 10C10.7145 10 11.239 9.56559 11.5392 9.11536C11.844 8.65814 12 8.0841 12 7.5C12 6.9159 11.844 6.34186 11.5392 5.88464C11.239 5.43441 10.7145 5 10 5C9.28547 5 8.761 5.43441 8.46084 5.88464C8.15603 6.34186 8 6.9159 8 7.5C8 8.0841 8.15603 8.65814 8.46084 9.11536C8.761 9.56559 9.28547 10 10 10Z"/><ellipse cx="10" cy="16" stroke="currentColor" stroke-width="2" rx="3" ry="5" transform="rotate(-90 10 16)"/><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M15.5555 10.2222C16.5374 10.2222 17.3333 9.42629 17.3333 8.44445C17.3333 7.46261 16.5374 6.66667 15.5555 6.66667"/><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M17.5 13C21 14.5 20.5 18 18 18.5"/></svg>',Pe='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><rect width="14" height="14" x="5" y="5" stroke="currentColor" stroke-width="2" rx="4"/><line x1="12" x2="12" y1="9" y2="12" stroke="currentColor" stroke-linecap="round" stroke-width="2"/><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M12 15.02V15.01"/></svg>'},function(r,t,e){var i=e(13);r.exports=function(n,o){if(!i(n))return n;var a,s;if(o&&typeof(a=n.toString)=="function"&&!i(s=a.call(n))||typeof(a=n.valueOf)=="function"&&!i(s=a.call(n))||!o&&typeof(a=n.toString)=="function"&&!i(s=a.call(n)))return s;throw TypeError("Can't convert object to primitive value")}},function(r,t,e){var i=e(45)("meta"),n=e(13),o=e(26),a=e(18).f,s=0,l=Object.isExtensible||function(){return!0},d=!e(11)(function(){return l(Object.preventExtensions({}))}),u=function(p){a(p,i,{value:{i:"O"+ ++s,w:{}}})},h=r.exports={KEY:i,NEED:!1,fastKey:function(p,m){if(!n(p))return typeof p=="symbol"?p:(typeof p=="string"?"S":"P")+p;if(!o(p,i)){if(!l(p))return"F";if(!m)return"E";u(p)}return p[i].i},getWeak:function(p,m){if(!o(p,i)){if(!l(p))return!0;if(!m)return!1;u(p)}return p[i].w},onFreeze:function(p){return d&&h.NEED&&l(p)&&!o(p,i)&&u(p),p}}},function(r,t){r.exports=function(e,i){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:i}}},function(r,t){var e=0,i=Math.random();r.exports=function(n){return"Symbol(".concat(n===void 0?"":n,")_",(++e+i).toString(36))}},function(r,t){r.exports=!1},function(r,t,e){var i=e(119),n=e(89);r.exports=Object.keys||function(o){return i(o,n)}},function(r,t,e){var i=e(33),n=Math.max,o=Math.min;r.exports=function(a,s){return(a=i(a))<0?n(a+s,0):o(a,s)}},function(r,t,e){var i=e(12),n=e(120),o=e(89),a=e(88)("IE_PROTO"),s=function(){},l=function(){var d,u=e(86)("iframe"),h=o.length;for(u.style.display="none",e(90).appendChild(u),u.src="javascript:",(d=u.contentWindow.document).open(),d.write("<script>document.F=Object<\/script>"),d.close(),l=d.F;h--;)delete l.prototype[o[h]];return l()};r.exports=Object.create||function(d,u){var h;return d!==null?(s.prototype=i(d),h=new s,s.prototype=null,h[a]=d):h=l(),u===void 0?h:n(h,u)}},function(r,t,e){var i=e(119),n=e(89).concat("length","prototype");t.f=Object.getOwnPropertyNames||function(o){return i(o,n)}},function(r,t,e){var i=e(26),n=e(22),o=e(88)("IE_PROTO"),a=Object.prototype;r.exports=Object.getPrototypeOf||function(s){return s=n(s),i(s,o)?s[o]:typeof s.constructor=="function"&&s instanceof s.constructor?s.constructor.prototype:s instanceof Object?a:null}},function(r,t,e){var i=e(14)("unscopables"),n=Array.prototype;n[i]==null&&e(27)(n,i,{}),r.exports=function(o){n[i][o]=!0}},function(r,t,e){var i=e(13);r.exports=function(n,o){if(!i(n)||n._t!==o)throw TypeError("Incompatible receiver, "+o+" required!");return n}},function(r,t,e){var i,n,o;n=[t,e(2),e(3),e(150)],(o=typeof(i=function(a,s,l,d){"use strict";var u=e(1);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,s=u(s),l=u(l),d=u(d);var h=function(){function p(){(0,s.default)(this,p)}return(0,l.default)(p,null,[{key:"ui",value:function(m,x){return p._t(m,x)}},{key:"t",value:function(m,x){return p._t(m,x)}},{key:"setDictionary",value:function(m){p.currentDictionary=m}},{key:"_t",value:function(m,x){var y=p.getNamespace(m);return y&&y[x]?y[x]:x}},{key:"getNamespace",value:function(m){return m.split(".").reduce(function(x,y){return x&&Object.keys(x).length?x[y]:{}},p.currentDictionary)}}]),p}();a.default=h,h.displayName="I18n",h.currentDictionary=d.default,r.exports=t.default})=="function"?i.apply(t,n):i)===void 0||(r.exports=o)},function(r,t,e){var i=e(18).f,n=e(26),o=e(14)("toStringTag");r.exports=function(a,s,l){a&&!n(a=l?a:a.prototype,o)&&i(a,o,{configurable:!0,value:s})}},function(r,t,e){var i=e(0),n=e(38),o=e(11),a=e(92),s="["+a+"]",l=RegExp("^"+s+s+"*"),d=RegExp(s+s+"*$"),u=function(p,m,x){var y={},v=o(function(){return!!a[p]()||"\u200B\x85"[p]()!="\u200B\x85"}),w=y[p]=v?m(h):a[p];x&&(y[x]=w),i(i.P+i.F*v,"String",y)},h=u.trim=function(p,m){return p=String(n(p)),1&m&&(p=p.replace(l,"")),2&m&&(p=p.replace(d,"")),p};r.exports=u},function(r,t){r.exports={}},function(r,t,e){"use strict";var i=e(10),n=e(18),o=e(17),a=e(14)("species");r.exports=function(s){var l=i[s];o&&l&&!l[a]&&n.f(l,a,{configurable:!0,get:function(){return this}})}},function(r,t){r.exports=function(e,i,n,o){if(!(e instanceof i)||o!==void 0&&o in e)throw TypeError(n+": incorrect invocation!");return e}},function(r,t,e){var i=e(23);r.exports=function(n,o,a){for(var s in o)i(n,s,o[s],a);return n}},function(r,t,e){var i,n,o,a=e(7);n=[t,e(20),e(30),e(21),e(40),e(2),e(3),e(152),e(114),e(5),e(6),e(4),e(19),e(8),e(113),e(25),e(82)],(o=typeof(i=function(s,l,d,u,h,p,m,x,y,v,w,k,c,_,g,b,E){"use strict";var T,C=e(1);function S(B){if(typeof WeakMap!="function")return null;var P=new WeakMap,M=new WeakMap;return(S=function(O){return O?M:P})(B)}function A(B){var P=function(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(M){return!1}}();return function(){var M,O=(0,k.default)(B);if(P){var I=(0,k.default)(this).constructor;M=Reflect.construct(O,arguments,I)}else M=O.apply(this,arguments);return(0,w.default)(this,M)}}Object.defineProperty(s,"__esModule",{value:!0}),s.default=s.BlockToolAPI=void 0,l=C(l),d=C(d),u=C(u),h=C(h),p=C(p),m=C(m),x=C(x),y=C(y),v=C(v),w=C(w),k=C(k),c=C(c),_=function(B,P){if(!P&&B&&B.__esModule)return B;if(B===null||a(B)!=="object"&&typeof B!="function")return{default:B};var M=S(P);if(M&&M.has(B))return M.get(B);var O={},I=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var j in B)if(j!=="default"&&Object.prototype.hasOwnProperty.call(B,j)){var H=I?Object.getOwnPropertyDescriptor(B,j):null;H&&(H.get||H.set)?Object.defineProperty(O,j,H):O[j]=B[j]}return O.default=B,M&&M.set(B,O),O}(_),g=C(g),b=C(b),E=C(E),s.BlockToolAPI=T,function(B){B.APPEND_CALLBACK="appendCallback",B.RENDERED="rendered",B.MOVED="moved",B.UPDATED="updated",B.REMOVED="removed",B.ON_PASTE="onPaste"}(T||(s.BlockToolAPI=T={}));var L=function(B){(0,v.default)(H,B);var P,M,O,I,j=A(H);function H(N){var D,K=N.id,q=K===void 0?_.generateBlockId():K,U=N.data,G=N.tool,Q=N.api,X=N.readOnly,ie=N.tunesData;return(0,p.default)(this,H),(D=j.call(this)).cachedInputs=[],D.tunesInstances=new Map,D.defaultTunesInstances=new Map,D.unavailableTunesData={},D.inputIndex=0,D.modificationDebounceTimer=450,D.didMutated=_.debounce(function(){var ue=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],fe=ue instanceof InputEvent||!ue.some(function(be){var Se=be.addedNodes,le=Se===void 0?[]:Se,ke=be.removedNodes;return[].concat((0,h.default)(Array.from(le)),(0,h.default)(Array.from(ke))).some(function(Re){return c.default.isElement(Re)&&Re.dataset.mutationFree==="true"})});fe&&(D.cachedInputs=[],D.updateCurrentInput(),D.call(T.UPDATED),D.emit("didMutated",(0,x.default)(D)))},D.modificationDebounceTimer),D.handleFocus=function(){D.cachedInputs=[],D.updateCurrentInput()},D.name=G.name,D.id=q,D.settings=G.settings,D.config=G.settings.config||{},D.api=Q,D.blockAPI=new g.default((0,x.default)(D)),D.mutationObserver=new MutationObserver(D.didMutated),D.tool=G,D.toolInstance=G.create(U,D.blockAPI,X),D.tunes=G.tunes,D.composeTunes(ie),D.holder=D.compose(),D}return(0,m.default)(H,[{key:"inputs",get:function(){if(this.cachedInputs.length!==0)return this.cachedInputs;var N=c.default.findAllInputs(this.holder);return this.inputIndex>N.length-1&&(this.inputIndex=N.length-1),this.cachedInputs=N,N}},{key:"currentInput",get:function(){return this.inputs[this.inputIndex]},set:function(N){var D=this.inputs.findIndex(function(K){return K===N||K.contains(N)});D!==-1&&(this.inputIndex=D)}},{key:"firstInput",get:function(){return this.inputs[0]}},{key:"lastInput",get:function(){var N=this.inputs;return N[N.length-1]}},{key:"nextInput",get:function(){return this.inputs[this.inputIndex+1]}},{key:"previousInput",get:function(){return this.inputs[this.inputIndex-1]}},{key:"data",get:function(){return this.save().then(function(N){return N&&!_.isEmpty(N.data)?N.data:{}})}},{key:"sanitize",get:function(){return this.tool.sanitizeConfig}},{key:"mergeable",get:function(){return _.isFunction(this.toolInstance.merge)}},{key:"isEmpty",get:function(){var N=c.default.isEmpty(this.pluginsContent),D=!this.hasMedia;return N&&D}},{key:"hasMedia",get:function(){return!!this.holder.querySelector(["img","iframe","video","audio","source","input","textarea","twitterwidget"].join(","))}},{key:"focused",get:function(){return this.holder.classList.contains(H.CSS.focused)},set:function(N){this.holder.classList.toggle(H.CSS.focused,N)}},{key:"selected",get:function(){return this.holder.classList.contains(H.CSS.selected)},set:function(N){N?(this.holder.classList.add(H.CSS.selected),b.default.addFakeCursor(this.holder)):(this.holder.classList.remove(H.CSS.selected),b.default.removeFakeCursor(this.holder))}},{key:"stretched",get:function(){return this.holder.classList.contains(H.CSS.wrapperStretched)},set:function(N){this.holder.classList.toggle(H.CSS.wrapperStretched,N)}},{key:"dropTarget",set:function(N){this.holder.classList.toggle(H.CSS.dropTarget,N)}},{key:"pluginsContent",get:function(){var N=this.holder.querySelector(".".concat(H.CSS.content));if(N&&N.childNodes.length)for(var D=N.childNodes.length-1;D>=0;D--){var K=N.childNodes[D];if(!c.default.isExtensionNode(K))return K}return null}},{key:"call",value:function(N,D){if(_.isFunction(this.toolInstance[N])){N===T.APPEND_CALLBACK&&_.log("`appendCallback` hook is deprecated and will be removed in the next major release. Use `rendered` hook instead","warn");try{this.toolInstance[N].call(this.toolInstance,D)}catch(K){_.log("Error during '".concat(N,"' call: ").concat(K.message),"error")}}}},{key:"mergeWith",value:(I=(0,u.default)(l.default.mark(function N(D){return l.default.wrap(function(K){for(;;)switch(K.prev=K.next){case 0:return K.next=2,this.toolInstance.merge(D);case 2:case"end":return K.stop()}},N,this)})),function(N){return I.apply(this,arguments)})},{key:"save",value:(O=(0,u.default)(l.default.mark(function N(){var D,K,q,U,G=this;return l.default.wrap(function(Q){for(;;)switch(Q.prev=Q.next){case 0:return Q.next=2,this.toolInstance.save(this.pluginsContent);case 2:return D=Q.sent,K=this.unavailableTunesData,[].concat((0,h.default)(this.tunesInstances.entries()),(0,h.default)(this.defaultTunesInstances.entries())).forEach(function(X){var ie=(0,d.default)(X,2),ue=ie[0],fe=ie[1];if(_.isFunction(fe.save))try{K[ue]=fe.save()}catch(be){_.log("Tune ".concat(fe.constructor.name," save method throws an Error %o"),"warn",be)}}),q=window.performance.now(),Q.abrupt("return",Promise.resolve(D).then(function(X){return U=window.performance.now(),{id:G.id,tool:G.name,data:X,tunes:K,time:U-q}}).catch(function(X){_.log("Saving process for ".concat(G.name," tool failed due to the ").concat(X),"log","red")}));case 7:case"end":return Q.stop()}},N,this)})),function(){return O.apply(this,arguments)})},{key:"validate",value:(M=(0,u.default)(l.default.mark(function N(D){var K;return l.default.wrap(function(q){for(;;)switch(q.prev=q.next){case 0:if(K=!0,!(this.toolInstance.validate instanceof Function)){q.next=5;break}return q.next=4,this.toolInstance.validate(D);case 4:K=q.sent;case 5:return q.abrupt("return",K);case 6:case"end":return q.stop()}},N,this)})),function(N){return M.apply(this,arguments)})},{key:"getTunes",value:function(){var N=document.createElement("div"),D=[];return[typeof this.toolInstance.renderSettings=="function"?this.toolInstance.renderSettings():[],[].concat((0,h.default)(this.tunesInstances.values()),(0,h.default)(this.defaultTunesInstances.values())).map(function(K){return K.render()})].flat().forEach(function(K){c.default.isElement(K)?N.appendChild(K):Array.isArray(K)?D.push.apply(D,(0,h.default)(K)):D.push(K)}),[D,N]}},{key:"updateCurrentInput",value:function(){this.currentInput=c.default.isNativeInput(document.activeElement)||!b.default.anchorNode?document.activeElement:b.default.anchorNode}},{key:"willSelect",value:function(){this.mutationObserver.observe(this.holder.firstElementChild,{childList:!0,subtree:!0,characterData:!0,attributes:!0}),this.addInputEvents()}},{key:"willUnselect",value:function(){this.mutationObserver.disconnect(),this.removeInputEvents()}},{key:"dispatchChange",value:function(){this.didMutated()}},{key:"destroy",value:function(){(0,y.default)((0,k.default)(H.prototype),"destroy",this).call(this),_.isFunction(this.toolInstance.destroy)&&this.toolInstance.destroy()}},{key:"getActiveToolboxEntry",value:(P=(0,u.default)(l.default.mark(function N(){var D,K,q;return l.default.wrap(function(U){for(;;)switch(U.prev=U.next){case 0:if((D=this.tool.toolbox).length!==1){U.next=3;break}return U.abrupt("return",Promise.resolve(this.tool.toolbox[0]));case 3:return U.next=5,this.data;case 5:return K=U.sent,q=D,U.abrupt("return",q.find(function(G){return Object.entries(G.data).some(function(Q){var X=(0,d.default)(Q,2),ie=X[0],ue=X[1];return K[ie]&&_.equals(K[ie],ue)})}));case 8:case"end":return U.stop()}},N,this)})),function(){return P.apply(this,arguments)})},{key:"compose",value:function(){var N=c.default.make("div",H.CSS.wrapper),D=c.default.make("div",H.CSS.content),K=this.toolInstance.render();D.appendChild(K);var q=D;return[].concat((0,h.default)(this.tunesInstances.values()),(0,h.default)(this.defaultTunesInstances.values())).forEach(function(U){if(_.isFunction(U.wrap))try{q=U.wrap(q)}catch(G){_.log("Tune ".concat(U.constructor.name," wrap method throws an Error %o"),"warn",G)}}),N.appendChild(q),N}},{key:"composeTunes",value:function(N){var D=this;Array.from(this.tunes.values()).forEach(function(K){(K.isInternal?D.defaultTunesInstances:D.tunesInstances).set(K.name,K.create(N[K.name],D.blockAPI))}),Object.entries(N).forEach(function(K){var q=(0,d.default)(K,2),U=q[0],G=q[1];D.tunesInstances.has(U)||(D.unavailableTunesData[U]=G)})}},{key:"addInputEvents",value:function(){var N=this;this.inputs.forEach(function(D){D.addEventListener("focus",N.handleFocus),c.default.isNativeInput(D)&&D.addEventListener("input",N.didMutated)})}},{key:"removeInputEvents",value:function(){var N=this;this.inputs.forEach(function(D){D.removeEventListener("focus",N.handleFocus),c.default.isNativeInput(D)&&D.removeEventListener("input",N.didMutated)})}}],[{key:"CSS",get:function(){return{wrapper:"ce-block",wrapperStretched:"ce-block--stretched",content:"ce-block__content",focused:"ce-block--focused",selected:"ce-block--selected",dropTarget:"ce-block--drop-target"}}}]),H}(E.default);s.default=L,L.displayName="Block"})=="function"?i.apply(t,n):i)===void 0||(r.exports=o)},function(r,t,e){var i=e(37);r.exports=Object("z").propertyIsEnumerable(0)?Object:function(n){return i(n)=="String"?n.split(""):Object(n)}},function(r,t){t.f={}.propertyIsEnumerable},function(r,t,e){var i=e(37),n=e(14)("toStringTag"),o=i(function(){return arguments}())=="Arguments";r.exports=function(a){var s,l,d;return a===void 0?"Undefined":a===null?"Null":typeof(l=function(u,h){try{return u[h]}catch(p){}}(s=Object(a),n))=="string"?l:o?i(s):(d=i(s))=="Object"&&typeof s.callee=="function"?"Arguments":d}},function(r,t,e){var i=e(12),n=e(32),o=e(14)("species");r.exports=function(a,s){var l,d=i(a).constructor;return d===void 0||(l=i(d)[o])==null?s:n(l)}},function(r,t,e){var i,n,o,a=e(7);n=[t,e(8),e(380)],(o=typeof(i=function(s,l,d){"use strict";var u=e(1);function h(x){if(typeof WeakMap!="function")return null;var y=new WeakMap,v=new WeakMap;return(h=function(w){return w?v:y})(x)}function p(x){var y=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},v={tags:y},w=new d.default(v);return w.clean(x)}function m(x,y){return Array.isArray(x)?(k=y,x.map(function(c){return m(c,k)})):l.isObject(x)?function(c,_){var g,b={};for(var E in c)if(Object.prototype.hasOwnProperty.call(c,E)){var T=c[E],C=(g=_[E],l.isObject(g)||l.isBoolean(g)||l.isFunction(g)?_[E]:_);b[E]=m(T,C)}return b}(x,y):l.isString(x)?(v=x,w=y,l.isObject(w)?p(v,w):w===!1?p(v,{}):v):x;var v,w,k}Object.defineProperty(s,"__esModule",{value:!0}),s.clean=p,s.sanitizeBlocks=function(x,y){return x.map(function(v){var w=l.isFunction(y)?y(v.tool):y;return l.isEmpty(w)||(v.data=m(v.data,w)),v})},l=function(x,y){if(!y&&x&&x.__esModule)return x;if(x===null||a(x)!=="object"&&typeof x!="function")return{default:x};var v=h(y);if(v&&v.has(x))return v.get(x);var w={},k=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var c in x)if(c!=="default"&&Object.prototype.hasOwnProperty.call(x,c)){var _=k?Object.getOwnPropertyDescriptor(x,c):null;_&&(_.get||_.set)?Object.defineProperty(w,c,_):w[c]=x[c]}return w.default=x,v&&v.set(x,w),w}(l),d=u(d)})=="function"?i.apply(t,n):i)===void 0||(r.exports=o)},function(r,t,e){var i,n,o,a=e(7);n=[t,e(2),e(3),e(382),e(8)],(o=typeof(i=function(s,l,d,u,h){"use strict";var p=e(1);function m(y){if(typeof WeakMap!="function")return null;var v=new WeakMap,w=new WeakMap;return(m=function(k){return k?w:v})(y)}Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0,l=p(l),d=p(d),u=p(u),h=function(y,v){if(!v&&y&&y.__esModule)return y;if(y===null||a(y)!=="object"&&typeof y!="function")return{default:y};var w=m(v);if(w&&w.has(y))return w.get(y);var k={},c=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var _ in y)if(_!=="default"&&Object.prototype.hasOwnProperty.call(y,_)){var g=c?Object.getOwnPropertyDescriptor(y,_):null;g&&(g.get||g.set)?Object.defineProperty(k,_,g):k[_]=y[_]}return k.default=y,w&&w.set(y,k),k}(h);var x=function(){function y(v){var w=this;(0,l.default)(this,y),this.iterator=null,this.activated=!1,this.flipCallbacks=[],this.onKeyDown=function(k){if(w.isEventReadyForHandling(k))switch(y.usedKeys.includes(k.keyCode)&&k.preventDefault(),k.keyCode){case h.keyCodes.TAB:w.handleTabPress(k);break;case h.keyCodes.LEFT:case h.keyCodes.UP:w.flipLeft();break;case h.keyCodes.RIGHT:case h.keyCodes.DOWN:w.flipRight();break;case h.keyCodes.ENTER:w.handleEnterPress(k)}},this.iterator=new u.default(v.items,v.focusedItemClass),this.activateCallback=v.activateCallback,this.allowedKeys=v.allowedKeys||y.usedKeys}return(0,d.default)(y,[{key:"isActivated",get:function(){return this.activated}},{key:"activate",value:function(v,w){this.activated=!0,v&&this.iterator.setItems(v),w!==void 0&&this.iterator.setCursor(w),document.addEventListener("keydown",this.onKeyDown,!0)}},{key:"deactivate",value:function(){this.activated=!1,this.dropCursor(),document.removeEventListener("keydown",this.onKeyDown)}},{key:"focusFirst",value:function(){this.dropCursor(),this.flipRight()}},{key:"flipLeft",value:function(){this.iterator.previous(),this.flipCallback()}},{key:"flipRight",value:function(){this.iterator.next(),this.flipCallback()}},{key:"hasFocus",value:function(){return!!this.iterator.currentItem}},{key:"onFlip",value:function(v){this.flipCallbacks.push(v)}},{key:"removeOnFlip",value:function(v){this.flipCallbacks=this.flipCallbacks.filter(function(w){return w!==v})}},{key:"dropCursor",value:function(){this.iterator.dropCursor()}},{key:"isEventReadyForHandling",value:function(v){return this.activated&&this.allowedKeys.includes(v.keyCode)}},{key:"handleTabPress",value:function(v){switch(v.shiftKey?u.default.directions.LEFT:u.default.directions.RIGHT){case u.default.directions.RIGHT:this.flipRight();break;case u.default.directions.LEFT:this.flipLeft()}}},{key:"handleEnterPress",value:function(v){this.activated&&(this.iterator.currentItem&&(v.stopPropagation(),v.preventDefault(),this.iterator.currentItem.click()),h.isFunction(this.activateCallback)&&this.activateCallback(this.iterator.currentItem))}},{key:"flipCallback",value:function(){this.iterator.currentItem&&this.iterator.currentItem.scrollIntoViewIfNeeded(),this.flipCallbacks.forEach(function(v){return v()})}}],[{key:"usedKeys",get:function(){return[h.keyCodes.TAB,h.keyCodes.LEFT,h.keyCodes.RIGHT,h.keyCodes.ENTER,h.keyCodes.UP,h.keyCodes.DOWN]}}]),y}();s.default=x,x.displayName="Flipper",r.exports=t.default})=="function"?i.apply(t,n):i)===void 0||(r.exports=o)},function(r,t,e){var i,n,o;n=[t,e(30),e(150),e(8)],(o=typeof(i=function(a,s,l,d){"use strict";var u=e(1);Object.defineProperty(a,"__esModule",{value:!0}),a.I18nInternalNS=void 0,s=u(s);var h=function p(m,x){var y={};return Object.entries(m).forEach(function(v){var w=(0,s.default)(v,2),k=w[0],c=w[1];if((0,d.isObject)(c)){var _=x?"".concat(x,".").concat(k):k,g=Object.values(c).every(function(b){return(0,d.isString)(b)});y[k]=g?_:p(c,_)}else y[k]=c}),y}((l=u(l)).default);a.I18nInternalNS=h})=="function"?i.apply(t,n):i)===void 0||(r.exports=o)},function(r,t,e){var i,n,o,a=e(7);n=[t,e(2),e(3),e(8)],(o=typeof(i=function(s,l,d,u){"use strict";var h,p,m,x,y,v,w=e(1);function k(_){if(typeof WeakMap!="function")return null;var g=new WeakMap,b=new WeakMap;return(k=function(E){return E?b:g})(_)}Object.defineProperty(s,"__esModule",{value:!0}),s.default=s.UserSettings=s.ToolType=s.InternalTuneSettings=s.InternalInlineToolSettings=s.InternalBlockToolSettings=s.CommonInternalSettings=void 0,l=w(l),d=w(d),u=function(_,g){if(!g&&_&&_.__esModule)return _;if(_===null||a(_)!=="object"&&typeof _!="function")return{default:_};var b=k(g);if(b&&b.has(_))return b.get(_);var E={},T=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var C in _)if(C!=="default"&&Object.prototype.hasOwnProperty.call(_,C)){var S=T?Object.getOwnPropertyDescriptor(_,C):null;S&&(S.get||S.set)?Object.defineProperty(E,C,S):E[C]=_[C]}return E.default=_,b&&b.set(_,E),E}(u),s.ToolType=h,function(_){_[_.Block=0]="Block",_[_.Inline=1]="Inline",_[_.Tune=2]="Tune"}(h||(s.ToolType=h={})),s.UserSettings=p,function(_){_.Shortcut="shortcut",_.Toolbox="toolbox",_.EnabledInlineTools="inlineToolbar",_.EnabledBlockTunes="tunes",_.Config="config"}(p||(s.UserSettings=p={})),s.CommonInternalSettings=m,function(_){_.Shortcut="shortcut",_.SanitizeConfig="sanitize"}(m||(s.CommonInternalSettings=m={})),s.InternalBlockToolSettings=x,function(_){_.IsEnabledLineBreaks="enableLineBreaks",_.Toolbox="toolbox",_.ConversionConfig="conversionConfig",_.IsReadOnlySupported="isReadOnlySupported",_.PasteConfig="pasteConfig"}(x||(s.InternalBlockToolSettings=x={})),s.InternalInlineToolSettings=y,function(_){_.IsInline="isInline",_.Title="title"}(y||(s.InternalInlineToolSettings=y={})),s.InternalTuneSettings=v,function(_){_.IsTune="isTune"}(v||(s.InternalTuneSettings=v={}));var c=function(){function _(g){var b=g.name,E=g.constructable,T=g.config,C=g.api,S=g.isDefault,A=g.isInternal,L=A!==void 0&&A,B=g.defaultPlaceholder;(0,l.default)(this,_),this.api=C,this.name=b,this.constructable=E,this.config=T,this.isDefault=S,this.isInternal=L,this.defaultPlaceholder=B}return(0,d.default)(_,[{key:"settings",get:function(){var g=this.config[p.Config]||{};return this.isDefault&&!("placeholder"in g)&&this.defaultPlaceholder&&(g.placeholder=this.defaultPlaceholder),g}},{key:"reset",value:function(){if(u.isFunction(this.constructable.reset))return this.constructable.reset()}},{key:"prepare",value:function(){if(u.isFunction(this.constructable.prepare))return this.constructable.prepare({toolName:this.name,config:this.settings})}},{key:"shortcut",get:function(){var g=this.constructable[m.Shortcut];return this.config[p.Shortcut]||g}},{key:"sanitizeConfig",get:function(){return this.constructable[m.SanitizeConfig]||{}}},{key:"isInline",value:function(){return this.type===h.Inline}},{key:"isBlock",value:function(){return this.type===h.Block}},{key:"isTune",value:function(){return this.type===h.Tune}}]),_}();s.default=c,c.displayName="BaseTool"})=="function"?i.apply(t,n):i)===void 0||(r.exports=o)},function(r,t,e){var i=e(16),n=e(10),o=n["__core-js_shared__"]||(n["__core-js_shared__"]={});(r.exports=function(a,s){return o[a]||(o[a]=s!==void 0?s:{})})("versions",[]).push({version:i.version,mode:e(46)?"pure":"global",copyright:"\xA9 2020 Denis Pushkarev (zloirock.ru)"})},function(r,t,e){var i=e(28),n=e(15),o=e(48);r.exports=function(a){return function(s,l,d){var u,h=i(s),p=n(h.length),m=o(d,p);if(a&&l!=l){for(;p>m;)if((u=h[m++])!=u)return!0}else for(;p>m;m++)if((a||m in h)&&h[m]===l)return a||m||0;return!a&&-1}}},function(r,t){t.f=Object.getOwnPropertySymbols},function(r,t,e){var i=e(37);r.exports=Array.isArray||function(n){return i(n)=="Array"}},function(r,t,e){var i=e(14)("iterator"),n=!1;try{var o=[7][i]();o.return=function(){n=!0},Array.from(o,function(){throw 2})}catch(a){}r.exports=function(a,s){if(!s&&!n)return!1;var l=!1;try{var d=[7],u=d[i]();u.next=function(){return{done:l=!0}},d[i]=function(){return u},a(d)}catch(h){}return l}},function(r,t,e){"use strict";var i=e(12);r.exports=function(){var n=i(this),o="";return n.global&&(o+="g"),n.ignoreCase&&(o+="i"),n.multiline&&(o+="m"),n.unicode&&(o+="u"),n.sticky&&(o+="y"),o}},function(r,t,e){"use strict";var i=e(64),n=RegExp.prototype.exec;r.exports=function(o,a){var s=o.exec;if(typeof s=="function"){var l=s.call(o,a);if(typeof l!="object")throw new TypeError("RegExp exec method returned something other than an Object or null");return l}if(i(o)!=="RegExp")throw new TypeError("RegExp#exec called on incompatible receiver");return n.call(o,a)}},function(r,t,e){"use strict";e(137);var i=e(23),n=e(27),o=e(11),a=e(38),s=e(14),l=e(107),d=s("species"),u=!o(function(){var p=/./;return p.exec=function(){var m=[];return m.groups={a:"7"},m},"".replace(p,"$<a>")!=="7"}),h=function(){var p=/(?:)/,m=p.exec;p.exec=function(){return m.apply(this,arguments)};var x="ab".split(p);return x.length===2&&x[0]==="a"&&x[1]==="b"}();r.exports=function(p,m,x){var y=s(p),v=!o(function(){var b={};return b[y]=function(){return 7},""[p](b)!=7}),w=v?!o(function(){var b=!1,E=/a/;return E.exec=function(){return b=!0,null},p==="split"&&(E.constructor={},E.constructor[d]=function(){return E}),E[y](""),!b}):void 0;if(!v||!w||p==="replace"&&!u||p==="split"&&!h){var k=/./[y],c=x(a,y,""[p],function(b,E,T,C,S){return E.exec===l?v&&!S?{done:!0,value:k.call(E,T,C)}:{done:!0,value:b.call(T,E,C)}:{done:!1}}),_=c[0],g=c[1];i(String.prototype,p,_),n(RegExp.prototype,y,m==2?function(b,E){return g.call(b,this,E)}:function(b){return g.call(b,this)})}}},function(r,t,e){var i=e(31),n=e(132),o=e(102),a=e(12),s=e(15),l=e(104),d={},u={};(t=r.exports=function(h,p,m,x,y){var v,w,k,c,_=y?function(){return h}:l(h),g=i(m,x,p?2:1),b=0;if(typeof _!="function")throw TypeError(h+" is not iterable!");if(o(_)){for(v=s(h.length);v>b;b++)if((c=p?g(a(w=h[b])[0],w[1]):g(h[b]))===d||c===u)return c}else for(k=_.call(h);!(w=k.next()).done;)if((c=n(k,g,w.value,p))===d||c===u)return c}).BREAK=d,t.RETURN=u},function(r,t,e){var i=e(10).navigator;r.exports=i&&i.userAgent||""},function(r,t,e){"use strict";var i=e(10),n=e(0),o=e(23),a=e(60),s=e(43),l=e(78),d=e(59),u=e(13),h=e(11),p=e(74),m=e(55),x=e(93);r.exports=function(y,v,w,k,c,_){var g=i[y],b=g,E=c?"set":"add",T=b&&b.prototype,C={},S=function(O){var I=T[O];o(T,O,O=="delete"||O=="has"?function(j){return!(_&&!u(j))&&I.call(this,j===0?0:j)}:O=="get"?function(j){return _&&!u(j)?void 0:I.call(this,j===0?0:j)}:O=="add"?function(j){return I.call(this,j===0?0:j),this}:function(j,H){return I.call(this,j===0?0:j,H),this})};if(typeof b=="function"&&(_||T.forEach&&!h(function(){new b().entries().next()}))){var A=new b,L=A[E](_?{}:-0,1)!=A,B=h(function(){A.has(1)}),P=p(function(O){new b(O)}),M=!_&&h(function(){for(var O=new b,I=5;I--;)O[E](I,I);return!O.has(-0)});P||((b=v(function(O,I){d(O,b,y);var j=x(new g,O,b);return I!=null&&l(I,c,j[E],j),j})).prototype=T,T.constructor=b),(B||M)&&(S("delete"),S("has"),c&&S("get")),(M||L)&&S(E),_&&T.clear&&delete T.clear}else b=k.getConstructor(v,y,c,E),a(b.prototype,w),s.NEED=!0;return m(b,y),C[y]=b,n(n.G+n.W+n.F*(b!=g),C),_||k.setStrong(b,y,c),b}},function(r,t,e){for(var i,n=e(10),o=e(27),a=e(45),s=a("typed_array"),l=a("view"),d=!(!n.ArrayBuffer||!n.DataView),u=d,h=0,p="Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array".split(",");h<9;)(i=n[p[h++]])?(o(i.prototype,s,!0),o(i.prototype,l,!0)):u=!1;r.exports={ABV:d,CONSTR:u,TYPED:s,VIEW:l}},function(r,t,e){var i,n,o;n=[t,e(2),e(3),e(8)],(o=typeof(i=function(a,s,l,d){"use strict";var u=e(1);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,s=u(s),l=u(l);var h=function(){function p(){(0,s.default)(this,p),this.subscribers={}}return(0,l.default)(p,[{key:"on",value:function(m,x){m in this.subscribers||(this.subscribers[m]=[]),this.subscribers[m].push(x)}},{key:"once",value:function(m,x){var y=this;m in this.subscribers||(this.subscribers[m]=[]),this.subscribers[m].push(function v(w){var k=x(w),c=y.subscribers[m].indexOf(v);return c!==-1&&y.subscribers[m].splice(c,1),k})}},{key:"emit",value:function(m,x){!(0,d.isEmpty)(this.subscribers)&&this.subscribers[m]&&this.subscribers[m].reduce(function(y,v){return v(y)||y},x)}},{key:"off",value:function(m,x){for(var y=0;y<this.subscribers[m].length;y++)if(this.subscribers[m][y]===x){delete this.subscribers[m][y];break}}},{key:"destroy",value:function(){this.subscribers=null}}]),p}();a.default=h,h.displayName="EventsDispatcher",r.exports=t.default})=="function"?i.apply(t,n):i)===void 0||(r.exports=o)},function(r,t,e){var i,n,o;n=[t,e(2),e(3),e(5),e(6),e(4),e(9)],(o=typeof(i=function(a,s,l,d,u,h,p){"use strict";var m=e(1);function x(v){var w=function(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(k){return!1}}();return function(){var k,c=(0,h.default)(v);if(w){var _=(0,h.default)(this).constructor;k=Reflect.construct(c,arguments,_)}else k=c.apply(this,arguments);return(0,u.default)(this,k)}}Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,s=m(s),l=m(l),d=m(d),u=m(u),h=m(h);var y=function(v){(0,d.default)(k,v);var w=x(k);function k(){return(0,s.default)(this,k),w.apply(this,arguments)}return(0,l.default)(k,[{key:"methods",get:function(){return{blocks:this.Editor.BlocksAPI.methods,caret:this.Editor.CaretAPI.methods,events:this.Editor.EventsAPI.methods,listeners:this.Editor.ListenersAPI.methods,notifier:this.Editor.NotifierAPI.methods,sanitizer:this.Editor.SanitizerAPI.methods,saver:this.Editor.SaverAPI.methods,selection:this.Editor.SelectionAPI.methods,styles:this.Editor.StylesAPI.classes,toolbar:this.Editor.ToolbarAPI.methods,inlineToolbar:this.Editor.InlineToolbarAPI.methods,tooltip:this.Editor.TooltipAPI.methods,i18n:this.Editor.I18nAPI.methods,readOnly:this.Editor.ReadOnlyAPI.methods,ui:this.Editor.UiAPI.methods}}},{key:"getMethodsForTool",value:function(c){return Object.assign(this.methods,{i18n:this.Editor.I18nAPI.getMethodsForTool(c)})}}]),k}((p=m(p)).default);a.default=y,y.displayName="API",r.exports=t.default})=="function"?i.apply(t,n):i)===void 0||(r.exports=o)},function(r,t,e){var i,n,o,a=e(7);n=[t,e(2),e(3),e(5),e(6),e(4),e(9),e(19),e(8),e(54),e(68),e(115),e(386),e(41)],(o=typeof(i=function(s,l,d,u,h,p,m,x,y,v,w,k,c,_){"use strict";var g=e(1);function b(S){if(typeof WeakMap!="function")return null;var A=new WeakMap,L=new WeakMap;return(b=function(B){return B?L:A})(S)}function E(S,A){if(!A&&S&&S.__esModule)return S;if(S===null||a(S)!=="object"&&typeof S!="function")return{default:S};var L=b(A);if(L&&L.has(S))return L.get(S);var B={},P=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var M in S)if(M!=="default"&&Object.prototype.hasOwnProperty.call(S,M)){var O=P?Object.getOwnPropertyDescriptor(S,M):null;O&&(O.get||O.set)?Object.defineProperty(B,M,O):B[M]=S[M]}return B.default=S,L&&L.set(S,B),B}function T(S){var A=function(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(L){return!1}}();return function(){var L,B=(0,p.default)(S);if(A){var P=(0,p.default)(this).constructor;L=Reflect.construct(B,arguments,P)}else L=B.apply(this,arguments);return(0,h.default)(this,L)}}Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0,l=g(l),d=g(d),u=g(u),h=g(h),p=g(p),m=g(m),x=g(x),y=E(y),v=g(v),k=g(k),c=E(c);var C=function(S){(0,u.default)(L,S);var A=T(L);function L(B){var P,M=B.config,O=B.eventsDispatcher;return(0,l.default)(this,L),(P=A.call(this,{config:M,eventsDispatcher:O})).tooltip=new k.default,P}return(0,d.default)(L,[{key:"CSS",get:function(){return{toolbar:"ce-toolbar",content:"ce-toolbar__content",actions:"ce-toolbar__actions",actionsOpened:"ce-toolbar__actions--opened",toolbarOpened:"ce-toolbar--opened",openedToolboxHolderModifier:"codex-editor--toolbox-opened",plusButton:"ce-toolbar__plus",plusButtonShortcut:"ce-toolbar__plus-shortcut",settingsToggler:"ce-toolbar__settings-btn",settingsTogglerHidden:"ce-toolbar__settings-btn--hidden"}}},{key:"opened",get:function(){return this.nodes.wrapper.classList.contains(this.CSS.toolbarOpened)}},{key:"toolbox",get:function(){var B=this;return{opened:this.toolboxInstance.opened,close:function(){B.toolboxInstance.close()},open:function(){B.Editor.BlockManager.currentBlock=B.hoveredBlock,B.toolboxInstance.open()},toggle:function(){return B.toolboxInstance.toggle()},hasFocus:function(){return B.toolboxInstance.hasFocus()}}}},{key:"blockActions",get:function(){var B=this;return{hide:function(){B.nodes.actions.classList.remove(B.CSS.actionsOpened)},show:function(){B.nodes.actions.classList.add(B.CSS.actionsOpened)}}}},{key:"blockTunesToggler",get:function(){var B=this;return{hide:function(){return B.nodes.settingsToggler.classList.add(B.CSS.settingsTogglerHidden)},show:function(){return B.nodes.settingsToggler.classList.remove(B.CSS.settingsTogglerHidden)}}}},{key:"toggleReadOnly",value:function(B){B?(this.destroy(),this.Editor.BlockSettings.destroy(),this.disableModuleBindings()):(this.drawUI(),this.enableModuleBindings())}},{key:"moveAndOpen",value:function(){var B=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.Editor.BlockManager.currentBlock;if(this.toolboxInstance.close(),this.Editor.BlockSettings.close(),B){this.hoveredBlock=B;var P,M=B.holder,O=this.Editor.UI.isMobile,I=B.pluginsContent,j=window.getComputedStyle(I),H=parseInt(j.paddingTop,10),N=M.offsetHeight;P=O?M.offsetTop+N:M.offsetTop+H,this.nodes.wrapper.style.top="".concat(Math.floor(P),"px"),this.Editor.BlockManager.blocks.length===1&&B.isEmpty?this.blockTunesToggler.hide():this.blockTunesToggler.show(),this.open()}}},{key:"close",value:function(){this.Editor.ReadOnly.isEnabled||(this.nodes.wrapper.classList.remove(this.CSS.toolbarOpened),this.blockActions.hide(),this.toolboxInstance.close(),this.Editor.BlockSettings.close())}},{key:"open",value:function(){var B=this,P=!(arguments.length>0&&arguments[0]!==void 0)||arguments[0];y.delay(function(){B.nodes.wrapper.classList.add(B.CSS.toolbarOpened),P?B.blockActions.show():B.blockActions.hide()},50)()}},{key:"make",value:function(){var B=this;this.nodes.wrapper=x.default.make("div",this.CSS.toolbar),["content","actions"].forEach(function(M){B.nodes[M]=x.default.make("div",B.CSS[M])}),x.default.append(this.nodes.wrapper,this.nodes.content),x.default.append(this.nodes.content,this.nodes.actions),this.nodes.plusButton=x.default.make("div",this.CSS.plusButton,{innerHTML:_.IconPlus}),x.default.append(this.nodes.actions,this.nodes.plusButton),this.readOnlyMutableListeners.on(this.nodes.plusButton,"click",function(){B.tooltip.hide(!0),B.plusButtonClicked()},!1);var P=x.default.make("div");P.appendChild(document.createTextNode(v.default.ui(w.I18nInternalNS.ui.toolbar.toolbox,"Add"))),P.appendChild(x.default.make("div",this.CSS.plusButtonShortcut,{textContent:"\u21E5 Tab"})),this.tooltip.onHover(this.nodes.plusButton,P,{hidingDelay:400}),this.nodes.settingsToggler=x.default.make("span",this.CSS.settingsToggler,{innerHTML:_.IconMenu}),x.default.append(this.nodes.actions,this.nodes.settingsToggler),this.tooltip.onHover(this.nodes.settingsToggler,v.default.ui(w.I18nInternalNS.ui.blockTunes.toggler,"Click to tune"),{hidingDelay:400}),x.default.append(this.nodes.actions,this.makeToolbox()),x.default.append(this.nodes.actions,this.Editor.BlockSettings.getElement()),x.default.append(this.Editor.UI.nodes.wrapper,this.nodes.wrapper)}},{key:"makeToolbox",value:function(){var B=this;return this.toolboxInstance=new c.default({api:this.Editor.API.methods,tools:this.Editor.Tools.blockTools,i18nLabels:{filter:v.default.ui(w.I18nInternalNS.ui.popover,"Filter"),nothingFound:v.default.ui(w.I18nInternalNS.ui.popover,"Nothing found")}}),this.toolboxInstance.on(c.ToolboxEvent.Opened,function(){B.Editor.UI.nodes.wrapper.classList.add(B.CSS.openedToolboxHolderModifier)}),this.toolboxInstance.on(c.ToolboxEvent.Closed,function(){B.Editor.UI.nodes.wrapper.classList.remove(B.CSS.openedToolboxHolderModifier)}),this.toolboxInstance.on(c.ToolboxEvent.BlockAdded,function(P){var M=P.block,O=B.Editor,I=O.BlockManager,j=O.Caret,H=I.getBlockById(M.id);H.inputs.length===0&&(H===I.lastBlock?(I.insertAtEnd(),j.setToBlock(I.lastBlock)):j.setToBlock(I.nextBlock))}),this.toolboxInstance.make()}},{key:"plusButtonClicked",value:function(){this.Editor.BlockManager.currentBlock=this.hoveredBlock,this.toolboxInstance.toggle()}},{key:"enableModuleBindings",value:function(){var B=this;this.readOnlyMutableListeners.on(this.nodes.settingsToggler,"mousedown",function(P){P.stopPropagation(),B.settingsTogglerClicked(),B.toolboxInstance.close(),B.tooltip.hide(!0)},!0),y.isMobileScreen()||this.eventsDispatcher.on(this.Editor.UI.events.blockHovered,function(P){B.Editor.BlockSettings.opened||B.toolboxInstance.opened||B.moveAndOpen(P.block)})}},{key:"disableModuleBindings",value:function(){this.readOnlyMutableListeners.clearAll()}},{key:"settingsTogglerClicked",value:function(){this.Editor.BlockManager.currentBlock=this.hoveredBlock,this.Editor.BlockSettings.opened?this.Editor.BlockSettings.close():this.Editor.BlockSettings.open(this.hoveredBlock)}},{key:"drawUI",value:function(){this.Editor.BlockSettings.make(),this.make()}},{key:"destroy",value:function(){this.removeAllNodes(),this.toolboxInstance&&this.toolboxInstance.destroy(),this.tooltip.destroy()}}]),L}(m.default);s.default=C,C.displayName="Toolbar",r.exports=t.default})=="function"?i.apply(t,n):i)===void 0||(r.exports=o)},function(r,t,e){var i,n,o;n=[t,e(40),e(2),e(3),e(5),e(6),e(4),e(7),e(19),e(112),e(67),e(387),e(82),e(8),e(388)],(o=typeof(i=function(a,s,l,d,u,h,p,m,x,y,v,w,k,c,_){"use strict";var g=e(1);function b(S){var A=function(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(L){return!1}}();return function(){var L,B=(0,p.default)(S);if(A){var P=(0,p.default)(this).constructor;L=Reflect.construct(B,arguments,P)}else L=B.apply(this,arguments);return(0,h.default)(this,L)}}Object.defineProperty(a,"__esModule",{value:!0}),a.default=a.PopoverEvent=void 0,s=g(s),l=g(l),d=g(d),u=g(u),h=g(h),p=g(p),m=g(m),x=g(x),y=g(y),v=g(v),w=g(w),k=g(k),_=g(_);var E,T=function(S,A,L,B){var P,M=arguments.length,O=M<3?A:B===null?B=Object.getOwnPropertyDescriptor(A,L):B;if((typeof Reflect=="undefined"?"undefined":(0,m.default)(Reflect))==="object"&&typeof Reflect.decorate=="function")O=Reflect.decorate(S,A,L,B);else for(var I=S.length-1;I>=0;I--)(P=S[I])&&(O=(M<3?P(O):M>3?P(A,L,O):P(A,L))||O);return M>3&&O&&Object.defineProperty(A,L,O),O};a.PopoverEvent=E,function(S){S.OverlayClicked="overlay-clicked",S.Close="close"}(E||(a.PopoverEvent=E={}));var C=function(S){(0,u.default)(L,S);var A=b(L);function L(B){var P,M=B.items,O=B.className,I=B.searchable,j=B.filterLabel,H=B.nothingFoundLabel,N=B.customContent,D=B.customContentFlippableItems,K=B.scopeElement;return(0,l.default)(this,L),(P=A.call(this)).customContentFlippableItems=[],P.isShown=!1,P.nodes={wrapper:null,popover:null,items:null,nothingFound:null,overlay:null},P.scrollLocker=new _.default,P.itemsRequiringConfirmation={},P.removeSpecialHoverBehavior=function(){var q=P.nodes.items.querySelector(".".concat(L.CSS.itemNoHover));q&&q.classList.remove(L.CSS.itemNoHover)},P.onFlip=function(){P.disableSpecialHoverAndFocusBehavior()},P.items=M,P.customContent=N,P.customContentFlippableItems=D,P.className=O||"",P.searchable=I,P.listeners=new y.default,P.scopeElement=K,P.filterLabel=j,P.nothingFoundLabel=H,P.render(),P.enableFlipper(),P}return(0,d.default)(L,[{key:"getElement",value:function(){return this.nodes.wrapper}},{key:"show",value:function(){var B=this;this.shouldOpenPopoverBottom||(this.nodes.wrapper.style.setProperty("--popover-height",this.calculateHeight()+"px"),this.nodes.wrapper.classList.add(this.className+"--opened-top")),this.search&&this.search.clear(),this.nodes.items.scrollTop=0,this.nodes.popover.classList.add(L.CSS.popoverOpened),this.nodes.overlay.classList.remove(L.CSS.popoverOverlayHidden),this.flipper.activate(this.flippableElements),this.searchable&&setTimeout(function(){B.search.focus()},100),(0,c.isMobileScreen)()&&this.scrollLocker.lock(),this.isShown=!0}},{key:"hide",value:function(){var B=this;this.isShown&&(this.nodes.popover.classList.remove(L.CSS.popoverOpened),this.nodes.overlay.classList.add(L.CSS.popoverOverlayHidden),this.flipper.deactivate(),(0,c.isMobileScreen)()&&this.scrollLocker.unlock(),this.isShown=!1,this.nodes.wrapper.classList.remove(this.className+"--opened-top"),Array.from(this.nodes.items.querySelectorAll(".".concat(L.CSS.itemConfirmation))).forEach(function(P){return B.cleanUpConfirmationStateForItem(P)}),this.disableSpecialHoverAndFocusBehavior(),this.emit(E.Close))}},{key:"destroy",value:function(){this.flipper.deactivate(),this.listeners.removeAll(),this.disableSpecialHoverAndFocusBehavior(),(0,c.isMobileScreen)()&&this.scrollLocker.unlock()}},{key:"hasFocus",value:function(){return this.flipper.hasFocus()}},{key:"calculateHeight",value:function(){var B,P=this.nodes.popover.cloneNode(!0);return P.style.visibility="hidden",P.style.position="absolute",P.style.top="-1000px",P.classList.add(L.CSS.popoverOpened),document.body.appendChild(P),B=P.offsetHeight,P.remove(),B}},{key:"render",value:function(){var B=this;this.nodes.wrapper=x.default.make("div",this.className),this.nodes.popover=x.default.make("div",L.CSS.popover),this.nodes.wrapper.appendChild(this.nodes.popover),this.nodes.overlay=x.default.make("div",[L.CSS.popoverOverlay,L.CSS.popoverOverlayHidden]),this.nodes.wrapper.appendChild(this.nodes.overlay),this.searchable&&this.addSearch(this.nodes.popover),this.customContent&&(this.customContent.classList.add(L.CSS.customContent),this.nodes.popover.appendChild(this.customContent)),this.nodes.items=x.default.make("div",L.CSS.itemsWrapper),this.items.forEach(function(P){B.nodes.items.appendChild(B.createItem(P))}),this.nodes.popover.appendChild(this.nodes.items),this.nodes.nothingFound=x.default.make("div",[L.CSS.noFoundMessage],{textContent:this.nothingFoundLabel}),this.nodes.popover.appendChild(this.nodes.nothingFound),this.listeners.on(this.nodes.popover,"click",function(P){var M=P.target.closest(".".concat(L.CSS.item));M&&B.itemClicked(M,P)}),this.listeners.on(this.nodes.overlay,"click",function(){B.emit(E.OverlayClicked)})}},{key:"addSearch",value:function(B){var P=this;this.search=new w.default({items:this.items,placeholder:this.filterLabel,onSearch:function(O){var I=[];P.items.forEach(function(N,D){var K=P.nodes.items.children[D];O.includes(N)?(I.push(K),K.classList.remove(L.CSS.itemHidden)):K.classList.add(L.CSS.itemHidden)}),P.nodes.nothingFound.classList.toggle(L.CSS.noFoundMessageShown,I.length===0);var j=O.length===P.items.length,H=j?P.flippableElements:I;P.customContent&&P.customContent.classList.toggle(L.CSS.customContentHidden,!j),P.flipper.isActivated&&(P.reactivateFlipper(H),P.flipper.focusFirst())}});var M=this.search.getElement();B.appendChild(M)}},{key:"createItem",value:function(B){var P=x.default.make("div",L.CSS.item);B.name&&(P.dataset.itemName=B.name);var M=x.default.make("div",L.CSS.itemLabel,{innerHTML:B.label});return P.appendChild(x.default.make("div",L.CSS.itemIcon,{innerHTML:B.icon||B.name.substring(0,1).toUpperCase()})),P.appendChild(M),B.secondaryLabel&&P.appendChild(x.default.make("div",L.CSS.itemSecondaryLabel,{textContent:B.secondaryLabel})),B.isActive&&P.classList.add(L.CSS.itemActive),B.isDisabled&&P.classList.add(L.CSS.itemDisabled),P}},{key:"itemClicked",value:function(B,P){var M=this,O=Array.from(this.nodes.items.children),I=O.indexOf(B),j=this.items[I];j.isDisabled||(O.filter(function(H){return H!==B}).forEach(function(H){M.cleanUpConfirmationStateForItem(H)}),j.confirmation?this.enableConfirmationStateForItem(j,B,I):(j.onActivate(j,P),this.toggleIfNeeded(I,O),j.closeOnActivate&&this.hide()))}},{key:"toggleIfNeeded",value:function(B,P){var M=this,O=this.items[B];if(O.toggle===!0)return O.isActive=!O.isActive,void P[B].classList.toggle(L.CSS.itemActive);if(typeof O.toggle=="string"){var I=this.items.filter(function(j){return j.toggle===O.toggle});if(I.length===1)return O.isActive=!O.isActive,void P[B].classList.toggle(L.CSS.itemActive);I.forEach(function(j){var H=M.items.indexOf(j),N=j===O;j.isActive=N,P[H].classList.toggle(L.CSS.itemActive,N)})}}},{key:"enableConfirmationStateForItem",value:function(B,P,M){var O;this.itemsRequiringConfirmation[M]===void 0&&(this.itemsRequiringConfirmation[M]=B);var I=Object.assign(Object.assign(Object.assign({},B),B.confirmation),{confirmation:B.confirmation.confirmation});this.items[M]=I;var j=this.createItem(I);(O=j.classList).add.apply(O,[L.CSS.itemConfirmation].concat((0,s.default)(Array.from(P.classList)))),P.parentElement.replaceChild(j,P),this.enableSpecialHoverAndFocusBehavior(j),this.reactivateFlipper(this.flippableElements,this.flippableElements.indexOf(j))}},{key:"cleanUpConfirmationStateForItem",value:function(B){var P=Array.from(this.nodes.items.children).indexOf(B),M=this.itemsRequiringConfirmation[P];if(M!==void 0){var O=this.createItem(M);B.parentElement.replaceChild(O,B),this.items[P]=M,delete this.itemsRequiringConfirmation[P],B.removeEventListener("mouseleave",this.removeSpecialHoverBehavior),this.disableSpecialHoverAndFocusBehavior(),this.reactivateFlipper(this.flippableElements,this.flippableElements.indexOf(O))}}},{key:"enableSpecialHoverAndFocusBehavior",value:function(B){B.classList.add(L.CSS.itemNoHover),B.classList.add(L.CSS.itemNoFocus),B.addEventListener("mouseleave",this.removeSpecialHoverBehavior,{once:!0}),this.flipper.onFlip(this.onFlip)}},{key:"disableSpecialHoverAndFocusBehavior",value:function(){this.removeSpecialFocusBehavior(),this.removeSpecialHoverBehavior(),this.flipper.removeOnFlip(this.onFlip)}},{key:"removeSpecialFocusBehavior",value:function(){var B=this.nodes.items.querySelector(".".concat(L.CSS.itemNoFocus));B&&B.classList.remove(L.CSS.itemNoFocus)}},{key:"reactivateFlipper",value:function(B,P){this.flipper.deactivate(),this.flipper.activate(B,P)}},{key:"enableFlipper",value:function(){this.flipper=new v.default({items:this.flippableElements,focusedItemClass:L.CSS.itemFocused,allowedKeys:[c.keyCodes.TAB,c.keyCodes.UP,c.keyCodes.DOWN,c.keyCodes.ENTER]})}},{key:"flippableElements",get:function(){var B=Array.from(this.nodes.wrapper.querySelectorAll(".".concat(L.CSS.item)));return(this.customContentFlippableItems||[]).concat(B)}},{key:"shouldOpenPopoverBottom",get:function(){var B=this.nodes.wrapper.getBoundingClientRect(),P=this.scopeElement.getBoundingClientRect(),M=this.calculateHeight(),O=B.top+M,I=B.top-M,j=Math.min(window.innerHeight,P.bottom);return I<P.top||O<=j}}],[{key:"CSS",get:function(){return{popover:"ce-popover",popoverOpened:"ce-popover--opened",itemsWrapper:"ce-popover__items",item:"ce-popover__item",itemHidden:"ce-popover__item--hidden",itemFocused:"ce-popover__item--focused",itemActive:"ce-popover__item--active",itemDisabled:"ce-popover__item--disabled",itemConfirmation:"ce-popover__item--confirmation",itemNoHover:"ce-popover__item--no-visible-hover",itemNoFocus:"ce-popover__item--no-visible-focus",itemLabel:"ce-popover__item-label",itemIcon:"ce-popover__item-icon",itemSecondaryLabel:"ce-popover__item-secondary-label",noFoundMessage:"ce-popover__no-found",noFoundMessageShown:"ce-popover__no-found--shown",popoverOverlay:"ce-popover__overlay",popoverOverlayHidden:"ce-popover__overlay--hidden",customContent:"ce-popover__custom-content",customContentHidden:"ce-popover__custom-content--hidden"}}}]),L}(k.default);a.default=C,C.displayName="Popover",T([c.cacheable],C.prototype,"calculateHeight",null)})=="function"?i.apply(t,n):i)===void 0||(r.exports=o)},function(r,t,e){var i=e(13),n=e(10).document,o=i(n)&&i(n.createElement);r.exports=function(a){return o?n.createElement(a):{}}},function(r,t,e){t.f=e(14)},function(r,t,e){var i=e(70)("keys"),n=e(45);r.exports=function(o){return i[o]||(i[o]=n(o))}},function(r,t){r.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},function(r,t,e){var i=e(10).document;r.exports=i&&i.documentElement},function(r,t,e){var i=e(13),n=e(12),o=function(a,s){if(n(a),!i(s)&&s!==null)throw TypeError(s+": can't set as prototype!")};r.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(a,s,l){try{(l=e(31)(Function.call,e(34).f(Object.prototype,"__proto__").set,2))(a,[]),s=!(a instanceof Array)}catch(d){s=!0}return function(d,u){return o(d,u),s?d.__proto__=u:l(d,u),d}}({},!1):void 0),check:o}},function(r,t){r.exports=`	
\v\f\r \xA0\u1680\u180E\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200A\u202F\u205F\u3000\u2028\u2029\uFEFF`},function(r,t,e){var i=e(13),n=e(91).set;r.exports=function(o,a,s){var l,d=a.constructor;return d!==s&&typeof d=="function"&&(l=d.prototype)!==s.prototype&&i(l)&&n&&n(o,l),o}},function(r,t,e){"use strict";var i=e(33),n=e(38);r.exports=function(o){var a=String(n(this)),s="",l=i(o);if(l<0||l==1/0)throw RangeError("Count can't be negative");for(;l>0;(l>>>=1)&&(a+=a))1&l&&(s+=a);return s}},function(r,t){r.exports=Math.sign||function(e){return(e=+e)==0||e!=e?e:e<0?-1:1}},function(r,t){var e=Math.expm1;r.exports=!e||e(10)>22025.465794806718||e(10)<22025.465794806718||e(-2e-17)!=-2e-17?function(i){return(i=+i)==0?i:i>-1e-6&&i<1e-6?i+i*i/2:Math.exp(i)-1}:e},function(r,t,e){var i=e(33),n=e(38);r.exports=function(o){return function(a,s){var l,d,u=String(n(a)),h=i(s),p=u.length;return h<0||h>=p?o?"":void 0:(l=u.charCodeAt(h))<55296||l>56319||h+1===p||(d=u.charCodeAt(h+1))<56320||d>57343?o?u.charAt(h):l:o?u.slice(h,h+2):d-56320+(l-55296<<10)+65536}}},function(r,t,e){"use strict";var i=e(46),n=e(0),o=e(23),a=e(27),s=e(57),l=e(131),d=e(55),u=e(51),h=e(14)("iterator"),p=!([].keys&&"next"in[].keys()),m=function(){return this};r.exports=function(x,y,v,w,k,c,_){l(v,y,w);var g,b,E,T=function(I){if(!p&&I in L)return L[I];switch(I){case"keys":case"values":return function(){return new v(this,I)}}return function(){return new v(this,I)}},C=y+" Iterator",S=k=="values",A=!1,L=x.prototype,B=L[h]||L["@@iterator"]||k&&L[k],P=B||T(k),M=k?S?T("entries"):P:void 0,O=y=="Array"&&L.entries||B;if(O&&(E=u(O.call(new x)))!==Object.prototype&&E.next&&(d(E,C,!0),i||typeof E[h]=="function"||a(E,h,m)),S&&B&&B.name!=="values"&&(A=!0,P=function(){return B.call(this)}),i&&!_||!p&&!A&&L[h]||a(L,h,P),s[y]=P,s[C]=m,k)if(g={values:S?P:T("values"),keys:c?P:T("keys"),entries:M},_)for(b in g)b in L||o(L,b,g[b]);else n(n.P+n.F*(p||A),y,g);return g}},function(r,t,e){var i=e(100),n=e(38);r.exports=function(o,a,s){if(i(a))throw TypeError("String#"+s+" doesn't accept regex!");return String(n(o))}},function(r,t,e){var i=e(13),n=e(37),o=e(14)("match");r.exports=function(a){var s;return i(a)&&((s=a[o])!==void 0?!!s:n(a)=="RegExp")}},function(r,t,e){var i=e(14)("match");r.exports=function(n){var o=/./;try{"/./"[n](o)}catch(a){try{return o[i]=!1,!"/./"[n](o)}catch(s){}}return!0}},function(r,t,e){var i=e(57),n=e(14)("iterator"),o=Array.prototype;r.exports=function(a){return a!==void 0&&(i.Array===a||o[n]===a)}},function(r,t,e){"use strict";var i=e(18),n=e(44);r.exports=function(o,a,s){a in o?i.f(o,a,n(0,s)):o[a]=s}},function(r,t,e){var i=e(64),n=e(14)("iterator"),o=e(57);r.exports=e(16).getIteratorMethod=function(a){if(a!=null)return a[n]||a["@@iterator"]||o[i(a)]}},function(r,t,e){"use strict";var i=e(22),n=e(48),o=e(15);r.exports=function(a){for(var s=i(this),l=o(s.length),d=arguments.length,u=n(d>1?arguments[1]:void 0,l),h=d>2?arguments[2]:void 0,p=h===void 0?l:n(h,l);p>u;)s[u++]=a;return s}},function(r,t,e){"use strict";var i=e(52),n=e(136),o=e(57),a=e(28);r.exports=e(98)(Array,"Array",function(s,l){this._t=a(s),this._i=0,this._k=l},function(){var s=this._t,l=this._k,d=this._i++;return!s||d>=s.length?(this._t=void 0,n(1)):n(0,l=="keys"?d:l=="values"?s[d]:[d,s[d]])},"values"),o.Arguments=o.Array,i("keys"),i("values"),i("entries")},function(r,t,e){"use strict";var i,n,o=e(75),a=RegExp.prototype.exec,s=String.prototype.replace,l=a,d=(i=/a/,n=/b*/g,a.call(i,"a"),a.call(n,"a"),i.lastIndex!==0||n.lastIndex!==0),u=/()??/.exec("")[1]!==void 0;(d||u)&&(l=function(h){var p,m,x,y,v=this;return u&&(m=new RegExp("^"+v.source+"$(?!\\s)",o.call(v))),d&&(p=v.lastIndex),x=a.call(v,h),d&&x&&(v.lastIndex=v.global?x.index+x[0].length:p),u&&x&&x.length>1&&s.call(x[0],m,function(){for(y=1;y<arguments.length-2;y++)arguments[y]===void 0&&(x[y]=void 0)}),x}),r.exports=l},function(r,t,e){"use strict";var i=e(97)(!0);r.exports=function(n,o,a){return o+(a?i(n,o).length:1)}},function(r,t,e){var i,n,o,a=e(31),s=e(125),l=e(90),d=e(86),u=e(10),h=u.process,p=u.setImmediate,m=u.clearImmediate,x=u.MessageChannel,y=u.Dispatch,v=0,w={},k=function(){var _=+this;if(w.hasOwnProperty(_)){var g=w[_];delete w[_],g()}},c=function(_){k.call(_.data)};p&&m||(p=function(_){for(var g=[],b=1;arguments.length>b;)g.push(arguments[b++]);return w[++v]=function(){s(typeof _=="function"?_:Function(_),g)},i(v),v},m=function(_){delete w[_]},e(37)(h)=="process"?i=function(_){h.nextTick(a(k,_,1))}:y&&y.now?i=function(_){y.now(a(k,_,1))}:x?(o=(n=new x).port2,n.port1.onmessage=c,i=a(o.postMessage,o,1)):u.addEventListener&&typeof postMessage=="function"&&!u.importScripts?(i=function(_){u.postMessage(_+"","*")},u.addEventListener("message",c,!1)):i="onreadystatechange"in d("script")?function(_){l.appendChild(d("script")).onreadystatechange=function(){l.removeChild(this),k.call(_)}}:function(_){setTimeout(a(k,_,1),0)}),r.exports={set:p,clear:m}},function(r,t,e){"use strict";var i=e(10),n=e(17),o=e(46),a=e(81),s=e(27),l=e(60),d=e(11),u=e(59),h=e(33),p=e(15),m=e(144),x=e(50).f,y=e(18).f,v=e(105),w=e(55),k=i.ArrayBuffer,c=i.DataView,_=i.Math,g=i.RangeError,b=i.Infinity,E=k,T=_.abs,C=_.pow,S=_.floor,A=_.log,L=_.LN2,B=n?"_b":"buffer",P=n?"_l":"byteLength",M=n?"_o":"byteOffset";function O(le,ke,Re){var Me,Ne,et,Ke=new Array(Re),Je=8*Re-ke-1,Ue=(1<<Je)-1,nt=Ue>>1,Ze=ke===23?C(2,-24)-C(2,-77):0,de=0,ye=le<0||le===0&&1/le<0?1:0;for((le=T(le))!=le||le===b?(Ne=le!=le?1:0,Me=Ue):(Me=S(A(le)/L),le*(et=C(2,-Me))<1&&(Me--,et*=2),(le+=Me+nt>=1?Ze/et:Ze*C(2,1-nt))*et>=2&&(Me++,et/=2),Me+nt>=Ue?(Ne=0,Me=Ue):Me+nt>=1?(Ne=(le*et-1)*C(2,ke),Me+=nt):(Ne=le*C(2,nt-1)*C(2,ke),Me=0));ke>=8;Ke[de++]=255&Ne,Ne/=256,ke-=8);for(Me=Me<<ke|Ne,Je+=ke;Je>0;Ke[de++]=255&Me,Me/=256,Je-=8);return Ke[--de]|=128*ye,Ke}function I(le,ke,Re){var Me,Ne=8*Re-ke-1,et=(1<<Ne)-1,Ke=et>>1,Je=Ne-7,Ue=Re-1,nt=le[Ue--],Ze=127&nt;for(nt>>=7;Je>0;Ze=256*Ze+le[Ue],Ue--,Je-=8);for(Me=Ze&(1<<-Je)-1,Ze>>=-Je,Je+=ke;Je>0;Me=256*Me+le[Ue],Ue--,Je-=8);if(Ze===0)Ze=1-Ke;else{if(Ze===et)return Me?NaN:nt?-b:b;Me+=C(2,ke),Ze-=Ke}return(nt?-1:1)*Me*C(2,Ze-ke)}function j(le){return le[3]<<24|le[2]<<16|le[1]<<8|le[0]}function H(le){return[255&le]}function N(le){return[255&le,le>>8&255]}function D(le){return[255&le,le>>8&255,le>>16&255,le>>24&255]}function K(le){return O(le,52,8)}function q(le){return O(le,23,4)}function U(le,ke,Re){y(le.prototype,ke,{get:function(){return this[Re]}})}function G(le,ke,Re,Me){var Ne=m(+Re);if(Ne+ke>le[P])throw g("Wrong index!");var et=le[B]._b,Ke=Ne+le[M],Je=et.slice(Ke,Ke+ke);return Me?Je:Je.reverse()}function Q(le,ke,Re,Me,Ne,et){var Ke=m(+Re);if(Ke+ke>le[P])throw g("Wrong index!");for(var Je=le[B]._b,Ue=Ke+le[M],nt=Me(+Ne),Ze=0;Ze<ke;Ze++)Je[Ue+Ze]=nt[et?Ze:ke-Ze-1]}if(a.ABV){if(!d(function(){k(1)})||!d(function(){new k(-1)})||d(function(){return new k,new k(1.5),new k(NaN),k.name!="ArrayBuffer"})){for(var X,ie=(k=function(le){return u(this,k),new E(m(le))}).prototype=E.prototype,ue=x(E),fe=0;ue.length>fe;)(X=ue[fe++])in k||s(k,X,E[X]);o||(ie.constructor=k)}var be=new c(new k(2)),Se=c.prototype.setInt8;be.setInt8(0,2147483648),be.setInt8(1,2147483649),!be.getInt8(0)&&be.getInt8(1)||l(c.prototype,{setInt8:function(le,ke){Se.call(this,le,ke<<24>>24)},setUint8:function(le,ke){Se.call(this,le,ke<<24>>24)}},!0)}else k=function(le){u(this,k,"ArrayBuffer");var ke=m(le);this._b=v.call(new Array(ke),0),this[P]=ke},c=function(le,ke,Re){u(this,c,"DataView"),u(le,k,"DataView");var Me=le[P],Ne=h(ke);if(Ne<0||Ne>Me)throw g("Wrong offset!");if(Ne+(Re=Re===void 0?Me-Ne:p(Re))>Me)throw g("Wrong length!");this[B]=le,this[M]=Ne,this[P]=Re},n&&(U(k,"byteLength","_l"),U(c,"buffer","_b"),U(c,"byteLength","_l"),U(c,"byteOffset","_o")),l(c.prototype,{getInt8:function(le){return G(this,1,le)[0]<<24>>24},getUint8:function(le){return G(this,1,le)[0]},getInt16:function(le){var ke=G(this,2,le,arguments[1]);return(ke[1]<<8|ke[0])<<16>>16},getUint16:function(le){var ke=G(this,2,le,arguments[1]);return ke[1]<<8|ke[0]},getInt32:function(le){return j(G(this,4,le,arguments[1]))},getUint32:function(le){return j(G(this,4,le,arguments[1]))>>>0},getFloat32:function(le){return I(G(this,4,le,arguments[1]),23,4)},getFloat64:function(le){return I(G(this,8,le,arguments[1]),52,8)},setInt8:function(le,ke){Q(this,1,le,H,ke)},setUint8:function(le,ke){Q(this,1,le,H,ke)},setInt16:function(le,ke){Q(this,2,le,N,ke,arguments[2])},setUint16:function(le,ke){Q(this,2,le,N,ke,arguments[2])},setInt32:function(le,ke){Q(this,4,le,D,ke,arguments[2])},setUint32:function(le,ke){Q(this,4,le,D,ke,arguments[2])},setFloat32:function(le,ke){Q(this,4,le,q,ke,arguments[2])},setFloat64:function(le,ke){Q(this,8,le,K,ke,arguments[2])}});w(k,"ArrayBuffer"),w(c,"DataView"),s(c.prototype,a.VIEW,!0),t.ArrayBuffer=k,t.DataView=c},function(r,t){function e(i,n){return r.exports=e=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(o,a){return o.__proto__=a,o},r.exports.__esModule=!0,r.exports.default=r.exports,e(i,n)}r.exports=e,r.exports.__esModule=!0,r.exports.default=r.exports},function(r,t,e){var i,n,o,a=e(7);n=[t,e(2),e(3),e(8)],(o=typeof(i=function(s,l,d,u){"use strict";var h=e(1);function p(x){if(typeof WeakMap!="function")return null;var y=new WeakMap,v=new WeakMap;return(p=function(w){return w?v:y})(x)}Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0,l=h(l),d=h(d),u=function(x,y){if(!y&&x&&x.__esModule)return x;if(x===null||a(x)!=="object"&&typeof x!="function")return{default:x};var v=p(y);if(v&&v.has(x))return v.get(x);var w={},k=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var c in x)if(c!=="default"&&Object.prototype.hasOwnProperty.call(x,c)){var _=k?Object.getOwnPropertyDescriptor(x,c):null;_&&(_.get||_.set)?Object.defineProperty(w,c,_):w[c]=x[c]}return w.default=x,v&&v.set(x,w),w}(u);var m=function(){function x(){(0,l.default)(this,x),this.allListeners=[]}return(0,d.default)(x,[{key:"on",value:function(y,v,w){var k=arguments.length>3&&arguments[3]!==void 0&&arguments[3],c=u.generateId("l"),_={id:c,element:y,eventType:v,handler:w,options:k},g=this.findOne(y,v,w);if(!g)return this.allListeners.push(_),y.addEventListener(v,w,k),c}},{key:"off",value:function(y,v,w,k){var c=this,_=this.findAll(y,v,w);_.forEach(function(g,b){var E=c.allListeners.indexOf(_[b]);E>-1&&(c.allListeners.splice(E,1),g.element.removeEventListener(g.eventType,g.handler,g.options))})}},{key:"offById",value:function(y){var v=this.findById(y);v&&v.element.removeEventListener(v.eventType,v.handler,v.options)}},{key:"findOne",value:function(y,v,w){var k=this.findAll(y,v,w);return k.length>0?k[0]:null}},{key:"findAll",value:function(y,v,w){var k=y?this.findByEventTarget(y):[];return y&&v&&w?k.filter(function(c){return c.eventType===v&&c.handler===w}):y&&v?k.filter(function(c){return c.eventType===v}):k}},{key:"removeAll",value:function(){this.allListeners.map(function(y){y.element.removeEventListener(y.eventType,y.handler,y.options)}),this.allListeners=[]}},{key:"destroy",value:function(){this.removeAll()}},{key:"findByEventTarget",value:function(y){return this.allListeners.filter(function(v){if(v.element===y)return v})}},{key:"findByType",value:function(y){return this.allListeners.filter(function(v){if(v.eventType===y)return v})}},{key:"findByHandler",value:function(y){return this.allListeners.filter(function(v){if(v.handler===y)return v})}},{key:"findById",value:function(y){return this.allListeners.find(function(v){return v.id===y})}}]),x}();s.default=m,m.displayName="Listeners",r.exports=t.default})=="function"?i.apply(t,n):i)===void 0||(r.exports=o)},function(r,t,e){var i,n,o;n=[t],(o=typeof(i=function(a){"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var s=function(l){var d={get id(){return l.id},get name(){return l.name},get config(){return l.config},get holder(){return l.holder},get isEmpty(){return l.isEmpty},get selected(){return l.selected},set stretched(u){l.stretched=u},get stretched(){return l.stretched},call:function(u,h){return l.call(u,h)},save:function(){return l.save()},validate:function(u){return l.validate(u)},dispatchChange:function(){l.dispatchChange()}};Object.setPrototypeOf(this,d)};a.default=s,r.exports=t.default})=="function"?i.apply(t,n):i)===void 0||(r.exports=o)},function(r,t,e){var i=e(377);function n(){return typeof Reflect!="undefined"&&Reflect.get?(r.exports=n=Reflect.get.bind(),r.exports.__esModule=!0,r.exports.default=r.exports):(r.exports=n=function(o,a,s){var l=i(o,a);if(l){var d=Object.getOwnPropertyDescriptor(l,a);return d.get?d.get.call(arguments.length<3?o:s):d.value}},r.exports.__esModule=!0,r.exports.default=r.exports),n.apply(this,arguments)}r.exports=n,r.exports.__esModule=!0,r.exports.default=r.exports},function(r,t,e){var i,n,o;n=[t,e(2),e(3),e(381)],(o=typeof(i=function(a,s,l,d){"use strict";var u=e(1);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,s=u(s),l=u(l),d=u(d);var h=function(){function p(){(0,s.default)(this,p),this.lib=new d.default}return(0,l.default)(p,[{key:"destroy",value:function(){this.lib.destroy()}},{key:"show",value:function(m,x,y){this.lib.show(m,x,y)}},{key:"hide",value:function(){var m=arguments.length>0&&arguments[0]!==void 0&&arguments[0];this.lib.hide(m)}},{key:"onHover",value:function(m,x,y){this.lib.onHover(m,x,y)}}]),p}();a.default=h,h.displayName="Tooltip",r.exports=t.default})=="function"?i.apply(t,n):i)===void 0||(r.exports=o)},function(r,t,e){var i,n,o;n=[t,e(40),e(2),e(3),e(385)],(o=typeof(i=function(a,s,l,d,u){"use strict";var h=e(1);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,s=h(s),l=h(l),d=h(d),u=h(u);var p=function(){function x(){(0,l.default)(this,x),this.registeredShortcuts=new Map}return(0,d.default)(x,[{key:"add",value:function(y){if(this.findShortcut(y.on,y.name))throw Error("Shortcut ".concat(y.name," is already registered for ").concat(y.on,". Please remove it before add a new handler."));var v=new u.default({name:y.name,on:y.on,callback:y.handler}),w=this.registeredShortcuts.get(y.on)||[];this.registeredShortcuts.set(y.on,[].concat((0,s.default)(w),[v]))}},{key:"remove",value:function(y,v){var w=this.findShortcut(y,v);if(w){w.remove();var k=this.registeredShortcuts.get(y);this.registeredShortcuts.set(y,k.filter(function(c){return c!==w}))}}},{key:"findShortcut",value:function(y,v){return(this.registeredShortcuts.get(y)||[]).find(function(w){return w.name===v})}}]),x}();p.displayName="Shortcuts";var m=new p;a.default=m,r.exports=t.default})=="function"?i.apply(t,n):i)===void 0||(r.exports=o)},function(r,t,e){r.exports=!e(17)&&!e(11)(function(){return Object.defineProperty(e(86)("div"),"a",{get:function(){return 7}}).a!=7})},function(r,t,e){var i=e(10),n=e(16),o=e(46),a=e(87),s=e(18).f;r.exports=function(l){var d=n.Symbol||(n.Symbol=o?{}:i.Symbol||{});l.charAt(0)=="_"||l in d||s(d,l,{value:a.f(l)})}},function(r,t,e){var i=e(26),n=e(28),o=e(71)(!1),a=e(88)("IE_PROTO");r.exports=function(s,l){var d,u=n(s),h=0,p=[];for(d in u)d!=a&&i(u,d)&&p.push(d);for(;l.length>h;)i(u,d=l[h++])&&(~o(p,d)||p.push(d));return p}},function(r,t,e){var i=e(18),n=e(12),o=e(47);r.exports=e(17)?Object.defineProperties:function(a,s){n(a);for(var l,d=o(s),u=d.length,h=0;u>h;)i.f(a,l=d[h++],s[l]);return a}},function(r,t,e){var i=e(28),n=e(50).f,o={}.toString,a=typeof window=="object"&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];r.exports.f=function(s){return a&&o.call(s)=="[object Window]"?function(l){try{return n(l)}catch(d){return a.slice()}}(s):n(i(s))}},function(r,t,e){"use strict";var i=e(17),n=e(47),o=e(72),a=e(63),s=e(22),l=e(62),d=Object.assign;r.exports=!d||e(11)(function(){var u={},h={},p=Symbol(),m="abcdefghijklmnopqrst";return u[p]=7,m.split("").forEach(function(x){h[x]=x}),d({},u)[p]!=7||Object.keys(d({},h)).join("")!=m})?function(u,h){for(var p=s(u),m=arguments.length,x=1,y=o.f,v=a.f;m>x;)for(var w,k=l(arguments[x++]),c=y?n(k).concat(y(k)):n(k),_=c.length,g=0;_>g;)w=c[g++],i&&!v.call(k,w)||(p[w]=k[w]);return p}:d},function(r,t){r.exports=Object.is||function(e,i){return e===i?e!==0||1/e==1/i:e!=e&&i!=i}},function(r,t,e){"use strict";var i=e(32),n=e(13),o=e(125),a=[].slice,s={},l=function(d,u,h){if(!(u in s)){for(var p=[],m=0;m<u;m++)p[m]="a["+m+"]";s[u]=Function("F,a","return new F("+p.join(",")+")")}return s[u](d,h)};r.exports=Function.bind||function(d){var u=i(this),h=a.call(arguments,1),p=function(){var m=h.concat(a.call(arguments));return this instanceof p?l(u,m.length,m):o(u,m,d)};return n(u.prototype)&&(p.prototype=u.prototype),p}},function(r,t){r.exports=function(e,i,n){var o=n===void 0;switch(i.length){case 0:return o?e():e.call(n);case 1:return o?e(i[0]):e.call(n,i[0]);case 2:return o?e(i[0],i[1]):e.call(n,i[0],i[1]);case 3:return o?e(i[0],i[1],i[2]):e.call(n,i[0],i[1],i[2]);case 4:return o?e(i[0],i[1],i[2],i[3]):e.call(n,i[0],i[1],i[2],i[3])}return e.apply(n,i)}},function(r,t,e){var i=e(10).parseInt,n=e(56).trim,o=e(92),a=/^[-+]?0[xX]/;r.exports=i(o+"08")!==8||i(o+"0x16")!==22?function(s,l){var d=n(String(s),3);return i(d,l>>>0||(a.test(d)?16:10))}:i},function(r,t,e){var i=e(10).parseFloat,n=e(56).trim;r.exports=1/i(e(92)+"-0")!=-1/0?function(o){var a=n(String(o),3),s=i(a);return s===0&&a.charAt(0)=="-"?-0:s}:i},function(r,t,e){var i=e(37);r.exports=function(n,o){if(typeof n!="number"&&i(n)!="Number")throw TypeError(o);return+n}},function(r,t,e){var i=e(13),n=Math.floor;r.exports=function(o){return!i(o)&&isFinite(o)&&n(o)===o}},function(r,t){r.exports=Math.log1p||function(e){return(e=+e)>-1e-8&&e<1e-8?e-e*e/2:Math.log(1+e)}},function(r,t,e){"use strict";var i=e(49),n=e(44),o=e(55),a={};e(27)(a,e(14)("iterator"),function(){return this}),r.exports=function(s,l,d){s.prototype=i(a,{next:n(1,d)}),o(s,l+" Iterator")}},function(r,t,e){var i=e(12);r.exports=function(n,o,a,s){try{return s?o(i(a)[0],a[1]):o(a)}catch(d){var l=n.return;throw l!==void 0&&i(l.call(n)),d}}},function(r,t,e){var i=e(282);r.exports=function(n,o){return new(i(n))(o)}},function(r,t,e){var i=e(32),n=e(22),o=e(62),a=e(15);r.exports=function(s,l,d,u,h){i(l);var p=n(s),m=o(p),x=a(p.length),y=h?x-1:0,v=h?-1:1;if(d<2)for(;;){if(y in m){u=m[y],y+=v;break}if(y+=v,h?y<0:x<=y)throw TypeError("Reduce of empty array with no initial value")}for(;h?y>=0:x>y;y+=v)y in m&&(u=l(u,m[y],y,p));return u}},function(r,t,e){"use strict";var i=e(22),n=e(48),o=e(15);r.exports=[].copyWithin||function(a,s){var l=i(this),d=o(l.length),u=n(a,d),h=n(s,d),p=arguments.length>2?arguments[2]:void 0,m=Math.min((p===void 0?d:n(p,d))-h,d-u),x=1;for(h<u&&u<h+m&&(x=-1,h+=m-1,u+=m-1);m-- >0;)h in l?l[u]=l[h]:delete l[u],u+=x,h+=x;return l}},function(r,t){r.exports=function(e,i){return{value:i,done:!!e}}},function(r,t,e){"use strict";var i=e(107);e(0)({target:"RegExp",proto:!0,forced:i!==/./.exec},{exec:i})},function(r,t,e){e(17)&&/./g.flags!="g"&&e(18).f(RegExp.prototype,"flags",{configurable:!0,get:e(75)})},function(r,t,e){"use strict";var i,n,o,a,s=e(46),l=e(10),d=e(31),u=e(64),h=e(0),p=e(13),m=e(32),x=e(59),y=e(78),v=e(65),w=e(109).set,k=e(302)(),c=e(140),_=e(303),g=e(79),b=e(141),E=l.TypeError,T=l.process,C=T&&T.versions,S=C&&C.v8||"",A=l.Promise,L=u(T)=="process",B=function(){},P=n=c.f,M=!!function(){try{var q=A.resolve(1),U=(q.constructor={})[e(14)("species")]=function(G){G(B,B)};return(L||typeof PromiseRejectionEvent=="function")&&q.then(B)instanceof U&&S.indexOf("6.6")!==0&&g.indexOf("Chrome/66")===-1}catch(G){}}(),O=function(q){var U;return!(!p(q)||typeof(U=q.then)!="function")&&U},I=function(q,U){if(!q._n){q._n=!0;var G=q._c;k(function(){for(var Q=q._v,X=q._s==1,ie=0,ue=function(fe){var be,Se,le,ke=X?fe.ok:fe.fail,Re=fe.resolve,Me=fe.reject,Ne=fe.domain;try{ke?(X||(q._h==2&&N(q),q._h=1),ke===!0?be=Q:(Ne&&Ne.enter(),be=ke(Q),Ne&&(Ne.exit(),le=!0)),be===fe.promise?Me(E("Promise-chain cycle")):(Se=O(be))?Se.call(be,Re,Me):Re(be)):Me(Q)}catch(et){Ne&&!le&&Ne.exit(),Me(et)}};G.length>ie;)ue(G[ie++]);q._c=[],q._n=!1,U&&!q._h&&j(q)})}},j=function(q){w.call(l,function(){var U,G,Q,X=q._v,ie=H(q);if(ie&&(U=_(function(){L?T.emit("unhandledRejection",X,q):(G=l.onunhandledrejection)?G({promise:q,reason:X}):(Q=l.console)&&Q.error&&Q.error("Unhandled promise rejection",X)}),q._h=L||H(q)?2:1),q._a=void 0,ie&&U.e)throw U.v})},H=function(q){return q._h!==1&&(q._a||q._c).length===0},N=function(q){w.call(l,function(){var U;L?T.emit("rejectionHandled",q):(U=l.onrejectionhandled)&&U({promise:q,reason:q._v})})},D=function(q){var U=this;U._d||(U._d=!0,(U=U._w||U)._v=q,U._s=2,U._a||(U._a=U._c.slice()),I(U,!0))},K=function(q){var U,G=this;if(!G._d){G._d=!0,G=G._w||G;try{if(G===q)throw E("Promise can't be resolved itself");(U=O(q))?k(function(){var Q={_w:G,_d:!1};try{U.call(q,d(K,Q,1),d(D,Q,1))}catch(X){D.call(Q,X)}}):(G._v=q,G._s=1,I(G,!1))}catch(Q){D.call({_w:G,_d:!1},Q)}}};M||(A=function(q){x(this,A,"Promise","_h"),m(q),i.call(this);try{q(d(K,this,1),d(D,this,1))}catch(U){D.call(this,U)}},(i=function(q){this._c=[],this._a=void 0,this._s=0,this._d=!1,this._v=void 0,this._h=0,this._n=!1}).prototype=e(60)(A.prototype,{then:function(q,U){var G=P(v(this,A));return G.ok=typeof q!="function"||q,G.fail=typeof U=="function"&&U,G.domain=L?T.domain:void 0,this._c.push(G),this._a&&this._a.push(G),this._s&&I(this,!1),G.promise},catch:function(q){return this.then(void 0,q)}}),o=function(){var q=new i;this.promise=q,this.resolve=d(K,q,1),this.reject=d(D,q,1)},c.f=P=function(q){return q===A||q===a?new o(q):n(q)}),h(h.G+h.W+h.F*!M,{Promise:A}),e(55)(A,"Promise"),e(58)("Promise"),a=e(16).Promise,h(h.S+h.F*!M,"Promise",{reject:function(q){var U=P(this);return(0,U.reject)(q),U.promise}}),h(h.S+h.F*(s||!M),"Promise",{resolve:function(q){return b(s&&this===a?A:this,q)}}),h(h.S+h.F*!(M&&e(74)(function(q){A.all(q).catch(B)})),"Promise",{all:function(q){var U=this,G=P(U),Q=G.resolve,X=G.reject,ie=_(function(){var ue=[],fe=0,be=1;y(q,!1,function(Se){var le=fe++,ke=!1;ue.push(void 0),be++,U.resolve(Se).then(function(Re){ke||(ke=!0,ue[le]=Re,--be||Q(ue))},X)}),--be||Q(ue)});return ie.e&&X(ie.v),G.promise},race:function(q){var U=this,G=P(U),Q=G.reject,X=_(function(){y(q,!1,function(ie){U.resolve(ie).then(G.resolve,Q)})});return X.e&&Q(X.v),G.promise}})},function(r,t,e){"use strict";var i=e(32);function n(o){var a,s;this.promise=new o(function(l,d){if(a!==void 0||s!==void 0)throw TypeError("Bad Promise constructor");a=l,s=d}),this.resolve=i(a),this.reject=i(s)}r.exports.f=function(o){return new n(o)}},function(r,t,e){var i=e(12),n=e(13),o=e(140);r.exports=function(a,s){if(i(a),n(s)&&s.constructor===a)return s;var l=o.f(a);return(0,l.resolve)(s),l.promise}},function(r,t,e){"use strict";var i=e(18).f,n=e(49),o=e(60),a=e(31),s=e(59),l=e(78),d=e(98),u=e(136),h=e(58),p=e(17),m=e(43).fastKey,x=e(53),y=p?"_s":"size",v=function(w,k){var c,_=m(k);if(_!=="F")return w._i[_];for(c=w._f;c;c=c.n)if(c.k==k)return c};r.exports={getConstructor:function(w,k,c,_){var g=w(function(b,E){s(b,g,k,"_i"),b._t=k,b._i=n(null),b._f=void 0,b._l=void 0,b[y]=0,E!=null&&l(E,c,b[_],b)});return o(g.prototype,{clear:function(){for(var b=x(this,k),E=b._i,T=b._f;T;T=T.n)T.r=!0,T.p&&(T.p=T.p.n=void 0),delete E[T.i];b._f=b._l=void 0,b[y]=0},delete:function(b){var E=x(this,k),T=v(E,b);if(T){var C=T.n,S=T.p;delete E._i[T.i],T.r=!0,S&&(S.n=C),C&&(C.p=S),E._f==T&&(E._f=C),E._l==T&&(E._l=S),E[y]--}return!!T},forEach:function(b){x(this,k);for(var E,T=a(b,arguments.length>1?arguments[1]:void 0,3);E=E?E.n:this._f;)for(T(E.v,E.k,this);E&&E.r;)E=E.p},has:function(b){return!!v(x(this,k),b)}}),p&&i(g.prototype,"size",{get:function(){return x(this,k)[y]}}),g},def:function(w,k,c){var _,g,b=v(w,k);return b?b.v=c:(w._l=b={i:g=m(k,!0),k,v:c,p:_=w._l,n:void 0,r:!1},w._f||(w._f=b),_&&(_.n=b),w[y]++,g!=="F"&&(w._i[g]=b)),w},getEntry:v,setStrong:function(w,k,c){d(w,k,function(_,g){this._t=x(_,k),this._k=g,this._l=void 0},function(){for(var _=this._k,g=this._l;g&&g.r;)g=g.p;return this._t&&(this._l=g=g?g.n:this._t._f)?u(0,_=="keys"?g.k:_=="values"?g.v:[g.k,g.v]):(this._t=void 0,u(1))},c?"entries":"values",!c,!0),h(k)}}},function(r,t,e){"use strict";var i=e(60),n=e(43).getWeak,o=e(12),a=e(13),s=e(59),l=e(78),d=e(36),u=e(26),h=e(53),p=d(5),m=d(6),x=0,y=function(k){return k._l||(k._l=new v)},v=function(){this.a=[]},w=function(k,c){return p(k.a,function(_){return _[0]===c})};v.prototype={get:function(k){var c=w(this,k);if(c)return c[1]},has:function(k){return!!w(this,k)},set:function(k,c){var _=w(this,k);_?_[1]=c:this.a.push([k,c])},delete:function(k){var c=m(this.a,function(_){return _[0]===k});return~c&&this.a.splice(c,1),!!~c}},r.exports={getConstructor:function(k,c,_,g){var b=k(function(E,T){s(E,b,c,"_i"),E._t=c,E._i=x++,E._l=void 0,T!=null&&l(T,_,E[g],E)});return i(b.prototype,{delete:function(E){if(!a(E))return!1;var T=n(E);return T===!0?y(h(this,c)).delete(E):T&&u(T,this._i)&&delete T[this._i]},has:function(E){if(!a(E))return!1;var T=n(E);return T===!0?y(h(this,c)).has(E):T&&u(T,this._i)}}),b},def:function(k,c,_){var g=n(o(c),!0);return g===!0?y(k).set(c,_):g[k._i]=_,k},ufstore:y}},function(r,t,e){var i=e(33),n=e(15);r.exports=function(o){if(o===void 0)return 0;var a=i(o),s=n(a);if(a!==s)throw RangeError("Wrong length!");return s}},function(r,t,e){var i=e(50),n=e(72),o=e(12),a=e(10).Reflect;r.exports=a&&a.ownKeys||function(s){var l=i.f(o(s)),d=n.f;return d?l.concat(d(s)):l}},function(r,t,e){var i=e(15),n=e(94),o=e(38);r.exports=function(a,s,l,d){var u=String(o(a)),h=u.length,p=l===void 0?" ":String(l),m=i(s);if(m<=h||p=="")return u;var x=m-h,y=n.call(p,Math.ceil(x/p.length));return y.length>x&&(y=y.slice(0,x)),d?y+u:u+y}},function(r,t,e){var i=e(17),n=e(47),o=e(28),a=e(63).f;r.exports=function(s){return function(l){for(var d,u=o(l),h=n(u),p=h.length,m=0,x=[];p>m;)d=h[m++],i&&!a.call(u,d)||x.push(s?[d,u[d]]:u[d]);return x}}},function(r,t,e){var i=e(149);r.exports=function(n,o){if(n){if(typeof n=="string")return i(n,o);var a=Object.prototype.toString.call(n).slice(8,-1);return a==="Object"&&n.constructor&&(a=n.constructor.name),a==="Map"||a==="Set"?Array.from(n):a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?i(n,o):void 0}},r.exports.__esModule=!0,r.exports.default=r.exports},function(r,t){r.exports=function(e,i){(i==null||i>e.length)&&(i=e.length);for(var n=0,o=new Array(i);n<i;n++)o[n]=e[n];return o},r.exports.__esModule=!0,r.exports.default=r.exports},function(r){r.exports=JSON.parse('{"ui":{"blockTunes":{"toggler":{"Click to tune":"","or drag to move":""}},"inlineToolbar":{"converter":{"Convert to":""}},"toolbar":{"toolbox":{"Add":""}},"popover":{"Filter":"","Nothing found":""}},"toolNames":{"Text":"","Link":"","Bold":"","Italic":""},"tools":{"link":{"Add a link":""},"stub":{"The block can not be displayed correctly.":""}},"blockTunes":{"delete":{"Delete":"","Click to delete":""},"moveUp":{"Move up":""},"moveDown":{"Move down":""}}}')},function(r,t,e){var i,n,o;n=[t,e(3),e(2),e(5),e(6),e(4),e(153)],(o=typeof(i=function(a,s,l,d,u,h,p){"use strict";var m=e(1);function x(v){var w=function(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(k){return!1}}();return function(){var k,c=(0,h.default)(v);if(w){var _=(0,h.default)(this).constructor;k=Reflect.construct(c,arguments,_)}else k=c.apply(this,arguments);return(0,u.default)(this,k)}}Object.defineProperty(a,"__esModule",{value:!0}),a.CriticalError=void 0,s=m(s),l=m(l),d=m(d),u=m(u),h=m(h);var y=function(v){(0,d.default)(k,v);var w=x(k);function k(){return(0,l.default)(this,k),w.apply(this,arguments)}return(0,s.default)(k)}((0,(p=m(p)).default)(Error));a.CriticalError=y,y.displayName="CriticalError"})=="function"?i.apply(t,n):i)===void 0||(r.exports=o)},function(r,t){r.exports=function(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e},r.exports.__esModule=!0,r.exports.default=r.exports},function(r,t,e){var i=e(4),n=e(111),o=e(373),a=e(374);function s(l){var d=typeof Map=="function"?new Map:void 0;return r.exports=s=function(u){if(u===null||!o(u))return u;if(typeof u!="function")throw new TypeError("Super expression must either be null or a function");if(d!==void 0){if(d.has(u))return d.get(u);d.set(u,h)}function h(){return a(u,arguments,i(this).constructor)}return h.prototype=Object.create(u.prototype,{constructor:{value:h,enumerable:!1,writable:!0,configurable:!0}}),n(h,u)},r.exports.__esModule=!0,r.exports.default=r.exports,s(l)}r.exports=s,r.exports.__esModule=!0,r.exports.default=r.exports},function(r,t,e){var i,n,o,a=e(7);n=[t,e(20),e(21),e(2),e(3),e(5),e(6),e(4),e(8),e(113),e(9),e(61)],(o=typeof(i=function(s,l,d,u,h,p,m,x,y,v,w,k){"use strict";var c=e(1);function _(E){if(typeof WeakMap!="function")return null;var T=new WeakMap,C=new WeakMap;return(_=function(S){return S?C:T})(E)}function g(E){var T=function(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(C){return!1}}();return function(){var C,S=(0,x.default)(E);if(T){var A=(0,x.default)(this).constructor;C=Reflect.construct(S,arguments,A)}else C=S.apply(this,arguments);return(0,m.default)(this,C)}}Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0,l=c(l),d=c(d),u=c(u),h=c(h),p=c(p),m=c(m),x=c(x),y=function(E,T){if(!T&&E&&E.__esModule)return E;if(E===null||a(E)!=="object"&&typeof E!="function")return{default:E};var C=_(T);if(C&&C.has(E))return C.get(E);var S={},A=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var L in E)if(L!=="default"&&Object.prototype.hasOwnProperty.call(E,L)){var B=A?Object.getOwnPropertyDescriptor(E,L):null;B&&(B.get||B.set)?Object.defineProperty(S,L,B):S[L]=E[L]}return S.default=E,C&&C.set(E,S),S}(y),v=c(v),w=c(w),k=c(k);var b=function(E){(0,p.default)(C,E);var T=g(C);function C(){var S;return(0,u.default)(this,C),(S=T.apply(this,arguments)).insert=function(){var A=arguments.length>0&&arguments[0]!==void 0?arguments[0]:S.config.defaultBlock,L=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},B=arguments.length>3?arguments[3]:void 0,P=arguments.length>4?arguments[4]:void 0,M=arguments.length>5?arguments[5]:void 0,O=arguments.length>6?arguments[6]:void 0,I=S.Editor.BlockManager.insert({id:O,tool:A,data:L,index:B,needToFocus:P,replace:M});return new v.default(I)},S.composeBlockData=function(){var A=(0,d.default)(l.default.mark(function L(B){var P,M;return l.default.wrap(function(O){for(;;)switch(O.prev=O.next){case 0:return P=S.Editor.Tools.blockTools.get(B),M=new k.default({tool:P,api:S.Editor.API,readOnly:!0,data:{},tunesData:{}}),O.abrupt("return",M.data);case 3:case"end":return O.stop()}},L)}));return function(L){return A.apply(this,arguments)}}(),S.update=function(A,L){var B=S.Editor.BlockManager,P=B.getBlockById(A);if(P){var M=B.getBlockIndex(P);B.insert({id:P.id,tool:P.name,data:L,index:M,replace:!0,tunes:P.tunes})}else y.log("blocks.update(): Block with passed id was not found","warn")},S}return(0,h.default)(C,[{key:"methods",get:function(){var S=this;return{clear:function(){return S.clear()},render:function(A){return S.render(A)},renderFromHTML:function(A){return S.renderFromHTML(A)},delete:function(A){return S.delete(A)},swap:function(A,L){return S.swap(A,L)},move:function(A,L){return S.move(A,L)},getBlockByIndex:function(A){return S.getBlockByIndex(A)},getById:function(A){return S.getById(A)},getCurrentBlockIndex:function(){return S.getCurrentBlockIndex()},getBlockIndex:function(A){return S.getBlockIndex(A)},getBlocksCount:function(){return S.getBlocksCount()},stretchBlock:function(A){var L=!(arguments.length>1&&arguments[1]!==void 0)||arguments[1];return S.stretchBlock(A,L)},insertNewBlock:function(){return S.insertNewBlock()},insert:this.insert,update:this.update,composeBlockData:this.composeBlockData}}},{key:"getBlocksCount",value:function(){return this.Editor.BlockManager.blocks.length}},{key:"getCurrentBlockIndex",value:function(){return this.Editor.BlockManager.currentBlockIndex}},{key:"getBlockIndex",value:function(S){var A=this.Editor.BlockManager.getBlockById(S);if(A)return this.Editor.BlockManager.getBlockIndex(A);y.logLabeled("There is no block with id `"+S+"`","warn")}},{key:"getBlockByIndex",value:function(S){var A=this.Editor.BlockManager.getBlockByIndex(S);if(A!==void 0)return new v.default(A);y.logLabeled("There is no block at index `"+S+"`","warn")}},{key:"getById",value:function(S){var A=this.Editor.BlockManager.getBlockById(S);return A===void 0?(y.logLabeled("There is no block with id `"+S+"`","warn"),null):new v.default(A)}},{key:"swap",value:function(S,A){y.log("`blocks.swap()` method is deprecated and will be removed in the next major release. Use `block.move()` method instead","info"),this.Editor.BlockManager.swap(S,A)}},{key:"move",value:function(S,A){this.Editor.BlockManager.move(S,A)}},{key:"delete",value:function(S){try{this.Editor.BlockManager.removeBlock(S)}catch(A){return void y.logLabeled(A,"warn")}this.Editor.BlockManager.blocks.length===0&&this.Editor.BlockManager.insert(),this.Editor.BlockManager.currentBlock&&this.Editor.Caret.setToBlock(this.Editor.BlockManager.currentBlock,this.Editor.Caret.positions.END),this.Editor.Toolbar.close()}},{key:"clear",value:function(){this.Editor.BlockManager.clear(!0),this.Editor.InlineToolbar.close()}},{key:"render",value:function(S){return this.Editor.BlockManager.clear(),this.Editor.Renderer.render(S.blocks)}},{key:"renderFromHTML",value:function(S){return this.Editor.BlockManager.clear(),this.Editor.Paste.processText(S,!0)}},{key:"stretchBlock",value:function(S){var A=!(arguments.length>1&&arguments[1]!==void 0)||arguments[1];y.deprecationAssert(!0,"blocks.stretchBlock()","BlockAPI");var L=this.Editor.BlockManager.getBlockByIndex(S);L&&(L.stretched=A)}},{key:"insertNewBlock",value:function(){y.log("Method blocks.insertNewBlock() is deprecated and it will be removed in the next major release. Use blocks.insert() instead.","warn"),this.insert()}}]),C}(w.default);s.default=b,b.displayName="BlocksAPI",r.exports=t.default})=="function"?i.apply(t,n):i)===void 0||(r.exports=o)},function(r,t,e){var i,n,o;n=[t,e(2),e(3),e(5),e(6),e(4),e(9)],(o=typeof(i=function(a,s,l,d,u,h,p){"use strict";var m=e(1);function x(v){var w=function(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(k){return!1}}();return function(){var k,c=(0,h.default)(v);if(w){var _=(0,h.default)(this).constructor;k=Reflect.construct(c,arguments,_)}else k=c.apply(this,arguments);return(0,u.default)(this,k)}}Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,s=m(s),l=m(l),d=m(d),u=m(u),h=m(h);var y=function(v){(0,d.default)(k,v);var w=x(k);function k(){var c;return(0,s.default)(this,k),(c=w.apply(this,arguments)).setToFirstBlock=function(){var _=arguments.length>0&&arguments[0]!==void 0?arguments[0]:c.Editor.Caret.positions.DEFAULT,g=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return!!c.Editor.BlockManager.firstBlock&&(c.Editor.Caret.setToBlock(c.Editor.BlockManager.firstBlock,_,g),!0)},c.setToLastBlock=function(){var _=arguments.length>0&&arguments[0]!==void 0?arguments[0]:c.Editor.Caret.positions.DEFAULT,g=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return!!c.Editor.BlockManager.lastBlock&&(c.Editor.Caret.setToBlock(c.Editor.BlockManager.lastBlock,_,g),!0)},c.setToPreviousBlock=function(){var _=arguments.length>0&&arguments[0]!==void 0?arguments[0]:c.Editor.Caret.positions.DEFAULT,g=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return!!c.Editor.BlockManager.previousBlock&&(c.Editor.Caret.setToBlock(c.Editor.BlockManager.previousBlock,_,g),!0)},c.setToNextBlock=function(){var _=arguments.length>0&&arguments[0]!==void 0?arguments[0]:c.Editor.Caret.positions.DEFAULT,g=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return!!c.Editor.BlockManager.nextBlock&&(c.Editor.Caret.setToBlock(c.Editor.BlockManager.nextBlock,_,g),!0)},c.setToBlock=function(_){var g=arguments.length>1&&arguments[1]!==void 0?arguments[1]:c.Editor.Caret.positions.DEFAULT,b=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0;return!!c.Editor.BlockManager.blocks[_]&&(c.Editor.Caret.setToBlock(c.Editor.BlockManager.blocks[_],g,b),!0)},c.focus=function(){var _=arguments.length>0&&arguments[0]!==void 0&&arguments[0];return _?c.setToLastBlock(c.Editor.Caret.positions.END):c.setToFirstBlock(c.Editor.Caret.positions.START)},c}return(0,l.default)(k,[{key:"methods",get:function(){return{setToFirstBlock:this.setToFirstBlock,setToLastBlock:this.setToLastBlock,setToPreviousBlock:this.setToPreviousBlock,setToNextBlock:this.setToNextBlock,setToBlock:this.setToBlock,focus:this.focus}}}]),k}((p=m(p)).default);a.default=y,y.displayName="CaretAPI",r.exports=t.default})=="function"?i.apply(t,n):i)===void 0||(r.exports=o)},function(r,t,e){var i,n,o;n=[t,e(2),e(3),e(5),e(6),e(4),e(9)],(o=typeof(i=function(a,s,l,d,u,h,p){"use strict";var m=e(1);function x(v){var w=function(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(k){return!1}}();return function(){var k,c=(0,h.default)(v);if(w){var _=(0,h.default)(this).constructor;k=Reflect.construct(c,arguments,_)}else k=c.apply(this,arguments);return(0,u.default)(this,k)}}Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,s=m(s),l=m(l),d=m(d),u=m(u),h=m(h);var y=function(v){(0,d.default)(k,v);var w=x(k);function k(){return(0,s.default)(this,k),w.apply(this,arguments)}return(0,l.default)(k,[{key:"methods",get:function(){var c=this;return{emit:function(_,g){return c.emit(_,g)},off:function(_,g){return c.off(_,g)},on:function(_,g){return c.on(_,g)}}}},{key:"on",value:function(c,_){this.eventsDispatcher.on(c,_)}},{key:"emit",value:function(c,_){this.eventsDispatcher.emit(c,_)}},{key:"off",value:function(c,_){this.eventsDispatcher.off(c,_)}}]),k}((p=m(p)).default);a.default=y,y.displayName="EventsAPI",r.exports=t.default})=="function"?i.apply(t,n):i)===void 0||(r.exports=o)},function(r,t,e){var i,n,o;n=[t,e(2),e(3),e(5),e(6),e(4),e(54),e(8),e(9)],(o=typeof(i=function(a,s,l,d,u,h,p,m,x){"use strict";var y=e(1);function v(k){var c=function(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(_){return!1}}();return function(){var _,g=(0,h.default)(k);if(c){var b=(0,h.default)(this).constructor;_=Reflect.construct(g,arguments,b)}else _=g.apply(this,arguments);return(0,u.default)(this,_)}}Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,s=y(s),l=y(l),d=y(d),u=y(u),h=y(h),p=y(p);var w=function(k){(0,d.default)(_,k);var c=v(_);function _(){return(0,s.default)(this,_),c.apply(this,arguments)}return(0,l.default)(_,[{key:"methods",get:function(){return{t:function(){(0,m.logLabeled)("I18n.t() method can be accessed only from Tools","warn")}}}},{key:"getMethodsForTool",value:function(g){return Object.assign(this.methods,{t:function(b){return p.default.t(_.getNamespace(g),b)}})}}],[{key:"getNamespace",value:function(g){return g.isTune()?"blockTunes.".concat(g.name):"tools.".concat(g.name)}}]),_}((x=y(x)).default);a.default=w,w.displayName="I18nAPI",r.exports=t.default})=="function"?i.apply(t,n):i)===void 0||(r.exports=o)},function(r,t,e){var i,n,o;n=[t,e(2),e(3),e(5),e(6),e(4),e(9)],(o=typeof(i=function(a,s,l,d,u,h,p){"use strict";var m=e(1);function x(v){var w=function(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(k){return!1}}();return function(){var k,c=(0,h.default)(v);if(w){var _=(0,h.default)(this).constructor;k=Reflect.construct(c,arguments,_)}else k=c.apply(this,arguments);return(0,u.default)(this,k)}}Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,s=m(s),l=m(l),d=m(d),u=m(u),h=m(h);var y=function(v){(0,d.default)(k,v);var w=x(k);function k(){return(0,s.default)(this,k),w.apply(this,arguments)}return(0,l.default)(k,[{key:"methods",get:function(){var c=this;return{close:function(){return c.close()},open:function(){return c.open()}}}},{key:"open",value:function(){this.Editor.InlineToolbar.tryToShow()}},{key:"close",value:function(){this.Editor.InlineToolbar.close()}}]),k}((p=m(p)).default);a.default=y,y.displayName="InlineToolbarAPI",r.exports=t.default})=="function"?i.apply(t,n):i)===void 0||(r.exports=o)},function(r,t,e){var i,n,o;n=[t,e(2),e(3),e(5),e(6),e(4),e(9)],(o=typeof(i=function(a,s,l,d,u,h,p){"use strict";var m=e(1);function x(v){var w=function(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(k){return!1}}();return function(){var k,c=(0,h.default)(v);if(w){var _=(0,h.default)(this).constructor;k=Reflect.construct(c,arguments,_)}else k=c.apply(this,arguments);return(0,u.default)(this,k)}}Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,s=m(s),l=m(l),d=m(d),u=m(u),h=m(h);var y=function(v){(0,d.default)(k,v);var w=x(k);function k(){return(0,s.default)(this,k),w.apply(this,arguments)}return(0,l.default)(k,[{key:"methods",get:function(){var c=this;return{on:function(_,g,b,E){return c.on(_,g,b,E)},off:function(_,g,b,E){return c.off(_,g,b,E)},offById:function(_){return c.offById(_)}}}},{key:"on",value:function(c,_,g,b){return this.listeners.on(c,_,g,b)}},{key:"off",value:function(c,_,g,b){this.listeners.off(c,_,g,b)}},{key:"offById",value:function(c){this.listeners.offById(c)}}]),k}((p=m(p)).default);a.default=y,y.displayName="ListenersAPI",r.exports=t.default})=="function"?i.apply(t,n):i)===void 0||(r.exports=o)},function(r,t,e){var i,n,o;n=[t,e(2),e(3),e(5),e(6),e(4),e(378),e(9)],(o=typeof(i=function(a,s,l,d,u,h,p,m){"use strict";var x=e(1);function y(w){var k=function(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(c){return!1}}();return function(){var c,_=(0,h.default)(w);if(k){var g=(0,h.default)(this).constructor;c=Reflect.construct(_,arguments,g)}else c=_.apply(this,arguments);return(0,u.default)(this,c)}}Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,s=x(s),l=x(l),d=x(d),u=x(u),h=x(h),p=x(p);var v=function(w){(0,d.default)(c,w);var k=y(c);function c(_){var g,b=_.config,E=_.eventsDispatcher;return(0,s.default)(this,c),(g=k.call(this,{config:b,eventsDispatcher:E})).notifier=new p.default,g}return(0,l.default)(c,[{key:"methods",get:function(){var _=this;return{show:function(g){return _.show(g)}}}},{key:"show",value:function(_){return this.notifier.show(_)}}]),c}((m=x(m)).default);a.default=v,v.displayName="NotifierAPI",r.exports=t.default})=="function"?i.apply(t,n):i)===void 0||(r.exports=o)},function(r,t,e){var i,n,o;n=[t,e(2),e(3),e(5),e(6),e(4),e(9)],(o=typeof(i=function(a,s,l,d,u,h,p){"use strict";var m=e(1);function x(v){var w=function(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(k){return!1}}();return function(){var k,c=(0,h.default)(v);if(w){var _=(0,h.default)(this).constructor;k=Reflect.construct(c,arguments,_)}else k=c.apply(this,arguments);return(0,u.default)(this,k)}}Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,s=m(s),l=m(l),d=m(d),u=m(u),h=m(h);var y=function(v){(0,d.default)(k,v);var w=x(k);function k(){return(0,s.default)(this,k),w.apply(this,arguments)}return(0,l.default)(k,[{key:"methods",get:function(){var c=this;return{toggle:function(_){return c.toggle(_)},get isEnabled(){return c.isEnabled}}}},{key:"toggle",value:function(c){return this.Editor.ReadOnly.toggle(c)}},{key:"isEnabled",get:function(){return this.Editor.ReadOnly.isEnabled}}]),k}((p=m(p)).default);a.default=y,y.displayName="ReadOnlyAPI",r.exports=t.default})=="function"?i.apply(t,n):i)===void 0||(r.exports=o)},function(r,t,e){var i,n,o;n=[t,e(2),e(3),e(5),e(6),e(4),e(9),e(66)],(o=typeof(i=function(a,s,l,d,u,h,p,m){"use strict";var x=e(1);function y(w){var k=function(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(c){return!1}}();return function(){var c,_=(0,h.default)(w);if(k){var g=(0,h.default)(this).constructor;c=Reflect.construct(_,arguments,g)}else c=_.apply(this,arguments);return(0,u.default)(this,c)}}Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,s=x(s),l=x(l),d=x(d),u=x(u),h=x(h);var v=function(w){(0,d.default)(c,w);var k=y(c);function c(){return(0,s.default)(this,c),k.apply(this,arguments)}return(0,l.default)(c,[{key:"methods",get:function(){var _=this;return{clean:function(g,b){return _.clean(g,b)}}}},{key:"clean",value:function(_,g){return(0,m.clean)(_,g)}}]),c}((p=x(p)).default);a.default=v,v.displayName="SanitizerAPI",r.exports=t.default})=="function"?i.apply(t,n):i)===void 0||(r.exports=o)},function(r,t,e){var i,n,o,a=e(7);n=[t,e(2),e(3),e(5),e(6),e(4),e(8),e(9)],(o=typeof(i=function(s,l,d,u,h,p,m,x){"use strict";var y=e(1);function v(c){if(typeof WeakMap!="function")return null;var _=new WeakMap,g=new WeakMap;return(v=function(b){return b?g:_})(c)}function w(c){var _=function(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(g){return!1}}();return function(){var g,b=(0,p.default)(c);if(_){var E=(0,p.default)(this).constructor;g=Reflect.construct(b,arguments,E)}else g=b.apply(this,arguments);return(0,h.default)(this,g)}}Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0,l=y(l),d=y(d),u=y(u),h=y(h),p=y(p),m=function(c,_){if(!_&&c&&c.__esModule)return c;if(c===null||a(c)!=="object"&&typeof c!="function")return{default:c};var g=v(_);if(g&&g.has(c))return g.get(c);var b={},E=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var T in c)if(T!=="default"&&Object.prototype.hasOwnProperty.call(c,T)){var C=E?Object.getOwnPropertyDescriptor(c,T):null;C&&(C.get||C.set)?Object.defineProperty(b,T,C):b[T]=c[T]}return b.default=c,g&&g.set(c,b),b}(m);var k=function(c){(0,u.default)(g,c);var _=w(g);function g(){return(0,l.default)(this,g),_.apply(this,arguments)}return(0,d.default)(g,[{key:"methods",get:function(){var b=this;return{save:function(){return b.save()}}}},{key:"save",value:function(){var b="Editor's content can not be saved in read-only mode";return this.Editor.ReadOnly.isEnabled?(m.logLabeled(b,"warn"),Promise.reject(new Error(b))):this.Editor.Saver.save()}}]),g}((x=y(x)).default);s.default=k,k.displayName="SaverAPI",r.exports=t.default})=="function"?i.apply(t,n):i)===void 0||(r.exports=o)},function(r,t,e){var i,n,o;n=[t,e(2),e(3),e(5),e(6),e(4),e(25),e(9)],(o=typeof(i=function(a,s,l,d,u,h,p,m){"use strict";var x=e(1);function y(w){var k=function(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(c){return!1}}();return function(){var c,_=(0,h.default)(w);if(k){var g=(0,h.default)(this).constructor;c=Reflect.construct(_,arguments,g)}else c=_.apply(this,arguments);return(0,u.default)(this,c)}}Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,s=x(s),l=x(l),d=x(d),u=x(u),h=x(h),p=x(p);var v=function(w){(0,d.default)(c,w);var k=y(c);function c(){return(0,s.default)(this,c),k.apply(this,arguments)}return(0,l.default)(c,[{key:"methods",get:function(){var _=this;return{findParentTag:function(g,b){return _.findParentTag(g,b)},expandToTag:function(g){return _.expandToTag(g)}}}},{key:"findParentTag",value:function(_,g){return new p.default().findParentTag(_,g)}},{key:"expandToTag",value:function(_){new p.default().expandToTag(_)}}]),c}((m=x(m)).default);a.default=v,v.displayName="SelectionAPI",r.exports=t.default})=="function"?i.apply(t,n):i)===void 0||(r.exports=o)},function(r,t,e){var i,n,o;n=[t,e(2),e(3),e(5),e(6),e(4),e(9)],(o=typeof(i=function(a,s,l,d,u,h,p){"use strict";var m=e(1);function x(v){var w=function(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(k){return!1}}();return function(){var k,c=(0,h.default)(v);if(w){var _=(0,h.default)(this).constructor;k=Reflect.construct(c,arguments,_)}else k=c.apply(this,arguments);return(0,u.default)(this,k)}}Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,s=m(s),l=m(l),d=m(d),u=m(u),h=m(h);var y=function(v){(0,d.default)(k,v);var w=x(k);function k(){return(0,s.default)(this,k),w.apply(this,arguments)}return(0,l.default)(k,[{key:"classes",get:function(){return{block:"cdx-block",inlineToolButton:"ce-inline-tool",inlineToolButtonActive:"ce-inline-tool--active",input:"cdx-input",loader:"cdx-loader",button:"cdx-button",settingsButton:"cdx-settings-button",settingsButtonActive:"cdx-settings-button--active"}}}]),k}((p=m(p)).default);a.default=y,y.displayName="StylesAPI",r.exports=t.default})=="function"?i.apply(t,n):i)===void 0||(r.exports=o)},function(r,t,e){var i,n,o,a=e(7);n=[t,e(2),e(3),e(5),e(6),e(4),e(9),e(8)],(o=typeof(i=function(s,l,d,u,h,p,m,x){"use strict";var y=e(1);function v(c){if(typeof WeakMap!="function")return null;var _=new WeakMap,g=new WeakMap;return(v=function(b){return b?g:_})(c)}function w(c){var _=function(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(g){return!1}}();return function(){var g,b=(0,p.default)(c);if(_){var E=(0,p.default)(this).constructor;g=Reflect.construct(b,arguments,E)}else g=b.apply(this,arguments);return(0,h.default)(this,g)}}Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0,l=y(l),d=y(d),u=y(u),h=y(h),p=y(p),m=y(m),x=function(c,_){if(!_&&c&&c.__esModule)return c;if(c===null||a(c)!=="object"&&typeof c!="function")return{default:c};var g=v(_);if(g&&g.has(c))return g.get(c);var b={},E=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var T in c)if(T!=="default"&&Object.prototype.hasOwnProperty.call(c,T)){var C=E?Object.getOwnPropertyDescriptor(c,T):null;C&&(C.get||C.set)?Object.defineProperty(b,T,C):b[T]=c[T]}return b.default=c,g&&g.set(c,b),b}(x);var k=function(c){(0,u.default)(g,c);var _=w(g);function g(){return(0,l.default)(this,g),_.apply(this,arguments)}return(0,d.default)(g,[{key:"methods",get:function(){var b=this;return{close:function(){return b.close()},open:function(){return b.open()},toggleBlockSettings:function(E){return b.toggleBlockSettings(E)}}}},{key:"open",value:function(){this.Editor.Toolbar.moveAndOpen()}},{key:"close",value:function(){this.Editor.Toolbar.close()}},{key:"toggleBlockSettings",value:function(b){this.Editor.BlockManager.currentBlockIndex!==-1?(b!=null?b:!this.Editor.BlockSettings.opened)?(this.Editor.Toolbar.moveAndOpen(),this.Editor.BlockSettings.open()):this.Editor.BlockSettings.close():x.logLabeled("Could't toggle the Toolbar because there is no block selected ","warn")}}]),g}(m.default);s.default=k,k.displayName="ToolbarAPI",r.exports=t.default})=="function"?i.apply(t,n):i)===void 0||(r.exports=o)},function(r,t,e){var i,n,o;n=[t,e(2),e(3),e(5),e(6),e(4),e(9),e(115)],(o=typeof(i=function(a,s,l,d,u,h,p,m){"use strict";var x=e(1);function y(w){var k=function(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(c){return!1}}();return function(){var c,_=(0,h.default)(w);if(k){var g=(0,h.default)(this).constructor;c=Reflect.construct(_,arguments,g)}else c=_.apply(this,arguments);return(0,u.default)(this,c)}}Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,s=x(s),l=x(l),d=x(d),u=x(u),h=x(h),p=x(p),m=x(m);var v=function(w){(0,d.default)(c,w);var k=y(c);function c(_){var g,b=_.config,E=_.eventsDispatcher;return(0,s.default)(this,c),(g=k.call(this,{config:b,eventsDispatcher:E})).tooltip=new m.default,g}return(0,l.default)(c,[{key:"destroy",value:function(){this.tooltip.destroy()}},{key:"methods",get:function(){var _=this;return{show:function(g,b,E){return _.show(g,b,E)},hide:function(){return _.hide()},onHover:function(g,b,E){return _.onHover(g,b,E)}}}},{key:"show",value:function(_,g,b){this.tooltip.show(_,g,b)}},{key:"hide",value:function(){this.tooltip.hide()}},{key:"onHover",value:function(_,g,b){this.tooltip.onHover(_,g,b)}}]),c}(p.default);a.default=v,v.displayName="TooltipAPI",r.exports=t.default})=="function"?i.apply(t,n):i)===void 0||(r.exports=o)},function(r,t,e){var i,n,o;n=[t,e(2),e(3),e(5),e(6),e(4),e(9)],(o=typeof(i=function(a,s,l,d,u,h,p){"use strict";var m=e(1);function x(v){var w=function(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(k){return!1}}();return function(){var k,c=(0,h.default)(v);if(w){var _=(0,h.default)(this).constructor;k=Reflect.construct(c,arguments,_)}else k=c.apply(this,arguments);return(0,u.default)(this,k)}}Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,s=m(s),l=m(l),d=m(d),u=m(u),h=m(h);var y=function(v){(0,d.default)(k,v);var w=x(k);function k(){return(0,s.default)(this,k),w.apply(this,arguments)}return(0,l.default)(k,[{key:"methods",get:function(){return{nodes:this.editorNodes}}},{key:"editorNodes",get:function(){return{wrapper:this.Editor.UI.nodes.wrapper,redactor:this.Editor.UI.nodes.redactor}}}]),k}((p=m(p)).default);a.default=y,y.displayName="UiAPI",r.exports=t.default})=="function"?i.apply(t,n):i)===void 0||(r.exports=o)},function(r,t,e){var i,n,o,a=e(7);n=[t,e(2),e(3),e(5),e(6),e(4),e(9),e(8),e(25),e(67)],(o=typeof(i=function(s,l,d,u,h,p,m,x,y,v){"use strict";var w=e(1);function k(g){if(typeof WeakMap!="function")return null;var b=new WeakMap,E=new WeakMap;return(k=function(T){return T?E:b})(g)}function c(g){var b=function(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(E){return!1}}();return function(){var E,T=(0,p.default)(g);if(b){var C=(0,p.default)(this).constructor;E=Reflect.construct(T,arguments,C)}else E=T.apply(this,arguments);return(0,h.default)(this,E)}}Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0,l=w(l),d=w(d),u=w(u),h=w(h),p=w(p),m=w(m),x=function(g,b){if(!b&&g&&g.__esModule)return g;if(g===null||a(g)!=="object"&&typeof g!="function")return{default:g};var E=k(b);if(E&&E.has(g))return E.get(g);var T={},C=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var S in g)if(S!=="default"&&Object.prototype.hasOwnProperty.call(g,S)){var A=C?Object.getOwnPropertyDescriptor(g,S):null;A&&(A.get||A.set)?Object.defineProperty(T,S,A):T[S]=g[S]}return T.default=g,E&&E.set(g,T),T}(x),y=w(y),v=w(v);var _=function(g){(0,u.default)(E,g);var b=c(E);function E(){return(0,l.default)(this,E),b.apply(this,arguments)}return(0,d.default)(E,[{key:"keydown",value:function(T){switch(this.beforeKeydownProcessing(T),T.keyCode){case x.keyCodes.BACKSPACE:this.backspace(T);break;case x.keyCodes.ENTER:this.enter(T);break;case x.keyCodes.DOWN:case x.keyCodes.RIGHT:this.arrowRightAndDown(T);break;case x.keyCodes.UP:case x.keyCodes.LEFT:this.arrowLeftAndUp(T);break;case x.keyCodes.TAB:this.tabPressed(T)}}},{key:"beforeKeydownProcessing",value:function(T){this.needToolbarClosing(T)&&x.isPrintableKey(T.keyCode)&&(this.Editor.Toolbar.close(),this.Editor.ConversionToolbar.close(),T.ctrlKey||T.metaKey||T.altKey||T.shiftKey||(this.Editor.BlockManager.clearFocused(),this.Editor.BlockSelection.clearSelection(T)))}},{key:"keyup",value:function(T){T.shiftKey||this.Editor.UI.checkEmptiness()}},{key:"tabPressed",value:function(T){this.Editor.BlockSelection.clearSelection(T);var C=this.Editor,S=C.BlockManager,A=C.InlineToolbar,L=C.ConversionToolbar,B=S.currentBlock;if(B){var P=B.isEmpty,M=B.tool.isDefault&&P,O=!P&&L.opened,I=!P&&!y.default.isCollapsed&&A.opened,j=!O&&!I;M?this.activateToolbox():j&&this.activateBlockSettings()}}},{key:"dragOver",value:function(T){this.Editor.BlockManager.getBlockByChildNode(T.target).dropTarget=!0}},{key:"dragLeave",value:function(T){this.Editor.BlockManager.getBlockByChildNode(T.target).dropTarget=!1}},{key:"handleCommandC",value:function(T){var C=this.Editor.BlockSelection;C.anyBlockSelected&&C.copySelectedBlocks(T)}},{key:"handleCommandX",value:function(T){var C=this.Editor,S=C.BlockSelection,A=C.BlockManager,L=C.Caret;S.anyBlockSelected&&S.copySelectedBlocks(T).then(function(){var B=A.removeSelectedBlocks(),P=A.insertDefaultBlockAtIndex(B,!0);L.setToBlock(P,L.positions.START),S.clearSelection(T)})}},{key:"enter",value:function(T){var C=this.Editor,S=C.BlockManager,A=C.UI;if(!S.currentBlock.tool.isLineBreaksEnabled&&!(A.someToolbarOpened&&A.someFlipperButtonFocused||T.shiftKey)){var L=this.Editor.BlockManager.currentBlock;this.Editor.Caret.isAtStart&&!this.Editor.BlockManager.currentBlock.hasMedia?this.Editor.BlockManager.insertDefaultBlockAtIndex(this.Editor.BlockManager.currentBlockIndex):L=this.Editor.BlockManager.split(),this.Editor.Caret.setToBlock(L),this.Editor.Toolbar.moveAndOpen(L),T.preventDefault()}}},{key:"backspace",value:function(T){var C=this.Editor,S=C.BlockManager,A=C.BlockSelection,L=C.Caret,B=S.currentBlock,P=B.tool;if(B.selected||B.isEmpty&&B.currentInput===B.firstInput){T.preventDefault();var M=S.currentBlockIndex;return S.previousBlock&&S.previousBlock.inputs.length===0?S.removeBlock(M-1):S.removeBlock(),L.setToBlock(S.currentBlock,M?L.positions.END:L.positions.START),this.Editor.Toolbar.close(),void A.clearSelection(T)}if(!P.isLineBreaksEnabled||L.isAtStart){var O=S.currentBlockIndex===0;L.isAtStart&&y.default.isCollapsed&&B.currentInput===B.firstInput&&!O&&(T.preventDefault(),this.mergeBlocks())}}},{key:"mergeBlocks",value:function(){var T=this.Editor,C=T.BlockManager,S=T.Caret,A=T.Toolbar,L=C.previousBlock,B=C.currentBlock;if(B.name!==L.name||!L.mergeable)return L.inputs.length===0||L.isEmpty?(C.removeBlock(C.currentBlockIndex-1),S.setToBlock(C.currentBlock),void A.close()):void(S.navigatePrevious()&&A.close());S.createShadow(L.pluginsContent),C.mergeBlocks(L,B).then(function(){S.restoreCaret(L.pluginsContent),L.pluginsContent.normalize(),A.close()})}},{key:"arrowRightAndDown",value:function(T){var C=this,S=v.default.usedKeys.includes(T.keyCode)&&(!T.shiftKey||T.keyCode===x.keyCodes.TAB);if(!this.Editor.UI.someToolbarOpened||!S){this.Editor.BlockManager.clearFocused(),this.Editor.Toolbar.close();var A=this.Editor.Caret.isAtEnd||this.Editor.BlockSelection.anyBlockSelected;T.shiftKey&&T.keyCode===x.keyCodes.DOWN&&A?this.Editor.CrossBlockSelection.toggleBlockSelectedState():((T.keyCode===x.keyCodes.DOWN||T.keyCode===x.keyCodes.RIGHT&&!this.isRtl?this.Editor.Caret.navigateNext():this.Editor.Caret.navigatePrevious())?T.preventDefault():x.delay(function(){C.Editor.BlockManager.currentBlock&&C.Editor.BlockManager.currentBlock.updateCurrentInput()},20)(),this.Editor.BlockSelection.clearSelection(T))}}},{key:"arrowLeftAndUp",value:function(T){var C=this;if(this.Editor.UI.someToolbarOpened){if(v.default.usedKeys.includes(T.keyCode)&&(!T.shiftKey||T.keyCode===x.keyCodes.TAB))return;this.Editor.UI.closeAllToolbars()}this.Editor.BlockManager.clearFocused(),this.Editor.Toolbar.close();var S=this.Editor.Caret.isAtStart||this.Editor.BlockSelection.anyBlockSelected;T.shiftKey&&T.keyCode===x.keyCodes.UP&&S?this.Editor.CrossBlockSelection.toggleBlockSelectedState(!1):((T.keyCode===x.keyCodes.UP||T.keyCode===x.keyCodes.LEFT&&!this.isRtl?this.Editor.Caret.navigatePrevious():this.Editor.Caret.navigateNext())?T.preventDefault():x.delay(function(){C.Editor.BlockManager.currentBlock&&C.Editor.BlockManager.currentBlock.updateCurrentInput()},20)(),this.Editor.BlockSelection.clearSelection(T))}},{key:"needToolbarClosing",value:function(T){var C=T.keyCode===x.keyCodes.ENTER&&this.Editor.Toolbar.toolbox.opened,S=T.keyCode===x.keyCodes.ENTER&&this.Editor.BlockSettings.opened,A=T.keyCode===x.keyCodes.ENTER&&this.Editor.InlineToolbar.opened,L=T.keyCode===x.keyCodes.ENTER&&this.Editor.ConversionToolbar.opened,B=T.keyCode===x.keyCodes.TAB;return!(T.shiftKey||B||C||S||A||L)}},{key:"activateToolbox",value:function(){this.Editor.Toolbar.opened||this.Editor.Toolbar.moveAndOpen(),this.Editor.Toolbar.toolbox.open()}},{key:"activateBlockSettings",value:function(){this.Editor.Toolbar.opened||(this.Editor.BlockManager.currentBlock.focused=!0,this.Editor.Toolbar.moveAndOpen()),this.Editor.BlockSettings.opened||this.Editor.BlockSettings.open()}}]),E}(m.default);s.default=_,_.displayName="BlockEvents",r.exports=t.default})=="function"?i.apply(t,n):i)===void 0||(r.exports=o)},function(r,t,e){var i,n,o,a=e(7);n=[t,e(20),e(21),e(2),e(3),e(5),e(6),e(4),e(61),e(9),e(19),e(8),e(383),e(113),e(384)],(o=typeof(i=function(s,l,d,u,h,p,m,x,y,v,w,k,c,_,g){"use strict";var b=e(1);function E(A){if(typeof WeakMap!="function")return null;var L=new WeakMap,B=new WeakMap;return(E=function(P){return P?B:L})(A)}function T(A,L){if(!L&&A&&A.__esModule)return A;if(A===null||a(A)!=="object"&&typeof A!="function")return{default:A};var B=E(L);if(B&&B.has(A))return B.get(A);var P={},M=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var O in A)if(O!=="default"&&Object.prototype.hasOwnProperty.call(A,O)){var I=M?Object.getOwnPropertyDescriptor(A,O):null;I&&(I.get||I.set)?Object.defineProperty(P,O,I):P[O]=A[O]}return P.default=A,B&&B.set(A,P),P}function C(A){var L=function(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(B){return!1}}();return function(){var B,P=(0,x.default)(A);if(L){var M=(0,x.default)(this).constructor;B=Reflect.construct(P,arguments,M)}else B=P.apply(this,arguments);return(0,m.default)(this,B)}}Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0,l=b(l),d=b(d),u=b(u),h=b(h),p=b(p),m=b(m),x=b(x),y=T(y),v=b(v),w=b(w),k=T(k),c=b(c),_=b(_);var S=function(A){(0,p.default)(M,A);var L,B,P=C(M);function M(){var O;return(0,u.default)(this,M),(O=P.apply(this,arguments))._currentBlockIndex=-1,O._blocks=null,O}return(0,h.default)(M,[{key:"currentBlockIndex",get:function(){return this._currentBlockIndex},set:function(O){this._blocks[this._currentBlockIndex]&&this._blocks[this._currentBlockIndex].willUnselect(),this._blocks[O]&&this._blocks[O].willSelect(),this._currentBlockIndex=O}},{key:"firstBlock",get:function(){return this._blocks[0]}},{key:"lastBlock",get:function(){return this._blocks[this._blocks.length-1]}},{key:"currentBlock",get:function(){return this._blocks[this.currentBlockIndex]},set:function(O){this.currentBlockIndex=this.getBlockIndex(O)}},{key:"nextBlock",get:function(){return this.currentBlockIndex===this._blocks.length-1?null:this._blocks[this.currentBlockIndex+1]}},{key:"nextContentfulBlock",get:function(){return this.blocks.slice(this.currentBlockIndex+1).find(function(O){return!!O.inputs.length})}},{key:"previousContentfulBlock",get:function(){return this.blocks.slice(0,this.currentBlockIndex).reverse().find(function(O){return!!O.inputs.length})}},{key:"previousBlock",get:function(){return this.currentBlockIndex===0?null:this._blocks[this.currentBlockIndex-1]}},{key:"blocks",get:function(){return this._blocks.array}},{key:"isEditorEmpty",get:function(){return this.blocks.every(function(O){return O.isEmpty})}},{key:"prepare",value:function(){var O=this,I=new c.default(this.Editor.UI.nodes.redactor);this._blocks=new Proxy(I,{set:c.default.set,get:c.default.get}),this.listeners.on(document,"copy",function(j){return O.Editor.BlockEvents.handleCommandC(j)})}},{key:"toggleReadOnly",value:function(O){O?this.disableModuleBindings():this.enableModuleBindings()}},{key:"composeBlock",value:function(O){var I=O.tool,j=O.data,H=j===void 0?{}:j,N=O.id,D=N===void 0?void 0:N,K=O.tunes,q=K===void 0?{}:K,U=this.Editor.ReadOnly.isEnabled,G=this.Editor.Tools.blockTools.get(I),Q=new y.default({id:D,data:H,tool:G,api:this.Editor.API,readOnly:U,tunesData:q});return U||this.bindBlockEvents(Q),Q}},{key:"insert",value:function(){var O=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},I=O.id,j=I===void 0?void 0:I,H=O.tool,N=H===void 0?this.config.defaultBlock:H,D=O.data,K=D===void 0?{}:D,q=O.index,U=O.needToFocus,G=U===void 0||U,Q=O.replace,X=Q!==void 0&&Q,ie=O.tunes,ue=ie===void 0?{}:ie,fe=q;fe===void 0&&(fe=this.currentBlockIndex+(X?0:1));var be=this.composeBlock({id:j,tool:N,data:K,tunes:ue});return X&&this.blockDidMutated(g.BlockMutationType.Removed,this.getBlockByIndex(fe),{index:fe}),this._blocks.insert(fe,be,X),this.blockDidMutated(g.BlockMutationType.Added,be,{index:fe}),G?this.currentBlockIndex=fe:fe<=this.currentBlockIndex&&this.currentBlockIndex++,be}},{key:"replace",value:function(O){var I=O.tool,j=I===void 0?this.config.defaultBlock:I,H=O.data,N=H===void 0?{}:H;return this.insert({tool:j,data:N,index:this.currentBlockIndex,replace:!0})}},{key:"paste",value:function(O,I){var j=arguments.length>2&&arguments[2]!==void 0&&arguments[2],H=this.insert({tool:O,replace:j});try{H.call(y.BlockToolAPI.ON_PASTE,I)}catch(N){k.log("".concat(O,": onPaste callback call is failed"),"error",N)}return H}},{key:"insertDefaultBlockAtIndex",value:function(O){var I=arguments.length>1&&arguments[1]!==void 0&&arguments[1],j=this.composeBlock({tool:this.config.defaultBlock});return this._blocks[O]=j,this.blockDidMutated(g.BlockMutationType.Added,j,{index:O}),I?this.currentBlockIndex=O:O<=this.currentBlockIndex&&this.currentBlockIndex++,j}},{key:"insertAtEnd",value:function(){return this.currentBlockIndex=this.blocks.length-1,this.insert()}},{key:"mergeBlocks",value:(B=(0,d.default)(l.default.mark(function O(I,j){var H,N;return l.default.wrap(function(D){for(;;)switch(D.prev=D.next){case 0:if(H=this._blocks.indexOf(j),!j.isEmpty){D.next=3;break}return D.abrupt("return");case 3:return D.next=5,j.data;case 5:if(N=D.sent,k.isEmpty(N)){D.next=9;break}return D.next=9,I.mergeWith(N);case 9:this.removeBlock(H),this.currentBlockIndex=this._blocks.indexOf(I);case 11:case"end":return D.stop()}},O,this)})),function(O,I){return B.apply(this,arguments)})},{key:"removeBlock",value:function(){var O=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.currentBlockIndex;if(!this.validateIndex(O))throw new Error("Can't find a Block to remove");var I=this._blocks[O];I.destroy(),this._blocks.remove(O),this.blockDidMutated(g.BlockMutationType.Removed,I,{index:O}),this.currentBlockIndex>=O&&this.currentBlockIndex--,this.blocks.length?O===0&&(this.currentBlockIndex=0):(this.currentBlockIndex=-1,this.insert())}},{key:"removeSelectedBlocks",value:function(){for(var O,I=this.blocks.length-1;I>=0;I--)this.blocks[I].selected&&(this.removeBlock(I),O=I);return O}},{key:"removeAllBlocks",value:function(){for(var O=this.blocks.length-1;O>=0;O--)this._blocks.remove(O);this.currentBlockIndex=-1,this.insert(),this.currentBlock.firstInput.focus()}},{key:"split",value:function(){var O=this.Editor.Caret.extractFragmentFromCaretPosition(),I=w.default.make("div");I.appendChild(O);var j={text:w.default.isEmpty(I)?"":I.innerHTML};return this.insert({data:j})}},{key:"getBlockByIndex",value:function(O){return O===-1&&(O=this._blocks.length-1),this._blocks[O]}},{key:"getBlockIndex",value:function(O){return this._blocks.indexOf(O)}},{key:"getBlockById",value:function(O){return this._blocks.array.find(function(I){return I.id===O})}},{key:"getBlock",value:function(O){w.default.isElement(O)||(O=O.parentNode);var I=this._blocks.nodes,j=O.closest(".".concat(y.default.CSS.wrapper)),H=I.indexOf(j);if(H>=0)return this._blocks[H]}},{key:"highlightCurrentNode",value:function(){this.clearFocused(),this.currentBlock.focused=!0}},{key:"clearFocused",value:function(){this.blocks.forEach(function(O){O.focused=!1})}},{key:"setCurrentBlockByChildNode",value:function(O){w.default.isElement(O)||(O=O.parentNode);var I=O.closest(".".concat(y.default.CSS.wrapper));if(I){var j=I.closest(".".concat(this.Editor.UI.CSS.editorWrapper));if(j!=null&&j.isEqualNode(this.Editor.UI.nodes.wrapper))return this.currentBlockIndex=this._blocks.nodes.indexOf(I),this.currentBlock.updateCurrentInput(),this.currentBlock}}},{key:"getBlockByChildNode",value:function(O){w.default.isElement(O)||(O=O.parentNode);var I=O.closest(".".concat(y.default.CSS.wrapper));return this.blocks.find(function(j){return j.holder===I})}},{key:"swap",value:function(O,I){this._blocks.swap(O,I),this.currentBlockIndex=I}},{key:"move",value:function(O){var I=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.currentBlockIndex;isNaN(O)||isNaN(I)?k.log("Warning during 'move' call: incorrect indices provided.","warn"):this.validateIndex(O)&&this.validateIndex(I)?(this._blocks.move(O,I),this.currentBlockIndex=O,this.blockDidMutated(g.BlockMutationType.Moved,this.currentBlock,{fromIndex:I,toIndex:O})):k.log("Warning during 'move' call: indices cannot be lower than 0 or greater than the amount of blocks.","warn")}},{key:"dropPointer",value:function(){this.currentBlockIndex=-1,this.clearFocused()}},{key:"clear",value:function(){var O=arguments.length>0&&arguments[0]!==void 0&&arguments[0];this._blocks.removeAll(),this.dropPointer(),O&&this.insert(),this.Editor.UI.checkEmptiness()}},{key:"destroy",value:(L=(0,d.default)(l.default.mark(function O(){return l.default.wrap(function(I){for(;;)switch(I.prev=I.next){case 0:return I.next=2,Promise.all(this.blocks.map(function(j){return j.destroy()}));case 2:case"end":return I.stop()}},O,this)})),function(){return L.apply(this,arguments)})},{key:"bindBlockEvents",value:function(O){var I=this,j=this.Editor.BlockEvents;this.readOnlyMutableListeners.on(O.holder,"keydown",function(H){j.keydown(H)}),this.readOnlyMutableListeners.on(O.holder,"keyup",function(H){j.keyup(H)}),this.readOnlyMutableListeners.on(O.holder,"dragover",function(H){j.dragOver(H)}),this.readOnlyMutableListeners.on(O.holder,"dragleave",function(H){j.dragLeave(H)}),O.on("didMutated",function(H){return I.blockDidMutated(g.BlockMutationType.Changed,H,{index:I.getBlockIndex(H)})})}},{key:"disableModuleBindings",value:function(){this.readOnlyMutableListeners.clearAll()}},{key:"enableModuleBindings",value:function(){var O=this;this.readOnlyMutableListeners.on(document,"cut",function(I){return O.Editor.BlockEvents.handleCommandX(I)}),this.blocks.forEach(function(I){O.bindBlockEvents(I)})}},{key:"validateIndex",value:function(O){return!(O<0||O>=this._blocks.length)}},{key:"blockDidMutated",value:function(O,I){var j=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},H=new CustomEvent(O,{detail:Object.assign({target:new _.default(I)},j)});return this.Editor.ModificationsObserver.onChange(H),I}}]),M}(v.default);s.default=S,S.displayName="BlockManager",r.exports=t.default})=="function"?i.apply(t,n):i)===void 0||(r.exports=o)},function(r,t,e){var i,n,o,a=e(7);n=[t,e(2),e(3),e(5),e(6),e(4),e(9),e(8),e(19),e(116),e(25),e(66)],(o=typeof(i=function(s,l,d,u,h,p,m,x,y,v,w,k){"use strict";var c=e(1);function _(E){if(typeof WeakMap!="function")return null;var T=new WeakMap,C=new WeakMap;return(_=function(S){return S?C:T})(E)}function g(E){var T=function(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(C){return!1}}();return function(){var C,S=(0,p.default)(E);if(T){var A=(0,p.default)(this).constructor;C=Reflect.construct(S,arguments,A)}else C=S.apply(this,arguments);return(0,h.default)(this,C)}}Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0,l=c(l),d=c(d),u=c(u),h=c(h),p=c(p),m=c(m),x=function(E,T){if(!T&&E&&E.__esModule)return E;if(E===null||a(E)!=="object"&&typeof E!="function")return{default:E};var C=_(T);if(C&&C.has(E))return C.get(E);var S={},A=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var L in E)if(L!=="default"&&Object.prototype.hasOwnProperty.call(E,L)){var B=A?Object.getOwnPropertyDescriptor(E,L):null;B&&(B.get||B.set)?Object.defineProperty(S,L,B):S[L]=E[L]}return S.default=E,C&&C.set(E,S),S}(x),y=c(y),v=c(v),w=c(w);var b=function(E){(0,u.default)(C,E);var T=g(C);function C(){var S;return(0,l.default)(this,C),(S=T.apply(this,arguments)).anyBlockSelectedCache=null,S.needToSelectAll=!1,S.nativeInputSelected=!1,S.readyToBlockSelection=!1,S}return(0,d.default)(C,[{key:"sanitizerConfig",get:function(){return{p:{},h1:{},h2:{},h3:{},h4:{},h5:{},h6:{},ol:{},ul:{},li:{},br:!0,img:{src:!0,width:!0,height:!0},a:{href:!0},b:{},i:{},u:{}}}},{key:"allBlocksSelected",get:function(){return this.Editor.BlockManager.blocks.every(function(S){return S.selected===!0})},set:function(S){this.Editor.BlockManager.blocks.forEach(function(A){A.selected=S}),this.clearCache()}},{key:"anyBlockSelected",get:function(){var S=this.Editor.BlockManager;return this.anyBlockSelectedCache===null&&(this.anyBlockSelectedCache=S.blocks.some(function(A){return A.selected===!0})),this.anyBlockSelectedCache}},{key:"selectedBlocks",get:function(){return this.Editor.BlockManager.blocks.filter(function(S){return S.selected})}},{key:"prepare",value:function(){var S=this;this.selection=new w.default,v.default.add({name:"CMD+A",handler:function(A){var L=S.Editor,B=L.BlockManager;if(L.ReadOnly.isEnabled)return A.preventDefault(),void S.selectAllBlocks();B.currentBlock&&S.handleCommandA(A)},on:this.Editor.UI.nodes.redactor})}},{key:"toggleReadOnly",value:function(){w.default.get().removeAllRanges(),this.allBlocksSelected=!1}},{key:"unSelectBlockByIndex",value:function(S){var A=this.Editor.BlockManager;(isNaN(S)?A.currentBlock:A.getBlockByIndex(S)).selected=!1,this.clearCache()}},{key:"clearSelection",value:function(S){var A=arguments.length>1&&arguments[1]!==void 0&&arguments[1],L=this.Editor,B=L.BlockManager,P=L.Caret,M=L.RectangleSelection;this.needToSelectAll=!1,this.nativeInputSelected=!1,this.readyToBlockSelection=!1;var O=S&&S instanceof KeyboardEvent,I=O&&x.isPrintableKey(S.keyCode);if(this.anyBlockSelected&&O&&I&&!w.default.isSelectionExists){var j=B.removeSelectedBlocks();B.insertDefaultBlockAtIndex(j,!0),P.setToBlock(B.currentBlock),x.delay(function(){var H=S.key;P.insertContentAtCaretPosition(H.length>1?"":H)},20)()}this.Editor.CrossBlockSelection.clear(S),this.anyBlockSelected&&!M.isRectActivated()?(A&&this.selection.restore(),this.allBlocksSelected=!1):this.Editor.RectangleSelection.clearSelection()}},{key:"copySelectedBlocks",value:function(S){var A=this;S.preventDefault();var L=y.default.make("div");this.selectedBlocks.forEach(function(M){var O=(0,k.clean)(M.holder.innerHTML,A.sanitizerConfig),I=y.default.make("p");I.innerHTML=O,L.appendChild(I)});var B=Array.from(L.childNodes).map(function(M){return M.textContent}).join(`

`),P=L.innerHTML;return S.clipboardData.setData("text/plain",B),S.clipboardData.setData("text/html",P),Promise.all(this.selectedBlocks.map(function(M){return M.save()})).then(function(M){try{S.clipboardData.setData(A.Editor.Paste.MIME_TYPE,JSON.stringify(M))}catch(O){}})}},{key:"selectBlockByIndex",value:function(S){var A,L=this.Editor.BlockManager;L.clearFocused(),A=isNaN(S)?L.currentBlock:L.getBlockByIndex(S),this.selection.save(),w.default.get().removeAllRanges(),A.selected=!0,this.clearCache(),this.Editor.InlineToolbar.close()}},{key:"clearCache",value:function(){this.anyBlockSelectedCache=null}},{key:"destroy",value:function(){v.default.remove(this.Editor.UI.nodes.redactor,"CMD+A")}},{key:"handleCommandA",value:function(S){if(this.Editor.RectangleSelection.clearSelection(),!y.default.isNativeInput(S.target)||this.readyToBlockSelection){var A=this.Editor.BlockManager.getBlock(S.target).inputs;A.length>1&&!this.readyToBlockSelection?this.readyToBlockSelection=!0:A.length!==1||this.needToSelectAll?this.needToSelectAll?(S.preventDefault(),this.selectAllBlocks(),this.needToSelectAll=!1,this.readyToBlockSelection=!1,this.Editor.ConversionToolbar.close()):this.readyToBlockSelection&&(S.preventDefault(),this.selectBlockByIndex(),this.needToSelectAll=!0):this.needToSelectAll=!0}else this.readyToBlockSelection=!0}},{key:"selectAllBlocks",value:function(){this.selection.save(),w.default.get().removeAllRanges(),this.allBlocksSelected=!0,this.Editor.InlineToolbar.close()}}]),C}(m.default);s.default=b,b.displayName="BlockSelection",r.exports=t.default})=="function"?i.apply(t,n):i)===void 0||(r.exports=o)},function(r,t,e){var i,n,o,a=e(7);n=[t,e(2),e(3),e(5),e(6),e(4),e(25),e(9),e(19),e(8)],(o=typeof(i=function(s,l,d,u,h,p,m,x,y,v){"use strict";var w=e(1);function k(g){if(typeof WeakMap!="function")return null;var b=new WeakMap,E=new WeakMap;return(k=function(T){return T?E:b})(g)}function c(g){var b=function(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(E){return!1}}();return function(){var E,T=(0,p.default)(g);if(b){var C=(0,p.default)(this).constructor;E=Reflect.construct(T,arguments,C)}else E=T.apply(this,arguments);return(0,h.default)(this,E)}}Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0,l=w(l),d=w(d),u=w(u),h=w(h),p=w(p),m=w(m),x=w(x),y=w(y),v=function(g,b){if(!b&&g&&g.__esModule)return g;if(g===null||a(g)!=="object"&&typeof g!="function")return{default:g};var E=k(b);if(E&&E.has(g))return E.get(g);var T={},C=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var S in g)if(S!=="default"&&Object.prototype.hasOwnProperty.call(g,S)){var A=C?Object.getOwnPropertyDescriptor(g,S):null;A&&(A.get||A.set)?Object.defineProperty(T,S,A):T[S]=g[S]}return T.default=g,E&&E.set(g,T),T}(v);var _=function(g){(0,u.default)(E,g);var b=c(E);function E(){return(0,l.default)(this,E),b.apply(this,arguments)}return(0,d.default)(E,[{key:"positions",get:function(){return{START:"start",END:"end",DEFAULT:"default"}}},{key:"isAtStart",get:function(){var T=m.default.get(),C=y.default.getDeepestNode(this.Editor.BlockManager.currentBlock.currentInput),S=T.focusNode;if(y.default.isNativeInput(C))return C.selectionEnd===0;if(!T.anchorNode)return!1;var A=S.textContent.search(/\S/);A===-1&&(A=0);var L=T.focusOffset;return S.nodeType!==Node.TEXT_NODE&&S.childNodes.length&&(S.childNodes[L]?(S=S.childNodes[L],L=0):L=(S=S.childNodes[L-1]).textContent.length),!(!y.default.isLineBreakTag(C)&&!y.default.isEmpty(C)||!this.getHigherLevelSiblings(S,"left").every(function(B){var P=y.default.isLineBreakTag(B),M=B.children.length===1&&y.default.isLineBreakTag(B.children[0]),O=P||M;return y.default.isEmpty(B)&&!O})||L!==A)||C===null||S===C&&L<=A}},{key:"isAtEnd",get:function(){var T=m.default.get(),C=T.focusNode,S=y.default.getDeepestNode(this.Editor.BlockManager.currentBlock.currentInput,!0);if(y.default.isNativeInput(S))return S.selectionEnd===S.value.length;if(!T.focusNode)return!1;var A=T.focusOffset;if(C.nodeType!==Node.TEXT_NODE&&C.childNodes.length&&(C.childNodes[A-1]?A=(C=C.childNodes[A-1]).textContent.length:(C=C.childNodes[0],A=0)),y.default.isLineBreakTag(S)||y.default.isEmpty(S)){var L=this.getHigherLevelSiblings(C,"right");if(L.every(function(P,M){return M===L.length-1&&y.default.isLineBreakTag(P)||y.default.isEmpty(P)&&!y.default.isLineBreakTag(P)})&&A===C.textContent.length)return!0}var B=S.textContent.replace(/\s+$/,"");return C===S&&A>=B.length}},{key:"setToBlock",value:function(T){var C,S=this,A=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.positions.DEFAULT,L=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,B=this.Editor.BlockManager;switch(A){case this.positions.START:C=T.firstInput;break;case this.positions.END:C=T.lastInput;break;default:C=T.currentInput}if(C){var P=y.default.getDeepestNode(C,A===this.positions.END),M=y.default.getContentLength(P);switch(!0){case A===this.positions.START:L=0;break;case A===this.positions.END:case L>M:L=M}v.delay(function(){S.set(P,L)},20)(),B.setCurrentBlockByChildNode(T.holder),B.currentBlock.currentInput=C}}},{key:"setToInput",value:function(T){var C=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.positions.DEFAULT,S=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,A=this.Editor.BlockManager.currentBlock,L=y.default.getDeepestNode(T);switch(C){case this.positions.START:this.set(L,0);break;case this.positions.END:this.set(L,y.default.getContentLength(L));break;default:S&&this.set(L,S)}A.currentInput=T}},{key:"set",value:function(T){var C=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,S=m.default.setCursor(T,C),A=S.top,L=S.bottom,B=window,P=B.innerHeight;A<0&&window.scrollBy(0,A),L>P&&window.scrollBy(0,L-P)}},{key:"setToTheLastBlock",value:function(){var T=this.Editor.BlockManager.lastBlock;if(T)if(T.tool.isDefault&&T.isEmpty)this.setToBlock(T);else{var C=this.Editor.BlockManager.insertAtEnd();this.setToBlock(C)}}},{key:"extractFragmentFromCaretPosition",value:function(){var T=m.default.get();if(T.rangeCount){var C=T.getRangeAt(0),S=this.Editor.BlockManager.currentBlock.currentInput;if(C.deleteContents(),S){if(y.default.isNativeInput(S)){var A=S,L=document.createDocumentFragment(),B=A.value.substring(0,A.selectionStart),P=A.value.substring(A.selectionStart);return L.textContent=P,A.value=B,L}var M=C.cloneRange();return M.selectNodeContents(S),M.setStart(C.endContainer,C.endOffset),M.extractContents()}}}},{key:"navigateNext",value:function(){var T=this.Editor.BlockManager,C=T.currentBlock,S=T.nextContentfulBlock,A=C.nextInput,L=this.isAtEnd,B=S;if(!B&&!A){if(C.tool.isDefault||!L)return!1;B=T.insertAtEnd()}return!!L&&(A?this.setToInput(A,this.positions.START):this.setToBlock(B,this.positions.START),!0)}},{key:"navigatePrevious",value:function(){var T=this.Editor.BlockManager,C=T.currentBlock,S=T.previousContentfulBlock;if(!C)return!1;var A=C.previousInput;return!(!S&&!A||!this.isAtStart||(A?this.setToInput(A,this.positions.END):this.setToBlock(S,this.positions.END),0))}},{key:"createShadow",value:function(T){var C=document.createElement("span");C.classList.add(E.CSS.shadowCaret),T.insertAdjacentElement("beforeend",C)}},{key:"restoreCaret",value:function(T){var C=T.querySelector(".".concat(E.CSS.shadowCaret));C&&(new m.default().expandToTag(C),setTimeout(function(){var S=document.createRange();S.selectNode(C),S.extractContents()},50))}},{key:"insertContentAtCaretPosition",value:function(T){var C=document.createDocumentFragment(),S=document.createElement("div"),A=m.default.get(),L=m.default.range;S.innerHTML=T,Array.from(S.childNodes).forEach(function(M){return C.appendChild(M)}),C.childNodes.length===0&&C.appendChild(new Text);var B=C.lastChild;L.deleteContents(),L.insertNode(C);var P=document.createRange();P.setStart(B,B.textContent.length),A.removeAllRanges(),A.addRange(P)}},{key:"getHigherLevelSiblings",value:function(T,C){for(var S=T,A=[];S.parentNode&&S.parentNode.contentEditable!=="true";)S=S.parentNode;for(var L=C==="left"?"previousSibling":"nextSibling";S[L];)S=S[L],A.push(S);return A}}],[{key:"CSS",get:function(){return{shadowCaret:"cdx-shadow-caret"}}}]),E}(x.default);s.default=_,_.displayName="Caret",r.exports=t.default})=="function"?i.apply(t,n):i)===void 0||(r.exports=o)},function(r,t,e){var i,n,o,a=e(7);n=[t,e(20),e(21),e(2),e(3),e(5),e(6),e(4),e(9),e(25),e(8)],(o=typeof(i=function(s,l,d,u,h,p,m,x,y,v,w){"use strict";var k=e(1);function c(b){if(typeof WeakMap!="function")return null;var E=new WeakMap,T=new WeakMap;return(c=function(C){return C?T:E})(b)}function _(b){var E=function(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(T){return!1}}();return function(){var T,C=(0,x.default)(b);if(E){var S=(0,x.default)(this).constructor;T=Reflect.construct(C,arguments,S)}else T=C.apply(this,arguments);return(0,m.default)(this,T)}}Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0,l=k(l),d=k(d),u=k(u),h=k(h),p=k(p),m=k(m),x=k(x),y=k(y),v=k(v),w=function(b,E){if(!E&&b&&b.__esModule)return b;if(b===null||a(b)!=="object"&&typeof b!="function")return{default:b};var T=c(E);if(T&&T.has(b))return T.get(b);var C={},S=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var A in b)if(A!=="default"&&Object.prototype.hasOwnProperty.call(b,A)){var L=S?Object.getOwnPropertyDescriptor(b,A):null;L&&(L.get||L.set)?Object.defineProperty(C,A,L):C[A]=b[A]}return C.default=b,T&&T.set(b,C),C}(w);var g=function(b){(0,p.default)(C,b);var E,T=_(C);function C(){var S;return(0,u.default)(this,C),(S=T.apply(this,arguments)).onMouseUp=function(){S.listeners.off(document,"mouseover",S.onMouseOver),S.listeners.off(document,"mouseup",S.onMouseUp)},S.onMouseOver=function(A){var L=S.Editor,B=L.BlockManager,P=L.BlockSelection,M=B.getBlockByChildNode(A.relatedTarget)||S.lastSelectedBlock,O=B.getBlockByChildNode(A.target);if(M&&O&&O!==M){if(M===S.firstSelectedBlock)return v.default.get().removeAllRanges(),M.selected=!0,O.selected=!0,void P.clearCache();if(O===S.firstSelectedBlock)return M.selected=!1,O.selected=!1,void P.clearCache();S.Editor.InlineToolbar.close(),S.toggleBlocksSelectedState(M,O),S.lastSelectedBlock=O}},S}return(0,h.default)(C,[{key:"prepare",value:(E=(0,d.default)(l.default.mark(function S(){var A=this;return l.default.wrap(function(L){for(;;)switch(L.prev=L.next){case 0:this.listeners.on(document,"mousedown",function(B){A.enableCrossBlockSelection(B)});case 1:case"end":return L.stop()}},S,this)})),function(){return E.apply(this,arguments)})},{key:"watchSelection",value:function(S){if(S.button===w.mouseButtons.LEFT){var A=this.Editor.BlockManager;this.firstSelectedBlock=A.getBlock(S.target),this.lastSelectedBlock=this.firstSelectedBlock,this.listeners.on(document,"mouseover",this.onMouseOver),this.listeners.on(document,"mouseup",this.onMouseUp)}}},{key:"isCrossBlockSelectionStarted",get:function(){return!!this.firstSelectedBlock&&!!this.lastSelectedBlock}},{key:"toggleBlockSelectedState",value:function(){var S=!(arguments.length>0&&arguments[0]!==void 0)||arguments[0],A=this.Editor,L=A.BlockManager,B=A.BlockSelection;this.lastSelectedBlock||(this.lastSelectedBlock=this.firstSelectedBlock=L.currentBlock),this.firstSelectedBlock===this.lastSelectedBlock&&(this.firstSelectedBlock.selected=!0,B.clearCache(),v.default.get().removeAllRanges());var P=L.blocks.indexOf(this.lastSelectedBlock)+(S?1:-1),M=L.blocks[P];M&&(this.lastSelectedBlock.selected!==M.selected?(M.selected=!0,B.clearCache()):(this.lastSelectedBlock.selected=!1,B.clearCache()),this.lastSelectedBlock=M,this.Editor.InlineToolbar.close(),M.holder.scrollIntoView({block:"nearest"}))}},{key:"clear",value:function(S){var A=this.Editor,L=A.BlockManager,B=A.BlockSelection,P=A.Caret,M=L.blocks.indexOf(this.firstSelectedBlock),O=L.blocks.indexOf(this.lastSelectedBlock);if(B.anyBlockSelected&&M>-1&&O>-1)if(S&&S instanceof KeyboardEvent)switch(S.keyCode){case w.keyCodes.DOWN:case w.keyCodes.RIGHT:P.setToBlock(L.blocks[Math.max(M,O)],P.positions.END);break;case w.keyCodes.UP:case w.keyCodes.LEFT:P.setToBlock(L.blocks[Math.min(M,O)],P.positions.START);break;default:P.setToBlock(L.blocks[Math.max(M,O)],P.positions.END)}else P.setToBlock(L.blocks[Math.max(M,O)],P.positions.END);this.firstSelectedBlock=this.lastSelectedBlock=null}},{key:"enableCrossBlockSelection",value:function(S){var A=this.Editor.UI;v.default.isCollapsed||this.Editor.BlockSelection.clearSelection(S),A.nodes.redactor.contains(S.target)?this.watchSelection(S):this.Editor.BlockSelection.clearSelection(S)}},{key:"toggleBlocksSelectedState",value:function(S,A){for(var L=this.Editor,B=L.BlockManager,P=L.BlockSelection,M=B.blocks.indexOf(S),O=B.blocks.indexOf(A),I=S.selected!==A.selected,j=Math.min(M,O);j<=Math.max(M,O);j++){var H=B.blocks[j];H!==this.firstSelectedBlock&&H!==(I?S:A)&&(B.blocks[j].selected=!B.blocks[j].selected,P.clearCache())}}}]),C}(y.default);s.default=g,g.displayName="CrossBlockSelection",r.exports=t.default})=="function"?i.apply(t,n):i)===void 0||(r.exports=o)},function(r,t,e){var i,n,o;n=[t,e(20),e(21),e(2),e(3),e(5),e(6),e(4),e(25),e(9)],(o=typeof(i=function(a,s,l,d,u,h,p,m,x,y){"use strict";var v=e(1);function w(c){var _=function(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(g){return!1}}();return function(){var g,b=(0,m.default)(c);if(_){var E=(0,m.default)(this).constructor;g=Reflect.construct(b,arguments,E)}else g=b.apply(this,arguments);return(0,p.default)(this,g)}}Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,s=v(s),l=v(l),d=v(d),u=v(u),h=v(h),p=v(p),m=v(m),x=v(x);var k=function(c){(0,h.default)(b,c);var _,g=w(b);function b(){var E;return(0,d.default)(this,b),(E=g.apply(this,arguments)).isStartedAtEditor=!1,E}return(0,u.default)(b,[{key:"toggleReadOnly",value:function(E){E?this.disableModuleBindings():this.enableModuleBindings()}},{key:"enableModuleBindings",value:function(){var E=this,T=this.Editor.UI;this.readOnlyMutableListeners.on(T.nodes.holder,"drop",function(){var C=(0,l.default)(s.default.mark(function S(A){return s.default.wrap(function(L){for(;;)switch(L.prev=L.next){case 0:return L.next=2,E.processDrop(A);case 2:case"end":return L.stop()}},S)}));return function(S){return C.apply(this,arguments)}}(),!0),this.readOnlyMutableListeners.on(T.nodes.holder,"dragstart",function(){E.processDragStart()}),this.readOnlyMutableListeners.on(T.nodes.holder,"dragover",function(C){E.processDragOver(C)},!0)}},{key:"disableModuleBindings",value:function(){this.readOnlyMutableListeners.clearAll()}},{key:"processDrop",value:(_=(0,l.default)(s.default.mark(function E(T){var C,S,A,L,B,P;return s.default.wrap(function(M){for(;;)switch(M.prev=M.next){case 0:return C=this.Editor,S=C.BlockManager,A=C.Caret,L=C.Paste,T.preventDefault(),S.blocks.forEach(function(O){O.dropTarget=!1}),x.default.isAtEditor&&!x.default.isCollapsed&&this.isStartedAtEditor&&document.execCommand("delete"),this.isStartedAtEditor=!1,(B=S.setCurrentBlockByChildNode(T.target))?this.Editor.Caret.setToBlock(B,A.positions.END):(P=S.setCurrentBlockByChildNode(S.lastBlock.holder),this.Editor.Caret.setToBlock(P,A.positions.END)),M.next=9,L.processDataTransfer(T.dataTransfer,!0);case 9:case"end":return M.stop()}},E,this)})),function(E){return _.apply(this,arguments)})},{key:"processDragStart",value:function(){x.default.isAtEditor&&!x.default.isCollapsed&&(this.isStartedAtEditor=!0),this.Editor.InlineToolbar.close()}},{key:"processDragOver",value:function(E){E.preventDefault()}}]),b}((y=v(y)).default);a.default=k,k.displayName="DragNDrop",r.exports=t.default})=="function"?i.apply(t,n):i)===void 0||(r.exports=o)},function(r,t,e){var i,n,o,a=e(7);n=[t,e(2),e(3),e(5),e(6),e(4),e(9),e(8)],(o=typeof(i=function(s,l,d,u,h,p,m,x){"use strict";var y=e(1);function v(c){if(typeof WeakMap!="function")return null;var _=new WeakMap,g=new WeakMap;return(v=function(b){return b?g:_})(c)}function w(c){var _=function(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(g){return!1}}();return function(){var g,b=(0,p.default)(c);if(_){var E=(0,p.default)(this).constructor;g=Reflect.construct(b,arguments,E)}else g=b.apply(this,arguments);return(0,h.default)(this,g)}}Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0,l=y(l),d=y(d),u=y(u),h=y(h),p=y(p),m=y(m),x=function(c,_){if(!_&&c&&c.__esModule)return c;if(c===null||a(c)!=="object"&&typeof c!="function")return{default:c};var g=v(_);if(g&&g.has(c))return g.get(c);var b={},E=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var T in c)if(T!=="default"&&Object.prototype.hasOwnProperty.call(c,T)){var C=E?Object.getOwnPropertyDescriptor(c,T):null;C&&(C.get||C.set)?Object.defineProperty(b,T,C):b[T]=c[T]}return b.default=c,g&&g.set(c,b),b}(x);var k=function(c){(0,u.default)(g,c);var _=w(g);function g(){var b;return(0,l.default)(this,g),(b=_.apply(this,arguments)).disabled=!1,b}return(0,d.default)(g,[{key:"enable",value:function(){this.disabled=!1}},{key:"disable",value:function(){this.disabled=!0}},{key:"onChange",value:function(b){!this.disabled&&x.isFunction(this.config.onChange)&&this.config.onChange(this.Editor.API.methods,b)}}]),g}(m.default);s.default=k,k.displayName="ModificationsObserver",r.exports=t.default})=="function"?i.apply(t,n):i)===void 0||(r.exports=o)},function(r,t,e){var i,n,o,a=e(7);n=[t,e(20),e(30),e(40),e(21),e(2),e(3),e(5),e(6),e(4),e(9),e(19),e(8),e(66)],(o=typeof(i=function(s,l,d,u,h,p,m,x,y,v,w,k,c,_){"use strict";var g=e(1);function b(C){if(typeof WeakMap!="function")return null;var S=new WeakMap,A=new WeakMap;return(b=function(L){return L?A:S})(C)}function E(C){var S=function(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(A){return!1}}();return function(){var A,L=(0,v.default)(C);if(S){var B=(0,v.default)(this).constructor;A=Reflect.construct(L,arguments,B)}else A=L.apply(this,arguments);return(0,y.default)(this,A)}}Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0,l=g(l),d=g(d),u=g(u),h=g(h),p=g(p),m=g(m),x=g(x),y=g(y),v=g(v),w=g(w),k=g(k),c=function(C,S){if(!S&&C&&C.__esModule)return C;if(C===null||a(C)!=="object"&&typeof C!="function")return{default:C};var A=b(S);if(A&&A.has(C))return A.get(C);var L={},B=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var P in C)if(P!=="default"&&Object.prototype.hasOwnProperty.call(C,P)){var M=B?Object.getOwnPropertyDescriptor(C,P):null;M&&(M.get||M.set)?Object.defineProperty(L,P,M):L[P]=C[P]}return L.default=C,A&&A.set(C,L),L}(c);var T=function(C){(0,x.default)(H,C);var S,A,L,B,P,M,O,I,j=E(H);function H(){var N;return(0,p.default)(this,H),(N=j.apply(this,arguments)).MIME_TYPE="application/x-editor-js",N.toolsTags={},N.tagsByTool={},N.toolsPatterns=[],N.toolsFiles={},N.exceptionList=[],N.processTool=function(D){try{var K=D.create({},{},!1);if(D.pasteConfig===!1)return void N.exceptionList.push(D.name);if(!c.isFunction(K.onPaste))return;N.getTagsConfig(D),N.getFilesConfig(D),N.getPatternsConfig(D)}catch(q){c.log("Paste handling for \xAB".concat(D.name,"\xBB Tool hasn't been set up because of the error"),"warn",q)}},N.handlePasteEvent=function(){var D=(0,h.default)(l.default.mark(function K(q){var U,G,Q;return l.default.wrap(function(X){for(;;)switch(X.prev=X.next){case 0:if(U=N.Editor,G=U.BlockManager,Q=U.Toolbar,G.currentBlock&&(!N.isNativeBehaviour(q.target)||q.clipboardData.types.includes("Files"))){X.next=3;break}return X.abrupt("return");case 3:if(!G.currentBlock||!N.exceptionList.includes(G.currentBlock.name)){X.next=5;break}return X.abrupt("return");case 5:q.preventDefault(),N.processDataTransfer(q.clipboardData),G.clearFocused(),Q.close();case 9:case"end":return X.stop()}},K)}));return function(K){return D.apply(this,arguments)}}(),N}return(0,m.default)(H,[{key:"prepare",value:(I=(0,h.default)(l.default.mark(function N(){return l.default.wrap(function(D){for(;;)switch(D.prev=D.next){case 0:this.processTools();case 1:case"end":return D.stop()}},N,this)})),function(){return I.apply(this,arguments)})},{key:"toggleReadOnly",value:function(N){N?this.unsetCallback():this.setCallback()}},{key:"processDataTransfer",value:(O=(0,h.default)(l.default.mark(function N(D){var K,q,U,G,Q,X,ie,ue,fe,be=this,Se=arguments;return l.default.wrap(function(le){for(;;)switch(le.prev=le.next){case 0:if(K=Se.length>1&&Se[1]!==void 0&&Se[1],q=this.Editor.Tools,!((U=D.types).includes?U.includes("Files"):U.contains("Files"))||c.isEmpty(this.toolsFiles)){le.next=8;break}return le.next=7,this.processFiles(D.files);case 7:return le.abrupt("return");case 8:if(G=D.getData(this.MIME_TYPE),Q=D.getData("text/plain"),X=D.getData("text/html"),!G){le.next=19;break}return le.prev=12,this.insertEditorJSData(JSON.parse(G)),le.abrupt("return");case 17:le.prev=17,le.t0=le.catch(12);case 19:if(K&&Q.trim()&&X.trim()&&(X="<p>"+(X.trim()?X:Q)+"</p>"),ie=Object.keys(this.toolsTags).reduce(function(ke,Re){var Me;return ke[Re.toLowerCase()]=(Me=be.toolsTags[Re].sanitizationConfig)!==null&&Me!==void 0?Me:{},ke},{}),ue=Object.assign({},ie,q.getAllInlineToolsSanitizeConfig(),{br:{}}),(fe=(0,_.clean)(X,ue)).trim()&&fe.trim()!==Q&&k.default.isHTMLString(fe)){le.next=28;break}return le.next=26,this.processText(Q);case 26:le.next=30;break;case 28:return le.next=30,this.processText(fe,!0);case 30:case"end":return le.stop()}},N,this,[[12,17]])})),function(N){return O.apply(this,arguments)})},{key:"processText",value:(M=(0,h.default)(l.default.mark(function N(D){var K,q,U,G,Q,X,ie,ue=this,fe=arguments;return l.default.wrap(function(be){for(;;)switch(be.prev=be.next){case 0:if(K=fe.length>1&&fe[1]!==void 0&&fe[1],q=this.Editor,U=q.Caret,G=q.BlockManager,(Q=K?this.processHTML(D):this.processPlain(D)).length){be.next=5;break}return be.abrupt("return");case 5:if(Q.length!==1){be.next=8;break}return Q[0].isBlock?this.processSingleBlock(Q.pop()):this.processInlinePaste(Q.pop()),be.abrupt("return");case 8:X=G.currentBlock&&G.currentBlock.tool.isDefault,ie=X&&G.currentBlock.isEmpty,Q.map(function(){var Se=(0,h.default)(l.default.mark(function le(ke,Re){return l.default.wrap(function(Me){for(;;)switch(Me.prev=Me.next){case 0:return Me.abrupt("return",ue.insertBlock(ke,Re===0&&ie));case 1:case"end":return Me.stop()}},le)}));return function(le,ke){return Se.apply(this,arguments)}}()),G.currentBlock&&U.setToBlock(G.currentBlock,U.positions.END);case 12:case"end":return be.stop()}},N,this)})),function(N){return M.apply(this,arguments)})},{key:"setCallback",value:function(){this.listeners.on(this.Editor.UI.nodes.holder,"paste",this.handlePasteEvent)}},{key:"unsetCallback",value:function(){this.listeners.off(this.Editor.UI.nodes.holder,"paste",this.handlePasteEvent)}},{key:"processTools",value:function(){var N=this.Editor.Tools.blockTools;Array.from(N.values()).forEach(this.processTool)}},{key:"collectTagNames",value:function(N){return c.isString(N)?[N]:c.isObject(N)?Object.keys(N):[]}},{key:"getTagsConfig",value:function(N){var D=this,K=N.pasteConfig.tags||[],q=[];K.forEach(function(U){var G=D.collectTagNames(U);q.push.apply(q,(0,u.default)(G)),G.forEach(function(Q){if(Object.prototype.hasOwnProperty.call(D.toolsTags,Q))c.log("Paste handler for \xAB".concat(N.name,"\xBB Tool on \xAB").concat(Q,"\xBB tag is skipped ")+"because it is already used by \xAB".concat(D.toolsTags[Q].tool.name,"\xBB Tool."),"warn");else{var X=c.isObject(U)?U[Q]:null;D.toolsTags[Q.toUpperCase()]={tool:N,sanitizationConfig:X}}})}),this.tagsByTool[N.name]=q.map(function(U){return U.toUpperCase()})}},{key:"getFilesConfig",value:function(N){var D=N.pasteConfig.files,K=D===void 0?{}:D,q=K.extensions,U=K.mimeTypes;(q||U)&&(q&&!Array.isArray(q)&&(c.log("\xABextensions\xBB property of the onDrop config for \xAB".concat(N.name,"\xBB Tool should be an array")),q=[]),U&&!Array.isArray(U)&&(c.log("\xABmimeTypes\xBB property of the onDrop config for \xAB".concat(N.name,"\xBB Tool should be an array")),U=[]),U&&(U=U.filter(function(G){return!!c.isValidMimeType(G)||(c.log("MIME type value \xAB".concat(G,"\xBB for the \xAB").concat(N.name,"\xBB Tool is not a valid MIME type"),"warn"),!1)})),this.toolsFiles[N.name]={extensions:q||[],mimeTypes:U||[]})}},{key:"getPatternsConfig",value:function(N){var D=this;N.pasteConfig.patterns&&!c.isEmpty(N.pasteConfig.patterns)&&Object.entries(N.pasteConfig.patterns).forEach(function(K){var q=(0,d.default)(K,2),U=q[0],G=q[1];G instanceof RegExp||c.log("Pattern ".concat(G," for \xAB").concat(N.name,"\xBB Tool is skipped because it should be a Regexp instance."),"warn"),D.toolsPatterns.push({key:U,pattern:G,tool:N})})}},{key:"isNativeBehaviour",value:function(N){return k.default.isNativeInput(N)}},{key:"processFiles",value:(P=(0,h.default)(l.default.mark(function N(D){var K,q,U,G,Q=this;return l.default.wrap(function(X){for(;;)switch(X.prev=X.next){case 0:return K=this.Editor.BlockManager,X.next=3,Promise.all(Array.from(D).map(function(ie){return Q.processFile(ie)}));case 3:q=(q=X.sent).filter(function(ie){return!!ie}),U=K.currentBlock.tool.isDefault,G=U&&K.currentBlock.isEmpty,q.forEach(function(ie,ue){K.paste(ie.type,ie.event,ue===0&&G)});case 8:case"end":return X.stop()}},N,this)})),function(N){return P.apply(this,arguments)})},{key:"processFile",value:(B=(0,h.default)(l.default.mark(function N(D){var K,q,U,G,Q;return l.default.wrap(function(X){for(;;)switch(X.prev=X.next){case 0:if(K=c.getFileExtension(D),q=Object.entries(this.toolsFiles).find(function(ie){var ue=(0,d.default)(ie,2),fe=(ue[0],ue[1]),be=fe.mimeTypes,Se=fe.extensions,le=D.type.split("/"),ke=(0,d.default)(le,2),Re=ke[0],Me=ke[1],Ne=Se.find(function(Ke){return Ke.toLowerCase()===K.toLowerCase()}),et=be.find(function(Ke){var Je=Ke.split("/"),Ue=(0,d.default)(Je,2),nt=Ue[0],Ze=Ue[1];return nt===Re&&(Ze===Me||Ze==="*")});return!!Ne||!!et})){X.next=4;break}return X.abrupt("return");case 4:return U=(0,d.default)(q,1),G=U[0],Q=this.composePasteEvent("file",{file:D}),X.abrupt("return",{event:Q,type:G});case 7:case"end":return X.stop()}},N,this)})),function(N){return B.apply(this,arguments)})},{key:"processHTML",value:function(N){var D=this,K=this.Editor.Tools,q=k.default.make("DIV");return q.innerHTML=N,this.getNodes(q).map(function(U){var G,Q=K.defaultTool,X=!1;switch(U.nodeType){case Node.DOCUMENT_FRAGMENT_NODE:(G=k.default.make("div")).appendChild(U);break;case Node.ELEMENT_NODE:G=U,X=!0,D.toolsTags[G.tagName]&&(Q=D.toolsTags[G.tagName].tool)}var ie=Q.pasteConfig.tags.reduce(function(Se,le){return D.collectTagNames(le).forEach(function(ke){var Re=c.isObject(le)?le[ke]:null;Se[ke.toLowerCase()]=Re||{}}),Se},{}),ue=Object.assign({},ie,Q.baseSanitizeConfig);if(G.tagName.toLowerCase()==="table"){var fe=(0,_.clean)(G.outerHTML,ue);G=k.default.make("div",void 0,{innerHTML:fe}).firstChild}else G.innerHTML=(0,_.clean)(G.innerHTML,ue);var be=D.composePasteEvent("tag",{data:G});return{content:G,isBlock:X,tool:Q.name,event:be}}).filter(function(U){var G=k.default.isEmpty(U.content),Q=k.default.isSingleTag(U.content);return!G||Q})}},{key:"processPlain",value:function(N){var D=this,K=this.config.defaultBlock;if(!N)return[];var q=K;return N.split(/\r?\n/).filter(function(U){return U.trim()}).map(function(U){var G=k.default.make("div");G.textContent=U;var Q=D.composePasteEvent("tag",{data:G});return{content:G,tool:q,isBlock:!1,event:Q}})}},{key:"processSingleBlock",value:(L=(0,h.default)(l.default.mark(function N(D){var K,q,U,G;return l.default.wrap(function(Q){for(;;)switch(Q.prev=Q.next){case 0:if(K=this.Editor,q=K.Caret,U=K.BlockManager,(G=U.currentBlock)&&D.tool===G.name&&k.default.containsOnlyInlineElements(D.content.innerHTML)){Q.next=5;break}return this.insertBlock(D,(G==null?void 0:G.tool.isDefault)&&G.isEmpty),Q.abrupt("return");case 5:q.insertContentAtCaretPosition(D.content.innerHTML);case 6:case"end":return Q.stop()}},N,this)})),function(N){return L.apply(this,arguments)})},{key:"processInlinePaste",value:(A=(0,h.default)(l.default.mark(function N(D){var K,q,U,G,Q,X,ie,ue;return l.default.wrap(function(fe){for(;;)switch(fe.prev=fe.next){case 0:if(K=this.Editor,q=K.BlockManager,U=K.Caret,G=D.content,!(q.currentBlock&&q.currentBlock.tool.isDefault&&G.textContent.length<H.PATTERN_PROCESSING_MAX_LENGTH)){fe.next=12;break}return fe.next=6,this.processPattern(G.textContent);case 6:if(!(Q=fe.sent)){fe.next=12;break}return X=q.currentBlock&&q.currentBlock.tool.isDefault&&q.currentBlock.isEmpty,ie=q.paste(Q.tool,Q.event,X),U.setToBlock(ie,U.positions.END),fe.abrupt("return");case 12:q.currentBlock&&q.currentBlock.currentInput?(ue=q.currentBlock.tool.baseSanitizeConfig,document.execCommand("insertHTML",!1,(0,_.clean)(G.innerHTML,ue))):this.insertBlock(D);case 13:case"end":return fe.stop()}},N,this)})),function(N){return A.apply(this,arguments)})},{key:"processPattern",value:(S=(0,h.default)(l.default.mark(function N(D){var K,q;return l.default.wrap(function(U){for(;;)switch(U.prev=U.next){case 0:if(K=this.toolsPatterns.find(function(G){var Q=G.pattern.exec(D);return!!Q&&D===Q.shift()})){U.next=3;break}return U.abrupt("return");case 3:return q=this.composePasteEvent("pattern",{key:K.key,data:D}),U.abrupt("return",{event:q,tool:K.tool.name});case 5:case"end":return U.stop()}},N,this)})),function(N){return S.apply(this,arguments)})},{key:"insertBlock",value:function(N){var D,K=arguments.length>1&&arguments[1]!==void 0&&arguments[1],q=this.Editor,U=q.BlockManager,G=q.Caret,Q=U.currentBlock;if(K&&Q&&Q.isEmpty)return D=U.paste(N.tool,N.event,!0),void G.setToBlock(D,G.positions.END);D=U.paste(N.tool,N.event),G.setToBlock(D,G.positions.END)}},{key:"insertEditorJSData",value:function(N){var D=this.Editor,K=D.BlockManager,q=D.Caret,U=D.Tools;(0,_.sanitizeBlocks)(N,function(G){return U.blockTools.get(G).sanitizeConfig}).forEach(function(G,Q){var X=G.tool,ie=G.data,ue=!1;Q===0&&(ue=K.currentBlock&&K.currentBlock.tool.isDefault&&K.currentBlock.isEmpty);var fe=K.insert({tool:X,data:ie,replace:ue});q.setToBlock(fe,q.positions.END)})}},{key:"processElementNode",value:function(N,D,K){var q=Object.keys(this.toolsTags),U=N,G=(this.toolsTags[U.tagName]||{}).tool,Q=this.tagsByTool[G==null?void 0:G.name]||[],X=q.includes(U.tagName),ie=k.default.blockElements.includes(U.tagName.toLowerCase()),ue=Array.from(U.children).some(function(be){var Se=be.tagName;return q.includes(Se)&&!Q.includes(Se)}),fe=Array.from(U.children).some(function(be){var Se=be.tagName;return k.default.blockElements.includes(Se.toLowerCase())});return ie||X||ue?X&&!ue||ie&&!fe&&!ue?[].concat((0,u.default)(D),[K,U]):void 0:(K.appendChild(U),[].concat((0,u.default)(D),[K]))}},{key:"getNodes",value:function(N){var D,K=this;return Array.from(N.childNodes).reduce(function q(U,G){if(k.default.isEmpty(G)&&!k.default.isSingleTag(G))return U;var Q=U[U.length-1],X=new DocumentFragment;switch(Q&&k.default.isFragment(Q)&&(X=U.pop()),G.nodeType){case Node.ELEMENT_NODE:if(D=K.processElementNode(G,U,X))return D;break;case Node.TEXT_NODE:return X.appendChild(G),[].concat((0,u.default)(U),[X]);default:return[].concat((0,u.default)(U),[X])}return[].concat((0,u.default)(U),(0,u.default)(Array.from(G.childNodes).reduce(q,[])))},[])}},{key:"composePasteEvent",value:function(N,D){return new CustomEvent(N,{detail:D})}}]),H}(w.default);s.default=T,T.displayName="Paste",T.PATTERN_PROCESSING_MAX_LENGTH=450,r.exports=t.default})=="function"?i.apply(t,n):i)===void 0||(r.exports=o)},function(r,t,e){var i,n,o;n=[t,e(20),e(30),e(21),e(2),e(3),e(5),e(6),e(4),e(9),e(151)],(o=typeof(i=function(a,s,l,d,u,h,p,m,x,y,v){"use strict";var w=e(1);function k(_){var g=function(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(b){return!1}}();return function(){var b,E=(0,x.default)(_);if(g){var T=(0,x.default)(this).constructor;b=Reflect.construct(E,arguments,T)}else b=E.apply(this,arguments);return(0,m.default)(this,b)}}Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,s=w(s),l=w(l),d=w(d),u=w(u),h=w(h),p=w(p),m=w(m),x=w(x);var c=function(_){(0,p.default)(T,_);var g,b,E=k(T);function T(){var C;return(0,u.default)(this,T),(C=E.apply(this,arguments)).toolsDontSupportReadOnly=[],C.readOnlyEnabled=!1,C}return(0,h.default)(T,[{key:"isEnabled",get:function(){return this.readOnlyEnabled}},{key:"prepare",value:(b=(0,d.default)(s.default.mark(function C(){var S,A,L;return s.default.wrap(function(B){for(;;)switch(B.prev=B.next){case 0:S=this.Editor.Tools,A=S.blockTools,L=[],Array.from(A.entries()).forEach(function(P){var M=(0,l.default)(P,2),O=M[0];M[1].isReadOnlySupported||L.push(O)}),this.toolsDontSupportReadOnly=L,this.config.readOnly&&L.length>0&&this.throwCriticalError(),this.toggle(this.config.readOnly);case 7:case"end":return B.stop()}},C,this)})),function(){return b.apply(this,arguments)})},{key:"toggle",value:(g=(0,d.default)(s.default.mark(function C(){var S,A,L,B,P=arguments;return s.default.wrap(function(M){for(;;)switch(M.prev=M.next){case 0:(S=P.length>0&&P[0]!==void 0?P[0]:!this.readOnlyEnabled)&&this.toolsDontSupportReadOnly.length>0&&this.throwCriticalError(),A=this.readOnlyEnabled,this.readOnlyEnabled=S,M.t0=s.default.keys(this.Editor);case 5:if((M.t1=M.t0()).done){M.next=12;break}if(L=M.t1.value,this.Editor[L].toggleReadOnly){M.next=9;break}return M.abrupt("continue",5);case 9:this.Editor[L].toggleReadOnly(S),M.next=5;break;case 12:if(A!==S){M.next=14;break}return M.abrupt("return",this.readOnlyEnabled);case 14:return M.next=16,this.Editor.Saver.save();case 16:return B=M.sent,M.next=19,this.Editor.BlockManager.clear();case 19:return M.next=21,this.Editor.Renderer.render(B.blocks);case 21:return M.abrupt("return",this.readOnlyEnabled);case 22:case"end":return M.stop()}},C,this)})),function(){return g.apply(this,arguments)})},{key:"throwCriticalError",value:function(){throw new v.CriticalError("To enable read-only mode all connected tools should support it. Tools ".concat(this.toolsDontSupportReadOnly.join(", ")," don't support read-only mode."))}}]),T}((y=w(y)).default);a.default=c,c.displayName="ReadOnly",r.exports=t.default})=="function"?i.apply(t,n):i)===void 0||(r.exports=o)},function(r,t,e){var i,n,o,a=e(7);n=[t,e(2),e(3),e(5),e(6),e(4),e(9),e(19),e(25),e(61),e(8)],(o=typeof(i=function(s,l,d,u,h,p,m,x,y,v,w){"use strict";var k=e(1);function c(T){if(typeof WeakMap!="function")return null;var C=new WeakMap,S=new WeakMap;return(c=function(A){return A?S:C})(T)}function _(T,C){var S=typeof Symbol!="undefined"&&T[Symbol.iterator]||T["@@iterator"];if(!S){if(Array.isArray(T)||(S=function(O,I){if(O){if(typeof O=="string")return g(O,I);var j=Object.prototype.toString.call(O).slice(8,-1);return j==="Object"&&O.constructor&&(j=O.constructor.name),j==="Map"||j==="Set"?Array.from(O):j==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(j)?g(O,I):void 0}}(T))||C&&T&&typeof T.length=="number"){S&&(T=S);var A=0,L=function(){};return{s:L,n:function(){return A>=T.length?{done:!0}:{done:!1,value:T[A++]}},e:function(O){throw O},f:L}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var B,P=!0,M=!1;return{s:function(){S=S.call(T)},n:function(){var O=S.next();return P=O.done,O},e:function(O){M=!0,B=O},f:function(){try{P||S.return==null||S.return()}finally{if(M)throw B}}}}function g(T,C){(C==null||C>T.length)&&(C=T.length);for(var S=0,A=new Array(C);S<C;S++)A[S]=T[S];return A}function b(T){var C=function(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(S){return!1}}();return function(){var S,A=(0,p.default)(T);if(C){var L=(0,p.default)(this).constructor;S=Reflect.construct(A,arguments,L)}else S=A.apply(this,arguments);return(0,h.default)(this,S)}}Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0,l=k(l),d=k(d),u=k(u),h=k(h),p=k(p),m=k(m),x=k(x),y=k(y),v=k(v),w=function(T,C){if(!C&&T&&T.__esModule)return T;if(T===null||a(T)!=="object"&&typeof T!="function")return{default:T};var S=c(C);if(S&&S.has(T))return S.get(T);var A={},L=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var B in T)if(B!=="default"&&Object.prototype.hasOwnProperty.call(T,B)){var P=L?Object.getOwnPropertyDescriptor(T,B):null;P&&(P.get||P.set)?Object.defineProperty(A,B,P):A[B]=T[B]}return A.default=T,S&&S.set(T,A),A}(w);var E=function(T){(0,u.default)(S,T);var C=b(S);function S(){var A;return(0,l.default)(this,S),(A=C.apply(this,arguments)).isRectSelectionActivated=!1,A.SCROLL_SPEED=3,A.HEIGHT_OF_SCROLL_ZONE=40,A.BOTTOM_SCROLL_ZONE=1,A.TOP_SCROLL_ZONE=2,A.MAIN_MOUSE_BUTTON=0,A.mousedown=!1,A.isScrolling=!1,A.inScrollZone=null,A.startX=0,A.startY=0,A.mouseX=0,A.mouseY=0,A.stackOfSelected=[],A.listenerIds=[],A}return(0,d.default)(S,[{key:"prepare",value:function(){this.enableModuleBindings()}},{key:"startSelection",value:function(A,L){var B=document.elementFromPoint(A-window.pageXOffset,L-window.pageYOffset);B.closest(".".concat(this.Editor.Toolbar.CSS.toolbar))||(this.Editor.BlockSelection.allBlocksSelected=!1,this.clearSelection(),this.stackOfSelected=[]);var P=[".".concat(v.default.CSS.content),".".concat(this.Editor.Toolbar.CSS.toolbar),".".concat(this.Editor.InlineToolbar.CSS.inlineToolbar)],M=B.closest("."+this.Editor.UI.CSS.editorWrapper),O=P.some(function(I){return!!B.closest(I)});M&&!O&&(this.mousedown=!0,this.startX=A,this.startY=L)}},{key:"endSelection",value:function(){this.mousedown=!1,this.startX=0,this.startY=0,this.overlayRectangle.style.display="none"}},{key:"isRectActivated",value:function(){return this.isRectSelectionActivated}},{key:"clearSelection",value:function(){this.isRectSelectionActivated=!1}},{key:"enableModuleBindings",value:function(){var A=this,L=this.genHTML().container;this.listeners.on(L,"mousedown",function(B){A.processMouseDown(B)},!1),this.listeners.on(document.body,"mousemove",w.throttle(function(B){A.processMouseMove(B)},10),{passive:!0}),this.listeners.on(document.body,"mouseleave",function(){A.processMouseLeave()}),this.listeners.on(window,"scroll",w.throttle(function(B){A.processScroll(B)},10),{passive:!0}),this.listeners.on(document.body,"mouseup",function(){A.processMouseUp()},!1)}},{key:"processMouseDown",value:function(A){A.button===this.MAIN_MOUSE_BUTTON&&(A.target.closest(x.default.allInputsSelector)!==null||this.startSelection(A.pageX,A.pageY))}},{key:"processMouseMove",value:function(A){this.changingRectangle(A),this.scrollByZones(A.clientY)}},{key:"processMouseLeave",value:function(){this.clearSelection(),this.endSelection()}},{key:"processScroll",value:function(A){this.changingRectangle(A)}},{key:"processMouseUp",value:function(){this.clearSelection(),this.endSelection()}},{key:"scrollByZones",value:function(A){this.inScrollZone=null,A<=this.HEIGHT_OF_SCROLL_ZONE&&(this.inScrollZone=this.TOP_SCROLL_ZONE),document.documentElement.clientHeight-A<=this.HEIGHT_OF_SCROLL_ZONE&&(this.inScrollZone=this.BOTTOM_SCROLL_ZONE),this.inScrollZone?this.isScrolling||(this.scrollVertical(this.inScrollZone===this.TOP_SCROLL_ZONE?-this.SCROLL_SPEED:this.SCROLL_SPEED),this.isScrolling=!0):this.isScrolling=!1}},{key:"genHTML",value:function(){var A=this.Editor.UI,L=A.nodes.holder.querySelector("."+A.CSS.editorWrapper),B=x.default.make("div",S.CSS.overlay,{}),P=x.default.make("div",S.CSS.overlayContainer,{}),M=x.default.make("div",S.CSS.rect,{});return P.appendChild(M),B.appendChild(P),L.appendChild(B),this.overlayRectangle=M,{container:L,overlay:B}}},{key:"scrollVertical",value:function(A){var L=this;if(this.inScrollZone&&this.mousedown){var B=window.pageYOffset;window.scrollBy(0,A),this.mouseY+=window.pageYOffset-B,setTimeout(function(){L.scrollVertical(A)},0)}}},{key:"changingRectangle",value:function(A){if(this.mousedown){A.pageY!==void 0&&(this.mouseX=A.pageX,this.mouseY=A.pageY);var L=this.genInfoForMouseSelection(),B=L.rightPos,P=L.leftPos,M=L.index,O=this.startX>B&&this.mouseX>B,I=this.startX<P&&this.mouseX<P;this.rectCrossesBlocks=!(O||I),this.isRectSelectionActivated||(this.rectCrossesBlocks=!1,this.isRectSelectionActivated=!0,this.shrinkRectangleToPoint(),this.overlayRectangle.style.display="block"),this.updateRectangleSize(),this.Editor.Toolbar.close(),M!==void 0&&(this.trySelectNextBlock(M),this.inverseSelection(),y.default.get().removeAllRanges())}}},{key:"shrinkRectangleToPoint",value:function(){this.overlayRectangle.style.left="".concat(this.startX-window.pageXOffset,"px"),this.overlayRectangle.style.top="".concat(this.startY-window.pageYOffset,"px"),this.overlayRectangle.style.bottom="calc(100% - ".concat(this.startY-window.pageYOffset,"px"),this.overlayRectangle.style.right="calc(100% - ".concat(this.startX-window.pageXOffset,"px")}},{key:"inverseSelection",value:function(){var A=this.Editor.BlockManager.getBlockByIndex(this.stackOfSelected[0]).selected;if(this.rectCrossesBlocks&&!A){var L,B=_(this.stackOfSelected);try{for(B.s();!(L=B.n()).done;){var P=L.value;this.Editor.BlockSelection.selectBlockByIndex(P)}}catch(j){B.e(j)}finally{B.f()}}if(!this.rectCrossesBlocks&&A){var M,O=_(this.stackOfSelected);try{for(O.s();!(M=O.n()).done;){var I=M.value;this.Editor.BlockSelection.unSelectBlockByIndex(I)}}catch(j){O.e(j)}finally{O.f()}}}},{key:"updateRectangleSize",value:function(){this.mouseY>=this.startY?(this.overlayRectangle.style.top="".concat(this.startY-window.pageYOffset,"px"),this.overlayRectangle.style.bottom="calc(100% - ".concat(this.mouseY-window.pageYOffset,"px")):(this.overlayRectangle.style.bottom="calc(100% - ".concat(this.startY-window.pageYOffset,"px"),this.overlayRectangle.style.top="".concat(this.mouseY-window.pageYOffset,"px")),this.mouseX>=this.startX?(this.overlayRectangle.style.left="".concat(this.startX-window.pageXOffset,"px"),this.overlayRectangle.style.right="calc(100% - ".concat(this.mouseX-window.pageXOffset,"px")):(this.overlayRectangle.style.right="calc(100% - ".concat(this.startX-window.pageXOffset,"px"),this.overlayRectangle.style.left="".concat(this.mouseX-window.pageXOffset,"px"))}},{key:"genInfoForMouseSelection",value:function(){var A,L=document.body.offsetWidth/2,B=this.mouseY-window.pageYOffset,P=document.elementFromPoint(L,B),M=this.Editor.BlockManager.getBlockByChildNode(P);M!==void 0&&(A=this.Editor.BlockManager.blocks.findIndex(function(j){return j.holder===M.holder}));var O=this.Editor.BlockManager.lastBlock.holder.querySelector("."+v.default.CSS.content),I=Number.parseInt(window.getComputedStyle(O).width,10)/2;return{index:A,leftPos:L-I,rightPos:L+I}}},{key:"addBlockInSelection",value:function(A){this.rectCrossesBlocks&&this.Editor.BlockSelection.selectBlockByIndex(A),this.stackOfSelected.push(A)}},{key:"trySelectNextBlock",value:function(A){var L=this,B=this.stackOfSelected[this.stackOfSelected.length-1]===A,P=this.stackOfSelected.length;if(!B){var M=this.stackOfSelected[P-1]-this.stackOfSelected[P-2]>0,O=0;P>1&&(O=M?1:-1);var I=A>this.stackOfSelected[P-1]&&O===1,j=A<this.stackOfSelected[P-1]&&O===-1,H=!(I||j||O===0);if(H||!(A>this.stackOfSelected[P-1]||this.stackOfSelected[P-1]===void 0)){if(!H&&A<this.stackOfSelected[P-1])for(var N=this.stackOfSelected[P-1]-1;N>=A;N--)this.addBlockInSelection(N);else if(H){var D,K=P-1;for(D=A>this.stackOfSelected[P-1]?function(){return A>L.stackOfSelected[K]}:function(){return A<L.stackOfSelected[K]};D();)this.rectCrossesBlocks&&this.Editor.BlockSelection.unSelectBlockByIndex(this.stackOfSelected[K]),this.stackOfSelected.pop(),K--}}else for(var q=this.stackOfSelected[P-1]+1||A;q<=A;q++)this.addBlockInSelection(q)}}}],[{key:"CSS",get:function(){return{overlay:"codex-editor-overlay",overlayContainer:"codex-editor-overlay__container",rect:"codex-editor-overlay__rectangle",topScrollZone:"codex-editor-overlay__scroll-zone--top",bottomScrollZone:"codex-editor-overlay__scroll-zone--bottom"}}}]),S}(m.default);s.default=E,E.displayName="RectangleSelection",r.exports=t.default})=="function"?i.apply(t,n):i)===void 0||(r.exports=o)},function(r,t,e){var i,n,o,a=e(7);n=[t,e(20),e(21),e(2),e(3),e(5),e(6),e(4),e(9),e(8)],(o=typeof(i=function(s,l,d,u,h,p,m,x,y,v){"use strict";var w=e(1);function k(g){if(typeof WeakMap!="function")return null;var b=new WeakMap,E=new WeakMap;return(k=function(T){return T?E:b})(g)}function c(g){var b=function(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(E){return!1}}();return function(){var E,T=(0,x.default)(g);if(b){var C=(0,x.default)(this).constructor;E=Reflect.construct(T,arguments,C)}else E=T.apply(this,arguments);return(0,m.default)(this,E)}}Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0,l=w(l),d=w(d),u=w(u),h=w(h),p=w(p),m=w(m),x=w(x),y=w(y),v=function(g,b){if(!b&&g&&g.__esModule)return g;if(g===null||a(g)!=="object"&&typeof g!="function")return{default:g};var E=k(b);if(E&&E.has(g))return E.get(g);var T={},C=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var S in g)if(S!=="default"&&Object.prototype.hasOwnProperty.call(g,S)){var A=C?Object.getOwnPropertyDescriptor(g,S):null;A&&(A.get||A.set)?Object.defineProperty(T,S,A):T[S]=g[S]}return T.default=g,E&&E.set(g,T),T}(v);var _=function(g){(0,p.default)(C,g);var b,E,T=c(C);function C(){return(0,u.default)(this,C),T.apply(this,arguments)}return(0,h.default)(C,[{key:"render",value:(E=(0,d.default)(l.default.mark(function S(A){var L,B,P=this;return l.default.wrap(function(M){for(;;)switch(M.prev=M.next){case 0:return L=A.map(function(O){return{function:function(){return P.insertBlock(O)}}}),this.Editor.ModificationsObserver.disable(),M.next=4,v.sequence(L);case 4:return B=M.sent,this.Editor.ModificationsObserver.enable(),this.Editor.UI.checkEmptiness(),M.abrupt("return",B);case 8:case"end":return M.stop()}},S,this)})),function(S){return E.apply(this,arguments)})},{key:"insertBlock",value:(b=(0,d.default)(l.default.mark(function S(A){var L,B,P,M,O,I,j,H,N,D,K;return l.default.wrap(function(q){for(;;)switch(q.prev=q.next){case 0:if(B=this.Editor,P=B.Tools,M=B.BlockManager,O=A.type,I=A.data,j=A.tunes,H=A.id,!P.available.has(O)){q.next=13;break}q.prev=3,M.insert({id:H,tool:O,data:I,tunes:j}),q.next=11;break;case 7:throw q.prev=7,q.t0=q.catch(3),v.log("Block \xAB".concat(O,"\xBB skipped because of plugins error"),"warn",I),Error(q.t0);case 11:q.next=18;break;case 13:N={savedData:{id:H,type:O,data:I},title:O},P.unavailable.has(O)&&(D=P.unavailable.get(O).toolbox,K=(L=D[0])===null||L===void 0?void 0:L.title,N.title=K||N.title),M.insert({id:H,tool:P.stubTool,data:N}).stretched=!0,v.log("Tool \xAB".concat(O,"\xBB is not found. Check 'tools' property at your initial Editor.js config."),"warn");case 18:case"end":return q.stop()}},S,this,[[3,7]])})),function(S){return b.apply(this,arguments)})}]),C}(y.default);s.default=_,_.displayName="Renderer",r.exports=t.default})=="function"?i.apply(t,n):i)===void 0||(r.exports=o)},function(r,t,e){var i,n,o,a=e(7);n=[t,e(20),e(21),e(2),e(3),e(5),e(6),e(4),e(9),e(8),e(66)],(o=typeof(i=function(s,l,d,u,h,p,m,x,y,v,w){"use strict";var k=e(1);function c(b){if(typeof WeakMap!="function")return null;var E=new WeakMap,T=new WeakMap;return(c=function(C){return C?T:E})(b)}function _(b){var E=function(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(T){return!1}}();return function(){var T,C=(0,x.default)(b);if(E){var S=(0,x.default)(this).constructor;T=Reflect.construct(C,arguments,S)}else T=C.apply(this,arguments);return(0,m.default)(this,T)}}Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0,l=k(l),d=k(d),u=k(u),h=k(h),p=k(p),m=k(m),x=k(x),y=k(y),v=function(b,E){if(!E&&b&&b.__esModule)return b;if(b===null||a(b)!=="object"&&typeof b!="function")return{default:b};var T=c(E);if(T&&T.has(b))return T.get(b);var C={},S=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var A in b)if(A!=="default"&&Object.prototype.hasOwnProperty.call(b,A)){var L=S?Object.getOwnPropertyDescriptor(b,A):null;L&&(L.get||L.set)?Object.defineProperty(C,A,L):C[A]=b[A]}return C.default=b,T&&T.set(b,C),C}(v);var g=function(b){(0,p.default)(S,b);var E,T,C=_(S);function S(){return(0,u.default)(this,S),C.apply(this,arguments)}return(0,h.default)(S,[{key:"save",value:(T=(0,d.default)(l.default.mark(function A(){var L,B,P,M,O,I,j,H=this;return l.default.wrap(function(N){for(;;)switch(N.prev=N.next){case 0:return L=this.Editor,B=L.BlockManager,P=L.Tools,M=B.blocks,O=[],N.prev=2,M.forEach(function(D){O.push(H.getSavedData(D))}),N.next=6,Promise.all(O);case 6:return I=N.sent,N.next=9,(0,w.sanitizeBlocks)(I,function(D){return P.blockTools.get(D).sanitizeConfig});case 9:return j=N.sent,N.abrupt("return",this.makeOutput(j));case 13:N.prev=13,N.t0=N.catch(2),v.logLabeled("Saving failed due to the Error %o","error",N.t0);case 16:case"end":return N.stop()}},A,this,[[2,13]])})),function(){return T.apply(this,arguments)})},{key:"getSavedData",value:(E=(0,d.default)(l.default.mark(function A(L){var B,P;return l.default.wrap(function(M){for(;;)switch(M.prev=M.next){case 0:return M.next=2,L.save();case 2:if(B=M.sent,M.t0=B,!M.t0){M.next=8;break}return M.next=7,L.validate(B.data);case 7:M.t0=M.sent;case 8:return P=M.t0,M.abrupt("return",Object.assign(Object.assign({},B),{isValid:P}));case 10:case"end":return M.stop()}},A)})),function(A){return E.apply(this,arguments)})},{key:"makeOutput",value:function(A){var L=this,B=0,P=[];return v.log("[Editor.js saving]:","groupCollapsed"),A.forEach(function(M){var O=M.id,I=M.tool,j=M.data,H=M.tunes,N=M.time,D=M.isValid;if(B+=N,v.log("".concat(I.charAt(0).toUpperCase()+I.slice(1)),"group"),!D)return v.log("Block \xAB".concat(I,"\xBB skipped because saved data is invalid")),void v.log(void 0,"groupEnd");if(v.log(j),v.log(void 0,"groupEnd"),I!==L.Editor.Tools.stubTool){var K=Object.assign({id:O,type:I,data:j},!v.isEmpty(H)&&{tunes:H});P.push(K)}else P.push(j)}),v.log("Total","log",B),v.log(void 0,"groupEnd"),{time:+new Date,blocks:P,version:"2.26.3"}}}]),S}(y.default);s.default=g,g.displayName="Saver",r.exports=t.default})=="function"?i.apply(t,n):i)===void 0||(r.exports=o)},function(r,t,e){var i,n,o,a=e(7);n=[t,e(30),e(2),e(3),e(5),e(6),e(4),e(9),e(19),e(25),e(85),e(54),e(68)],(o=typeof(i=function(s,l,d,u,h,p,m,x,y,v,w,k,c){"use strict";var _=e(1);function g(T){if(typeof WeakMap!="function")return null;var C=new WeakMap,S=new WeakMap;return(g=function(A){return A?S:C})(T)}function b(T){var C=function(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(S){return!1}}();return function(){var S,A=(0,m.default)(T);if(C){var L=(0,m.default)(this).constructor;S=Reflect.construct(A,arguments,L)}else S=A.apply(this,arguments);return(0,p.default)(this,S)}}Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0,l=_(l),d=_(d),u=_(u),h=_(h),p=_(p),m=_(m),x=_(x),y=_(y),v=_(v),w=function(T,C){if(!C&&T&&T.__esModule)return T;if(T===null||a(T)!=="object"&&typeof T!="function")return{default:T};var S=g(C);if(S&&S.has(T))return S.get(T);var A={},L=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var B in T)if(B!=="default"&&Object.prototype.hasOwnProperty.call(T,B)){var P=L?Object.getOwnPropertyDescriptor(T,B):null;P&&(P.get||P.set)?Object.defineProperty(A,B,P):A[B]=T[B]}return A.default=T,S&&S.set(T,A),A}(w),k=_(k);var E=function(T){(0,h.default)(S,T);var C=b(S);function S(){var A;return(0,d.default)(this,S),(A=C.apply(this,arguments)).opened=!1,A.selection=new v.default,A.onOverlayClicked=function(){A.close()},A}return(0,u.default)(S,[{key:"events",get:function(){return{opened:"block-settings-opened",closed:"block-settings-closed"}}},{key:"CSS",get:function(){return{settings:"ce-settings"}}},{key:"flipper",get:function(){var A;return(A=this.popover)===null||A===void 0?void 0:A.flipper}},{key:"make",value:function(){this.nodes.wrapper=y.default.make("div")}},{key:"destroy",value:function(){this.removeAllNodes()}},{key:"open",value:function(){var A=this,L=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.Editor.BlockManager.currentBlock;this.opened=!0,this.selection.save(),L.selected=!0,this.Editor.BlockSelection.clearCache();var B=L.getTunes(),P=(0,l.default)(B,2),M=P[0],O=P[1];this.eventsDispatcher.emit(this.events.opened),this.popover=new w.default({className:this.CSS.settings,searchable:!0,filterLabel:k.default.ui(c.I18nInternalNS.ui.popover,"Filter"),nothingFoundLabel:k.default.ui(c.I18nInternalNS.ui.popover,"Nothing found"),items:M,customContent:O,customContentFlippableItems:this.getControls(O),scopeElement:this.Editor.API.methods.ui.nodes.redactor}),this.popover.on(w.PopoverEvent.OverlayClicked,this.onOverlayClicked),this.popover.on(w.PopoverEvent.Close,function(){return A.close()}),this.nodes.wrapper.append(this.popover.getElement()),this.popover.show()}},{key:"getElement",value:function(){return this.nodes.wrapper}},{key:"close",value:function(){this.opened=!1,v.default.isAtEditor||this.selection.restore(),this.selection.clearSaved(),!this.Editor.CrossBlockSelection.isCrossBlockSelectionStarted&&this.Editor.BlockManager.currentBlock&&(this.Editor.BlockManager.currentBlock.selected=!1),this.eventsDispatcher.emit(this.events.closed),this.popover&&(this.popover.off(w.PopoverEvent.OverlayClicked,this.onOverlayClicked),this.popover.destroy(),this.popover.getElement().remove(),this.popover=null)}},{key:"getControls",value:function(A){var L=this.Editor.StylesAPI,B=A.querySelectorAll(".".concat(L.classes.settingsButton,", ").concat(y.default.allInputsSelector));return Array.from(B)}}]),S}(x.default);s.default=E,E.displayName="BlockSettings",r.exports=t.default})=="function"?i.apply(t,n):i)===void 0||(r.exports=o)},function(r,t,e){var i,n,o,a=e(7);n=[t,e(20),e(30),e(21),e(40),e(2),e(3),e(5),e(6),e(4),e(9),e(19),e(8),e(67),e(54),e(68),e(66)],(o=typeof(i=function(s,l,d,u,h,p,m,x,y,v,w,k,c,_,g,b,E){"use strict";var T=e(1);function C(L){if(typeof WeakMap!="function")return null;var B=new WeakMap,P=new WeakMap;return(C=function(M){return M?P:B})(L)}function S(L){var B=function(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(P){return!1}}();return function(){var P,M=(0,v.default)(L);if(B){var O=(0,v.default)(this).constructor;P=Reflect.construct(M,arguments,O)}else P=M.apply(this,arguments);return(0,y.default)(this,P)}}Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0,l=T(l),d=T(d),u=T(u),h=T(h),p=T(p),m=T(m),x=T(x),y=T(y),v=T(v),w=T(w),k=T(k),c=function(L,B){if(!B&&L&&L.__esModule)return L;if(L===null||a(L)!=="object"&&typeof L!="function")return{default:L};var P=C(B);if(P&&P.has(L))return P.get(L);var M={},O=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var I in L)if(I!=="default"&&Object.prototype.hasOwnProperty.call(L,I)){var j=O?Object.getOwnPropertyDescriptor(L,I):null;j&&(j.get||j.set)?Object.defineProperty(M,I,j):M[I]=L[I]}return M.default=L,P&&P.set(L,M),M}(c),_=T(_),g=T(g);var A=function(L){(0,x.default)(O,L);var B,P,M=S(O);function O(){var I;return(0,p.default)(this,O),(I=M.apply(this,arguments)).opened=!1,I.tools=[],I.flipper=null,I.togglingCallback=null,I}return(0,m.default)(O,[{key:"make",value:function(){this.nodes.wrapper=k.default.make("div",[O.CSS.conversionToolbarWrapper].concat((0,h.default)(this.isRtl?[this.Editor.UI.CSS.editorRtlFix]:[]))),this.nodes.tools=k.default.make("div",O.CSS.conversionToolbarTools);var I=k.default.make("div",O.CSS.conversionToolbarLabel,{textContent:g.default.ui(b.I18nInternalNS.ui.inlineToolbar.converter,"Convert to")});return this.addTools(),this.enableFlipper(),k.default.append(this.nodes.wrapper,I),k.default.append(this.nodes.wrapper,this.nodes.tools),this.nodes.wrapper}},{key:"destroy",value:function(){this.flipper&&(this.flipper.deactivate(),this.flipper=null),this.removeAllNodes()}},{key:"toggle",value:function(I){this.opened?this.close():this.open(),c.isFunction(I)&&(this.togglingCallback=I)}},{key:"open",value:function(){var I=this;this.filterTools(),this.opened=!0,this.nodes.wrapper.classList.add(O.CSS.conversionToolbarShowed),window.requestAnimationFrame(function(){I.flipper.activate(I.tools.map(function(j){return j.button}).filter(function(j){return!j.classList.contains(O.CSS.conversionToolHidden)})),I.flipper.focusFirst(),c.isFunction(I.togglingCallback)&&I.togglingCallback(!0)})}},{key:"close",value:function(){this.opened=!1,this.flipper.deactivate(),this.nodes.wrapper.classList.remove(O.CSS.conversionToolbarShowed),c.isFunction(this.togglingCallback)&&this.togglingCallback(!1)}},{key:"hasTools",value:function(){return this.tools.length!==1||this.tools[0].name!==this.config.defaultBlock}},{key:"replaceWithBlock",value:(P=(0,u.default)(l.default.mark(function I(j,H){var N,D,K,q,U,G,Q,X,ie,ue=this;return l.default.wrap(function(fe){for(;;)switch(fe.prev=fe.next){case 0:return N=this.Editor.BlockManager.currentBlock.tool,fe.next=3,this.Editor.BlockManager.currentBlock.save();case 3:if(D=fe.sent,K=D.data,q=this.Editor.Tools.blockTools.get(j),U="",G=N.conversionConfig.export,!c.isFunction(G)){fe.next=12;break}U=G(K),fe.next=18;break;case 12:if(!c.isString(G)){fe.next=16;break}U=K[G],fe.next=18;break;case 16:return c.log("Conversion \xABexport\xBB property must be a string or function. String means key of saved data object to export. Function should export processed string to export."),fe.abrupt("return");case 18:if(Q=(0,E.clean)(U,q.sanitizeConfig),X={},ie=q.conversionConfig.import,!c.isFunction(ie)){fe.next=25;break}X=ie(Q),fe.next=31;break;case 25:if(!c.isString(ie)){fe.next=29;break}X[ie]=Q,fe.next=31;break;case 29:return c.log("Conversion \xABimport\xBB property must be a string or function. String means key of tool data to import. Function accepts a imported string and return composed tool data."),fe.abrupt("return");case 31:H&&(X=Object.assign(X,H)),this.Editor.BlockManager.replace({tool:j,data:X}),this.Editor.BlockSelection.clearSelection(),this.close(),this.Editor.InlineToolbar.close(),c.delay(function(){ue.Editor.Caret.setToBlock(ue.Editor.BlockManager.currentBlock)},10)();case 37:case"end":return fe.stop()}},I,this)})),function(I,j){return P.apply(this,arguments)})},{key:"addTools",value:function(){var I=this,j=this.Editor.Tools.blockTools;Array.from(j.entries()).forEach(function(H){var N=(0,d.default)(H,2),D=N[0],K=N[1],q=K.conversionConfig;q&&q.import&&K.toolbox.forEach(function(U){return I.addToolIfValid(D,U)})})}},{key:"addToolIfValid",value:function(I,j){!c.isEmpty(j)&&j.icon&&this.addTool(I,j)}},{key:"addTool",value:function(I,j){var H=this,N=k.default.make("div",[O.CSS.conversionTool]),D=k.default.make("div",[O.CSS.conversionToolIcon]);N.dataset.tool=I,D.innerHTML=j.icon,k.default.append(N,D),k.default.append(N,k.default.text(g.default.t(b.I18nInternalNS.toolNames,j.title||c.capitalize(I)))),k.default.append(this.nodes.tools,N),this.tools.push({name:I,button:N,toolboxItem:j}),this.listeners.on(N,"click",(0,u.default)(l.default.mark(function K(){return l.default.wrap(function(q){for(;;)switch(q.prev=q.next){case 0:return q.next=2,H.replaceWithBlock(I,j.data);case 2:case"end":return q.stop()}},K)})))}},{key:"filterTools",value:(B=(0,u.default)(l.default.mark(function I(){var j,H,N;return l.default.wrap(function(D){for(;;)switch(D.prev=D.next){case 0:return N=function(K,q){return K.icon===q.icon&&K.title===q.title},j=this.Editor.BlockManager.currentBlock,D.next=4,j.getActiveToolboxEntry();case 4:H=D.sent,this.tools.forEach(function(K){var q=!1;if(H){var U=N(H,K.toolboxItem);q=K.button.dataset.tool===j.name&&U}K.button.hidden=q,K.button.classList.toggle(O.CSS.conversionToolHidden,q)});case 6:case"end":return D.stop()}},I,this)})),function(){return B.apply(this,arguments)})},{key:"enableFlipper",value:function(){this.flipper=new _.default({focusedItemClass:O.CSS.conversionToolFocused})}}],[{key:"CSS",get:function(){return{conversionToolbarWrapper:"ce-conversion-toolbar",conversionToolbarShowed:"ce-conversion-toolbar--showed",conversionToolbarTools:"ce-conversion-toolbar__tools",conversionToolbarLabel:"ce-conversion-toolbar__label",conversionTool:"ce-conversion-tool",conversionToolHidden:"ce-conversion-tool--hidden",conversionToolIcon:"ce-conversion-tool__icon",conversionToolFocused:"ce-conversion-tool--focused",conversionToolActive:"ce-conversion-tool--active"}}}]),O}(w.default);s.default=A,A.displayName="ConversionToolbar",r.exports=t.default})=="function"?i.apply(t,n):i)===void 0||(r.exports=o)},function(r,t,e){var i,n,o,a=e(7);n=[t,e(20),e(21),e(40),e(30),e(2),e(3),e(5),e(6),e(4),e(9),e(19),e(25),e(8),e(67),e(54),e(68),e(116),e(115),e(69),e(41)],(o=typeof(i=function(s,l,d,u,h,p,m,x,y,v,w,k,c,_,g,b,E,T,C,S,A){"use strict";var L=e(1);function B(O){if(typeof WeakMap!="function")return null;var I=new WeakMap,j=new WeakMap;return(B=function(H){return H?j:I})(O)}function P(O){var I=function(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(j){return!1}}();return function(){var j,H=(0,v.default)(O);if(I){var N=(0,v.default)(this).constructor;j=Reflect.construct(H,arguments,N)}else j=H.apply(this,arguments);return(0,y.default)(this,j)}}Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0,l=L(l),d=L(d),u=L(u),h=L(h),p=L(p),m=L(m),x=L(x),y=L(y),v=L(v),w=L(w),k=L(k),c=L(c),_=function(O,I){if(!I&&O&&O.__esModule)return O;if(O===null||a(O)!=="object"&&typeof O!="function")return{default:O};var j=B(I);if(j&&j.has(O))return j.get(O);var H={},N=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var D in O)if(D!=="default"&&Object.prototype.hasOwnProperty.call(O,D)){var K=N?Object.getOwnPropertyDescriptor(O,D):null;K&&(K.get||K.set)?Object.defineProperty(H,D,K):H[D]=O[D]}return H.default=O,j&&j.set(O,H),H}(_),g=L(g),b=L(b),T=L(T),C=L(C);var M=function(O){(0,x.default)(H,O);var I,j=P(H);function H(N){var D,K=N.config,q=N.eventsDispatcher;return(0,p.default)(this,H),(D=j.call(this,{config:K,eventsDispatcher:q})).CSS={inlineToolbar:"ce-inline-toolbar",inlineToolbarShowed:"ce-inline-toolbar--showed",inlineToolbarLeftOriented:"ce-inline-toolbar--left-oriented",inlineToolbarRightOriented:"ce-inline-toolbar--right-oriented",inlineToolbarShortcut:"ce-inline-toolbar__shortcut",buttonsWrapper:"ce-inline-toolbar__buttons",actionsWrapper:"ce-inline-toolbar__actions",inlineToolButton:"ce-inline-tool",inputField:"cdx-input",focusedButton:"ce-inline-tool--focused",conversionToggler:"ce-inline-toolbar__dropdown",conversionTogglerArrow:"ce-inline-toolbar__dropdown-arrow",conversionTogglerHidden:"ce-inline-toolbar__dropdown--hidden",conversionTogglerContent:"ce-inline-toolbar__dropdown-content",togglerAndButtonsWrapper:"ce-inline-toolbar__toggler-and-button-wrapper"},D.opened=!1,D.toolbarVerticalMargin=_.isMobileScreen()?20:6,D.buttonsList=null,D.width=0,D.flipper=null,D.tooltip=new C.default,D}return(0,m.default)(H,[{key:"toggleReadOnly",value:function(N){N?(this.destroy(),this.Editor.ConversionToolbar.destroy()):this.make()}},{key:"tryToShow",value:function(){var N=arguments.length>0&&arguments[0]!==void 0&&arguments[0],D=!(arguments.length>1&&arguments[1]!==void 0)||arguments[1];this.allowedToShow()?(this.move(),this.open(D),this.Editor.Toolbar.close()):N&&this.close()}},{key:"move",value:function(){var N=c.default.rect,D=this.Editor.UI.nodes.wrapper.getBoundingClientRect(),K={x:N.x-D.left,y:N.y+N.height-D.top+this.toolbarVerticalMargin};N.width&&(K.x+=Math.floor(N.width/2));var q=K.x-this.width/2,U=K.x+this.width/2;this.nodes.wrapper.classList.toggle(this.CSS.inlineToolbarLeftOriented,q<this.Editor.UI.contentRect.left),this.nodes.wrapper.classList.toggle(this.CSS.inlineToolbarRightOriented,U>this.Editor.UI.contentRect.right),this.nodes.wrapper.style.left=Math.floor(K.x)+"px",this.nodes.wrapper.style.top=Math.floor(K.y)+"px"}},{key:"close",value:function(){var N=this;this.opened&&(this.Editor.ReadOnly.isEnabled||(this.nodes.wrapper.classList.remove(this.CSS.inlineToolbarShowed),Array.from(this.toolsInstances.entries()).forEach(function(D){var K=(0,h.default)(D,2),q=K[0],U=K[1],G=N.getToolShortcut(q);G&&T.default.remove(N.Editor.UI.nodes.redactor,G),_.isFunction(U.clear)&&U.clear()}),this.opened=!1,this.flipper.deactivate(),this.Editor.ConversionToolbar.close()))}},{key:"open",value:function(){var N=!(arguments.length>0&&arguments[0]!==void 0)||arguments[0];if(!this.opened){this.addToolsFiltered(),this.nodes.wrapper.classList.add(this.CSS.inlineToolbarShowed),this.buttonsList=this.nodes.buttons.querySelectorAll(".".concat(this.CSS.inlineToolButton)),this.opened=!0,N&&this.Editor.ConversionToolbar.hasTools()?this.setConversionTogglerContent():this.nodes.conversionToggler.hidden=!0;var D=Array.from(this.buttonsList);D.unshift(this.nodes.conversionToggler),D=D.filter(function(K){return!K.hidden}),this.flipper.activate(D)}}},{key:"containsNode",value:function(N){return this.nodes.wrapper.contains(N)}},{key:"destroy",value:function(){this.flipper&&(this.flipper.deactivate(),this.flipper=null),this.removeAllNodes(),this.tooltip.destroy()}},{key:"make",value:function(){var N=this;this.nodes.wrapper=k.default.make("div",[this.CSS.inlineToolbar].concat((0,u.default)(this.isRtl?[this.Editor.UI.CSS.editorRtlFix]:[]))),this.nodes.togglerAndButtonsWrapper=k.default.make("div",this.CSS.togglerAndButtonsWrapper),this.nodes.buttons=k.default.make("div",this.CSS.buttonsWrapper),this.nodes.actions=k.default.make("div",this.CSS.actionsWrapper),this.listeners.on(this.nodes.wrapper,"mousedown",function(D){D.target.closest(".".concat(N.CSS.actionsWrapper))||D.preventDefault()}),k.default.append(this.nodes.wrapper,[this.nodes.togglerAndButtonsWrapper,this.nodes.actions]),k.default.append(this.Editor.UI.nodes.wrapper,this.nodes.wrapper),this.addConversionToggler(),k.default.append(this.nodes.togglerAndButtonsWrapper,this.nodes.buttons),this.prepareConversionToolbar(),this.recalculateWidth(),this.enableFlipper()}},{key:"allowedToShow",value:function(){var N=c.default.get(),D=c.default.text;if(!N||!N.anchorNode||N.isCollapsed||D.length<1)return!1;var K=k.default.isElement(N.anchorNode)?N.anchorNode:N.anchorNode.parentElement;if(N&&["IMG","INPUT"].includes(K.tagName)||K.closest('[contenteditable="true"]')===null)return!1;var q=this.Editor.BlockManager.getBlock(N.anchorNode);return!!q&&q.tool.inlineTools.size!==0}},{key:"recalculateWidth",value:function(){this.width=this.nodes.wrapper.offsetWidth}},{key:"addConversionToggler",value:function(){var N=this;this.nodes.conversionToggler=k.default.make("div",this.CSS.conversionToggler),this.nodes.conversionTogglerContent=k.default.make("div",this.CSS.conversionTogglerContent);var D=k.default.make("div",this.CSS.conversionTogglerArrow,{innerHTML:A.IconChevronDown});this.nodes.conversionToggler.appendChild(this.nodes.conversionTogglerContent),this.nodes.conversionToggler.appendChild(D),this.nodes.togglerAndButtonsWrapper.appendChild(this.nodes.conversionToggler),this.listeners.on(this.nodes.conversionToggler,"click",function(){N.Editor.ConversionToolbar.toggle(function(K){!K&&N.opened?N.flipper.activate():N.opened&&N.flipper.deactivate()})}),_.isMobileScreen()===!1&&this.tooltip.onHover(this.nodes.conversionToggler,b.default.ui(E.I18nInternalNS.ui.inlineToolbar.converter,"Convert to"),{placement:"top",hidingDelay:100})}},{key:"setConversionTogglerContent",value:(I=(0,d.default)(l.default.mark(function N(){var D,K,q,U,G,Q;return l.default.wrap(function(X){for(;;)switch(X.prev=X.next){case 0:return D=this.Editor.BlockManager,K=D.currentBlock,q=K.name,U=K.tool.conversionConfig,G=U&&U.export,this.nodes.conversionToggler.hidden=!G,this.nodes.conversionToggler.classList.toggle(this.CSS.conversionTogglerHidden,!G),X.next=9,K.getActiveToolboxEntry();case 9:if(X.t0=X.sent,X.t0){X.next=12;break}X.t0={};case 12:Q=X.t0,this.nodes.conversionTogglerContent.innerHTML=Q.icon||Q.title||_.capitalize(q);case 14:case"end":return X.stop()}},N,this)})),function(){return I.apply(this,arguments)})},{key:"prepareConversionToolbar",value:function(){var N=this.Editor.ConversionToolbar.make();k.default.append(this.nodes.wrapper,N)}},{key:"addToolsFiltered",value:function(){var N=this,D=c.default.get(),K=this.Editor.BlockManager.getBlock(D.anchorNode);this.nodes.buttons.innerHTML="",this.nodes.actions.innerHTML="",this.toolsInstances=new Map,Array.from(K.tool.inlineTools.values()).forEach(function(q){N.addTool(q)}),this.recalculateWidth()}},{key:"addTool",value:function(N){var D=this,K=N.create(),q=K.render();if(q){if(q.dataset.tool=N.name,this.nodes.buttons.appendChild(q),this.toolsInstances.set(N.name,K),_.isFunction(K.renderActions)){var U=K.renderActions();this.nodes.actions.appendChild(U)}this.listeners.on(q,"click",function(ie){D.toolClicked(K),ie.preventDefault()});var G=this.getToolShortcut(N.name);if(G)try{this.enableShortcuts(K,G)}catch(ie){}var Q=k.default.make("div"),X=b.default.t(E.I18nInternalNS.toolNames,N.title||_.capitalize(N.name));Q.appendChild(k.default.text(X)),G&&Q.appendChild(k.default.make("div",this.CSS.inlineToolbarShortcut,{textContent:_.beautifyShortcut(G)})),_.isMobileScreen()===!1&&this.tooltip.onHover(q,Q,{placement:"top",hidingDelay:100}),K.checkState(c.default.get())}else _.log("Render method must return an instance of Node","warn",N.name)}},{key:"getToolShortcut",value:function(N){var D=this.Editor.Tools,K=D.inlineTools.get(N),q=D.internal.inlineTools;return Array.from(q.keys()).includes(N)?this.inlineTools[N][S.CommonInternalSettings.Shortcut]:K.shortcut}},{key:"enableShortcuts",value:function(N,D){var K=this;T.default.add({name:D,handler:function(q){var U=K.Editor.BlockManager.currentBlock;U&&U.tool.enabledInlineTools&&(q.preventDefault(),K.toolClicked(N))},on:this.Editor.UI.nodes.redactor})}},{key:"toolClicked",value:function(N){var D=c.default.range;N.surround(D),this.checkToolsState(),N.renderActions!==void 0&&this.flipper.deactivate()}},{key:"checkToolsState",value:function(){this.toolsInstances.forEach(function(N){N.checkState(c.default.get())})}},{key:"inlineTools",get:function(){var N={};return Array.from(this.Editor.Tools.inlineTools.entries()).forEach(function(D){var K=(0,h.default)(D,2),q=K[0],U=K[1];N[q]=U.create()}),N}},{key:"enableFlipper",value:function(){this.flipper=new g.default({focusedItemClass:this.CSS.focusedButton,allowedKeys:[_.keyCodes.ENTER,_.keyCodes.TAB]})}}]),H}(w.default);s.default=M,M.displayName="InlineToolbar",r.exports=t.default})=="function"?i.apply(t,n):i)===void 0||(r.exports=o)},function(r,t,e){var i,n,o,a=e(7);n=[t,e(20),e(40),e(30),e(21),e(2),e(3),e(5),e(6),e(4),e(7),e(389),e(9),e(8),e(390),e(391),e(392),e(393),e(394),e(398),e(399),e(400),e(185)],(o=typeof(i=function(s,l,d,u,h,p,m,x,y,v,w,k,c,_,g,b,E,T,C,S,A,L,B){"use strict";var P=e(1);function M(H){if(typeof WeakMap!="function")return null;var N=new WeakMap,D=new WeakMap;return(M=function(K){return K?D:N})(H)}function O(H){var N=function(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(D){return!1}}();return function(){var D,K=(0,v.default)(H);if(N){var q=(0,v.default)(this).constructor;D=Reflect.construct(K,arguments,q)}else D=K.apply(this,arguments);return(0,y.default)(this,D)}}Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0,l=P(l),d=P(d),u=P(u),h=P(h),p=P(p),m=P(m),x=P(x),y=P(y),v=P(v),w=P(w),k=P(k),c=P(c),_=function(H,N){if(!N&&H&&H.__esModule)return H;if(H===null||a(H)!=="object"&&typeof H!="function")return{default:H};var D=M(N);if(D&&D.has(H))return D.get(H);var K={},q=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var U in H)if(U!=="default"&&Object.prototype.hasOwnProperty.call(H,U)){var G=q?Object.getOwnPropertyDescriptor(H,U):null;G&&(G.get||G.set)?Object.defineProperty(K,U,G):K[U]=H[U]}return K.default=H,D&&D.set(H,K),K}(_),g=P(g),b=P(b),E=P(E),T=P(T),C=P(C),S=P(S),A=P(A),L=P(L),B=P(B);var I=function(H,N,D,K){var q,U=arguments.length,G=U<3?N:K===null?K=Object.getOwnPropertyDescriptor(N,D):K;if((typeof Reflect=="undefined"?"undefined":(0,w.default)(Reflect))==="object"&&typeof Reflect.decorate=="function")G=Reflect.decorate(H,N,D,K);else for(var Q=H.length-1;Q>=0;Q--)(q=H[Q])&&(G=(U<3?q(G):U>3?q(N,D,G):q(N,D))||G);return U>3&&G&&Object.defineProperty(N,D,G),G},j=function(H){(0,x.default)(K,H);var N,D=O(K);function K(){var q;return(0,p.default)(this,K),(q=D.apply(this,arguments)).stubTool="stub",q.toolsAvailable=new B.default,q.toolsUnavailable=new B.default,q}return(0,m.default)(K,[{key:"available",get:function(){return this.toolsAvailable}},{key:"unavailable",get:function(){return this.toolsUnavailable}},{key:"inlineTools",get:function(){return this.available.inlineTools}},{key:"blockTools",get:function(){return this.available.blockTools}},{key:"blockTunes",get:function(){return this.available.blockTunes}},{key:"defaultTool",get:function(){return this.blockTools.get(this.config.defaultBlock)}},{key:"internal",get:function(){return this.available.internalTools}},{key:"prepare",value:(N=(0,h.default)(l.default.mark(function q(){var U,G,Q=this;return l.default.wrap(function(X){for(;;)switch(X.prev=X.next){case 0:if(this.validateTools(),this.config.tools=_.deepMerge({},this.internalTools,this.config.tools),Object.prototype.hasOwnProperty.call(this.config,"tools")&&Object.keys(this.config.tools).length!==0){X.next=4;break}throw Error("Can't start without tools");case 4:if(U=this.prepareConfig(),this.factory=new C.default(U,this.config,this.Editor.API),(G=this.getListOfPrepareFunctions(U)).length!==0){X.next=9;break}return X.abrupt("return",Promise.resolve());case 9:return X.next=11,_.sequence(G,function(ie){Q.toolPrepareMethodSuccess(ie)},function(ie){Q.toolPrepareMethodFallback(ie)});case 11:this.prepareBlockTools();case 12:case"end":return X.stop()}},q,this)})),function(){return N.apply(this,arguments)})},{key:"getAllInlineToolsSanitizeConfig",value:function(){var q={};return Array.from(this.inlineTools.values()).forEach(function(U){Object.assign(q,U.sanitizeConfig)}),q}},{key:"destroy",value:function(){Object.values(this.available).forEach(function(){var q=(0,h.default)(l.default.mark(function U(G){return l.default.wrap(function(Q){for(;;)switch(Q.prev=Q.next){case 0:if(!_.isFunction(G.reset)){Q.next=3;break}return Q.next=3,G.reset();case 3:case"end":return Q.stop()}},U)}));return function(U){return q.apply(this,arguments)}}())}},{key:"internalTools",get:function(){return{bold:{class:g.default,isInternal:!0},italic:{class:b.default,isInternal:!0},link:{class:E.default,isInternal:!0},paragraph:{class:k.default,inlineToolbar:!0,isInternal:!0},stub:{class:T.default,isInternal:!0},moveUp:{class:L.default,isInternal:!0},delete:{class:A.default,isInternal:!0},moveDown:{class:S.default,isInternal:!0}}}},{key:"toolPrepareMethodSuccess",value:function(q){var U=this.factory.get(q.toolName);if(U.isInline()){var G=["render","surround","checkState"].filter(function(Q){return!U.create()[Q]});if(G.length)return _.log("Incorrect Inline Tool: ".concat(U.name,". Some of required methods is not implemented %o"),"warn",G),void this.toolsUnavailable.set(U.name,U)}this.toolsAvailable.set(U.name,U)}},{key:"toolPrepareMethodFallback",value:function(q){this.toolsUnavailable.set(q.toolName,this.factory.get(q.toolName))}},{key:"getListOfPrepareFunctions",value:function(q){var U=[];return Object.entries(q).forEach(function(G){var Q=(0,u.default)(G,2),X=Q[0],ie=Q[1];U.push({function:_.isFunction(ie.class.prepare)?ie.class.prepare:function(){},data:{toolName:X,config:ie.config}})}),U}},{key:"prepareBlockTools",value:function(){var q=this;Array.from(this.blockTools.values()).forEach(function(U){q.assignInlineToolsToBlockTool(U),q.assignBlockTunesToBlockTool(U)})}},{key:"assignInlineToolsToBlockTool",value:function(q){var U=this;this.config.inlineToolbar!==!1&&(q.enabledInlineTools!==!0?Array.isArray(q.enabledInlineTools)&&(q.inlineTools=new B.default(q.enabledInlineTools.map(function(G){return[G,U.inlineTools.get(G)]}))):q.inlineTools=new B.default(Array.isArray(this.config.inlineToolbar)?this.config.inlineToolbar.map(function(G){return[G,U.inlineTools.get(G)]}):Array.from(this.inlineTools.entries())))}},{key:"assignBlockTunesToBlockTool",value:function(q){var U=this;if(q.enabledBlockTunes!==!1)if(Array.isArray(q.enabledBlockTunes)){var G=new B.default(q.enabledBlockTunes.map(function(X){return[X,U.blockTunes.get(X)]}));q.tunes=new B.default([].concat((0,d.default)(G),(0,d.default)(this.blockTunes.internalTools)))}else if(Array.isArray(this.config.tunes)){var Q=new B.default(this.config.tunes.map(function(X){return[X,U.blockTunes.get(X)]}));q.tunes=new B.default([].concat((0,d.default)(Q),(0,d.default)(this.blockTunes.internalTools)))}else q.tunes=this.blockTunes.internalTools}},{key:"validateTools",value:function(){for(var q in this.config.tools)if(Object.prototype.hasOwnProperty.call(this.config.tools,q)){if(q in this.internalTools)return;var U=this.config.tools[q];if(!_.isFunction(U)&&!_.isFunction(U.class))throw Error("Tool \xAB".concat(q,"\xBB must be a constructor function or an object with function in the \xABclass\xBB property"))}}},{key:"prepareConfig",value:function(){var q={};for(var U in this.config.tools)_.isObject(this.config.tools[U])?q[U]=this.config.tools[U]:q[U]={class:this.config.tools[U]};return q}}]),K}(c.default);s.default=j,j.displayName="Tools",I([_.cacheable],j.prototype,"getAllInlineToolsSanitizeConfig",null),r.exports=t.default})=="function"?i.apply(t,n):i)===void 0||(r.exports=o)},function(r,t,e){var i,n,o;n=[t,e(30),e(2),e(3),e(5),e(6),e(4),e(153)],(o=typeof(i=function(a,s,l,d,u,h,p,m){"use strict";var x=e(1);function y(w){var k=function(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(c){return!1}}();return function(){var c,_=(0,p.default)(w);if(k){var g=(0,p.default)(this).constructor;c=Reflect.construct(_,arguments,g)}else c=_.apply(this,arguments);return(0,h.default)(this,c)}}Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,s=x(s),l=x(l),d=x(d),u=x(u),h=x(h),p=x(p);var v=function(w){(0,u.default)(c,w);var k=y(c);function c(){return(0,l.default)(this,c),k.apply(this,arguments)}return(0,d.default)(c,[{key:"blockTools",get:function(){return new c(Array.from(this.entries()).filter(function(_){return(0,s.default)(_,2)[1].isBlock()}))}},{key:"inlineTools",get:function(){return new c(Array.from(this.entries()).filter(function(_){return(0,s.default)(_,2)[1].isInline()}))}},{key:"blockTunes",get:function(){return new c(Array.from(this.entries()).filter(function(_){return(0,s.default)(_,2)[1].isTune()}))}},{key:"internalTools",get:function(){return new c(Array.from(this.entries()).filter(function(_){return(0,s.default)(_,2)[1].isInternal}))}},{key:"externalTools",get:function(){return new c(Array.from(this.entries()).filter(function(_){return!(0,s.default)(_,2)[1].isInternal}))}}]),c}((0,(m=x(m)).default)(Map));a.default=v,v.displayName="ToolsCollection",r.exports=t.default})=="function"?i.apply(t,n):i)===void 0||(r.exports=o)},function(r,t,e){var i,n,o,a=e(7);n=[t,e(20),e(40),e(30),e(21),e(2),e(3),e(5),e(6),e(4),e(9),e(19),e(8),e(25),e(61),e(67)],(o=typeof(i=function(s,l,d,u,h,p,m,x,y,v,w,k,c,_,g,b){"use strict";var E=e(1);function T(A){if(typeof WeakMap!="function")return null;var L=new WeakMap,B=new WeakMap;return(T=function(P){return P?B:L})(A)}function C(A){var L=function(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(B){return!1}}();return function(){var B,P=(0,v.default)(A);if(L){var M=(0,v.default)(this).constructor;B=Reflect.construct(P,arguments,M)}else B=P.apply(this,arguments);return(0,y.default)(this,B)}}Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0,l=E(l),d=E(d),u=E(u),h=E(h),p=E(p),m=E(m),x=E(x),y=E(y),v=E(v),w=E(w),k=E(k),c=function(A,L){if(!L&&A&&A.__esModule)return A;if(A===null||a(A)!=="object"&&typeof A!="function")return{default:A};var B=T(L);if(B&&B.has(A))return B.get(A);var P={},M=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var O in A)if(O!=="default"&&Object.prototype.hasOwnProperty.call(A,O)){var I=M?Object.getOwnPropertyDescriptor(A,O):null;I&&(I.get||I.set)?Object.defineProperty(P,O,I):P[O]=A[O]}return P.default=A,B&&B.set(A,P),P}(c),_=E(_),g=E(g),b=E(b);var S=function(A){(0,x.default)(P,A);var L,B=C(P);function P(){var M;return(0,p.default)(this,P),(M=B.apply(this,arguments)).isMobile=!1,M.contentRectCache=void 0,M.resizeDebouncer=c.debounce(function(){M.windowResize()},200),M}return(0,m.default)(P,[{key:"events",get:function(){return{blockHovered:"block-hovered"}}},{key:"CSS",get:function(){return{editorWrapper:"codex-editor",editorWrapperNarrow:"codex-editor--narrow",editorZone:"codex-editor__redactor",editorZoneHidden:"codex-editor__redactor--hidden",editorLoader:"codex-editor__loader",editorEmpty:"codex-editor--empty",editorRtlFix:"codex-editor--rtl"}}},{key:"contentRect",get:function(){if(this.contentRectCache)return this.contentRectCache;var M=this.nodes.wrapper.querySelector(".".concat(g.default.CSS.content));return M?(this.contentRectCache=M.getBoundingClientRect(),this.contentRectCache):{width:650,left:0,right:0}}},{key:"addLoader",value:function(){this.nodes.loader=k.default.make("div",this.CSS.editorLoader),this.nodes.wrapper.prepend(this.nodes.loader),this.nodes.redactor.classList.add(this.CSS.editorZoneHidden)}},{key:"removeLoader",value:function(){this.nodes.loader.remove(),this.nodes.redactor.classList.remove(this.CSS.editorZoneHidden)}},{key:"prepare",value:(L=(0,h.default)(l.default.mark(function M(){return l.default.wrap(function(O){for(;;)switch(O.prev=O.next){case 0:this.checkIsMobile(),this.make(),this.addLoader(),this.loadStyles();case 4:case"end":return O.stop()}},M,this)})),function(){return L.apply(this,arguments)})},{key:"toggleReadOnly",value:function(M){M?this.disableModuleBindings():this.enableModuleBindings()}},{key:"checkEmptiness",value:function(){var M=this.Editor.BlockManager;this.nodes.wrapper.classList.toggle(this.CSS.editorEmpty,M.isEditorEmpty)}},{key:"someToolbarOpened",get:function(){var M=this.Editor,O=M.Toolbar,I=M.BlockSettings,j=M.InlineToolbar,H=M.ConversionToolbar;return I.opened||j.opened||H.opened||O.toolbox.opened}},{key:"someFlipperButtonFocused",get:function(){return!!this.Editor.Toolbar.toolbox.hasFocus()||Object.entries(this.Editor).filter(function(M){var O=(0,u.default)(M,2);return O[0],O[1].flipper instanceof b.default}).some(function(M){var O=(0,u.default)(M,2);return O[0],O[1].flipper.hasFocus()})}},{key:"destroy",value:function(){this.nodes.holder.innerHTML=""}},{key:"closeAllToolbars",value:function(){var M=this.Editor,O=M.Toolbar,I=M.BlockSettings,j=M.InlineToolbar,H=M.ConversionToolbar;I.close(),j.close(),H.close(),O.toolbox.close()}},{key:"checkIsMobile",value:function(){this.isMobile=window.innerWidth<c.mobileScreenBreakpoint}},{key:"make",value:function(){this.nodes.holder=k.default.getHolder(this.config.holder),this.nodes.wrapper=k.default.make("div",[this.CSS.editorWrapper].concat((0,d.default)(this.isRtl?[this.CSS.editorRtlFix]:[]))),this.nodes.redactor=k.default.make("div",this.CSS.editorZone),this.nodes.holder.offsetWidth<this.contentRect.width&&this.nodes.wrapper.classList.add(this.CSS.editorWrapperNarrow),this.nodes.redactor.style.paddingBottom=this.config.minHeight+"px",this.nodes.wrapper.appendChild(this.nodes.redactor),this.nodes.holder.appendChild(this.nodes.wrapper)}},{key:"loadStyles",value:function(){var M=e(401);if(!k.default.get("editor-js-styles")){var O=k.default.make("style",null,{id:"editor-js-styles",textContent:M.toString()});k.default.prepend(document.head,O)}}},{key:"enableModuleBindings",value:function(){var M=this;this.readOnlyMutableListeners.on(this.nodes.redactor,"click",function(O){M.redactorClicked(O)},!1),this.readOnlyMutableListeners.on(this.nodes.redactor,"mousedown",function(O){M.documentTouched(O)},!0),this.readOnlyMutableListeners.on(this.nodes.redactor,"touchstart",function(O){M.documentTouched(O)},!0),this.readOnlyMutableListeners.on(document,"keydown",function(O){M.documentKeydown(O)},!0),this.readOnlyMutableListeners.on(document,"mousedown",function(O){M.documentClicked(O)},!0),this.readOnlyMutableListeners.on(document,"selectionchange",function(){M.selectionChanged()},!0),this.readOnlyMutableListeners.on(window,"resize",function(){M.resizeDebouncer()},{passive:!0}),this.watchBlockHoveredEvents()}},{key:"watchBlockHoveredEvents",value:function(){var M,O=this;this.readOnlyMutableListeners.on(this.nodes.redactor,"mousemove",c.throttle(function(I){var j=I.target.closest(".ce-block");O.Editor.BlockSelection.anyBlockSelected||j&&M!==j&&(M=j,O.eventsDispatcher.emit(O.events.blockHovered,{block:O.Editor.BlockManager.getBlockByChildNode(j)}))},20),{passive:!0})}},{key:"disableModuleBindings",value:function(){this.readOnlyMutableListeners.clearAll()}},{key:"windowResize",value:function(){this.contentRectCache=null,this.checkIsMobile()}},{key:"documentKeydown",value:function(M){switch(M.keyCode){case c.keyCodes.ENTER:this.enterPressed(M);break;case c.keyCodes.BACKSPACE:this.backspacePressed(M);break;case c.keyCodes.ESC:this.escapePressed(M);break;default:this.defaultBehaviour(M)}}},{key:"defaultBehaviour",value:function(M){var O=this.Editor.BlockManager.currentBlock,I=M.target.closest(".".concat(this.CSS.editorWrapper)),j=M.altKey||M.ctrlKey||M.metaKey||M.shiftKey;O===void 0||I!==null?I||O&&j||(this.Editor.BlockManager.dropPointer(),this.Editor.Toolbar.close()):this.Editor.BlockEvents.keydown(M)}},{key:"backspacePressed",value:function(M){var O=this.Editor,I=O.BlockManager,j=O.BlockSelection,H=O.Caret;if(j.anyBlockSelected&&!_.default.isSelectionExists){var N=I.removeSelectedBlocks();H.setToBlock(I.insertDefaultBlockAtIndex(N,!0),H.positions.START),j.clearSelection(M),M.preventDefault(),M.stopPropagation(),M.stopImmediatePropagation()}}},{key:"escapePressed",value:function(M){this.Editor.BlockSelection.clearSelection(M),this.Editor.Toolbar.toolbox.opened?(this.Editor.Toolbar.toolbox.close(),this.Editor.Caret.setToBlock(this.Editor.BlockManager.currentBlock)):this.Editor.BlockSettings.opened?this.Editor.BlockSettings.close():this.Editor.ConversionToolbar.opened?this.Editor.ConversionToolbar.close():this.Editor.InlineToolbar.opened?this.Editor.InlineToolbar.close():this.Editor.Toolbar.close()}},{key:"enterPressed",value:function(M){var O=this.Editor,I=O.BlockManager,j=O.BlockSelection,H=I.currentBlockIndex>=0;if(j.anyBlockSelected&&!_.default.isSelectionExists)return j.clearSelection(M),M.preventDefault(),M.stopImmediatePropagation(),void M.stopPropagation();if(!this.someToolbarOpened&&H&&M.target.tagName==="BODY"){var N=this.Editor.BlockManager.insert();this.Editor.Caret.setToBlock(N),this.Editor.BlockManager.highlightCurrentNode(),this.Editor.Toolbar.moveAndOpen(N)}this.Editor.BlockSelection.clearSelection(M)}},{key:"documentClicked",value:function(M){if(M.isTrusted){var O=M.target;this.nodes.holder.contains(O)||_.default.isAtEditor||(this.Editor.BlockManager.dropPointer(),this.Editor.Toolbar.close());var I=this.Editor.BlockSettings.nodes.wrapper.contains(O),j=this.Editor.Toolbar.nodes.settingsToggler.contains(O),H=I||j;if(this.Editor.BlockSettings.opened&&!H){this.Editor.BlockSettings.close();var N=this.Editor.BlockManager.getBlockByChildNode(O);this.Editor.Toolbar.moveAndOpen(N)}this.Editor.BlockSelection.clearSelection(M)}}},{key:"documentTouched",value:function(M){var O=M.target;if(O===this.nodes.redactor){var I=M instanceof MouseEvent?M.clientX:M.touches[0].clientX,j=M instanceof MouseEvent?M.clientY:M.touches[0].clientY;O=document.elementFromPoint(I,j)}try{this.Editor.BlockManager.setCurrentBlockByChildNode(O),this.Editor.BlockManager.highlightCurrentNode()}catch(H){this.Editor.RectangleSelection.isRectActivated()||this.Editor.Caret.setToTheLastBlock()}this.Editor.Toolbar.moveAndOpen()}},{key:"redactorClicked",value:function(M){var O=this.Editor.BlockSelection;if(_.default.isCollapsed){var I=function(){M.stopImmediatePropagation(),M.stopPropagation()},j=M.target,H=M.metaKey||M.ctrlKey;if(k.default.isAnchor(j)&&H){I();var N=j.getAttribute("href"),D=c.getValidUrl(N);c.openTab(D)}else{var K=this.Editor.BlockManager.getBlockByIndex(-1),q=k.default.offset(K.holder).bottom,U=M.pageY;if(M.target instanceof Element&&M.target.isEqualNode(this.nodes.redactor)&&!O.anyBlockSelected&&q<U){I();var G=this.Editor,Q=G.BlockManager,X=G.Caret,ie=G.Toolbar;Q.lastBlock.tool.isDefault&&Q.lastBlock.isEmpty||Q.insertAtEnd(),X.setToTheLastBlock(),ie.moveAndOpen(Q.lastBlock)}}}}},{key:"selectionChanged",value:function(){var M=this.Editor,O=M.CrossBlockSelection,I=M.BlockSelection,j=_.default.anchorElement;if(O.isCrossBlockSelectionStarted&&I.anyBlockSelected&&_.default.get().removeAllRanges(),j){var H=j.closest(".".concat(g.default.CSS.content))===null;if(H&&(this.Editor.InlineToolbar.containsNode(j)||this.Editor.InlineToolbar.close(),j.dataset.inlineToolbar!=="true"))return;this.Editor.BlockManager.currentBlock||this.Editor.BlockManager.setCurrentBlockByChildNode(j);var N=H!==!0;this.Editor.InlineToolbar.tryToShow(!0,N)}else _.default.range||this.Editor.InlineToolbar.close()}}]),P}(w.default);s.default=S,S.displayName="UI",r.exports=t.default})=="function"?i.apply(t,n):i)===void 0||(r.exports=o)},function(r,t,e){e(188),r.exports=e(361)},function(r,t,e){e(189)},function(r,t,e){"use strict";e(190),e(333),e(335),e(338),e(340),e(342),e(344),e(346),e(348),e(350),e(352),e(354),e(356),e(360)},function(r,t,e){e(191),e(194),e(195),e(196),e(197),e(198),e(199),e(200),e(201),e(202),e(203),e(204),e(205),e(206),e(207),e(208),e(209),e(210),e(211),e(212),e(213),e(214),e(215),e(216),e(217),e(218),e(219),e(220),e(221),e(222),e(223),e(224),e(225),e(226),e(227),e(228),e(229),e(230),e(231),e(232),e(233),e(234),e(235),e(237),e(238),e(239),e(240),e(241),e(242),e(243),e(244),e(245),e(246),e(247),e(248),e(249),e(250),e(251),e(252),e(253),e(254),e(255),e(256),e(257),e(258),e(259),e(260),e(261),e(262),e(263),e(264),e(265),e(266),e(267),e(268),e(269),e(270),e(272),e(273),e(275),e(276),e(277),e(278),e(279),e(280),e(281),e(283),e(284),e(285),e(286),e(287),e(288),e(289),e(290),e(291),e(292),e(293),e(294),e(295),e(106),e(296),e(137),e(297),e(138),e(298),e(299),e(300),e(301),e(139),e(304),e(305),e(306),e(307),e(308),e(309),e(310),e(311),e(312),e(313),e(314),e(315),e(316),e(317),e(318),e(319),e(320),e(321),e(322),e(323),e(324),e(325),e(326),e(327),e(328),e(329),e(330),e(331),e(332),r.exports=e(16)},function(r,t,e){"use strict";var i=e(10),n=e(26),o=e(17),a=e(0),s=e(23),l=e(43).KEY,d=e(11),u=e(70),h=e(55),p=e(45),m=e(14),x=e(87),y=e(118),v=e(193),w=e(73),k=e(12),c=e(13),_=e(22),g=e(28),b=e(42),E=e(44),T=e(49),C=e(121),S=e(34),A=e(72),L=e(18),B=e(47),P=S.f,M=L.f,O=C.f,I=i.Symbol,j=i.JSON,H=j&&j.stringify,N=m("_hidden"),D=m("toPrimitive"),K={}.propertyIsEnumerable,q=u("symbol-registry"),U=u("symbols"),G=u("op-symbols"),Q=Object.prototype,X=typeof I=="function"&&!!A.f,ie=i.QObject,ue=!ie||!ie.prototype||!ie.prototype.findChild,fe=o&&d(function(){return T(M({},"a",{get:function(){return M(this,"a",{value:7}).a}})).a!=7})?function(de,ye,Ie){var Fe=P(Q,ye);Fe&&delete Q[ye],M(de,ye,Ie),Fe&&de!==Q&&M(Q,ye,Fe)}:M,be=function(de){var ye=U[de]=T(I.prototype);return ye._k=de,ye},Se=X&&typeof I.iterator=="symbol"?function(de){return typeof de=="symbol"}:function(de){return de instanceof I},le=function(de,ye,Ie){return de===Q&&le(G,ye,Ie),k(de),ye=b(ye,!0),k(Ie),n(U,ye)?(Ie.enumerable?(n(de,N)&&de[N][ye]&&(de[N][ye]=!1),Ie=T(Ie,{enumerable:E(0,!1)})):(n(de,N)||M(de,N,E(1,{})),de[N][ye]=!0),fe(de,ye,Ie)):M(de,ye,Ie)},ke=function(de,ye){k(de);for(var Ie,Fe=v(ye=g(ye)),it=0,ht=Fe.length;ht>it;)le(de,Ie=Fe[it++],ye[Ie]);return de},Re=function(de){var ye=K.call(this,de=b(de,!0));return!(this===Q&&n(U,de)&&!n(G,de))&&(!(ye||!n(this,de)||!n(U,de)||n(this,N)&&this[N][de])||ye)},Me=function(de,ye){if(de=g(de),ye=b(ye,!0),de!==Q||!n(U,ye)||n(G,ye)){var Ie=P(de,ye);return!Ie||!n(U,ye)||n(de,N)&&de[N][ye]||(Ie.enumerable=!0),Ie}},Ne=function(de){for(var ye,Ie=O(g(de)),Fe=[],it=0;Ie.length>it;)n(U,ye=Ie[it++])||ye==N||ye==l||Fe.push(ye);return Fe},et=function(de){for(var ye,Ie=de===Q,Fe=O(Ie?G:g(de)),it=[],ht=0;Fe.length>ht;)!n(U,ye=Fe[ht++])||Ie&&!n(Q,ye)||it.push(U[ye]);return it};X||(s((I=function(){if(this instanceof I)throw TypeError("Symbol is not a constructor!");var de=p(arguments.length>0?arguments[0]:void 0),ye=function(Ie){this===Q&&ye.call(G,Ie),n(this,N)&&n(this[N],de)&&(this[N][de]=!1),fe(this,de,E(1,Ie))};return o&&ue&&fe(Q,de,{configurable:!0,set:ye}),be(de)}).prototype,"toString",function(){return this._k}),S.f=Me,L.f=le,e(50).f=C.f=Ne,e(63).f=Re,A.f=et,o&&!e(46)&&s(Q,"propertyIsEnumerable",Re,!0),x.f=function(de){return be(m(de))}),a(a.G+a.W+a.F*!X,{Symbol:I});for(var Ke="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),Je=0;Ke.length>Je;)m(Ke[Je++]);for(var Ue=B(m.store),nt=0;Ue.length>nt;)y(Ue[nt++]);a(a.S+a.F*!X,"Symbol",{for:function(de){return n(q,de+="")?q[de]:q[de]=I(de)},keyFor:function(de){if(!Se(de))throw TypeError(de+" is not a symbol!");for(var ye in q)if(q[ye]===de)return ye},useSetter:function(){ue=!0},useSimple:function(){ue=!1}}),a(a.S+a.F*!X,"Object",{create:function(de,ye){return ye===void 0?T(de):ke(T(de),ye)},defineProperty:le,defineProperties:ke,getOwnPropertyDescriptor:Me,getOwnPropertyNames:Ne,getOwnPropertySymbols:et});var Ze=d(function(){A.f(1)});a(a.S+a.F*Ze,"Object",{getOwnPropertySymbols:function(de){return A.f(_(de))}}),j&&a(a.S+a.F*(!X||d(function(){var de=I();return H([de])!="[null]"||H({a:de})!="{}"||H(Object(de))!="{}"})),"JSON",{stringify:function(de){for(var ye,Ie,Fe=[de],it=1;arguments.length>it;)Fe.push(arguments[it++]);if(Ie=ye=Fe[1],(c(ye)||de!==void 0)&&!Se(de))return w(ye)||(ye=function(ht,_t){if(typeof Ie=="function"&&(_t=Ie.call(this,ht,_t)),!Se(_t))return _t}),Fe[1]=ye,H.apply(j,Fe)}}),I.prototype[D]||e(27)(I.prototype,D,I.prototype.valueOf),h(I,"Symbol"),h(Math,"Math",!0),h(i.JSON,"JSON",!0)},function(r,t,e){r.exports=e(70)("native-function-to-string",Function.toString)},function(r,t,e){var i=e(47),n=e(72),o=e(63);r.exports=function(a){var s=i(a),l=n.f;if(l)for(var d,u=l(a),h=o.f,p=0;u.length>p;)h.call(a,d=u[p++])&&s.push(d);return s}},function(r,t,e){var i=e(0);i(i.S,"Object",{create:e(49)})},function(r,t,e){var i=e(0);i(i.S+i.F*!e(17),"Object",{defineProperty:e(18).f})},function(r,t,e){var i=e(0);i(i.S+i.F*!e(17),"Object",{defineProperties:e(120)})},function(r,t,e){var i=e(28),n=e(34).f;e(35)("getOwnPropertyDescriptor",function(){return function(o,a){return n(i(o),a)}})},function(r,t,e){var i=e(22),n=e(51);e(35)("getPrototypeOf",function(){return function(o){return n(i(o))}})},function(r,t,e){var i=e(22),n=e(47);e(35)("keys",function(){return function(o){return n(i(o))}})},function(r,t,e){e(35)("getOwnPropertyNames",function(){return e(121).f})},function(r,t,e){var i=e(13),n=e(43).onFreeze;e(35)("freeze",function(o){return function(a){return o&&i(a)?o(n(a)):a}})},function(r,t,e){var i=e(13),n=e(43).onFreeze;e(35)("seal",function(o){return function(a){return o&&i(a)?o(n(a)):a}})},function(r,t,e){var i=e(13),n=e(43).onFreeze;e(35)("preventExtensions",function(o){return function(a){return o&&i(a)?o(n(a)):a}})},function(r,t,e){var i=e(13);e(35)("isFrozen",function(n){return function(o){return!i(o)||!!n&&n(o)}})},function(r,t,e){var i=e(13);e(35)("isSealed",function(n){return function(o){return!i(o)||!!n&&n(o)}})},function(r,t,e){var i=e(13);e(35)("isExtensible",function(n){return function(o){return!!i(o)&&(!n||n(o))}})},function(r,t,e){var i=e(0);i(i.S+i.F,"Object",{assign:e(122)})},function(r,t,e){var i=e(0);i(i.S,"Object",{is:e(123)})},function(r,t,e){var i=e(0);i(i.S,"Object",{setPrototypeOf:e(91).set})},function(r,t,e){"use strict";var i=e(64),n={};n[e(14)("toStringTag")]="z",n+""!="[object z]"&&e(23)(Object.prototype,"toString",function(){return"[object "+i(this)+"]"},!0)},function(r,t,e){var i=e(0);i(i.P,"Function",{bind:e(124)})},function(r,t,e){var i=e(18).f,n=Function.prototype,o=/^\s*function ([^ (]*)/;"name"in n||e(17)&&i(n,"name",{configurable:!0,get:function(){try{return(""+this).match(o)[1]}catch(a){return""}}})},function(r,t,e){"use strict";var i=e(13),n=e(51),o=e(14)("hasInstance"),a=Function.prototype;o in a||e(18).f(a,o,{value:function(s){if(typeof this!="function"||!i(s))return!1;if(!i(this.prototype))return s instanceof this;for(;s=n(s);)if(this.prototype===s)return!0;return!1}})},function(r,t,e){var i=e(0),n=e(126);i(i.G+i.F*(parseInt!=n),{parseInt:n})},function(r,t,e){var i=e(0),n=e(127);i(i.G+i.F*(parseFloat!=n),{parseFloat:n})},function(r,t,e){"use strict";var i=e(10),n=e(26),o=e(37),a=e(93),s=e(42),l=e(11),d=e(50).f,u=e(34).f,h=e(18).f,p=e(56).trim,m=i.Number,x=m,y=m.prototype,v=o(e(49)(y))=="Number",w="trim"in String.prototype,k=function(b){var E=s(b,!1);if(typeof E=="string"&&E.length>2){var T,C,S,A=(E=w?E.trim():p(E,3)).charCodeAt(0);if(A===43||A===45){if((T=E.charCodeAt(2))===88||T===120)return NaN}else if(A===48){switch(E.charCodeAt(1)){case 66:case 98:C=2,S=49;break;case 79:case 111:C=8,S=55;break;default:return+E}for(var L,B=E.slice(2),P=0,M=B.length;P<M;P++)if((L=B.charCodeAt(P))<48||L>S)return NaN;return parseInt(B,C)}}return+E};if(!m(" 0o1")||!m("0b1")||m("+0x1")){m=function(b){var E=arguments.length<1?0:b,T=this;return T instanceof m&&(v?l(function(){y.valueOf.call(T)}):o(T)!="Number")?a(new x(k(E)),T,m):k(E)};for(var c,_=e(17)?d(x):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),g=0;_.length>g;g++)n(x,c=_[g])&&!n(m,c)&&h(m,c,u(x,c));m.prototype=y,y.constructor=m,e(23)(i,"Number",m)}},function(r,t,e){"use strict";var i=e(0),n=e(33),o=e(128),a=e(94),s=1 .toFixed,l=Math.floor,d=[0,0,0,0,0,0],u="Number.toFixed: incorrect invocation!",h=function(y,v){for(var w=-1,k=v;++w<6;)k+=y*d[w],d[w]=k%1e7,k=l(k/1e7)},p=function(y){for(var v=6,w=0;--v>=0;)w+=d[v],d[v]=l(w/y),w=w%y*1e7},m=function(){for(var y=6,v="";--y>=0;)if(v!==""||y===0||d[y]!==0){var w=String(d[y]);v=v===""?w:v+a.call("0",7-w.length)+w}return v},x=function(y,v,w){return v===0?w:v%2==1?x(y,v-1,w*y):x(y*y,v/2,w)};i(i.P+i.F*(!!s&&(8e-5 .toFixed(3)!=="0.000"||.9 .toFixed(0)!=="1"||1.255 .toFixed(2)!=="1.25"||1000000000000000100 .toFixed(0)!=="1000000000000000128")||!e(11)(function(){s.call({})})),"Number",{toFixed:function(y){var v,w,k,c,_=o(this,u),g=n(y),b="",E="0";if(g<0||g>20)throw RangeError(u);if(_!=_)return"NaN";if(_<=-1e21||_>=1e21)return String(_);if(_<0&&(b="-",_=-_),_>1e-21)if(w=(v=function(T){for(var C=0,S=T;S>=4096;)C+=12,S/=4096;for(;S>=2;)C+=1,S/=2;return C}(_*x(2,69,1))-69)<0?_*x(2,-v,1):_/x(2,v,1),w*=4503599627370496,(v=52-v)>0){for(h(0,w),k=g;k>=7;)h(1e7,0),k-=7;for(h(x(10,k,1),0),k=v-1;k>=23;)p(1<<23),k-=23;p(1<<k),h(1,1),p(2),E=m()}else h(0,w),h(1<<-v,0),E=m()+a.call("0",g);return E=g>0?b+((c=E.length)<=g?"0."+a.call("0",g-c)+E:E.slice(0,c-g)+"."+E.slice(c-g)):b+E}})},function(r,t,e){"use strict";var i=e(0),n=e(11),o=e(128),a=1 .toPrecision;i(i.P+i.F*(n(function(){return a.call(1,void 0)!=="1"})||!n(function(){a.call({})})),"Number",{toPrecision:function(s){var l=o(this,"Number#toPrecision: incorrect invocation!");return s===void 0?a.call(l):a.call(l,s)}})},function(r,t,e){var i=e(0);i(i.S,"Number",{EPSILON:Math.pow(2,-52)})},function(r,t,e){var i=e(0),n=e(10).isFinite;i(i.S,"Number",{isFinite:function(o){return typeof o=="number"&&n(o)}})},function(r,t,e){var i=e(0);i(i.S,"Number",{isInteger:e(129)})},function(r,t,e){var i=e(0);i(i.S,"Number",{isNaN:function(n){return n!=n}})},function(r,t,e){var i=e(0),n=e(129),o=Math.abs;i(i.S,"Number",{isSafeInteger:function(a){return n(a)&&o(a)<=9007199254740991}})},function(r,t,e){var i=e(0);i(i.S,"Number",{MAX_SAFE_INTEGER:9007199254740991})},function(r,t,e){var i=e(0);i(i.S,"Number",{MIN_SAFE_INTEGER:-9007199254740991})},function(r,t,e){var i=e(0),n=e(127);i(i.S+i.F*(Number.parseFloat!=n),"Number",{parseFloat:n})},function(r,t,e){var i=e(0),n=e(126);i(i.S+i.F*(Number.parseInt!=n),"Number",{parseInt:n})},function(r,t,e){var i=e(0),n=e(130),o=Math.sqrt,a=Math.acosh;i(i.S+i.F*!(a&&Math.floor(a(Number.MAX_VALUE))==710&&a(1/0)==1/0),"Math",{acosh:function(s){return(s=+s)<1?NaN:s>9490626562425156e-8?Math.log(s)+Math.LN2:n(s-1+o(s-1)*o(s+1))}})},function(r,t,e){var i=e(0),n=Math.asinh;i(i.S+i.F*!(n&&1/n(0)>0),"Math",{asinh:function o(a){return isFinite(a=+a)&&a!=0?a<0?-o(-a):Math.log(a+Math.sqrt(a*a+1)):a}})},function(r,t,e){var i=e(0),n=Math.atanh;i(i.S+i.F*!(n&&1/n(-0)<0),"Math",{atanh:function(o){return(o=+o)==0?o:Math.log((1+o)/(1-o))/2}})},function(r,t,e){var i=e(0),n=e(95);i(i.S,"Math",{cbrt:function(o){return n(o=+o)*Math.pow(Math.abs(o),1/3)}})},function(r,t,e){var i=e(0);i(i.S,"Math",{clz32:function(n){return(n>>>=0)?31-Math.floor(Math.log(n+.5)*Math.LOG2E):32}})},function(r,t,e){var i=e(0),n=Math.exp;i(i.S,"Math",{cosh:function(o){return(n(o=+o)+n(-o))/2}})},function(r,t,e){var i=e(0),n=e(96);i(i.S+i.F*(n!=Math.expm1),"Math",{expm1:n})},function(r,t,e){var i=e(0);i(i.S,"Math",{fround:e(236)})},function(r,t,e){var i=e(95),n=Math.pow,o=n(2,-52),a=n(2,-23),s=n(2,127)*(2-a),l=n(2,-126);r.exports=Math.fround||function(d){var u,h,p=Math.abs(d),m=i(d);return p<l?m*(p/l/a+1/o-1/o)*l*a:(h=(u=(1+a/o)*p)-(u-p))>s||h!=h?m*(1/0):m*h}},function(r,t,e){var i=e(0),n=Math.abs;i(i.S,"Math",{hypot:function(o,a){for(var s,l,d=0,u=0,h=arguments.length,p=0;u<h;)p<(s=n(arguments[u++]))?(d=d*(l=p/s)*l+1,p=s):d+=s>0?(l=s/p)*l:s;return p===1/0?1/0:p*Math.sqrt(d)}})},function(r,t,e){var i=e(0),n=Math.imul;i(i.S+i.F*e(11)(function(){return n(4294967295,5)!=-5||n.length!=2}),"Math",{imul:function(o,a){var s=+o,l=+a,d=65535&s,u=65535&l;return 0|d*u+((65535&s>>>16)*u+d*(65535&l>>>16)<<16>>>0)}})},function(r,t,e){var i=e(0);i(i.S,"Math",{log10:function(n){return Math.log(n)*Math.LOG10E}})},function(r,t,e){var i=e(0);i(i.S,"Math",{log1p:e(130)})},function(r,t,e){var i=e(0);i(i.S,"Math",{log2:function(n){return Math.log(n)/Math.LN2}})},function(r,t,e){var i=e(0);i(i.S,"Math",{sign:e(95)})},function(r,t,e){var i=e(0),n=e(96),o=Math.exp;i(i.S+i.F*e(11)(function(){return!Math.sinh(-2e-17)!=-2e-17}),"Math",{sinh:function(a){return Math.abs(a=+a)<1?(n(a)-n(-a))/2:(o(a-1)-o(-a-1))*(Math.E/2)}})},function(r,t,e){var i=e(0),n=e(96),o=Math.exp;i(i.S,"Math",{tanh:function(a){var s=n(a=+a),l=n(-a);return s==1/0?1:l==1/0?-1:(s-l)/(o(a)+o(-a))}})},function(r,t,e){var i=e(0);i(i.S,"Math",{trunc:function(n){return(n>0?Math.floor:Math.ceil)(n)}})},function(r,t,e){var i=e(0),n=e(48),o=String.fromCharCode,a=String.fromCodePoint;i(i.S+i.F*(!!a&&a.length!=1),"String",{fromCodePoint:function(s){for(var l,d=[],u=arguments.length,h=0;u>h;){if(l=+arguments[h++],n(l,1114111)!==l)throw RangeError(l+" is not a valid code point");d.push(l<65536?o(l):o(55296+((l-=65536)>>10),l%1024+56320))}return d.join("")}})},function(r,t,e){var i=e(0),n=e(28),o=e(15);i(i.S,"String",{raw:function(a){for(var s=n(a.raw),l=o(s.length),d=arguments.length,u=[],h=0;l>h;)u.push(String(s[h++])),h<d&&u.push(String(arguments[h]));return u.join("")}})},function(r,t,e){"use strict";e(56)("trim",function(i){return function(){return i(this,3)}})},function(r,t,e){"use strict";var i=e(97)(!0);e(98)(String,"String",function(n){this._t=String(n),this._i=0},function(){var n,o=this._t,a=this._i;return a>=o.length?{value:void 0,done:!0}:(n=i(o,a),this._i+=n.length,{value:n,done:!1})})},function(r,t,e){"use strict";var i=e(0),n=e(97)(!1);i(i.P,"String",{codePointAt:function(o){return n(this,o)}})},function(r,t,e){"use strict";var i=e(0),n=e(15),o=e(99),a="".endsWith;i(i.P+i.F*e(101)("endsWith"),"String",{endsWith:function(s){var l=o(this,s,"endsWith"),d=arguments.length>1?arguments[1]:void 0,u=n(l.length),h=d===void 0?u:Math.min(n(d),u),p=String(s);return a?a.call(l,p,h):l.slice(h-p.length,h)===p}})},function(r,t,e){"use strict";var i=e(0),n=e(99);i(i.P+i.F*e(101)("includes"),"String",{includes:function(o){return!!~n(this,o,"includes").indexOf(o,arguments.length>1?arguments[1]:void 0)}})},function(r,t,e){var i=e(0);i(i.P,"String",{repeat:e(94)})},function(r,t,e){"use strict";var i=e(0),n=e(15),o=e(99),a="".startsWith;i(i.P+i.F*e(101)("startsWith"),"String",{startsWith:function(s){var l=o(this,s,"startsWith"),d=n(Math.min(arguments.length>1?arguments[1]:void 0,l.length)),u=String(s);return a?a.call(l,u,d):l.slice(d,d+u.length)===u}})},function(r,t,e){"use strict";e(24)("anchor",function(i){return function(n){return i(this,"a","name",n)}})},function(r,t,e){"use strict";e(24)("big",function(i){return function(){return i(this,"big","","")}})},function(r,t,e){"use strict";e(24)("blink",function(i){return function(){return i(this,"blink","","")}})},function(r,t,e){"use strict";e(24)("bold",function(i){return function(){return i(this,"b","","")}})},function(r,t,e){"use strict";e(24)("fixed",function(i){return function(){return i(this,"tt","","")}})},function(r,t,e){"use strict";e(24)("fontcolor",function(i){return function(n){return i(this,"font","color",n)}})},function(r,t,e){"use strict";e(24)("fontsize",function(i){return function(n){return i(this,"font","size",n)}})},function(r,t,e){"use strict";e(24)("italics",function(i){return function(){return i(this,"i","","")}})},function(r,t,e){"use strict";e(24)("link",function(i){return function(n){return i(this,"a","href",n)}})},function(r,t,e){"use strict";e(24)("small",function(i){return function(){return i(this,"small","","")}})},function(r,t,e){"use strict";e(24)("strike",function(i){return function(){return i(this,"strike","","")}})},function(r,t,e){"use strict";e(24)("sub",function(i){return function(){return i(this,"sub","","")}})},function(r,t,e){"use strict";e(24)("sup",function(i){return function(){return i(this,"sup","","")}})},function(r,t,e){var i=e(0);i(i.S,"Date",{now:function(){return new Date().getTime()}})},function(r,t,e){"use strict";var i=e(0),n=e(22),o=e(42);i(i.P+i.F*e(11)(function(){return new Date(NaN).toJSON()!==null||Date.prototype.toJSON.call({toISOString:function(){return 1}})!==1}),"Date",{toJSON:function(a){var s=n(this),l=o(s);return typeof l!="number"||isFinite(l)?s.toISOString():null}})},function(r,t,e){var i=e(0),n=e(271);i(i.P+i.F*(Date.prototype.toISOString!==n),"Date",{toISOString:n})},function(r,t,e){"use strict";var i=e(11),n=Date.prototype.getTime,o=Date.prototype.toISOString,a=function(s){return s>9?s:"0"+s};r.exports=i(function(){return o.call(new Date(-50000000000001))!="0385-07-25T07:06:39.999Z"})||!i(function(){o.call(new Date(NaN))})?function(){if(!isFinite(n.call(this)))throw RangeError("Invalid time value");var s=this,l=s.getUTCFullYear(),d=s.getUTCMilliseconds(),u=l<0?"-":l>9999?"+":"";return u+("00000"+Math.abs(l)).slice(u?-6:-4)+"-"+a(s.getUTCMonth()+1)+"-"+a(s.getUTCDate())+"T"+a(s.getUTCHours())+":"+a(s.getUTCMinutes())+":"+a(s.getUTCSeconds())+"."+(d>99?d:"0"+a(d))+"Z"}:o},function(r,t,e){var i=Date.prototype,n=i.toString,o=i.getTime;new Date(NaN)+""!="Invalid Date"&&e(23)(i,"toString",function(){var a=o.call(this);return a==a?n.call(this):"Invalid Date"})},function(r,t,e){var i=e(14)("toPrimitive"),n=Date.prototype;i in n||e(27)(n,i,e(274))},function(r,t,e){"use strict";var i=e(12),n=e(42);r.exports=function(o){if(o!=="string"&&o!=="number"&&o!=="default")throw TypeError("Incorrect hint");return n(i(this),o!="number")}},function(r,t,e){var i=e(0);i(i.S,"Array",{isArray:e(73)})},function(r,t,e){"use strict";var i=e(31),n=e(0),o=e(22),a=e(132),s=e(102),l=e(15),d=e(103),u=e(104);n(n.S+n.F*!e(74)(function(h){Array.from(h)}),"Array",{from:function(h){var p,m,x,y,v=o(h),w=typeof this=="function"?this:Array,k=arguments.length,c=k>1?arguments[1]:void 0,_=c!==void 0,g=0,b=u(v);if(_&&(c=i(c,k>2?arguments[2]:void 0,2)),b==null||w==Array&&s(b))for(m=new w(p=l(v.length));p>g;g++)d(m,g,_?c(v[g],g):v[g]);else for(y=b.call(v),m=new w;!(x=y.next()).done;g++)d(m,g,_?a(y,c,[x.value,g],!0):x.value);return m.length=g,m}})},function(r,t,e){"use strict";var i=e(0),n=e(103);i(i.S+i.F*e(11)(function(){function o(){}return!(Array.of.call(o)instanceof o)}),"Array",{of:function(){for(var o=0,a=arguments.length,s=new(typeof this=="function"?this:Array)(a);a>o;)n(s,o,arguments[o++]);return s.length=a,s}})},function(r,t,e){"use strict";var i=e(0),n=e(28),o=[].join;i(i.P+i.F*(e(62)!=Object||!e(29)(o)),"Array",{join:function(a){return o.call(n(this),a===void 0?",":a)}})},function(r,t,e){"use strict";var i=e(0),n=e(90),o=e(37),a=e(48),s=e(15),l=[].slice;i(i.P+i.F*e(11)(function(){n&&l.call(n)}),"Array",{slice:function(d,u){var h=s(this.length),p=o(this);if(u=u===void 0?h:u,p=="Array")return l.call(this,d,u);for(var m=a(d,h),x=a(u,h),y=s(x-m),v=new Array(y),w=0;w<y;w++)v[w]=p=="String"?this.charAt(m+w):this[m+w];return v}})},function(r,t,e){"use strict";var i=e(0),n=e(32),o=e(22),a=e(11),s=[].sort,l=[1,2,3];i(i.P+i.F*(a(function(){l.sort(void 0)})||!a(function(){l.sort(null)})||!e(29)(s)),"Array",{sort:function(d){return d===void 0?s.call(o(this)):s.call(o(this),n(d))}})},function(r,t,e){"use strict";var i=e(0),n=e(36)(0),o=e(29)([].forEach,!0);i(i.P+i.F*!o,"Array",{forEach:function(a){return n(this,a,arguments[1])}})},function(r,t,e){var i=e(13),n=e(73),o=e(14)("species");r.exports=function(a){var s;return n(a)&&(typeof(s=a.constructor)!="function"||s!==Array&&!n(s.prototype)||(s=void 0),i(s)&&(s=s[o])===null&&(s=void 0)),s===void 0?Array:s}},function(r,t,e){"use strict";var i=e(0),n=e(36)(1);i(i.P+i.F*!e(29)([].map,!0),"Array",{map:function(o){return n(this,o,arguments[1])}})},function(r,t,e){"use strict";var i=e(0),n=e(36)(2);i(i.P+i.F*!e(29)([].filter,!0),"Array",{filter:function(o){return n(this,o,arguments[1])}})},function(r,t,e){"use strict";var i=e(0),n=e(36)(3);i(i.P+i.F*!e(29)([].some,!0),"Array",{some:function(o){return n(this,o,arguments[1])}})},function(r,t,e){"use strict";var i=e(0),n=e(36)(4);i(i.P+i.F*!e(29)([].every,!0),"Array",{every:function(o){return n(this,o,arguments[1])}})},function(r,t,e){"use strict";var i=e(0),n=e(134);i(i.P+i.F*!e(29)([].reduce,!0),"Array",{reduce:function(o){return n(this,o,arguments.length,arguments[1],!1)}})},function(r,t,e){"use strict";var i=e(0),n=e(134);i(i.P+i.F*!e(29)([].reduceRight,!0),"Array",{reduceRight:function(o){return n(this,o,arguments.length,arguments[1],!0)}})},function(r,t,e){"use strict";var i=e(0),n=e(71)(!1),o=[].indexOf,a=!!o&&1/[1].indexOf(1,-0)<0;i(i.P+i.F*(a||!e(29)(o)),"Array",{indexOf:function(s){return a?o.apply(this,arguments)||0:n(this,s,arguments[1])}})},function(r,t,e){"use strict";var i=e(0),n=e(28),o=e(33),a=e(15),s=[].lastIndexOf,l=!!s&&1/[1].lastIndexOf(1,-0)<0;i(i.P+i.F*(l||!e(29)(s)),"Array",{lastIndexOf:function(d){if(l)return s.apply(this,arguments)||0;var u=n(this),h=a(u.length),p=h-1;for(arguments.length>1&&(p=Math.min(p,o(arguments[1]))),p<0&&(p=h+p);p>=0;p--)if(p in u&&u[p]===d)return p||0;return-1}})},function(r,t,e){var i=e(0);i(i.P,"Array",{copyWithin:e(135)}),e(52)("copyWithin")},function(r,t,e){var i=e(0);i(i.P,"Array",{fill:e(105)}),e(52)("fill")},function(r,t,e){"use strict";var i=e(0),n=e(36)(5),o=!0;"find"in[]&&Array(1).find(function(){o=!1}),i(i.P+i.F*o,"Array",{find:function(a){return n(this,a,arguments.length>1?arguments[1]:void 0)}}),e(52)("find")},function(r,t,e){"use strict";var i=e(0),n=e(36)(6),o="findIndex",a=!0;o in[]&&Array(1)[o](function(){a=!1}),i(i.P+i.F*a,"Array",{findIndex:function(s){return n(this,s,arguments.length>1?arguments[1]:void 0)}}),e(52)(o)},function(r,t,e){e(58)("Array")},function(r,t,e){var i=e(10),n=e(93),o=e(18).f,a=e(50).f,s=e(100),l=e(75),d=i.RegExp,u=d,h=d.prototype,p=/a/g,m=/a/g,x=new d(p)!==p;if(e(17)&&(!x||e(11)(function(){return m[e(14)("match")]=!1,d(p)!=p||d(m)==m||d(p,"i")!="/a/i"}))){d=function(k,c){var _=this instanceof d,g=s(k),b=c===void 0;return!_&&g&&k.constructor===d&&b?k:n(x?new u(g&&!b?k.source:k,c):u((g=k instanceof d)?k.source:k,g&&b?l.call(k):c),_?this:h,d)};for(var y=function(k){k in d||o(d,k,{configurable:!0,get:function(){return u[k]},set:function(c){u[k]=c}})},v=a(u),w=0;v.length>w;)y(v[w++]);h.constructor=d,d.prototype=h,e(23)(i,"RegExp",d)}e(58)("RegExp")},function(r,t,e){"use strict";e(138);var i=e(12),n=e(75),o=e(17),a=/./.toString,s=function(l){e(23)(RegExp.prototype,"toString",l,!0)};e(11)(function(){return a.call({source:"a",flags:"b"})!="/a/b"})?s(function(){var l=i(this);return"/".concat(l.source,"/","flags"in l?l.flags:!o&&l instanceof RegExp?n.call(l):void 0)}):a.name!="toString"&&s(function(){return a.call(this)})},function(r,t,e){"use strict";var i=e(12),n=e(15),o=e(108),a=e(76);e(77)("match",1,function(s,l,d,u){return[function(h){var p=s(this),m=h==null?void 0:h[l];return m!==void 0?m.call(h,p):new RegExp(h)[l](String(p))},function(h){var p=u(d,h,this);if(p.done)return p.value;var m=i(h),x=String(this);if(!m.global)return a(m,x);var y=m.unicode;m.lastIndex=0;for(var v,w=[],k=0;(v=a(m,x))!==null;){var c=String(v[0]);w[k]=c,c===""&&(m.lastIndex=o(x,n(m.lastIndex),y)),k++}return k===0?null:w}]})},function(r,t,e){"use strict";var i=e(12),n=e(22),o=e(15),a=e(33),s=e(108),l=e(76),d=Math.max,u=Math.min,h=Math.floor,p=/\$([$&`']|\d\d?|<[^>]*>)/g,m=/\$([$&`']|\d\d?)/g;e(77)("replace",2,function(x,y,v,w){return[function(c,_){var g=x(this),b=c==null?void 0:c[y];return b!==void 0?b.call(c,g,_):v.call(String(g),c,_)},function(c,_){var g=w(v,c,this,_);if(g.done)return g.value;var b=i(c),E=String(this),T=typeof _=="function";T||(_=String(_));var C=b.global;if(C){var S=b.unicode;b.lastIndex=0}for(var A=[];;){var L=l(b,E);if(L===null||(A.push(L),!C))break;String(L[0])===""&&(b.lastIndex=s(E,o(b.lastIndex),S))}for(var B,P="",M=0,O=0;O<A.length;O++){L=A[O];for(var I=String(L[0]),j=d(u(a(L.index),E.length),0),H=[],N=1;N<L.length;N++)H.push((B=L[N])===void 0?B:String(B));var D=L.groups;if(T){var K=[I].concat(H,j,E);D!==void 0&&K.push(D);var q=String(_.apply(void 0,K))}else q=k(I,E,j,H,D,_);j>=M&&(P+=E.slice(M,j)+q,M=j+I.length)}return P+E.slice(M)}];function k(c,_,g,b,E,T){var C=g+c.length,S=b.length,A=m;return E!==void 0&&(E=n(E),A=p),v.call(T,A,function(L,B){var P;switch(B.charAt(0)){case"$":return"$";case"&":return c;case"`":return _.slice(0,g);case"'":return _.slice(C);case"<":P=E[B.slice(1,-1)];break;default:var M=+B;if(M===0)return L;if(M>S){var O=h(M/10);return O===0?L:O<=S?b[O-1]===void 0?B.charAt(1):b[O-1]+B.charAt(1):L}P=b[M-1]}return P===void 0?"":P})}})},function(r,t,e){"use strict";var i=e(12),n=e(123),o=e(76);e(77)("search",1,function(a,s,l,d){return[function(u){var h=a(this),p=u==null?void 0:u[s];return p!==void 0?p.call(u,h):new RegExp(u)[s](String(h))},function(u){var h=d(l,u,this);if(h.done)return h.value;var p=i(u),m=String(this),x=p.lastIndex;n(x,0)||(p.lastIndex=0);var y=o(p,m);return n(p.lastIndex,x)||(p.lastIndex=x),y===null?-1:y.index}]})},function(r,t,e){"use strict";var i=e(100),n=e(12),o=e(65),a=e(108),s=e(15),l=e(76),d=e(107),u=e(11),h=Math.min,p=[].push,m="length",x=!u(function(){RegExp(4294967295,"y")});e(77)("split",2,function(y,v,w,k){var c;return c="abbc".split(/(b)*/)[1]=="c"||"test".split(/(?:)/,-1)[m]!=4||"ab".split(/(?:ab)*/)[m]!=2||".".split(/(.?)(.?)/)[m]!=4||".".split(/()()/)[m]>1||"".split(/.?/)[m]?function(_,g){var b=String(this);if(_===void 0&&g===0)return[];if(!i(_))return w.call(b,_,g);for(var E,T,C,S=[],A=(_.ignoreCase?"i":"")+(_.multiline?"m":"")+(_.unicode?"u":"")+(_.sticky?"y":""),L=0,B=g===void 0?4294967295:g>>>0,P=new RegExp(_.source,A+"g");(E=d.call(P,b))&&!((T=P.lastIndex)>L&&(S.push(b.slice(L,E.index)),E[m]>1&&E.index<b[m]&&p.apply(S,E.slice(1)),C=E[0][m],L=T,S[m]>=B));)P.lastIndex===E.index&&P.lastIndex++;return L===b[m]?!C&&P.test("")||S.push(""):S.push(b.slice(L)),S[m]>B?S.slice(0,B):S}:"0".split(void 0,0)[m]?function(_,g){return _===void 0&&g===0?[]:w.call(this,_,g)}:w,[function(_,g){var b=y(this),E=_==null?void 0:_[v];return E!==void 0?E.call(_,b,g):c.call(String(b),_,g)},function(_,g){var b=k(c,_,this,g,c!==w);if(b.done)return b.value;var E=n(_),T=String(this),C=o(E,RegExp),S=E.unicode,A=(E.ignoreCase?"i":"")+(E.multiline?"m":"")+(E.unicode?"u":"")+(x?"y":"g"),L=new C(x?E:"^(?:"+E.source+")",A),B=g===void 0?4294967295:g>>>0;if(B===0)return[];if(T.length===0)return l(L,T)===null?[T]:[];for(var P=0,M=0,O=[];M<T.length;){L.lastIndex=x?M:0;var I,j=l(L,x?T:T.slice(M));if(j===null||(I=h(s(L.lastIndex+(x?0:M)),T.length))===P)M=a(T,M,S);else{if(O.push(T.slice(P,M)),O.length===B)return O;for(var H=1;H<=j.length-1;H++)if(O.push(j[H]),O.length===B)return O;M=P=I}}return O.push(T.slice(P)),O}]})},function(r,t,e){var i=e(10),n=e(109).set,o=i.MutationObserver||i.WebKitMutationObserver,a=i.process,s=i.Promise,l=e(37)(a)=="process";r.exports=function(){var d,u,h,p=function(){var v,w;for(l&&(v=a.domain)&&v.exit();d;){w=d.fn,d=d.next;try{w()}catch(k){throw d?h():u=void 0,k}}u=void 0,v&&v.enter()};if(l)h=function(){a.nextTick(p)};else if(!o||i.navigator&&i.navigator.standalone)if(s&&s.resolve){var m=s.resolve(void 0);h=function(){m.then(p)}}else h=function(){n.call(i,p)};else{var x=!0,y=document.createTextNode("");new o(p).observe(y,{characterData:!0}),h=function(){y.data=x=!x}}return function(v){var w={fn:v,next:void 0};u&&(u.next=w),d||(d=w,h()),u=w}}},function(r,t){r.exports=function(e){try{return{e:!1,v:e()}}catch(i){return{e:!0,v:i}}}},function(r,t,e){"use strict";var i=e(142),n=e(53);r.exports=e(80)("Map",function(o){return function(){return o(this,arguments.length>0?arguments[0]:void 0)}},{get:function(o){var a=i.getEntry(n(this,"Map"),o);return a&&a.v},set:function(o,a){return i.def(n(this,"Map"),o===0?0:o,a)}},i,!0)},function(r,t,e){"use strict";var i=e(142),n=e(53);r.exports=e(80)("Set",function(o){return function(){return o(this,arguments.length>0?arguments[0]:void 0)}},{add:function(o){return i.def(n(this,"Set"),o=o===0?0:o,o)}},i)},function(r,t,e){"use strict";var i,n=e(10),o=e(36)(0),a=e(23),s=e(43),l=e(122),d=e(143),u=e(13),h=e(53),p=e(53),m=!n.ActiveXObject&&"ActiveXObject"in n,x=s.getWeak,y=Object.isExtensible,v=d.ufstore,w=function(_){return function(){return _(this,arguments.length>0?arguments[0]:void 0)}},k={get:function(_){if(u(_)){var g=x(_);return g===!0?v(h(this,"WeakMap")).get(_):g?g[this._i]:void 0}},set:function(_,g){return d.def(h(this,"WeakMap"),_,g)}},c=r.exports=e(80)("WeakMap",w,k,d,!0,!0);p&&m&&(l((i=d.getConstructor(w,"WeakMap")).prototype,k),s.NEED=!0,o(["delete","has","get","set"],function(_){var g=c.prototype,b=g[_];a(g,_,function(E,T){if(u(E)&&!y(E)){this._f||(this._f=new i);var C=this._f[_](E,T);return _=="set"?this:C}return b.call(this,E,T)})}))},function(r,t,e){"use strict";var i=e(143),n=e(53);e(80)("WeakSet",function(o){return function(){return o(this,arguments.length>0?arguments[0]:void 0)}},{add:function(o){return i.def(n(this,"WeakSet"),o,!0)}},i,!1,!0)},function(r,t,e){"use strict";var i=e(0),n=e(81),o=e(110),a=e(12),s=e(48),l=e(15),d=e(13),u=e(10).ArrayBuffer,h=e(65),p=o.ArrayBuffer,m=o.DataView,x=n.ABV&&u.isView,y=p.prototype.slice,v=n.VIEW;i(i.G+i.W+i.F*(u!==p),{ArrayBuffer:p}),i(i.S+i.F*!n.CONSTR,"ArrayBuffer",{isView:function(w){return x&&x(w)||d(w)&&v in w}}),i(i.P+i.U+i.F*e(11)(function(){return!new p(2).slice(1,void 0).byteLength}),"ArrayBuffer",{slice:function(w,k){if(y!==void 0&&k===void 0)return y.call(a(this),w);for(var c=a(this).byteLength,_=s(w,c),g=s(k===void 0?c:k,c),b=new(h(this,p))(l(g-_)),E=new m(this),T=new m(b),C=0;_<g;)T.setUint8(C++,E.getUint8(_++));return b}}),e(58)("ArrayBuffer")},function(r,t,e){var i=e(0);i(i.G+i.W+i.F*!e(81).ABV,{DataView:e(110).DataView})},function(r,t,e){e(39)("Int8",1,function(i){return function(n,o,a){return i(this,n,o,a)}})},function(r,t,e){e(39)("Uint8",1,function(i){return function(n,o,a){return i(this,n,o,a)}})},function(r,t,e){e(39)("Uint8",1,function(i){return function(n,o,a){return i(this,n,o,a)}},!0)},function(r,t,e){e(39)("Int16",2,function(i){return function(n,o,a){return i(this,n,o,a)}})},function(r,t,e){e(39)("Uint16",2,function(i){return function(n,o,a){return i(this,n,o,a)}})},function(r,t,e){e(39)("Int32",4,function(i){return function(n,o,a){return i(this,n,o,a)}})},function(r,t,e){e(39)("Uint32",4,function(i){return function(n,o,a){return i(this,n,o,a)}})},function(r,t,e){e(39)("Float32",4,function(i){return function(n,o,a){return i(this,n,o,a)}})},function(r,t,e){e(39)("Float64",8,function(i){return function(n,o,a){return i(this,n,o,a)}})},function(r,t,e){var i=e(0),n=e(32),o=e(12),a=(e(10).Reflect||{}).apply,s=Function.apply;i(i.S+i.F*!e(11)(function(){a(function(){})}),"Reflect",{apply:function(l,d,u){var h=n(l),p=o(u);return a?a(h,d,p):s.call(h,d,p)}})},function(r,t,e){var i=e(0),n=e(49),o=e(32),a=e(12),s=e(13),l=e(11),d=e(124),u=(e(10).Reflect||{}).construct,h=l(function(){function m(){}return!(u(function(){},[],m)instanceof m)}),p=!l(function(){u(function(){})});i(i.S+i.F*(h||p),"Reflect",{construct:function(m,x){o(m),a(x);var y=arguments.length<3?m:o(arguments[2]);if(p&&!h)return u(m,x,y);if(m==y){switch(x.length){case 0:return new m;case 1:return new m(x[0]);case 2:return new m(x[0],x[1]);case 3:return new m(x[0],x[1],x[2]);case 4:return new m(x[0],x[1],x[2],x[3])}var v=[null];return v.push.apply(v,x),new(d.apply(m,v))}var w=y.prototype,k=n(s(w)?w:Object.prototype),c=Function.apply.call(m,k,x);return s(c)?c:k}})},function(r,t,e){var i=e(18),n=e(0),o=e(12),a=e(42);n(n.S+n.F*e(11)(function(){Reflect.defineProperty(i.f({},1,{value:1}),1,{value:2})}),"Reflect",{defineProperty:function(s,l,d){o(s),l=a(l,!0),o(d);try{return i.f(s,l,d),!0}catch(u){return!1}}})},function(r,t,e){var i=e(0),n=e(34).f,o=e(12);i(i.S,"Reflect",{deleteProperty:function(a,s){var l=n(o(a),s);return!(l&&!l.configurable)&&delete a[s]}})},function(r,t,e){"use strict";var i=e(0),n=e(12),o=function(a){this._t=n(a),this._i=0;var s,l=this._k=[];for(s in a)l.push(s)};e(131)(o,"Object",function(){var a,s=this._k;do if(this._i>=s.length)return{value:void 0,done:!0};while(!((a=s[this._i++])in this._t));return{value:a,done:!1}}),i(i.S,"Reflect",{enumerate:function(a){return new o(a)}})},function(r,t,e){var i=e(34),n=e(51),o=e(26),a=e(0),s=e(13),l=e(12);a(a.S,"Reflect",{get:function d(u,h){var p,m,x=arguments.length<3?u:arguments[2];return l(u)===x?u[h]:(p=i.f(u,h))?o(p,"value")?p.value:p.get!==void 0?p.get.call(x):void 0:s(m=n(u))?d(m,h,x):void 0}})},function(r,t,e){var i=e(34),n=e(0),o=e(12);n(n.S,"Reflect",{getOwnPropertyDescriptor:function(a,s){return i.f(o(a),s)}})},function(r,t,e){var i=e(0),n=e(51),o=e(12);i(i.S,"Reflect",{getPrototypeOf:function(a){return n(o(a))}})},function(r,t,e){var i=e(0);i(i.S,"Reflect",{has:function(n,o){return o in n}})},function(r,t,e){var i=e(0),n=e(12),o=Object.isExtensible;i(i.S,"Reflect",{isExtensible:function(a){return n(a),!o||o(a)}})},function(r,t,e){var i=e(0);i(i.S,"Reflect",{ownKeys:e(145)})},function(r,t,e){var i=e(0),n=e(12),o=Object.preventExtensions;i(i.S,"Reflect",{preventExtensions:function(a){n(a);try{return o&&o(a),!0}catch(s){return!1}}})},function(r,t,e){var i=e(18),n=e(34),o=e(51),a=e(26),s=e(0),l=e(44),d=e(12),u=e(13);s(s.S,"Reflect",{set:function h(p,m,x){var y,v,w=arguments.length<4?p:arguments[3],k=n.f(d(p),m);if(!k){if(u(v=o(p)))return h(v,m,x,w);k=l(0)}if(a(k,"value")){if(k.writable===!1||!u(w))return!1;if(y=n.f(w,m)){if(y.get||y.set||y.writable===!1)return!1;y.value=x,i.f(w,m,y)}else i.f(w,m,l(0,x));return!0}return k.set!==void 0&&(k.set.call(w,x),!0)}})},function(r,t,e){var i=e(0),n=e(91);n&&i(i.S,"Reflect",{setPrototypeOf:function(o,a){n.check(o,a);try{return n.set(o,a),!0}catch(s){return!1}}})},function(r,t,e){e(334),r.exports=e(16).Array.includes},function(r,t,e){"use strict";var i=e(0),n=e(71)(!0);i(i.P,"Array",{includes:function(o){return n(this,o,arguments.length>1?arguments[1]:void 0)}}),e(52)("includes")},function(r,t,e){e(336),r.exports=e(16).Array.flatMap},function(r,t,e){"use strict";var i=e(0),n=e(337),o=e(22),a=e(15),s=e(32),l=e(133);i(i.P,"Array",{flatMap:function(d){var u,h,p=o(this);return s(d),u=a(p.length),h=l(p,0),n(h,p,p,u,0,1,d,arguments[1]),h}}),e(52)("flatMap")},function(r,t,e){"use strict";var i=e(73),n=e(13),o=e(15),a=e(31),s=e(14)("isConcatSpreadable");r.exports=function l(d,u,h,p,m,x,y,v){for(var w,k,c=m,_=0,g=!!y&&a(y,v,3);_<p;){if(_ in h){if(w=g?g(h[_],_,u):h[_],k=!1,n(w)&&(k=(k=w[s])!==void 0?!!k:i(w)),k&&x>0)c=l(d,u,w,o(w.length),c,x-1)-1;else{if(c>=9007199254740991)throw TypeError();d[c]=w}c++}_++}return c}},function(r,t,e){e(339),r.exports=e(16).String.padStart},function(r,t,e){"use strict";var i=e(0),n=e(146),o=e(79),a=/Version\/10\.\d+(\.\d+)?( Mobile\/\w+)? Safari\//.test(o);i(i.P+i.F*a,"String",{padStart:function(s){return n(this,s,arguments.length>1?arguments[1]:void 0,!0)}})},function(r,t,e){e(341),r.exports=e(16).String.padEnd},function(r,t,e){"use strict";var i=e(0),n=e(146),o=e(79),a=/Version\/10\.\d+(\.\d+)?( Mobile\/\w+)? Safari\//.test(o);i(i.P+i.F*a,"String",{padEnd:function(s){return n(this,s,arguments.length>1?arguments[1]:void 0,!1)}})},function(r,t,e){e(343),r.exports=e(16).String.trimLeft},function(r,t,e){"use strict";e(56)("trimLeft",function(i){return function(){return i(this,1)}},"trimStart")},function(r,t,e){e(345),r.exports=e(16).String.trimRight},function(r,t,e){"use strict";e(56)("trimRight",function(i){return function(){return i(this,2)}},"trimEnd")},function(r,t,e){e(347),r.exports=e(87).f("asyncIterator")},function(r,t,e){e(118)("asyncIterator")},function(r,t,e){e(349),r.exports=e(16).Object.getOwnPropertyDescriptors},function(r,t,e){var i=e(0),n=e(145),o=e(28),a=e(34),s=e(103);i(i.S,"Object",{getOwnPropertyDescriptors:function(l){for(var d,u,h=o(l),p=a.f,m=n(h),x={},y=0;m.length>y;)(u=p(h,d=m[y++]))!==void 0&&s(x,d,u);return x}})},function(r,t,e){e(351),r.exports=e(16).Object.values},function(r,t,e){var i=e(0),n=e(147)(!1);i(i.S,"Object",{values:function(o){return n(o)}})},function(r,t,e){e(353),r.exports=e(16).Object.entries},function(r,t,e){var i=e(0),n=e(147)(!0);i(i.S,"Object",{entries:function(o){return n(o)}})},function(r,t,e){"use strict";e(139),e(355),r.exports=e(16).Promise.finally},function(r,t,e){"use strict";var i=e(0),n=e(16),o=e(10),a=e(65),s=e(141);i(i.P+i.R,"Promise",{finally:function(l){var d=a(this,n.Promise||o.Promise),u=typeof l=="function";return this.then(u?function(h){return s(d,l()).then(function(){return h})}:l,u?function(h){return s(d,l()).then(function(){throw h})}:l)}})},function(r,t,e){e(357),e(358),e(359),r.exports=e(16)},function(r,t,e){var i=e(10),n=e(0),o=e(79),a=[].slice,s=/MSIE .\./.test(o),l=function(d){return function(u,h){var p=arguments.length>2,m=!!p&&a.call(arguments,2);return d(p?function(){(typeof u=="function"?u:Function(u)).apply(this,m)}:u,h)}};n(n.G+n.B+n.F*s,{setTimeout:l(i.setTimeout),setInterval:l(i.setInterval)})},function(r,t,e){var i=e(0),n=e(109);i(i.G+i.B,{setImmediate:n.set,clearImmediate:n.clear})},function(r,t,e){for(var i=e(106),n=e(47),o=e(23),a=e(10),s=e(27),l=e(57),d=e(14),u=d("iterator"),h=d("toStringTag"),p=l.Array,m={CSSRuleList:!0,CSSStyleDeclaration:!1,CSSValueList:!1,ClientRectList:!1,DOMRectList:!1,DOMStringList:!1,DOMTokenList:!0,DataTransferItemList:!1,FileList:!1,HTMLAllCollection:!1,HTMLCollection:!1,HTMLFormElement:!1,HTMLSelectElement:!1,MediaList:!0,MimeTypeArray:!1,NamedNodeMap:!1,NodeList:!0,PaintRequestList:!1,Plugin:!1,PluginArray:!1,SVGLengthList:!1,SVGNumberList:!1,SVGPathSegList:!1,SVGPointList:!1,SVGStringList:!1,SVGTransformList:!1,SourceBufferList:!1,StyleSheetList:!0,TextTrackCueList:!1,TextTrackList:!1,TouchList:!1},x=n(m),y=0;y<x.length;y++){var v,w=x[y],k=m[w],c=a[w],_=c&&c.prototype;if(_&&(_[u]||s(_,u,p),_[h]||s(_,h,w),l[w]=p,k))for(v in i)_[v]||o(_,v,i[v],!0)}},function(r,t,e){var i=function(n){"use strict";var o=Object.prototype,a=o.hasOwnProperty,s=Object.defineProperty||function(O,I,j){O[I]=j.value},l=typeof Symbol=="function"?Symbol:{},d=l.iterator||"@@iterator",u=l.asyncIterator||"@@asyncIterator",h=l.toStringTag||"@@toStringTag";function p(O,I,j){return Object.defineProperty(O,I,{value:j,enumerable:!0,configurable:!0,writable:!0}),O[I]}try{p({},"")}catch(O){p=function(I,j,H){return I[j]=H}}function m(O,I,j,H){var N=I&&I.prototype instanceof v?I:v,D=Object.create(N.prototype),K=new B(H||[]);return s(D,"_invoke",{value:C(O,j,K)}),D}function x(O,I,j){try{return{type:"normal",arg:O.call(I,j)}}catch(H){return{type:"throw",arg:H}}}n.wrap=m;var y={};function v(){}function w(){}function k(){}var c={};p(c,d,function(){return this});var _=Object.getPrototypeOf,g=_&&_(_(P([])));g&&g!==o&&a.call(g,d)&&(c=g);var b=k.prototype=v.prototype=Object.create(c);function E(O){["next","throw","return"].forEach(function(I){p(O,I,function(j){return this._invoke(I,j)})})}function T(O,I){var j;s(this,"_invoke",{value:function(H,N){function D(){return new I(function(K,q){(function U(G,Q,X,ie){var ue=x(O[G],O,Q);if(ue.type!=="throw"){var fe=ue.arg,be=fe.value;return be&&typeof be=="object"&&a.call(be,"__await")?I.resolve(be.__await).then(function(Se){U("next",Se,X,ie)},function(Se){U("throw",Se,X,ie)}):I.resolve(be).then(function(Se){fe.value=Se,X(fe)},function(Se){return U("throw",Se,X,ie)})}ie(ue.arg)})(H,N,K,q)})}return j=j?j.then(D,D):D()}})}function C(O,I,j){var H="suspendedStart";return function(N,D){if(H==="executing")throw new Error("Generator is already running");if(H==="completed"){if(N==="throw")throw D;return M()}for(j.method=N,j.arg=D;;){var K=j.delegate;if(K){var q=S(K,j);if(q){if(q===y)continue;return q}}if(j.method==="next")j.sent=j._sent=j.arg;else if(j.method==="throw"){if(H==="suspendedStart")throw H="completed",j.arg;j.dispatchException(j.arg)}else j.method==="return"&&j.abrupt("return",j.arg);H="executing";var U=x(O,I,j);if(U.type==="normal"){if(H=j.done?"completed":"suspendedYield",U.arg===y)continue;return{value:U.arg,done:j.done}}U.type==="throw"&&(H="completed",j.method="throw",j.arg=U.arg)}}}function S(O,I){var j=I.method,H=O.iterator[j];if(H===void 0)return I.delegate=null,j==="throw"&&O.iterator.return&&(I.method="return",I.arg=void 0,S(O,I),I.method==="throw")||j!=="return"&&(I.method="throw",I.arg=new TypeError("The iterator does not provide a '"+j+"' method")),y;var N=x(H,O.iterator,I.arg);if(N.type==="throw")return I.method="throw",I.arg=N.arg,I.delegate=null,y;var D=N.arg;return D?D.done?(I[O.resultName]=D.value,I.next=O.nextLoc,I.method!=="return"&&(I.method="next",I.arg=void 0),I.delegate=null,y):D:(I.method="throw",I.arg=new TypeError("iterator result is not an object"),I.delegate=null,y)}function A(O){var I={tryLoc:O[0]};1 in O&&(I.catchLoc=O[1]),2 in O&&(I.finallyLoc=O[2],I.afterLoc=O[3]),this.tryEntries.push(I)}function L(O){var I=O.completion||{};I.type="normal",delete I.arg,O.completion=I}function B(O){this.tryEntries=[{tryLoc:"root"}],O.forEach(A,this),this.reset(!0)}function P(O){if(O){var I=O[d];if(I)return I.call(O);if(typeof O.next=="function")return O;if(!isNaN(O.length)){var j=-1,H=function N(){for(;++j<O.length;)if(a.call(O,j))return N.value=O[j],N.done=!1,N;return N.value=void 0,N.done=!0,N};return H.next=H}}return{next:M}}function M(){return{value:void 0,done:!0}}return w.prototype=k,s(b,"constructor",{value:k,configurable:!0}),s(k,"constructor",{value:w,configurable:!0}),w.displayName=p(k,h,"GeneratorFunction"),n.isGeneratorFunction=function(O){var I=typeof O=="function"&&O.constructor;return!!I&&(I===w||(I.displayName||I.name)==="GeneratorFunction")},n.mark=function(O){return Object.setPrototypeOf?Object.setPrototypeOf(O,k):(O.__proto__=k,p(O,h,"GeneratorFunction")),O.prototype=Object.create(b),O},n.awrap=function(O){return{__await:O}},E(T.prototype),p(T.prototype,u,function(){return this}),n.AsyncIterator=T,n.async=function(O,I,j,H,N){N===void 0&&(N=Promise);var D=new T(m(O,I,j,H),N);return n.isGeneratorFunction(I)?D:D.next().then(function(K){return K.done?K.value:D.next()})},E(b),p(b,h,"Generator"),p(b,d,function(){return this}),p(b,"toString",function(){return"[object Generator]"}),n.keys=function(O){var I=Object(O),j=[];for(var H in I)j.push(H);return j.reverse(),function N(){for(;j.length;){var D=j.pop();if(D in I)return N.value=D,N.done=!1,N}return N.done=!0,N}},n.values=P,B.prototype={constructor:B,reset:function(O){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(L),!O)for(var I in this)I.charAt(0)==="t"&&a.call(this,I)&&!isNaN(+I.slice(1))&&(this[I]=void 0)},stop:function(){this.done=!0;var O=this.tryEntries[0].completion;if(O.type==="throw")throw O.arg;return this.rval},dispatchException:function(O){if(this.done)throw O;var I=this;function j(U,G){return D.type="throw",D.arg=O,I.next=U,G&&(I.method="next",I.arg=void 0),!!G}for(var H=this.tryEntries.length-1;H>=0;--H){var N=this.tryEntries[H],D=N.completion;if(N.tryLoc==="root")return j("end");if(N.tryLoc<=this.prev){var K=a.call(N,"catchLoc"),q=a.call(N,"finallyLoc");if(K&&q){if(this.prev<N.catchLoc)return j(N.catchLoc,!0);if(this.prev<N.finallyLoc)return j(N.finallyLoc)}else if(K){if(this.prev<N.catchLoc)return j(N.catchLoc,!0)}else{if(!q)throw new Error("try statement without catch or finally");if(this.prev<N.finallyLoc)return j(N.finallyLoc)}}}},abrupt:function(O,I){for(var j=this.tryEntries.length-1;j>=0;--j){var H=this.tryEntries[j];if(H.tryLoc<=this.prev&&a.call(H,"finallyLoc")&&this.prev<H.finallyLoc){var N=H;break}}N&&(O==="break"||O==="continue")&&N.tryLoc<=I&&I<=N.finallyLoc&&(N=null);var D=N?N.completion:{};return D.type=O,D.arg=I,N?(this.method="next",this.next=N.finallyLoc,y):this.complete(D)},complete:function(O,I){if(O.type==="throw")throw O.arg;return O.type==="break"||O.type==="continue"?this.next=O.arg:O.type==="return"?(this.rval=this.arg=O.arg,this.method="return",this.next="end"):O.type==="normal"&&I&&(this.next=I),y},finish:function(O){for(var I=this.tryEntries.length-1;I>=0;--I){var j=this.tryEntries[I];if(j.finallyLoc===O)return this.complete(j.completion,j.afterLoc),L(j),y}},catch:function(O){for(var I=this.tryEntries.length-1;I>=0;--I){var j=this.tryEntries[I];if(j.tryLoc===O){var H=j.completion;if(H.type==="throw"){var N=H.arg;L(j)}return N}}throw new Error("illegal catch attempt")},delegateYield:function(O,I,j){return this.delegate={iterator:P(O),resultName:I,nextLoc:j},this.method==="next"&&(this.arg=void 0),y}},n}(r.exports);try{regeneratorRuntime=i}catch(n){typeof globalThis=="object"?globalThis.regeneratorRuntime=i:Function("r","regeneratorRuntime = r")(i)}},function(r,t,e){var i,n,o,a=e(7);n=[t,e(30),e(2),e(3),e(365),e(366),e(367),e(8)],(o=typeof(i=function(s,l,d,u,h,p,m,x){"use strict";var y=e(1);function v(k){if(typeof WeakMap!="function")return null;var c=new WeakMap,_=new WeakMap;return(v=function(g){return g?_:c})(k)}Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0,l=y(l),d=y(d),u=y(u),m=y(m),x=function(k,c){if(!c&&k&&k.__esModule)return k;if(k===null||a(k)!=="object"&&typeof k!="function")return{default:k};var _=v(c);if(_&&_.has(k))return _.get(k);var g={},b=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var E in k)if(E!=="default"&&Object.prototype.hasOwnProperty.call(k,E)){var T=b?Object.getOwnPropertyDescriptor(k,E):null;T&&(T.get||T.set)?Object.defineProperty(g,E,T):g[E]=k[E]}return g.default=k,_&&_.set(k,g),g}(x);var w=function(){function k(c){var _=this;(0,d.default)(this,k);var g=function(){};x.isObject(c)&&x.isFunction(c.onReady)&&(g=c.onReady);var b=new m.default(c);this.isReady=b.isReady.then(function(){_.exportAPI(b),g()})}return(0,u.default)(k,[{key:"exportAPI",value:function(c){var _=this;["configuration"].forEach(function(g){_[g]=c[g]}),this.destroy=function(){for(var g in Object.values(c.moduleInstances).forEach(function(b){x.isFunction(b.destroy)&&b.destroy(),b.listeners.removeAll()}),c=null,_)Object.prototype.hasOwnProperty.call(_,g)&&delete _[g];Object.setPrototypeOf(_,null)},Object.setPrototypeOf(this,c.moduleInstances.API.methods),delete this.exportAPI,Object.entries({blocks:{clear:"clear",render:"render"},caret:{focus:"focus"},events:{on:"on",off:"off",emit:"emit"},saver:{save:"save"}}).forEach(function(g){var b=(0,l.default)(g,2),E=b[0],T=b[1];Object.entries(T).forEach(function(C){var S=(0,l.default)(C,2),A=S[0],L=S[1];_[L]=c.moduleInstances.API.methods[E][A]})})}}],[{key:"version",get:function(){return"2.26.3"}}]),k}();s.default=w,w.displayName="EditorJS",r.exports=t.default})=="function"?i.apply(t,n):i)===void 0||(r.exports=o)},function(r,t){r.exports=function(e){if(Array.isArray(e))return e},r.exports.__esModule=!0,r.exports.default=r.exports},function(r,t){r.exports=function(e,i){var n=e==null?null:typeof Symbol!="undefined"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var o,a,s=[],l=!0,d=!1;try{for(n=n.call(e);!(l=(o=n.next()).done)&&(s.push(o.value),!i||s.length!==i);l=!0);}catch(u){d=!0,a=u}finally{try{l||n.return==null||n.return()}finally{if(d)throw a}}return s}},r.exports.__esModule=!0,r.exports.default=r.exports},function(r,t){r.exports=function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)},r.exports.__esModule=!0,r.exports.default=r.exports},function(r,t){function e(){}r.exports=Object.assign(e,{default:e,register:e,revert:function(){},__esModule:!0})},function(r,t,e){var i,n,o;n=[],(o=typeof(i=function(){"use strict";Element.prototype.matches||(Element.prototype.matches=Element.prototype.matchesSelector||Element.prototype.mozMatchesSelector||Element.prototype.msMatchesSelector||Element.prototype.oMatchesSelector||Element.prototype.webkitMatchesSelector||function(a){for(var s=(this.document||this.ownerDocument).querySelectorAll(a),l=s.length;--l>=0&&s.item(l)!==this;);return l>-1}),Element.prototype.closest||(Element.prototype.closest=function(a){var s=this;if(!document.documentElement.contains(s))return null;do{if(s.matches(a))return s;s=s.parentElement||s.parentNode}while(s!==null);return null}),Element.prototype.prepend||(Element.prototype.prepend=function(a){var s=document.createDocumentFragment();Array.isArray(a)||(a=[a]),a.forEach(function(l){var d=l instanceof Node;s.appendChild(d?l:document.createTextNode(l))}),this.insertBefore(s,this.firstChild)}),Element.prototype.scrollIntoViewIfNeeded||(Element.prototype.scrollIntoViewIfNeeded=function(a){a=arguments.length===0||!!a;var s=this.parentNode,l=window.getComputedStyle(s,null),d=parseInt(l.getPropertyValue("border-top-width")),u=parseInt(l.getPropertyValue("border-left-width")),h=this.offsetTop-s.offsetTop<s.scrollTop,p=this.offsetTop-s.offsetTop+this.clientHeight-d>s.scrollTop+s.clientHeight,m=this.offsetLeft-s.offsetLeft<s.scrollLeft,x=this.offsetLeft-s.offsetLeft+this.clientWidth-u>s.scrollLeft+s.clientWidth,y=h&&!p;(h||p)&&a&&(s.scrollTop=this.offsetTop-s.offsetTop-s.clientHeight/2-d+this.clientHeight/2),(m||x)&&a&&(s.scrollLeft=this.offsetLeft-s.offsetLeft-s.clientWidth/2-u+this.clientWidth/2),(h||p||m||x)&&!a&&this.scrollIntoView(y)})})=="function"?i.apply(t,n):i)===void 0||(r.exports=o)},function(r,t,e){var i,n,o,a=e(7);n=[t,e(20),e(21),e(2),e(3),e(19),e(8),e(54),e(151),e(82)],(o=typeof(i=function(s,l,d,u,h,p,m,x,y,v){"use strict";var w=e(1);function k(b){if(typeof WeakMap!="function")return null;var E=new WeakMap,T=new WeakMap;return(k=function(C){return C?T:E})(b)}Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0,l=w(l),d=w(d),u=w(u),h=w(h),p=w(p),m=function(b,E){if(!E&&b&&b.__esModule)return b;if(b===null||a(b)!=="object"&&typeof b!="function")return{default:b};var T=k(E);if(T&&T.has(b))return T.get(b);var C={},S=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var A in b)if(A!=="default"&&Object.prototype.hasOwnProperty.call(b,A)){var L=S?Object.getOwnPropertyDescriptor(b,A):null;L&&(L.get||L.set)?Object.defineProperty(C,A,L):C[A]=b[A]}return C.default=b,T&&T.set(b,C),C}(m),x=w(x),v=w(v);var c=e(376),_=[];c.keys().forEach(function(b){b.match(/^\.\/[^_][\w/]*\.([tj])s$/)&&_.push(c(b))});var g=function(){function b(C){var S,A,L=this;(0,u.default)(this,b),this.moduleInstances={},this.eventsDispatcher=new v.default,this.isReady=new Promise(function(B,P){S=B,A=P}),Promise.resolve().then((0,d.default)(l.default.mark(function B(){return l.default.wrap(function(P){for(;;)switch(P.prev=P.next){case 0:return L.configuration=C,P.next=3,L.validate();case 3:return P.next=5,L.init();case 5:return P.next=7,L.start();case 7:m.logLabeled("I'm ready! (\uFF89\u25D5\u30EE\u25D5)\uFF89*:\uFF65\uFF9F\u2727","log","","color: #E24A75"),setTimeout((0,d.default)(l.default.mark(function M(){var O,I,j;return l.default.wrap(function(H){for(;;)switch(H.prev=H.next){case 0:return H.next=2,L.render();case 2:L.configuration.autofocus&&(O=L.moduleInstances,I=O.BlockManager,(j=O.Caret).setToBlock(I.blocks[0],j.positions.START),I.highlightCurrentNode()),L.moduleInstances.UI.removeLoader(),S();case 5:case"end":return H.stop()}},M)})),500);case 9:case"end":return P.stop()}},B)}))).catch(function(B){m.log("Editor.js is not ready because of ".concat(B),"error"),A(B)})}var E,T;return(0,h.default)(b,[{key:"configuration",get:function(){return this.config},set:function(C){var S,A;m.isObject(C)?this.config=Object.assign({},C):this.config={holder:C},m.deprecationAssert(!!this.config.holderId,"config.holderId","config.holder"),this.config.holderId&&!this.config.holder&&(this.config.holder=this.config.holderId,this.config.holderId=null),this.config.holder==null&&(this.config.holder="editorjs"),this.config.logLevel||(this.config.logLevel=m.LogLevels.VERBOSE),m.setLogLevel(this.config.logLevel),m.deprecationAssert(Boolean(this.config.initialBlock),"config.initialBlock","config.defaultBlock"),this.config.defaultBlock=this.config.defaultBlock||this.config.initialBlock||"paragraph",this.config.minHeight=this.config.minHeight!==void 0?this.config.minHeight:300;var L={type:this.config.defaultBlock,data:{}};this.config.placeholder=this.config.placeholder||!1,this.config.sanitizer=this.config.sanitizer||{p:!0,b:!0,a:!0},this.config.hideToolbar=!!this.config.hideToolbar&&this.config.hideToolbar,this.config.tools=this.config.tools||{},this.config.i18n=this.config.i18n||{},this.config.data=this.config.data||{blocks:[]},this.config.onReady=this.config.onReady||function(){},this.config.onChange=this.config.onChange||function(){},this.config.inlineToolbar=this.config.inlineToolbar===void 0||this.config.inlineToolbar,!m.isEmpty(this.config.data)&&this.config.data.blocks&&this.config.data.blocks.length!==0||(this.config.data={blocks:[L]}),this.config.readOnly=this.config.readOnly||!1,!((S=this.config.i18n)===null||S===void 0)&&S.messages&&x.default.setDictionary(this.config.i18n.messages),this.config.i18n.direction=((A=this.config.i18n)===null||A===void 0?void 0:A.direction)||"ltr"}},{key:"validate",value:(T=(0,d.default)(l.default.mark(function C(){var S,A,L;return l.default.wrap(function(B){for(;;)switch(B.prev=B.next){case 0:if(S=this.config,A=S.holderId,L=S.holder,!A||!L){B.next=3;break}throw Error("\xABholderId\xBB and \xABholder\xBB param can't assign at the same time.");case 3:if(!m.isString(L)||p.default.get(L)){B.next=5;break}throw Error("element with ID \xAB".concat(L,"\xBB is missing. Pass correct holder's ID."));case 5:if(!L||!m.isObject(L)||p.default.isElement(L)){B.next=7;break}throw Error("\xABholder\xBB value must be an Element node");case 7:case"end":return B.stop()}},C,this)})),function(){return T.apply(this,arguments)})},{key:"init",value:function(){this.constructModules(),this.configureModules()}},{key:"start",value:(E=(0,d.default)(l.default.mark(function C(){var S,A=this;return l.default.wrap(function(L){for(;;)switch(L.prev=L.next){case 0:return S=["Tools","UI","BlockManager","Paste","BlockSelection","RectangleSelection","CrossBlockSelection","ReadOnly"],L.next=3,S.reduce(function(B,P){return B.then((0,d.default)(l.default.mark(function M(){return l.default.wrap(function(O){for(;;)switch(O.prev=O.next){case 0:return O.prev=0,O.next=3,A.moduleInstances[P].prepare();case 3:O.next=10;break;case 5:if(O.prev=5,O.t0=O.catch(0),!(O.t0 instanceof y.CriticalError)){O.next=9;break}throw new Error(O.t0.message);case 9:m.log("Module ".concat(P," was skipped because of %o"),"warn",O.t0);case 10:case"end":return O.stop()}},M,null,[[0,5]])})))},Promise.resolve());case 3:case"end":return L.stop()}},C)})),function(){return E.apply(this,arguments)})},{key:"render",value:function(){return this.moduleInstances.Renderer.render(this.config.data.blocks)}},{key:"constructModules",value:function(){var C=this;_.forEach(function(S){var A=m.isFunction(S)?S:S.default;try{C.moduleInstances[A.displayName]=new A({config:C.configuration,eventsDispatcher:C.eventsDispatcher})}catch(L){m.log("Module ".concat(A.displayName," skipped because"),"error",L)}})}},{key:"configureModules",value:function(){for(var C in this.moduleInstances)Object.prototype.hasOwnProperty.call(this.moduleInstances,C)&&(this.moduleInstances[C].state=this.getModulesDiff(C))}},{key:"getModulesDiff",value:function(C){var S={};for(var A in this.moduleInstances)A!==C&&(S[A]=this.moduleInstances[A]);return S}}]),b}();s.default=g,g.displayName="Core",r.exports=t.default})=="function"?i.apply(t,n):i)===void 0||(r.exports=o)},function(r,t,e){var i=e(7).default;function n(){"use strict";r.exports=n=function(){return o},r.exports.__esModule=!0,r.exports.default=r.exports;var o={},a=Object.prototype,s=a.hasOwnProperty,l=Object.defineProperty||function(I,j,H){I[j]=H.value},d=typeof Symbol=="function"?Symbol:{},u=d.iterator||"@@iterator",h=d.asyncIterator||"@@asyncIterator",p=d.toStringTag||"@@toStringTag";function m(I,j,H){return Object.defineProperty(I,j,{value:H,enumerable:!0,configurable:!0,writable:!0}),I[j]}try{m({},"")}catch(I){m=function(j,H,N){return j[H]=N}}function x(I,j,H,N){var D=j&&j.prototype instanceof w?j:w,K=Object.create(D.prototype),q=new P(N||[]);return l(K,"_invoke",{value:S(I,H,q)}),K}function y(I,j,H){try{return{type:"normal",arg:I.call(j,H)}}catch(N){return{type:"throw",arg:N}}}o.wrap=x;var v={};function w(){}function k(){}function c(){}var _={};m(_,u,function(){return this});var g=Object.getPrototypeOf,b=g&&g(g(M([])));b&&b!==a&&s.call(b,u)&&(_=b);var E=c.prototype=w.prototype=Object.create(_);function T(I){["next","throw","return"].forEach(function(j){m(I,j,function(H){return this._invoke(j,H)})})}function C(I,j){var H;l(this,"_invoke",{value:function(N,D){function K(){return new j(function(q,U){(function G(Q,X,ie,ue){var fe=y(I[Q],I,X);if(fe.type!=="throw"){var be=fe.arg,Se=be.value;return Se&&i(Se)=="object"&&s.call(Se,"__await")?j.resolve(Se.__await).then(function(le){G("next",le,ie,ue)},function(le){G("throw",le,ie,ue)}):j.resolve(Se).then(function(le){be.value=le,ie(be)},function(le){return G("throw",le,ie,ue)})}ue(fe.arg)})(N,D,q,U)})}return H=H?H.then(K,K):K()}})}function S(I,j,H){var N="suspendedStart";return function(D,K){if(N==="executing")throw new Error("Generator is already running");if(N==="completed"){if(D==="throw")throw K;return O()}for(H.method=D,H.arg=K;;){var q=H.delegate;if(q){var U=A(q,H);if(U){if(U===v)continue;return U}}if(H.method==="next")H.sent=H._sent=H.arg;else if(H.method==="throw"){if(N==="suspendedStart")throw N="completed",H.arg;H.dispatchException(H.arg)}else H.method==="return"&&H.abrupt("return",H.arg);N="executing";var G=y(I,j,H);if(G.type==="normal"){if(N=H.done?"completed":"suspendedYield",G.arg===v)continue;return{value:G.arg,done:H.done}}G.type==="throw"&&(N="completed",H.method="throw",H.arg=G.arg)}}}function A(I,j){var H=I.iterator[j.method];if(H===void 0){if(j.delegate=null,j.method==="throw"){if(I.iterator.return&&(j.method="return",j.arg=void 0,A(I,j),j.method==="throw"))return v;j.method="throw",j.arg=new TypeError("The iterator does not provide a 'throw' method")}return v}var N=y(H,I.iterator,j.arg);if(N.type==="throw")return j.method="throw",j.arg=N.arg,j.delegate=null,v;var D=N.arg;return D?D.done?(j[I.resultName]=D.value,j.next=I.nextLoc,j.method!=="return"&&(j.method="next",j.arg=void 0),j.delegate=null,v):D:(j.method="throw",j.arg=new TypeError("iterator result is not an object"),j.delegate=null,v)}function L(I){var j={tryLoc:I[0]};1 in I&&(j.catchLoc=I[1]),2 in I&&(j.finallyLoc=I[2],j.afterLoc=I[3]),this.tryEntries.push(j)}function B(I){var j=I.completion||{};j.type="normal",delete j.arg,I.completion=j}function P(I){this.tryEntries=[{tryLoc:"root"}],I.forEach(L,this),this.reset(!0)}function M(I){if(I){var j=I[u];if(j)return j.call(I);if(typeof I.next=="function")return I;if(!isNaN(I.length)){var H=-1,N=function D(){for(;++H<I.length;)if(s.call(I,H))return D.value=I[H],D.done=!1,D;return D.value=void 0,D.done=!0,D};return N.next=N}}return{next:O}}function O(){return{value:void 0,done:!0}}return k.prototype=c,l(E,"constructor",{value:c,configurable:!0}),l(c,"constructor",{value:k,configurable:!0}),k.displayName=m(c,p,"GeneratorFunction"),o.isGeneratorFunction=function(I){var j=typeof I=="function"&&I.constructor;return!!j&&(j===k||(j.displayName||j.name)==="GeneratorFunction")},o.mark=function(I){return Object.setPrototypeOf?Object.setPrototypeOf(I,c):(I.__proto__=c,m(I,p,"GeneratorFunction")),I.prototype=Object.create(E),I},o.awrap=function(I){return{__await:I}},T(C.prototype),m(C.prototype,h,function(){return this}),o.AsyncIterator=C,o.async=function(I,j,H,N,D){D===void 0&&(D=Promise);var K=new C(x(I,j,H,N),D);return o.isGeneratorFunction(j)?K:K.next().then(function(q){return q.done?q.value:K.next()})},T(E),m(E,p,"Generator"),m(E,u,function(){return this}),m(E,"toString",function(){return"[object Generator]"}),o.keys=function(I){var j=Object(I),H=[];for(var N in j)H.push(N);return H.reverse(),function D(){for(;H.length;){var K=H.pop();if(K in j)return D.value=K,D.done=!1,D}return D.done=!0,D}},o.values=M,P.prototype={constructor:P,reset:function(I){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(B),!I)for(var j in this)j.charAt(0)==="t"&&s.call(this,j)&&!isNaN(+j.slice(1))&&(this[j]=void 0)},stop:function(){this.done=!0;var I=this.tryEntries[0].completion;if(I.type==="throw")throw I.arg;return this.rval},dispatchException:function(I){if(this.done)throw I;var j=this;function H(G,Q){return K.type="throw",K.arg=I,j.next=G,Q&&(j.method="next",j.arg=void 0),!!Q}for(var N=this.tryEntries.length-1;N>=0;--N){var D=this.tryEntries[N],K=D.completion;if(D.tryLoc==="root")return H("end");if(D.tryLoc<=this.prev){var q=s.call(D,"catchLoc"),U=s.call(D,"finallyLoc");if(q&&U){if(this.prev<D.catchLoc)return H(D.catchLoc,!0);if(this.prev<D.finallyLoc)return H(D.finallyLoc)}else if(q){if(this.prev<D.catchLoc)return H(D.catchLoc,!0)}else{if(!U)throw new Error("try statement without catch or finally");if(this.prev<D.finallyLoc)return H(D.finallyLoc)}}}},abrupt:function(I,j){for(var H=this.tryEntries.length-1;H>=0;--H){var N=this.tryEntries[H];if(N.tryLoc<=this.prev&&s.call(N,"finallyLoc")&&this.prev<N.finallyLoc){var D=N;break}}D&&(I==="break"||I==="continue")&&D.tryLoc<=j&&j<=D.finallyLoc&&(D=null);var K=D?D.completion:{};return K.type=I,K.arg=j,D?(this.method="next",this.next=D.finallyLoc,v):this.complete(K)},complete:function(I,j){if(I.type==="throw")throw I.arg;return I.type==="break"||I.type==="continue"?this.next=I.arg:I.type==="return"?(this.rval=this.arg=I.arg,this.method="return",this.next="end"):I.type==="normal"&&j&&(this.next=j),v},finish:function(I){for(var j=this.tryEntries.length-1;j>=0;--j){var H=this.tryEntries[j];if(H.finallyLoc===I)return this.complete(H.completion,H.afterLoc),B(H),v}},catch:function(I){for(var j=this.tryEntries.length-1;j>=0;--j){var H=this.tryEntries[j];if(H.tryLoc===I){var N=H.completion;if(N.type==="throw"){var D=N.arg;B(H)}return D}}throw new Error("illegal catch attempt")},delegateYield:function(I,j,H){return this.delegate={iterator:M(I),resultName:j,nextLoc:H},this.method==="next"&&(this.arg=void 0),v}},o}r.exports=n,r.exports.__esModule=!0,r.exports.default=r.exports},function(r,t,e){var i=e(149);r.exports=function(n){if(Array.isArray(n))return i(n)},r.exports.__esModule=!0,r.exports.default=r.exports},function(r,t){r.exports=function(e){if(typeof Symbol!="undefined"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)},r.exports.__esModule=!0,r.exports.default=r.exports},function(r,t){r.exports=function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)},r.exports.__esModule=!0,r.exports.default=r.exports},function(r,t){r.exports=function(e,i,n){return i in e?Object.defineProperty(e,i,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[i]=n,e},r.exports.__esModule=!0,r.exports.default=r.exports},function(r,t){r.exports=function(e){return Function.toString.call(e).indexOf("[native code]")!==-1},r.exports.__esModule=!0,r.exports.default=r.exports},function(r,t,e){var i=e(111),n=e(375);function o(a,s,l){return n()?(r.exports=o=Reflect.construct.bind(),r.exports.__esModule=!0,r.exports.default=r.exports):(r.exports=o=function(d,u,h){var p=[null];p.push.apply(p,u);var m=new(Function.bind.apply(d,p));return h&&i(m,h.prototype),m},r.exports.__esModule=!0,r.exports.default=r.exports),o.apply(null,arguments)}r.exports=o,r.exports.__esModule=!0,r.exports.default=r.exports},function(r,t){r.exports=function(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}},r.exports.__esModule=!0,r.exports.default=r.exports},function(r,t,e){var i={"./api":83,"./api/":83,"./api/blocks":154,"./api/blocks.ts":154,"./api/caret":155,"./api/caret.ts":155,"./api/events":156,"./api/events.ts":156,"./api/i18n":157,"./api/i18n.ts":157,"./api/index":83,"./api/index.ts":83,"./api/inlineToolbar":158,"./api/inlineToolbar.ts":158,"./api/listeners":159,"./api/listeners.ts":159,"./api/notifier":160,"./api/notifier.ts":160,"./api/readonly":161,"./api/readonly.ts":161,"./api/sanitizer":162,"./api/sanitizer.ts":162,"./api/saver":163,"./api/saver.ts":163,"./api/selection":164,"./api/selection.ts":164,"./api/styles":165,"./api/styles.ts":165,"./api/toolbar":166,"./api/toolbar.ts":166,"./api/tooltip":167,"./api/tooltip.ts":167,"./api/ui":168,"./api/ui.ts":168,"./blockEvents":169,"./blockEvents.ts":169,"./blockManager":170,"./blockManager.ts":170,"./blockSelection":171,"./blockSelection.ts":171,"./caret":172,"./caret.ts":172,"./crossBlockSelection":173,"./crossBlockSelection.ts":173,"./dragNDrop":174,"./dragNDrop.ts":174,"./modificationsObserver":175,"./modificationsObserver.ts":175,"./paste":176,"./paste.ts":176,"./readonly":177,"./readonly.ts":177,"./rectangleSelection":178,"./rectangleSelection.ts":178,"./renderer":179,"./renderer.ts":179,"./saver":180,"./saver.ts":180,"./toolbar":84,"./toolbar/":84,"./toolbar/blockSettings":181,"./toolbar/blockSettings.ts":181,"./toolbar/conversion":182,"./toolbar/conversion.ts":182,"./toolbar/index":84,"./toolbar/index.ts":84,"./toolbar/inline":183,"./toolbar/inline.ts":183,"./tools":184,"./tools.ts":184,"./ui":186,"./ui.ts":186};function n(a){var s=o(a);return e(s)}function o(a){if(!e.o(i,a)){var s=new Error("Cannot find module '"+a+"'");throw s.code="MODULE_NOT_FOUND",s}return i[a]}n.keys=function(){return Object.keys(i)},n.resolve=o,r.exports=n,n.id=376},function(r,t,e){var i=e(4);r.exports=function(n,o){for(;!Object.prototype.hasOwnProperty.call(n,o)&&(n=i(n))!==null;);return n},r.exports.__esModule=!0,r.exports.default=r.exports},function(r,t,e){var i,n,o;n=[t,e(2),e(3),e(379)],(o=typeof(i=function(a,s,l,d){"use strict";var u=e(1);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,s=u(s),l=u(l),d=u(d);var h=function(){function p(){(0,s.default)(this,p)}return(0,l.default)(p,[{key:"show",value:function(m){d.default.show(m)}}]),p}();a.default=h,h.displayName="Notifier",r.exports=t.default})=="function"?i.apply(t,n):i)===void 0||(r.exports=o)},function(r,t,e){r.exports=function(i){var n={};function o(a){if(n[a])return n[a].exports;var s=n[a]={i:a,l:!1,exports:{}};return i[a].call(s.exports,s,s.exports,o),s.l=!0,s.exports}return o.m=i,o.c=n,o.d=function(a,s,l){o.o(a,s)||Object.defineProperty(a,s,{enumerable:!0,get:l})},o.r=function(a){typeof Symbol!="undefined"&&Symbol.toStringTag&&Object.defineProperty(a,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(a,"__esModule",{value:!0})},o.t=function(a,s){if(1&s&&(a=o(a)),8&s||4&s&&typeof a=="object"&&a&&a.__esModule)return a;var l=Object.create(null);if(o.r(l),Object.defineProperty(l,"default",{enumerable:!0,value:a}),2&s&&typeof a!="string")for(var d in a)o.d(l,d,function(u){return a[u]}.bind(null,d));return l},o.n=function(a){var s=a&&a.__esModule?function(){return a.default}:function(){return a};return o.d(s,"a",s),s},o.o=function(a,s){return Object.prototype.hasOwnProperty.call(a,s)},o.p="/",o(o.s=0)}([function(i,n,o){"use strict";o(1),i.exports=function(){var a=o(6),s=null;return{show:function(l){if(l.message){(function(){if(s)return!0;s=a.getWrapper(),document.body.appendChild(s)})();var d=null,u=l.time||8e3;switch(l.type){case"confirm":d=a.confirm(l);break;case"prompt":d=a.prompt(l);break;default:d=a.alert(l),window.setTimeout(function(){d.remove()},u)}s.appendChild(d),d.classList.add("cdx-notify--bounce-in")}}}}()},function(i,n,o){var a=o(2);typeof a=="string"&&(a=[[i.i,a,""]]),o(4)(a,{hmr:!0,transform:void 0,insertInto:void 0}),a.locals&&(i.exports=a.locals)},function(i,n,o){(i.exports=o(3)(!1)).push([i.i,`.cdx-notify--error{background:#fffbfb!important}.cdx-notify--error::before{background:#fb5d5d!important}.cdx-notify__input{max-width:130px;padding:5px 10px;background:#f7f7f7;border:0;border-radius:3px;font-size:13px;color:#656b7c;outline:0}.cdx-notify__input:-ms-input-placeholder{color:#656b7c}.cdx-notify__input::placeholder{color:#656b7c}.cdx-notify__input:focus:-ms-input-placeholder{color:rgba(101,107,124,.3)}.cdx-notify__input:focus::placeholder{color:rgba(101,107,124,.3)}.cdx-notify__button{border:none;border-radius:3px;font-size:13px;padding:5px 10px;cursor:pointer}.cdx-notify__button:last-child{margin-left:10px}.cdx-notify__button--cancel{background:#f2f5f7;box-shadow:0 2px 1px 0 rgba(16,19,29,0);color:#656b7c}.cdx-notify__button--cancel:hover{background:#eee}.cdx-notify__button--confirm{background:#34c992;box-shadow:0 1px 1px 0 rgba(18,49,35,.05);color:#fff}.cdx-notify__button--confirm:hover{background:#33b082}.cdx-notify__btns-wrapper{display:-ms-flexbox;display:flex;-ms-flex-flow:row nowrap;flex-flow:row nowrap;margin-top:5px}.cdx-notify__cross{position:absolute;top:5px;right:5px;width:10px;height:10px;padding:5px;opacity:.54;cursor:pointer}.cdx-notify__cross::after,.cdx-notify__cross::before{content:'';position:absolute;left:9px;top:5px;height:12px;width:2px;background:#575d67}.cdx-notify__cross::before{transform:rotate(-45deg)}.cdx-notify__cross::after{transform:rotate(45deg)}.cdx-notify__cross:hover{opacity:1}.cdx-notifies{position:fixed;z-index:2;bottom:20px;left:20px;font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Oxygen,Ubuntu,Cantarell,"Fira Sans","Droid Sans","Helvetica Neue",sans-serif}.cdx-notify{position:relative;width:220px;margin-top:15px;padding:13px 16px;background:#fff;box-shadow:0 11px 17px 0 rgba(23,32,61,.13);border-radius:5px;font-size:14px;line-height:1.4em;word-wrap:break-word}.cdx-notify::before{content:'';position:absolute;display:block;top:0;left:0;width:3px;height:calc(100% - 6px);margin:3px;border-radius:5px;background:0 0}@keyframes bounceIn{0%{opacity:0;transform:scale(.3)}50%{opacity:1;transform:scale(1.05)}70%{transform:scale(.9)}100%{transform:scale(1)}}.cdx-notify--bounce-in{animation-name:bounceIn;animation-duration:.6s;animation-iteration-count:1}.cdx-notify--success{background:#fafffe!important}.cdx-notify--success::before{background:#41ffb1!important}`,""])},function(i,n){i.exports=function(o){var a=[];return a.toString=function(){return this.map(function(s){var l=function(d,u){var h,p=d[1]||"",m=d[3];if(!m)return p;if(u&&typeof btoa=="function"){var x=(h=m,"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(h))))+" */"),y=m.sources.map(function(v){return"/*# sourceURL="+m.sourceRoot+v+" */"});return[p].concat(y).concat([x]).join(`
`)}return[p].join(`
`)}(s,o);return s[2]?"@media "+s[2]+"{"+l+"}":l}).join("")},a.i=function(s,l){typeof s=="string"&&(s=[[null,s,""]]);for(var d={},u=0;u<this.length;u++){var h=this[u][0];typeof h=="number"&&(d[h]=!0)}for(u=0;u<s.length;u++){var p=s[u];typeof p[0]=="number"&&d[p[0]]||(l&&!p[2]?p[2]=l:l&&(p[2]="("+p[2]+") and ("+l+")"),a.push(p))}},a}},function(i,n,o){var a,s,l={},d=(a=function(){return window&&document&&document.all&&!window.atob},function(){return s===void 0&&(s=a.apply(this,arguments)),s}),u=function(C){var S={};return function(A){if(typeof A=="function")return A();if(S[A]===void 0){var L=function(B){return document.querySelector(B)}.call(this,A);if(window.HTMLIFrameElement&&L instanceof window.HTMLIFrameElement)try{L=L.contentDocument.head}catch(B){L=null}S[A]=L}return S[A]}}(),h=null,p=0,m=[],x=o(5);function y(C,S){for(var A=0;A<C.length;A++){var L=C[A],B=l[L.id];if(B){B.refs++;for(var P=0;P<B.parts.length;P++)B.parts[P](L.parts[P]);for(;P<L.parts.length;P++)B.parts.push(g(L.parts[P],S))}else{var M=[];for(P=0;P<L.parts.length;P++)M.push(g(L.parts[P],S));l[L.id]={id:L.id,refs:1,parts:M}}}}function v(C,S){for(var A=[],L={},B=0;B<C.length;B++){var P=C[B],M=S.base?P[0]+S.base:P[0],O={css:P[1],media:P[2],sourceMap:P[3]};L[M]?L[M].parts.push(O):A.push(L[M]={id:M,parts:[O]})}return A}function w(C,S){var A=u(C.insertInto);if(!A)throw new Error("Couldn't find a style target. This probably means that the value for the 'insertInto' parameter is invalid.");var L=m[m.length-1];if(C.insertAt==="top")L?L.nextSibling?A.insertBefore(S,L.nextSibling):A.appendChild(S):A.insertBefore(S,A.firstChild),m.push(S);else if(C.insertAt==="bottom")A.appendChild(S);else{if(typeof C.insertAt!="object"||!C.insertAt.before)throw new Error(`[Style Loader]

 Invalid value for parameter 'insertAt' ('options.insertAt') found.
 Must be 'top', 'bottom', or Object.
 (https://github.com/webpack-contrib/style-loader#insertat)
`);var B=u(C.insertInto+" "+C.insertAt.before);A.insertBefore(S,B)}}function k(C){if(C.parentNode===null)return!1;C.parentNode.removeChild(C);var S=m.indexOf(C);S>=0&&m.splice(S,1)}function c(C){var S=document.createElement("style");return C.attrs.type===void 0&&(C.attrs.type="text/css"),_(S,C.attrs),w(C,S),S}function _(C,S){Object.keys(S).forEach(function(A){C.setAttribute(A,S[A])})}function g(C,S){var A,L,B,P;if(S.transform&&C.css){if(!(P=S.transform(C.css)))return function(){};C.css=P}if(S.singleton){var M=p++;A=h||(h=c(S)),L=T.bind(null,A,M,!1),B=T.bind(null,A,M,!0)}else C.sourceMap&&typeof URL=="function"&&typeof URL.createObjectURL=="function"&&typeof URL.revokeObjectURL=="function"&&typeof Blob=="function"&&typeof btoa=="function"?(A=function(O){var I=document.createElement("link");return O.attrs.type===void 0&&(O.attrs.type="text/css"),O.attrs.rel="stylesheet",_(I,O.attrs),w(O,I),I}(S),L=function(O,I,j){var H=j.css,N=j.sourceMap,D=I.convertToAbsoluteUrls===void 0&&N;(I.convertToAbsoluteUrls||D)&&(H=x(H)),N&&(H+=`
/*# sourceMappingURL=data:application/json;base64,`+btoa(unescape(encodeURIComponent(JSON.stringify(N))))+" */");var K=new Blob([H],{type:"text/css"}),q=O.href;O.href=URL.createObjectURL(K),q&&URL.revokeObjectURL(q)}.bind(null,A,S),B=function(){k(A),A.href&&URL.revokeObjectURL(A.href)}):(A=c(S),L=function(O,I){var j=I.css,H=I.media;if(H&&O.setAttribute("media",H),O.styleSheet)O.styleSheet.cssText=j;else{for(;O.firstChild;)O.removeChild(O.firstChild);O.appendChild(document.createTextNode(j))}}.bind(null,A),B=function(){k(A)});return L(C),function(O){if(O){if(O.css===C.css&&O.media===C.media&&O.sourceMap===C.sourceMap)return;L(C=O)}else B()}}i.exports=function(C,S){if(typeof DEBUG!="undefined"&&DEBUG&&typeof document!="object")throw new Error("The style-loader cannot be used in a non-browser environment");(S=S||{}).attrs=typeof S.attrs=="object"?S.attrs:{},S.singleton||typeof S.singleton=="boolean"||(S.singleton=d()),S.insertInto||(S.insertInto="head"),S.insertAt||(S.insertAt="bottom");var A=v(C,S);return y(A,S),function(L){for(var B=[],P=0;P<A.length;P++){var M=A[P];(O=l[M.id]).refs--,B.push(O)}for(L&&y(v(L,S),S),P=0;P<B.length;P++){var O;if((O=B[P]).refs===0){for(var I=0;I<O.parts.length;I++)O.parts[I]();delete l[O.id]}}}};var b,E=(b=[],function(C,S){return b[C]=S,b.filter(Boolean).join(`
`)});function T(C,S,A,L){var B=A?"":L.css;if(C.styleSheet)C.styleSheet.cssText=E(S,B);else{var P=document.createTextNode(B),M=C.childNodes;M[S]&&C.removeChild(M[S]),M.length?C.insertBefore(P,M[S]):C.appendChild(P)}}},function(i,n){i.exports=function(o){var a=typeof window!="undefined"&&window.location;if(!a)throw new Error("fixUrls requires window.location");if(!o||typeof o!="string")return o;var s=a.protocol+"//"+a.host,l=s+a.pathname.replace(/\/[^\/]*$/,"/");return o.replace(/url\s*\(((?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)\)/gi,function(d,u){var h,p=u.trim().replace(/^"(.*)"$/,function(m,x){return x}).replace(/^'(.*)'$/,function(m,x){return x});return/^(#|data:|http:\/\/|https:\/\/|file:\/\/\/|\s*$)/i.test(p)?d:(h=p.indexOf("//")===0?p:p.indexOf("/")===0?s+p:l+p.replace(/^\.\//,""),"url("+JSON.stringify(h)+")")})}},function(i,n,o){"use strict";var a,s,l,d,u,h;i.exports=(a="cdx-notify",s="cdx-notify__cross",l="cdx-notify__button--confirm",d="cdx-notify__button",u="cdx-notify__btns-wrapper",{alert:h=function(p){var m=document.createElement("DIV"),x=document.createElement("DIV"),y=p.message,v=p.style;return m.classList.add(a),v&&m.classList.add(a+"--"+v),m.innerHTML=y,x.classList.add(s),x.addEventListener("click",m.remove.bind(m)),m.appendChild(x),m},confirm:function(p){var m=h(p),x=document.createElement("div"),y=document.createElement("button"),v=document.createElement("button"),w=m.querySelector("."+s),k=p.cancelHandler,c=p.okHandler;return x.classList.add(u),y.innerHTML=p.okText||"Confirm",v.innerHTML=p.cancelText||"Cancel",y.classList.add(d),v.classList.add(d),y.classList.add(l),v.classList.add("cdx-notify__button--cancel"),k&&typeof k=="function"&&(v.addEventListener("click",k),w.addEventListener("click",k)),c&&typeof c=="function"&&y.addEventListener("click",c),y.addEventListener("click",m.remove.bind(m)),v.addEventListener("click",m.remove.bind(m)),x.appendChild(y),x.appendChild(v),m.appendChild(x),m},prompt:function(p){var m=h(p),x=document.createElement("div"),y=document.createElement("button"),v=document.createElement("input"),w=m.querySelector("."+s),k=p.cancelHandler,c=p.okHandler;return x.classList.add(u),y.innerHTML=p.okText||"Ok",y.classList.add(d),y.classList.add(l),v.classList.add("cdx-notify__input"),p.placeholder&&v.setAttribute("placeholder",p.placeholder),p.default&&(v.value=p.default),p.inputType&&(v.type=p.inputType),k&&typeof k=="function"&&w.addEventListener("click",k),c&&typeof c=="function"&&y.addEventListener("click",function(){c(v.value)}),y.addEventListener("click",m.remove.bind(m)),x.appendChild(v),x.appendChild(y),m.appendChild(x),m},getWrapper:function(){var p=document.createElement("DIV");return p.classList.add("cdx-notifies"),p}})}])},function(r,t,e){var i,n;(n=typeof(i=function(){function o(m){var x=m.tags;if(!Object.keys(x).map(function(y){return typeof x[y]}).every(function(y){return y==="object"||y==="boolean"||y==="function"}))throw new Error("The configuration was invalid");this.config=m}var a=["P","LI","TD","TH","DIV","H1","H2","H3","H4","H5","H6","PRE"];function s(m){return a.indexOf(m.nodeName)!==-1}var l=["A","B","STRONG","I","EM","SUB","SUP","U","STRIKE"];function d(m){return l.indexOf(m.nodeName)!==-1}function u(m,x,y){return typeof m.tags[x]=="function"?m.tags[x](y):m.tags[x]}function h(m,x){return x===void 0||typeof x=="boolean"&&!x}function p(m,x,y){var v=m.name.toLowerCase();return x!==!0&&(typeof x[v]=="function"?!x[v](m.value,y):x[v]===void 0||x[v]===!1||typeof x[v]=="string"&&x[v]!==m.value)}return o.prototype.clean=function(m){let x=document.implementation.createHTMLDocument(),y=x.createElement("div");return y.innerHTML=m,this._sanitize(x,y),y.innerHTML},o.prototype._sanitize=function(m,x){var y=function(C,S){return C.createTreeWalker(S,NodeFilter.SHOW_TEXT|NodeFilter.SHOW_ELEMENT|NodeFilter.SHOW_COMMENT,null,!1)}(m,x),v=y.firstChild();if(v)do if(v.nodeType!==Node.TEXT_NODE){if(v.nodeType===Node.COMMENT_NODE){x.removeChild(v),this._sanitize(m,x);break}var w,k=d(v);k&&(w=Array.prototype.some.call(v.childNodes,s));var c=!!x.parentNode,_=s(x)&&s(v)&&c,g=v.nodeName.toLowerCase(),b=u(this.config,g,v);if(k&&w||h(0,b)||!this.config.keepNestedBlockElements&&_){if(v.nodeName!=="SCRIPT"&&v.nodeName!=="STYLE")for(;v.childNodes.length>0;)x.insertBefore(v.childNodes[0],v);x.removeChild(v),this._sanitize(m,x);break}for(var E=0;E<v.attributes.length;E+=1){var T=v.attributes[E];p(T,b,v)&&(v.removeAttribute(T.name),E-=1)}this._sanitize(m,v)}else if(v.data.trim()===""&&(v.previousElementSibling&&s(v.previousElementSibling)||v.nextElementSibling&&s(v.nextElementSibling))){x.removeChild(v),this._sanitize(m,x);break}while(v=y.nextSibling())},o})=="function"?i.call(t,e,t,r):i)===void 0||(r.exports=n)},function(r,t,e){r.exports=function(i){var n={};function o(a){if(n[a])return n[a].exports;var s=n[a]={i:a,l:!1,exports:{}};return i[a].call(s.exports,s,s.exports,o),s.l=!0,s.exports}return o.m=i,o.c=n,o.d=function(a,s,l){o.o(a,s)||Object.defineProperty(a,s,{enumerable:!0,get:l})},o.r=function(a){typeof Symbol!="undefined"&&Symbol.toStringTag&&Object.defineProperty(a,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(a,"__esModule",{value:!0})},o.t=function(a,s){if(1&s&&(a=o(a)),8&s||4&s&&typeof a=="object"&&a&&a.__esModule)return a;var l=Object.create(null);if(o.r(l),Object.defineProperty(l,"default",{enumerable:!0,value:a}),2&s&&typeof a!="string")for(var d in a)o.d(l,d,function(u){return a[u]}.bind(null,d));return l},o.n=function(a){var s=a&&a.__esModule?function(){return a.default}:function(){return a};return o.d(s,"a",s),s},o.o=function(a,s){return Object.prototype.hasOwnProperty.call(a,s)},o.p="",o(o.s=0)}([function(i,n,o){i.exports=o(1)},function(i,n,o){"use strict";o.r(n),o.d(n,"default",function(){return a});class a{constructor(){this.nodes={wrapper:null,content:null},this.showed=!1,this.offsetTop=10,this.offsetLeft=10,this.offsetRight=10,this.hidingDelay=0,this.handleWindowScroll=()=>{this.showed&&this.hide(!0)},this.loadStyles(),this.prepare(),window.addEventListener("scroll",this.handleWindowScroll,{passive:!0})}get CSS(){return{tooltip:"ct",tooltipContent:"ct__content",tooltipShown:"ct--shown",placement:{left:"ct--left",bottom:"ct--bottom",right:"ct--right",top:"ct--top"}}}show(l,d,u){this.nodes.wrapper||this.prepare(),this.hidingTimeout&&clearTimeout(this.hidingTimeout);let h=Object.assign({placement:"bottom",marginTop:0,marginLeft:0,marginRight:0,marginBottom:0,delay:70,hidingDelay:0},u);if(h.hidingDelay&&(this.hidingDelay=h.hidingDelay),this.nodes.content.innerHTML="",typeof d=="string")this.nodes.content.appendChild(document.createTextNode(d));else{if(!(d instanceof Node))throw Error("[CodeX Tooltip] Wrong type of \xABcontent\xBB passed. It should be an instance of Node or String. But "+typeof d+" given.");this.nodes.content.appendChild(d)}switch(this.nodes.wrapper.classList.remove(...Object.values(this.CSS.placement)),h.placement){case"top":this.placeTop(l,h);break;case"left":this.placeLeft(l,h);break;case"right":this.placeRight(l,h);break;case"bottom":default:this.placeBottom(l,h)}h&&h.delay?this.showingTimeout=setTimeout(()=>{this.nodes.wrapper.classList.add(this.CSS.tooltipShown),this.showed=!0},h.delay):(this.nodes.wrapper.classList.add(this.CSS.tooltipShown),this.showed=!0)}hide(l=!1){if(this.hidingDelay&&!l)return this.hidingTimeout&&clearTimeout(this.hidingTimeout),void(this.hidingTimeout=setTimeout(()=>{this.hide(!0)},this.hidingDelay));this.nodes.wrapper.classList.remove(this.CSS.tooltipShown),this.showed=!1,this.showingTimeout&&clearTimeout(this.showingTimeout)}onHover(l,d,u){l.addEventListener("mouseenter",()=>{this.show(l,d,u)}),l.addEventListener("mouseleave",()=>{this.hide()})}destroy(){this.nodes.wrapper.remove(),window.removeEventListener("scroll",this.handleWindowScroll)}prepare(){this.nodes.wrapper=this.make("div",this.CSS.tooltip),this.nodes.content=this.make("div",this.CSS.tooltipContent),this.append(this.nodes.wrapper,this.nodes.content),this.append(document.body,this.nodes.wrapper)}loadStyles(){let l="codex-tooltips-style";if(document.getElementById(l))return;let d=o(2),u=this.make("style",null,{textContent:d.toString(),id:l});this.prepend(document.head,u)}placeBottom(l,d){let u=l.getBoundingClientRect(),h=u.left+l.clientWidth/2-this.nodes.wrapper.offsetWidth/2,p=u.bottom+window.pageYOffset+this.offsetTop+d.marginTop;this.applyPlacement("bottom",h,p)}placeTop(l,d){let u=l.getBoundingClientRect(),h=u.left+l.clientWidth/2-this.nodes.wrapper.offsetWidth/2,p=u.top+window.pageYOffset-this.nodes.wrapper.clientHeight-this.offsetTop;this.applyPlacement("top",h,p)}placeLeft(l,d){let u=l.getBoundingClientRect(),h=u.left-this.nodes.wrapper.offsetWidth-this.offsetLeft-d.marginLeft,p=u.top+window.pageYOffset+l.clientHeight/2-this.nodes.wrapper.offsetHeight/2;this.applyPlacement("left",h,p)}placeRight(l,d){let u=l.getBoundingClientRect(),h=u.right+this.offsetRight+d.marginRight,p=u.top+window.pageYOffset+l.clientHeight/2-this.nodes.wrapper.offsetHeight/2;this.applyPlacement("right",h,p)}applyPlacement(l,d,u){this.nodes.wrapper.classList.add(this.CSS.placement[l]),this.nodes.wrapper.style.left=d+"px",this.nodes.wrapper.style.top=u+"px"}make(l,d=null,u={}){let h=document.createElement(l);Array.isArray(d)?h.classList.add(...d):d&&h.classList.add(d);for(let p in u)u.hasOwnProperty(p)&&(h[p]=u[p]);return h}append(l,d){Array.isArray(d)?d.forEach(u=>l.appendChild(u)):l.appendChild(d)}prepend(l,d){Array.isArray(d)?(d=d.reverse()).forEach(u=>l.prepend(u)):l.prepend(d)}}},function(i,n){i.exports=`.ct{z-index:999;opacity:0;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;pointer-events:none;-webkit-transition:opacity 50ms ease-in,-webkit-transform 70ms cubic-bezier(.215,.61,.355,1);transition:opacity 50ms ease-in,-webkit-transform 70ms cubic-bezier(.215,.61,.355,1);transition:opacity 50ms ease-in,transform 70ms cubic-bezier(.215,.61,.355,1);transition:opacity 50ms ease-in,transform 70ms cubic-bezier(.215,.61,.355,1),-webkit-transform 70ms cubic-bezier(.215,.61,.355,1);will-change:opacity,top,left;-webkit-box-shadow:0 8px 12px 0 rgba(29,32,43,.17),0 4px 5px -3px rgba(5,6,12,.49);box-shadow:0 8px 12px 0 rgba(29,32,43,.17),0 4px 5px -3px rgba(5,6,12,.49);border-radius:9px}.ct,.ct:before{position:absolute;top:0;left:0}.ct:before{content:"";bottom:0;right:0;background-color:#1d202b;z-index:-1;border-radius:4px}@supports(-webkit-mask-box-image:url("")){.ct:before{border-radius:0;-webkit-mask-box-image:url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24"><path d="M10.71 0h2.58c3.02 0 4.64.42 6.1 1.2a8.18 8.18 0 013.4 3.4C23.6 6.07 24 7.7 24 10.71v2.58c0 3.02-.42 4.64-1.2 6.1a8.18 8.18 0 01-3.4 3.4c-1.47.8-3.1 1.21-6.11 1.21H10.7c-3.02 0-4.64-.42-6.1-1.2a8.18 8.18 0 01-3.4-3.4C.4 17.93 0 16.3 0 13.29V10.7c0-3.02.42-4.64 1.2-6.1a8.18 8.18 0 013.4-3.4C6.07.4 7.7 0 10.71 0z"/></svg>') 48% 41% 37.9% 53.3%}}@media (--mobile){.ct{display:none}}.ct__content{padding:6px 10px;color:#cdd1e0;font-size:12px;text-align:center;letter-spacing:.02em;line-height:1em}.ct:after{content:"";width:8px;height:8px;position:absolute;background-color:#1d202b;z-index:-1}.ct--bottom{-webkit-transform:translateY(5px);transform:translateY(5px)}.ct--bottom:after{top:-3px;left:50%;-webkit-transform:translateX(-50%) rotate(-45deg);transform:translateX(-50%) rotate(-45deg)}.ct--top{-webkit-transform:translateY(-5px);transform:translateY(-5px)}.ct--top:after{top:auto;bottom:-3px;left:50%;-webkit-transform:translateX(-50%) rotate(-45deg);transform:translateX(-50%) rotate(-45deg)}.ct--left{-webkit-transform:translateX(-5px);transform:translateX(-5px)}.ct--left:after{top:50%;left:auto;right:0;-webkit-transform:translate(41.6%,-50%) rotate(-45deg);transform:translate(41.6%,-50%) rotate(-45deg)}.ct--right{-webkit-transform:translateX(5px);transform:translateX(5px)}.ct--right:after{top:50%;left:0;-webkit-transform:translate(-41.6%,-50%) rotate(-45deg);transform:translate(-41.6%,-50%) rotate(-45deg)}.ct--shown{opacity:1;-webkit-transform:none;transform:none}`}]).default},function(r,t,e){var i,n,o,a=e(7);n=[t,e(2),e(3),e(19),e(8),e(25)],(o=typeof(i=function(s,l,d,u,h,p){"use strict";var m=e(1);function x(v){if(typeof WeakMap!="function")return null;var w=new WeakMap,k=new WeakMap;return(x=function(c){return c?k:w})(v)}Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0,l=m(l),d=m(d),u=m(u),h=function(v,w){if(!w&&v&&v.__esModule)return v;if(v===null||a(v)!=="object"&&typeof v!="function")return{default:v};var k=x(w);if(k&&k.has(v))return k.get(v);var c={},_=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var g in v)if(g!=="default"&&Object.prototype.hasOwnProperty.call(v,g)){var b=_?Object.getOwnPropertyDescriptor(v,g):null;b&&(b.get||b.set)?Object.defineProperty(c,g,b):c[g]=v[g]}return c.default=v,k&&k.set(v,c),c}(h),p=m(p);var y=function(){function v(w,k){(0,l.default)(this,v),this.cursor=-1,this.items=[],this.items=w||[],this.focusedCssClass=k}return(0,d.default)(v,[{key:"currentItem",get:function(){return this.cursor===-1?null:this.items[this.cursor]}},{key:"setCursor",value:function(w){w<this.items.length&&w>=-1&&(this.dropCursor(),this.cursor=w,this.items[this.cursor].classList.add(this.focusedCssClass))}},{key:"setItems",value:function(w){this.items=w}},{key:"next",value:function(){this.cursor=this.leafNodesAndReturnIndex(v.directions.RIGHT)}},{key:"previous",value:function(){this.cursor=this.leafNodesAndReturnIndex(v.directions.LEFT)}},{key:"dropCursor",value:function(){this.cursor!==-1&&(this.items[this.cursor].classList.remove(this.focusedCssClass),this.cursor=-1)}},{key:"leafNodesAndReturnIndex",value:function(w){var k=this;if(this.items.length===0)return this.cursor;var c=this.cursor;return c===-1?c=w===v.directions.RIGHT?-1:0:this.items[c].classList.remove(this.focusedCssClass),c=w===v.directions.RIGHT?(c+1)%this.items.length:(this.items.length+c-1)%this.items.length,u.default.canSetCaret(this.items[c])&&h.delay(function(){return p.default.setCursor(k.items[c])},50)(),this.items[c].classList.add(this.focusedCssClass),c}}]),v}();s.default=y,y.displayName="DomIterator",y.directions={RIGHT:"right",LEFT:"left"},r.exports=t.default})=="function"?i.apply(t,n):i)===void 0||(r.exports=o)},function(r,t,e){var i,n,o,a=e(7);n=[t,e(2),e(3),e(8),e(19),e(61)],(o=typeof(i=function(s,l,d,u,h,p){"use strict";var m=e(1);function x(v){if(typeof WeakMap!="function")return null;var w=new WeakMap,k=new WeakMap;return(x=function(c){return c?k:w})(v)}Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0,l=m(l),d=m(d),u=function(v,w){if(!w&&v&&v.__esModule)return v;if(v===null||a(v)!=="object"&&typeof v!="function")return{default:v};var k=x(w);if(k&&k.has(v))return k.get(v);var c={},_=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var g in v)if(g!=="default"&&Object.prototype.hasOwnProperty.call(v,g)){var b=_?Object.getOwnPropertyDescriptor(v,g):null;b&&(b.get||b.set)?Object.defineProperty(c,g,b):c[g]=v[g]}return c.default=v,k&&k.set(v,c),c}(u),h=m(h);var y=function(){function v(w){(0,l.default)(this,v),this.blocks=[],this.workingArea=w}return(0,d.default)(v,[{key:"length",get:function(){return this.blocks.length}},{key:"array",get:function(){return this.blocks}},{key:"nodes",get:function(){return u.array(this.workingArea.children)}},{key:"push",value:function(w){this.blocks.push(w),this.insertToDOM(w)}},{key:"swap",value:function(w,k){var c=this.blocks[k];h.default.swap(this.blocks[w].holder,c.holder),this.blocks[k]=this.blocks[w],this.blocks[w]=c}},{key:"move",value:function(w,k){var c=this.blocks.splice(k,1)[0],_=w-1,g=Math.max(0,_),b=this.blocks[g];w>0?this.insertToDOM(c,"afterend",b):this.insertToDOM(c,"beforebegin",b),this.blocks.splice(w,0,c);var E=this.composeBlockEvent("move",{fromIndex:k,toIndex:w});c.call(p.BlockToolAPI.MOVED,E)}},{key:"insert",value:function(w,k){var c=arguments.length>2&&arguments[2]!==void 0&&arguments[2];if(this.length){w>this.length&&(w=this.length),c&&(this.blocks[w].holder.remove(),this.blocks[w].call(p.BlockToolAPI.REMOVED));var _=c?1:0;if(this.blocks.splice(w,_,k),w>0){var g=this.blocks[w-1];this.insertToDOM(k,"afterend",g)}else{var b=this.blocks[w+1];b?this.insertToDOM(k,"beforebegin",b):this.insertToDOM(k)}}else this.push(k)}},{key:"remove",value:function(w){isNaN(w)&&(w=this.length-1),this.blocks[w].holder.remove(),this.blocks[w].call(p.BlockToolAPI.REMOVED),this.blocks.splice(w,1)}},{key:"removeAll",value:function(){this.workingArea.innerHTML="",this.blocks.forEach(function(w){return w.call(p.BlockToolAPI.REMOVED)}),this.blocks.length=0}},{key:"insertAfter",value:function(w,k){var c=this.blocks.indexOf(w);this.insert(c+1,k)}},{key:"get",value:function(w){return this.blocks[w]}},{key:"indexOf",value:function(w){return this.blocks.indexOf(w)}},{key:"insertToDOM",value:function(w,k,c){k?c.holder.insertAdjacentElement(k,w.holder):this.workingArea.appendChild(w.holder),w.call(p.BlockToolAPI.RENDERED)}},{key:"composeBlockEvent",value:function(w,k){return new CustomEvent(w,{detail:k})}}],[{key:"set",value:function(w,k,c){return isNaN(Number(k))?(Reflect.set(w,k,c),!0):(w.insert(+k,c),!0)}},{key:"get",value:function(w,k){return isNaN(Number(k))?Reflect.get(w,k):w.get(+k)}}]),v}();s.default=y,y.displayName="Blocks",r.exports=t.default})=="function"?i.apply(t,n):i)===void 0||(r.exports=o)},function(r,t,e){var i,n,o;n=[t],(o=typeof(i=function(a){"use strict";var s;Object.defineProperty(a,"__esModule",{value:!0}),a.BlockMutationType=void 0,a.BlockMutationType=s,function(l){l.Added="block-added",l.Removed="block-removed",l.Moved="block-moved",l.Changed="block-changed"}(s||(a.BlockMutationType=s={}))})=="function"?i.apply(t,n):i)===void 0||(r.exports=o)},function(r,t,e){r.exports=function(i){var n={};function o(a){if(n[a])return n[a].exports;var s=n[a]={i:a,l:!1,exports:{}};return i[a].call(s.exports,s,s.exports,o),s.l=!0,s.exports}return o.m=i,o.c=n,o.d=function(a,s,l){o.o(a,s)||Object.defineProperty(a,s,{enumerable:!0,get:l})},o.r=function(a){typeof Symbol!="undefined"&&Symbol.toStringTag&&Object.defineProperty(a,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(a,"__esModule",{value:!0})},o.t=function(a,s){if(1&s&&(a=o(a)),8&s||4&s&&typeof a=="object"&&a&&a.__esModule)return a;var l=Object.create(null);if(o.r(l),Object.defineProperty(l,"default",{enumerable:!0,value:a}),2&s&&typeof a!="string")for(var d in a)o.d(l,d,function(u){return a[u]}.bind(null,d));return l},o.n=function(a){var s=a&&a.__esModule?function(){return a.default}:function(){return a};return o.d(s,"a",s),s},o.o=function(a,s){return Object.prototype.hasOwnProperty.call(a,s)},o.p="",o(o.s=0)}([function(i,n,o){"use strict";function a(d,u){for(var h=0;h<u.length;h++){var p=u[h];p.enumerable=p.enumerable||!1,p.configurable=!0,"value"in p&&(p.writable=!0),Object.defineProperty(d,p.key,p)}}function s(d,u,h){return u&&a(d.prototype,u),h&&a(d,h),d}o.r(n);var l=function(){function d(u){var h=this;(function(p,m){if(!(p instanceof m))throw new TypeError("Cannot call a class as a function")})(this,d),this.commands={},this.keys={},this.name=u.name,this.parseShortcutName(u.name),this.element=u.on,this.callback=u.callback,this.executeShortcut=function(p){h.execute(p)},this.element.addEventListener("keydown",this.executeShortcut,!1)}return s(d,null,[{key:"supportedCommands",get:function(){return{SHIFT:["SHIFT"],CMD:["CMD","CONTROL","COMMAND","WINDOWS","CTRL"],ALT:["ALT","OPTION"]}}},{key:"keyCodes",get:function(){return{0:48,1:49,2:50,3:51,4:52,5:53,6:54,7:55,8:56,9:57,A:65,B:66,C:67,D:68,E:69,F:70,G:71,H:72,I:73,J:74,K:75,L:76,M:77,N:78,O:79,P:80,Q:81,R:82,S:83,T:84,U:85,V:86,W:87,X:88,Y:89,Z:90,BACKSPACE:8,ENTER:13,ESCAPE:27,LEFT:37,UP:38,RIGHT:39,DOWN:40,INSERT:45,DELETE:46,".":190}}}]),s(d,[{key:"parseShortcutName",value:function(u){u=u.split("+");for(var h=0;h<u.length;h++){u[h]=u[h].toUpperCase();var p=!1;for(var m in d.supportedCommands)if(d.supportedCommands[m].includes(u[h])){p=this.commands[m]=!0;break}p||(this.keys[u[h]]=!0)}for(var x in d.supportedCommands)this.commands[x]||(this.commands[x]=!1)}},{key:"execute",value:function(u){var h,p={CMD:u.ctrlKey||u.metaKey,SHIFT:u.shiftKey,ALT:u.altKey},m=!0;for(h in this.commands)this.commands[h]!==p[h]&&(m=!1);var x,y=!0;for(x in this.keys)y=y&&u.keyCode===d.keyCodes[x];m&&y&&this.callback(u)}},{key:"remove",value:function(){this.element.removeEventListener("keydown",this.executeShortcut)}}]),d}();n.default=l}]).default},function(r,t,e){var i,n,o,a=e(7);n=[t,e(20),e(21),e(2),e(3),e(114),e(5),e(6),e(4),e(7),e(8),e(61),e(116),e(82),e(85),e(54),e(68)],(o=typeof(i=function(s,l,d,u,h,p,m,x,y,v,w,k,c,_,g,b,E){"use strict";var T=e(1);function C(M){if(typeof WeakMap!="function")return null;var O=new WeakMap,I=new WeakMap;return(C=function(j){return j?I:O})(M)}function S(M,O){if(!O&&M&&M.__esModule)return M;if(M===null||a(M)!=="object"&&typeof M!="function")return{default:M};var I=C(O);if(I&&I.has(M))return I.get(M);var j={},H=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var N in M)if(N!=="default"&&Object.prototype.hasOwnProperty.call(M,N)){var D=H?Object.getOwnPropertyDescriptor(M,N):null;D&&(D.get||D.set)?Object.defineProperty(j,N,D):j[N]=M[N]}return j.default=M,I&&I.set(M,j),j}function A(M){var O=function(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(I){return!1}}();return function(){var I,j=(0,y.default)(M);if(O){var H=(0,y.default)(this).constructor;I=Reflect.construct(j,arguments,H)}else I=j.apply(this,arguments);return(0,x.default)(this,I)}}Object.defineProperty(s,"__esModule",{value:!0}),s.default=s.ToolboxEvent=void 0,l=T(l),d=T(d),u=T(u),h=T(h),p=T(p),m=T(m),x=T(x),y=T(y),v=T(v),w=S(w),c=T(c),_=T(_),g=S(g),b=T(b);var L,B=function(M,O,I,j){var H,N=arguments.length,D=N<3?O:j===null?j=Object.getOwnPropertyDescriptor(O,I):j;if((typeof Reflect=="undefined"?"undefined":(0,v.default)(Reflect))==="object"&&typeof Reflect.decorate=="function")D=Reflect.decorate(M,O,I,j);else for(var K=M.length-1;K>=0;K--)(H=M[K])&&(D=(N<3?H(D):N>3?H(O,I,D):H(O,I))||D);return N>3&&D&&Object.defineProperty(O,I,D),D};s.ToolboxEvent=L,function(M){M.Opened="toolbox-opened",M.Closed="toolbox-closed",M.BlockAdded="toolbox-block-added"}(L||(s.ToolboxEvent=L={}));var P=function(M){(0,m.default)(j,M);var O,I=A(j);function j(H){var N,D=H.api,K=H.tools,q=H.i18nLabels;return(0,u.default)(this,j),(N=I.call(this)).opened=!1,N.nodes={toolbox:null},N.onOverlayClicked=function(){N.close()},N.api=D,N.tools=K,N.i18nLabels=q,N}return(0,h.default)(j,[{key:"isEmpty",get:function(){return this.toolsToBeDisplayed.length===0}},{key:"make",value:function(){return this.popover=new g.default({scopeElement:this.api.ui.nodes.redactor,className:j.CSS.toolbox,searchable:!0,filterLabel:this.i18nLabels.filter,nothingFoundLabel:this.i18nLabels.nothingFound,items:this.toolboxItemsToBeDisplayed}),this.popover.on(g.PopoverEvent.OverlayClicked,this.onOverlayClicked),this.enableShortcuts(),this.nodes.toolbox=this.popover.getElement(),this.nodes.toolbox}},{key:"hasFocus",value:function(){var H;return(H=this.popover)===null||H===void 0?void 0:H.hasFocus()}},{key:"destroy",value:function(){var H;(0,p.default)((0,y.default)(j.prototype),"destroy",this).call(this),this.nodes&&this.nodes.toolbox&&(this.nodes.toolbox.remove(),this.nodes.toolbox=null),this.removeAllShortcuts(),(H=this.popover)===null||H===void 0||H.off(g.PopoverEvent.OverlayClicked,this.onOverlayClicked)}},{key:"toolButtonActivated",value:function(H,N){this.insertNewBlock(H,N)}},{key:"open",value:function(){var H;this.isEmpty||((H=this.popover)===null||H===void 0||H.show(),this.opened=!0,this.emit(L.Opened))}},{key:"close",value:function(){var H;(H=this.popover)===null||H===void 0||H.hide(),this.opened=!1,this.emit(L.Closed)}},{key:"toggle",value:function(){this.opened?this.close():this.open()}},{key:"toolsToBeDisplayed",get:function(){var H=[];return this.tools.forEach(function(N){N.toolbox&&H.push(N)}),H}},{key:"toolboxItemsToBeDisplayed",get:function(){var H=this,N=function(D,K){return{icon:D.icon,label:b.default.t(E.I18nInternalNS.toolNames,D.title||w.capitalize(K.name)),name:K.name,onActivate:function(){H.toolButtonActivated(K.name,D.data)},secondaryLabel:K.shortcut?w.beautifyShortcut(K.shortcut):""}};return this.toolsToBeDisplayed.reduce(function(D,K){return Array.isArray(K.toolbox)?K.toolbox.forEach(function(q){D.push(N(q,K))}):K.toolbox!==void 0&&D.push(N(K.toolbox,K)),D},[])}},{key:"enableShortcuts",value:function(){var H=this;this.toolsToBeDisplayed.forEach(function(N){var D=N.shortcut;D&&H.enableShortcutForTool(N.name,D)})}},{key:"enableShortcutForTool",value:function(H,N){var D=this;c.default.add({name:N,on:this.api.ui.nodes.redactor,handler:function(K){K.preventDefault(),D.insertNewBlock(H)}})}},{key:"removeAllShortcuts",value:function(){var H=this;this.toolsToBeDisplayed.forEach(function(N){var D=N.shortcut;D&&c.default.remove(H.api.ui.nodes.redactor,D)})}},{key:"insertNewBlock",value:(O=(0,d.default)(l.default.mark(function H(N,D){var K,q,U,G,Q,X;return l.default.wrap(function(ie){for(;;)switch(ie.prev=ie.next){case 0:if(K=this.api.blocks.getCurrentBlockIndex(),q=this.api.blocks.getBlockByIndex(K)){ie.next=4;break}return ie.abrupt("return");case 4:if(U=q.isEmpty?K:K+1,!D){ie.next=10;break}return ie.next=8,this.api.blocks.composeBlockData(N);case 8:Q=ie.sent,G=Object.assign(Q,D);case 10:(X=this.api.blocks.insert(N,G,void 0,U,void 0,q.isEmpty)).call(k.BlockToolAPI.APPEND_CALLBACK),this.api.caret.setToBlock(U),this.emit(L.BlockAdded,{block:X}),this.api.toolbar.close();case 15:case"end":return ie.stop()}},H,this)})),function(H,N){return O.apply(this,arguments)})}],[{key:"CSS",get:function(){return{toolbox:"ce-toolbox"}}}]),j}(_.default);s.default=P,P.displayName="Toolbox",B([w.cacheable],P.prototype,"toolsToBeDisplayed",null),B([w.cacheable],P.prototype,"toolboxItemsToBeDisplayed",null)})=="function"?i.apply(t,n):i)===void 0||(r.exports=o)},function(r,t,e){var i,n,o;n=[t,e(2),e(3),e(19),e(112),e(41)],(o=typeof(i=function(a,s,l,d,u,h){"use strict";var p=e(1);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,s=p(s),l=p(l),d=p(d),u=p(u);var m=function(){function x(y){var v=y.items,w=y.onSearch,k=y.placeholder;(0,s.default)(this,x),this.listeners=new u.default,this.items=v,this.onSearch=w,this.render(k)}return(0,l.default)(x,[{key:"getElement",value:function(){return this.wrapper}},{key:"focus",value:function(){this.input.focus()}},{key:"clear",value:function(){this.input.value="",this.searchQuery="",this.onSearch(this.foundItems)}},{key:"destroy",value:function(){this.listeners.removeAll()}},{key:"render",value:function(y){var v=this;this.wrapper=d.default.make("div",x.CSS.wrapper);var w=d.default.make("div",x.CSS.icon,{innerHTML:h.IconSearch});this.input=d.default.make("input",x.CSS.input,{placeholder:y}),this.wrapper.appendChild(w),this.wrapper.appendChild(this.input),this.listeners.on(this.input,"input",function(){v.searchQuery=v.input.value,v.onSearch(v.foundItems)})}},{key:"foundItems",get:function(){var y=this;return this.items.filter(function(v){return y.checkItem(v)})}},{key:"checkItem",value:function(y){var v=y.label.toLowerCase(),w=this.searchQuery.toLowerCase();return v.includes(w)}}],[{key:"CSS",get:function(){return{wrapper:"cdx-search-field",icon:"cdx-search-field__icon",input:"cdx-search-field__input"}}}]),x}();a.default=m,m.displayName="SearchInput",r.exports=t.default})=="function"?i.apply(t,n):i)===void 0||(r.exports=o)},function(r,t,e){var i,n,o;n=[t,e(2),e(3),e(8)],(o=typeof(i=function(a,s,l,d){"use strict";var u=e(1);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,s=u(s),l=u(l);var h=function(){function p(){(0,s.default)(this,p)}return(0,l.default)(p,[{key:"lock",value:function(){d.isIosDevice?this.lockHard():document.body.classList.add(p.CSS.scrollLocked)}},{key:"unlock",value:function(){d.isIosDevice?this.unlockHard():document.body.classList.remove(p.CSS.scrollLocked)}},{key:"lockHard",value:function(){this.scrollPosition=window.pageYOffset,document.documentElement.style.setProperty("--window-scroll-offset","".concat(this.scrollPosition,"px")),document.body.classList.add(p.CSS.scrollLockedHard)}},{key:"unlockHard",value:function(){document.body.classList.remove(p.CSS.scrollLockedHard),this.scrollPosition!==null&&window.scrollTo(0,this.scrollPosition),this.scrollPosition=null}}]),p}();a.default=h,h.displayName="ScrollLocker",h.CSS={scrollLocked:"ce-scroll-locked",scrollLockedHard:"ce-scroll-locked--hard"},r.exports=t.default})=="function"?i.apply(t,n):i)===void 0||(r.exports=o)},function(r,t,e){r.exports=function(i){var n={};function o(a){if(n[a])return n[a].exports;var s=n[a]={i:a,l:!1,exports:{}};return i[a].call(s.exports,s,s.exports,o),s.l=!0,s.exports}return o.m=i,o.c=n,o.d=function(a,s,l){o.o(a,s)||Object.defineProperty(a,s,{enumerable:!0,get:l})},o.r=function(a){typeof Symbol!="undefined"&&Symbol.toStringTag&&Object.defineProperty(a,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(a,"__esModule",{value:!0})},o.t=function(a,s){if(1&s&&(a=o(a)),8&s||4&s&&typeof a=="object"&&a&&a.__esModule)return a;var l=Object.create(null);if(o.r(l),Object.defineProperty(l,"default",{enumerable:!0,value:a}),2&s&&typeof a!="string")for(var d in a)o.d(l,d,function(u){return a[u]}.bind(null,d));return l},o.n=function(a){var s=a&&a.__esModule?function(){return a.default}:function(){return a};return o.d(s,"a",s),s},o.o=function(a,s){return Object.prototype.hasOwnProperty.call(a,s)},o.p="/",o(o.s=4)}([function(i,n,o){var a=o(1),s=o(2);typeof(s=s.__esModule?s.default:s)=="string"&&(s=[[i.i,s,""]]),a(s,{insert:"head",singleton:!1}),i.exports=s.locals||{}},function(i,n,o){"use strict";var a,s=function(){var c={};return function(_){if(c[_]===void 0){var g=document.querySelector(_);if(window.HTMLIFrameElement&&g instanceof window.HTMLIFrameElement)try{g=g.contentDocument.head}catch(b){g=null}c[_]=g}return c[_]}}(),l=[];function d(c){for(var _=-1,g=0;g<l.length;g++)if(l[g].identifier===c){_=g;break}return _}function u(c,_){for(var g={},b=[],E=0;E<c.length;E++){var T=c[E],C=_.base?T[0]+_.base:T[0],S=g[C]||0,A="".concat(C," ").concat(S);g[C]=S+1;var L=d(A),B={css:T[1],media:T[2],sourceMap:T[3]};L!==-1?(l[L].references++,l[L].updater(B)):l.push({identifier:A,updater:k(B,_),references:1}),b.push(A)}return b}function h(c){var _=document.createElement("style"),g=c.attributes||{};if(g.nonce===void 0){var b=o.nc;b&&(g.nonce=b)}if(Object.keys(g).forEach(function(T){_.setAttribute(T,g[T])}),typeof c.insert=="function")c.insert(_);else{var E=s(c.insert||"head");if(!E)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");E.appendChild(_)}return _}var p,m=(p=[],function(c,_){return p[c]=_,p.filter(Boolean).join(`
`)});function x(c,_,g,b){var E=g?"":b.media?"@media ".concat(b.media," {").concat(b.css,"}"):b.css;if(c.styleSheet)c.styleSheet.cssText=m(_,E);else{var T=document.createTextNode(E),C=c.childNodes;C[_]&&c.removeChild(C[_]),C.length?c.insertBefore(T,C[_]):c.appendChild(T)}}function y(c,_,g){var b=g.css,E=g.media,T=g.sourceMap;if(E?c.setAttribute("media",E):c.removeAttribute("media"),T&&btoa&&(b+=`
/*# sourceMappingURL=data:application/json;base64,`.concat(btoa(unescape(encodeURIComponent(JSON.stringify(T))))," */")),c.styleSheet)c.styleSheet.cssText=b;else{for(;c.firstChild;)c.removeChild(c.firstChild);c.appendChild(document.createTextNode(b))}}var v=null,w=0;function k(c,_){var g,b,E;if(_.singleton){var T=w++;g=v||(v=h(_)),b=x.bind(null,g,T,!1),E=x.bind(null,g,T,!0)}else g=h(_),b=y.bind(null,g,_),E=function(){(function(C){if(C.parentNode===null)return!1;C.parentNode.removeChild(C)})(g)};return b(c),function(C){if(C){if(C.css===c.css&&C.media===c.media&&C.sourceMap===c.sourceMap)return;b(c=C)}else E()}}i.exports=function(c,_){(_=_||{}).singleton||typeof _.singleton=="boolean"||(_.singleton=(a===void 0&&(a=Boolean(window&&document&&document.all&&!window.atob)),a));var g=u(c=c||[],_);return function(b){if(b=b||[],Object.prototype.toString.call(b)==="[object Array]"){for(var E=0;E<g.length;E++){var T=d(g[E]);l[T].references--}for(var C=u(b,_),S=0;S<g.length;S++){var A=d(g[S]);l[A].references===0&&(l[A].updater(),l.splice(A,1))}g=C}}}},function(i,n,o){(n=o(3)(!1)).push([i.i,`.ce-paragraph {
    line-height: 1.6em;
    outline: none;
}

.ce-paragraph[data-placeholder]:empty::before{
  content: attr(data-placeholder);
  color: #707684;
  font-weight: normal;
  opacity: 0;
}

/** Show placeholder at the first paragraph if Editor is empty */
.codex-editor--empty .ce-block:first-child .ce-paragraph[data-placeholder]:empty::before {
  opacity: 1;
}

.codex-editor--toolbox-opened .ce-block:first-child .ce-paragraph[data-placeholder]:empty::before,
.codex-editor--empty .ce-block:first-child .ce-paragraph[data-placeholder]:empty:focus::before {
  opacity: 0;
}

.ce-paragraph p:first-of-type{
    margin-top: 0;
}

.ce-paragraph p:last-of-type{
    margin-bottom: 0;
}
`,""]),i.exports=n},function(i,n,o){"use strict";i.exports=function(a){var s=[];return s.toString=function(){return this.map(function(l){var d=function(u,h){var p,m,x,y=u[1]||"",v=u[3];if(!v)return y;if(h&&typeof btoa=="function"){var w=(p=v,m=btoa(unescape(encodeURIComponent(JSON.stringify(p)))),x="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(m),"/*# ".concat(x," */")),k=v.sources.map(function(c){return"/*# sourceURL=".concat(v.sourceRoot||"").concat(c," */")});return[y].concat(k).concat([w]).join(`
`)}return[y].join(`
`)}(l,a);return l[2]?"@media ".concat(l[2]," {").concat(d,"}"):d}).join("")},s.i=function(l,d,u){typeof l=="string"&&(l=[[null,l,""]]);var h={};if(u)for(var p=0;p<this.length;p++){var m=this[p][0];m!=null&&(h[m]=!0)}for(var x=0;x<l.length;x++){var y=[].concat(l[x]);u&&h[y[0]]||(d&&(y[2]?y[2]="".concat(d," and ").concat(y[2]):y[2]=d),s.push(y))}},s}},function(i,n,o){"use strict";function a(d,u){for(var h=0;h<u.length;h++){var p=u[h];p.enumerable=p.enumerable||!1,p.configurable=!0,"value"in p&&(p.writable=!0),Object.defineProperty(d,p.key,p)}}function s(d,u,h){return u&&a(d.prototype,u),h&&a(d,h),d}o.r(n),o.d(n,"default",function(){return l}),o(0);var l=function(){function d(u){var h=u.data,p=u.config,m=u.api,x=u.readOnly;(function(y,v){if(!(y instanceof v))throw new TypeError("Cannot call a class as a function")})(this,d),this.api=m,this.readOnly=x,this._CSS={block:this.api.styles.block,wrapper:"ce-paragraph"},this.readOnly||(this.onKeyUp=this.onKeyUp.bind(this)),this._placeholder=p.placeholder?p.placeholder:d.DEFAULT_PLACEHOLDER,this._data={},this._element=this.drawView(),this._preserveBlank=p.preserveBlank!==void 0&&p.preserveBlank,this.data=h}return s(d,null,[{key:"DEFAULT_PLACEHOLDER",get:function(){return""}}]),s(d,[{key:"onKeyUp",value:function(u){u.code!=="Backspace"&&u.code!=="Delete"||this._element.textContent===""&&(this._element.innerHTML="")}},{key:"drawView",value:function(){var u=document.createElement("DIV");return u.classList.add(this._CSS.wrapper,this._CSS.block),u.contentEditable=!1,u.dataset.placeholder=this.api.i18n.t(this._placeholder),this.readOnly||(u.contentEditable=!0,u.addEventListener("keyup",this.onKeyUp)),u}},{key:"render",value:function(){return this._element}},{key:"merge",value:function(u){var h={text:this.data.text+u.text};this.data=h}},{key:"validate",value:function(u){return!(u.text.trim()===""&&!this._preserveBlank)}},{key:"save",value:function(u){return{text:u.innerHTML}}},{key:"onPaste",value:function(u){var h={text:u.detail.data.innerHTML};this.data=h}},{key:"data",get:function(){var u=this._element.innerHTML;return this._data.text=u,this._data},set:function(u){this._data=u||{},this._element.innerHTML=this._data.text||""}}],[{key:"conversionConfig",get:function(){return{export:"text",import:"text"}}},{key:"sanitize",get:function(){return{text:{br:!0}}}},{key:"isReadOnlySupported",get:function(){return!0}},{key:"pasteConfig",get:function(){return{tags:["P"]}}},{key:"toolbox",get:function(){return{icon:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M8 9V7.2C8 7.08954 8.08954 7 8.2 7L12 7M16 9V7.2C16 7.08954 15.9105 7 15.8 7L12 7M12 7L12 17M12 17H10M12 17H14"/></svg>',title:"Text"}}}]),d}()}]).default},function(r,t,e){var i,n,o;n=[t,e(2),e(3),e(41)],(o=typeof(i=function(a,s,l,d){"use strict";var u=e(1);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,s=u(s),l=u(l);var h=function(){function p(){(0,s.default)(this,p),this.commandName="bold",this.CSS={button:"ce-inline-tool",buttonActive:"ce-inline-tool--active",buttonModifier:"ce-inline-tool--bold"},this.nodes={button:void 0}}return(0,l.default)(p,[{key:"render",value:function(){return this.nodes.button=document.createElement("button"),this.nodes.button.type="button",this.nodes.button.classList.add(this.CSS.button,this.CSS.buttonModifier),this.nodes.button.innerHTML=d.IconBold,this.nodes.button}},{key:"surround",value:function(){document.execCommand(this.commandName)}},{key:"checkState",value:function(){var m=document.queryCommandState(this.commandName);return this.nodes.button.classList.toggle(this.CSS.buttonActive,m),m}},{key:"shortcut",get:function(){return"CMD+B"}}],[{key:"sanitize",get:function(){return{b:{}}}}]),p}();a.default=h,h.displayName="BoldInlineTool",h.isInline=!0,h.title="Bold",r.exports=t.default})=="function"?i.apply(t,n):i)===void 0||(r.exports=o)},function(r,t,e){var i,n,o;n=[t,e(2),e(3),e(41)],(o=typeof(i=function(a,s,l,d){"use strict";var u=e(1);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,s=u(s),l=u(l);var h=function(){function p(){(0,s.default)(this,p),this.commandName="italic",this.CSS={button:"ce-inline-tool",buttonActive:"ce-inline-tool--active",buttonModifier:"ce-inline-tool--italic"},this.nodes={button:null}}return(0,l.default)(p,[{key:"render",value:function(){return this.nodes.button=document.createElement("button"),this.nodes.button.type="button",this.nodes.button.classList.add(this.CSS.button,this.CSS.buttonModifier),this.nodes.button.innerHTML=d.IconItalic,this.nodes.button}},{key:"surround",value:function(){document.execCommand(this.commandName)}},{key:"checkState",value:function(){var m=document.queryCommandState(this.commandName);return this.nodes.button.classList.toggle(this.CSS.buttonActive,m),m}},{key:"shortcut",get:function(){return"CMD+I"}}],[{key:"sanitize",get:function(){return{i:{}}}}]),p}();a.default=h,h.displayName="ItalicInlineTool",h.isInline=!0,h.title="Italic",r.exports=t.default})=="function"?i.apply(t,n):i)===void 0||(r.exports=o)},function(r,t,e){var i,n,o,a=e(7);n=[t,e(2),e(3),e(25),e(8),e(41)],(o=typeof(i=function(s,l,d,u,h,p){"use strict";var m=e(1);function x(v){if(typeof WeakMap!="function")return null;var w=new WeakMap,k=new WeakMap;return(x=function(c){return c?k:w})(v)}Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0,l=m(l),d=m(d),u=m(u),h=function(v,w){if(!w&&v&&v.__esModule)return v;if(v===null||a(v)!=="object"&&typeof v!="function")return{default:v};var k=x(w);if(k&&k.has(v))return k.get(v);var c={},_=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var g in v)if(g!=="default"&&Object.prototype.hasOwnProperty.call(v,g)){var b=_?Object.getOwnPropertyDescriptor(v,g):null;b&&(b.get||b.set)?Object.defineProperty(c,g,b):c[g]=v[g]}return c.default=v,k&&k.set(v,c),c}(h);var y=function(){function v(w){var k=w.api;(0,l.default)(this,v),this.commandLink="createLink",this.commandUnlink="unlink",this.ENTER_KEY=13,this.CSS={button:"ce-inline-tool",buttonActive:"ce-inline-tool--active",buttonModifier:"ce-inline-tool--link",buttonUnlink:"ce-inline-tool--unlink",input:"ce-inline-tool-input",inputShowed:"ce-inline-tool-input--showed"},this.nodes={button:null,input:null},this.inputOpened=!1,this.toolbar=k.toolbar,this.inlineToolbar=k.inlineToolbar,this.notifier=k.notifier,this.i18n=k.i18n,this.selection=new u.default}return(0,d.default)(v,[{key:"render",value:function(){return this.nodes.button=document.createElement("button"),this.nodes.button.type="button",this.nodes.button.classList.add(this.CSS.button,this.CSS.buttonModifier),this.nodes.button.innerHTML=p.IconLink,this.nodes.button}},{key:"renderActions",value:function(){var w=this;return this.nodes.input=document.createElement("input"),this.nodes.input.placeholder=this.i18n.t("Add a link"),this.nodes.input.classList.add(this.CSS.input),this.nodes.input.addEventListener("keydown",function(k){k.keyCode===w.ENTER_KEY&&w.enterPressed(k)}),this.nodes.input}},{key:"surround",value:function(w){if(w){this.inputOpened?(this.selection.restore(),this.selection.removeFakeBackground()):(this.selection.setFakeBackground(),this.selection.save());var k=this.selection.findParentTag("A");if(k)return this.selection.expandToTag(k),this.unlink(),this.closeActions(),this.checkState(),void this.toolbar.close()}this.toggleActions()}},{key:"checkState",value:function(){var w=this.selection.findParentTag("A");if(w){this.nodes.button.innerHTML=p.IconUnlink,this.nodes.button.classList.add(this.CSS.buttonUnlink),this.nodes.button.classList.add(this.CSS.buttonActive),this.openActions();var k=w.getAttribute("href");this.nodes.input.value=k!=="null"?k:"",this.selection.save()}else this.nodes.button.innerHTML=p.IconLink,this.nodes.button.classList.remove(this.CSS.buttonUnlink),this.nodes.button.classList.remove(this.CSS.buttonActive);return!!w}},{key:"clear",value:function(){this.closeActions()}},{key:"shortcut",get:function(){return"CMD+K"}},{key:"toggleActions",value:function(){this.inputOpened?this.closeActions(!1):this.openActions(!0)}},{key:"openActions",value:function(){var w=arguments.length>0&&arguments[0]!==void 0&&arguments[0];this.nodes.input.classList.add(this.CSS.inputShowed),w&&this.nodes.input.focus(),this.inputOpened=!0}},{key:"closeActions",value:function(){var w=!(arguments.length>0&&arguments[0]!==void 0)||arguments[0];if(this.selection.isFakeBackgroundEnabled){var k=new u.default;k.save(),this.selection.restore(),this.selection.removeFakeBackground(),k.restore()}this.nodes.input.classList.remove(this.CSS.inputShowed),this.nodes.input.value="",w&&this.selection.clearSaved(),this.inputOpened=!1}},{key:"enterPressed",value:function(w){var k=this.nodes.input.value||"";return k.trim()?this.validateURL(k)?(k=this.prepareLink(k),this.selection.restore(),this.selection.removeFakeBackground(),this.insertLink(k),w.preventDefault(),w.stopPropagation(),w.stopImmediatePropagation(),this.selection.collapseToEnd(),void this.inlineToolbar.close()):(this.notifier.show({message:"Pasted link is not valid.",style:"error"}),void h.log("Incorrect Link pasted","warn",k)):(this.selection.restore(),this.unlink(),w.preventDefault(),void this.closeActions())}},{key:"validateURL",value:function(w){return!/\s/.test(w)}},{key:"prepareLink",value:function(w){return w=w.trim(),w=this.addProtocol(w)}},{key:"addProtocol",value:function(w){if(/^(\w+):(\/\/)?/.test(w))return w;var k=/^\/[^/\s]/.test(w),c=w.substring(0,1)==="#",_=/^\/\/[^/\s]/.test(w);return k||c||_||(w="http://"+w),w}},{key:"insertLink",value:function(w){var k=this.selection.findParentTag("A");k&&this.selection.expandToTag(k),document.execCommand(this.commandLink,!1,w)}},{key:"unlink",value:function(){document.execCommand(this.commandUnlink)}}],[{key:"sanitize",get:function(){return{a:{href:!0,target:"_blank",rel:"nofollow"}}}}]),v}();s.default=y,y.displayName="LinkInlineTool",y.isInline=!0,y.title="Link",r.exports=t.default})=="function"?i.apply(t,n):i)===void 0||(r.exports=o)},function(r,t,e){var i,n,o;n=[t,e(2),e(3),e(19)],(o=typeof(i=function(a,s,l,d){"use strict";var u=e(1);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,s=u(s),l=u(l),d=u(d);var h=function(){function p(m){var x=m.data,y=m.api;(0,s.default)(this,p),this.CSS={wrapper:"ce-stub",info:"ce-stub__info",title:"ce-stub__title",subtitle:"ce-stub__subtitle"},this.api=y,this.title=x.title||this.api.i18n.t("Error"),this.subtitle=this.api.i18n.t("The block can not be displayed correctly."),this.savedData=x.savedData,this.wrapper=this.make()}return(0,l.default)(p,[{key:"render",value:function(){return this.wrapper}},{key:"save",value:function(){return this.savedData}},{key:"make",value:function(){var m=d.default.make("div",this.CSS.wrapper),x=d.default.make("div",this.CSS.info),y=d.default.make("div",this.CSS.title,{textContent:this.title}),v=d.default.make("div",this.CSS.subtitle,{textContent:this.subtitle});return m.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" width="52" height="52" viewBox="0 0 52 52"><path fill="#D76B6B" fill-rule="nonzero" d="M26 52C11.64 52 0 40.36 0 26S11.64 0 26 0s26 11.64 26 26-11.64 26-26 26zm0-3.25c12.564 0 22.75-10.186 22.75-22.75S38.564 3.25 26 3.25 3.25 13.436 3.25 26 13.436 48.75 26 48.75zM15.708 33.042a2.167 2.167 0 1 1 0-4.334 2.167 2.167 0 0 1 0 4.334zm23.834 0a2.167 2.167 0 1 1 0-4.334 2.167 2.167 0 0 1 0 4.334zm-15.875 5.452a1.083 1.083 0 1 1-1.834-1.155c1.331-2.114 3.49-3.179 6.334-3.179 2.844 0 5.002 1.065 6.333 3.18a1.083 1.083 0 1 1-1.833 1.154c-.913-1.45-2.366-2.167-4.5-2.167s-3.587.717-4.5 2.167z"/></svg>',x.appendChild(y),x.appendChild(v),m.appendChild(x),m}}]),p}();a.default=h,h.displayName="Stub",h.isReadOnlySupported=!0,r.exports=t.default})=="function"?i.apply(t,n):i)===void 0||(r.exports=o)},function(r,t,e){var i,n,o;n=[t,e(2),e(3),e(69),e(395),e(396),e(397)],(o=typeof(i=function(a,s,l,d,u,h,p){"use strict";var m=e(1);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,s=m(s),l=m(l),u=m(u),h=m(h),p=m(p);var x=function(v,w){var k={};for(var c in v)Object.prototype.hasOwnProperty.call(v,c)&&w.indexOf(c)<0&&(k[c]=v[c]);if(v!=null&&typeof Object.getOwnPropertySymbols=="function"){var _=0;for(c=Object.getOwnPropertySymbols(v);_<c.length;_++)w.indexOf(c[_])<0&&Object.prototype.propertyIsEnumerable.call(v,c[_])&&(k[c[_]]=v[c[_]])}return k},y=function(){function v(w,k,c){(0,s.default)(this,v),this.api=c,this.config=w,this.editorConfig=k}return(0,l.default)(v,[{key:"get",value:function(w){var k=this.config[w],c=k.class,_=k.isInternal,g=_!==void 0&&_,b=x(k,["class","isInternal"]);return new(this.getConstructor(c))({name:w,constructable:c,config:b,api:this.api,isDefault:w===this.editorConfig.defaultBlock,defaultPlaceholder:this.editorConfig.placeholder,isInternal:g})}},{key:"getConstructor",value:function(w){switch(!0){case w[d.InternalInlineToolSettings.IsInline]:return u.default;case w[d.InternalTuneSettings.IsTune]:return h.default;default:return p.default}}}]),v}();a.default=y,y.displayName="ToolsFactory",r.exports=t.default})=="function"?i.apply(t,n):i)===void 0||(r.exports=o)},function(r,t,e){var i,n,o,a=e(7);n=[t,e(2),e(3),e(5),e(6),e(4),e(69)],(o=typeof(i=function(s,l,d,u,h,p,m){"use strict";var x=e(1);function y(k){if(typeof WeakMap!="function")return null;var c=new WeakMap,_=new WeakMap;return(y=function(g){return g?_:c})(k)}function v(k){var c=function(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(_){return!1}}();return function(){var _,g=(0,p.default)(k);if(c){var b=(0,p.default)(this).constructor;_=Reflect.construct(g,arguments,b)}else _=g.apply(this,arguments);return(0,h.default)(this,_)}}Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0,l=x(l),d=x(d),u=x(u),h=x(h),p=x(p);var w=function(k){(0,u.default)(_,k);var c=v(_);function _(){var g;return(0,l.default)(this,_),(g=c.apply(this,arguments)).type=m.ToolType.Inline,g}return(0,d.default)(_,[{key:"title",get:function(){return this.constructable[m.InternalInlineToolSettings.Title]}},{key:"create",value:function(){return new this.constructable({api:this.api.getMethodsForTool(this),config:this.settings})}}]),_}((m=function(k,c){if(!c&&k&&k.__esModule)return k;if(k===null||a(k)!=="object"&&typeof k!="function")return{default:k};var _=y(c);if(_&&_.has(k))return _.get(k);var g={},b=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var E in k)if(E!=="default"&&Object.prototype.hasOwnProperty.call(k,E)){var T=b?Object.getOwnPropertyDescriptor(k,E):null;T&&(T.get||T.set)?Object.defineProperty(g,E,T):g[E]=k[E]}return g.default=k,_&&_.set(k,g),g}(m)).default);s.default=w,w.displayName="InlineTool",r.exports=t.default})=="function"?i.apply(t,n):i)===void 0||(r.exports=o)},function(r,t,e){var i,n,o,a=e(7);n=[t,e(2),e(3),e(5),e(6),e(4),e(69)],(o=typeof(i=function(s,l,d,u,h,p,m){"use strict";var x=e(1);function y(k){if(typeof WeakMap!="function")return null;var c=new WeakMap,_=new WeakMap;return(y=function(g){return g?_:c})(k)}function v(k){var c=function(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(_){return!1}}();return function(){var _,g=(0,p.default)(k);if(c){var b=(0,p.default)(this).constructor;_=Reflect.construct(g,arguments,b)}else _=g.apply(this,arguments);return(0,h.default)(this,_)}}Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0,l=x(l),d=x(d),u=x(u),h=x(h),p=x(p);var w=function(k){(0,u.default)(_,k);var c=v(_);function _(){var g;return(0,l.default)(this,_),(g=c.apply(this,arguments)).type=m.ToolType.Tune,g}return(0,d.default)(_,[{key:"create",value:function(g,b){return new this.constructable({api:this.api.getMethodsForTool(this),config:this.settings,block:b,data:g})}}]),_}((m=function(k,c){if(!c&&k&&k.__esModule)return k;if(k===null||a(k)!=="object"&&typeof k!="function")return{default:k};var _=y(c);if(_&&_.has(k))return _.get(k);var g={},b=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var E in k)if(E!=="default"&&Object.prototype.hasOwnProperty.call(k,E)){var T=b?Object.getOwnPropertyDescriptor(k,E):null;T&&(T.get||T.set)?Object.defineProperty(g,E,T):g[E]=k[E]}return g.default=k,_&&_.set(k,g),g}(m)).default);s.default=w,w.displayName="BlockTune",r.exports=t.default})=="function"?i.apply(t,n):i)===void 0||(r.exports=o)},function(r,t,e){var i,n,o,a=e(7);n=[t,e(2),e(3),e(114),e(5),e(6),e(4),e(7),e(69),e(8),e(185)],(o=typeof(i=function(s,l,d,u,h,p,m,x,y,v,w){"use strict";var k=e(1);function c(T){if(typeof WeakMap!="function")return null;var C=new WeakMap,S=new WeakMap;return(c=function(A){return A?S:C})(T)}function _(T,C){if(!C&&T&&T.__esModule)return T;if(T===null||a(T)!=="object"&&typeof T!="function")return{default:T};var S=c(C);if(S&&S.has(T))return S.get(T);var A={},L=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var B in T)if(B!=="default"&&Object.prototype.hasOwnProperty.call(T,B)){var P=L?Object.getOwnPropertyDescriptor(T,B):null;P&&(P.get||P.set)?Object.defineProperty(A,B,P):A[B]=T[B]}return A.default=T,S&&S.set(T,A),A}function g(T){var C=function(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(S){return!1}}();return function(){var S,A=(0,m.default)(T);if(C){var L=(0,m.default)(this).constructor;S=Reflect.construct(A,arguments,L)}else S=A.apply(this,arguments);return(0,p.default)(this,S)}}Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0,l=k(l),d=k(d),u=k(u),h=k(h),p=k(p),m=k(m),x=k(x),y=_(y),v=_(v),w=k(w);var b=function(T,C,S,A){var L,B=arguments.length,P=B<3?C:A===null?A=Object.getOwnPropertyDescriptor(C,S):A;if((typeof Reflect=="undefined"?"undefined":(0,x.default)(Reflect))==="object"&&typeof Reflect.decorate=="function")P=Reflect.decorate(T,C,S,A);else for(var M=T.length-1;M>=0;M--)(L=T[M])&&(P=(B<3?L(P):B>3?L(C,S,P):L(C,S))||P);return B>3&&P&&Object.defineProperty(C,S,P),P},E=function(T){(0,h.default)(S,T);var C=g(S);function S(){var A;return(0,l.default)(this,S),(A=C.apply(this,arguments)).type=y.ToolType.Block,A.inlineTools=new w.default,A.tunes=new w.default,A}return(0,d.default)(S,[{key:"create",value:function(A,L,B){return new this.constructable({data:A,block:L,readOnly:B,api:this.api.getMethodsForTool(this),config:this.settings})}},{key:"isReadOnlySupported",get:function(){return this.constructable[y.InternalBlockToolSettings.IsReadOnlySupported]===!0}},{key:"isLineBreaksEnabled",get:function(){return this.constructable[y.InternalBlockToolSettings.IsEnabledLineBreaks]}},{key:"toolbox",get:function(){var A=this.constructable[y.InternalBlockToolSettings.Toolbox],L=this.config[y.UserSettings.Toolbox];if(!v.isEmpty(A)&&L!==!1)return L?Array.isArray(A)?Array.isArray(L)?L.map(function(B,P){var M=A[P];return M?Object.assign(Object.assign({},M),B):B}):[L]:Array.isArray(L)?L:[Object.assign(Object.assign({},A),L)]:Array.isArray(A)?A:[A]}},{key:"conversionConfig",get:function(){return this.constructable[y.InternalBlockToolSettings.ConversionConfig]}},{key:"enabledInlineTools",get:function(){return this.config[y.UserSettings.EnabledInlineTools]||!1}},{key:"enabledBlockTunes",get:function(){return this.config[y.UserSettings.EnabledBlockTunes]}},{key:"pasteConfig",get:function(){return this.constructable[y.InternalBlockToolSettings.PasteConfig]||{}}},{key:"sanitizeConfig",get:function(){var A=(0,u.default)((0,m.default)(S.prototype),"sanitizeConfig",this),L=this.baseSanitizeConfig;if(v.isEmpty(A))return L;var B={};for(var P in A)if(Object.prototype.hasOwnProperty.call(A,P)){var M=A[P];v.isObject(M)?B[P]=Object.assign({},L,M):B[P]=M}return B}},{key:"baseSanitizeConfig",get:function(){var A={};return Array.from(this.inlineTools.values()).forEach(function(L){return Object.assign(A,L.sanitizeConfig)}),Array.from(this.tunes.values()).forEach(function(L){return Object.assign(A,L.sanitizeConfig)}),A}}]),S}(y.default);s.default=E,E.displayName="BlockTool",b([v.cacheable],E.prototype,"sanitizeConfig",null),b([v.cacheable],E.prototype,"baseSanitizeConfig",null),r.exports=t.default})=="function"?i.apply(t,n):i)===void 0||(r.exports=o)},function(r,t,e){var i,n,o;n=[t,e(2),e(3),e(85),e(41)],(o=typeof(i=function(a,s,l,d,u){"use strict";var h=e(1);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,s=h(s),l=h(l),d=h(d);var p=function(){function m(x){var y=x.api;(0,s.default)(this,m),this.CSS={animation:"wobble"},this.api=y}return(0,l.default)(m,[{key:"render",value:function(){var x=this;return{icon:u.IconChevronDown,label:this.api.i18n.t("Move down"),onActivate:function(y,v){return x.handleClick(v)},name:"move-down"}}},{key:"handleClick",value:function(x){var y=this,v=this.api.blocks.getCurrentBlockIndex(),w=this.api.blocks.getBlockByIndex(v+1);if(!w){var k=x.target.closest("."+d.default.CSS.item).querySelector("."+d.default.CSS.itemIcon);return k.classList.add(this.CSS.animation),void window.setTimeout(function(){k.classList.remove(y.CSS.animation)},500)}var c=w.holder,_=c.getBoundingClientRect(),g=Math.abs(window.innerHeight-c.offsetHeight);_.top<window.innerHeight&&(g=window.scrollY+c.offsetHeight),window.scrollTo(0,g),this.api.blocks.move(v+1),this.api.toolbar.toggleBlockSettings(!0)}}]),m}();a.default=p,p.displayName="MoveDownTune",p.isTune=!0,r.exports=t.default})=="function"?i.apply(t,n):i)===void 0||(r.exports=o)},function(r,t,e){var i,n,o;n=[t,e(2),e(3),e(41)],(o=typeof(i=function(a,s,l,d){"use strict";var u=e(1);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,s=u(s),l=u(l);var h=function(){function p(m){var x=m.api;(0,s.default)(this,p),this.api=x}return(0,l.default)(p,[{key:"render",value:function(){var m=this;return{icon:d.IconCross,label:this.api.i18n.t("Delete"),name:"delete",confirmation:{label:this.api.i18n.t("Click to delete"),onActivate:function(){return m.handleClick()}}}}},{key:"handleClick",value:function(){this.api.blocks.delete()}}]),p}();a.default=h,h.displayName="DeleteTune",h.isTune=!0,r.exports=t.default})=="function"?i.apply(t,n):i)===void 0||(r.exports=o)},function(r,t,e){var i,n,o;n=[t,e(2),e(3),e(85),e(41)],(o=typeof(i=function(a,s,l,d,u){"use strict";var h=e(1);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,s=h(s),l=h(l),d=h(d);var p=function(){function m(x){var y=x.api;(0,s.default)(this,m),this.CSS={animation:"wobble"},this.api=y}return(0,l.default)(m,[{key:"render",value:function(){var x=this;return{icon:u.IconChevronUp,label:this.api.i18n.t("Move up"),onActivate:function(y,v){return x.handleClick(v)},name:"move-up"}}},{key:"handleClick",value:function(x){var y=this,v=this.api.blocks.getCurrentBlockIndex(),w=this.api.blocks.getBlockByIndex(v),k=this.api.blocks.getBlockByIndex(v-1);if(v===0||!w||!k){var c=x.target.closest("."+d.default.CSS.item).querySelector("."+d.default.CSS.itemIcon);return c.classList.add(this.CSS.animation),void window.setTimeout(function(){c.classList.remove(y.CSS.animation)},500)}var _,g=w.holder,b=k.holder,E=g.getBoundingClientRect(),T=b.getBoundingClientRect();_=T.top>0?Math.abs(E.top)-Math.abs(T.top):window.innerHeight-Math.abs(E.top)+Math.abs(T.top),window.scrollBy(0,-1*_),this.api.blocks.move(v-1),this.api.toolbar.toggleBlockSettings(!0)}}]),m}();a.default=p,p.displayName="MoveUpTune",p.isTune=!0,r.exports=t.default})=="function"?i.apply(t,n):i)===void 0||(r.exports=o)},function(r,t){r.exports='.codex-editor{position:relative;-webkit-box-sizing:border-box;box-sizing:border-box;z-index:1}.codex-editor .hide,.codex-editor__redactor--hidden{display:none}.codex-editor__redactor [contenteditable]:empty:after{content:"\\feff "}@media (min-width:651px){.codex-editor--narrow .codex-editor__redactor{margin-right:50px}}@media (min-width:651px){.codex-editor--narrow.codex-editor--rtl .codex-editor__redactor{margin-left:50px;margin-right:0}}@media (min-width:651px){.codex-editor--narrow .ce-toolbar__actions{right:-5px}}.codex-editor__loader{position:relative;height:30vh}.codex-editor__loader:before{content:"";position:absolute;left:50%;top:50%;width:30px;height:30px;margin-top:-15px;margin-left:-15px;border-radius:50%;border:2px solid rgba(201,201,204,.48);border-top-color:transparent;-webkit-box-sizing:border-box;box-sizing:border-box;-webkit-animation:editor-loader-spin .8s linear infinite;animation:editor-loader-spin .8s linear infinite;will-change:transform}.codex-editor-copyable{position:absolute;height:1px;width:1px;top:-400%;opacity:.001}.codex-editor-overlay{position:fixed;top:0;left:0;right:0;bottom:0;z-index:999;pointer-events:none;overflow:hidden}.codex-editor-overlay__container{position:relative;pointer-events:auto;z-index:0}.codex-editor-overlay__rectangle{position:absolute;pointer-events:none;background-color:rgba(46,170,220,.2);border:1px solid transparent}.codex-editor svg{max-height:100%}.codex-editor path{stroke:currentColor}::-moz-selection{background-color:#d4ecff}::selection{background-color:#d4ecff}.codex-editor--toolbox-opened [contentEditable=true][data-placeholder]:focus:before{opacity:0!important}@-webkit-keyframes editor-loader-spin{0%{-webkit-transform:rotate(0deg);transform:rotate(0deg)}to{-webkit-transform:rotate(1turn);transform:rotate(1turn)}}@keyframes editor-loader-spin{0%{-webkit-transform:rotate(0deg);transform:rotate(0deg)}to{-webkit-transform:rotate(1turn);transform:rotate(1turn)}}.ce-scroll-locked{overflow:hidden}.ce-scroll-locked--hard{overflow:hidden;top:calc(var(--window-scroll-offset)*-1);position:fixed;width:100%}.ce-toolbar{position:absolute;left:0;right:0;top:0;-webkit-transition:opacity .1s ease;transition:opacity .1s ease;will-change:opacity,top;display:none}.ce-toolbar--opened{display:block}.ce-toolbar__content{max-width:650px;margin:0 auto;position:relative}.ce-toolbar__plus{color:#1d202b;cursor:pointer;width:26px;height:26px;border-radius:7px;display:-webkit-inline-box;display:-ms-inline-flexbox;display:inline-flex;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}@media (max-width:650px){.ce-toolbar__plus{width:36px;height:36px}}@media (hover:hover){.ce-toolbar__plus:hover{background-color:#eff2f5}}.ce-toolbar__plus--active{background-color:#eff2f5;-webkit-animation:bounceIn .75s 1;animation:bounceIn .75s 1;-webkit-animation-fill-mode:forwards;animation-fill-mode:forwards}.ce-toolbar__plus{-ms-flex-negative:0;flex-shrink:0}.ce-toolbar__plus-shortcut{opacity:.6;word-spacing:-2px;margin-top:5px}@media (max-width:650px){.ce-toolbar__plus{position:absolute;background-color:#fff;border:1px solid #e8e8eb;-webkit-box-shadow:0 3px 15px -3px rgba(13,20,33,.13);box-shadow:0 3px 15px -3px rgba(13,20,33,.13);border-radius:6px;z-index:2}.ce-toolbar__plus--left-oriented:before{left:15px;margin-left:0}.ce-toolbar__plus--right-oriented:before{left:auto;right:15px;margin-left:0}.ce-toolbar__plus{position:static}}.ce-toolbar__actions{position:absolute;right:100%;opacity:0;display:-webkit-box;display:-ms-flexbox;display:flex;padding-right:5px}.ce-toolbar__actions--opened{opacity:1}@media (max-width:650px){.ce-toolbar__actions{right:auto}}.ce-toolbar__settings-btn{color:#1d202b;width:26px;height:26px;border-radius:7px;display:-webkit-inline-box;display:-ms-inline-flexbox;display:inline-flex;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center}@media (max-width:650px){.ce-toolbar__settings-btn{width:36px;height:36px}}@media (hover:hover){.ce-toolbar__settings-btn:hover{background-color:#eff2f5}}.ce-toolbar__settings-btn--active{background-color:#eff2f5;-webkit-animation:bounceIn .75s 1;animation:bounceIn .75s 1;-webkit-animation-fill-mode:forwards;animation-fill-mode:forwards}.ce-toolbar__settings-btn{margin-left:3px;cursor:pointer;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}@media (min-width:651px){.ce-toolbar__settings-btn{width:24px}}.ce-toolbar__settings-btn--hidden{display:none}@media (max-width:650px){.ce-toolbar__settings-btn{position:absolute;background-color:#fff;border:1px solid #e8e8eb;-webkit-box-shadow:0 3px 15px -3px rgba(13,20,33,.13);box-shadow:0 3px 15px -3px rgba(13,20,33,.13);border-radius:6px;z-index:2}.ce-toolbar__settings-btn--left-oriented:before{left:15px;margin-left:0}.ce-toolbar__settings-btn--right-oriented:before{left:auto;right:15px;margin-left:0}.ce-toolbar__settings-btn{position:static}}.ce-toolbar__plus svg,.ce-toolbar__settings-btn svg{width:24px;height:24px}@media (min-width:651px){.codex-editor--narrow .ce-toolbar__plus{left:5px}}.ce-toolbox{--gap:8px}@media (min-width:651px){.ce-toolbox{position:absolute;top:calc(26px + var(--gap));left:0}.ce-toolbox--opened-top{top:calc(var(--gap)*-1 + var(--popover-height)*-1)}}@media (min-width:651px){.codex-editor--narrow .ce-toolbox{left:auto;right:0}.codex-editor--narrow .ce-toolbox .ce-popover{right:0}}.ce-inline-toolbar{--y-offset:8px;position:absolute;background-color:#fff;border:1px solid #e8e8eb;-webkit-box-shadow:0 3px 15px -3px rgba(13,20,33,.13);box-shadow:0 3px 15px -3px rgba(13,20,33,.13);border-radius:6px;z-index:2}.ce-inline-toolbar--left-oriented:before{left:15px;margin-left:0}.ce-inline-toolbar--right-oriented:before{left:auto;right:15px;margin-left:0}.ce-inline-toolbar{-webkit-transform:translateX(-50%) translateY(8px) scale(.94);transform:translateX(-50%) translateY(8px) scale(.94);opacity:0;visibility:hidden;-webkit-transition:opacity .25s ease,-webkit-transform .15s ease;transition:opacity .25s ease,-webkit-transform .15s ease;transition:transform .15s ease,opacity .25s ease;transition:transform .15s ease,opacity .25s ease,-webkit-transform .15s ease;will-change:transform,opacity;top:0;left:0;z-index:3}.ce-inline-toolbar--showed{opacity:1;visibility:visible;-webkit-transform:translateX(-50%);transform:translateX(-50%)}.ce-inline-toolbar--left-oriented{-webkit-transform:translateX(-23px) translateY(8px) scale(.94);transform:translateX(-23px) translateY(8px) scale(.94)}.ce-inline-toolbar--left-oriented.ce-inline-toolbar--showed{-webkit-transform:translateX(-23px);transform:translateX(-23px)}.ce-inline-toolbar--right-oriented{-webkit-transform:translateX(-100%) translateY(8px) scale(.94);transform:translateX(-100%) translateY(8px) scale(.94);margin-left:23px}.ce-inline-toolbar--right-oriented.ce-inline-toolbar--showed{-webkit-transform:translateX(-100%);transform:translateX(-100%)}.ce-inline-toolbar [hidden]{display:none!important}.ce-inline-toolbar__toggler-and-button-wrapper{width:100%;padding:0 6px}.ce-inline-toolbar__buttons,.ce-inline-toolbar__toggler-and-button-wrapper{display:-webkit-box;display:-ms-flexbox;display:flex}.ce-inline-toolbar__dropdown{display:-webkit-box;display:-ms-flexbox;display:flex;padding:6px;margin:0 6px 0 -6px;-webkit-box-align:center;-ms-flex-align:center;align-items:center;cursor:pointer;border-right:1px solid rgba(201,201,204,.48);-webkit-box-sizing:border-box;box-sizing:border-box}@media (hover:hover){.ce-inline-toolbar__dropdown:hover{background:#eff2f5}}.ce-inline-toolbar__dropdown--hidden{display:none}.ce-inline-toolbar__dropdown-arrow,.ce-inline-toolbar__dropdown-content{display:-webkit-box;display:-ms-flexbox;display:flex}.ce-inline-toolbar__dropdown-arrow svg,.ce-inline-toolbar__dropdown-content svg{width:20px;height:20px}.ce-inline-toolbar__shortcut{opacity:.6;word-spacing:-3px;margin-top:3px}.ce-inline-tool{display:-webkit-inline-box;display:-ms-inline-flexbox;display:inline-flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;padding:6px 1px;border-radius:3px;cursor:pointer;border:0;outline:none;background-color:transparent;vertical-align:bottom;color:inherit;margin:0}.ce-inline-tool svg{width:20px;height:20px}@media (max-width:650px){.ce-inline-tool svg{width:28px;height:28px}}@media (hover:hover){.ce-inline-tool:hover{background-color:#eff2f5}}.ce-inline-tool--active{color:#388ae5}.ce-inline-tool--focused{-webkit-box-shadow:inset 0 0 0 1px rgba(7,161,227,.08);box-shadow:inset 0 0 0 1px rgba(7,161,227,.08);background:rgba(34,186,255,.08)!important}.ce-inline-tool--focused-animated{-webkit-animation-name:buttonClicked;animation-name:buttonClicked;-webkit-animation-duration:.25s;animation-duration:.25s}.ce-inline-tool{border-radius:0;line-height:normal}.ce-inline-tool--link .icon--unlink,.ce-inline-tool--unlink .icon--link{display:none}.ce-inline-tool--unlink .icon--unlink{display:inline-block;margin-bottom:-1px}.ce-inline-tool-input{outline:none;border:0;border-radius:0 0 4px 4px;margin:0;font-size:13px;padding:10px;width:100%;-webkit-box-sizing:border-box;box-sizing:border-box;display:none;font-weight:500;border-top:1px solid rgba(201,201,204,.48);-webkit-appearance:none;font-family:inherit}@media (max-width:650px){.ce-inline-tool-input{font-size:15px;font-weight:500}}.ce-inline-tool-input::-webkit-input-placeholder{color:#707684}.ce-inline-tool-input::-moz-placeholder{color:#707684}.ce-inline-tool-input:-ms-input-placeholder{color:#707684}.ce-inline-tool-input::-ms-input-placeholder{color:#707684}.ce-inline-tool-input::placeholder{color:#707684}.ce-inline-tool-input--showed{display:block}.ce-conversion-toolbar{position:absolute;background-color:#fff;border:1px solid #e8e8eb;-webkit-box-shadow:0 3px 15px -3px rgba(13,20,33,.13);box-shadow:0 3px 15px -3px rgba(13,20,33,.13);border-radius:6px;z-index:2}.ce-conversion-toolbar--left-oriented:before{left:15px;margin-left:0}.ce-conversion-toolbar--right-oriented:before{left:auto;right:15px;margin-left:0}.ce-conversion-toolbar{opacity:0;visibility:hidden;will-change:transform,opacity;-webkit-transition:opacity .1s ease,-webkit-transform .1s ease;transition:opacity .1s ease,-webkit-transform .1s ease;transition:transform .1s ease,opacity .1s ease;transition:transform .1s ease,opacity .1s ease,-webkit-transform .1s ease;-webkit-transform:translateY(-8px);transform:translateY(-8px);left:-1px;width:150px;margin-top:5px;-webkit-box-sizing:content-box;box-sizing:content-box}.ce-conversion-toolbar--showed{opacity:1;visibility:visible;-webkit-transform:none;transform:none}.ce-conversion-toolbar [hidden]{display:none!important}.ce-conversion-toolbar__buttons{display:-webkit-box;display:-ms-flexbox;display:flex}.ce-conversion-toolbar__label{color:#707684;font-size:11px;font-weight:500;letter-spacing:.33px;padding:10px 10px 5px;text-transform:uppercase}.ce-conversion-tool{display:-webkit-box;display:-ms-flexbox;display:flex;padding:5px 10px;font-size:14px;line-height:20px;font-weight:500;cursor:pointer;-webkit-box-align:center;-ms-flex-align:center;align-items:center}.ce-conversion-tool--hidden{display:none}.ce-conversion-tool--focused{-webkit-box-shadow:inset 0 0 0 1px rgba(7,161,227,.08);box-shadow:inset 0 0 0 1px rgba(7,161,227,.08);background:rgba(34,186,255,.08)!important}.ce-conversion-tool--focused-animated{-webkit-animation-name:buttonClicked;animation-name:buttonClicked;-webkit-animation-duration:.25s;animation-duration:.25s}.ce-conversion-tool:hover{background:#eff2f5}.ce-conversion-tool__icon{display:-webkit-inline-box;display:-ms-inline-flexbox;display:inline-flex;width:26px;height:26px;-webkit-box-shadow:0 0 0 1px rgba(201,201,204,.48);box-shadow:0 0 0 1px rgba(201,201,204,.48);border-radius:5px;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;background:#fff;-webkit-box-sizing:content-box;box-sizing:content-box;-ms-flex-negative:0;flex-shrink:0;margin-right:10px}.ce-conversion-tool__icon svg{width:20px;height:20px}@media (max-width:650px){.ce-conversion-tool__icon{width:36px;height:36px;border-radius:8px}.ce-conversion-tool__icon svg{width:28px;height:28px}}.ce-conversion-tool--last{margin-right:0!important}.ce-conversion-tool--active{color:#388ae5!important;-webkit-animation:bounceIn .75s 1;animation:bounceIn .75s 1;-webkit-animation-fill-mode:forwards;animation-fill-mode:forwards}.ce-settings{position:absolute;z-index:2;--gap:8px}@media (min-width:651px){.ce-settings{position:absolute;top:calc(26px + var(--gap));left:0}.ce-settings--opened-top{top:calc(var(--gap)*-1 + var(--popover-height)*-1)}}.ce-settings__button{display:-webkit-inline-box;display:-ms-inline-flexbox;display:inline-flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;padding:6px 1px;border-radius:3px;cursor:pointer;border:0;outline:none;background-color:transparent;vertical-align:bottom;color:inherit;margin:0}.ce-settings__button svg{width:20px;height:20px}@media (max-width:650px){.ce-settings__button svg{width:28px;height:28px}}@media (hover:hover){.ce-settings__button:hover{background-color:#eff2f5}}.ce-settings__button--active{color:#388ae5}.ce-settings__button--focused{-webkit-box-shadow:inset 0 0 0 1px rgba(7,161,227,.08);box-shadow:inset 0 0 0 1px rgba(7,161,227,.08);background:rgba(34,186,255,.08)!important}.ce-settings__button--focused-animated{-webkit-animation-name:buttonClicked;animation-name:buttonClicked;-webkit-animation-duration:.25s;animation-duration:.25s}.ce-settings__button:not(:nth-child(3n+3)){margin-right:3px}.ce-settings__button:nth-child(n+4){margin-top:3px}.ce-settings__button{line-height:32px}.ce-settings__button--disabled{cursor:not-allowed!important;opacity:.3}.ce-settings__button--selected{color:#388ae5}@-webkit-keyframes fade-in{0%{opacity:0}to{opacity:1}}@keyframes fade-in{0%{opacity:0}to{opacity:1}}.ce-block{-webkit-animation:fade-in .3s ease;animation:fade-in .3s ease;-webkit-animation-fill-mode:none;-webkit-animation-fill-mode:initial;animation-fill-mode:none}.ce-block:first-of-type{margin-top:0}.ce-block--selected .ce-block__content{background:#e1f2ff}.ce-block--selected .ce-block__content [contenteditable]{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.ce-block--selected .ce-block__content .ce-stub,.ce-block--selected .ce-block__content img{opacity:.55}.ce-block--stretched .ce-block__content{max-width:none}.ce-block__content{position:relative;max-width:650px;margin:0 auto;-webkit-transition:background-color .15s ease;transition:background-color .15s ease}.ce-block--drop-target .ce-block__content:before{content:"";position:absolute;top:100%;left:-20px;margin-top:-1px;height:8px;width:8px;border:solid #388ae5;border-width:1px 1px 0 0;-webkit-transform-origin:right;transform-origin:right;-webkit-transform:rotate(45deg);transform:rotate(45deg)}.ce-block--drop-target .ce-block__content:after{content:"";position:absolute;top:100%;height:1px;width:100%;color:#388ae5;background:repeating-linear-gradient(90deg,#388ae5,#388ae5 1px,#fff 0,#fff 6px)}.ce-block a{cursor:pointer;text-decoration:underline}.ce-block b{font-weight:700}.ce-block i{font-style:italic}@media (min-width:651px){.codex-editor--narrow .ce-block--focused{margin-right:-50px;padding-right:50px}}.wobble{-webkit-animation-name:wobble;animation-name:wobble;-webkit-animation-duration:.4s;animation-duration:.4s}@-webkit-keyframes wobble{0%{-webkit-transform:translateZ(0);transform:translateZ(0)}15%{-webkit-transform:translate3d(-5%,0,0) rotate(-5deg);transform:translate3d(-5%,0,0) rotate(-5deg)}30%{-webkit-transform:translate3d(2%,0,0) rotate(3deg);transform:translate3d(2%,0,0) rotate(3deg)}45%{-webkit-transform:translate3d(-3%,0,0) rotate(-3deg);transform:translate3d(-3%,0,0) rotate(-3deg)}60%{-webkit-transform:translate3d(2%,0,0) rotate(2deg);transform:translate3d(2%,0,0) rotate(2deg)}75%{-webkit-transform:translate3d(-1%,0,0) rotate(-1deg);transform:translate3d(-1%,0,0) rotate(-1deg)}to{-webkit-transform:translateZ(0);transform:translateZ(0)}}@keyframes wobble{0%{-webkit-transform:translateZ(0);transform:translateZ(0)}15%{-webkit-transform:translate3d(-5%,0,0) rotate(-5deg);transform:translate3d(-5%,0,0) rotate(-5deg)}30%{-webkit-transform:translate3d(2%,0,0) rotate(3deg);transform:translate3d(2%,0,0) rotate(3deg)}45%{-webkit-transform:translate3d(-3%,0,0) rotate(-3deg);transform:translate3d(-3%,0,0) rotate(-3deg)}60%{-webkit-transform:translate3d(2%,0,0) rotate(2deg);transform:translate3d(2%,0,0) rotate(2deg)}75%{-webkit-transform:translate3d(-1%,0,0) rotate(-1deg);transform:translate3d(-1%,0,0) rotate(-1deg)}to{-webkit-transform:translateZ(0);transform:translateZ(0)}}@-webkit-keyframes bounceIn{0%,20%,40%,60%,80%,to{-webkit-animation-timing-function:cubic-bezier(.215,.61,.355,1);animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{-webkit-transform:scale3d(.9,.9,.9);transform:scale3d(.9,.9,.9)}20%{-webkit-transform:scale3d(1.03,1.03,1.03);transform:scale3d(1.03,1.03,1.03)}60%{-webkit-transform:scaleX(1);transform:scaleX(1)}}@keyframes bounceIn{0%,20%,40%,60%,80%,to{-webkit-animation-timing-function:cubic-bezier(.215,.61,.355,1);animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{-webkit-transform:scale3d(.9,.9,.9);transform:scale3d(.9,.9,.9)}20%{-webkit-transform:scale3d(1.03,1.03,1.03);transform:scale3d(1.03,1.03,1.03)}60%{-webkit-transform:scaleX(1);transform:scaleX(1)}}@-webkit-keyframes selectionBounce{0%,20%,40%,60%,80%,to{-webkit-animation-timing-function:cubic-bezier(.215,.61,.355,1);animation-timing-function:cubic-bezier(.215,.61,.355,1)}50%{-webkit-transform:scale3d(1.01,1.01,1.01);transform:scale3d(1.01,1.01,1.01)}70%{-webkit-transform:scaleX(1);transform:scaleX(1)}}@keyframes selectionBounce{0%,20%,40%,60%,80%,to{-webkit-animation-timing-function:cubic-bezier(.215,.61,.355,1);animation-timing-function:cubic-bezier(.215,.61,.355,1)}50%{-webkit-transform:scale3d(1.01,1.01,1.01);transform:scale3d(1.01,1.01,1.01)}70%{-webkit-transform:scaleX(1);transform:scaleX(1)}}@-webkit-keyframes buttonClicked{0%,20%,40%,60%,80%,to{-webkit-animation-timing-function:cubic-bezier(.215,.61,.355,1);animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{-webkit-transform:scale3d(.95,.95,.95);transform:scale3d(.95,.95,.95)}60%{-webkit-transform:scale3d(1.02,1.02,1.02);transform:scale3d(1.02,1.02,1.02)}80%{-webkit-transform:scaleX(1);transform:scaleX(1)}}@keyframes buttonClicked{0%,20%,40%,60%,80%,to{-webkit-animation-timing-function:cubic-bezier(.215,.61,.355,1);animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{-webkit-transform:scale3d(.95,.95,.95);transform:scale3d(.95,.95,.95)}60%{-webkit-transform:scale3d(1.02,1.02,1.02);transform:scale3d(1.02,1.02,1.02)}80%{-webkit-transform:scaleX(1);transform:scaleX(1)}}@-webkit-keyframes panelShowing{0%{opacity:0;-webkit-transform:translateY(-8px) scale(.9);transform:translateY(-8px) scale(.9)}70%{opacity:1;-webkit-transform:translateY(2px);transform:translateY(2px)}to{-webkit-transform:translateY(0);transform:translateY(0)}}@keyframes panelShowing{0%{opacity:0;-webkit-transform:translateY(-8px) scale(.9);transform:translateY(-8px) scale(.9)}70%{opacity:1;-webkit-transform:translateY(2px);transform:translateY(2px)}to{-webkit-transform:translateY(0);transform:translateY(0)}}@-webkit-keyframes panelShowingMobile{0%{opacity:0;-webkit-transform:translateY(14px) scale(.98);transform:translateY(14px) scale(.98)}70%{opacity:1;-webkit-transform:translateY(-4px);transform:translateY(-4px)}to{-webkit-transform:translateY(0);transform:translateY(0)}}@keyframes panelShowingMobile{0%{opacity:0;-webkit-transform:translateY(14px) scale(.98);transform:translateY(14px) scale(.98)}70%{opacity:1;-webkit-transform:translateY(-4px);transform:translateY(-4px)}to{-webkit-transform:translateY(0);transform:translateY(0)}}.cdx-block{padding:.4em 0}.cdx-block::-webkit-input-placeholder{line-height:normal!important}.cdx-input{border:1px solid rgba(201,201,204,.48);-webkit-box-shadow:inset 0 1px 2px 0 rgba(35,44,72,.06);box-shadow:inset 0 1px 2px 0 rgba(35,44,72,.06);border-radius:3px;padding:10px 12px;outline:none;width:100%;-webkit-box-sizing:border-box;box-sizing:border-box}.cdx-input[data-placeholder]:before{position:static!important;display:inline-block;width:0;white-space:nowrap;pointer-events:none}.cdx-settings-button{display:-webkit-inline-box;display:-ms-inline-flexbox;display:inline-flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;padding:6px 1px;border-radius:3px;cursor:pointer;border:0;outline:none;background-color:transparent;vertical-align:bottom;color:inherit;margin:0}.cdx-settings-button svg{width:20px;height:20px}@media (max-width:650px){.cdx-settings-button svg{width:28px;height:28px}}@media (hover:hover){.cdx-settings-button:hover{background-color:#eff2f5}}.cdx-settings-button--focused{-webkit-box-shadow:inset 0 0 0 1px rgba(7,161,227,.08);box-shadow:inset 0 0 0 1px rgba(7,161,227,.08);background:rgba(34,186,255,.08)!important}.cdx-settings-button--focused-animated{-webkit-animation-name:buttonClicked;animation-name:buttonClicked;-webkit-animation-duration:.25s;animation-duration:.25s}.cdx-settings-button{min-width:26px;min-height:26px}.cdx-settings-button--active{color:#388ae5}.cdx-settings-button svg{width:auto;height:auto}@media (max-width:650px){.cdx-settings-button{width:36px;height:36px;border-radius:8px}}.cdx-loader{position:relative;border:1px solid rgba(201,201,204,.48)}.cdx-loader:before{content:"";position:absolute;left:50%;top:50%;width:18px;height:18px;margin:-11px 0 0 -11px;border:2px solid rgba(201,201,204,.48);border-left-color:#388ae5;border-radius:50%;-webkit-animation:cdxRotation 1.2s linear infinite;animation:cdxRotation 1.2s linear infinite}@-webkit-keyframes cdxRotation{0%{-webkit-transform:rotate(0deg);transform:rotate(0deg)}to{-webkit-transform:rotate(1turn);transform:rotate(1turn)}}@keyframes cdxRotation{0%{-webkit-transform:rotate(0deg);transform:rotate(0deg)}to{-webkit-transform:rotate(1turn);transform:rotate(1turn)}}.cdx-button{padding:13px;border-radius:3px;border:1px solid rgba(201,201,204,.48);font-size:14.9px;background:#fff;-webkit-box-shadow:0 2px 2px 0 rgba(18,30,57,.04);box-shadow:0 2px 2px 0 rgba(18,30,57,.04);color:#707684;text-align:center;cursor:pointer}@media (hover:hover){.cdx-button:hover{background:#fbfcfe;-webkit-box-shadow:0 1px 3px 0 rgba(18,30,57,.08);box-shadow:0 1px 3px 0 rgba(18,30,57,.08)}}.cdx-button svg{height:20px;margin-right:.2em;margin-top:-2px}.ce-stub{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;width:100%;padding:3.5em 0;margin:17px 0;border-radius:3px;background:#fcf7f7;color:#b46262}.ce-stub__info{margin-left:20px}.ce-stub__title{margin-bottom:3px;font-weight:600;font-size:18px;text-transform:capitalize}.ce-stub__subtitle{font-size:16px}.codex-editor.codex-editor--rtl{direction:rtl}.codex-editor.codex-editor--rtl .cdx-list{padding-left:0;padding-right:40px}.codex-editor.codex-editor--rtl .ce-toolbar__plus{right:-26px;left:auto}.codex-editor.codex-editor--rtl .ce-toolbar__actions{right:auto;left:-26px}@media (max-width:650px){.codex-editor.codex-editor--rtl .ce-toolbar__actions{margin-left:0;margin-right:auto;padding-right:0;padding-left:10px}}.codex-editor.codex-editor--rtl .ce-settings{left:5px;right:auto}.codex-editor.codex-editor--rtl .ce-settings:before{right:auto;left:25px}.codex-editor.codex-editor--rtl .ce-settings__button:not(:nth-child(3n+3)){margin-left:3px;margin-right:0}.codex-editor.codex-editor--rtl .ce-conversion-tool__icon{margin-right:0;margin-left:10px}.codex-editor.codex-editor--rtl .ce-inline-toolbar__dropdown{border-right:0 solid transparent;border-left:1px solid rgba(201,201,204,.48);margin:0 -6px 0 6px}.codex-editor.codex-editor--rtl .ce-inline-toolbar__dropdown .icon--toggler-down{margin-left:0;margin-right:4px}@media (min-width:651px){.codex-editor--narrow.codex-editor--rtl .ce-toolbar__plus{left:0;right:5px}}@media (min-width:651px){.codex-editor--narrow.codex-editor--rtl .ce-toolbar__actions{left:-5px}}.ce-popover{opacity:0;will-change:opacity,transform;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column;padding:6px;min-width:200px;width:200px;overflow:hidden;-webkit-box-sizing:border-box;box-sizing:border-box;-ms-flex-negative:0;flex-shrink:0;max-height:0;pointer-events:none;position:absolute;background-color:#fff;border:1px solid #e8e8eb;-webkit-box-shadow:0 3px 15px -3px rgba(13,20,33,.13);box-shadow:0 3px 15px -3px rgba(13,20,33,.13);border-radius:6px;z-index:2}.ce-popover--left-oriented:before{left:15px;margin-left:0}.ce-popover--right-oriented:before{left:auto;right:15px;margin-left:0}.ce-popover{z-index:4;-ms-flex-wrap:nowrap;flex-wrap:nowrap}.ce-popover--opened{opacity:1;max-height:270px;pointer-events:auto;-webkit-animation:panelShowing .1s ease;animation:panelShowing .1s ease}@media (max-width:650px){.ce-popover--opened{-webkit-animation:panelShowingMobile .25s ease;animation:panelShowingMobile .25s ease}}.ce-popover::-webkit-scrollbar{width:7px}.ce-popover::-webkit-scrollbar-thumb{-webkit-box-sizing:border-box;box-sizing:border-box;-webkit-box-shadow:inset 0 0 2px 2px #eff2f5;box-shadow:inset 0 0 2px 2px #eff2f5;border-color:transparent;border-style:solid;border-width:4px 3px 4px 0}@media (max-width:650px){.ce-popover{--offset:5px;position:fixed;max-width:none;min-width:calc(100% - var(--offset)*2);left:var(--offset);right:var(--offset);bottom:calc(var(--offset) + env(safe-area-inset-bottom));top:auto;border-radius:10px}}.ce-popover__items{overflow-y:auto;-ms-scroll-chaining:none;overscroll-behavior:contain}@media (min-width:651px){.ce-popover__items{margin-top:5px}}.ce-popover__item{display:grid;grid-template-columns:auto auto 1fr;grid-template-rows:auto;-webkit-box-pack:start;-ms-flex-pack:start;justify-content:start;white-space:nowrap;padding:3px;font-size:14px;line-height:20px;font-weight:500;cursor:pointer;-webkit-box-align:center;-ms-flex-align:center;align-items:center;border-radius:6px}.ce-popover__item:not(:last-of-type){margin-bottom:1px}@media (max-width:650px){.ce-popover__item{font-size:16px;padding:4px}}@media (hover:hover){.ce-popover__item:hover:not(.ce-popover__item--no-visible-hover){background-color:#eff2f5}.ce-popover__item:hover .ce-popover__item-icon{-webkit-box-shadow:none;box-shadow:none}}.ce-popover__item--disabled{color:#707684;cursor:default;pointer-events:none}.ce-popover__item--disabled .ce-popover__item-icon{-webkit-box-shadow:0 0 0 1px #eff0f1;box-shadow:0 0 0 1px #eff0f1}.ce-popover__item--focused:not(.ce-popover__item--no-visible-focus){-webkit-box-shadow:inset 0 0 0 1px rgba(7,161,227,.08);box-shadow:inset 0 0 0 1px rgba(7,161,227,.08);background:rgba(34,186,255,.08)!important}.ce-popover__item--hidden{display:none}.ce-popover__item--active{background:rgba(56,138,229,.1);color:#388ae5}.ce-popover__item--confirmation{background:#e24a4a}.ce-popover__item--confirmation .ce-popover__item-icon{color:#e24a4a}.ce-popover__item--confirmation .ce-popover__item-label{color:#fff}@media (hover:hover){.ce-popover__item--confirmation:not(.ce-popover__item--no-visible-hover):hover{background:#ce4343}}.ce-popover__item--confirmation:not(.ce-popover__item--no-visible-focus).ce-popover__item--focused{background:#ce4343!important}.ce-popover__item-icon{display:-webkit-inline-box;display:-ms-inline-flexbox;display:inline-flex;width:26px;height:26px;-webkit-box-shadow:0 0 0 1px rgba(201,201,204,.48);box-shadow:0 0 0 1px rgba(201,201,204,.48);border-radius:5px;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;background:#fff;-webkit-box-sizing:content-box;box-sizing:content-box;-ms-flex-negative:0;flex-shrink:0;margin-right:10px}.ce-popover__item-icon svg{width:20px;height:20px}@media (max-width:650px){.ce-popover__item-icon{width:36px;height:36px;border-radius:8px}.ce-popover__item-icon svg{width:28px;height:28px}}.ce-popover__item-label{overflow:hidden;white-space:nowrap;text-overflow:ellipsis}.ce-popover__item-label:after{content:"";width:25px;display:inline-block}.ce-popover__item-secondary-label{color:#707684;font-size:12px;margin-left:auto;white-space:nowrap;letter-spacing:-.1em;padding-right:5px;margin-bottom:-2px;opacity:.6}@media (max-width:650px){.ce-popover__item-secondary-label{display:none}}.ce-popover__item--active .ce-popover__item-icon,.ce-popover__item--confirmation .ce-popover__item-icon,.ce-popover__item--focused .ce-popover__item-icon{-webkit-box-shadow:none;box-shadow:none}.ce-popover__no-found{display:grid;grid-template-columns:auto auto 1fr;grid-template-rows:auto;-webkit-box-pack:start;-ms-flex-pack:start;justify-content:start;white-space:nowrap;padding:3px;font-size:14px;line-height:20px;font-weight:500;cursor:pointer;-webkit-box-align:center;-ms-flex-align:center;align-items:center;border-radius:6px}.ce-popover__no-found:not(:last-of-type){margin-bottom:1px}@media (max-width:650px){.ce-popover__no-found{font-size:16px;padding:4px}}.ce-popover__no-found{color:#707684;display:none;cursor:default}.ce-popover__no-found--shown{display:block}@media (max-width:650px){.ce-popover__overlay{position:fixed;top:0;bottom:0;left:0;right:0;background:#1d202b;opacity:.5;z-index:3;-webkit-transition:opacity .12s ease-in;transition:opacity .12s ease-in;will-change:opacity;visibility:visible}.ce-popover .cdx-search-field{display:none}}.ce-popover__overlay--hidden{z-index:0;opacity:0;visibility:hidden}.ce-popover__custom-content:not(:empty){padding:4px}@media (min-width:651px){.ce-popover__custom-content:not(:empty){margin-top:5px;padding:0}}.ce-popover__custom-content--hidden{display:none}.cdx-search-field{--icon-margin-right:10px;background:rgba(232,232,235,.49);border:1px solid rgba(226,226,229,.2);border-radius:6px;padding:2px;display:grid;grid-template-columns:auto auto 1fr;grid-template-rows:auto}.cdx-search-field__icon{width:26px;height:26px;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;margin-right:var(--icon-margin-right)}.cdx-search-field__icon svg{width:20px;height:20px;color:#707684}.cdx-search-field__input{font-size:14px;outline:none;font-weight:500;font-family:inherit;border:0;background:transparent;margin:0;padding:0;line-height:22px;min-width:calc(100% - 26px - var(--icon-margin-right))}.cdx-search-field__input::-webkit-input-placeholder{color:#707684;font-weight:500}.cdx-search-field__input::-moz-placeholder{color:#707684;font-weight:500}.cdx-search-field__input:-ms-input-placeholder{color:#707684;font-weight:500}.cdx-search-field__input::-ms-input-placeholder{color:#707684;font-weight:500}.cdx-search-field__input::placeholder{color:#707684;font-weight:500}'},function(r,t,e){"use strict";e.r(t),e.d(t,"nanoid",function(){return s}),e.d(t,"customAlphabet",function(){return a}),e.d(t,"customRandom",function(){return o}),e.d(t,"urlAlphabet",function(){return i}),e.d(t,"random",function(){return n});let i="useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict",n=l=>crypto.getRandomValues(new Uint8Array(l)),o=(l,d,u)=>{let h=(2<<Math.log(l.length-1)/Math.LN2)-1,p=-~(1.6*h*d/l.length);return()=>{let m="";for(;;){let x=u(p),y=p;for(;y--;)if(m+=l[x[y]&h]||"",m.length===d)return m}}},a=(l,d)=>o(l,d,n),s=(l=21)=>{let d="",u=crypto.getRandomValues(new Uint8Array(l));for(;l--;){let h=63&u[l];d+=h<36?h.toString(36):h<62?(h-26).toString(36).toUpperCase():h<63?"_":"-"}return d}}])})});var Wd=we((pn,Yo)=>{(function(r,t){typeof pn=="object"&&typeof Yo=="object"?Yo.exports=t():typeof define=="function"&&define.amd?define([],t):typeof pn=="object"?pn.Undo=t():r.Undo=t()})(window,function(){return function(r){var t={};function e(i){if(t[i])return t[i].exports;var n=t[i]={i,l:!1,exports:{}};return r[i].call(n.exports,n,n.exports,e),n.l=!0,n.exports}return e.m=r,e.c=t,e.d=function(i,n,o){e.o(i,n)||Object.defineProperty(i,n,{enumerable:!0,get:o})},e.r=function(i){typeof Symbol!="undefined"&&Symbol.toStringTag&&Object.defineProperty(i,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(i,"__esModule",{value:!0})},e.t=function(i,n){if(1&n&&(i=e(i)),8&n||4&n&&typeof i=="object"&&i&&i.__esModule)return i;var o=Object.create(null);if(e.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:i}),2&n&&typeof i!="string")for(var a in i)e.d(o,a,function(s){return i[s]}.bind(null,a));return o},e.n=function(i){var n=i&&i.__esModule?function(){return i.default}:function(){return i};return e.d(n,"a",n),n},e.o=function(i,n){return Object.prototype.hasOwnProperty.call(i,n)},e.p="/",e(e.s=0)}([function(r,t,e){"use strict";function i(s,l){for(var d=0;d<l.length;d++){var u=l[d];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(s,u.key,u)}}e.r(t),e.d(t,"default",function(){return a});var n=function(){function s(h,p){(function(m,x){if(!(m instanceof x))throw new TypeError("Cannot call a class as a function")})(this,s),this.holder=typeof p=="string"?document.getElementById(p):p,this.observer=null,this.debounceTimer=200,this.mutationDebouncer=this.debounce(function(){h()},this.debounceTimer)}var l,d,u;return l=s,(d=[{key:"setMutationObserver",value:function(){var h=this,p=this.holder;this.observer=new MutationObserver(function(m){h.mutationHandler(m)}),this.observer.observe(p,{childList:!0,attributes:!0,subtree:!0,characterData:!0,characterDataOldValue:!0})}},{key:"mutationHandler",value:function(h){var p=this,m=!1;h.forEach(function(x){switch(x.type){case"childList":x.target===p.holder?p.onDestroy():m=!0;break;case"characterData":m=!0;break;case"attributes":x.target.classList.contains("ce-block")||(m=!0)}}),m&&this.mutationDebouncer()}},{key:"debounce",value:function(h,p){var m,x=this;return function(){for(var y=arguments.length,v=new Array(y),w=0;w<y;w++)v[w]=arguments[w];var k=x;clearTimeout(m),m=setTimeout(function(){return h.apply(k,v)},p)}}},{key:"onDestroy",value:function(){var h=new CustomEvent("destroy");document.dispatchEvent(h),this.observer.disconnect()}}])&&i(l.prototype,d),u&&i(l,u),s}();function o(s,l){for(var d=0;d<l.length;d++){var u=l[d];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(s,u.key,u)}}var a=function(){function s(h){var p=this,m=h.editor,x=h.onUpdate,y=h.maxLength;(function(k,c){if(!(k instanceof c))throw new TypeError("Cannot call a class as a function")})(this,s);var v={maxLength:30,onUpdate:function(){}},w=m.configuration;this.editor=m,this.shouldSaveHistory=!0,this.readOnly=w.readOnly,this.maxLength=y||v.maxLength,this.onUpdate=x||v.onUpdate,new n(function(){return p.registerChange()},w.holder).setMutationObserver(),this.setEventListeners(),this.initialItem=null,this.clear()}var l,d,u;return l=s,u=[{key:"isReadOnlySupported",get:function(){return!0}}],(d=[{key:"truncate",value:function(h,p){for(;h.length>p;)h.shift()}},{key:"initialize",value:function(h){var p="blocks"in h?h.blocks:h,m={index:p.length-1,state:p};this.stack[0]=m,this.initialItem=m}},{key:"clear",value:function(){this.stack=this.initialItem?[this.initialItem]:[{index:0,state:[]}],this.position=0,this.onUpdate()}},{key:"registerChange",value:function(){var h=this;this.readOnly||(this.editor&&this.editor.save&&this.shouldSaveHistory&&this.editor.save().then(function(p){h.editorDidUpdate(p.blocks)&&h.save(p.blocks)}),this.shouldSaveHistory=!0)}},{key:"editorDidUpdate",value:function(h){var p=this.stack[this.position].state;return h.length!==p.length||JSON.stringify(p)!==JSON.stringify(h)}},{key:"save",value:function(h){this.position>=this.maxLength&&this.truncate(this.stack,this.maxLength),this.position=Math.min(this.position,this.stack.length-1),this.stack=this.stack.slice(0,this.position+1);var p=this.editor.blocks.getCurrentBlockIndex();this.stack.push({index:p,state:h}),this.position+=1,this.onUpdate()}},{key:"undo",value:function(){var h=this;if(this.canUndo()){this.shouldSaveHistory=!1;var p=this.stack[this.position-=1],m=p.index,x=p.state;this.onUpdate(),this.editor.blocks.render({blocks:x}).then(function(){return h.editor.caret.setToBlock(m,"end")})}}},{key:"redo",value:function(){var h=this;if(this.canRedo()){this.shouldSaveHistory=!1;var p=this.stack[this.position+=1],m=p.index,x=p.state;this.onUpdate(),this.editor.blocks.render({blocks:x}).then(function(){return h.editor.caret.setToBlock(m,"end")})}}},{key:"canUndo",value:function(){return!this.readOnly&&this.position>0}},{key:"canRedo",value:function(){return!this.readOnly&&this.position<this.count()}},{key:"count",value:function(){return this.stack.length-1}},{key:"setEventListeners",value:function(){var h=this,p=/(Mac)/i.test(navigator.platform)?"metaKey":"ctrlKey",m=function(y){y[p]&&y.key==="z"&&(y.preventDefault(),h.undo())},x=function(y){y[p]&&y.key==="y"&&(y.preventDefault(),h.redo())};document.addEventListener("keydown",m),document.addEventListener("keydown",x),document.addEventListener("destroy",function(){document.removeEventListener("keydown",m),document.removeEventListener("keydown",x)})}}])&&o(l.prototype,d),u&&o(l,u),s}()}]).default})});var tf=we((exports,module)=>{frappe.dashboard_utils={render_chart_filters:function(r,t,e,i){r.forEach(n=>{let o="",a="";n.icon&&(o=frappe.utils.icon(n.icon)),n.class&&(a=n.class);let s=`<div class="${t} ${a} btn-group dropdown pull-right">
					<a data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
						<button class="btn btn-secondary btn-xs">
							${o}
							<span class="filter-label">${__(n.label)}</span>
							${frappe.utils.icon("select","xs")}
						</button>
				</a>`,l;n.fieldnames?l=n.options.map((h,p)=>`<li>
						<a class="dropdown-item" data-fieldname="${n.fieldnames[p]}" data-option="${encodeURIComponent(h)}">${__(h)}</a>
					</li>`).join(""):l=n.options.map(h=>`<li><a class="dropdown-item" data-option="${encodeURIComponent(h)}">${__(h)}</a></li>`).join("");let d=s+`<ul class="dropdown-menu">${l}</ul></div>`,u=$(d);i?u.prependTo(e):u.appendTo(e),u.find(".dropdown-menu").on("click","li a",h=>{let p=$(h.currentTarget),m;p.attr("data-fieldname")&&(m=p.attr("data-fieldname"));let x=decodeURIComponent(p.data("option"));p.parents(`.${t}`).find(".filter-label").html(__(x)),n.action(x,m)})})},get_filters_for_chart_type:function(r){if(r.chart_type==="Custom"&&r.source){let t="frappe.desk.doctype.dashboard_chart_source.dashboard_chart_source.get_config";return frappe.xcall(t,{name:r.source}).then(e=>(frappe.dom.eval(e),frappe.dashboards.chart_sources[r.source].filters))}else return r.chart_type==="Report"&&r.report_name?frappe.report_utils.get_report_filters(r.report_name).then(t=>t):Promise.resolve()},get_dashboard_settings(){return frappe.db.get_list("Dashboard Settings",{filters:{name:frappe.session.user},fields:["*"]}).then(r=>r.length?r[0]:this.create_dashboard_settings().then(t=>t))},create_dashboard_settings(){return frappe.xcall("frappe.desk.doctype.dashboard_settings.dashboard_settings.create_dashboard_settings",{user:frappe.session.user}).then(r=>r)},get_years_since_creation(r){let t=this.get_year(r),e=this.get_year(frappe.datetime.now_date()),i=[];for(var n=e;n>=t;n--)i.push(n);return i},get_year(r){return r.substring(0,r.indexOf("-"))},remove_common_static_filter_values(r,t){if(t)if($.isArray(r))r=r.filter(e=>{for(let i of t)if(e[0]==i[0]&&e[1]==i[1])return!1;return!0});else for(let e of Object.keys(t))delete r[e];return r},get_fields_for_dynamic_filter_dialog(r,t,e){let i=[{fieldtype:"HTML",fieldname:"description",options:`<div>
						<p>Set dynamic filter values in JavaScript for the required fields here.
						</p>
						<p>Ex:
							<code>frappe.defaults.get_user_default("Company")</code>
						</p>
					</div>`}];if(r)e&&(t=[...t,...e]),t.forEach(n=>{for(let o of i)if(o.fieldname==n[0]+":"+n[1])return;n[2]=="="&&i.push({label:`${n[1]} (${n[0]})`,fieldname:n[0]+":"+n[1],fieldtype:"Data"})});else{t=lt(lt({},e),t);for(let n of Object.keys(t))i.push({label:n,fieldname:n,fieldtype:"Data"})}return i},get_all_filters(doc){let filters=JSON.parse(doc.filters_json||"null"),dynamic_filters=JSON.parse(doc.dynamic_filters_json||"null");if(!dynamic_filters)return filters;if($.isArray(dynamic_filters))dynamic_filters.forEach(f=>{try{f[3]=eval(f[3])}catch(r){frappe.throw(__("Invalid expression set in filter {0} ({1})",[f[1],f[0]]))}}),filters=[...filters,...dynamic_filters];else{for(let key of Object.keys(dynamic_filters))try{let val=eval(dynamic_filters[key]);dynamic_filters[key]=val}catch(r){frappe.throw(__("Invalid expression set in filter {0}",[key]))}Object.assign(filters,dynamic_filters)}return filters},get_dashboard_link_field(){let r={label:__("Select Dashboard"),fieldtype:"Link",fieldname:"dashboard",options:"Dashboard"};return frappe.boot.developer_mode||(r.get_query=()=>({filters:{is_standard:0}})),r},get_add_to_dashboard_dialog(r,t,e){let i=this.get_dashboard_link_field(),n=new frappe.ui.Dialog({title:__("Add to Dashboard"),fields:[i],primary_action:o=>{o.name=r,o.set_standard=frappe.boot.developer_mode,frappe.xcall(e,{args:o}).then(()=>{let a=`<a href = "/app/dashboard/${o.dashboard}">${o.dashboard}</a>`,s=__("{0} {1} added to Dashboard {2}",[t,o.name,a]);frappe.msgprint(s)}),n.hide()}});return n}}});var Mf=we((T5,Rn)=>{(function(t){"use strict";typeof define=="function"&&define.amd?define(t):typeof Rn!="undefined"&&typeof Rn.exports!="undefined"?Rn.exports=t():window.Sortable=t()})(function(){"use strict";if(typeof window=="undefined"||!window.document)return function(){throw new Error("Sortable.js requires a window with a document")};var t,e,i,n,o,a,s,l,d,u,h,p,m,x,y=[],v=!1,w=!1,k=!1,c=[],_,g,b,E,T,C,S,A,L=!1,B=!1,P,M,O,I,j=/\s+/g,H="Sortable"+new Date().getTime(),N=window,D=N.document,K=N.parseInt,q=N.setTimeout,U=N.jQuery||N.Zepto,G=N.Polymer,Q={capture:!1,passive:!1},X=!!navigator.userAgent.match(/(?:Trident.*rv[ :]?11\.|msie|iemobile)/i),ie=!!navigator.userAgent.match(/Edge/i),ue=ie||X?"cssFloat":"float",fe="draggable"in D.createElement("div"),be=function(){if(X)return!1;var V=D.createElement("x");return V.style.cssText="pointer-events:auto",V.style.pointerEvents==="auto"}(),Se=!1,le=!1,ke=Math.abs,Re=Math.min,Me=[],Ne=function(V,ee){var ne=qe(V),he=K(ne.width),ce=It(V,0,ee),Ce=It(V,1,ee),Te=ce&&qe(ce),Be=Ce&&qe(Ce),Oe=Te&&K(Te.marginLeft)+K(Te.marginRight)+Ee(ce).width,$e=Be&&K(Be.marginLeft)+K(Be.marginRight)+Ee(Ce).width;if(ne.display==="flex")return ne.flexDirection==="column"||ne.flexDirection==="column-reverse"?"vertical":"horizontal";if(ce&&Te.float!=="none"){var Ve=Te.float==="left"?"left":"right";return Ce&&(Be.clear==="both"||Be.clear===Ve)?"vertical":"horizontal"}return ce&&(Te.display==="block"||Te.display==="flex"||Te.display==="table"||Te.display==="grid"||Oe>=he&&ne[ue]==="none"||Ce&&ne[ue]==="none"&&Oe+$e>he)?"vertical":"horizontal"},et=function(V,ee){for(var ne=0;ne<c.length;ne++)if(!c[ne].children.length){var he=Ee(c[ne]),ce=c[ne][H].options.emptyInsertThreshold,Ce=V>=he.left-ce&&V<=he.right+ce,Te=ee>=he.top-ce&&ee<=he.bottom+ce;if(Ce&&Te)return c[ne]}},Ke=function(V,ee,ne,he,ce){var Ce=Ee(ne),Te=he==="vertical"?Ce.left:Ce.top,Be=he==="vertical"?Ce.right:Ce.bottom,Oe=he==="vertical"?V:ee;return Te<Oe&&Oe<Be},Je=function(V,ee,ne){var he=V===t&&I||Ee(V),ce=ee===t&&I||Ee(ee),Ce=ne==="vertical"?he.left:he.top,Te=ne==="vertical"?he.right:he.bottom,Be=ne==="vertical"?he.width:he.height,Oe=ne==="vertical"?ce.left:ce.top,$e=ne==="vertical"?ce.right:ce.bottom,Ve=ne==="vertical"?ce.width:ce.height;return Ce===Oe||Te===$e||Ce+Be/2===Oe+Ve/2},Ue=function(V,ee){if(!V||!V.getBoundingClientRect)return N;var ne=V,he=!1;do if(ne.clientWidth<ne.scrollWidth||ne.clientHeight<ne.scrollHeight){var ce=qe(ne);if(ne.clientWidth<ne.scrollWidth&&(ce.overflowX=="auto"||ce.overflowX=="scroll")||ne.clientHeight<ne.scrollHeight&&(ce.overflowY=="auto"||ce.overflowY=="scroll")){if(!ne||!ne.getBoundingClientRect||ne===D.body)return N;if(he||ee)return ne;he=!0}}while(ne=ne.parentNode);return N},nt=hr(function(V,ee,ne,he){if(ee.scroll){var ce=ne?ne[H]:window,Ce=ee.scrollSensitivity,Te=ee.scrollSpeed,Be=V.clientX,Oe=V.clientY,$e=window.innerWidth,Ve=window.innerHeight,He=!1;d!==ne&&(Ze(),l=ee.scroll,u=ee.scrollFn,l===!0&&(l=Ue(ne,!0),d=l));var ot=0,vt=l;do{var Qe=vt,We=Ee(Qe),Ot=We.top,Mt=We.bottom,xt=We.left,St=We.right,Y=We.width,oe=We.height,Z,ae,W,R,z,F,te,J,re;if(Qe!==N?(Z=Qe.scrollWidth,ae=Qe.scrollHeight,W=qe(Qe),F=Y<Z&&(W.overflowX==="auto"||W.overflowX==="scroll"),te=oe<ae&&(W.overflowY==="auto"||W.overflowY==="scroll"),J=Qe.scrollLeft,re=Qe.scrollTop):(Z=D.documentElement.scrollWidth,ae=D.documentElement.scrollHeight,W=qe(D.documentElement),F=Y<Z&&(W.overflowX==="auto"||W.overflowX==="scroll"||W.overflowX==="visible"),te=oe<ae&&(W.overflowY==="auto"||W.overflowY==="scroll"||W.overflowY==="visible"),J=D.documentElement.scrollLeft,re=D.documentElement.scrollTop),R=F&&(ke(St-Be)<=Ce&&J+Y<Z)-(ke(xt-Be)<=Ce&&!!J),z=te&&(ke(Mt-Oe)<=Ce&&re+oe<ae)-(ke(Ot-Oe)<=Ce&&!!re),!y[ot])for(var se=0;se<=ot;se++)y[se]||(y[se]={});(y[ot].vx!=R||y[ot].vy!=z||y[ot].el!==Qe)&&(y[ot].el=Qe,y[ot].vx=R,y[ot].vy=z,clearInterval(y[ot].pid),Qe&&(R!=0||z!=0)&&(He=!0,y[ot].pid=setInterval(function(){he&&this.layer===0&&Pe.active._emulateDragOver(!0);var ve=y[this.layer].vy?y[this.layer].vy*Te:0,me=y[this.layer].vx?y[this.layer].vx*Te:0;typeof u=="function"&&u.call(ce,me,ve,V,T,y[this.layer].el)!=="continue"||(y[this.layer].el===N?N.scrollTo(N.pageXOffset+me,N.pageYOffset+ve):(y[this.layer].el.scrollTop+=ve,y[this.layer].el.scrollLeft+=me))}.bind({layer:ot}),24))),ot++}while(ee.bubbleScroll&&vt!==N&&(vt=Ue(vt,!1)));v=He}},30),Ze=function(){y.forEach(function(V){clearInterval(V.pid)}),y=[]},de=function(V){function ee(ce,Ce){return function(Te,Be,Oe,$e){var Ve=Te.options.group.name&&Be.options.group.name&&Te.options.group.name===Be.options.group.name;if(ce==null&&(Ce||Ve))return!0;if(ce==null||ce===!1)return!1;if(Ce&&ce==="clone")return ce;if(typeof ce=="function")return ee(ce(Te,Be,Oe,$e),Ce)(Te,Be,Oe,$e);var He=(Ce?Te:Be).options.group.name;return ce===!0||typeof ce=="string"&&ce===He||ce.join&&ce.indexOf(He)>-1}}var ne={},he=V.group;(!he||typeof he!="object")&&(he={name:he}),ne.name=he.name,ne.checkPull=ee(he.pull,!0),ne.checkPut=ee(he.put),ne.revertClone=he.revertClone,V.group=ne},ye=function(V){!t||!t.parentNode||t.parentNode[H]&&t.parentNode[H]._computeIsAligned(V)},Ie=function(V,ee){for(var ne=ee;!ne[H];)ne=ne.parentNode;return V===ne},Fe=function(V,ee,ne){for(var he=V.parentNode;he&&!he[H];)he=he.parentNode;he&&he[H][ne](nr(ee,{artificialBubble:!0}))},it=function(){!be&&i&&qe(i,"display","none")},ht=function(){!be&&i&&qe(i,"display","")};D.addEventListener("click",function(V){if(k)return V.preventDefault(),V.stopPropagation&&V.stopPropagation(),V.stopImmediatePropagation&&V.stopImmediatePropagation(),k=!1,!1},!0);var _t=function(V){if(V=V.touches?V.touches[0]:V,t){var ee=et(V.clientX,V.clientY);ee&&ee[H]._onDragOver({clientX:V.clientX,clientY:V.clientY,target:ee,rootEl:ee})}};Ge(D,"dragover",_t),Ge(D,"mousemove",_t),Ge(D,"touchmove",_t);function Pe(V,ee){if(!(V&&V.nodeType&&V.nodeType===1))throw"Sortable: `el` must be HTMLElement, not "+{}.toString.call(V);this.el=V,this.options=ee=nr({},ee),V[H]=this;var ne={group:null,sort:!0,disabled:!1,store:null,handle:null,scroll:!0,scrollSensitivity:30,scrollSpeed:10,bubbleScroll:!0,draggable:/[uo]l/i.test(V.nodeName)?">li":">*",swapThreshold:1,invertSwap:!1,invertedSwapThreshold:null,removeCloneOnHide:!0,direction:function(){return Ne(V,this.options)},ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",dragClass:"sortable-drag",ignore:"a, img",filter:null,preventOnFilter:!0,animation:0,easing:null,setData:function(Ce,Te){Ce.setData("Text",Te.textContent)},dropBubble:!1,dragoverBubble:!1,dataIdAttr:"data-id",delay:0,touchStartThreshold:K(window.devicePixelRatio,10)||1,forceFallback:!1,fallbackClass:"sortable-fallback",fallbackOnBody:!1,fallbackTolerance:0,fallbackOffset:{x:0,y:0},supportPointer:Pe.supportPointer!==!1&&("PointerEvent"in window||window.navigator&&"msPointerEnabled"in window.navigator),emptyInsertThreshold:5};for(var he in ne)!(he in ee)&&(ee[he]=ne[he]);de(ee);for(var ce in this)ce.charAt(0)==="_"&&typeof this[ce]=="function"&&(this[ce]=this[ce].bind(this));this.nativeDraggable=ee.forceFallback?!1:fe,ee.supportPointer?Ge(V,"pointerdown",this._onTapStart):(Ge(V,"mousedown",this._onTapStart),Ge(V,"touchstart",this._onTapStart)),this.nativeDraggable&&(Ge(V,"dragover",this),Ge(V,"dragenter",this)),c.push(this.el),ee.store&&ee.store.get&&this.sort(ee.store.get(this)||[])}Pe.prototype={constructor:Pe,_computeIsAligned:function(V){var ee;if(i&&!be?(it(),ee=D.elementFromPoint(V.clientX,V.clientY),ht()):ee=V.target,ee=yt(ee,this.options.draggable,this.el,!1),!le&&!(!t||t.parentNode!==this.el)){for(var ne=this.el.children,he=0;he<ne.length;he++)yt(ne[he],this.options.draggable,this.el,!1)&&ne[he]!==ee&&(ne[he].sortableMouseAligned=Ke(V.clientX,V.clientY,ne[he],this._getDirection(V,null),this.options));yt(ee,this.options.draggable,this.el,!0)||(S=null),le=!0,q(function(){le=!1},30)}},_getDirection:function(V,ee){return typeof this.options.direction=="function"?this.options.direction.call(this,V,ee,t):this.options.direction},_onTapStart:function(V){if(!!V.cancelable){var ee=this,ne=this.el,he=this.options,ce=he.preventOnFilter,Ce=V.type,Te=V.touches&&V.touches[0],Be=(Te||V).target,Oe=V.target.shadowRoot&&(V.path&&V.path[0]||V.composedPath&&V.composedPath()[0])||Be,$e=he.filter,Ve;if(At(ne),!(X&&!V.artificialBubble&&!Ie(ne,Be))&&!t&&!(/mousedown|pointerdown/.test(Ce)&&V.button!==0||he.disabled)&&!Oe.isContentEditable){if(Be=yt(Be,he.draggable,ne,!1),!Be){X&&Fe(ne,V,"_onTapStart");return}if(s!==Be){if(Ve=Pt(Be,he.draggable),typeof $e=="function"){if($e.call(this,V,Be,this)){je(ee,Oe,"filter",Be,ne,ne,Ve),ce&&V.cancelable&&V.preventDefault();return}}else if($e&&($e=$e.split(",").some(function(He){if(He=yt(Oe,He.trim(),ne,!1),He)return je(ee,He,"filter",Be,ne,ne,Ve),!0}),$e)){ce&&V.cancelable&&V.preventDefault();return}he.handle&&!yt(Oe,he.handle,ne,!1)||this._prepareDragStart(V,Te,Be,Ve)}}}},_handleAutoScroll:function(V,ee){if(!(!t||!this.options.scroll)){var ne=V.clientX,he=V.clientY,ce=D.elementFromPoint(ne,he),Ce=this;if(ee||ie||X){nt(V,Ce.options,ce,ee);var Te=Ue(ce,!0);v&&(!_||ne!==g||he!==b)&&(_&&clearInterval(_),_=setInterval(function(){if(!!t){var Be=Ue(D.elementFromPoint(ne,he),!0);Be!==Te&&(Te=Be,Ze(),nt(V,Ce.options,Te,ee))}},10),g=ne,b=he)}else{if(!Ce.options.bubbleScroll||Ue(ce,!0)===window){Ze();return}nt(V,Ce.options,Ue(ce,!1),!1)}}},_prepareDragStart:function(V,ee,ne,he){var ce=this,Ce=ce.el,Te=ce.options,Be=Ce.ownerDocument,Oe;ne&&!t&&ne.parentNode===Ce&&(o=Ce,t=ne,e=t.parentNode,a=t.nextSibling,s=ne,m=Te.group,h=he,E={target:t,clientX:(ee||V).clientX,clientY:(ee||V).clientY},this._lastX=(ee||V).clientX,this._lastY=(ee||V).clientY,t.style["will-change"]="all",t.style.transition="",t.style.transform="",Oe=function(){ce._disableDelayedDrag(),t.draggable=ce.nativeDraggable,ce._triggerDragStart(V,ee),je(ce,o,"choose",t,o,o,h),tt(t,Te.chosenClass,!0)},Te.ignore.split(",").forEach(function($e){dt(t,$e.trim(),rt)}),Te.supportPointer?Ge(Be,"pointerup",ce._onDrop):(Ge(Be,"mouseup",ce._onDrop),Ge(Be,"touchend",ce._onDrop),Ge(Be,"touchcancel",ce._onDrop)),Te.delay?(Ge(Be,"mouseup",ce._disableDelayedDrag),Ge(Be,"touchend",ce._disableDelayedDrag),Ge(Be,"touchcancel",ce._disableDelayedDrag),Ge(Be,"mousemove",ce._delayedDragTouchMoveHandler),Ge(Be,"touchmove",ce._delayedDragTouchMoveHandler),Te.supportPointer&&Ge(Be,"pointermove",ce._delayedDragTouchMoveHandler),ce._dragStartTimer=q(Oe,Te.delay)):Oe())},_delayedDragTouchMoveHandler:function(V){var ee=V.touches?V.touches[0]:V;Re(ke(ee.clientX-this._lastX),ke(ee.clientY-this._lastY))>=this.options.touchStartThreshold&&this._disableDelayedDrag()},_disableDelayedDrag:function(){var V=this.el.ownerDocument;clearTimeout(this._dragStartTimer),Xe(V,"mouseup",this._disableDelayedDrag),Xe(V,"touchend",this._disableDelayedDrag),Xe(V,"touchcancel",this._disableDelayedDrag),Xe(V,"mousemove",this._delayedDragTouchMoveHandler),Xe(V,"touchmove",this._delayedDragTouchMoveHandler),Xe(V,"pointermove",this._delayedDragTouchMoveHandler)},_triggerDragStart:function(V,ee){ee=ee||(V.pointerType=="touch"?V:null),!this.nativeDraggable||ee?this.options.supportPointer?Ge(D,"pointermove",this._onTouchMove):ee?Ge(D,"touchmove",this._onTouchMove):Ge(D,"mousemove",this._onTouchMove):(Ge(t,"dragend",this),Ge(o,"dragstart",this._onDragStart));try{D.selection?wt(function(){D.selection.empty()}):window.getSelection().removeAllRanges()}catch(ne){}},_dragStarted:function(V){if(w=!1,o&&t){this.nativeDraggable&&(Ge(D,"dragover",this._handleAutoScroll),Ge(D,"dragover",ye));var ee=this.options;!V&&tt(t,ee.dragClass,!1),tt(t,ee.ghostClass,!0),qe(t,"transform",""),Pe.active=this,V&&this._appendGhost(),je(this,o,"start",t,o,o,h)}else this._nulling()},_emulateDragOver:function(V){if(T){if(this._lastX===T.clientX&&this._lastY===T.clientY&&!V)return;this._lastX=T.clientX,this._lastY=T.clientY,it();for(var ee=D.elementFromPoint(T.clientX,T.clientY),ne=ee;ee&&ee.shadowRoot;)ee=ee.shadowRoot.elementFromPoint(T.clientX,T.clientY),ne=ee;if(ne)do{if(ne[H]){var he;if(he=ne[H]._onDragOver({clientX:T.clientX,clientY:T.clientY,target:ee,rootEl:ne}),he&&!this.options.dragoverBubble)break}ee=ne}while(ne=ne.parentNode);t.parentNode[H]._computeIsAligned(T),ht()}},_onTouchMove:function(V){if(E){var ee=this.options,ne=ee.fallbackTolerance,he=ee.fallbackOffset,ce=V.touches?V.touches[0]:V,Ce=i&&er(i),Te=i&&Ce&&Ce.a,Be=i&&Ce&&Ce.d,Oe=(ce.clientX-E.clientX+he.x)/(Te||1),$e=(ce.clientY-E.clientY+he.y)/(Be||1),Ve=V.touches?"translate3d("+Oe+"px,"+$e+"px,0)":"translate("+Oe+"px,"+$e+"px)";if(!Pe.active&&!w){if(ne&&Re(ke(ce.clientX-this._lastX),ke(ce.clientY-this._lastY))<ne)return;this._onDragStart(V,!0)}this._handleAutoScroll(ce,!0),C=!0,T=ce,qe(i,"webkitTransform",Ve),qe(i,"mozTransform",Ve),qe(i,"msTransform",Ve),qe(i,"transform",Ve),V.cancelable&&V.preventDefault()}},_appendGhost:function(){if(!i){var V=Ee(t,this.options.fallbackOnBody?D.body:o,!0),ee=qe(t),ne=this.options;i=t.cloneNode(!0),tt(i,ne.ghostClass,!1),tt(i,ne.fallbackClass,!0),tt(i,ne.dragClass,!0),qe(i,"box-sizing","border-box"),qe(i,"margin",0),qe(i,"top",V.top),qe(i,"left",V.left),qe(i,"width",V.width),qe(i,"height",V.height),qe(i,"opacity","0.8"),qe(i,"position","fixed"),qe(i,"zIndex","100000"),qe(i,"pointerEvents","none"),ne.fallbackOnBody&&D.body.appendChild(i)||o.appendChild(i)}},_onDragStart:function(V,ee){var ne=this,he=V.dataTransfer,ce=ne.options;n=Et(t),n.draggable=!1,n.style["will-change"]="",this._hideClone(),tt(n,ne.options.chosenClass,!1),ne._cloneId=wt(function(){ne.options.removeCloneOnHide||o.insertBefore(n,t),je(ne,o,"clone",t)}),!ee&&tt(t,ce.dragClass,!0),ee?(k=!0,ne._loopId=setInterval(ne._emulateDragOver,50)):(Xe(D,"mouseup",ne._onDrop),Xe(D,"touchend",ne._onDrop),Xe(D,"touchcancel",ne._onDrop),he&&(he.effectAllowed="move",ce.setData&&ce.setData.call(ne,he,t)),Ge(D,"drop",ne),qe(t,"transform","translateZ(0)")),w=!0,ne._dragStartId=wt(ne._dragStarted.bind(ne,ee)),Ge(D,"selectstart",ne)},_onDragOver:function(V){var ee=this.el,ne=V.target,he,ce,Ce,Te=this.options,Be=Te.group,Oe=Pe.active,$e=m===Be,Ve=Te.sort,He=this;if(Se||X&&!V.rootEl&&!V.artificialBubble&&!Ie(ee,ne))return;function ot(){return Oe&&(tt(t,x?x.options.ghostClass:Oe.options.ghostClass,!1),tt(t,Te.ghostClass,!0)),x!==He&&He!==Pe.active?x=He:He===Pe.active&&(x=null),(ne===t&&!t.animated||ne===ee&&!ne.animated)&&(S=null),!Te.dragoverBubble&&!V.rootEl&&ne!==D&&(He._handleAutoScroll(V),t.parentNode[H]._computeIsAligned(V)),!Te.dragoverBubble&&V.stopPropagation&&V.stopPropagation(),!0}function vt(){je(He,o,"change",ne,ee,o,h,Pt(t,Te.draggable),V)}if(V.preventDefault!==void 0&&V.cancelable&&V.preventDefault(),C=!0,ne=yt(ne,Te.draggable,ee,!0),!!yt(V.target,null,t,!0)||ne.animated)return ot();if(ne!==t&&(k=!1),Oe&&!Te.disabled&&($e?Ve||(Ce=!o.contains(t)):x===this||(this.lastPutMode=m.checkPull(this,Oe,t,V))&&Be.checkPut(this,Oe,t,V))){var Qe=this._getDirection(V,ne);if(he=Ee(t),Ce)return this._hideClone(),e=o,a?o.insertBefore(t,a):o.appendChild(t),ot();if(ee.children.length===0||ee.children[0]===i||pt(V,Qe,ee)&&!t.animated){if(ee.children.length!==0&&ee.children[0]!==i&&ee===V.target&&(ne=dr(ee)),ne&&(ce=Ee(ne)),$e?Oe._hideClone():Oe._showClone(this),tr(o,ee,t,he,ne,ce,V,!!ne)!==!1)return ee.appendChild(t),e=ee,I=null,vt(),this._animate(he,t),ne&&this._animate(ce,ne),ot()}else if(ne&&ne!==t&&ne.parentNode===ee){var We=0,Ot,Mt=ne.sortableMouseAligned,xt=t.parentNode!==ee,St=ze(ne,Qe==="vertical"?"top":"left");if(S!==ne&&(P=null,Ot=Ee(ne)[Qe==="vertical"?"top":"left"],L=!1),Je(t,ne,Qe)&&Mt||xt||St||Te.invertSwap||P==="insert"||P==="swap"?(P!=="swap"&&(B=Te.invertSwap||xt||v||St),We=Bt(V,ne,Qe,Te.swapThreshold,Te.invertedSwapThreshold==null?Te.swapThreshold:Te.invertedSwapThreshold,B,S===ne),P="swap"):(We=Xt(ne,Te),P="insert"),We===0)return ot();I=null,S=ne,A=We,ce=Ee(ne);var Y=ne.nextElementSibling,oe=!1;oe=We===1;var Z=tr(o,ee,t,he,ne,ce,V,oe);if(Z!==!1)return(Z===1||Z===-1)&&(oe=Z===1),Se=!0,q(rr,30),$e?Oe._hideClone():Oe._showClone(this),oe&&!Y?ee.appendChild(t):ne.parentNode.insertBefore(t,oe?Y:ne),e=t.parentNode,Ot!==void 0&&!B&&(M=ke(Ot-Ee(ne)[Qe==="vertical"?"top":"left"])),vt(),!xt&&this._animate(ce,ne),this._animate(he,t),ot()}if(ee.contains(t))return ot()}return X&&!V.rootEl&&Fe(ee,V,"_onDragOver"),!1},_animate:function(V,ee){var ne=this.options.animation;if(ne){var he=Ee(ee);if(ee===t&&(I=he),V.nodeType===1&&(V=Ee(V)),V.left+V.width/2!==he.left+he.width/2||V.top+V.height/2!==he.top+he.height/2){var ce=er(this.el),Ce=ce&&ce.a,Te=ce&&ce.d;qe(ee,"transition","none"),qe(ee,"transform","translate3d("+(V.left-he.left)/(Ce||1)+"px,"+(V.top-he.top)/(Te||1)+"px,0)"),O=ee.offsetWidth,qe(ee,"transition","transform "+ne+"ms"+(this.options.easing?" "+this.options.easing:"")),qe(ee,"transform","translate3d(0,0,0)")}typeof ee.animated=="number"&&clearTimeout(ee.animated),ee.animated=q(function(){qe(ee,"transition",""),qe(ee,"transform",""),ee.animated=!1},ne)}},_offUpEvents:function(){var V=this.el.ownerDocument;Xe(D,"touchmove",this._onTouchMove),Xe(D,"pointermove",this._onTouchMove),Xe(V,"mouseup",this._onDrop),Xe(V,"touchend",this._onDrop),Xe(V,"pointerup",this._onDrop),Xe(V,"touchcancel",this._onDrop),Xe(D,"selectstart",this)},_onDrop:function(V){var ee=this.el,ne=this.options;w=!1,v=!1,B=!1,L=!1,clearInterval(this._loopId),clearInterval(_),Ze(),Kt(),clearTimeout(this._dragStartTimer),Ae(this._cloneId),Ae(this._dragStartId),Xe(D,"mousemove",this._onTouchMove),this.nativeDraggable&&(Xe(D,"drop",this),Xe(ee,"dragstart",this._onDragStart),Xe(D,"dragover",this._handleAutoScroll),Xe(D,"dragover",ye)),this._offUpEvents(),V&&(C&&(V.cancelable&&V.preventDefault(),!ne.dropBubble&&V.stopPropagation()),i&&i.parentNode&&i.parentNode.removeChild(i),(o===e||x&&x.lastPutMode!=="clone")&&n&&n.parentNode&&n.parentNode.removeChild(n),t&&(this.nativeDraggable&&Xe(t,"dragend",this),rt(t),t.style["will-change"]="",tt(t,x?x.options.ghostClass:this.options.ghostClass,!1),tt(t,this.options.chosenClass,!1),je(this,o,"unchoose",t,e,o,h,null,V),o!==e?(p=Pt(t,ne.draggable),p>=0&&(je(null,e,"add",t,e,o,h,p,V),je(this,o,"remove",t,e,o,h,p,V),je(null,e,"sort",t,e,o,h,p,V),je(this,o,"sort",t,e,o,h,p,V)),x&&x.save()):t.nextSibling!==a&&(p=Pt(t,ne.draggable),p>=0&&(je(this,o,"update",t,e,o,h,p,V),je(this,o,"sort",t,e,o,h,p,V))),Pe.active&&((p==null||p===-1)&&(p=h),je(this,o,"end",t,e,o,h,p,V),this.save()))),this._nulling()},_nulling:function(){o=t=e=i=a=n=s=l=d=y.length=_=g=b=E=T=C=p=h=S=A=O=I=x=m=Pe.active=null,Me.forEach(function(V){V.checked=!0}),Me.length=0},handleEvent:function(V){switch(V.type){case"drop":case"dragend":this._onDrop(V);break;case"dragenter":case"dragover":t&&(this._onDragOver(V),zt(V));break;case"selectstart":V.preventDefault();break}},toArray:function(){for(var V=[],ee,ne=this.el.children,he=0,ce=ne.length,Ce=this.options;he<ce;he++)ee=ne[he],yt(ee,Ce.draggable,this.el,!1)&&V.push(ee.getAttribute(Ce.dataIdAttr)||xr(ee));return V},sort:function(V){var ee={},ne=this.el;this.toArray().forEach(function(he,ce){var Ce=ne.children[ce];yt(Ce,this.options.draggable,ne,!1)&&(ee[he]=Ce)},this),V.forEach(function(he){ee[he]&&(ne.removeChild(ee[he]),ne.appendChild(ee[he]))})},save:function(){var V=this.options.store;V&&V.set&&V.set(this)},closest:function(V,ee){return yt(V,ee||this.options.draggable,this.el,!1)},option:function(V,ee){var ne=this.options;if(ee===void 0)return ne[V];ne[V]=ee,V==="group"&&de(ne)},destroy:function(){var V=this.el;V[H]=null,Xe(V,"mousedown",this._onTapStart),Xe(V,"touchstart",this._onTapStart),Xe(V,"pointerdown",this._onTapStart),this.nativeDraggable&&(Xe(V,"dragover",this),Xe(V,"dragenter",this)),Array.prototype.forEach.call(V.querySelectorAll("[draggable]"),function(ee){ee.removeAttribute("draggable")}),this._onDrop(),c.splice(c.indexOf(this.el),1),this.el=V=null},_hideClone:function(){n.cloneHidden||(qe(n,"display","none"),n.cloneHidden=!0,n.parentNode&&this.options.removeCloneOnHide&&n.parentNode.removeChild(n))},_showClone:function(V){if(V.lastPutMode!=="clone"){this._hideClone();return}n.cloneHidden&&(o.contains(t)&&!this.options.group.revertClone?o.insertBefore(n,t):a?o.insertBefore(n,a):o.appendChild(n),this.options.group.revertClone&&this._animate(t,n),qe(n,"display",""),n.cloneHidden=!1)}};function yt(V,ee,ne,he){if(V){ne=ne||D;do{if(ee!=null&&(ee[0]===">"&&V.parentNode===ne&&ir(V,ee.substring(1))||ir(V,ee))||he&&V===ne)return V;if(V===ne)break}while(V=Ut(V))}return null}function Ut(V){return V.host&&V!==D&&V.host.nodeType?V.host:V.parentNode}function zt(V){V.dataTransfer&&(V.dataTransfer.dropEffect="move"),V.cancelable&&V.preventDefault()}function Ge(V,ee,ne){V.addEventListener(ee,ne,Q)}function Xe(V,ee,ne){V.removeEventListener(ee,ne,Q)}function tt(V,ee,ne){if(V&&ee)if(V.classList)V.classList[ne?"add":"remove"](ee);else{var he=(" "+V.className+" ").replace(j," ").replace(" "+ee+" "," ");V.className=(he+(ne?" "+ee:"")).replace(j," ")}}function qe(V,ee,ne){var he=V&&V.style;if(he){if(ne===void 0)return D.defaultView&&D.defaultView.getComputedStyle?ne=D.defaultView.getComputedStyle(V,""):V.currentStyle&&(ne=V.currentStyle),ee===void 0?ne:ne[ee];!(ee in he)&&ee.indexOf("webkit")===-1&&(ee="-webkit-"+ee),he[ee]=ne+(typeof ne=="string"?"":"px")}}function er(V){var ee="";do{var ne=qe(V,"transform");ne&&ne!=="none"&&(ee=ne+" "+ee)}while(V=V.parentNode);if(window.DOMMatrix)return new DOMMatrix(ee);if(window.WebKitCSSMatrix)return new WebKitCSSMatrix(ee);if(window.CSSMatrix)return new CSSMatrix(ee)}function dt(V,ee,ne){if(V){var he=V.getElementsByTagName(ee),ce=0,Ce=he.length;if(ne)for(;ce<Ce;ce++)ne(he[ce],ce);return he}return[]}function je(V,ee,ne,he,ce,Ce,Te,Be,Oe){V=V||ee[H];var $e,Ve=V.options,He="on"+ne.charAt(0).toUpperCase()+ne.substr(1);window.CustomEvent&&!X&&!ie?$e=new CustomEvent(ne,{bubbles:!0,cancelable:!0}):($e=D.createEvent("Event"),$e.initEvent(ne,!0,!0)),$e.to=ce||ee,$e.from=Ce||ee,$e.item=he||ee,$e.clone=n,$e.oldIndex=Te,$e.newIndex=Be,$e.originalEvent=Oe,ee&&ee.dispatchEvent($e),Ve[He]&&Ve[He].call(V,$e)}function tr(V,ee,ne,he,ce,Ce,Te,Be){var Oe,$e=V[H],Ve=$e.options.onMove,He;return window.CustomEvent&&!X&&!ie?Oe=new CustomEvent("move",{bubbles:!0,cancelable:!0}):(Oe=D.createEvent("Event"),Oe.initEvent("move",!0,!0)),Oe.to=ee,Oe.from=V,Oe.dragged=ne,Oe.draggedRect=he,Oe.related=ce||ee,Oe.relatedRect=Ce||Ee(ee),Oe.willInsertAfter=Be,Oe.originalEvent=Te,V.dispatchEvent(Oe),Ve&&(He=Ve.call($e,Oe,Te)),He}function rt(V){V.draggable=!1}function rr(){Se=!1}function It(V,ee,ne){for(var he=0,ce=0,Ce=V.children;ce<Ce.length;){if(Ce[ce].style.display!=="none"&&Ce[ce]!==i&&Ce[ce]!==t&&yt(Ce[ce],ne.draggable,V,!1)){if(he===ee)return Ce[ce];he++}ce++}return null}function dr(V){for(var ee=V.lastElementChild;(ee===i||ee.style.display==="none")&&(ee=ee.previousElementSibling,!!ee););return ee||null}function pt(V,ee,ne){var he=Ee(dr(ne)),ce=ee==="vertical"?V.clientY:V.clientX,Ce=ee==="vertical"?V.clientX:V.clientY,Te=ee==="vertical"?he.bottom:he.right,Be=ee==="vertical"?he.left:he.top,Oe=ee==="vertical"?he.right:he.bottom,$e=10;return ee==="vertical"?Ce>Oe+$e||Ce<=Oe&&ce>Te&&Ce>=Be:ce>Te&&Ce>Be||ce<=Te&&Ce>Oe+$e}function Bt(V,ee,ne,he,ce,Ce,Te){var Be=Ee(ee),Oe=ne==="vertical"?V.clientY:V.clientX,$e=ne==="vertical"?Be.height:Be.width,Ve=ne==="vertical"?Be.top:Be.left,He=ne==="vertical"?Be.bottom:Be.right,ot=Ee(t),vt=!1;if(!Ce){if(Te&&M<$e*he)if(!L&&(A===1?Oe>Ve+$e*ce/2:Oe<He-$e*ce/2)&&(L=!0),L)vt=!0;else{var Qe=ne==="vertical"?ot.top:ot.left,We=ne==="vertical"?ot.bottom:ot.right;if(A===1?Oe<Ve+M:Oe>He-M)return A*-1}else if(Oe>Ve+$e*(1-he)/2&&Oe<He-$e*(1-he)/2)return Oe>Ve+$e/2?-1:1}return vt=vt||Ce,vt&&(Oe<Ve+$e*ce/2||Oe>He-$e*ce/2)?Oe>Ve+$e/2?1:-1:0}function Xt(V,ee){var ne=Pt(t,ee.draggable),he=Pt(V,ee.draggable);return ne<he?1:-1}function xr(V){for(var ee=V.tagName+V.className+V.src+V.href+V.textContent,ne=ee.length,he=0;ne--;)he+=ee.charCodeAt(ne);return he.toString(36)}function Pt(V,ee){var ne=0;if(!V||!V.parentNode)return-1;for(;V&&(V=V.previousElementSibling);)V.nodeName.toUpperCase()!=="TEMPLATE"&&V!==n&&ne++;return ne}function ir(V,ee){if(V)try{if(V.matches)return V.matches(ee);if(V.msMatchesSelector)return V.msMatchesSelector(ee);if(V.webkitMatchesSelector)return V.webkitMatchesSelector(ee)}catch(ne){return!1}return!1}var Nt;function hr(V,ee){return function(){if(!Nt){var ne=arguments,he=this;Nt=q(function(){ne.length===1?V.call(he,ne[0]):V.apply(he,ne),Nt=void 0},ee)}}}function Kt(){clearTimeout(Nt),Nt=void 0}function nr(V,ee){if(V&&ee)for(var ne in ee)ee.hasOwnProperty(ne)&&(V[ne]=ee[ne]);return V}function Et(V){return G&&G.dom?G.dom(V).cloneNode(!0):U?U(V).clone(!0)[0]:V.cloneNode(!0)}function At(V){Me.length=0;for(var ee=V.getElementsByTagName("input"),ne=ee.length;ne--;){var he=ee[ne];he.checked&&Me.push(he)}}function wt(V){return q(V,0)}function Ae(V){return clearTimeout(V)}function Ee(V,ee,ne){if(!(!V.getBoundingClientRect&&V!==N)){var he,ce,Ce,Te,Be,Oe,$e;if(V!==N?(he=V.getBoundingClientRect(),ce=he.top,Ce=he.left,Te=he.bottom,Be=he.right,Oe=he.height,$e=he.width):(ce=0,Ce=0,Te=window.innerHeight,Be=window.innerWidth,Oe=window.innerHeight,$e=window.innerWidth),ne&&V!==N){if(ee=ee||V.parentNode,!X)do if(ee&&ee.getBoundingClientRect&&qe(ee,"transform")!=="none"){var Ve=ee.getBoundingClientRect();ce-=Ve.top+K(qe(ee,"border-top-width")),Ce-=Ve.left+K(qe(ee,"border-left-width")),Te=ce+he.height,Be=Ce+he.width;break}while(ee=ee.parentNode);var He=er(V),ot=He&&He.a,vt=He&&He.d;He&&(ce/=vt,Ce/=ot,$e/=ot,Oe/=vt,Te=ce+Oe,Be=Ce+$e)}return{top:ce,left:Ce,bottom:Te,right:Be,width:$e,height:Oe}}}function ze(V,ee){for(var ne=Ue(ne,!0),he=Ee(V)[ee];ne;){var ce=Ee(ne)[ee],Ce;if(ee==="top"||ee==="left"?Ce=he>=ce:Ce=he<=ce,!Ce)return!0;if(ne===N)break;ne=Ue(ne,!1)}return!1}return Ge(D,"touchmove",function(V){(Pe.active||w)&&V.cancelable&&V.preventDefault()}),Pe.utils={on:Ge,off:Xe,css:qe,find:dt,is:function(V,ee){return!!yt(V,ee,V,!1)},extend:nr,throttle:hr,closest:yt,toggleClass:tt,clone:Et,index:Pt,nextTick:wt,cancelNextTick:Ae,detectDirection:Ne,getChild:It},Pe.create=function(V,ee){return new Pe(V,ee)},Pe.version="1.8.3",Pe})});var Qf=we((E5,Zf)=>{"use strict";function d1(r){return r&&typeof r=="object"&&"default"in r?r.default:r}var f1=d1(Mf());function pe(r,t){return typeof r=="string"?(t||document).querySelector(r):r||null}pe.each=(r,t)=>typeof r=="string"?Array.from((t||document).querySelectorAll(r)):r||null;pe.create=(r,t)=>{let e=document.createElement(r);for(let i in t){let n=t[i];if(i==="inside")pe(n).appendChild(e);else if(i==="around"){let o=pe(n);o.parentNode.insertBefore(e,o),e.appendChild(o)}else i==="styles"?typeof n=="object"&&Object.keys(n).map(o=>{e.style[o]=n[o]}):i in e?e[i]=n:e.setAttribute(i,n)}return e};pe.on=(r,t,e,i)=>{i?pe.delegate(r,t,e,i):(i=e,pe.bind(r,t,i))};pe.off=(r,t,e)=>{r.removeEventListener(t,e)};pe.bind=(r,t,e)=>{t.split(/\s+/).forEach(function(i){r.addEventListener(i,e)})};pe.delegate=(r,t,e,i)=>{r.addEventListener(t,function(n){let o=n.target.closest(e);o&&(n.delegatedTarget=o,i.call(this,n,o))})};pe.unbind=(r,t)=>{if(r)for(let e in t){let i=t[e];e.split(/\s+/).forEach(function(n){r.removeEventListener(n,i)})}};pe.fire=(r,t,e)=>{let i=document.createEvent("HTMLEvents");i.initEvent(t,!0,!0);for(let n in e)i[n]=e[n];return r.dispatchEvent(i)};pe.data=(r,t)=>{if(!t)return r.dataset;for(let e in t)r.dataset[e]=t[e]};pe.style=(r,t)=>{if(typeof t=="string")return pe.getStyle(r,t);Array.isArray(r)||(r=[r]),r.map(e=>{for(let i in t)e.style[i]=t[i]})};pe.removeStyle=(r,t)=>{Array.isArray(r)||(r=[r]),Array.isArray(t)||(t=[t]),r.map(e=>{for(let i of t)e.style[i]=""})};pe.getStyle=(r,t)=>{if(!t)return getComputedStyle(r);let e=getComputedStyle(r)[t];return["width","height"].includes(t)&&(e=parseFloat(e)),e};pe.closest=(r,t)=>t?t.matches(r)?t:pe.closest(r,t.parentNode):null;pe.inViewport=(r,t)=>{let{top:e,left:i,bottom:n,right:o}=r.getBoundingClientRect(),{top:a,left:s,bottom:l,right:d}=t.getBoundingClientRect();return e>=a&&i>=s&&n<=l&&o<=d};pe.scrollTop=function(t,e){requestAnimationFrame(()=>{t.scrollTop=e})};pe.scrollbarSize=function(){return pe.scrollBarSizeValue||(pe.scrollBarSizeValue=p1()),pe.scrollBarSizeValue};function p1(){let r=document.createElement("div");pe.style(r,{width:"100px",height:"100px",overflow:"scroll",position:"absolute",top:"-9999px"}),document.body.appendChild(r);let t=r.offsetWidth-r.clientWidth;return document.body.removeChild(r),t}pe.hasVerticalOverflow=function(r){return r.scrollHeight>r.offsetHeight+10};pe.hasHorizontalOverflow=function(r){return r.scrollWidth>r.offsetWidth+10};pe.measureTextWidth=function(r){let t=document.createElement("div");return t.style.position="absolute",t.style.visibility="hidden",t.style.height="auto",t.style.width="auto",t.style.whiteSpace="nowrap",t.innerText=r,document.body.appendChild(t),t.clientWidth+1};function h1(r){var t=typeof r;return r!=null&&(t=="object"||t=="function")}var Kr=h1,Pn=typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{};function Nn(){throw new Error("Dynamic requires are not currently supported by rollup-plugin-commonjs")}function _1(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}function g1(r,t){return t={exports:{}},r(t,t.exports),t.exports}var m1=typeof Pn=="object"&&Pn&&Pn.Object===Object&&Pn,v1=m1,b1=typeof self=="object"&&self&&self.Object===Object&&self,y1=v1||b1||Function("return this")(),$i=y1,w1=function(){return $i.Date.now()},la=w1,k1=$i.Symbol,Fn=k1,jf=Object.prototype,x1=jf.hasOwnProperty,C1=jf.toString,Ei=Fn?Fn.toStringTag:void 0;function S1(r){var t=x1.call(r,Ei),e=r[Ei];try{r[Ei]=void 0}catch(n){}var i=C1.call(r);return t?r[Ei]=e:delete r[Ei],i}var T1=S1,E1=Object.prototype,A1=E1.toString;function O1(r){return A1.call(r)}var M1=O1,$1="[object Null]",L1="[object Undefined]",$f=Fn?Fn.toStringTag:void 0;function B1(r){return r==null?r===void 0?L1:$1:$f&&$f in Object(r)?T1(r):M1(r)}var Df=B1;function I1(r){return r!=null&&typeof r=="object"}var R1=I1,P1="[object Symbol]";function N1(r){return typeof r=="symbol"||R1(r)&&Df(r)==P1}var j1=N1,Lf=0/0,D1=/^\s+|\s+$/g,F1=/^[-+]0x[0-9a-f]+$/i,z1=/^0b[01]+$/i,H1=/^0o[0-7]+$/i,q1=parseInt;function W1(r){if(typeof r=="number")return r;if(j1(r))return Lf;if(Kr(r)){var t=typeof r.valueOf=="function"?r.valueOf():r;r=Kr(t)?t+"":t}if(typeof r!="string")return r===0?r:+r;r=r.replace(D1,"");var e=z1.test(r);return e||H1.test(r)?q1(r.slice(2),e?2:8):F1.test(r)?Lf:+r}var Bf=W1,U1="Expected a function",V1=Math.max,Y1=Math.min;function G1(r,t,e){var i,n,o,a,s,l,d=0,u=!1,h=!1,p=!0;if(typeof r!="function")throw new TypeError(U1);t=Bf(t)||0,Kr(e)&&(u=!!e.leading,h="maxWait"in e,o=h?V1(Bf(e.maxWait)||0,t):o,p="trailing"in e?!!e.trailing:p);function m(b){var E=i,T=n;return i=n=void 0,d=b,a=r.apply(T,E),a}function x(b){return d=b,s=setTimeout(w,t),u?m(b):a}function y(b){var E=b-l,T=b-d,C=t-E;return h?Y1(C,o-T):C}function v(b){var E=b-l,T=b-d;return l===void 0||E>=t||E<0||h&&T>=o}function w(){var b=la();if(v(b))return k(b);s=setTimeout(w,y(b))}function k(b){return s=void 0,p&&i?m(b):(i=n=void 0,a)}function c(){s!==void 0&&clearTimeout(s),d=0,i=l=n=s=void 0}function _(){return s===void 0?a:k(la())}function g(){var b=la(),E=v(b);if(i=arguments,n=this,l=b,E){if(s===void 0)return x(l);if(h)return s=setTimeout(w,t),m(l)}return s===void 0&&(s=setTimeout(w,t)),a}return g.cancel=c,g.flush=_,g}var Ff=G1,X1="Expected a function";function K1(r,t,e){var i=!0,n=!0;if(typeof r!="function")throw new TypeError(X1);return Kr(e)&&(i="leading"in e?!!e.leading:i,n="trailing"in e?!!e.trailing:n),Ff(r,t,{leading:i,maxWait:t,trailing:n})}var J1=K1,Z1="[object AsyncFunction]",Q1="[object Function]",ek="[object GeneratorFunction]",tk="[object Proxy]";function rk(r){if(!Kr(r))return!1;var t=Df(r);return t==Q1||t==ek||t==Z1||t==tk}var ik=rk,nk=$i["__core-js_shared__"],ca=nk,If=function(){var r=/[^.]+$/.exec(ca&&ca.keys&&ca.keys.IE_PROTO||"");return r?"Symbol(src)_1."+r:""}();function ok(r){return!!If&&If in r}var ak=ok,sk=Function.prototype,lk=sk.toString;function ck(r){if(r!=null){try{return lk.call(r)}catch(t){}try{return r+""}catch(t){}}return""}var uk=ck,dk=/[\\^$.*+?()[\]{}|]/g,fk=/^\[object .+?Constructor\]$/,pk=Function.prototype,hk=Object.prototype,_k=pk.toString,gk=hk.hasOwnProperty,mk=RegExp("^"+_k.call(gk).replace(dk,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function vk(r){if(!Kr(r)||ak(r))return!1;var t=ik(r)?mk:fk;return t.test(uk(r))}var bk=vk;function yk(r,t){return r==null?void 0:r[t]}var wk=yk;function kk(r,t){var e=wk(r,t);return bk(e)?e:void 0}var pa=kk,xk=pa(Object,"create"),Mi=xk;function Ck(){this.__data__=Mi?Mi(null):{},this.size=0}var Sk=Ck;function Tk(r){var t=this.has(r)&&delete this.__data__[r];return this.size-=t?1:0,t}var Ek=Tk,Ak="__lodash_hash_undefined__",Ok=Object.prototype,Mk=Ok.hasOwnProperty;function $k(r){var t=this.__data__;if(Mi){var e=t[r];return e===Ak?void 0:e}return Mk.call(t,r)?t[r]:void 0}var Lk=$k,Bk=Object.prototype,Ik=Bk.hasOwnProperty;function Rk(r){var t=this.__data__;return Mi?t[r]!==void 0:Ik.call(t,r)}var Pk=Rk,Nk="__lodash_hash_undefined__";function jk(r,t){var e=this.__data__;return this.size+=this.has(r)?0:1,e[r]=Mi&&t===void 0?Nk:t,this}var Dk=jk;function Jr(r){var t=-1,e=r==null?0:r.length;for(this.clear();++t<e;){var i=r[t];this.set(i[0],i[1])}}Jr.prototype.clear=Sk;Jr.prototype.delete=Ek;Jr.prototype.get=Lk;Jr.prototype.has=Pk;Jr.prototype.set=Dk;var Rf=Jr;function Fk(){this.__data__=[],this.size=0}var zk=Fk;function Hk(r,t){return r===t||r!==r&&t!==t}var qk=Hk;function Wk(r,t){for(var e=r.length;e--;)if(qk(r[e][0],t))return e;return-1}var Hn=Wk,Uk=Array.prototype,Vk=Uk.splice;function Yk(r){var t=this.__data__,e=Hn(t,r);if(e<0)return!1;var i=t.length-1;return e==i?t.pop():Vk.call(t,e,1),--this.size,!0}var Gk=Yk;function Xk(r){var t=this.__data__,e=Hn(t,r);return e<0?void 0:t[e][1]}var Kk=Xk;function Jk(r){return Hn(this.__data__,r)>-1}var Zk=Jk;function Qk(r,t){var e=this.__data__,i=Hn(e,r);return i<0?(++this.size,e.push([r,t])):e[i][1]=t,this}var ex=Qk;function Zr(r){var t=-1,e=r==null?0:r.length;for(this.clear();++t<e;){var i=r[t];this.set(i[0],i[1])}}Zr.prototype.clear=zk;Zr.prototype.delete=Gk;Zr.prototype.get=Kk;Zr.prototype.has=Zk;Zr.prototype.set=ex;var tx=Zr,rx=pa($i,"Map"),ix=rx;function nx(){this.size=0,this.__data__={hash:new Rf,map:new(ix||tx),string:new Rf}}var ox=nx;function ax(r){var t=typeof r;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?r!=="__proto__":r===null}var sx=ax;function lx(r,t){var e=r.__data__;return sx(t)?e[typeof t=="string"?"string":"hash"]:e.map}var qn=lx;function cx(r){var t=qn(this,r).delete(r);return this.size-=t?1:0,t}var ux=cx;function dx(r){return qn(this,r).get(r)}var fx=dx;function px(r){return qn(this,r).has(r)}var hx=px;function _x(r,t){var e=qn(this,r),i=e.size;return e.set(r,t),this.size+=e.size==i?0:1,this}var gx=_x;function Qr(r){var t=-1,e=r==null?0:r.length;for(this.clear();++t<e;){var i=r[t];this.set(i[0],i[1])}}Qr.prototype.clear=ox;Qr.prototype.delete=ux;Qr.prototype.get=fx;Qr.prototype.has=hx;Qr.prototype.set=gx;var mx=Qr,vx="__lodash_hash_undefined__";function bx(r){return this.__data__.set(r,vx),this}var yx=bx;function wx(r){return this.__data__.has(r)}var kx=wx;function zn(r){var t=-1,e=r==null?0:r.length;for(this.__data__=new mx;++t<e;)this.add(r[t])}zn.prototype.add=zn.prototype.push=yx;zn.prototype.has=kx;var xx=zn;function Cx(r,t,e,i){for(var n=r.length,o=e+(i?1:-1);i?o--:++o<n;)if(t(r[o],o,r))return o;return-1}var Sx=Cx;function Tx(r){return r!==r}var Ex=Tx;function Ax(r,t,e){for(var i=e-1,n=r.length;++i<n;)if(r[i]===t)return i;return-1}var Ox=Ax;function Mx(r,t,e){return t===t?Ox(r,t,e):Sx(r,Ex,e)}var $x=Mx;function Lx(r,t){var e=r==null?0:r.length;return!!e&&$x(r,t,0)>-1}var Bx=Lx;function Ix(r,t,e){for(var i=-1,n=r==null?0:r.length;++i<n;)if(e(t,r[i]))return!0;return!1}var Rx=Ix;function Px(r,t){return r.has(t)}var Nx=Px,jx=pa($i,"Set"),ua=jx;function Dx(){}var Fx=Dx;function zx(r){var t=-1,e=Array(r.size);return r.forEach(function(i){e[++t]=i}),e}var zf=zx,Hx=1/0,qx=ua&&1/zf(new ua([,-0]))[1]==Hx?function(r){return new ua(r)}:Fx,Wx=qx,Ux=200;function Vx(r,t,e){var i=-1,n=Bx,o=r.length,a=!0,s=[],l=s;if(e)a=!1,n=Rx;else if(o>=Ux){var d=t?null:Wx(r);if(d)return zf(d);a=!1,n=Nx,l=new xx}else l=t?[]:s;e:for(;++i<o;){var u=r[i],h=t?t(u):u;if(u=e||u!==0?u:0,a&&h===h){for(var p=l.length;p--;)if(l[p]===h)continue e;t&&l.push(h),s.push(u)}else n(l,h,e)||(l!==s&&l.push(h),s.push(u))}return s}var Yx=Vx;function Gx(r){return r&&r.length?Yx(r):[]}var Xx=Gx;function Hf(r){return r.replace(/([A-Z])/g,t=>`-${t[0].toLowerCase()}`)}function da(r){return Object.keys(r).map(e=>{let i=Hf(e),n=r[e];return n===void 0?"":`data-${i}="${n}" `}).join("").trim()}function Pf(r){var t=document.createElement("textarea");t.style.position="fixed",t.style.top=0,t.style.left=0,t.style.width="2em",t.style.height="2em",t.style.padding=0,t.style.border="none",t.style.outline="none",t.style.boxShadow="none",t.style.background="transparent",t.value=r,document.body.appendChild(t),t.select();try{document.execCommand("copy")}catch(e){console.log("Oops, unable to copy")}document.body.removeChild(t)}function Kx(r){return!isNaN(r)}var qf=J1,Jx=Ff;function Oi(r,t=null){return(...e)=>new Promise(i=>{setTimeout(()=>{let o=r.apply(t,e);i(o)})})}function Wn(r,t,e){let i=e.reduce((n,o)=>(n[o]={get(){return t[o]}},n),{});Object.defineProperties(r,i)}function Zx(r){return r!==void 0||r!==null}function Qx(r){return!Zx(r)}function jn(r){return!isNaN(r)}function e2(r){return Array.isArray(r)?r:[r]}function Nf(r){return Xx(r)}function Ai(r,t){return r-t}function t2(r){return r.replace(/<[^>]*>/g,"")}function r2(r,t){return r&&(Object.keys(t).forEach(e=>{let i=new RegExp(`{(${e})}`,"g");r=r.replace(i,t[e])}),r)}var Wf=class{constructor(t){this.options=t,this.sortRows=Oi(this.sortRows,this),this.switchColumn=Oi(this.switchColumn,this),this.removeColumn=Oi(this.removeColumn,this),this.options.filterRows=Oi(this.options.filterRows,this)}init(t,e){t||(t=this.options.data),e&&(this.options.columns=e),this.data=t,this.rowCount=0,this.columns=[],this.rows=[],this.prepareColumns(),this.prepareRows(),this.prepareTreeRows(),this.prepareRowView(),this.prepareNumericColumns()}get currentSort(){return this.columns.find(e=>e.sortOrder!=="none")||{colIndex:-1,sortOrder:"none"}}prepareColumns(){this.columns=[],this.validateColumns(),this.prepareDefaultColumns(),this.prepareHeader()}prepareDefaultColumns(){if(this.options.checkboxColumn&&!this.hasColumnById("_checkbox")){let t={id:"_checkbox",content:this.getCheckboxHTML(),editable:!1,resizable:!1,sortable:!1,focusable:!1,dropdown:!1,width:32};this.columns.push(t)}if(this.options.serialNoColumn&&!this.hasColumnById("_rowIndex")){let t={id:"_rowIndex",content:"",align:"center",editable:!1,resizable:!1,focusable:!1,dropdown:!1};this.columns.push(t)}}prepareHeader(){let t=this.columns.concat(this.options.columns),e={isHeader:1,editable:!0,sortable:!0,resizable:!0,focusable:!0,dropdown:!0,width:null,format:i=>i==null?"":i+""};this.columns=t.map((i,n)=>this.prepareCell(i,n)).map(i=>Object.assign({},e,i)).map(i=>(i.content=i.content||i.name||"",i.id=i.id||i.content,i))}prepareCell(t,e){let i={content:"",sortOrder:"none",colIndex:e,column:this.columns[e]};return t!==null&&typeof t=="object"?Object.assign(i,t):i.content=t,i}prepareNumericColumns(){let t=this.getRow(0);!t||(this.columns=this.columns.map((e,i)=>{let n=t[i].content;return!e.align&&Kx(n)&&(e.align="right"),e}))}prepareRows(){this.validateData(this.data),this.rows=this.data.map((t,e)=>{let i=this._getNextRowCount(),n=[],o={rowIndex:i};if(Array.isArray(t))for(this.options.checkboxColumn&&n.push(this.getCheckboxHTML()),this.options.serialNoColumn&&n.push(i+1+""),n=n.concat(t);n.length<this.columns.length;)n.push("");else{for(let a of this.columns)a.id==="_checkbox"?n.push(this.getCheckboxHTML()):a.id==="_rowIndex"?n.push(i+1+""):n.push(t[a.id]);o.indent=t.indent||0}return this.prepareRow(n,o)})}prepareTreeRows(){this.rows.forEach((t,e)=>{if(jn(t.meta.indent)){let i=this.getRow(e+1);t.meta.isLeaf=!i||Qx(i.meta.indent)||i.meta.indent<=t.meta.indent,t.meta.isTreeNodeClose=!1}})}prepareRowView(){this.rowViewOrder=this.rows.map(t=>t.meta.rowIndex)}prepareRow(t,e){let i={rowIndex:e.rowIndex,indent:e.indent};return t=t.map((n,o)=>this.prepareCell(n,o)).map(n=>Object.assign({},i,n)),t.meta=e,t}validateColumns(){let t=this.options.columns;if(!Array.isArray(t))throw new Dn("`columns` must be an array");t.forEach((e,i)=>{if(typeof e!="string"&&typeof e!="object")throw new Dn(`column "${i}" must be a string or an object`)})}validateData(t){if(Array.isArray(t)&&(t.length===0||Array.isArray(t[0])||typeof t[0]=="object"))return!0;throw new Dn("`data` must be an array of arrays or objects")}appendRows(t){this.validateData(t),this.rows.push(...this.prepareRows(t))}sortRows(t,e="none"){t=+t,this.getColumns().map(i=>{i.colIndex===t?i.sortOrder=e:i.sortOrder="none"}),this._sortRows(t,e)}_sortRows(t,e){if(this.currentSort.colIndex===t&&(this.currentSort.sortOrder==="asc"&&e==="desc"||this.currentSort.sortOrder==="desc"&&e==="asc")){this.reverseArray(this.rowViewOrder),this.currentSort.sortOrder=e;return}if(this.rowViewOrder.sort((i,n)=>{let o=i,a=n,s=this.getCell(t,i).content,l=this.getCell(t,n).content;if(s=s==null?"":s,l=l==null?"":l,e==="none")return o-a;if(e==="asc"){if(s<l)return-1;if(s>l)return 1;if(s===l)return 0}else if(e==="desc"){if(s<l)return 1;if(s>l)return-1;if(s===l)return 0}return 0}),this.hasColumnById("_rowIndex")){let i=this.getColumnIndexById("_rowIndex");this.rows.forEach((n,o)=>{let a=this.rowViewOrder.indexOf(o),s=n[i];s.content=a+1+""})}}reverseArray(t){let e=null,i=null,n=t.length;for(e=0,i=n-1;e<i;e+=1,i-=1){let o=t[e];t[e]=t[i],t[i]=o}}switchColumn(t,e){let i=this.columns[t];this.columns[t]=this.columns[e],this.columns[e]=i,this.columns[t].colIndex=t,this.columns[e].colIndex=e,this.rows.forEach(n=>{let o=Object.assign({},n[t],{colIndex:e}),a=Object.assign({},n[e],{colIndex:t});n[e]=o,n[t]=a})}removeColumn(t){t=+t;let e=n=>n.colIndex!==t,i=(n,o)=>Object.assign({},n,{colIndex:o});this.columns=this.columns.filter(e).map(i),this.rows.forEach(n=>{n.splice(t,1),n.forEach((o,a)=>{o.colIndex=a})})}updateRow(t,e){t.length<this.columns.length&&(this.hasColumnById("_rowIndex")&&(t=[e+1+""].concat(t)),this.hasColumnById("_checkbox")&&(t=['<input type="checkbox" />'].concat(t)));let i=this.prepareRow(t,{rowIndex:e}),n=this.rows.findIndex(o=>o[0].rowIndex===e);return this.rows[n]=i,i}updateCell(t,e,i){let n;typeof t=="object"&&(n=t,t=n.colIndex,e=n.rowIndex,i=n),n=this.getCell(t,e);for(let o in i){let a=i[o];a!==void 0&&(n[o]=a)}return n}updateColumn(t,e){let i=this.getColumn(t);for(let n in e){let o=e[n];o!==void 0&&(i[n]=o)}return i}filterRows(t){return this.options.filterRows(this.rows,t).then(e=>(e||(e=this.getAllRowIndices()),e.then||(e=Promise.resolve(e)),e.then(i=>(this._filteredRows=i,{rowsToHide:this.getAllRowIndices().filter(o=>!i.includes(o)),rowsToShow:i}))))}getFilteredRowIndices(){return this._filteredRows||this.getAllRowIndices()}getAllRowIndices(){return this.rows.map(t=>t.meta.rowIndex)}getRowCount(){return this.rowCount}_getNextRowCount(){let t=this.rowCount;return this.rowCount++,t}getRows(t,e){return this.rows.slice(t,e)}getRowsForView(t,e){return this.rowViewOrder.map(n=>this.rows[n]).slice(t,e)}getColumns(t){let e=this.columns;return t&&(e=e.slice(this.getStandardColumnCount())),e}getStandardColumnCount(){return this.options.checkboxColumn&&this.options.serialNoColumn?2:this.options.checkboxColumn||this.options.serialNoColumn?1:0}getColumnCount(t){let e=this.columns.length;return t&&(e=e-this.getStandardColumnCount()),e}getColumn(t){return t=+t,t<0&&(t=this.columns.length+t),this.columns.find(e=>e.colIndex===t)}getColumnById(t){return this.columns.find(e=>e.id===t)}getRow(t){return t=+t,this.rows[t]}getCell(t,e){return e=+e,t=+t,this.getRow(e)[t]}getChildren(t){t=+t;let e=this.getRow(t).meta.indent,i=[];for(let n=t+1;n<this.rowCount;n++){let o=this.getRow(n);if(!isNaN(o.meta.indent)&&(o.meta.indent>e&&i.push(n),o.meta.indent===e))break}return i}getImmediateChildren(t){t=+t;let e=this.getRow(t).meta.indent,i=[],n=e+1;for(let o=t+1;o<this.rowCount;o++){let a=this.getRow(o);if(!(isNaN(a.meta.indent)||a.meta.indent>n)&&(a.meta.indent===n&&i.push(o),a.meta.indent===e))break}return i}get(){return{columns:this.columns,rows:this.rows}}getData(t){return this.data[t]}hasColumn(t){return Boolean(this.columns.find(e=>e.content===t))}hasColumnById(t){return Boolean(this.columns.find(e=>e.id===t))}getColumnIndex(t){return this.columns.findIndex(e=>e.content===t)}getColumnIndexById(t){return this.columns.findIndex(e=>e.id===t)}getCheckboxHTML(){return'<input type="checkbox" />'}},Dn=class extends TypeError{},fa={chevronDown:'<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-chevron-down"><polyline points="6 9 12 15 18 9"></polyline></svg>',chevronRight:'<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-chevron-right"><polyline points="9 18 15 12 9 6"></polyline></svg>'},Uf=class{constructor(t){this.instance=t,Wn(this,this.instance,["wrapper","options","style","header","bodyScrollable","columnmanager","rowmanager","datamanager","keyboard"]),this.bindEvents()}bindEvents(){this.bindFocusCell(),this.bindEditCell(),this.bindKeyboardSelection(),this.bindCopyCellContents(),this.bindMouseEvents(),this.bindTreeEvents()}bindFocusCell(){this.bindKeyboardNav()}bindEditCell(){this.$editingCell=null,pe.on(this.bodyScrollable,"dblclick",".dt-cell",(t,e)=>{this.activateEditing(e)}),this.keyboard.on("enter",()=>{this.$focusedCell&&!this.$editingCell?this.activateEditing(this.$focusedCell):this.$editingCell&&this.deactivateEditing()})}bindKeyboardNav(){let t=e=>{if(!this.$focusedCell||this.$editingCell)return!1;let i=this.$focusedCell,{rowIndex:n,colIndex:o}=pe.data(i);return e==="left"?i=this.getLeftMostCell$(n):e==="right"?i=this.getRightMostCell$(n):e==="up"?i=this.getTopMostCell$(o):e==="down"&&(i=this.getBottomMostCell$(o)),this.focusCell(i),!0};["left","right","up","down","tab","shift+tab"].map(e=>this.keyboard.on(e,()=>this.focusCellInDirection(e))),["left","right","up","down"].map(e=>this.keyboard.on(`ctrl+${e}`,()=>t(e))),this.keyboard.on("esc",()=>{this.deactivateEditing(!1),this.columnmanager.toggleFilter(!1)}),this.options.inlineFilters&&(this.keyboard.on("ctrl+f",e=>{let i=pe.closest(".dt-cell",e.target),{colIndex:n}=pe.data(i);return this.activateFilter(n),!0}),pe.on(this.header,"focusin",".dt-filter",()=>{this.unfocusCell(this.$focusedCell)}))}bindKeyboardSelection(){let t=e=>{let i=this.getSelectionCursor();return e==="left"?i=this.getLeftCell$(i):e==="right"?i=this.getRightCell$(i):e==="up"?i=this.getAboveCell$(i):e==="down"&&(i=this.getBelowCell$(i)),i};["left","right","up","down"].map(e=>this.keyboard.on(`shift+${e}`,()=>this.selectArea(t(e))))}bindCopyCellContents(){this.keyboard.on("ctrl+c",()=>{let t=this.copyCellContents(this.$focusedCell,this.$selectionCursor),e=this.instance.translate("{count} cells copied",{count:t});t&&this.instance.showToastMessage(e,2)}),this.options.pasteFromClipboard&&this.keyboard.on("ctrl+v",t=>(this.instance.pasteTarget.focus(),setTimeout(()=>{let e=this.instance.pasteTarget.value;this.instance.pasteTarget.value="",this.pasteContentInCell(e)},10),!1))}bindMouseEvents(){let t=null;pe.on(this.bodyScrollable,"mousedown",".dt-cell",i=>{t=!0,this.focusCell(pe(i.delegatedTarget))}),pe.on(this.bodyScrollable,"mouseup",()=>{t=!1});let e=i=>{!t||this.selectArea(pe(i.delegatedTarget))};pe.on(this.bodyScrollable,"mousemove",".dt-cell",qf(e,50))}bindTreeEvents(){pe.on(this.bodyScrollable,"click",".dt-tree-node__toggle",(t,e)=>{let i=pe.closest(".dt-cell",e),{rowIndex:n}=pe.data(i);i.classList.contains("dt-cell--tree-close")?this.rowmanager.openSingleNode(n):this.rowmanager.closeSingleNode(n)})}focusCell(t,{skipClearSelection:e=0,skipDOMFocus:i=0,skipScrollToCell:n=0}={}){if(!t||t===this.$editingCell)return;let{colIndex:o,isHeader:a}=pe.data(t);a||this.columnmanager.getColumn(o).focusable===!1||(n||this.scrollToCell(t),this.deactivateEditing(),e||this.clearSelection(),this.$focusedCell&&this.$focusedCell.classList.remove("dt-cell--focus"),this.$focusedCell=t,t.classList.add("dt-cell--focus"),i||t.focus(),this.highlightRowColumnHeader(t))}unfocusCell(t){!t||(t.classList.remove("dt-cell--focus"),this.$focusedCell=null,this.lastHeaders&&this.lastHeaders.forEach(e=>e&&e.classList.remove("dt-cell--highlight")))}highlightRowColumnHeader(t){let{colIndex:e,rowIndex:i}=pe.data(t),n=this.datamanager.getColumnIndexById("_rowIndex"),o=`.dt-cell--header-${e}`,a=`.dt-cell--${n}-${i}`;this.lastHeaders&&this.lastHeaders.forEach(d=>d&&d.classList.remove("dt-cell--highlight"));let s=pe(o,this.wrapper),l=pe(a,this.wrapper);this.lastHeaders=[s,l],this.lastHeaders.forEach(d=>d&&d.classList.add("dt-cell--highlight"))}selectAreaOnClusterChanged(){if(!(this.$focusedCell&&this.$selectionCursor))return;let{colIndex:t,rowIndex:e}=pe.data(this.$selectionCursor),i=this.getCell$(t,e);if(!i||i===this.$selectionCursor)return;let n=pe.data(this.$focusedCell);this.$focusedCell=this.getCell$(n.colIndex,n.rowIndex),this.selectArea(i)}focusCellOnClusterChanged(){if(!this.$focusedCell)return;let{colIndex:t,rowIndex:e}=pe.data(this.$focusedCell),i=this.getCell$(t,e);!i||this.focusCell(i,{skipClearSelection:1,skipDOMFocus:1,skipScrollToCell:1})}selectArea(t){!this.$focusedCell||this._selectArea(this.$focusedCell,t)&&(this.$selectionCursor=t)}_selectArea(t,e){if(t===e)return!1;let i=this.getCellsInRange(t,e);return i?(this.clearSelection(),this._selectedCells=i.map(n=>this.getCell$(...n)),requestAnimationFrame(()=>{this._selectedCells.map(n=>n.classList.add("dt-cell--highlight"))}),!0):!1}getCellsInRange(t,e){let i,n,o,a;if(typeof t=="number")[i,n,o,a]=arguments;else if(typeof t=="object"){if(!(t&&e))return!1;let h=pe.data(t),p=pe.data(e);i=+h.colIndex,n=+h.rowIndex,o=+p.colIndex,a=+p.rowIndex}if(n>a&&([n,a]=[a,n]),i>o&&([i,o]=[o,i]),this.isStandardCell(i)||this.isStandardCell(o))return!1;let s=[],l=i,d=n,u=[];for(;d<=a;)u.push(d),d+=1;return u.map(h=>{for(;l<=o;)s.push([l,h]),l++;l=i}),s}clearSelection(){(this._selectedCells||[]).forEach(t=>t.classList.remove("dt-cell--highlight")),this._selectedCells=[],this.$selectionCursor=null}getSelectionCursor(){return this.$selectionCursor||this.$focusedCell}activateEditing(t){this.focusCell(t);let{rowIndex:e,colIndex:i}=pe.data(t),n=this.columnmanager.getColumn(i);if(n&&(n.editable===!1||n.focusable===!1))return;let o=this.getCell(i,e);if(o&&o.editable===!1)return;if(this.$editingCell){let{_rowIndex:l,_colIndex:d}=pe.data(this.$editingCell);if(e===l&&i===d)return}this.$editingCell=t,t.classList.add("dt-cell--editing");let a=pe(".dt-cell__edit",t);a.innerHTML="";let s=this.getEditor(i,e,o.content,a);s&&(this.currentCellEditor=s,s.initValue(o.content,e,n))}deactivateEditing(t=!0){t&&this.submitEditing(),this.$focusedCell&&this.$focusedCell.focus(),this.$editingCell&&(this.$editingCell.classList.remove("dt-cell--editing"),this.$editingCell=null)}getEditor(t,e,i,n){let o=this.datamanager.getColumn(t),a=this.datamanager.getRow(e),s=this.datamanager.getData(e),l=this.options.getEditor?this.options.getEditor(t,e,i,n,o,a,s):this.getDefaultEditor(n);return l===!1?!1:(l===void 0&&(l=this.getDefaultEditor(n)),l)}getDefaultEditor(t){let e=pe.create("input",{class:"dt-input",type:"text",inside:t});return{initValue(i){e.focus(),e.value=i},getValue(){return e.value},setValue(i){e.value=i}}}submitEditing(){let t=Promise.resolve();if(!this.$editingCell)return t;let e=this.$editingCell,{rowIndex:i,colIndex:n}=pe.data(e),o=this.datamanager.getColumn(n);if(e){let a=this.currentCellEditor;if(a){let s=a.getValue();s.then||(s=Promise.resolve(s)),t=s.then(l=>{let d=this.getCell(n,i).content;if(d===l)return!1;let u=a.setValue(l,i,o);return this.updateCell(n,i,l),e.focus(),u&&u.then&&u.catch(h=>{console.log(h),this.updateCell(n,i,d)}),u})}}return this.currentCellEditor=null,t}copyCellContents(t,e){if(!e&&t){let{colIndex:a,rowIndex:s}=pe.data(t),l=this.getCell(a,s);return Pf(l.content),1}let i=this.getCellsInRange(t,e);if(!i)return 0;let n=i.map(a=>this.getCell(...a)).reduce((a,s)=>{let l=s.rowIndex;return a[l]=a[l]||[],a[l].push(s.content),a},[]),o=n.map(a=>a.join("	")).join(`
`);return Pf(o),n.reduce((a,s)=>a+s.length,0)}pasteContentInCell(t){if(!this.$focusedCell)return;let e=t.split(`
`).map(a=>a.split("	")).filter(a=>a.length&&a.every(s=>s)),{colIndex:i,rowIndex:n}=pe.data(this.$focusedCell),o={colIndex:+i,rowIndex:+n};e.forEach((a,s)=>{let l=s+o.rowIndex;a.forEach((d,u)=>{let h=u+o.colIndex;this.updateCell(h,l,d)})})}activateFilter(t){this.columnmanager.toggleFilter(),this.columnmanager.focusFilter(t),this.columnmanager.isFilterShown||this.$focusedCell&&this.$focusedCell.focus()}updateCell(t,e,i){let n=this.datamanager.updateCell(t,e,{content:i});this.refreshCell(n)}refreshCell(t){let e=pe(this.selector(t.colIndex,t.rowIndex),this.bodyScrollable);e.innerHTML=this.getCellContent(t)}toggleTreeButton(t,e){let i=this.columnmanager.getFirstColumnIndex(),n=this.getCell$(i,t);n&&n.classList[e?"remove":"add"]("dt-cell--tree-close")}isStandardCell(t){return t<this.columnmanager.getFirstColumnIndex()}focusCellInDirection(t){if(!this.$focusedCell||this.$editingCell&&["left","right","up","down"].includes(t))return!1;this.$editingCell&&["tab","shift+tab"].includes(t)&&this.deactivateEditing();let e=this.$focusedCell;if(t==="left"||t==="shift+tab"?e=this.getLeftCell$(e):t==="right"||t==="tab"?e=this.getRightCell$(e):t==="up"?e=this.getAboveCell$(e):t==="down"&&(e=this.getBelowCell$(e)),!e)return!1;let{colIndex:i}=pe.data(e);if(!this.columnmanager.getColumn(i).focusable){let o=this.$focusedCell;this.unfocusCell(o),this.$focusedCell=e;let a=this.focusCellInDirection(t);return a||this.focusCell(o),a}return this.focusCell(e),!0}getCell$(t,e){return pe(this.selector(t,e),this.bodyScrollable)}getAboveCell$(t){let{colIndex:e}=pe.data(t),i=t.parentElement.previousElementSibling;for(;i&&i.classList.contains("dt-row--hide");)i=i.previousElementSibling;return i?pe(`.dt-cell--col-${e}`,i):t}getBelowCell$(t){let{colIndex:e}=pe.data(t),i=t.parentElement.nextElementSibling;for(;i&&i.classList.contains("dt-row--hide");)i=i.nextElementSibling;return i?pe(`.dt-cell--col-${e}`,i):t}getLeftCell$(t){return t.previousElementSibling}getRightCell$(t){return t.nextElementSibling}getLeftMostCell$(t){return this.getCell$(this.columnmanager.getFirstColumnIndex(),t)}getRightMostCell$(t){return this.getCell$(this.columnmanager.getLastColumnIndex(),t)}getTopMostCell$(t){return this.getCell$(t,this.rowmanager.getFirstRowIndex())}getBottomMostCell$(t){return this.getCell$(t,this.rowmanager.getLastRowIndex())}getCell(t,e){return this.instance.datamanager.getCell(t,e)}getRowHeight(){return pe.style(pe(".dt-row",this.bodyScrollable),"height")}scrollToCell(t){if(pe.inViewport(t,this.bodyScrollable))return!1;let{rowIndex:e}=pe.data(t);return this.rowmanager.scrollToRow(e),!1}getRowCountPerPage(){return Math.ceil(this.instance.getViewportHeight()/this.getRowHeight())}getCellHTML(t){let{rowIndex:e,colIndex:i,isHeader:n,isFilter:o,isTotalRow:a}=t,s=da({rowIndex:e,colIndex:i,isHeader:n,isFilter:o,isTotalRow:a}),l=this.datamanager.getRow(e),d=!(n||o||a);return`
            <div class="${["dt-cell","dt-cell--col-"+i,d?`dt-cell--${i}-${e}`:"",d?"dt-cell--row-"+e:"",n?"dt-cell--header":"",n?`dt-cell--header-${i}`:"",o?"dt-cell--filter":"",d&&l&&l.meta.isTreeNodeClose?"dt-cell--tree-close":""].join(" ")}" ${s} tabindex="0">
                ${this.getCellContent(t)}
            </div>
        `}getCellContent(t){let{isHeader:e,isFilter:i,colIndex:n}=t,a=!e&&t.editable!==!1?this.getEditCellHTML(n):"",l=e&&t.sortable!==!1?`<span class="sort-indicator">
                ${this.options.sortIndicator[t.sortOrder]}
            </span>`:"",u=e&&t.resizable!==!1?'<span class="dt-cell__resize-handle"></span>':"",p=e&&t.dropdown!==!1?this.columnmanager.getDropdownHTML():"",m=t.format||t.column&&t.column.format||null,x;if(e||i||!m)x=t.content;else{let v=this.datamanager.getRow(t.rowIndex),w=this.datamanager.getData(t.rowIndex);x=m(t.content,v,t.column,w)}if(t.html=x,this.options.treeView&&!(e||i)&&t.indent!==void 0){let v=this.datamanager.getRow(t.rowIndex+1),w=v&&v.meta.indent>t.indent,k=20,c="px";if(this.datamanager.getColumnIndexById("_rowIndex")+1===t.colIndex){let g=(t.indent||0)*k,b=w?`<span class="dt-tree-node__toggle" style="left: ${g-k}${c}">
                        <span class="icon-open">${fa.chevronDown}</span>
                        <span class="icon-close">${fa.chevronRight}</span>
                    </span>`:"";x=`<span class="dt-tree-node" style="padding-left: ${g}${c}">
                    ${b}
                    <span>${x}</span>
                </span>`}}return`
            <div class="${["dt-cell__content",e?`dt-cell__content--header-${n}`:`dt-cell__content--col-${n}`].join(" ")}">
                ${x}
                ${l}
                ${u}
                ${p}
            </div>
            ${a}
        `}getEditCellHTML(t){return`<div class="dt-cell__edit dt-cell__edit--col-${t}"></div>`}selector(t,e){return`.dt-cell--${t}-${e}`}},Vf=class{constructor(t){this.instance=t,Wn(this,this.instance,["options","fireEvent","header","datamanager","cellmanager","style","wrapper","rowmanager","bodyScrollable","bodyRenderer"]),this.bindEvents()}renderHeader(){this.header.innerHTML="<div></div>",this.refreshHeader()}refreshHeader(){let t=this.datamanager.getColumns();pe("div",this.header).innerHTML=this.getHeaderHTML(t),this.$filterRow=pe(".dt-row-filter",this.header),this.$filterRow&&pe.style(this.$filterRow,{display:"none"}),this.$columnMap=[],this.bindMoveColumn()}getHeaderHTML(t){let e=this.rowmanager.getRowHTML(t,{isHeader:1});return this.options.inlineFilters&&(e+=this.rowmanager.getRowHTML(t,{isFilter:1})),e}bindEvents(){this.bindDropdown(),this.bindResizeColumn(),this.bindPerfectColumnWidth(),this.bindFilter()}bindDropdown(){let t=".dt-dropdown__toggle",e=".dt-dropdown__list";this.instance.dropdownContainer.innerHTML=this.getDropdownListHTML(),this.$dropdownList=this.instance.dropdownContainer.firstElementChild,pe.on(this.header,"click",t,a=>{this.openDropdown(a)});let i=a=>{let s=[t,t+" *",e,e+" *"].join(",");a.target.matches(s)||o()};pe.on(document.body,"click",i),document.addEventListener("scroll",o,!0),this.instance.on("onDestroy",()=>{pe.off(document.body,"click",i),pe.off(document,"scroll",o)}),pe.on(this.$dropdownList,"click",".dt-dropdown__list-item",(a,s)=>{if(!this._dropdownActiveColIndex)return;let l=this.options.headerDropdown,{index:d}=pe.data(s),u=this._dropdownActiveColIndex,h=l[d].action;h&&h.call(this.instance,this.getColumn(u)),this.hideDropdown()});let n=this;function o(a){n.hideDropdown()}this.hideDropdown()}openDropdown(t){this._dropdownWidth||(pe.style(this.$dropdownList,{display:""}),this._dropdownWidth=pe.style(this.$dropdownList,"width")),pe.style(this.$dropdownList,{display:"",left:t.clientX-this._dropdownWidth+4+"px",top:t.clientY+4+"px"});let e=pe.closest(".dt-cell",t.target),{colIndex:i}=pe.data(e);this._dropdownActiveColIndex=i}hideDropdown(){pe.style(this.$dropdownList,{display:"none"}),this._dropdownActiveColIndex=null}bindResizeColumn(){let t=!1,e,i,n;pe.on(this.header,"mousedown",".dt-cell .dt-cell__resize-handle",(s,l)=>{document.body.classList.add("dt-resize"),e=l.parentNode.parentNode;let{colIndex:u}=pe.data(e),h=this.getColumn(u);h&&h.resizable===!1||(t=!0,i=pe.style(pe(".dt-cell__content",e),"width"),n=s.pageX)});let o=s=>{if(document.body.classList.remove("dt-resize"),!e)return;t=!1;let{colIndex:l}=pe.data(e);this.setColumnWidth(l),this.style.setBodyStyle(),e=null};pe.on(document.body,"mouseup",o),this.instance.on("onDestroy",()=>{pe.off(document.body,"mouseup",o)});let a=s=>{if(!t)return;let l=s.pageX-n;this.options.direction==="rtl"&&(l=-1*l);let d=i+l,{colIndex:u}=pe.data(e);this.options.minimumColumnWidth>d||(this.datamanager.updateColumn(u,{width:d}),this.setColumnHeaderWidth(u))};pe.on(document.body,"mousemove",a),this.instance.on("onDestroy",()=>{pe.off(document.body,"mousemove",a)})}bindPerfectColumnWidth(){pe.on(this.header,"dblclick",".dt-cell .dt-cell__resize-handle",(t,e)=>{let i=e.parentNode.parentNode,{colIndex:n}=pe.data(i),o=this.bodyRenderer.visibleRows.map(y=>y[n]).reduce((y,v)=>y.content.length>v.content.length?y:v),a=this.cellmanager.getCellHTML(o),s=document.createElement("div");s.innerHTML=a;let l=s.querySelector(".dt-cell__content").textContent,{borderLeftWidth:d,borderRightWidth:u,paddingLeft:h,paddingRight:p}=pe.getStyle(this.bodyScrollable.querySelector(".dt-cell__content")),m=[d,u,h,p].map(parseFloat).reduce((y,v)=>y+v),x=pe.measureTextWidth(l)+m;this.datamanager.updateColumn(n,{width:x}),this.setColumnHeaderWidth(n),this.setColumnWidth(n)})}bindMoveColumn(){if(this.options.disableReorderColumn)return;let t=pe(".dt-row",this.header);this.sortable=f1.create(t,{onEnd:e=>{let{oldIndex:i,newIndex:n}=e,o=e.item,{colIndex:a}=pe.data(o);+a!==n&&this.switchColumn(i,n)},preventOnFilter:!1,filter:".dt-cell__resize-handle, .dt-dropdown",chosenClass:"dt-cell--dragging",animation:150})}sortColumn(t,e){this.instance.freeze(),this.sortRows(t,e).then(()=>(this.refreshHeader(),this.rowmanager.refreshRows())).then(()=>this.instance.unfreeze()).then(()=>{this.fireEvent("onSortColumn",this.getColumn(t))})}removeColumn(t){let e=this.getColumn(t);this.instance.freeze(),this.datamanager.removeColumn(t).then(()=>(this.refreshHeader(),this.rowmanager.refreshRows())).then(()=>this.instance.unfreeze()).then(()=>{this.fireEvent("onRemoveColumn",e)})}switchColumn(t,e){this.instance.freeze(),this.datamanager.switchColumn(t,e).then(()=>(this.refreshHeader(),this.rowmanager.refreshRows())).then(()=>{this.setColumnWidth(t),this.setColumnWidth(e),this.instance.unfreeze()}).then(()=>{this.fireEvent("onSwitchColumn",this.getColumn(t),this.getColumn(e))})}toggleFilter(t){if(!this.options.inlineFilters)return;let e;t===void 0?e=!this.isFilterShown:e=t,e?pe.style(this.$filterRow,{display:""}):pe.style(this.$filterRow,{display:"none"}),this.isFilterShown=e,this.style.setBodyStyle()}focusFilter(t){if(!this.isFilterShown)return;pe(`.dt-cell--col-${t} .dt-filter`,this.$filterRow).focus()}bindFilter(){if(!this.options.inlineFilters)return;let t=e=>{this.applyFilter(this.getAppliedFilters())};pe.on(this.header,"keydown",".dt-filter",Jx(t,300))}applyFilter(t){this.datamanager.filterRows(t).then(({rowsToShow:e})=>{this.rowmanager.showRows(e)})}getAppliedFilters(){let t={};return pe.each(".dt-filter",this.header).map(e=>{let i=e.value;i&&(t[e.dataset.colIndex]=i)}),t}applyDefaultSortOrder(){let t=this.getColumns().filter(e=>e.sortOrder!=="none");if(t.length===1){let e=t[0];this.sortColumn(e.colIndex,e.sortOrder)}}sortRows(t,e){return this.datamanager.sortRows(t,e)}getColumn(t){return this.datamanager.getColumn(t)}getColumns(){return this.datamanager.getColumns()}setColumnWidth(t,e){t=+t;let i=e||this.getColumn(t).width,n=[`.dt-cell__content--col-${t}`,`.dt-cell__edit--col-${t}`].join(", "),o={width:i+"px"};this.style.setStyle(n,o)}setColumnHeaderWidth(t){t=+t,this.$columnMap=this.$columnMap||[];let e=`.dt-cell__content--header-${t}`,{width:i}=this.getColumn(t),n=this.$columnMap[t];n||(n=this.header.querySelector(e),this.$columnMap[t]=n),n.style.width=i+"px"}getColumnMinWidth(t){return t=+t,this.getColumn(t).minWidth||24}getFirstColumnIndex(){return this.datamanager.getColumnIndexById("_rowIndex")+1}getHeaderCell$(t){return pe(`.dt-cell--header-${t}`,this.header)}getLastColumnIndex(){return this.datamanager.getColumnCount()-1}getDropdownHTML(){let{dropdownButton:t}=this.options;return`
            <div class="dt-dropdown">
                <div class="dt-dropdown__toggle">${t}</div>
            </div>
      `}getDropdownListHTML(){let{headerDropdown:t}=this.options;return`
            <div class="dt-dropdown__list">
            ${t.map((e,i)=>`
                <div class="dt-dropdown__list-item" data-index="${i}">${e.label}</div>
            `).join("")}
            </div>
        `}},Yf=class{constructor(t){this.instance=t,Wn(this,this.instance,["options","fireEvent","wrapper","bodyScrollable","bodyRenderer","style"]),this.bindEvents(),this.refreshRows=Oi(this.refreshRows,this)}get datamanager(){return this.instance.datamanager}get cellmanager(){return this.instance.cellmanager}bindEvents(){this.bindCheckbox()}bindCheckbox(){!this.options.checkboxColumn||(this.checkMap=[],pe.on(this.wrapper,"click",'.dt-cell--col-0 [type="checkbox"]',(t,e)=>{let i=e.closest(".dt-cell"),{rowIndex:n,isHeader:o}=pe.data(i),a=e.checked;o?this.checkAll(a):this.checkRow(n,a)}))}refreshRows(){this.instance.renderBody(),this.instance.setDimensions()}refreshRow(t,e){this.datamanager.updateRow(t,e).forEach(n=>{this.cellmanager.refreshCell(n)})}getCheckedRows(){if(!this.checkMap)return[];let t=[];for(let e in this.checkMap)this.checkMap[e]===1&&t.push(e);return t}highlightCheckedRows(){this.getCheckedRows().map(t=>this.checkRow(t,!0))}checkRow(t,e){let i=e?1:0,n=o=>`.dt-cell--0-${o} [type="checkbox"]`;this.checkMap[t]=i,pe.each(n(t),this.bodyScrollable).map(o=>{o.checked=e}),this.highlightRow(t,e),this.showCheckStatus(),this.fireEvent("onCheckRow",this.datamanager.getRow(t))}checkAll(t){let e=t?1:0;t?this.checkMap=Array.from(Array(this.getTotalRows())).map(i=>e):this.checkMap=[],pe.each('.dt-cell--col-0 [type="checkbox"]',this.bodyScrollable).map(i=>{i.checked=t}),this.highlightAll(t),this.showCheckStatus(),this.fireEvent("onCheckRow")}showCheckStatus(){if(!this.options.checkedRowStatus)return;let e=this.getCheckedRows().length;if(e>0){let i=this.instance.translate("{count} rows selected",{count:e});this.bodyRenderer.showToastMessage(i)}else this.bodyRenderer.clearToastMessage()}highlightRow(t,e=!0){let i=this.getRow$(t);if(!!i){if(!e&&this.bodyScrollable.classList.contains("dt-scrollable--highlight-all")){i.classList.add("dt-row--unhighlight");return}e&&i.classList.contains("dt-row--unhighlight")&&i.classList.remove("dt-row--unhighlight"),this._highlightedRows=this._highlightedRows||{},e?(i.classList.add("dt-row--highlight"),this._highlightedRows[t]=i):(i.classList.remove("dt-row--highlight"),delete this._highlightedRows[t])}}highlightAll(t=!0){if(t)this.bodyScrollable.classList.add("dt-scrollable--highlight-all");else{this.bodyScrollable.classList.remove("dt-scrollable--highlight-all");for(let e in this._highlightedRows)this._highlightedRows[e].classList.remove("dt-row--highlight");this._highlightedRows={}}}showRows(t){t=e2(t);let e=t.map(i=>this.datamanager.getRow(i));this.bodyRenderer.renderRows(e)}showAllRows(){let t=this.datamanager.getAllRowIndices();this.showRows(t)}getChildrenToShowForNode(t){let e=this.datamanager.getRow(t);return e.meta.isTreeNodeClose=!1,this.datamanager.getImmediateChildren(t)}openSingleNode(t){let e=this.getChildrenToShowForNode(t),i=this.bodyRenderer.visibleRowIndices,n=Nf([...e,...i]).sort(Ai);this.showRows(n)}getChildrenToHideForNode(t){let e=this.datamanager.getRow(t);e.meta.isTreeNodeClose=!0;let i=this.datamanager.getChildren(t);return i.forEach(n=>{let o=this.datamanager.getRow(n);o.meta.isLeaf||(o.meta.isTreeNodeClose=!0)}),i}closeSingleNode(t){let e=this.getChildrenToHideForNode(t),n=this.bodyRenderer.visibleRowIndices.filter(o=>!e.includes(o)).sort(Ai);this.showRows(n)}expandAllNodes(){let i=this.datamanager.getRows().filter(a=>!a.meta.isLeaf).map(a=>this.getChildrenToShowForNode(a.meta.rowIndex)).flat(),n=this.bodyRenderer.visibleRowIndices,o=Nf([...i,...n]).sort(Ai);this.showRows(o)}collapseAllNodes(){let i=this.datamanager.getRows().filter(a=>a.meta.indent===0).map(a=>this.getChildrenToHideForNode(a.meta.rowIndex)).flat(),o=this.bodyRenderer.visibleRowIndices.filter(a=>!i.includes(a)).sort(Ai);this.showRows(o)}setTreeDepth(t){let e=this.datamanager.getRows(),i=e.filter(s=>s.meta.indent<t),n=e.filter(s=>s.meta.indent>=t),o=n.filter(s=>s.meta.indent>t);n.forEach(s=>{s.meta.isLeaf||(s.meta.isTreeNodeClose=!0)}),i.forEach(s=>{s.meta.isLeaf||(s.meta.isTreeNodeClose=!1)});let a=e.filter(s=>!o.includes(s)).map(s=>s.meta.rowIndex).sort(Ai);this.showRows(a)}getRow$(t){return pe(this.selector(t),this.bodyScrollable)}getTotalRows(){return this.datamanager.getRowCount()}getFirstRowIndex(){return 0}getLastRowIndex(){return this.datamanager.getRowCount()-1}scrollToRow(t){t=+t,this._lastScrollTo=this._lastScrollTo||0;let e=this.getRow$(t);if(pe.inViewport(e,this.bodyScrollable))return;let{height:i}=e.getBoundingClientRect(),{top:n,bottom:o}=this.bodyScrollable.getBoundingClientRect(),a=Math.floor((o-n)/i),s=0;t>this._lastScrollTo?s=i*(t+1-a):s=i*(t+1-1),this._lastScrollTo=t,pe.scrollTop(this.bodyScrollable,s)}getRowHTML(t,e){let i=da(e),n=e.rowIndex;return e.isFilter&&(t=t.map(o=>Object.assign({},o,{content:this.getFilterInput({colIndex:o.colIndex,name:o.name}),isFilter:1,isHeader:void 0,editable:!1})),n="filter"),e.isHeader&&(n="header"),`
            <div class="dt-row dt-row-${n}" ${i}>
                ${t.map(o=>this.cellmanager.getCellHTML(o)).join("")}
            </div>
        `}getFilterInput(t){let e=`title="Filter based on ${t.name||"Index"}"`;return`<input class="dt-filter dt-input" type="text" ${da(t)} tabindex="1" 
            ${t.colIndex===0?"disabled":e} />`}selector(t){return`.dt-row-${t}`}},i2=g1(function(r,t){(function(e){r.exports=e()})(function(){return function e(i,n,o){function a(d,u){if(!n[d]){if(!i[d]){var h=typeof Nn=="function"&&Nn;if(!u&&h)return h(d,!0);if(s)return s(d,!0);var p=new Error("Cannot find module '"+d+"'");throw p.code="MODULE_NOT_FOUND",p}var m=n[d]={exports:{}};i[d][0].call(m.exports,function(x){var y=i[d][1][x];return a(y||x)},m,m.exports,e,i,n,o)}return n[d].exports}for(var s=typeof Nn=="function"&&Nn,l=0;l<o.length;l++)a(o[l]);return a}({1:[function(e,i,n){Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function u(h,p){for(var m=0;m<p.length;m++){var x=p[m];x.enumerable=x.enumerable||!1,x.configurable=!0,"value"in x&&(x.writable=!0),Object.defineProperty(h,x.key,x)}}return function(h,p,m){return p&&u(h.prototype,p),m&&u(h,m),h}}();function a(u,h){if(!(u instanceof h))throw new TypeError("Cannot call a class as a function")}var s={width:"100%",height:"100%"},l=function(h){return Number(h)===Number(h)},d=function(){o(u,null,[{key:"create",value:function(p,m){return new u(p,m)}},{key:"mergeStyle",value:function(p,m){for(var x in m)p.style[x]!==m[x]&&(p.style[x]=m[x])}},{key:"getMaxBrowserHeight",value:function(){var p=document.createElement("div"),m=document.createElement("div");u.mergeStyle(p,{position:"absolute",height:"1px",opacity:0}),u.mergeStyle(m,{height:"1e7px"}),p.appendChild(m),document.body.appendChild(p);var x=m.offsetHeight;return document.body.removeChild(p),x}}]);function u(h,p){var m=this;a(this,u),this._config={},this._lastRepaint=null,this._maxElementHeight=u.getMaxBrowserHeight(),this.refresh(h,p);var x=this._config,y=function v(){var w=m._getScrollPosition(),k=m._lastRepaint;if(m._renderAnimationFrame=window.requestAnimationFrame(v),w!==k&&(!k||Math.abs(w-k)>m._averageHeight)){var c=m._renderChunk();m._lastRepaint=w,c!==!1&&typeof x.afterRender=="function"&&x.afterRender()}};y()}return o(u,[{key:"destroy",value:function(){window.cancelAnimationFrame(this._renderAnimationFrame)}},{key:"refresh",value:function(p,m){var x=this;if(Object.assign(this._config,s,m),!p||p.nodeType!==1)throw new Error("HyperList requires a valid DOM Node container");this._element=p;var y=this._config,v=this._scroller||y.scroller||document.createElement(y.scrollerTagName||"tr");if(typeof y.useFragment!="boolean"&&(this._config.useFragment=!0),!y.generate)throw new Error("Missing required `generate` function");if(!l(y.total))throw new Error("Invalid required `total` value, expected number");if(!Array.isArray(y.itemHeight)&&!l(y.itemHeight))throw new Error("\n        Invalid required `itemHeight` value, expected number or array\n      ".trim());l(y.itemHeight)?this._itemHeights=Array(y.total).fill(y.itemHeight):this._itemHeights=y.itemHeight,Object.keys(s).filter(function(g){return g in y}).forEach(function(g){var b=y[g],E=l(b),T=E?!1:b.slice(-1)==="%";if(b&&typeof b!="string"&&typeof b!="number"){var C="Invalid optional `"+g+"`, expected string or number";throw new Error(C)}else E&&(y[g]=b+"px");if(g==="height"){var S=E?b:parseInt(b.replace(/px|%/,""),10);T?x._containerHeight=window.innerHeight*S/100:x._containerHeight=l(b)?b:S}});var w={width:""+y.width,height:""+y.height,overflow:"auto",position:"relative"};u.mergeStyle(p,w);var k=y.itemHeight*y.total,c=this._maxElementHeight;k>c&&console.warn(["HyperList: The maximum element height",c+"px has","been exceeded; please reduce your item height."].join(" "));var _={opacity:"0",position:"absolute",width:"1px",height:k+"px"};u.mergeStyle(v,_),this._scroller||p.appendChild(v),this._scroller=v,this._scrollHeight=this._computeScrollHeight(),this._itemPositions=this._itemPositions||Array(y.total).fill(0),this._computePositions(0),this._renderChunk(this._lastRepaint!==null),typeof y.afterRender=="function"&&y.afterRender()}},{key:"_getRow",value:function(p){var m=this._config,x=m.generate(p),y=x.height;if(y!==void 0&&l(y)?(x=x.element,y!==this._itemHeights&&(this._itemHeights[p]=y,this._computePositions(p),this._scrollHeight=this._computeScrollHeight(p))):y=this._itemHeights[p],!x||x.nodeType!==1)throw new Error("Generator did not return a DOM Node for index: "+p);var v=x.getAttribute("class")||"";x.setAttribute("class",v+" "+(m.rowClassName||"vrow"));var w=this._itemPositions[p];return u.mergeStyle(x,{position:"absolute",top:w+"px"}),x}},{key:"_getScrollPosition",value:function(){var p=this._config;return typeof p.overrideScrollPosition=="function"?p.overrideScrollPosition():this._element.scrollTop}},{key:"_renderChunk",value:function(p){var m=this._config,x=this._element,y=this._getScrollPosition(),v=m.total,w=m.reverse?this._getReverseFrom(y):this._getFrom(y)-1;if((w<0||w-this._screenItemsLen<0)&&(w=0),!p&&this._lastFrom===w)return!1;this._lastFrom=w;var k=w+this._cachedItemsLen;(k>v||k+this._cachedItemsLen>v)&&(k=v);var c=m.useFragment?document.createDocumentFragment():[],_=this._scroller;c[m.useFragment?"appendChild":"push"](_);for(var g=w;g<k;g++){var b=this._getRow(g);c[m.useFragment?"appendChild":"push"](b)}if(m.applyPatch)return m.applyPatch(x,c);x.innerHTML="",x.appendChild(c)}},{key:"_computePositions",value:function(){var p=arguments.length<=0||arguments[0]===void 0?1:arguments[0],m=this._config,x=m.total,y=m.reverse;p<1&&!y&&(p=1);for(var v=p;v<x;v++)y?v===0?this._itemPositions[0]=this._scrollHeight-this._itemHeights[0]:this._itemPositions[v]=this._itemPositions[v-1]-this._itemHeights[v]:this._itemPositions[v]=this._itemHeights[v-1]+this._itemPositions[v-1]}},{key:"_computeScrollHeight",value:function(){var p=this,m=this._config,x=m.total,y=this._itemHeights.reduce(function(_,g){return _+g},0);u.mergeStyle(this._scroller,{opacity:0,position:"absolute",width:"1px",height:y+"px"});var v=this._itemHeights.slice(0).sort(function(_,g){return _-g}),w=Math.floor(x/2),k=x%2===0?(v[w]+v[w-1])/2:v[w],c=this._element.clientHeight?this._element.clientHeight:this._containerHeight;return this._screenItemsLen=Math.ceil(c/k),this._containerHeight=c,this._cachedItemsLen=Math.max(this._cachedItemsLen||0,this._screenItemsLen*3),this._averageHeight=k,m.reverse&&window.requestAnimationFrame(function(){p._element.scrollTop=y}),y}},{key:"_getFrom",value:function(p){for(var m=0;this._itemPositions[m]<p;)m++;return m}},{key:"_getReverseFrom",value:function(p){for(var m=this._config.total-1;m>0&&this._itemPositions[m]<p+this._containerHeight;)m--;return m}}]),u}();n.default=d,i.exports=n.default},{}]},{},[1])(1)})}),n2=_1(i2),Gf=class{constructor(t){this.instance=t,this.options=t.options,this.datamanager=t.datamanager,this.rowmanager=t.rowmanager,this.cellmanager=t.cellmanager,this.bodyScrollable=t.bodyScrollable,this.footer=this.instance.footer,this.log=t.log}renderRows(t){if(this.visibleRows=t,this.visibleRowIndices=t.map(o=>o.meta.rowIndex),t.length===0){this.bodyScrollable.innerHTML=this.getNoDataHTML();return}let e=this.datamanager.rowViewOrder.map(o=>this.visibleRowIndices.includes(o)?o:null).filter(o=>o!==null),i=getComputedStyle(this.bodyScrollable),n={width:i.width,height:i.height,itemHeight:this.options.cellHeight,total:t.length,generate:o=>{let a=document.createElement("div"),s=e[o],l=this.datamanager.getRow(s),d=this.rowmanager.getRowHTML(l,l.meta);return a.innerHTML=d,a.children[0]},afterRender:()=>{this.restoreState()}};this.hyperlist?this.hyperlist.refresh(this.bodyScrollable,n):this.hyperlist=new n2(this.bodyScrollable,n),this.renderFooter()}render(){let t=this.datamanager.getRowsForView();this.renderRows(t),this.instance.setDimensions()}renderFooter(){if(!this.options.showTotalRow)return;let t=this.getTotalRow(),e=this.rowmanager.getRowHTML(t,{isTotalRow:1,rowIndex:"totalRow"});this.footer.innerHTML=e}getTotalRow(){return this.datamanager.getColumns().map(n=>{let o=null;return["_rowIndex","_checkbox"].includes(n.id)&&(o=""),{content:o,isTotalRow:1,colIndex:n.colIndex,column:n}}).map((n,o)=>{if(n.content==="")return n;if(this.options.hooks.columnTotal){let a=this.visibleRows.map(l=>l[o].content),s=this.options.hooks.columnTotal.call(this.instance,a,n);if(s!=null)return n.content=s,n}return n.content=this.visibleRows.reduce((a,s)=>{let l=s[o];return typeof l.content=="number"?(a==null&&(a=0),a+l.content):a},n.content),n})}restoreState(){this.rowmanager.highlightCheckedRows(),this.cellmanager.selectAreaOnClusterChanged(),this.cellmanager.focusCellOnClusterChanged()}showToastMessage(t,e){this.instance.toastMessage.innerHTML=this.getToastMessageHTML(t),e&&setTimeout(()=>{this.clearToastMessage()},e*1e3)}clearToastMessage(){this.instance.toastMessage.innerHTML=""}getNoDataHTML(){return`<div class="dt-scrollable__no-data">${this.options.noDataMessage}</div>`}getToastMessageHTML(t){return`<span class="dt-toast__message">${t}</span>`}},Xf=class{constructor(t){this.instance=t,Wn(this,this.instance,["options","datamanager","columnmanager","header","footer","bodyScrollable","datatableWrapper","getColumn","bodyRenderer"]),this.scopeClass="dt-instance-"+t.constructor.instances,t.datatableWrapper.classList.add(this.scopeClass);let e=document.createElement("style");t.wrapper.insertBefore(e,t.datatableWrapper),this.styleEl=e,this.bindResizeWindow(),this.bindScrollHeader()}get stylesheet(){return this.styleEl.sheet}bindResizeWindow(){this.onWindowResize=this.onWindowResize.bind(this),this.onWindowResize=qf(this.onWindowResize,300),this.options.layout==="fluid"&&pe.on(window,"resize",this.onWindowResize)}bindScrollHeader(){this._settingHeaderPosition=!1,pe.on(this.bodyScrollable,"scroll",t=>{this._settingHeaderPosition||(this._settingHeaderPosition=!0,requestAnimationFrame(()=>{let e=-t.target.scrollLeft;pe.style(this.header,{transform:`translateX(${e}px)`}),pe.style(this.footer,{transform:`translateX(${e}px)`}),this._settingHeaderPosition=!1}))})}onWindowResize(){this.distributeRemainingWidth(),this.refreshColumnWidth(),this.setBodyStyle()}destroy(){this.styleEl.remove(),pe.off(window,"resize",this.onWindowResize)}setStyle(t,e){if(t.includes(",")){t.split(",").map(a=>a.trim()).forEach(a=>{this.setStyle(a,e)});return}if(t=t.trim(),!t)return;this._styleRulesMap=this._styleRulesMap||{};let i=this._getPrefixedSelector(t);this._styleRulesMap[i]&&(this.removeStyle(t),e=Object.assign({},this._styleRulesMap[i],e));let n=this._getRuleString(e),o=`${i} { ${n} }`;this._styleRulesMap[i]=e,this.stylesheet.insertRule(o)}removeStyle(t){if(t.includes(",")){t.split(",").map(n=>n.trim()).forEach(n=>{this.removeStyle(n)});return}if(t=t.trim(),!t)return;let e=this._getPrefixedSelector(t),i=Array.from(this.stylesheet.cssRules).findIndex(n=>n.selectorText===e);i!==-1&&this.stylesheet.deleteRule(i)}_getPrefixedSelector(t){return`.${this.scopeClass} ${t}`}_getRuleString(t){return Object.keys(t).map(e=>{let i=e;return e.includes("-")||(i=Hf(e)),`${i}:${t[e]};`}).join("")}setDimensions(){this.setCellHeight(),this.setupMinWidth(),this.setupNaturalColumnWidth(),this.setupColumnWidth(),this.distributeRemainingWidth(),this.setColumnStyle(),this.setBodyStyle()}setCellHeight(){this.setStyle(".dt-cell",{height:this.options.cellHeight+"px"})}setupMinWidth(){pe.each(".dt-cell--header",this.header).map(t=>{let{colIndex:e}=pe.data(t),i=this.getColumn(e);if(!i.minWidth){let n=pe.style(pe(".dt-cell__content",t),"width");i.minWidth=n}})}setupNaturalColumnWidth(){!pe(".dt-row")||(pe.each(".dt-row-header .dt-cell",this.header).map(t=>{let{colIndex:e}=pe.data(t),i=this.datamanager.getColumn(e),n=pe.style(pe(".dt-cell__content",t),"width");typeof n=="number"&&n>=this.options.minimumColumnWidth?i.naturalWidth=n:i.naturalWidth=this.options.minimumColumnWidth}),pe.each(".dt-row-0 .dt-cell",this.bodyScrollable).map(t=>{let{colIndex:e}=pe.data(t),i=this.datamanager.getColumn(e),n=pe.style(pe(".dt-cell__content",t),"width");typeof n=="number"&&n>=i.naturalWidth?i.naturalWidth=n:i.naturalWidth=i.naturalWidth}))}setupColumnWidth(){if(this.options.layout==="ratio"){let t=pe.style(this.datatableWrapper,"width");if(this.options.serialNoColumn){let n=this.datamanager.getColumnById("_rowIndex");t=t-n.width-1}if(this.options.checkboxColumn){let n=this.datamanager.getColumnById("_checkbox");t=t-n.width-1}let e=this.datamanager.getColumns().map(n=>n.id==="_rowIndex"||n.id==="_checkbox"?0:(n.width||(n.width=1),n.ratioWidth=parseInt(n.width,10),n.ratioWidth)).reduce((n,o)=>n+o),i=t/e;this.datamanager.getColumns().map(n=>{n.id==="_rowIndex"||n.id==="_checkbox"||(n.width=Math.floor(i*n.ratioWidth)-1)})}else this.datamanager.getColumns().map(t=>{t.width||(t.width=t.naturalWidth),t.id==="_rowIndex"&&(t.width=this.getRowIndexColumnWidth()),t.width<this.options.minimumColumnWidth&&(t.width=this.options.minimumColumnWidth)})}distributeRemainingWidth(){if(this.options.layout!=="fluid")return;let t=pe.style(this.instance.datatableWrapper,"width"),e=pe(".dt-row",this.bodyScrollable),i=t;if(e)i=pe.style(e,"width");else{let a=pe(".dt-row",this.instance.header);i=Array.from(a.children).map(l=>l.offsetWidth).reduce((l,d)=>l+d,0)}let n=this.datamanager.getColumns().filter(a=>a.resizable),o=(t-i)/n.length;n.map(a=>{let s=pe.style(this.getColumnHeaderElement(a.colIndex),"width"),l=Math.floor(s+o)-2;this.datamanager.updateColumn(a.colIndex,{width:l})})}setColumnStyle(){this.datamanager.getColumns().map(t=>{t.align||(t.align="left"),["left","center","right"].includes(t.align)||(t.align="left"),this.setStyle(`.dt-cell--col-${t.colIndex}`,{"text-align":t.align}),this.columnmanager.setColumnHeaderWidth(t.colIndex),this.columnmanager.setColumnWidth(t.colIndex)})}refreshColumnWidth(){this.datamanager.getColumns().map(t=>{this.columnmanager.setColumnHeaderWidth(t.colIndex),this.columnmanager.setColumnWidth(t.colIndex)})}setBodyStyle(){let t=pe.style(this.datatableWrapper,"width"),e=pe(".dt-row",this.bodyScrollable);if(!e)return;let i=pe.style(e,"width"),n=t>i?i:t;pe.style(this.bodyScrollable,{width:n+"px"}),pe.removeStyle(this.bodyScrollable,"height");let o=pe.getStyle(this.bodyScrollable,"height"),a=(this.bodyRenderer.hyperlist||{})._scrollHeight||1/0,s=pe.hasHorizontalOverflow(this.bodyScrollable),l;a<o&&(l=a,s&&(l+=pe.scrollbarSize()),pe.style(this.bodyScrollable,{height:l+"px"})),this.bodyScrollable.scrollHeight-this.bodyScrollable.offsetHeight<pe.scrollbarSize()&&pe.style(this.bodyScrollable,{overflowY:"hidden"}),this.options.layout==="fluid"&&pe.style(this.bodyScrollable,{overflowX:"hidden"})}getColumnHeaderElement(t){return t=+t,t<0?null:pe(`.dt-cell--col-${t}`,this.header)}getRowIndexColumnWidth(){let t=this.datamanager.getRowCount(),e=22;return pe.measureTextWidth(t+"")+e}},o2={13:"enter",91:"meta",16:"shift",17:"ctrl",18:"alt",37:"left",38:"up",39:"right",40:"down",9:"tab",27:"esc",67:"c",70:"f",86:"v"},Kf=class{constructor(t){this.listeners={},pe.on(t,"keydown",this.handler.bind(this))}handler(t){let e=o2[t.keyCode];t.shiftKey&&e!=="shift"&&(e="shift+"+e),(t.ctrlKey&&e!=="ctrl"||t.metaKey&&e!=="meta")&&(e="ctrl+"+e);let i=this.listeners[e];if(i&&i.length>0)for(let n of i){let o=n(t);(o===void 0||o===!0)&&t.preventDefault()}}on(t,e){t.split(",").map(n=>n.trim()).map(n=>{this.listeners[n]=this.listeners[n]||[],this.listeners[n].push(e)})}},a2={"Sort Ascending":"Sort Ascending","Sort Descending":"Sort Descending","Reset sorting":"Reset sorting","Remove column":"Remove column","No Data":"No Data","{count} cells copied":{"1":"{count} cell copied",default:"{count} cells copied"},"{count} rows selected":{"1":"{count} row selected",default:"{count} rows selected"}},s2={"Sort Ascending":"Aufsteigend sortieren","Sort Descending":"Absteigend sortieren","Reset sorting":"Sortierung zur\xFCcksetzen","Remove column":"Spalte entfernen","No Data":"Keine Daten","{count} cells copied":{"1":"{count} Zelle kopiert",default:"{count} Zellen kopiert"},"{count} rows selected":{"1":"{count} Zeile ausgew\xE4hlt",default:"{count} Zeilen ausgew\xE4hlt"}},l2={"Sort Ascending":"Trier par ordre croissant","Sort Descending":"Trier par ordre d\xE9croissant","Reset sorting":"R\xE9initialiser le tri","Remove column":"Supprimer colonne","No Data":"Pas de donn\xE9es","{count} cells copied":{"1":"{count} cellule copi\xE9e",default:"{count} cellules copi\xE9es"},"{count} rows selected":{"1":"{count} ligne s\xE9lectionn\xE9e",default:"{count} lignes s\xE9lectionn\xE9es"}},c2={"Sort Ascending":"Ordinamento ascendente","Sort Descending":"Ordinamento decrescente","Reset sorting":"Azzeramento ordinamento","Remove column":"Rimuovi colonna","No Data":"Nessun dato","{count} cells copied":{"1":"Copiato {count} cella",default:"{count} celle copiate"},"{count} rows selected":{"1":"{count} linea selezionata",default:"{count} linee selezionate"}};function u2(){return{en:a2,de:s2,fr:l2,it:c2}}var Jf=class{constructor(t){this.language=t,this.translations=u2()}addTranslations(t){this.translations=Object.assign(this.translations,t)}translate(t,e){let i=this.translations[this.language]&&this.translations[this.language][t]||t;return typeof i=="object"&&(i=e&&e.count?this.getPluralizedTranslation(i,e.count):t),r2(i,e||{})}getPluralizedTranslation(t,e){return t[e]||t.default}};function d2(r,t){let e=[];if(Object.keys(t).length===0)return r.map(i=>i.meta.rowIndex);for(let i in t){let n=t[i],a=(e.length?e.map(d=>r[d]):r).map(d=>d[i]),s=p2(n),l=f2(s);l?e=l(s.text,a):e=a.map(d=>d.rowIndex)}return e}function f2(r){let t=o=>String(t2(o.html||"")||o.content||"").toLowerCase(),e=o=>parseFloat(o.content),i=(o,a)=>{if(o.column.compareValue){let l=o.column.compareValue(o,a);if(l&&Array.isArray(l))return l}let s=e(o);return isNaN(s)?[t(o),a]:[s,a]};return{contains(o,a){return a.filter(s=>{let l=t(s),d=(o||"").toLowerCase();return!d||l.includes(d)}).map(s=>s.rowIndex)},greaterThan(o,a){return a.filter(s=>{let[l,d]=i(s,o);return l>d}).map(s=>s.rowIndex)},lessThan(o,a){return a.filter(s=>{let[l,d]=i(s,o);return l<d}).map(s=>s.rowIndex)},equals(o,a){return a.filter(s=>parseFloat(s.content)===o).map(s=>s.rowIndex)},notEquals(o,a){return a.filter(s=>parseFloat(s.content)!==o).map(s=>s.rowIndex)},range(o,a){return a.filter(s=>{let l=i(s,o[0]),d=i(s,o[1]),u=l[0];return u>=l[1]&&u<=d[1]}).map(s=>s.rowIndex)},containsNumber(o,a){return a.filter(s=>{let l=parseFloat(o,10),d=o,u=e(s),h=t(s);return l===u||h.includes(d)}).map(s=>s.rowIndex)}}[r.type]}function p2(r=""){if(r.length===0)return{};let t=r;return[">","<","="].includes(t[0])?t=r.slice(1):t.startsWith("!=")&&(t=r.slice(2)),r.startsWith(">")&&t?{type:"greaterThan",text:t.trim()}:r.startsWith("<")&&t?{type:"lessThan",text:t.trim()}:r.startsWith("=")&&jn(t)?{type:"equals",text:Number(r.slice(1).trim())}:jn(t)?{type:"containsNumber",text:t}:r.startsWith("!=")&&jn(t)?{type:"notEquals",text:Number(r.slice(2).trim())}:r.split(":").length===2?(t=r.split(":"),{type:"range",text:t.map(e=>e.trim())}):{type:"contains",text:t.toLowerCase()}}function h2(r){return{columns:[],data:[],dropdownButton:fa.chevronDown,headerDropdown:[{label:r.translate("Sort Ascending"),action:function(t){this.sortColumn(t.colIndex,"asc")}},{label:r.translate("Sort Descending"),action:function(t){this.sortColumn(t.colIndex,"desc")}},{label:r.translate("Reset sorting"),action:function(t){this.sortColumn(t.colIndex,"none")}},{label:r.translate("Remove column"),action:function(t){this.removeColumn(t.colIndex)}}],events:{onRemoveColumn(t){},onSwitchColumn(t,e){},onSortColumn(t){},onCheckRow(t){},onDestroy(){}},hooks:{columnTotal:null},sortIndicator:{asc:"\u2191",desc:"\u2193",none:""},overrideComponents:{},filterRows:d2,freezeMessage:"",getEditor:null,serialNoColumn:!0,checkboxColumn:!1,clusterize:!0,logs:!1,layout:"fixed",noDataMessage:r.translate("No Data"),cellHeight:40,minimumColumnWidth:30,inlineFilters:!1,treeView:!1,checkedRowStatus:!0,dynamicRowHeight:!1,pasteFromClipboard:!1,showTotalRow:!1,direction:"ltr",disableReorderColumn:!1}}var _2={DataManager:Wf,CellManager:Uf,ColumnManager:Vf,RowManager:Yf,BodyRenderer:Gf,Style:Xf,Keyboard:Kf},ei=class{constructor(t,e){if(ei.instances++,typeof t=="string"&&(t=document.querySelector(t)),this.wrapper=t,!(this.wrapper instanceof HTMLElement))throw new Error("Invalid argument given for `wrapper`");this.initializeTranslations(e),this.setDefaultOptions(),this.buildOptions(e),this.prepare(),this.initializeComponents(),this.options.data&&(this.refresh(),this.columnmanager.applyDefaultSortOrder())}initializeTranslations(t){this.language=t.language||"en",this.translationManager=new Jf(this.language),t.translations&&this.translationManager.addTranslations(t.translations)}setDefaultOptions(){this.DEFAULT_OPTIONS=h2(this)}buildOptions(t){this.options=this.options||{},this.options=Object.assign({},this.DEFAULT_OPTIONS,this.options||{},t),t.headerDropdown=t.headerDropdown||[],this.options.headerDropdown=[...this.DEFAULT_OPTIONS.headerDropdown,...t.headerDropdown],this.events=Object.assign({},this.DEFAULT_OPTIONS.events,this.options.events||{},t.events||{}),this.fireEvent=this.fireEvent.bind(this)}prepare(){this.prepareDom(),this.unfreeze()}initializeComponents(){let t=Object.assign({},_2,this.options.overrideComponents),{Style:e,Keyboard:i,DataManager:n,RowManager:o,ColumnManager:a,CellManager:s,BodyRenderer:l}=t;this.style=new e(this),this.keyboard=new i(this.wrapper),this.datamanager=new n(this.options),this.rowmanager=new o(this),this.columnmanager=new a(this),this.cellmanager=new s(this),this.bodyRenderer=new l(this)}prepareDom(){this.wrapper.innerHTML=`
            <div class="datatable" dir="${this.options.direction}">
                <div class="dt-header"></div>
                <div class="dt-scrollable"></div>
                <div class="dt-footer"></div>
                <div class="dt-freeze">
                    <span class="dt-freeze__message">
                        ${this.options.freezeMessage}
                    </span>
                </div>
                <div class="dt-toast"></div>
                <div class="dt-dropdown-container"></div>
                <textarea class="dt-paste-target"></textarea>
            </div>
        `,this.datatableWrapper=pe(".datatable",this.wrapper),this.header=pe(".dt-header",this.wrapper),this.footer=pe(".dt-footer",this.wrapper),this.bodyScrollable=pe(".dt-scrollable",this.wrapper),this.freezeContainer=pe(".dt-freeze",this.wrapper),this.toastMessage=pe(".dt-toast",this.wrapper),this.pasteTarget=pe(".dt-paste-target",this.wrapper),this.dropdownContainer=pe(".dt-dropdown-container",this.wrapper)}refresh(t,e){this.datamanager.init(t,e),this.render(),this.setDimensions()}destroy(){this.wrapper.innerHTML="",this.style.destroy(),this.fireEvent("onDestroy")}appendRows(t){this.datamanager.appendRows(t),this.rowmanager.refreshRows()}refreshRow(t,e){this.rowmanager.refreshRow(t,e)}render(){this.renderHeader(),this.renderBody()}renderHeader(){this.columnmanager.renderHeader()}renderBody(){this.bodyRenderer.render()}setDimensions(){this.style.setDimensions()}showToastMessage(t,e){this.bodyRenderer.showToastMessage(t,e)}clearToastMessage(){this.bodyRenderer.clearToastMessage()}getColumn(t){return this.datamanager.getColumn(t)}getColumns(){return this.datamanager.getColumns()}getRows(){return this.datamanager.getRows()}getCell(t,e){return this.datamanager.getCell(t,e)}getColumnHeaderElement(t){return this.columnmanager.getColumnHeaderElement(t)}getViewportHeight(){return this.viewportHeight||(this.viewportHeight=pe.style(this.bodyScrollable,"height")),this.viewportHeight}sortColumn(t,e){this.columnmanager.sortColumn(t,e)}removeColumn(t){this.columnmanager.removeColumn(t)}scrollToLastColumn(){this.datatableWrapper.scrollLeft=9999}freeze(){pe.style(this.freezeContainer,{display:""})}unfreeze(){pe.style(this.freezeContainer,{display:"none"})}updateOptions(t){this.buildOptions(t)}fireEvent(t,...e){let i=[...this._internalEventHandlers[t]||[],this.events[t]].filter(Boolean);for(let n of i)n.apply(this,e)}on(t,e){this._internalEventHandlers=this._internalEventHandlers||{},this._internalEventHandlers[t]=this._internalEventHandlers[t]||[],this._internalEventHandlers[t].push(e)}log(){this.options.logs&&console.log.apply(console,arguments)}translate(t,e){return this.translationManager.translate(t,e)}};ei.instances=0;var g2="frappe-datatable",m2="0.0.0-development",v2="A modern datatable library for the web",b2="dist/frappe-datatable.cjs.js",y2="dist/frappe-datatable.min.js",w2="dist/frappe-datatable.min.js",k2={start:"yarn run dev",build:"rollup -c && NODE_ENV=production rollup -c",dev:"rollup -c -w","cy:server":"http-server -p 8989","cy:open":"cypress open","cy:run":"cypress run",test:"start-server-and-test cy:server http://localhost:8989 cy:run","test-local":"start-server-and-test cy:server http://localhost:8989 cy:open","travis-deploy-once":"travis-deploy-once","semantic-release":"semantic-release",lint:"eslint src","lint-and-build":"yarn lint && yarn build",commit:"npx git-cz"},x2=["dist","src"],C2={autoprefixer:"^9.0.0",chai:"3.5.0",cypress:"^9.2.0","cz-conventional-changelog":"^2.1.0",deepmerge:"^2.0.1",eslint:"^5.0.1","eslint-config-airbnb":"^16.1.0","eslint-config-airbnb-base":"^12.1.0","eslint-plugin-import":"^2.11.0","http-server":"^0.11.1",mocha:"3.3.0","postcss-custom-properties":"^7.0.0","postcss-nested":"^3.0.0",rollup:"^0.59.4","rollup-plugin-commonjs":"^8.3.0","rollup-plugin-eslint":"^4.0.0","rollup-plugin-json":"^2.3.0","rollup-plugin-node-resolve":"^3.0.3","rollup-plugin-postcss":"^1.2.8","rollup-plugin-uglify-es":"^0.0.1","semantic-release":"^17.1.1","start-server-and-test":"^1.4.1","travis-deploy-once":"^5.0.1"},S2={type:"git",url:"https://github.com/frappe/datatable.git"},T2=["datatable","data","grid","table"],E2="Faris Ansari",A2="MIT",O2={url:"https://github.com/frappe/datatable/issues"},M2="https://frappe.io/datatable",$2={hyperlist:"^1.0.0-beta",lodash:"^4.17.5",sortablejs:"^1.7.0"},L2={commitizen:{path:"cz-conventional-changelog"}},B2={name:g2,version:m2,description:v2,main:b2,unpkg:y2,jsdelivr:w2,scripts:k2,files:x2,devDependencies:C2,repository:S2,keywords:T2,author:E2,license:A2,bugs:O2,homepage:M2,dependencies:$2,config:L2};ei.__version__=B2.version;Zf.exports=ei});var tp=we((Un,ha)=>{(function(r,t){typeof Un=="object"&&typeof ha=="object"?ha.exports=t():typeof define=="function"&&define.amd?define([],t):typeof Un=="object"?Un.Driver=t():r.Driver=t()})(window,function(){return function(r){var t={};function e(i){if(t[i])return t[i].exports;var n=t[i]={i,l:!1,exports:{}};return r[i].call(n.exports,n,n.exports,e),n.l=!0,n.exports}return e.m=r,e.c=t,e.d=function(i,n,o){e.o(i,n)||Object.defineProperty(i,n,{enumerable:!0,get:o})},e.r=function(i){typeof Symbol!="undefined"&&Symbol.toStringTag&&Object.defineProperty(i,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(i,"__esModule",{value:!0})},e.t=function(i,n){if(1&n&&(i=e(i)),8&n||4&n&&typeof i=="object"&&i&&i.__esModule)return i;var o=Object.create(null);if(e.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:i}),2&n&&typeof i!="string")for(var a in i)e.d(o,a,function(s){return i[s]}.bind(null,a));return o},e.n=function(i){var n=i&&i.__esModule?function(){return i.default}:function(){return i};return e.d(n,"a",n),n},e.o=function(i,n){return Object.prototype.hasOwnProperty.call(i,n)},e.p="/dist/",e(e.s=57)}([function(r,t,e){var i=e(2),n=e(11),o=e(4),a=e(13),s=e(22),l=function(d,u,h){var p,m,x,y,v=d&l.F,w=d&l.G,k=d&l.S,c=d&l.P,_=d&l.B,g=w?i:k?i[u]||(i[u]={}):(i[u]||{}).prototype,b=w?n:n[u]||(n[u]={}),E=b.prototype||(b.prototype={});for(p in w&&(h=u),h)x=((m=!v&&g&&g[p]!==void 0)?g:h)[p],y=_&&m?s(x,i):c&&typeof x=="function"?s(Function.call,x):x,g&&a(g,p,x,d&l.U),b[p]!=x&&o(b,p,y),c&&E[p]!=x&&(E[p]=x)};i.core=n,l.F=1,l.G=2,l.S=4,l.P=8,l.B=16,l.W=32,l.U=64,l.R=128,r.exports=l},function(r,t,e){var i=e(17)("wks"),n=e(14),o=e(2).Symbol,a=typeof o=="function";(r.exports=function(s){return i[s]||(i[s]=a&&o[s]||(a?o:n)("Symbol."+s))}).store=i},function(r,t){var e=r.exports=typeof window!="undefined"&&window.Math==Math?window:typeof self!="undefined"&&self.Math==Math?self:Function("return this")();typeof __g=="number"&&(__g=e)},function(r,t){r.exports=function(e){return typeof e=="object"?e!==null:typeof e=="function"}},function(r,t,e){var i=e(5),n=e(16);r.exports=e(6)?function(o,a,s){return i.f(o,a,n(1,s))}:function(o,a,s){return o[a]=s,o}},function(r,t,e){var i=e(12),n=e(35),o=e(21),a=Object.defineProperty;t.f=e(6)?Object.defineProperty:function(s,l,d){if(i(s),l=o(l,!0),i(d),n)try{return a(s,l,d)}catch(u){}if("get"in d||"set"in d)throw TypeError("Accessors not supported!");return"value"in d&&(s[l]=d.value),s}},function(r,t,e){r.exports=!e(7)(function(){return Object.defineProperty({},"a",{get:function(){return 7}}).a!=7})},function(r,t){r.exports=function(e){try{return!!e()}catch(i){return!0}}},function(r,t){var e={}.hasOwnProperty;r.exports=function(i,n){return e.call(i,n)}},function(r,t,e){var i=e(39),n=e(24);r.exports=function(o){return i(n(o))}},function(r,t,e){var i=e(0);i(i.S+i.F*!e(6),"Object",{defineProperty:e(5).f})},function(r,t){var e=r.exports={version:"2.6.9"};typeof __e=="number"&&(__e=e)},function(r,t,e){var i=e(3);r.exports=function(n){if(!i(n))throw TypeError(n+" is not an object!");return n}},function(r,t,e){var i=e(2),n=e(4),o=e(8),a=e(14)("src"),s=e(59),l=(""+s).split("toString");e(11).inspectSource=function(d){return s.call(d)},(r.exports=function(d,u,h,p){var m=typeof h=="function";m&&(o(h,"name")||n(h,"name",u)),d[u]!==h&&(m&&(o(h,a)||n(h,a,d[u]?""+d[u]:l.join(String(u)))),d===i?d[u]=h:p?d[u]?d[u]=h:n(d,u,h):(delete d[u],n(d,u,h)))})(Function.prototype,"toString",function(){return typeof this=="function"&&this[a]||s.call(this)})},function(r,t){var e=0,i=Math.random();r.exports=function(n){return"Symbol(".concat(n===void 0?"":n,")_",(++e+i).toString(36))}},function(r,t,e){var i=e(45),n=e(28);r.exports=Object.keys||function(o){return i(o,n)}},function(r,t){r.exports=function(e,i){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:i}}},function(r,t,e){var i=e(11),n=e(2),o=n["__core-js_shared__"]||(n["__core-js_shared__"]={});(r.exports=function(a,s){return o[a]||(o[a]=s!==void 0?s:{})})("versions",[]).push({version:i.version,mode:e(18)?"pure":"global",copyright:"\xA9 2019 Denis Pushkarev (zloirock.ru)"})},function(r,t){r.exports=!1},function(r,t,e){var i=e(24);r.exports=function(n){return Object(i(n))}},function(r,t,e){"use strict";var i=e(2),n=e(8),o=e(6),a=e(0),s=e(13),l=e(62).KEY,d=e(7),u=e(17),h=e(26),p=e(14),m=e(1),x=e(43),y=e(44),v=e(63),w=e(42),k=e(12),c=e(3),_=e(19),g=e(9),b=e(21),E=e(16),T=e(30),C=e(67),S=e(49),A=e(47),L=e(5),B=e(15),P=S.f,M=L.f,O=C.f,I=i.Symbol,j=i.JSON,H=j&&j.stringify,N=m("_hidden"),D=m("toPrimitive"),K={}.propertyIsEnumerable,q=u("symbol-registry"),U=u("symbols"),G=u("op-symbols"),Q=Object.prototype,X=typeof I=="function"&&!!A.f,ie=i.QObject,ue=!ie||!ie.prototype||!ie.prototype.findChild,fe=o&&d(function(){return T(M({},"a",{get:function(){return M(this,"a",{value:7}).a}})).a!=7})?function(de,ye,Ie){var Fe=P(Q,ye);Fe&&delete Q[ye],M(de,ye,Ie),Fe&&de!==Q&&M(Q,ye,Fe)}:M,be=function(de){var ye=U[de]=T(I.prototype);return ye._k=de,ye},Se=X&&typeof I.iterator=="symbol"?function(de){return typeof de=="symbol"}:function(de){return de instanceof I},le=function(de,ye,Ie){return de===Q&&le(G,ye,Ie),k(de),ye=b(ye,!0),k(Ie),n(U,ye)?(Ie.enumerable?(n(de,N)&&de[N][ye]&&(de[N][ye]=!1),Ie=T(Ie,{enumerable:E(0,!1)})):(n(de,N)||M(de,N,E(1,{})),de[N][ye]=!0),fe(de,ye,Ie)):M(de,ye,Ie)},ke=function(de,ye){k(de);for(var Ie,Fe=v(ye=g(ye)),it=0,ht=Fe.length;ht>it;)le(de,Ie=Fe[it++],ye[Ie]);return de},Re=function(de){var ye=K.call(this,de=b(de,!0));return!(this===Q&&n(U,de)&&!n(G,de))&&(!(ye||!n(this,de)||!n(U,de)||n(this,N)&&this[N][de])||ye)},Me=function(de,ye){if(de=g(de),ye=b(ye,!0),de!==Q||!n(U,ye)||n(G,ye)){var Ie=P(de,ye);return!Ie||!n(U,ye)||n(de,N)&&de[N][ye]||(Ie.enumerable=!0),Ie}},Ne=function(de){for(var ye,Ie=O(g(de)),Fe=[],it=0;Ie.length>it;)n(U,ye=Ie[it++])||ye==N||ye==l||Fe.push(ye);return Fe},et=function(de){for(var ye,Ie=de===Q,Fe=O(Ie?G:g(de)),it=[],ht=0;Fe.length>ht;)!n(U,ye=Fe[ht++])||Ie&&!n(Q,ye)||it.push(U[ye]);return it};X||(s((I=function(){if(this instanceof I)throw TypeError("Symbol is not a constructor!");var de=p(arguments.length>0?arguments[0]:void 0),ye=function(Ie){this===Q&&ye.call(G,Ie),n(this,N)&&n(this[N],de)&&(this[N][de]=!1),fe(this,de,E(1,Ie))};return o&&ue&&fe(Q,de,{configurable:!0,set:ye}),be(de)}).prototype,"toString",function(){return this._k}),S.f=Me,L.f=le,e(48).f=C.f=Ne,e(29).f=Re,A.f=et,o&&!e(18)&&s(Q,"propertyIsEnumerable",Re,!0),x.f=function(de){return be(m(de))}),a(a.G+a.W+a.F*!X,{Symbol:I});for(var Ke="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),Je=0;Ke.length>Je;)m(Ke[Je++]);for(var Ue=B(m.store),nt=0;Ue.length>nt;)y(Ue[nt++]);a(a.S+a.F*!X,"Symbol",{for:function(de){return n(q,de+="")?q[de]:q[de]=I(de)},keyFor:function(de){if(!Se(de))throw TypeError(de+" is not a symbol!");for(var ye in q)if(q[ye]===de)return ye},useSetter:function(){ue=!0},useSimple:function(){ue=!1}}),a(a.S+a.F*!X,"Object",{create:function(de,ye){return ye===void 0?T(de):ke(T(de),ye)},defineProperty:le,defineProperties:ke,getOwnPropertyDescriptor:Me,getOwnPropertyNames:Ne,getOwnPropertySymbols:et});var Ze=d(function(){A.f(1)});a(a.S+a.F*Ze,"Object",{getOwnPropertySymbols:function(de){return A.f(_(de))}}),j&&a(a.S+a.F*(!X||d(function(){var de=I();return H([de])!="[null]"||H({a:de})!="{}"||H(Object(de))!="{}"})),"JSON",{stringify:function(de){for(var ye,Ie,Fe=[de],it=1;arguments.length>it;)Fe.push(arguments[it++]);if(Ie=ye=Fe[1],(c(ye)||de!==void 0)&&!Se(de))return w(ye)||(ye=function(ht,_t){if(typeof Ie=="function"&&(_t=Ie.call(this,ht,_t)),!Se(_t))return _t}),Fe[1]=ye,H.apply(j,Fe)}}),I.prototype[D]||e(4)(I.prototype,D,I.prototype.valueOf),h(I,"Symbol"),h(Math,"Math",!0),h(i.JSON,"JSON",!0)},function(r,t,e){var i=e(3);r.exports=function(n,o){if(!i(n))return n;var a,s;if(o&&typeof(a=n.toString)=="function"&&!i(s=a.call(n))||typeof(a=n.valueOf)=="function"&&!i(s=a.call(n))||!o&&typeof(a=n.toString)=="function"&&!i(s=a.call(n)))return s;throw TypeError("Can't convert object to primitive value")}},function(r,t,e){var i=e(37);r.exports=function(n,o,a){if(i(n),o===void 0)return n;switch(a){case 1:return function(s){return n.call(o,s)};case 2:return function(s,l){return n.call(o,s,l)};case 3:return function(s,l,d){return n.call(o,s,l,d)}}return function(){return n.apply(o,arguments)}}},function(r,t){var e={}.toString;r.exports=function(i){return e.call(i).slice(8,-1)}},function(r,t){r.exports=function(e){if(e==null)throw TypeError("Can't call method on  "+e);return e}},function(r,t,e){"use strict";var i=e(7);r.exports=function(n,o){return!!n&&i(function(){o?n.call(null,function(){},1):n.call(null)})}},function(r,t,e){var i=e(5).f,n=e(8),o=e(1)("toStringTag");r.exports=function(a,s,l){a&&!n(a=l?a:a.prototype,o)&&i(a,o,{configurable:!0,value:s})}},function(r,t,e){var i=e(17)("keys"),n=e(14);r.exports=function(o){return i[o]||(i[o]=n(o))}},function(r,t){r.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},function(r,t){t.f={}.propertyIsEnumerable},function(r,t,e){var i=e(12),n=e(65),o=e(28),a=e(27)("IE_PROTO"),s=function(){},l=function(){var d,u=e(36)("iframe"),h=o.length;for(u.style.display="none",e(66).appendChild(u),u.src="javascript:",(d=u.contentWindow.document).open(),d.write("<script>document.F=Object<\/script>"),d.close(),l=d.F;h--;)delete l.prototype[o[h]];return l()};r.exports=Object.create||function(d,u){var h;return d!==null?(s.prototype=i(d),h=new s,s.prototype=null,h[a]=d):h=l(),u===void 0?h:n(h,u)}},function(r,t,e){"use strict";var i=e(68),n=e(69),o=e(32),a=e(9);r.exports=e(70)(Array,"Array",function(s,l){this._t=a(s),this._i=0,this._k=l},function(){var s=this._t,l=this._k,d=this._i++;return!s||d>=s.length?(this._t=void 0,n(1)):n(0,l=="keys"?d:l=="values"?s[d]:[d,s[d]])},"values"),o.Arguments=o.Array,i("keys"),i("values"),i("entries")},function(r,t){r.exports={}},function(r,t,e){e(44)("asyncIterator")},function(r,t,e){"use strict";var i=e(0),n=e(38)(0),o=e(25)([].forEach,!0);i(i.P+i.F*!o,"Array",{forEach:function(a){return n(this,a,arguments[1])}})},function(r,t,e){r.exports=!e(6)&&!e(7)(function(){return Object.defineProperty(e(36)("div"),"a",{get:function(){return 7}}).a!=7})},function(r,t,e){var i=e(3),n=e(2).document,o=i(n)&&i(n.createElement);r.exports=function(a){return o?n.createElement(a):{}}},function(r,t){r.exports=function(e){if(typeof e!="function")throw TypeError(e+" is not a function!");return e}},function(r,t,e){var i=e(22),n=e(39),o=e(19),a=e(40),s=e(60);r.exports=function(l,d){var u=l==1,h=l==2,p=l==3,m=l==4,x=l==6,y=l==5||x,v=d||s;return function(w,k,c){for(var _,g,b=o(w),E=n(b),T=i(k,c,3),C=a(E.length),S=0,A=u?v(w,C):h?v(w,0):void 0;C>S;S++)if((y||S in E)&&(g=T(_=E[S],S,b),l)){if(u)A[S]=g;else if(g)switch(l){case 3:return!0;case 5:return _;case 6:return S;case 2:A.push(_)}else if(m)return!1}return x?-1:p||m?m:A}}},function(r,t,e){var i=e(23);r.exports=Object("z").propertyIsEnumerable(0)?Object:function(n){return i(n)=="String"?n.split(""):Object(n)}},function(r,t,e){var i=e(41),n=Math.min;r.exports=function(o){return o>0?n(i(o),9007199254740991):0}},function(r,t){var e=Math.ceil,i=Math.floor;r.exports=function(n){return isNaN(n=+n)?0:(n>0?i:e)(n)}},function(r,t,e){var i=e(23);r.exports=Array.isArray||function(n){return i(n)=="Array"}},function(r,t,e){t.f=e(1)},function(r,t,e){var i=e(2),n=e(11),o=e(18),a=e(43),s=e(5).f;r.exports=function(l){var d=n.Symbol||(n.Symbol=o?{}:i.Symbol||{});l.charAt(0)=="_"||l in d||s(d,l,{value:a.f(l)})}},function(r,t,e){var i=e(8),n=e(9),o=e(46)(!1),a=e(27)("IE_PROTO");r.exports=function(s,l){var d,u=n(s),h=0,p=[];for(d in u)d!=a&&i(u,d)&&p.push(d);for(;l.length>h;)i(u,d=l[h++])&&(~o(p,d)||p.push(d));return p}},function(r,t,e){var i=e(9),n=e(40),o=e(64);r.exports=function(a){return function(s,l,d){var u,h=i(s),p=n(h.length),m=o(d,p);if(a&&l!=l){for(;p>m;)if((u=h[m++])!=u)return!0}else for(;p>m;m++)if((a||m in h)&&h[m]===l)return a||m||0;return!a&&-1}}},function(r,t){t.f=Object.getOwnPropertySymbols},function(r,t,e){var i=e(45),n=e(28).concat("length","prototype");t.f=Object.getOwnPropertyNames||function(o){return i(o,n)}},function(r,t,e){var i=e(29),n=e(16),o=e(9),a=e(21),s=e(8),l=e(35),d=Object.getOwnPropertyDescriptor;t.f=e(6)?d:function(u,h){if(u=o(u),h=a(h,!0),l)try{return d(u,h)}catch(p){}if(s(u,h))return n(!i.f.call(u,h),u[h])}},function(r,t,e){for(var i=e(31),n=e(15),o=e(13),a=e(2),s=e(4),l=e(32),d=e(1),u=d("iterator"),h=d("toStringTag"),p=l.Array,m={CSSRuleList:!0,CSSStyleDeclaration:!1,CSSValueList:!1,ClientRectList:!1,DOMRectList:!1,DOMStringList:!1,DOMTokenList:!0,DataTransferItemList:!1,FileList:!1,HTMLAllCollection:!1,HTMLCollection:!1,HTMLFormElement:!1,HTMLSelectElement:!1,MediaList:!0,MimeTypeArray:!1,NamedNodeMap:!1,NodeList:!0,PaintRequestList:!1,Plugin:!1,PluginArray:!1,SVGLengthList:!1,SVGNumberList:!1,SVGPathSegList:!1,SVGPointList:!1,SVGStringList:!1,SVGTransformList:!1,SourceBufferList:!1,StyleSheetList:!0,TextTrackCueList:!1,TextTrackList:!1,TouchList:!1},x=n(m),y=0;y<x.length;y++){var v,w=x[y],k=m[w],c=a[w],_=c&&c.prototype;if(_&&(_[u]||s(_,u,p),_[h]||s(_,h,w),l[w]=p,k))for(v in i)_[v]||o(_,v,i[v],!0)}},function(r,t,e){"use strict";var i=e(73),n={};n[e(1)("toStringTag")]="z",n+""!="[object z]"&&e(13)(Object.prototype,"toString",function(){return"[object "+i(this)+"]"},!0)},function(r,t,e){var i=e(19),n=e(15);e(74)("keys",function(){return function(o){return n(i(o))}})},function(r,t,e){"use strict";var i=e(0),n=e(38)(2);i(i.P+i.F*!e(25)([].filter,!0),"Array",{filter:function(o){return n(this,o,arguments[1])}})},function(r,t,e){var i=e(0);i(i.P,"Function",{bind:e(75)})},function(r,t,e){var i=e(0);i(i.S,"Object",{create:e(30)})},function(r,t,e){var i=e(0);i(i.S,"Object",{setPrototypeOf:e(81).set})},function(r,t,e){e(58),r.exports=e(82)},function(r,t){},function(r,t,e){r.exports=e(17)("native-function-to-string",Function.toString)},function(r,t,e){var i=e(61);r.exports=function(n,o){return new(i(n))(o)}},function(r,t,e){var i=e(3),n=e(42),o=e(1)("species");r.exports=function(a){var s;return n(a)&&(typeof(s=a.constructor)!="function"||s!==Array&&!n(s.prototype)||(s=void 0),i(s)&&(s=s[o])===null&&(s=void 0)),s===void 0?Array:s}},function(r,t,e){var i=e(14)("meta"),n=e(3),o=e(8),a=e(5).f,s=0,l=Object.isExtensible||function(){return!0},d=!e(7)(function(){return l(Object.preventExtensions({}))}),u=function(p){a(p,i,{value:{i:"O"+ ++s,w:{}}})},h=r.exports={KEY:i,NEED:!1,fastKey:function(p,m){if(!n(p))return typeof p=="symbol"?p:(typeof p=="string"?"S":"P")+p;if(!o(p,i)){if(!l(p))return"F";if(!m)return"E";u(p)}return p[i].i},getWeak:function(p,m){if(!o(p,i)){if(!l(p))return!0;if(!m)return!1;u(p)}return p[i].w},onFreeze:function(p){return d&&h.NEED&&l(p)&&!o(p,i)&&u(p),p}}},function(r,t,e){var i=e(15),n=e(47),o=e(29);r.exports=function(a){var s=i(a),l=n.f;if(l)for(var d,u=l(a),h=o.f,p=0;u.length>p;)h.call(a,d=u[p++])&&s.push(d);return s}},function(r,t,e){var i=e(41),n=Math.max,o=Math.min;r.exports=function(a,s){return(a=i(a))<0?n(a+s,0):o(a,s)}},function(r,t,e){var i=e(5),n=e(12),o=e(15);r.exports=e(6)?Object.defineProperties:function(a,s){n(a);for(var l,d=o(s),u=d.length,h=0;u>h;)i.f(a,l=d[h++],s[l]);return a}},function(r,t,e){var i=e(2).document;r.exports=i&&i.documentElement},function(r,t,e){var i=e(9),n=e(48).f,o={}.toString,a=typeof window=="object"&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];r.exports.f=function(s){return a&&o.call(s)=="[object Window]"?function(l){try{return n(l)}catch(d){return a.slice()}}(s):n(i(s))}},function(r,t,e){var i=e(1)("unscopables"),n=Array.prototype;n[i]==null&&e(4)(n,i,{}),r.exports=function(o){n[i][o]=!0}},function(r,t){r.exports=function(e,i){return{value:i,done:!!e}}},function(r,t,e){"use strict";var i=e(18),n=e(0),o=e(13),a=e(4),s=e(32),l=e(71),d=e(26),u=e(72),h=e(1)("iterator"),p=!([].keys&&"next"in[].keys()),m=function(){return this};r.exports=function(x,y,v,w,k,c,_){l(v,y,w);var g,b,E,T=function(I){if(!p&&I in L)return L[I];switch(I){case"keys":case"values":return function(){return new v(this,I)}}return function(){return new v(this,I)}},C=y+" Iterator",S=k=="values",A=!1,L=x.prototype,B=L[h]||L["@@iterator"]||k&&L[k],P=B||T(k),M=k?S?T("entries"):P:void 0,O=y=="Array"&&L.entries||B;if(O&&(E=u(O.call(new x)))!==Object.prototype&&E.next&&(d(E,C,!0),i||typeof E[h]=="function"||a(E,h,m)),S&&B&&B.name!=="values"&&(A=!0,P=function(){return B.call(this)}),i&&!_||!p&&!A&&L[h]||a(L,h,P),s[y]=P,s[C]=m,k)if(g={values:S?P:T("values"),keys:c?P:T("keys"),entries:M},_)for(b in g)b in L||o(L,b,g[b]);else n(n.P+n.F*(p||A),y,g);return g}},function(r,t,e){"use strict";var i=e(30),n=e(16),o=e(26),a={};e(4)(a,e(1)("iterator"),function(){return this}),r.exports=function(s,l,d){s.prototype=i(a,{next:n(1,d)}),o(s,l+" Iterator")}},function(r,t,e){var i=e(8),n=e(19),o=e(27)("IE_PROTO"),a=Object.prototype;r.exports=Object.getPrototypeOf||function(s){return s=n(s),i(s,o)?s[o]:typeof s.constructor=="function"&&s instanceof s.constructor?s.constructor.prototype:s instanceof Object?a:null}},function(r,t,e){var i=e(23),n=e(1)("toStringTag"),o=i(function(){return arguments}())=="Arguments";r.exports=function(a){var s,l,d;return a===void 0?"Undefined":a===null?"Null":typeof(l=function(u,h){try{return u[h]}catch(p){}}(s=Object(a),n))=="string"?l:o?i(s):(d=i(s))=="Object"&&typeof s.callee=="function"?"Arguments":d}},function(r,t,e){var i=e(0),n=e(11),o=e(7);r.exports=function(a,s){var l=(n.Object||{})[a]||Object[a],d={};d[a]=s(l),i(i.S+i.F*o(function(){l(1)}),"Object",d)}},function(r,t,e){"use strict";var i=e(37),n=e(3),o=e(76),a=[].slice,s={};r.exports=Function.bind||function(l){var d=i(this),u=a.call(arguments,1),h=function(){var p=u.concat(a.call(arguments));return this instanceof h?function(m,x,y){if(!(x in s)){for(var v=[],w=0;w<x;w++)v[w]="a["+w+"]";s[x]=Function("F,a","return new F("+v.join(",")+")")}return s[x](m,y)}(d,p.length,p):o(d,p,l)};return n(d.prototype)&&(h.prototype=d.prototype),h}},function(r,t){r.exports=function(e,i,n){var o=n===void 0;switch(i.length){case 0:return o?e():e.call(n);case 1:return o?e(i[0]):e.call(n,i[0]);case 2:return o?e(i[0],i[1]):e.call(n,i[0],i[1]);case 3:return o?e(i[0],i[1],i[2]):e.call(n,i[0],i[1],i[2]);case 4:return o?e(i[0],i[1],i[2],i[3]):e.call(n,i[0],i[1],i[2],i[3])}return e.apply(n,i)}},function(r,t,e){"use strict";e(78)("trim",function(i){return function(){return i(this,3)}})},function(r,t,e){var i=e(0),n=e(24),o=e(7),a=e(79),s="["+a+"]",l=RegExp("^"+s+s+"*"),d=RegExp(s+s+"*$"),u=function(p,m,x){var y={},v=o(function(){return!!a[p]()||"\u200B\x85"[p]()!="\u200B\x85"}),w=y[p]=v?m(h):a[p];x&&(y[x]=w),i(i.P+i.F*v,"String",y)},h=u.trim=function(p,m){return p=String(n(p)),1&m&&(p=p.replace(l,"")),2&m&&(p=p.replace(d,"")),p};r.exports=u},function(r,t){r.exports=`	
\v\f\r \xA0\u1680\u180E\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200A\u202F\u205F\u3000\u2028\u2029\uFEFF`},function(r,t,e){"use strict";var i=e(0),n=e(46)(!1),o=[].indexOf,a=!!o&&1/[1].indexOf(1,-0)<0;i(i.P+i.F*(a||!e(25)(o)),"Array",{indexOf:function(s){return a?o.apply(this,arguments)||0:n(this,s,arguments[1])}})},function(r,t,e){var i=e(3),n=e(12),o=function(a,s){if(n(a),!i(s)&&s!==null)throw TypeError(s+": can't set as prototype!")};r.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(a,s,l){try{(l=e(22)(Function.call,e(49).f(Object.prototype,"__proto__").set,2))(a,[]),s=!(a instanceof Array)}catch(d){s=!0}return function(d,u){return o(d,u),s?d.__proto__=u:l(d,u),d}}({},!1):void 0),check:o}},function(r,t,e){"use strict";e.r(t),e(34),e(20),e(50),e(31),e(51),e(52),e(10),e(53),e(54);var i=.75,n=10,o=!0,a=!0,s=!0,l=!1,d="driver-highlighted-element-stage",u='<div id="'.concat("driver-page-overlay",'"></div>'),h='<div id="'.concat(d,'"></div>');e(33),e(77);function p(q){return(p=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(U){return typeof U}:function(U){return U&&typeof Symbol=="function"&&U.constructor===Symbol&&U!==Symbol.prototype?"symbol":typeof U})(q)}var m=function(q){var U=document.createElement("div");return U.innerHTML=q.trim(),U.firstChild},x=function q(U,G){if(arguments.length>2&&arguments[2]!==void 0&&arguments[2]){for(var Q=["","-webkit-","-ms-","moz-","-o-"],X=0;X<Q.length;X++){var ie=q(U,Q[X]+G);if(ie)return ie}return""}var ue="";return U.currentStyle?ue=U.currentStyle[G]:document.defaultView&&document.defaultView.getComputedStyle&&(ue=document.defaultView.getComputedStyle(U,null).getPropertyValue(G)),ue&&ue.toLowerCase?ue.toLowerCase():ue},y=function(q){return q&&p(q)==="object"&&"nodeType"in q};function v(q,U){for(var G=0;G<U.length;G++){var Q=U[G];Q.enumerable=Q.enumerable||!1,Q.configurable=!0,"value"in Q&&(Q.writable=!0),Object.defineProperty(q,Q.key,Q)}}var w=function(){function q(X,ie,ue){(function(fe,be){if(!(fe instanceof be))throw new TypeError("Cannot call a class as a function")})(this,q),this.options=X,this.highlightedElement=null,this.lastHighlightedElement=null,this.hideTimer=null,this.window=ie,this.document=ue,this.removeNode=this.removeNode.bind(this)}var U,G,Q;return U=q,(G=[{key:"attachNode",value:function(){var X=this.document.getElementById("driver-page-overlay");X||(X=m(u),document.body.appendChild(X)),this.node=X,this.node.style.opacity="0",this.options.animate||this.node.parentElement&&this.node.parentElement.removeChild(this.node)}},{key:"highlight",value:function(X){X&&X.node?X.isSame(this.highlightedElement)||(this.window.clearTimeout(this.hideTimer),X.onHighlightStarted(),this.highlightedElement&&!this.highlightedElement.isSame(this.lastHighlightedElement)&&this.highlightedElement.onDeselected(),X.getCalculatedPosition().canHighlight()&&(this.lastHighlightedElement=this.highlightedElement,this.highlightedElement=X,this.show(),this.highlightedElement.onHighlighted())):console.warn("Invalid element to highlight. Must be an instance of `Element`")}},{key:"show",value:function(){var X=this;this.node&&this.node.parentElement||(this.attachNode(),window.setTimeout(function(){X.node.style.opacity="".concat(X.options.opacity),X.node.style.position="fixed",X.node.style.left="0",X.node.style.top="0",X.node.style.bottom="0",X.node.style.right="0"}))}},{key:"getHighlightedElement",value:function(){return this.highlightedElement}},{key:"getLastHighlightedElement",value:function(){return this.lastHighlightedElement}},{key:"clear",value:function(){var X=arguments.length>0&&arguments[0]!==void 0&&arguments[0];this.options.onReset&&this.options.onReset(this.highlightedElement),this.highlightedElement&&this.highlightedElement.onDeselected(!0),this.highlightedElement=null,this.lastHighlightedElement=null,this.node&&(this.window.clearTimeout(this.hideTimer),this.options.animate&&!X?(this.node.style.opacity="0",this.hideTimer=this.window.setTimeout(this.removeNode,300)):this.removeNode())}},{key:"removeNode",value:function(){this.node&&this.node.parentElement&&this.node.parentElement.removeChild(this.node)}},{key:"refresh",value:function(){this.highlightedElement&&(this.highlightedElement.showPopover(),this.highlightedElement.showStage())}}])&&v(U.prototype,G),Q&&v(U,Q),q}();e(80);function k(q,U){for(var G=0;G<U.length;G++){var Q=U[G];Q.enumerable=Q.enumerable||!1,Q.configurable=!0,"value"in Q&&(Q.writable=!0),Object.defineProperty(q,Q.key,Q)}}var c=function(){function q(){var X=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},ie=X.left,ue=ie===void 0?0:ie,fe=X.top,be=fe===void 0?0:fe,Se=X.right,le=Se===void 0?0:Se,ke=X.bottom,Re=ke===void 0?0:ke;(function(Me,Ne){if(!(Me instanceof Ne))throw new TypeError("Cannot call a class as a function")})(this,q),this.left=ue,this.right=le,this.top=be,this.bottom=Re}var U,G,Q;return U=q,(G=[{key:"canHighlight",value:function(){return this.left<this.right&&this.top<this.bottom}}])&&k(U.prototype,G),Q&&k(U,Q),q}();function _(q,U){for(var G=0;G<U.length;G++){var Q=U[G];Q.enumerable=Q.enumerable||!1,Q.configurable=!0,"value"in Q&&(Q.writable=!0),Object.defineProperty(q,Q.key,Q)}}var g=function(){function q(){var X=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},ie=X.node,ue=X.options,fe=X.popover,be=X.stage,Se=X.overlay,le=X.window,ke=X.document;(function(Re,Me){if(!(Re instanceof Me))throw new TypeError("Cannot call a class as a function")})(this,q),this.node=ie,this.document=ke,this.window=le,this.options=ue,this.overlay=Se,this.popover=fe,this.stage=be,this.animationTimeout=null}var U,G,Q;return U=q,(G=[{key:"isInView",value:function(){for(var X=this.node.offsetTop,ie=this.node.offsetLeft,ue=this.node.offsetWidth,fe=this.node.offsetHeight,be=this.node;be.offsetParent;)X+=(be=be.offsetParent).offsetTop,ie+=be.offsetLeft;return X>=this.window.pageYOffset&&ie>=this.window.pageXOffset&&X+fe<=this.window.pageYOffset+this.window.innerHeight&&ie+ue<=this.window.pageXOffset+this.window.innerWidth}},{key:"scrollManually",value:function(){var X=this.node.getBoundingClientRect().top+this.window.pageYOffset-this.window.innerHeight/2;this.window.scrollTo(0,X)}},{key:"bringInView",value:function(){if(this.node&&!this.isInView())if(this.node.scrollIntoView)try{this.node.scrollIntoView(this.options.scrollIntoViewOptions||{behavior:"instant",block:"center"})}catch(X){this.scrollManually()}else this.scrollManually()}},{key:"getCalculatedPosition",value:function(){var X=this.document.body,ie=this.document.documentElement,ue=this.window,fe=this.window.pageYOffset||ie.scrollTop||X.scrollTop,be=ue.pageXOffset||ie.scrollLeft||X.scrollLeft,Se=this.node.getBoundingClientRect();return new c({top:Se.top+fe,left:Se.left+be,right:Se.left+be+Se.width,bottom:Se.top+fe+Se.height})}},{key:"getPopover",value:function(){return this.popover}},{key:"onDeselected",value:function(){var X=arguments.length>0&&arguments[0]!==void 0&&arguments[0];this.hidePopover(),X&&this.hideStage(),this.removeHighlightClasses(),this.window.clearTimeout(this.animationTimeout),this.options.onDeselected&&this.options.onDeselected(this)}},{key:"isSame",value:function(X){return!(!X||!X.node)&&X.node===this.node}},{key:"onHighlightStarted",value:function(){this.options.onHighlightStarted&&this.options.onHighlightStarted(this)}},{key:"onHighlighted",value:function(){this.isInView()||this.bringInView(),this.showPopover(),this.showStage(),this.addHighlightClasses(),this.options.onHighlighted&&this.options.onHighlighted(this)}},{key:"removeHighlightClasses",value:function(){this.node.classList.remove("driver-highlighted-element"),this.node.classList.remove("driver-position-relative");for(var X=this.document.querySelectorAll(".".concat("driver-fix-stacking")),ie=0;ie<X.length;ie++)X[ie].classList.remove("driver-fix-stacking")}},{key:"addHighlightClasses",value:function(){this.node.classList.add("driver-highlighted-element"),this.canMakeRelative()&&this.node.classList.add("driver-position-relative"),this.fixStackingContext()}},{key:"fixStackingContext",value:function(){for(var X=this.node.parentNode;X&&X.tagName&&X.tagName.toLowerCase()!=="body";){var ie=x(X,"z-index"),ue=parseFloat(x(X,"opacity")),fe=x(X,"transform",!0),be=x(X,"transform-style",!0),Se=x(X,"transform-box",!0),le=x(X,"filter",!0),ke=x(X,"perspective",!0);(/[0-9]+/.test(ie)||ue<1||fe&&fe!=="none"||be&&be!=="flat"||Se&&Se!=="border-box"||le&&le!=="none"||ke&&ke!=="none")&&X.classList.add("driver-fix-stacking"),X=X.parentNode}}},{key:"canMakeRelative",value:function(){var X=this.getStyleProperty("position");return["absolute","fixed","relative"].indexOf(X)===-1}},{key:"getStyleProperty",value:function(X){return x(this.node,X)}},{key:"showStage",value:function(){this.stage.show(this.getCalculatedPosition())}},{key:"getNode",value:function(){return this.node}},{key:"hideStage",value:function(){this.stage.hide()}},{key:"hidePopover",value:function(){this.popover&&this.popover.hide()}},{key:"showPopover",value:function(){var X=this;if(this.popover){var ie=this.getCalculatedPosition(),ue=300;this.options.animate&&this.overlay.lastHighlightedElement||(ue=0),this.animationTimeout=this.window.setTimeout(function(){X.popover.show(ie)},ue)}}},{key:"getFullPageSize",value:function(){var X=this.document.body,ie=this.document.documentElement;return{height:Math.max(X.scrollHeight,X.offsetHeight,ie.scrollHeight,ie.offsetHeight),width:Math.max(X.scrollWidth,X.offsetWidth,ie.scrollWidth,ie.offsetWidth)}}},{key:"getSize",value:function(){return{height:Math.max(this.node.scrollHeight,this.node.offsetHeight),width:Math.max(this.node.scrollWidth,this.node.offsetWidth)}}}])&&_(U.prototype,G),Q&&_(U,Q),q}();e(55),e(56);function b(q){return(b=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(U){return typeof U}:function(U){return U&&typeof Symbol=="function"&&U.constructor===Symbol&&U!==Symbol.prototype?"symbol":typeof U})(q)}function E(q,U,G){return U in q?Object.defineProperty(q,U,{value:G,enumerable:!0,configurable:!0,writable:!0}):q[U]=G,q}function T(q,U){for(var G=0;G<U.length;G++){var Q=U[G];Q.enumerable=Q.enumerable||!1,Q.configurable=!0,"value"in Q&&(Q.writable=!0),Object.defineProperty(q,Q.key,Q)}}function C(q,U){return!U||b(U)!=="object"&&typeof U!="function"?function(G){if(G===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return G}(q):U}function S(q){return(S=Object.setPrototypeOf?Object.getPrototypeOf:function(U){return U.__proto__||Object.getPrototypeOf(U)})(q)}function A(q,U){return(A=Object.setPrototypeOf||function(G,Q){return G.__proto__=Q,G})(q,U)}var L=function(q){function U(ie,ue,fe){var be;return function(Se,le){if(!(Se instanceof le))throw new TypeError("Cannot call a class as a function")}(this,U),(be=C(this,S(U).call(this))).options=function(Se){for(var le=1;le<arguments.length;le++){var ke=arguments[le]!=null?arguments[le]:{},Re=Object.keys(ke);typeof Object.getOwnPropertySymbols=="function"&&(Re=Re.concat(Object.getOwnPropertySymbols(ke).filter(function(Me){return Object.getOwnPropertyDescriptor(ke,Me).enumerable}))),Re.forEach(function(Me){E(Se,Me,ke[Me])})}return Se}({isFirst:!0,isLast:!0,totalCount:1,currentIndex:0,offset:0,showButtons:!0,closeBtnText:"Close",doneBtnText:"Done",startBtnText:"Next &rarr;",nextBtnText:"Next &rarr;",prevBtnText:"&larr; Previous"},ie),be.window=ue,be.document=fe,be}var G,Q,X;return function(ie,ue){if(typeof ue!="function"&&ue!==null)throw new TypeError("Super expression must either be null or a function");ie.prototype=Object.create(ue&&ue.prototype,{constructor:{value:ie,writable:!0,configurable:!0}}),ue&&A(ie,ue)}(U,g),G=U,(Q=[{key:"attachNode",value:function(){var ie=this.document.getElementById("driver-popover-item");ie&&ie.parentElement.removeChild(ie),ie=m(function(){var ue=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"";return`
  <div id="`.concat("driver-popover-item",'" class="').concat(ue,`">
    <div class="`).concat("driver-popover-tip",`"></div>
    <div class="`).concat("driver-popover-title",`">Popover Title</div>
    <div class="`).concat("driver-popover-description",`">Popover Description</div>
    <div class="driver-clearfix `).concat("driver-popover-footer",`">
      <button class="`).concat("driver-close-btn",`">Close</button>
      <span class="driver-btn-group `).concat("driver-navigation-btns",`">
        <button class="`).concat("driver-prev-btn",`">&larr; Previous</button>
        <button class="`).concat("driver-next-btn",`">Next &rarr;</button>
      </span>
    </div>
  </div>`)}(this.options.className)),document.body.appendChild(ie),this.node=ie,this.tipNode=ie.querySelector(".".concat("driver-popover-tip")),this.titleNode=ie.querySelector(".".concat("driver-popover-title")),this.descriptionNode=ie.querySelector(".".concat("driver-popover-description")),this.footerNode=ie.querySelector(".".concat("driver-popover-footer")),this.nextBtnNode=ie.querySelector(".".concat("driver-next-btn")),this.prevBtnNode=ie.querySelector(".".concat("driver-prev-btn")),this.closeBtnNode=ie.querySelector(".".concat("driver-close-btn"))}},{key:"getTitleNode",value:function(){return this.titleNode}},{key:"getDescriptionNode",value:function(){return this.descriptionNode}},{key:"hide",value:function(){this.node&&(this.node.style.display="none")}},{key:"setInitialState",value:function(){this.node.style.display="block",this.node.style.left="0",this.node.style.top="0",this.node.style.bottom="",this.node.style.right="",this.node.querySelector(".".concat("driver-popover-tip")).className="driver-popover-tip"}},{key:"show",value:function(ie){switch(this.attachNode(),this.setInitialState(),this.titleNode.innerHTML=this.options.title,this.descriptionNode.innerHTML=this.options.description||"",this.renderFooter(),this.options.position){case"left":case"left-top":this.positionOnLeft(ie);break;case"left-center":this.positionOnLeftCenter(ie);break;case"left-bottom":this.positionOnLeftBottom(ie);break;case"right":case"right-top":this.positionOnRight(ie);break;case"right-center":this.positionOnRightCenter(ie);break;case"right-bottom":this.positionOnRightBottom(ie);break;case"top":case"top-left":this.positionOnTop(ie);break;case"top-center":this.positionOnTopCenter(ie);break;case"top-right":this.positionOnTopRight(ie);break;case"bottom":case"bottom-left":this.positionOnBottom(ie);break;case"bottom-center":this.positionOnBottomCenter(ie);break;case"bottom-right":this.positionOnBottomRight(ie);break;case"mid-center":this.positionOnMidCenter(ie);break;case"auto":default:this.autoPosition(ie)}this.bringInView()}},{key:"renderFooter",value:function(){this.nextBtnNode.innerHTML=this.options.nextBtnText,this.prevBtnNode.innerHTML=this.options.prevBtnText,this.closeBtnNode.innerHTML=this.options.closeBtnText;var ie=this.options.totalCount&&this.options.totalCount!==1;this.options.showButtons?(ie?(this.nextBtnNode.style.display="inline-block",this.prevBtnNode.style.display="inline-block",this.closeBtnNode.classList.remove("driver-close-only-btn")):(this.nextBtnNode.style.display="none",this.prevBtnNode.style.display="none",this.closeBtnNode.classList.add("driver-close-only-btn")),this.footerNode.style.display="block",this.options.isFirst?(this.prevBtnNode.classList.add("driver-disabled"),this.nextBtnNode.innerHTML=this.options.startBtnText):this.prevBtnNode.classList.remove("driver-disabled"),this.options.isLast?this.nextBtnNode.innerHTML=this.options.doneBtnText:this.nextBtnNode.innerHTML=this.options.nextBtnText):this.footerNode.style.display="none"}},{key:"positionOnLeft",value:function(ie){var ue=this.getSize().width,fe=this.options.padding+10;this.node.style.left="".concat(ie.left-ue-fe,"px"),this.node.style.top="".concat(ie.top+this.options.offset-this.options.padding,"px"),this.node.style.right="",this.node.style.bottom="",this.tipNode.classList.add("right")}},{key:"positionOnLeftBottom",value:function(ie){var ue=this.getSize(),fe=ue.width,be=this.options.padding+10;this.node.style.left="".concat(ie.left-fe-be,"px"),this.node.style.top="".concat(ie.bottom+this.options.padding+this.options.offset-ue.height,"px"),this.node.style.bottom="",this.node.style.right="",this.tipNode.classList.add("right","position-bottom")}},{key:"positionOnLeftCenter",value:function(ie){var ue=this.getSize(),fe=ue.width,be=ue.height/2,Se=this.options.padding+10,le=(ie.bottom-ie.top)/2,ke=ie.top-be+le+this.options.offset;this.node.style.left="".concat(ie.left-fe-Se,"px"),this.node.style.top="".concat(ke,"px"),this.node.style.right="",this.node.style.bottom="",this.tipNode.classList.add("right","position-center")}},{key:"positionOnRight",value:function(ie){var ue=this.options.padding+10;this.node.style.left="".concat(ie.right+ue,"px"),this.node.style.top="".concat(ie.top+this.options.offset-this.options.padding,"px"),this.node.style.right="",this.node.style.bottom="",this.tipNode.classList.add("left")}},{key:"positionOnRightCenter",value:function(ie){var ue=this.getSize(),fe=this.options.padding+10,be=ue.height/2,Se=(ie.bottom-ie.top)/2,le=ie.top-be+Se+this.options.offset;this.node.style.left="".concat(ie.right+fe,"px"),this.node.style.top="".concat(le,"px"),this.node.style.right="",this.node.style.bottom="",this.tipNode.classList.add("left","position-center")}},{key:"positionOnRightBottom",value:function(ie){var ue=this.options.padding+10,fe=this.getSize();this.node.style.left="".concat(ie.right+ue,"px"),this.node.style.top="".concat(ie.bottom+this.options.padding+this.options.offset-fe.height,"px"),this.node.style.bottom="",this.node.style.right="",this.tipNode.classList.add("left","position-bottom")}},{key:"positionOnTop",value:function(ie){var ue=this.getSize().height,fe=this.options.padding+10;this.node.style.top="".concat(ie.top-ue-fe,"px"),this.node.style.left="".concat(ie.left-this.options.padding+this.options.offset,"px"),this.node.style.right="",this.node.style.bottom="",this.tipNode.classList.add("bottom")}},{key:"positionOnTopCenter",value:function(ie){var ue=this.getSize(),fe=ue.height,be=ue.width/2,Se=this.options.padding+10,le=this.options.offset+ie.left+(ie.right-ie.left)/2;this.node.style.top="".concat(ie.top-fe-Se,"px"),this.node.style.left="".concat(le-be-this.options.padding,"px"),this.node.style.right="",this.node.style.bottom="",this.tipNode.classList.add("bottom","position-center")}},{key:"positionOnTopRight",value:function(ie){var ue=this.getSize(),fe=ue.height,be=this.options.padding+10;this.node.style.top="".concat(ie.top-fe-be,"px"),this.node.style.left="".concat(ie.right+this.options.padding+this.options.offset-ue.width,"px"),this.node.style.right="",this.node.style.bottom="",this.tipNode.classList.add("bottom","position-right")}},{key:"positionOnBottom",value:function(ie){var ue=this.options.padding+10;this.node.style.top="".concat(ie.bottom+ue,"px"),this.node.style.left="".concat(ie.left-this.options.padding+this.options.offset,"px"),this.node.style.right="",this.node.style.bottom="",this.tipNode.classList.add("top")}},{key:"positionOnBottomCenter",value:function(ie){var ue=this.getSize().width/2,fe=this.options.padding+10,be=this.options.offset+ie.left+(ie.right-ie.left)/2;this.node.style.top="".concat(ie.bottom+fe,"px"),this.node.style.left="".concat(be-ue-this.options.padding,"px"),this.node.style.right="",this.node.style.bottom="",this.tipNode.classList.add("top","position-center")}},{key:"positionOnBottomRight",value:function(ie){var ue=this.getSize(),fe=this.options.padding+10;this.node.style.top="".concat(ie.bottom+fe,"px"),this.node.style.left="".concat(ie.right+this.options.padding+this.options.offset-ue.width,"px"),this.node.style.right="",this.node.style.bottom="",this.tipNode.classList.add("top","position-right")}},{key:"positionOnMidCenter",value:function(ie){var ue=this.getSize(),fe=ue.height,be=ue.width/2,Se=fe/2,le=(ie.bottom-ie.top)/2,ke=ie.top-Se+le+this.options.offset,Re=this.options.offset+ie.left+(ie.right-ie.left)/2;this.node.style.top="".concat(ke,"px"),this.node.style.left="".concat(Re-be-this.options.padding,"px"),this.node.style.right="",this.node.style.bottom="",this.tipNode.classList.add("mid-center")}},{key:"autoPosition",value:function(ie){var ue=this.getFullPageSize(),fe=this.getSize(),be=ue.height,Se=fe.height,le=this.options.padding+10;ie.bottom+Se+le>=be?this.positionOnTop(ie):this.positionOnBottom(ie)}}])&&T(G.prototype,Q),X&&T(G,X),U}();function B(q){return(B=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(U){return typeof U}:function(U){return U&&typeof Symbol=="function"&&U.constructor===Symbol&&U!==Symbol.prototype?"symbol":typeof U})(q)}function P(q,U){for(var G=0;G<U.length;G++){var Q=U[G];Q.enumerable=Q.enumerable||!1,Q.configurable=!0,"value"in Q&&(Q.writable=!0),Object.defineProperty(q,Q.key,Q)}}function M(q,U){return!U||B(U)!=="object"&&typeof U!="function"?function(G){if(G===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return G}(q):U}function O(q){return(O=Object.setPrototypeOf?Object.getPrototypeOf:function(U){return U.__proto__||Object.getPrototypeOf(U)})(q)}function I(q,U){return(I=Object.setPrototypeOf||function(G,Q){return G.__proto__=Q,G})(q,U)}var j=function(q){function U(ie,ue,fe){var be;return function(Se,le){if(!(Se instanceof le))throw new TypeError("Cannot call a class as a function")}(this,U),(be=M(this,O(U).call(this))).options=ie,be.window=ue,be.document=fe,be}var G,Q,X;return function(ie,ue){if(typeof ue!="function"&&ue!==null)throw new TypeError("Super expression must either be null or a function");ie.prototype=Object.create(ue&&ue.prototype,{constructor:{value:ie,writable:!0,configurable:!0}}),ue&&I(ie,ue)}(U,g),G=U,(Q=[{key:"attachNode",value:function(){var ie=this.document.getElementById(d);ie||(ie=m(h),document.body.appendChild(ie)),this.node=ie,this.options.animate?this.node.classList.remove("driver-stage-no-animation"):this.node.classList.add("driver-stage-no-animation")}},{key:"hide",value:function(){this.node&&this.node.parentElement&&this.node.parentElement.removeChild(this.node)}},{key:"setInitialStyle",value:function(){this.node.style.display="block",this.node.style.left="0",this.node.style.top="0",this.node.style.bottom="",this.node.style.right=""}},{key:"show",value:function(ie){this.attachNode(),this.setInitialStyle();var ue=2*this.options.padding,fe=ie.right-ie.left+ue,be=ie.bottom-ie.top+ue;this.node.style.display="block",this.node.style.position="absolute",this.node.style.width="".concat(fe,"px"),this.node.style.height="".concat(be,"px"),this.node.style.top="".concat(ie.top-ue/2,"px"),this.node.style.left="".concat(ie.left-ue/2,"px"),this.node.style.backgroundColor=this.options.stageBackground}}])&&P(G.prototype,Q),X&&P(G,X),U}();function H(q){for(var U=1;U<arguments.length;U++){var G=arguments[U]!=null?arguments[U]:{},Q=Object.keys(G);typeof Object.getOwnPropertySymbols=="function"&&(Q=Q.concat(Object.getOwnPropertySymbols(G).filter(function(X){return Object.getOwnPropertyDescriptor(G,X).enumerable}))),Q.forEach(function(X){N(q,X,G[X])})}return q}function N(q,U,G){return U in q?Object.defineProperty(q,U,{value:G,enumerable:!0,configurable:!0,writable:!0}):q[U]=G,q}function D(q,U){for(var G=0;G<U.length;G++){var Q=U[G];Q.enumerable=Q.enumerable||!1,Q.configurable=!0,"value"in Q&&(Q.writable=!0),Object.defineProperty(q,Q.key,Q)}}e.d(t,"default",function(){return K});var K=function(){function q(){var X=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};(function(ie,ue){if(!(ie instanceof ue))throw new TypeError("Cannot call a class as a function")})(this,q),this.options=H({animate:o,opacity:i,padding:n,scrollIntoViewOptions:null,allowClose:a,keyboardControl:s,overlayClickNext:l,stageBackground:"#ffffff",onHighlightStarted:function(){return null},onHighlighted:function(){return null},onDeselected:function(){return null},onReset:function(){return null},onNext:function(){return null},onPrevious:function(){return null}},X),this.document=document,this.window=window,this.isActivated=!1,this.steps=[],this.currentStep=0,this.currentMovePrevented=!1,this.overlay=new w(this.options,window,document),this.onResize=this.onResize.bind(this),this.onKeyUp=this.onKeyUp.bind(this),this.onClick=this.onClick.bind(this),this.moveNext=this.moveNext.bind(this),this.movePrevious=this.movePrevious.bind(this),this.preventMove=this.preventMove.bind(this),this.bind()}var U,G,Q;return U=q,(G=[{key:"getSteps",value:function(){return this.steps}},{key:"setSteps",value:function(X){this.steps=X}},{key:"bind",value:function(){this.window.addEventListener("resize",this.onResize,!1),this.window.addEventListener("keyup",this.onKeyUp,!1),"ontouchstart"in document.documentElement?this.window.addEventListener("touchstart",this.onClick,!1):this.window.addEventListener("click",this.onClick,!1)}},{key:"onClick",value:function(X){if(this.isActivated&&this.hasHighlightedElement()){X.stopPropagation();var ie=this.overlay.getHighlightedElement(),ue=this.document.getElementById("driver-popover-item"),fe=ie.node.contains(X.target),be=ue&&ue.contains(X.target);if(fe||be||!this.options.overlayClickNext)if(fe||be||!this.options.allowClose){var Se=X.target.classList.contains("driver-next-btn"),le=X.target.classList.contains("driver-prev-btn");X.target.classList.contains("driver-close-btn")?this.reset():Se?this.handleNext():le&&this.handlePrevious()}else this.reset();else this.handleNext()}}},{key:"onResize",value:function(){this.isActivated&&this.refresh()}},{key:"refresh",value:function(){this.overlay.refresh()}},{key:"onKeyUp",value:function(X){if(this.isActivated&&this.options.keyboardControl)if(X.keyCode!==27){var ie=this.getHighlightedElement();ie&&ie.popover&&(X.keyCode===39?this.handleNext():X.keyCode===37&&this.handlePrevious())}else this.reset()}},{key:"movePrevious",value:function(){var X=this.steps[this.currentStep-1];X?(this.overlay.highlight(X),this.currentStep-=1):this.reset()}},{key:"preventMove",value:function(){this.currentMovePrevented=!0}},{key:"handleNext",value:function(){this.currentMovePrevented=!1;var X=this.steps[this.currentStep];X&&X.options&&X.options.onNext&&X.options.onNext(this.overlay.highlightedElement),this.currentMovePrevented||this.moveNext()}},{key:"handlePrevious",value:function(){this.currentMovePrevented=!1;var X=this.steps[this.currentStep];X&&X.options&&X.options.onPrevious&&X.options.onPrevious(this.overlay.highlightedElement),this.currentMovePrevented||this.movePrevious()}},{key:"moveNext",value:function(){var X=this.steps[this.currentStep+1];X?(this.overlay.highlight(X),this.currentStep+=1):this.reset()}},{key:"hasNextStep",value:function(){return!!this.steps[this.currentStep+1]}},{key:"hasPreviousStep",value:function(){return!!this.steps[this.currentStep-1]}},{key:"reset",value:function(){var X=arguments.length>0&&arguments[0]!==void 0&&arguments[0];this.currentStep=0,this.isActivated=!1,this.overlay.clear(X)}},{key:"hasHighlightedElement",value:function(){var X=this.overlay.getHighlightedElement();return X&&X.node}},{key:"getHighlightedElement",value:function(){return this.overlay.getHighlightedElement()}},{key:"getLastHighlightedElement",value:function(){return this.overlay.getLastHighlightedElement()}},{key:"defineSteps",value:function(X){this.steps=[];for(var ie=0;ie<X.length;ie++){var ue=this.prepareElementFromStep(X[ie],X,ie);ue&&this.steps.push(ue)}}},{key:"prepareElementFromStep",value:function(X){var ie=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],ue=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,fe=H({},this.options),be=X,Se=typeof X!="string"&&!y(X);if(!X||Se&&!X.element)throw new Error("Element is required in step ".concat(ue));Se&&(be=X.element,fe=H({},this.options,X));var le=y(be)?be:this.document.querySelector(be);if(!le)return console.warn("Element to highlight ".concat(be," not found")),null;var ke=null;if(fe.popover&&fe.popover.title){var Re=[this.options.className,fe.popover.className].filter(function(Ke){return Ke}).join(" "),Me=H({},fe,fe.popover,{className:Re,totalCount:ie.length,currentIndex:ue,isFirst:ue===0,isLast:ie.length===0||ue===ie.length-1});ke=new L(Me,this.window,this.document)}var Ne=H({},fe),et=new j(Ne,this.window,this.document);return new g({node:le,options:fe,popover:ke,stage:et,overlay:this.overlay,window:this.window,document:this.document})}},{key:"start",value:function(){var X=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;if(!this.steps||this.steps.length===0)throw new Error("There are no steps defined to iterate");this.isActivated=!0,this.currentStep=X,this.overlay.highlight(this.steps[X])}},{key:"highlight",value:function(X){this.isActivated=!0;var ie=this.prepareElementFromStep(X);ie&&this.overlay.highlight(ie)}}])&&D(U.prototype,G),Q&&D(U,Q),q}()}]).default})});window.frappe||(window.frappe={});frappe.provide=function(r){for(var t=r.split("."),e=window,i=0;i<t.length;i++){var n=t[i];e[n]||(e[n]={}),e=e[n]}return e};frappe.provide("locals");frappe.provide("frappe.flags");frappe.provide("frappe.settings");frappe.provide("frappe.utils");frappe.provide("frappe.ui.form");frappe.provide("frappe.modules");frappe.provide("frappe.templates");frappe.provide("frappe.test_data");frappe.provide("frappe.utils");frappe.provide("frappe.model");frappe.provide("frappe.user");frappe.provide("frappe.session");frappe.provide("frappe._messages");frappe.provide("locals.DocType");frappe.provide("frappe.listview_settings");frappe.provide("frappe.tour");frappe.provide("frappe.listview_parent_route");window.NEWLINE=`
`;window.TAB=9;window.UP_ARROW=38;window.DOWN_ARROW=40;window.cur_frm=null;frappe._=function(r,t,e=null){if(!r||typeof r!="string")return r;let i="",n=r;return e&&(i=frappe._messages[`${n}:${e}`]),i||(i=frappe._messages[n]||r),t&&typeof t=="object"&&(i=$.format(i,t)),i};window.__=frappe._;frappe.get_languages=function(){return frappe.languages||(frappe.languages=[],$.each(frappe.boot.lang_dict,function(r,t){frappe.languages.push({label:r,value:t})}),frappe.languages=frappe.languages.sort(function(r,t){return r.value<t.value?-1:1})),frappe.languages};(function(r){"use strict";var t=/xyz/.test(function(){xyz})?/\b_super\b/:/.*/;function e(){}e.extend=function(i){var n=this.prototype,o=Object.create(n);for(var a in i)o[a]=typeof i[a]=="function"&&typeof n[a]=="function"&&t.test(i[a])?function(l,d){return function(){var u=this._super;this._super=n[l];var h=d.apply(this,arguments);return this._super=u,h}}(a,i[a]):i[a];var s=typeof o.init=="function"?o.hasOwnProperty("init")?o.init:function(){n.init.apply(this,arguments)}:function(){};return s.prototype=o,o.constructor=s,s.extend=e.extend,s},r.Class=e})(window);String.prototype.includes||(String.prototype.includes=function(r,t){"use strict";return typeof t!="number"&&(t=0),t+r.length>this.length?!1:this.indexOf(r,t)!==-1});Array.prototype.includes||Object.defineProperty(Array.prototype,"includes",{value:function(r,t){if(this==null)throw new TypeError('"this" is null or not defined');var e=Object(this),i=e.length>>>0;if(i===0)return!1;for(var n=t|0,o=Math.max(n>=0?n:i-Math.abs(n),0);o<i;){if(e[o]===r)return!0;o++}return!1}});typeof String.prototype.trimLeft!="function"&&(String.prototype.trimLeft=function(){return this.replace(/^\s+/,"")});typeof String.prototype.trimRight!="function"&&(String.prototype.trimRight=function(){return this.replace(/\s+$/,"")});typeof Object.assign!="function"&&Object.defineProperty(Object,"assign",{value:function(t){"use strict";if(t==null)throw new TypeError("Cannot convert undefined or null to object");for(var e=Object(t),i=1;i<arguments.length;i++){var n=arguments[i];if(n!=null)for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},writable:!0,configurable:!0});frappe.require=function(r,t){return typeof r=="string"&&(r=[r]),r=r.map(e=>frappe.assets.bundled_asset(e)),new Promise(e=>{frappe.assets.execute(r,()=>{e(),t&&t()})})};frappe.assets={check:function(){if(window._version_number!=localStorage.getItem("_version_number")&&(frappe.assets.clear_local_storage(),console.log("Cleared App Cache.")),localStorage._last_load){var r=new Date-new Date(localStorage._last_load);(r<1e4||r>864e5)&&frappe.assets.clear_local_storage()}else frappe.assets.clear_local_storage();frappe.assets.init_local_storage()},init_local_storage:function(){localStorage._last_load=new Date,localStorage._version_number=window._version_number,frappe.boot&&(localStorage.metadata_version=frappe.boot.metadata_version)},clear_local_storage:function(){$.each(["_last_load","_version_number","metadata_version","page_info","last_visited"],function(t,e){localStorage.removeItem(e)});for(var r in localStorage)(r.indexOf("desk_assets:")===0||r.indexOf("_page:")===0||r.indexOf("_doctype:")===0||r.indexOf("preferred_breadcrumbs:")===0)&&localStorage.removeItem(r);console.log("localStorage cleared")},executed_:[],execute:function(r,t){for(var e=[],i=0,n=r.length;i<n;i++)frappe.assets.exists(r[i])||e.push(r[i]);e.length?frappe.assets.fetch(e,function(){frappe.assets.eval_assets(r,t)}):frappe.assets.eval_assets(r,t)},eval_assets:function(r,t){for(var e=0,i=r.length;e<i;e++){var n=r[e];frappe.assets.executed_.indexOf(n)===-1&&(frappe.assets.handler[frappe.assets.extn(n)](frappe.assets.get(n),n),frappe.assets.executed_.push(n))}t&&t()},exists:function(r){return frappe.assets.executed_.indexOf(r)!==-1?!0:frappe.boot.developer_mode?!1:!!frappe.assets.get(r)},fetch:function(r,t){frappe.call({type:"GET",method:"frappe.client.get_js",args:{items:r},callback:function(e){$.each(r,function(i,n){frappe.assets.add(n,e.message[i])}),t()},freeze:!0})},add:function(r,t){if("localStorage"in window)try{frappe.assets.set(r,t)}catch(e){frappe.assets.clear_local_storage(),frappe.assets.set(r,t)}},get:function(r){return localStorage.getItem("desk_assets:"+r)},set:function(r,t){localStorage.setItem("desk_assets:"+r,t)},extn:function(r){return r.indexOf("?")!=-1&&(r=r.split("?").slice(-1)[0]),r.split(".").slice(-1)[0]},handler:{js:function(r,t){frappe.dom.eval(r)},css:function(r,t){frappe.dom.set_style(r)}},bundled_asset(r,t=null){return!r.startsWith("/assets")&&r.includes(".bundle.")&&(r.endsWith(".css")&&t&&(r=`rtl_${r}`),r=frappe.boot.assets_json[r]||r),r}};function hp(r,t){return r==null?r:(this.unkeyed_index=0,r.replace(/\{(\w*)\}/g,function(e,i){if(i===""&&(i=this.unkeyed_index,this.unkeyed_index++),i==+i)return t[i]!==void 0?t[i]:e}.bind(this)))}jQuery&&(jQuery.format=hp);frappe.provide("frappe.form.formatters");frappe.form.link_formatters={};frappe.form.formatters={_right:function(r,t){return t&&(t.inline||t.only_value)?r:"<div style='text-align: right'>"+r+"</div>"},_apply_custom_formatter:function(r,t){if(t){let e=frappe.meta.docfield_map[t.parent]&&frappe.meta.docfield_map[t.parent][t.fieldname];e&&e.formatter&&typeof e.formatter=="function"&&(r=e.formatter(r,t))}return r},Data:function(r,t){return t&&t.options=="URL"?r?`<a href="${r}" title="Open Link" target="_blank">${r}</a>`:void 0:(r=r==null?"":r,frappe.form.formatters._apply_custom_formatter(r,t))},Autocomplete:function(r,t){return __(frappe.form.formatters.Data(r,t))},Select:function(r,t){return __(frappe.form.formatters.Data(r,t))},Float:function(r,t,e,i){var n=t.precision||cint(frappe.boot.sysdefaults&&frappe.boot.sysdefaults.float_precision)||null;if(t.options&&t.options.trim())return t.precision=n,frappe.form.formatters.Currency(r,t,e,i);if(!(e||{}).always_show_decimals&&!is_null(r)){var o=cstr(r).split(".");(o[1]==null||cint(o[1])===0)&&(n=0)}return r=r==null||r===""?"":r,frappe.form.formatters._right(format_number(r,null,n),e)},Int:function(r,t,e){return frappe.form.formatters._right(r==null?"":cint(r),e)},Percent:function(r,t,e){let i=t.precision||cint(frappe.boot.sysdefaults&&frappe.boot.sysdefaults.float_precision)||2;return frappe.form.formatters._right(flt(r,i)+"%",e)},Rating:function(r,t){let e="",i=t.options||5;return r=r*i,r=Math.round(r*2)/2,Array.from({length:cint(i)},(n,o)=>o+1).forEach(n=>{e+=`<svg class="icon icon-md" data-rating=${n} viewBox="0 0 24 24" fill="none">
				<path class="right-half ${n<=(r||0)?"star-click":""}" d="M11.9987 3.00011C12.177 3.00011 12.3554 3.09303 12.4471 3.27888L14.8213 8.09112C14.8941 8.23872 15.0349 8.34102 15.1978 8.3647L20.5069 9.13641C20.917 9.19602 21.0807 9.69992 20.7841 9.9892L16.9421 13.7354C16.8243 13.8503 16.7706 14.0157 16.7984 14.1779L17.7053 19.4674C17.7753 19.8759 17.3466 20.1874 16.9798 19.9945L12.2314 17.4973C12.1586 17.459 12.0786 17.4398 11.9987 17.4398V3.00011Z" fill="var(--star-fill)" stroke="var(--star-fill)"/>
				<path class="left-half ${n<=(r||0)||n-.5==r?"star-click":""}" d="M11.9987 3.00011C11.8207 3.00011 11.6428 3.09261 11.5509 3.27762L9.15562 8.09836C9.08253 8.24546 8.94185 8.34728 8.77927 8.37075L3.42887 9.14298C3.01771 9.20233 2.85405 9.70811 3.1525 9.99707L7.01978 13.7414C7.13858 13.8564 7.19283 14.0228 7.16469 14.1857L6.25116 19.4762C6.18071 19.8842 6.6083 20.1961 6.97531 20.0045L11.7672 17.5022C11.8397 17.4643 11.9192 17.4454 11.9987 17.4454V3.00011Z" fill="var(--star-fill)" stroke="var(--star-fill)"/>
			</svg>`}),`<div class="rating">
			${e}
		</div>`},Currency:function(r,t,e,i){var n=frappe.meta.get_field_currency(t,i),o=t.precision||cint(frappe.boot.sysdefaults.currency_precision)||2;if(o>2){var a=cstr(r).split("."),s=a.length>1?a[1]:"";if(s.length<3||s.length<o){let l=frappe.model.get_value(":Currency",n,"fraction_units")||100;s.length<cstr(l).length&&(o=cstr(l).length-1)}}return r=r==null||r===""?"":r,r=format_currency(r,n,o),e&&e.only_value?r:frappe.form.formatters._right(r,e)},Check:function(r){return`<input type="checkbox" disabled
			class="disabled-${r?"selected":"deselected"}">`},Link:function(r,t,e,i){var n=t._options||t.options,o=r;let a=frappe.utils.get_link_title(n,r);return r&&r.match&&r.match(/^['"].*['"]$/)&&r.replace(/^.(.*).$/,"$1"),e&&(e.for_print||e.only_value)?a||r:(frappe.form.link_formatters[n]&&i&&n!==i.doctype&&(r=frappe.form.link_formatters[n](r,i,t)),r?r[0]=="'"&&r[r.length-1]=="'"?r.substring(1,r.length-1):t&&t.link_onclick?repl('<a onclick="%(onclick)s">%(value)s</a>',{onclick:t.link_onclick.replace(/"/g,"&quot;"),value:r}):t&&n&&frappe.model.can_read(n)?`<a
					href="/app/${encodeURIComponent(frappe.router.slug(n))}/${encodeURIComponent(o)}"
					data-doctype="${n}"
					data-name="${o}"
					data-value="${o}">
					${__(e&&e.label||a||r)}</a>`:a||r:"")},Date:function(r){return frappe.datetime.str_to_user?(r&&(r=frappe.datetime.str_to_user(r,!1,!0),r==="Invalid date"&&(r=null)),r||""):r},DateRange:function(r){return Array.isArray(r)?__("{0} to {1}",[frappe.datetime.str_to_user(r[0]),frappe.datetime.str_to_user(r[1])]):r||""},Datetime:function(r){return r?moment(frappe.datetime.convert_to_user_tz(r)).format(frappe.boot.sysdefaults.date_format.toUpperCase()+" "+(frappe.boot.sysdefaults.time_format||"HH:mm:ss")):""},Text:function(r,t){if(r){for(var e=["<p","<div","<br","<table"],i=!1,n=0;n<e.length;n++)if(r.match(e[n])){i=!0;break}i||(r=frappe.utils.replace_newlines(r))}return frappe.form.formatters.Data(r,t)},Time:function(r){return r&&(r=frappe.datetime.str_to_user(r,!0)),r||""},Duration:function(r,t){if(r){let e=frappe.utils.get_duration_options(t);r=frappe.utils.get_formatted_duration(r,e)}return r||"0s"},LikedBy:function(r){var t="";return $.each(JSON.parse(r||"[]"),function(e,i){i&&(t+=frappe.avatar(i))}),t},Tag:function(r){var t="";return $.each((r||"").split(","),function(e,i){i&&(t+=`
				<span
					class="data-pill btn-xs align-center ellipsis"
					style="background-color: var(--control-bg); box-shadow: none; margin-right: 4px;"
					data-field="_user_tags" data-label="${i}'">
					${i}
				</span>`)}),t},Comment:function(r){return r},Assign:function(r){var t="";return $.each(JSON.parse(r||"[]"),function(e,i){i&&(t+='<span class="label label-warning" 				style="margin-right: 7px;"				data-field="_assign">'+i+"</span>")}),t},SmallText:function(r){return frappe.form.formatters.Text(r)},TextEditor:function(r){let t=frappe.form.formatters.Text(r);try{!$(t).find(".ql-editor").length&&!$(t).hasClass("ql-editor")&&(t=`<div class="ql-editor read-mode">${t}</div>`)}catch(e){t=`<div class="ql-editor read-mode">${t}</div>`}return t},Code:function(r){return"<pre>"+(r==null?"":$("<div>").text(r).html())+"</pre>"},WorkflowState:function(r){var t=frappe.get_doc("Workflow State",r);return t?repl("<span class='label label-%(style)s' 				data-workflow-state='%(value)s'				style='padding-bottom: 4px; cursor: pointer;'>				<i class='fa fa-small fa-white fa-%(icon)s'></i> %(value)s</span>",{value:r,style:t.style.toLowerCase(),icon:t.icon}):"<span class='label'>"+r+"</span>"},Email:function(r){return $("<div></div>").text(r).html()},FileSize:function(r){return r>1048576?r=flt(flt(r)/1048576,1)+"M":r>1024&&(r=flt(flt(r)/1024,1)+"K"),r},TableMultiSelect:function(r,t,e){r=r||[];let n=frappe.get_meta(t.options).fields.find(a=>a.fieldtype==="Link");return r.map(a=>{let s=a[n.fieldname];return frappe.format(s,n,e,a)}).join(", ")},Color:r=>r?`<div>
			<div class="selected-color" style="background-color: ${r}"></div>
			<span class="color-value">${r}</span>
		</div>`:"",Icon:r=>r?`<div>
			<div class="selected-icon">${frappe.utils.icon(r,"md")}</div>
			<span class="icon-value">${r}</span>
		</div>`:""};frappe.form.get_formatter=function(r){return r||(r="Data"),frappe.form.formatters[r.replace(/ /g,"")]||frappe.form.formatters.Data};frappe.format=function(r,t,e,i){t||(t={fieldtype:"Data"}),t.fieldname=="_user_tags"&&(t.fieldtype="Tag");var n=t.fieldtype||"Data";n==="Dynamic Link"&&(n="Link",t._options=i?i[t.options]:null);var o=t.formatter||frappe.form.get_formatter(n),a=o(r,t,e,i);return typeof a=="string"&&(a=frappe.dom.remove_script_and_style(a)),a};frappe.get_format_helper=function(r){var t={get_formatted:function(e){var i=frappe.meta.get_docfield(r.doctype,e);return i||console.log("fieldname not found: "+e),frappe.format(r[e],i,{inline:1},r)}};return $.extend(t,r),t};frappe.form.link_formatters.User=function(r,t,e){return t&&(t.full_name||e&&t[`${e.fieldname}_full_name`])||r};frappe.provide("frappe.dom");frappe.dom={id_count:0,freeze_count:0,by_id:function(r){return document.getElementById(r)},get_unique_id:function(){let r="unique-"+frappe.dom.id_count;return frappe.dom.id_count++,r},set_unique_id:function(r){var t=$(r);if(t.attr("id"))return t.attr("id");var e="unique-"+frappe.dom.id_count;return t.attr("id",e),frappe.dom.id_count++,e},eval:function(r){if(!!r){var t=document.createElement("script");t.appendChild(document.createTextNode(r)),document.getElementsByTagName("head")[0].appendChild(t)}},remove_script_and_style:function(r){let t=["script","style","noscript","title","meta","base","head"],i=new DOMParser().parseFromString(r,"text/html"),n=i.body,o=!!i.head.innerHTML;for(let a of t)for(let s of n.getElementsByTagName(a))o=!0,s.parentNode.removeChild(s);for(let a of n.getElementsByTagName("link")){let s=a.getAttribute("rel");s&&s.toLowerCase().trim()==="stylesheet"&&(o=!0,a.parentNode.removeChild(a))}return o?n.innerHTML:r},is_element_in_viewport:function(r,t=0){typeof jQuery=="function"&&r instanceof jQuery&&(r=r[0]);var e=r.getBoundingClientRect();return e.top+t>=0&&e.left+t>=0&&e.bottom-t<=$(window).height()&&e.right-t<=$(window).width()},is_element_in_modal(r){return Boolean($(r).parents(".modal").length)},set_style:function(r,t){if(!!r){var e=document.createElement("style");if(e.type="text/css",t){var i=document.getElementById(t);i&&i.parentNode.removeChild(i),e.id=t}return e.styleSheet?e.styleSheet.cssText=r:e.appendChild(document.createTextNode(r)),document.getElementsByTagName("head")[0].appendChild(e),e}},add:function(r,t,e,i,n,o){r&&r.substr&&(r=frappe.dom.by_id(r));var a=document.createElement(t);return r&&r.appendChild(a),e&&(t.toLowerCase()=="img"?a.src=e:a.className=e),i&&frappe.dom.css(a,i),n&&(a.innerHTML=n),o&&(a.onclick=o),a},css:function(r,t){return r&&t&&$.extend(r.style,t),r},activate:function(r,t,e,i="active"){r.find(`.${e}.${i}`).removeClass(i),t.addClass(i)},freeze:function(r,t){if($("#freeze").length)$("#freeze").addClass("in");else{var e=$('<div id="freeze" class="modal-backdrop fade"></div>').on("click",function(){if(cur_frm&&cur_frm.cur_grid)return cur_frm.cur_grid.toggle_view(),!1}).appendTo("#body");e.html(repl('<div class="freeze-message-container"><div class="freeze-message"><p class="lead">%(msg)s</p></div></div>',{msg:r||""})),setTimeout(function(){e.addClass("in")},1)}t&&$("#freeze").addClass(t),frappe.dom.freeze_count++},unfreeze:function(){if(!!frappe.dom.freeze_count&&(frappe.dom.freeze_count--,!frappe.dom.freeze_count))var r=$("#freeze").removeClass("in").remove()},save_selection:function(){if(window.getSelection){var r=window.getSelection();if(r.getRangeAt&&r.rangeCount){for(var t=[],e=0,i=r.rangeCount;e<i;++e)t.push(r.getRangeAt(e));return t}}else if(document.selection&&document.selection.createRange)return document.selection.createRange();return null},restore_selection:function(r){if(r)if(window.getSelection){var t=window.getSelection();t.removeAllRanges();for(var e=0,i=r.length;e<i;++e)t.addRange(r[e])}else document.selection&&r.select&&r.select()},is_touchscreen:function(){return"ontouchstart"in window},handle_broken_images(r){$(r).find("img").on("error",t=>{$(t.currentTarget).addClass("no-image")})},scroll_to_bottom(r){let t=$(r);t.scrollTop(t[0].scrollHeight)},file_to_base64(r){return new Promise(t=>{let e=new FileReader;e.onload=function(){t(e.result)},e.readAsDataURL(r)})},scroll_to_section(r){setTimeout(()=>{let t=$(`a:contains("${r}")`);t.length&&(t.parent().hasClass("collapsed")&&t.click(),frappe.ui.scroll(t.parent().parent()))},200)},pixel_to_inches(r){let t=$('<div id="dpi" style="height: 1in; width: 1in; left: 100%; position: fixed; top: 100%;"></div>');t.appendTo(document.body);let e=document.getElementById("dpi").offsetWidth,i=r/e;return t.remove(),i}};frappe.ellipsis=function(r,t){return t||(t=20),r=cstr(r),r.length>t&&(r=r.substr(0,t)+"..."),r};frappe.run_serially=function(r){var t=Promise.resolve();return r.forEach(e=>{e&&(t=t.then?t.then(e):Promise.resolve())}),t};frappe.load_image=(r,t,e,i=()=>{})=>{var n=new Image;n.onload=function(){t(this)},n.onerror=e,i(n),n.src=r};frappe.timeout=r=>new Promise(t=>{setTimeout(()=>t(),r*1e3)});frappe.scrub=function(r,t="_"){return r.replace(/ /g,t).toLowerCase()};frappe.unscrub=function(r){return frappe.model.unscrub(r)};frappe.get_data_pill=(r,t=null,e=null,i=null)=>{let n=$(`
		<button class="data-pill btn">
			<div class="flex align-center ellipsis">
				${i||""}
				<span class="pill-label ${i?"ml-2":""}">${r}</span>
			</div>
		</button>
	`);if(e){let o=$(`
			<span class="remove-btn cursor-pointer">
				${frappe.utils.icon("close","sm")}
			</span>
		`).click(()=>{e(t||r,n)});n.append(o)}return n};frappe.get_modal=function(r,t){return $(`<div class="modal fade" style="overflow: auto;" tabindex="-1">
		<div class="modal-dialog">
			<div class="modal-content">
				<div class="modal-header">
					<div class="fill-width flex title-section">
						<span class="indicator hidden"></span>
						<h4 class="modal-title">${r}</h4>
					</div>
					<div class="modal-actions">
						<button class="btn btn-modal-minimize btn-link hide">
							${frappe.utils.icon("collapse")}
						</button>
						<button class="btn btn-modal-close btn-link" data-dismiss="modal">
							${frappe.utils.icon("close-alt","sm","close-alt")}
						</button>
					</div>
				</div>
				<div class="modal-body ui-front">${t}</div>
				<div class="modal-footer hide">
					<div class="custom-actions"></div>
					<div class="standard-actions">
						<button type="button" class="btn btn-secondary btn-sm hide btn-modal-secondary">
						</button>
						<button type="button" class="btn btn-primary btn-sm hide btn-modal-primary">
							${__("Confirm")}
						</button>
					</div>
				</div>
			</div>
		</div>
	</div>`)};frappe.is_online=function(){return frappe.boot.developer_mode==1?!0:"onLine"in navigator?navigator.onLine:!0};$(window).on("online",function(){frappe.show_alert({indicator:"green",message:__("You are connected to internet.")})});$(window).on("offline",function(){frappe.show_alert({indicator:"orange",message:__("Connection lost. Some features might not work.")})});var Ii=class{constructor(t,e,i,n){this.layout=n,this.card_layout=i,this.parent=t,this.df=e||{},this.fields_list=[],this.fields_dict={},this.make(),this.df.label&&this.df.collapsible&&localStorage.getItem(e.css_class+"-closed")&&this.collapse(),this.row={wrapper:this.wrapper},this.refresh()}make(){let t=this.card_layout;this.wrapper=$(`<div class="row
				${this.df.is_dashboard_section?"form-dashboard-section":"form-section"}
				${t?"card-section":""}">
			`).appendTo(this.parent),this.layout&&this.layout.sections.push(this),this.df&&(this.df.label&&this.make_head(),this.df.description&&(this.description_wrapper=$(`<div class="col-sm-12 form-section-description">
						${__(this.df.description)}
					</div>`),this.wrapper.append(this.description_wrapper)),this.df.css_class&&this.wrapper.addClass(this.df.css_class),this.df.hide_border&&this.wrapper.toggleClass("hide-border",!0)),this.body=$('<div class="section-body">').appendTo(this.wrapper),this.df.body_html&&this.body.append(this.df.body_html)}make_head(){this.head=$(`
			<div class="section-head">
				${__(this.df.label)}
				<span class="ml-2 collapse-indicator mb-1"></span>
			</div>
		`),this.head.appendTo(this.wrapper),this.indicator=this.head.find(".collapse-indicator"),this.indicator.hide(),this.df.collapsible&&(this.collapse_link=this.head.on("click",()=>{this.collapse()}),this.set_icon(),this.indicator.show())}refresh(t){!this.df||(t=t||this.df.hidden||this.df.hidden_due_to_dependency,this.wrapper.toggleClass("hide-control",!!t))}collapse(t){!(this.head&&this.body)||(t===void 0&&(t=!this.body.hasClass("hide")),this.body.toggleClass("hide",t),this.head&&this.head.toggleClass("collapsed",t),this.set_icon(t),this.fields_list.forEach(e=>{e.df.fieldtype=="Signature"&&e.refresh()}),this.df.css_class&&localStorage.setItem(this.df.css_class+"-closed",t?"1":""))}set_icon(t){let e=t?"down":"up-line";this.indicator&&this.indicator.html(frappe.utils.icon(e,"sm","mb-1"))}is_collapsed(){return this.body.hasClass("hide")}has_missing_mandatory(){let t=!1;for(let e=0,i=this.fields_list.length;e<i;e++){let n=this.fields_list[e].df;if(n.reqd&&this.layout.doc[n.fieldname]==null){t=!0;break}}return t}hide(){this.on_section_toggle(!1)}show(){this.on_section_toggle(!0)}on_section_toggle(t){this.wrapper.toggleClass("hide-control",!t)}};var Ri=class{constructor(t,e,i,n,o){this.parent=t,this.df=e||{},this.frm=i,this.doctype=this.frm.doctype,this.label=this.df&&this.df.label,this.tabs_list=n,this.tabs_content=o,this.fields_list=[],this.fields_dict={},this.make(),this.setup_listeners(),this.refresh()}make(){let t=`${frappe.scrub(this.doctype,"-")}-${this.df.fieldname}`;this.parent=$(`
			<li class="nav-item">
				<a class="nav-link ${this.df.active?"active":""}" id="${t}-tab"
					data-toggle="tab"
					href="#${t}"
					role="tab"
					aria-controls="${this.label}">
						${__(this.label)}
				</a>
			</li>
		`).appendTo(this.tabs_list),this.wrapper=$(`<div class="tab-pane fade show ${this.df.active?"active":""}"
			id="${t}" role="tabpanel" aria-labelledby="${t}-tab">`).appendTo(this.tabs_content)}refresh(){if(!this.df)return;let t=this.df.hidden||this.df.hidden_due_to_dependency;!t&&this.df.show_dashboard&&this.frm.is_new()&&!this.fields_list.length&&(t=!0),!t&&this.frm&&!this.frm.get_perm(this.df.permlevel||0,"read")&&(t=!0),t||(t=!0,this.wrapper.find(".form-section:not(.hide-control, .empty-section), .form-dashboard-section:not(.hide-control, .empty-section)").length&&(t=!1)),this.toggle(!t)}toggle(t){this.parent.toggleClass("hide",!t),this.wrapper.toggleClass("hide",!t),this.parent.toggleClass("show",t),this.wrapper.toggleClass("show",t),this.hidden=!t}show(){this.parent.show()}hide(){this.parent.hide()}set_active(){var t,e;this.parent.find(".nav-link").tab("show"),this.wrapper.addClass("show"),(e=(t=this.frm)==null?void 0:t.set_active_tab)==null||e.call(t,this)}is_active(){return this.wrapper.hasClass("active")}is_hidden(){return this.wrapper.hasClass("hide")}setup_listeners(){this.parent.find(".nav-link").on("shown.bs.tab",()=>{var t,e;(e=this==null?void 0:(t=this.frm).set_active_tab)==null||e.call(t,this)})}};var Pi=class{constructor(t,e){e||(e={}),this.df=e,this.section=t,this.make(),this.resize_all_columns()}make(){this.wrapper=$(`
			<div class="form-column">
				<form>
				</form>
			</div>
		`).appendTo(this.section.body).find("form").on("submit",function(){return!1}),this.df.label&&$(`
				<label class="control-label">
					${__(this.df.label)}
				</label>
			`).appendTo(this.wrapper)}resize_all_columns(){let t=this.section.wrapper.find(".form-column").length,e=cint(12/t);t==5&&(e=20),this.section.wrapper.find(".form-column").removeClass().addClass("form-column").addClass("col-sm-"+e)}refresh(){this.section.refresh()}};frappe.ui.form.Layout=class{constructor(t){this.views={},this.pages=[],this.tabs=[],this.sections=[],this.page_breaks=[],this.fields_list=[],this.fields_dict={},$.extend(this,t)}make(){!this.parent&&this.body&&(this.parent=this.body),this.wrapper=$('<div class="form-layout">').appendTo(this.parent),this.message=$('<div class="form-message hidden"></div>').appendTo(this.wrapper),this.page=$('<div class="form-page"></div>').appendTo(this.wrapper),this.fields||(this.fields=this.get_doctype_fields()),this.is_tabbed_layout()&&this.setup_tabbed_layout(),this.setup_tab_events(),this.render()}setup_tabbed_layout(){$(`
			<div class="form-tabs-list">
				<ul class="nav form-tabs" id="form-tabs" role="tablist"></ul>
			</div>
		`).appendTo(this.page),this.tabs_list=this.page.find(".form-tabs"),this.tabs_content=$('<div class="form-tab-content tab-content"></div>').appendTo(this.page),this.setup_events()}get_doctype_fields(){let t=[this.get_new_name_field()];return this.doctype_layout?t=t.concat(this.get_fields_from_layout()):t=t.concat(frappe.meta.sort_docfields(frappe.meta.docfield_map[this.doctype])),t}get_new_name_field(){return{parent:this.frm.doctype,fieldtype:"Data",fieldname:"__newname",reqd:1,hidden:1,label:__("Name"),get_status:function(t){return t.frm&&t.frm.is_new()&&t.frm.meta.autoname&&["prompt","name"].includes(t.frm.meta.autoname.toLowerCase())?"Write":"None"}}}get_fields_from_layout(){let t=[];for(let e of this.doctype_layout.fields){let i=copy_dict(frappe.meta.docfield_map[this.doctype][e.fieldname]);i.label=e.label,t.push(i)}return t}show_message(t,e){this.message_color&&this.message.removeClass(this.message_color),this.message_color=e&&["yellow","blue","red","green","orange"].includes(e)?e:"blue",t?(t.substr(0,1)!=="<"&&(t="<div>"+t+"</div>"),this.message.removeClass("hidden").addClass(this.message_color),$(t).appendTo(this.message)):this.message.empty().addClass("hidden")}render(t){let e=t||this.fields;if(this.section=null,this.column=null,this.no_opening_section()&&!this.is_tabbed_layout()&&this.fields.unshift({fieldtype:"Section Break"}),this.is_tabbed_layout()){let i={label:__("Details"),fieldtype:"Tab Break",fieldname:"__details"},n=this.fields.find(a=>a.hidden==!1);if(!((n==null?void 0:n.fieldtype)==="Tab Break"?n:null))this.fields.splice(0,0,i);else{let a=this.fields.find(s=>s.fieldname==="__newname");a&&a.get_status(this)==="Write"&&(this.fields.splice(0,1),this.fields.splice(1,0,a))}}e.forEach(i=>{switch(i.fieldtype){case"Fold":this.make_page(i);break;case"Page Break":this.make_page_break(),this.make_section(i);break;case"Section Break":this.make_section(i);break;case"Column Break":this.make_column(i);break;case"Tab Break":this.make_tab(i);break;default:this.make_field(i)}})}no_opening_section(){return this.fields[0]&&this.fields[0].fieldtype!="Section Break"||!this.fields.length}no_opening_tab(){return this.fields[1]&&this.fields[1].fieldtype!="Tab Break"||!this.fields.length}is_tabbed_layout(){return this.fields.find(t=>t.fieldtype==="Tab Break")}replace_field(t,e,i){if(e.fieldname=t,this.fields_dict[t]&&this.fields_dict[t].df){let n=this.init_field(e,i);this.fields_dict[t].$wrapper.remove(),this.fields_list.splice(this.fields_dict[t],1,n),this.fields_dict[t]=n,this.section.fields_list.splice(this.section.fields_dict[t],1,n),this.section.fields_dict[t]=n,this.refresh_fields([e])}}make_field(t,e,i){!this.section&&this.make_section(),!this.column&&this.make_column();let n=this.init_field(t,i);this.fields_list.push(n),this.fields_dict[t.fieldname]=n,this.section.fields_list.push(n),this.section.fields_dict[t.fieldname]=n,n.section=this.section,this.current_tab&&(n.tab=this.current_tab,this.current_tab.fields_list.push(n),this.current_tab.fields_dict[t.fieldname]=n)}init_field(t,e=!1){let i=frappe.ui.form.make_control({df:t,doctype:this.doctype,parent:this.column.wrapper.get(0),frm:this.frm,render_input:e,doc:this.doc,layout:this});return i.layout=this,i}make_page_break(){this.page=$('<div class="form-page page-break"></div>').appendTo(this.wrapper)}make_page(t){let e=this,i=$(`
			<div class="form-clickable-section text-center">
				<a class="btn-fold h6 text-muted">
					${__("Show more details")}
				</a>
			</div>
		`).appendTo(this.wrapper);this.page=$('<div class="form-page second-page hide"></div>').appendTo(this.wrapper),this.fold_btn=i.find(".btn-fold").on("click",function(){let n=$(this).parent().next();n.hasClass("hide")?($(this).removeClass("btn-fold").html(__("Hide details")),n.removeClass("hide"),frappe.utils.scroll_to($(this),!0,30),e.folded=!1):($(this).addClass("btn-fold").html(__("Show more details")),n.addClass("hide"),e.folded=!0)}),this.section=null,this.folded=!0}unfold(){this.fold_btn.trigger("click")}make_section(t){this.section=new Ii(this.current_tab?this.current_tab.wrapper:this.page,t,this.card_layout,this),t&&(this.fields_dict[t.fieldname]=this.section,this.fields_list.push(this.section)),this.column=null}make_column(t){this.column=new Pi(this.section,t),t&&t.fieldname&&this.fields_list.push(this.column)}make_tab(t){this.section=null;let e=new Ri(this,t,this.frm,this.tabs_list,this.tabs_content);return this.current_tab=e,this.make_section({fieldtype:"Section Break"}),this.tabs.push(e),e}refresh(t){t&&(this.doc=t),this.frm&&this.wrapper.find(".empty-form-alert").remove(),this.attach_doc_and_docfields(!0),this.frm&&this.frm.wrapper&&$(this.frm.wrapper).trigger("refresh-fields"),this.refresh_dependency(),this.refresh_sections(),this.frm&&this.refresh_section_collapse(),document.activeElement&&document.activeElement.tagName=="INPUT"&&this.is_numeric_field_active()&&document.activeElement.select()}is_numeric_field_active(){let e=($(document.activeElement).closest(".frappe-control").data()||{}).fieldtype;return frappe.model.numeric_fieldtypes.includes(e)}refresh_sections(){this.wrapper.find(".form-section:not(.hide-control)").each(function(){let t=$(this).removeClass("empty-section visible-section");t.find(".frappe-control:not(.hide-control)").length?t.addClass("visible-section"):t.addClass("empty-section")}),this.is_tabbed_layout()&&this.refresh_tabs()}refresh_tabs(){for(let e of this.tabs)e.refresh();let t=this.tabs.filter(e=>!e.hidden);t&&t.length==1&&t[0].parent.toggleClass("hide show"),this.set_tab_as_active()}set_tab_as_active(){var e,i;let t=(i=this==null?void 0:(e=this.frm).get_active_tab)==null?void 0:i.call(e);if(t)t.set_active();else if(this.tabs.length){let n=this.tabs.find(o=>!o.is_hidden());n&&n.set_active()}}refresh_fields(t){let e=t.map(i=>{if(i.fieldname)return i.fieldname});this.fields_list.map(i=>{e.includes(i.df.fieldname)&&(i.refresh(),i.df.default&&i.set_input(i.df.default))})}add_fields(t){this.render(t),this.refresh_fields(t)}refresh_section_collapse(){if(!!(this.sections&&this.sections.length))for(let t=0;t<this.sections.length;t++){let e=this.sections[t],i=e.df;if(i&&i.collapsible){let n=!0;i.collapsible_depends_on&&(n=!this.evaluate_depends_on_value(i.collapsible_depends_on)),n&&e.has_missing_mandatory()&&(n=!1),e.collapse(n)}}}attach_doc_and_docfields(t){let e=this;for(let i=0,n=this.fields_list.length;i<n;i++){let o=this.fields_list[i];e.doc&&(o.doc=e.doc,o.doctype=e.doc.doctype,o.docname=e.doc.name,o.df=frappe.meta.get_docfield(e.doc.doctype,o.df.fieldname,e.doc.name)||o.df),t&&o.df&&o.refresh&&o.refresh()}}refresh_section_count(){this.wrapper.find(".section-count-label:visible").each(function(t){$(this).html(t+1)})}setup_events(){let t=0,e=$(".form-tabs-list"),i=this.tabs_content[0];!e.length||($(window).scroll(frappe.utils.throttle(()=>{let n=document.documentElement.scrollTop;n>0&&t<=n?(e.removeClass("form-tabs-sticky-down"),e.addClass("form-tabs-sticky-up")):(e.removeClass("form-tabs-sticky-up"),e.addClass("form-tabs-sticky-down")),t=n},500)),this.tabs_list.off("click").on("click",".nav-link",n=>{n.preventDefault(),n.stopImmediatePropagation(),$(n.currentTarget).tab("show"),i.getBoundingClientRect().top<100&&(i.scrollIntoView(),setTimeout(()=>{$(".page-head").css("top","-15px"),$(".form-tabs-list").removeClass("form-tabs-sticky-down"),$(".form-tabs-list").addClass("form-tabs-sticky-up")},3))}))}setup_tab_events(){this.wrapper.on("keydown",t=>{if(t.which==9){let e=$(t.target),i=e.attr("data-doctype"),n=e.attr("data-fieldname");if(i)return this.handle_tab(i,n,t.shiftKey)}})}handle_tab(t,e,i){let n=null,o=null,a=this.fields_list,s=!1;if(t!=this.doctype){if(n=this.get_open_grid_row(),!n||!n.layout)return;a=n.layout.fields_list}for(let l=0,d=a.length;l<d;l++){if(a[l].df.fieldname==e){if(i){o?this.set_focus(o):$(this.primary_button).focus();break}if(l<d-1&&(s=this.focus_on_next_field(l,a)),s)break}this.is_visible(a[l])&&(o=a[l])}return s||(n?n.doc.idx==n.grid.grid_rows.length?n.toggle_view(!1,function(){n.grid.frm.layout.handle_tab(n.grid.df.parent,n.grid.df.fieldname)}):n.grid.grid_rows[n.doc.idx].toggle_view(!0):i||$(this.primary_button).focus()),!1}focus_on_next_field(t,e){for(let i=t+1,n=e.length;i<n;i++){let o=e[i];if(this.is_visible(o)){if(o.df.fieldtype==="Table")return o.grid.grid_rows&&o.grid.grid_rows.length||o.grid.add_new_row(),o.grid.grid_rows[0].show_form(),!0;if(!in_list(frappe.model.no_value_type,o.df.fieldtype))return this.set_focus(o),!0}}}is_visible(t){return t.disp_status==="Write"&&t.df&&"hidden"in t.df&&!t.df.hidden}set_focus(t){t.tab&&t.tab.set_active(),t.df.fieldtype=="Table"?t.grid.grid_rows.length?t.grid.grid_rows[0].toggle_view(!0):t.grid.add_new_row(1):t.editor?t.editor.set_focus():t.$input&&t.$input.focus()}get_open_grid_row(){return $(".grid-row-open").data("grid_row")}refresh_dependency(){let t=!1,e=this.fields_list.concat(this.tabs);for(let i in e){let n=e[i];if(n.df.depends_on||n.df.mandatory_depends_on||n.df.read_only_depends_on){t=!0;break}}if(!!t){for(let i=e.length-1;i>=0;i--){let n=e[i];n.guardian_has_value=!0,n.df.depends_on&&(n.guardian_has_value=this.evaluate_depends_on_value(n.df.depends_on),n.guardian_has_value?n.df.hidden_due_to_dependency&&(n.df.hidden_due_to_dependency=!1,n.refresh()):n.df.hidden_due_to_dependency||(n.df.hidden_due_to_dependency=!0,n.refresh())),n.df.mandatory_depends_on&&this.set_dependant_property(n.df.mandatory_depends_on,n.df.fieldname,"reqd"),n.df.read_only_depends_on&&this.set_dependant_property(n.df.read_only_depends_on,n.df.fieldname,"read_only")}this.refresh_section_count()}}set_dependant_property(t,e,i){let o=this.evaluate_depends_on_value(t)?1:0,a;this.frm?a=this.frm:(this.is_dialog||this.doctype==="Web Form")&&(a=this),a&&(this.doc&&this.doc.parent&&this.doc.parentfield?(a.setting_dependency=!0,a.set_df_property(this.doc.parentfield,i,o,this.doc.parent,e,this.doc.name),a.setting_dependency=!1,this.fields_dict[e]&&this.fields_dict[e].refresh()):a.set_df_property(e,i,o))}evaluate_depends_on_value(t){let e=null,i=this.doc;if(!i&&this.get_values&&(i=this.get_values(!0)),!i)return;let n=this.frm?this.frm.doc:this.doc||null;if(typeof t=="boolean")e=t;else if(typeof t=="function")e=t(i);else if(t.substr(0,5)=="eval:")try{e=frappe.utils.eval(t.substr(5),{doc:i,parent:n}),n&&n.istable&&t.includes("is_submittable")&&(e=!0)}catch(a){frappe.throw(__('Invalid "depends_on" expression'))}else if(t.substr(0,3)=="fn:"&&this.frm)e=this.frm.script_manager.trigger(t.substr(3),this.doctype,this.docname);else{var o=i[t];$.isArray(o)?e=!!o.length:e=!!o}return e}};frappe.provide("frappe.ui");frappe.ui.FieldGroup=class extends frappe.ui.form.Layout{constructor(t){super(t);this.dirty=!1,$.each(this.fields||[],function(e,i){!i.fieldname&&i.label&&(i.fieldname=i.label.replace(/ /g,"_").toLowerCase())}),this.values&&this.set_values(this.values)}make(){var t=this;this.fields&&(super.make(),this.refresh(),$.each(this.fields_list,function(e,i){if(i.df.default){let n=i.df.default;n=="Today"&&i.df.fieldtype=="Date"&&(n=frappe.datetime.get_today()),i.set_input(n),t.refresh_dependency()}}),this.no_submit_on_enter||this.catch_enter_as_submit(),$(this.wrapper).find("input, select").on("change awesomplete-selectcomplete",()=>{this.dirty=!0,frappe.run_serially([()=>frappe.timeout(.1),()=>t.refresh_dependency()])}))}focus_on_first_input(){this.no_focus||$.each(this.fields_list,function(t,e){if(!in_list(["Date","Datetime","Time","Check"],e.df.fieldtype)&&e.set_focus)return e.set_focus(),!1})}catch_enter_as_submit(){var t=this;$(this.body).find('input[type="text"], input[type="password"], select').keypress(function(e){e.which==13&&t.has_primary_action&&(e.preventDefault(),t.get_primary_btn().trigger("click"))})}get_input(t){var e=this.fields_dict[t];return $(e.txt?e.txt:e.input)}get_field(t){return this.fields_dict[t]}get_values(t){var e={},i=[];for(var n in this.fields_dict){var o=this.fields_dict[n];if(o.get_value){var a=o.get_value();o.df.reqd&&is_null(typeof a=="string"?strip_html(a):a)&&i.push(__(o.df.label)),o.df.reqd&&o.df.fieldtype==="Text Editor"&&is_null(strip_html(cstr(a)))&&i.push(__(o.df.label)),is_null(a)||(e[o.df.fieldname]=a)}this.is_dialog&&o.df.reqd&&!o.value&&o.refresh_input()}return i.length&&!t?(frappe.msgprint({title:__("Missing Values Required"),message:__("Following fields have missing values:")+"<br><br><ul><li>"+i.join("<li>")+"</ul>",indicator:"orange"}),null):e}get_value(t){var e=this.fields_dict[t];return e&&(e.get_value?e.get_value():null)}set_value(t,e){return new Promise(i=>{var n=this.fields_dict[t];n?n.set_value(e).then(()=>{var o;(o=n.set_input)==null||o.call(n,e),this.refresh_dependency(),i()}):i()})}has_field(t){return!!this.fields_dict[t]}set_input(t,e){return this.set_value(t,e)}set_values(t){let e=[];for(var i in t)this.fields_dict[i]&&e.push(this.set_value(i,t[i]));return Promise.all(e)}clear(){for(var t in this.fields_dict){var e=this.fields_dict[t];e&&e.set_input&&e.set_input(e.df.default||"")}}set_df_property(t,e,i){if(!t)return;let n=this.get_field(t);n.df[e]=i,n.refresh()}};frappe.provide("frappe.ui");window.cur_dialog=null;frappe.ui.open_dialogs=[];frappe.ui.Dialog=class extends frappe.ui.FieldGroup{constructor(t){super();this.display=!1,this.is_dialog=!0,$.extend(this,{animate:!0,size:null},t),this.make()}make(){this.$wrapper=frappe.get_modal("",""),this.static&&(this.$wrapper.modal({backdrop:"static",keyboard:!1}),this.get_close_btn().hide()),this.wrapper=this.$wrapper.find(".modal-dialog").get(0),this.size=="small"?$(this.wrapper).addClass("modal-sm"):this.size=="large"?$(this.wrapper).addClass("modal-lg"):this.size=="extra-large"&&$(this.wrapper).addClass("modal-xl"),this.make_head(),this.modal_body=this.$wrapper.find(".modal-body"),this.$body=$("<div></div>").appendTo(this.modal_body),this.body=this.$body.get(0),this.$message=$('<div class="hide modal-message"></div>').appendTo(this.modal_body),this.header=this.$wrapper.find(".modal-header"),this.footer=this.$wrapper.find(".modal-footer"),this.standard_actions=this.footer.find(".standard-actions"),this.custom_actions=this.footer.find(".custom-actions"),this.set_indicator(),super.make(),this.refresh_section_collapse(),this.action=this.action||{primary:{},secondary:{}},(this.primary_action||this.action.primary&&this.action.primary.onsubmit)&&this.set_primary_action(this.primary_action_label||this.action.primary.label||__("Submit",null,"Primary action in dialog"),this.primary_action||this.action.primary.onsubmit),this.secondary_action&&this.set_secondary_action(this.secondary_action),(this.secondary_action_label||this.action.secondary&&this.action.secondary.label)&&this.set_secondary_action_label(this.secondary_action_label||this.action.secondary.label),this.minimizable&&(this.header.find(".title-section").click(()=>this.is_minimized&&this.toggle_minimize()),this.get_minimize_btn().removeClass("hide").on("click",()=>this.toggle_minimize()));var t=this;this.$wrapper.on("hide.bs.modal",function(){t.display=!1,t.is_minimized=!1,t.hide_scrollbar(!1),frappe.ui.open_dialogs[frappe.ui.open_dialogs.length-1]===t&&(frappe.ui.open_dialogs.pop(),frappe.ui.open_dialogs.length?window.cur_dialog=frappe.ui.open_dialogs[frappe.ui.open_dialogs.length-1]:window.cur_dialog=null),t.onhide&&t.onhide(),t.on_hide&&t.on_hide()}).on("shown.bs.modal",function(){t.display=!0,window.cur_dialog=t,frappe.ui.open_dialogs.push(t),t.focus_on_first_input(),t.hide_scrollbar(!0),t.on_page_show&&t.on_page_show(),$(document).trigger("frappe.ui.Dialog:shown"),$(document).off("focusin.modal")}).on("scroll",function(){var e=$("input:focus");e.length&&["Date","Datetime","Time"].includes(e.attr("data-fieldtype"))&&e.blur()})}get_primary_btn(){return this.standard_actions.find(".btn-primary")}get_minimize_btn(){return this.$wrapper.find(".modal-header .btn-modal-minimize")}set_message(t){this.$message.removeClass("hide"),this.$body.addClass("hide"),this.$message.text(t)}clear_message(){this.$message.addClass("hide"),this.$body.removeClass("hide")}clear(){super.clear(),this.clear_message()}set_primary_action(t,e){this.footer.removeClass("hide"),this.has_primary_action=!0;var i=this;return this.get_primary_btn().removeClass("hide").html(t).off("click").on("click",function(){i.primary_action_fulfilled=!0;var n=i.get_values();!n||e&&e.apply(i,[n])})}set_secondary_action(t){return this.footer.removeClass("hide"),this.get_secondary_btn().removeClass("hide").off("click").on("click",t)}set_secondary_action_label(t){this.get_secondary_btn().removeClass("hide").html(t)}disable_primary_action(){this.get_primary_btn().addClass("disabled")}enable_primary_action(){this.get_primary_btn().removeClass("disabled")}make_head(){this.set_title(this.title)}set_title(t){this.$wrapper.find(".modal-title").html(t)}set_indicator(){this.indicator&&this.header.find(".indicator").removeClass().addClass("indicator "+this.indicator)}show(){return this.animate?this.$wrapper.addClass("fade"):this.$wrapper.removeClass("fade"),this.$wrapper.modal("show"),this.$wrapper.removeClass("modal-minimize"),this.minimizable&&this.is_minimized&&($(".modal-backdrop").toggle(),this.is_minimized=!1),this.clear_message(),this.primary_action_fulfilled=!1,this.is_visible=!0,this}hide(){this.$wrapper.modal("hide"),this.is_visible=!1}get_close_btn(){return this.$wrapper.find(".btn-modal-close")}get_secondary_btn(){return this.standard_actions.find(".btn-modal-secondary")}no_cancel(){this.get_close_btn().toggle(!1)}cancel(){this.get_close_btn().trigger("click")}toggle_minimize(){$(".modal-backdrop").toggle();let t=this.$wrapper.closest(".modal").toggleClass("modal-minimize");t.attr("tabindex")?t.removeAttr("tabindex"):t.attr("tabindex",-1),this.is_minimized=!this.is_minimized;let e=this.is_minimized?"expand":"collapse";this.get_minimize_btn().html(frappe.utils.icon(e)),this.on_minimize_toggle&&this.on_minimize_toggle(this.is_minimized),this.header.find(".modal-title").toggleClass("cursor-pointer"),this.hide_scrollbar(!this.is_minimized)}hide_scrollbar(t){$("body").css("overflow",t?"hidden":"auto")}add_custom_action(t,e,i=null){this.footer.removeClass("hide");let n=$(`
			<button class="btn btn-secondary btn-sm ${i||""}">
				${t}
			</button>
		`);this.custom_actions.append(n),e&&n.click(e)}};frappe.ui.hide_open_dialog=()=>{window.cur_dialog&&(cur_dialog.minimizable?cur_dialog.is_minimized||cur_dialog.toggle_minimize():cur_dialog.hide())};frappe.provide("frappe.messages");frappe.messages.waiting=function(r,t){return $(frappe.messages.get_waiting_message(t)).appendTo(r)};frappe.messages.get_waiting_message=function(r){return repl('<div class="msg-box" style="width: 63%; margin: 30px auto;">		<p class="text-center">%(msg)s</p></div>',{msg:r})};frappe.throw=function(r){throw typeof r=="string"&&(r={message:r,title:__("Error")}),r.indicator||(r.indicator="red"),frappe.msgprint(r),new Error(r.message)};frappe.confirm=function(r,t,e){var i=new frappe.ui.Dialog({title:__("Confirm",null,"Title of confirmation dialog"),primary_action_label:__("Yes",null,"Approve confirmation dialog"),primary_action:()=>{t&&t(),i.hide()},secondary_action_label:__("No",null,"Dismiss confirmation dialog"),secondary_action:()=>i.hide()});return i.$body.append(`<p class="frappe-confirm-message">${r}</p>`),i.show(),i.confirm_dialog=!0,e&&(i.onhide=()=>{i.primary_action_fulfilled||e()}),i};frappe.warn=function(r,t,e,i,n){let o=new frappe.ui.Dialog({title:r,indicator:"red",primary_action_label:i,primary_action:()=>{e&&e(),o.hide()},secondary_action_label:__("Cancel",null,"Secondary button in warning dialog"),secondary_action:()=>o.hide(),minimizable:n});return o.$body.append(`<div class="frappe-confirm-message">${t}</div>`),o.standard_actions.find(".btn-primary").removeClass("btn-primary").addClass("btn-danger"),o.show(),o};frappe.prompt=function(r,t,e,i){typeof r=="string"&&(r=[{label:r,fieldname:"value",fieldtype:"Data",reqd:1}]),$.isArray(r)||(r=[r]);var n=new frappe.ui.Dialog({fields:r,title:e||__("Enter Value",null,"Title of prompt dialog")});return n.set_primary_action(i||__("Submit",null,"Primary action of prompt dialog"),function(){var o=n.get_values();!o||(n.hide(),t(o))}),n.show(),n};frappe.msgprint=function(r,t,e){if(!!r){if($.isPlainObject(r))var i=r;else if(typeof r=="string"&&r.substr(0,1)==="{")var i=JSON.parse(r);else var i={message:r,title:t};if(i.indicator||(i.indicator="blue"),i.as_list){let o=i.message.map(a=>`<li>${a}</li>`).join("");i.message=`<ul style="padding-left: 20px">${o}</ul>`}if(i.as_table){let o=i.message.map(a=>`<tr>${a.map(l=>`<td>${l}</td>`).join("")}</tr>`).join("");i.message=`<table class="table table-bordered" style="margin: 0;">${o}</table>`}if(i.message instanceof Array){let o=i.message,a=o.map(s=>JSON.parse(s)).filter(s=>s.raise_exception);a.length&&(o=a),o.forEach(function(s){frappe.msgprint(s)});return}if(i.alert||i.toast){frappe.show_alert(i);return}if(frappe.msg_dialog||(frappe.msg_dialog=new frappe.ui.Dialog({title:__("Message"),onhide:function(){frappe.msg_dialog.custom_onhide&&frappe.msg_dialog.custom_onhide(),frappe.msg_dialog.msg_area.empty()},minimizable:i.is_minimizable||e}),frappe.msg_dialog.msg_area=$('<div class="msgprint">').appendTo(frappe.msg_dialog.body),frappe.msg_dialog.clear=function(){frappe.msg_dialog.msg_area.empty()},frappe.msg_dialog.indicator=frappe.msg_dialog.header.find(".indicator")),i.primary_action){if(i.primary_action.server_action&&typeof i.primary_action.server_action=="string"&&(i.primary_action.action=()=>{frappe.call({method:i.primary_action.server_action,args:{args:i.primary_action.args},callback(){i.primary_action.hide_on_success&&frappe.hide_msgprint()}})}),i.primary_action.client_action&&typeof i.primary_action.client_action=="string"){let o=i.primary_action.client_action.split("."),a=window;for(let s of o)a=a[s];i.primary_action.action=()=>{typeof a=="function"&&a(i.primary_action.args)}}frappe.msg_dialog.set_primary_action(__(i.primary_action.label||i.primary_action_label||"Done"),i.primary_action.action)}else frappe.msg_dialog.has_primary_action&&(frappe.msg_dialog.get_primary_btn().addClass("hide"),frappe.msg_dialog.has_primary_action=!1);i.secondary_action&&(frappe.msg_dialog.set_secondary_action(i.secondary_action.action),frappe.msg_dialog.set_secondary_action_label(__(i.secondary_action.label||"Close"))),i.message==null&&(i.message=""),i.message.search(/<br>|<p>|<li>/)==-1&&(r=frappe.utils.replace_newlines(i.message));var n=!1;return i.clear?frappe.msg_dialog.msg_area.empty():n=frappe.msg_dialog.msg_area.html(),(i.title||!n)&&frappe.msg_dialog.set_title(i.title||__("Message",null,"Default title of the message dialog")),i.indicator?frappe.msg_dialog.indicator.removeClass().addClass("indicator "+i.indicator):frappe.msg_dialog.indicator.removeClass().addClass("hidden"),i.wide?frappe.msg_dialog.wrapper.classList.contains("msgprint-dialog")&&frappe.msg_dialog.wrapper.classList.remove("msgprint-dialog"):frappe.msg_dialog.wrapper.classList.add("msgprint-dialog"),n&&frappe.msg_dialog.msg_area.append("<hr>"),frappe.msg_dialog.msg_area.append(i.message),frappe.msg_dialog.$wrapper.css("z-index",2e3),frappe.msg_dialog.show(),frappe.msg_dialog}};window.msgprint=frappe.msgprint;frappe.hide_msgprint=function(r){frappe.msg_dialog&&frappe.msg_dialog.msg_area&&frappe.msg_dialog.msg_area.empty(),frappe.msg_dialog&&frappe.msg_dialog.$wrapper.is(":visible")&&(r&&frappe.msg_dialog.$wrapper.removeClass("fade"),frappe.msg_dialog.hide(),r&&frappe.msg_dialog.$wrapper.addClass("fade"))};frappe.update_msgprint=function(r){!frappe.msg_dialog||frappe.msg_dialog&&!frappe.msg_dialog.$wrapper.is(":visible")?frappe.msgprint(r):frappe.msg_dialog.msg_area.html(r)};frappe.verify_password=function(r){frappe.prompt({fieldname:"password",label:__("Enter your password"),fieldtype:"Password",reqd:1},function(t){frappe.call({method:"frappe.core.doctype.user.user.verify_password",args:{password:t.password},callback:function(e){e.exc||r()}})},__("Verify Password"),__("Verify"))};frappe.show_progress=(r,t,e=100,i,n=!1)=>{let o;return frappe.cur_progress&&frappe.cur_progress.title===r&&frappe.cur_progress.is_visible?o=frappe.cur_progress:(o=new frappe.ui.Dialog({title:r}),o.progress=$(`<div>
			<div class="progress">
				<div class="progress-bar"></div>
			</div>
			<p class="description text-muted small"></p>
		</div`).appendTo(o.body),o.progress_bar=o.progress.css({"margin-top":"10px"}).find(".progress-bar"),o.$wrapper.removeClass("fade"),o.show(),frappe.cur_progress=o),i&&o.progress.find(".description").text(i),o.percent=cint(flt(t)*100/e),o.progress_bar.css({width:o.percent+"%"}),n&&o.percent===100&&setTimeout(frappe.hide_progress,500),o};frappe.hide_progress=function(){frappe.cur_progress&&(frappe.cur_progress.hide(),frappe.cur_progress=null)};frappe.show_alert=frappe.toast=function(r,t=7,e={}){let i={orange:"solid-warning",yellow:"solid-warning",blue:"solid-info",green:"solid-success",red:"solid-error"};typeof r=="string"&&(r={message:r}),$("#dialog-container").length||$('<div id="dialog-container"><div id="alert-container"></div></div>').appendTo("body");let n;r.indicator?n=i[r.indicator.toLowerCase()]||"solid-"+r.indicator:n="solid-info";let o=r.indicator||"blue",a=$(`
		<div class="alert desk-alert ${o}" role="alert">
			<div class="alert-message-container">
				<div class="alert-title-container">
					<div>${frappe.utils.icon(n,"lg")}</div>
					<div class="alert-message">${r.message}</div>
				</div>
				<div class="alert-subtitle">${r.subtitle||""}</div>
			</div>
			<div class="alert-body" style="display: none"></div>
			<a class="close">${frappe.utils.icon("close-alt")}</a>
		</div>
	`);return a.hide().appendTo("#alert-container").show(),r.body&&a.find(".alert-body").show().html(r.body),a.find(".close, button").click(function(){return a.addClass("out"),setTimeout(()=>a.remove(),800),!1}),Object.keys(e).map(s=>{a.find(`[data-action=${s}]`).on("click",e[s])}),t>2&&(t=t-.8),setTimeout(()=>(a.addClass("out"),setTimeout(()=>a.remove(),800),!1),t*1e3),a};Object.defineProperty(window,"show_alert",{get:function(){return console.warn("Please use `frappe.show_alert` instead of `show_alert`. It will be deprecated soon."),frappe.show_alert}});frappe.provide("frappe.ui.keys");var Ni=new WeakMap,xa=[];frappe.ui.keys.shortcut_groups=Ni;frappe.ui.keys.get_shortcut_group=r=>(Ni.has(r)||Ni.set(r,new frappe.ui.keys.AltShortcutGroup),Ni.get(r));var ka=!1,Dt=null,Gn=$(document.body);frappe.ui.keys.bind_shortcut_group_event=()=>{if(ka)return;ka=!0;function r(){Dt?(Dt.addClass("alt-pressed"),Gn.removeClass("alt-pressed")):(Gn.addClass("alt-pressed"),Dt&&Dt.removeClass("alt-pressed"))}function t(){Dt&&Dt.removeClass("alt-pressed"),Gn.removeClass("alt-pressed")}$(document).on("keydown",e=>{let i=(frappe.ui.keys.key_map[e.which]||"").toLowerCase();if(i==="alt"&&r(),!(e.shiftKey||e.ctrlKey||e.metaKey)&&i&&e.altKey){let n=_p(i);n&&(e.preventDefault(),n.$target[0].click()),r()}}),$(document).on("keyup",e=>{e.key==="Alt"&&t()}),$(document).on("mousemove",()=>{t()})};function _p(r){let t=xa.filter(i=>r in i.shortcuts_dict).map(i=>i.shortcuts_dict[r]).filter(i=>i.$target.is(":visible")),e=null;return Dt&&Dt.is(".open")&&(e=t.find(i=>$.contains(Dt[0],i.$target[0]))),e||(e=t.find(i=>$.contains(window.cur_page.page.page.wrapper[0],i.$target[0])),e)}frappe.ui.keys.AltShortcutGroup=class{constructor(){this.shortcuts_dict={},Dt=null,this.bind_events(),frappe.ui.keys.bind_shortcut_group_event(),xa.push(this)}bind_events(){$(document).on("show.bs.dropdown",t=>{Dt&&Dt.removeClass("alt-pressed");let e=$(t.target);e.is(".dropdown, .btn-group")&&(Dt=e)}),$(document).on("hide.bs.dropdown",()=>{Dt&&Dt.removeClass("alt-pressed"),Dt=null})}add(t,e){e||(e=t);let i=e.text().trim(),o=i.split("").find(s=>{s=s.toLowerCase();let l=s>="a"&&s<="z";return!this.is_taken(s)&&l});if(!o){e.attr("data-label",encodeURIComponent(i));return}for(let s in this.shortcuts_dict){let l=this.shortcuts_dict[s];if(l.text===i){l.$target=t,l.$text_el=e,this.underline_text(l);return}}let a={$target:t,$text_el:e,letter:o,text:i};this.shortcuts_dict[o.toLowerCase()]=a,this.underline_text(a)}underline_text(t){t.$text_el.attr("data-label",encodeURIComponent(t.text));let e=!1,i=t.text.split("").map(o=>(o===t.letter&&!e&&(o=`<span class="alt-underline">${o}</span>`,e=!0),o)).join("");i=t.$text_el.html().replace(t.text.trim(),i.trim()),t.$text_el.html(i)}is_taken(t){let e=frappe.ui.keys.standard_shortcuts.filter(i=>!i.page).some(i=>i.shortcut===`alt+${t}`);return t in this.shortcuts_dict||e}};frappe.provide("frappe.ui.keys.handlers");frappe.ui.keys.setup=function(){$(window).on("keydown",function(r){var t=frappe.ui.keys.get_key(r);if(frappe.ui.keys.handlers[t]){for(var e=null,i=0,n=frappe.ui.keys.handlers[t].length;i<n;i++){var o=frappe.ui.keys.handlers[t][i],a=o.apply(this,[r]);a===!1&&(e=a)}return e}})};var Er=[];frappe.ui.keys.standard_shortcuts=Er;frappe.ui.keys.add_shortcut=({shortcut:r,action:t,description:e,page:i,target:n,condition:o,ignore_inputs:a=!1}={})=>{if(n instanceof jQuery){let u=n;t=()=>{u[0].click()}}o||(o=()=>!0);let s=u=>{if(!($(document.activeElement).is("input, select, textarea, [contenteditable=true]")&&!a)&&!!o()&&t&&(!i||i.wrapper.is(":visible"))){let m=t(u);(m||m===void 0)&&u.preventDefault()}};s.page=i,frappe.ui.keys.off(r,i),frappe.ui.keys.on(r,s);let l=Er.findIndex(u=>u.shortcut===r),d={shortcut:r,action:t,description:e,page:i,condition:o};l===-1?Er.push(d):Er[l]=d};frappe.ui.keys.show_keyboard_shortcut_dialog=()=>{if(frappe.ui.keys.is_dialog_shown)return;let r=Er.filter(l=>!l.page),t=Er.filter(l=>l.page&&l.page===window.cur_page.page.page),e=Er.filter(l=>l.page&&l.page===window.cur_page.page.frm);function i(l,d){if(!l.length)return"";let u=l.filter(h=>h.condition?h.condition():!0).filter(h=>!!h.description).map(h=>{let p=h.shortcut.split("+").map(frappe.utils.to_title_case).join("+");return frappe.utils.is_mac()&&(p=p.replace("Ctrl","\u2318")),`<tr>
					<td width="40%"><kbd>${p}</kbd></td>
					<td width="60%">${h.description||""}</td>
				</tr>`}).join("");return u?(u=`<h5 style="margin: 0;">${d}</h5>
			<table style="margin-top: 10px;" class="table table-bordered">
				${u}
			</table>`,u):""}let n=i(r,__("Global Shortcuts")),o=i(t,__("Page Shortcuts")),a=i(e,__("Grid Shortcuts")),s=new frappe.ui.Dialog({title:__("Keyboard Shortcuts"),on_hide(){frappe.ui.keys.is_dialog_shown=!1}});s.$body.append(n),s.$body.append(o),s.$body.append(a),s.$body.append(`
		<div class="text-muted">
			${__("Press Alt Key to trigger additional shortcuts in Menu and Sidebar")}
		</div>
	`),s.show(),frappe.ui.keys.is_dialog_shown=!0};frappe.ui.keys.get_key=function(r){var t=r.keyCode||r.which,e=frappe.ui.keys.key_map[t]||String.fromCharCode(t);return(r.ctrlKey||r.metaKey)&&(e="ctrl+"+e),r.shiftKey&&(e="shift+"+e),r.altKey&&(e="alt+"+e),r.altKey&&r.ctrlKey,e.toLowerCase()};frappe.ui.keys.on=function(r,t){frappe.ui.keys.handlers[r]||(frappe.ui.keys.handlers[r]=[]),frappe.ui.keys.handlers[r].push(t)};frappe.ui.keys.off=function(r,t){let e=frappe.ui.keys.handlers[r];!e||e.length===0||(frappe.ui.keys.handlers[r]=e.filter(i=>t?i.page!==t:!1))};frappe.ui.keys.add_shortcut({shortcut:"ctrl+s",action:function(r){return frappe.app.trigger_primary_action(),r.preventDefault(),!1},description:__("Trigger Primary Action"),ignore_inputs:!0});frappe.ui.keys.add_shortcut({shortcut:"ctrl+g",action:function(r){return $("#navbar-search").focus(),r.preventDefault(),!1},description:__("Open Awesomebar")});frappe.ui.keys.add_shortcut({shortcut:"ctrl+h",action:function(r){r.preventDefault(),$(".navbar-home img").click()},description:__("Navigate Home")});frappe.ui.keys.add_shortcut({shortcut:"alt+s",action:function(r){r.preventDefault(),$(".dropdown-navbar-user a").eq(0).click()},description:__("Open Settings")});frappe.ui.keys.add_shortcut({shortcut:"shift+/",action:function(){frappe.ui.keys.show_keyboard_shortcut_dialog()},description:__("Show Keyboard Shortcuts")});frappe.ui.keys.add_shortcut({shortcut:"alt+h",action:function(r){r.preventDefault(),$(".dropdown-help a").eq(0).click()},description:__("Open Help")});frappe.ui.keys.on("escape",function(r){Ca()});frappe.ui.keys.on("esc",function(r){Ca()});frappe.ui.keys.on("enter",function(r){window.cur_dialog&&cur_dialog.confirm_dialog&&cur_dialog.get_primary_btn().trigger("click")});frappe.ui.keys.on("ctrl+down",function(r){var t=frappe.ui.form.get_open_grid_form();t&&t.toggle_view(!1,function(){t.open_next()})});frappe.ui.keys.on("ctrl+up",function(r){var t=frappe.ui.form.get_open_grid_form();t&&t.toggle_view(!1,function(){t.open_prev()})});frappe.ui.keys.add_shortcut({shortcut:"shift+ctrl+r",action:function(){frappe.ui.toolbar.clear_cache()},description:__("Clear Cache and Reload")});frappe.ui.keys.key_map={8:"backspace",9:"tab",13:"enter",16:"shift",17:"ctrl",91:"meta",18:"alt",27:"escape",37:"left",39:"right",38:"up",40:"down",32:"space",112:"f1",113:"f2",114:"f3",115:"f4",116:"f5",191:"/",188:"<",190:">"};"abcdefghijklmnopqrstuvwxyz".split("").forEach((r,t)=>{frappe.ui.keys.key_map[65+t]=r});frappe.ui.keyCode={ESCAPE:27,LEFT:37,RIGHT:39,UP:38,DOWN:40,ENTER:13,TAB:9,SPACE:32,BACKSPACE:8};function Ca(){var r;gp(),(r=document.activeElement)==null||r.blur()}function gp(){var r=$(".grid-row-open");if(r.length){var t=r.data("grid_row");return t.toggle_view(!1),!1}if(cur_dialog&&!cur_dialog.no_cancel_flag&&!cur_dialog.static)return cur_dialog.cancel(),!1}frappe.provide("frappe.ui");frappe.ui.color={get:function(r,t){return r&&t?this.get_color_shade(r,t):r?this.get_color_shade(r,"default"):frappe.ui.color_map},get_color:function(r){let t=Object.keys(frappe.ui.color_map);if(t.includes(r))return frappe.ui.color_map[r];console.warn(`'color_name' can be one of ${t} and not ${r}`)},get_color_map(){let r=["red","green","blue","dark-green","yellow","gray","purple","pink","orange"],t=["100","300","500","700"],e=getComputedStyle(document.body),i={};return r.forEach(n=>{i[n]=t.map(o=>e.getPropertyValue(`--${n}-${o}`).trim())}),i},get_color_shade:function(r,t){let e={default:2,light:1,"extra-light":0,dark:3};if(Object.keys(e).includes(t)){let i=this.get_color(r);return i?i[e[t]]:r}else console.warn(`'shade' can be one of ${Object.keys(e)} and not ${t}`)},all:function(){return Object.values(frappe.ui.color_map).reduce((r,t)=>r.concat(t),[])},names:function(){return Object.keys(frappe.ui.color_map)},is_standard:function(r){return r?r.startsWith("#")?this.all().includes(r):this.names().includes(r):!1},get_color_name:function(r){for(let t in frappe.ui.color_map)if(frappe.ui.color_map[t].includes(r))return t},get_contrast_color:function(r){if(!this.validate_hex(r))return;if(!this.is_standard(r))return this.brightness(r)<128?this.lighten(r,.5):this.lighten(r,-.5);let t=this.get_color_name(r);return this.get_color(t).indexOf(r)<=1?this.get(t,"dark"):this.get(t,"extra-light")},validate_hex:function(r){return/(^#[0-9A-F]{6}$)|(^#[0-9A-F]{3}$)/i.test(r)},lighten(r,t){var e=parseInt(r.slice(1),16),i=t<0?0:255,n=t<0?t*-1:t,o=e>>16,a=e>>8&255,s=e&255;return"#"+(16777216+(Math.round((i-o)*n)+o)*65536+(Math.round((i-a)*n)+a)*256+(Math.round((i-s)*n)+s)).toString(16).slice(1)},hex_to_rgb(r){r.startsWith("#")&&(r=r.substring(1));let t=parseInt(r.substring(0,2),16),e=parseInt(r.substring(2,4),16),i=parseInt(r.substring(4,6),16);return{r:t,g:e,b:i}},brightness(r){let t=this.hex_to_rgb(r);return(t.r*299+t.g*587+t.b*114)/1e3}};frappe.ui.color_map=frappe.ui.color.get_color_map();frappe.provide("frappe.ui");frappe.ui.Sidebar=class{constructor({wrapper:t,css_class:e}){this.wrapper=t,this.css_class=e,this.items={},this.make_dom()}make_dom(){this.wrapper.html(`
			<div class="${this.css_class} overlay-sidebar hidden-xs hidden-sm">
			</div>
		`),this.$sidebar=this.wrapper.find("."+this.css_class)}add_item(t,e,i=!1){let n,o;if(!e&&this.wrapper.find(".sidebar-menu").length===0?n=this.get_section():n=this.get_section(e),t instanceof jQuery)o=$("<li>"),t.appendTo(o);else{let s=`<li class=${i?"h6":""}>
				<a ${t.href?`href="${t.href}"`:""}>${t.label}</a>
			</li>`;o=$(s).click(()=>t.on_click&&t.on_click())}n.append(o),t.name&&(this.items[t.name]=o)}remove_item(t){this.items[t]&&this.items[t].remove()}get_section(t=""){let e=$(this.wrapper.find(`[data-section-heading="${t}"]`));if(e.length)return e;let i=t?`<li class="h6">${t}</li>`:"";return e=$(`
			<ul class="list-unstyled sidebar-menu" data-section-heading="${t||"default"}">
				${i}
			</ul>
		`),this.$sidebar.append(e),e}};frappe.ui.LinkPreview=class{constructor(){this.popovers_list=[],this.LINK_CLASSES='a[data-doctype], input[data-fieldtype="Link"], .popover',this.popover_timeout=null,this.setup_events()}setup_events(){$(document.body).on("mouseover",this.LINK_CLASSES,r=>{this.link_hovered=!0,this.element=$(r.currentTarget),this.is_link=this.element.get(0).tagName.toLowerCase()==="a",this.element.parents().find(".popover").length||(this.identify_doc(),this.popover=this.element.data("bs.popover"),this.name&&this.doctype&&this.setup_popover_control(r))}),this.handle_popover_hide()}identify_doc(){this.is_link?(this.doctype=this.element.attr("data-doctype"),this.name=this.element.attr("data-name"),this.href=this.element.attr("href")):(this.href=this.element.parents(".control-input-wrapper").find(".control-value a").attr("href"),this.doctype=this.element.attr("data-target"),this.name=this.element.val())}setup_popover_control(r){!(frappe.boot.link_preview_doctypes||[]).includes(this.doctype)||(this.element.on("change",()=>{this.new_popover=!0}),!this.popover||this.new_popover?this.data_timeout=setTimeout(()=>{this.create_popover(r)},100):this.popover_timeout=setTimeout(()=>{this.element.is(":focus")||this.show_popover(r)},1e3))}create_popover(r){this.new_popover=!1,!this.element.is(":focus")&&this.get_preview_data().then(t=>{t&&(this.popover_timeout&&clearTimeout(this.popover_timeout),this.popover_timeout=setTimeout(()=>{if(this.popover&&this.popover.options){let e=this.get_popover_html(t);this.popover.options.content=e}else this.init_preview_popover(t);this.show_popover(r)},1e3))})}show_popover(r){if(this.default_timeout=setTimeout(()=>{this.clear_all_popovers()},1e4),this.is_link)this.element.popover("show");else{var t=r.pageX;this.element.popover("show");var e=$(".popover").width();$(".control-field-popover").css("left",t-e/2+"px")}}handle_popover_hide(){$(document).on("mouseout",this.LINK_CLASSES,()=>{$(".popover:hover").length||(this.link_hovered=!1),this.link_hovered||(this.data_timeout&&clearTimeout(this.data_timeout),this.popover_timeout&&clearTimeout(this.popover_timeout),this.default_timeout&&clearTimeout(this.default_timeout),this.clear_all_popovers())}),frappe.router.on("change",()=>{this.clear_all_popovers()})}clear_all_popovers(){this.popovers_list.forEach(r=>r.hide())}get_preview_data(){return frappe.xcall("frappe.desk.link_preview.get_preview_data",{doctype:this.doctype,docname:this.name})}init_preview_popover(r){let t=this.get_popover_html(r);this.element.popover({container:"body",template:`
				<div class="link-preview-popover popover">
					<div class="arrow"></div>
					<div class="popover-body popover-content">
					</div>
				</div>
			`,html:!0,sanitizeFn:i=>i,content:t,trigger:"manual",placement:"top"}),$(this.element.data("bs.popover").tip).toggleClass("control-field-popover",this.is_link),this.popovers_list.push(this.element.data("bs.popover"))}get_popover_html(r){return this.href||(this.href=window.location.href),this.href&&this.href.includes(" ")&&(this.href=this.href.replace(new RegExp(" ","g"),"%20")),`
			<div class="preview-popover-header">
				<div class="preview-header">
					${this.get_image_html(r)}
					<div class="preview-name">
						<a href=${this.href}>${__(r.preview_title)}</a>
					</div>
					<div class="text-muted preview-title">${this.get_id_html(r)}</div>
				</div>
			</div>
			<hr>
			<div class="popover-body">
				${this.get_content_html(r)}
			</div>
		`}get_id_html(r){let t="";return r.preview_title!==r.name&&(t=`<a class="text-muted" href=${this.href}>${r.name}</a>`),t}get_image_html(r){return`<div class="preview-image">
			${frappe.get_avatar("avatar-medium",r.preview_title,r.preview_image)}
		</div>`}get_content_html(r){let t="";return Object.keys(r).forEach(e=>{if(!["preview_image","preview_title","name"].includes(e)){let i=frappe.ellipsis(r[e],280),n=e;t+=`
					<div class="preview-field">
						<div class="preview-label text-muted">${__(n)}</div>
						<div class="preview-value">${i}</div>
					</div>
				`}}),`<div class="preview-table">${t}</div>`}};frappe.provide("frappe.request");frappe.provide("frappe.request.error_handlers");frappe.request.url="/";frappe.request.ajax_count=0;frappe.request.waiting_for_ajax=[];frappe.request.logs={};frappe.xcall=function(r,t){return new Promise((e,i)=>{frappe.call({method:r,args:t,callback:n=>{e(n.message)},error:n=>{i(n.message)}})})};frappe.call=function(r){if(!frappe.is_online())return frappe.show_alert({indicator:"orange",message:__("Connection Lost"),subtitle:__("You are not connected to Internet. Retry after sometime.")},3),r.always&&r.always(),$.ajax();typeof arguments[0]=="string"&&(r={method:arguments[0],args:arguments[1],callback:arguments[2],headers:arguments[3]}),r.quiet&&(r.no_spinner=!0);var t=$.extend({},r.args);t.freeze&&(r.freeze=r.freeze||t.freeze,r.freeze_message=r.freeze_message||t.freeze_message),r.module&&r.page?t.cmd=r.module+".page."+r.page+"."+r.page+"."+r.method:r.doc?$.extend(t,{cmd:"run_doc_method",docs:frappe.get_doc(r.doc.doctype,r.doc.name),method:r.method,args:r.args}):r.method&&(t.cmd=r.method);var e=function(n,o){if(n.task_id)frappe.socketio.subscribe(n.task_id,r),r.queued&&r.queued(n);else if(r.callback)return r.callback(n,o)};let i=r.url;if(!i){if(i="/api/method/"+t.cmd,window.cordova){let n=frappe.request.url;n=n.slice(0,n.length-1),i=n+i}delete t.cmd}return r.debounce&&frappe.request.is_fresh(t,r.debounce)?Promise.resolve():frappe.request.call({type:r.type||"POST",args:t,success:e,error:r.error,always:r.always,btn:r.btn,freeze:r.freeze,freeze_message:r.freeze_message,headers:r.headers||{},error_handlers:r.error_handlers||{},async:r.async,silent:r.silent,url:i})};frappe.request.call=function(r){frappe.request.prepare(r);var t={200:function(n,o){r.success_callback&&r.success_callback(n,o.responseText)},401:function(n){frappe.app.session_expired_dialog&&frappe.app.session_expired_dialog.display?frappe.app.redirect_to_login():frappe.app.handle_session_expired()},404:function(n){frappe.msgprint({title:__("Not found"),indicator:"red",message:__("The resource you are looking for is not available")})},403:function(n){if(frappe.session.user==="Guest"&&frappe.session.logged_in_user!=="Guest")frappe.app.handle_session_expired();else if(n.responseJSON&&n.responseJSON._error_message)frappe.msgprint({title:__("Not permitted"),indicator:"red",message:n.responseJSON._error_message}),n.responseJSON._server_messages=null;else if(n.responseJSON&&n.responseJSON._server_messages){var o=JSON.parse(n.responseJSON._server_messages);if(o.indexOf(__("Not permitted"))!==-1)return}else frappe.msgprint({title:__("Not permitted"),indicator:"red",message:__("You do not have enough permissions to access this resource. Please contact your manager to get access.")})},508:function(n){frappe.utils.play_sound("error"),frappe.msgprint({title:__("Please try again"),indicator:"red",message:__("Another transaction is blocking this one. Please try again in a few seconds.")})},413:function(n,o){frappe.msgprint({indicator:"red",title:__("File too big"),message:__("File size exceeded the maximum allowed size of {0} MB",[(frappe.boot.max_file_size||5242880)/1048576])})},417:function(n){var o=n.responseJSON;if(!o)try{o=JSON.parse(n.responseText)}catch(a){o=n.responseText}r.error_callback&&r.error_callback(o)},501:function(n,o){typeof n=="string"&&(n=JSON.parse(n)),r.error_callback&&r.error_callback(n,o.responseText)},500:function(n){frappe.utils.play_sound("error");try{r.error_callback&&r.error_callback(),frappe.request.report_error(n,r)}catch(o){frappe.request.report_error(n,r)}},504:function(n){frappe.msgprint(__("Request Timed Out")),r.error_callback&&r.error_callback()},502:function(n){frappe.msgprint(__("Internal Server Error"))}},e={QueryTimeoutError:function(){frappe.utils.play_sound("error"),frappe.msgprint({title:__("Request Timeout"),indicator:"red",message:__("Server was too busy to process this request. Please try again.")})},QueryDeadlockError:function(){frappe.utils.play_sound("error"),frappe.msgprint({title:__("Deadlock Occurred"),indicator:"red",message:__("Server was too busy to process this request. Please try again.")})}},i={url:r.url||frappe.request.url,data:r.args,type:r.type,dataType:r.dataType||"json",async:r.async,headers:Object.assign({"X-Frappe-CSRF-Token":frappe.csrf_token,Accept:"application/json","X-Frappe-CMD":r.args&&r.args.cmd||""||""},r.headers),cache:!1};return r.args&&r.args.doctype&&(i.headers["X-Frappe-Doctype"]=encodeURIComponent(r.args.doctype)),frappe.last_request=i.data,$.ajax(i).done(function(n,o,a){try{typeof n=="string"&&(n=JSON.parse(n)),(n.docs||n.docinfo)&&frappe.model.sync(n),n.__messages&&$.extend(frappe._messages,n.__messages),n._link_titles&&(frappe._link_titles||(frappe._link_titles={}),$.extend(frappe._link_titles,n._link_titles));var s=t[a.statusCode().status];s&&s(n,a)}catch(l){console.log("Unable to handle success response",n),console.error(l)}}).always(function(n,o,a){try{if(typeof n=="string"&&(n=JSON.parse(n)),n.responseText){var a=n;n=JSON.parse(n.responseText)}}catch(s){n=null}frappe.request.cleanup(r,n),r.always&&r.always(n)}).fail(function(n,o){try{if(n.getResponseHeader("content-type")=="application/json"&&n.responseText){var a;try{a=JSON.parse(n.responseText)}catch(u){console.log("Unable to parse reponse text"),console.log(n.responseText),console.log(u)}if(a&&a.exception){var s=a.exception.split(".").at(-1).split(":").at(0),l=e[s];if(l){l(a);return}}}var d=t[n.statusCode().status];if(d){d(n);return}r.error_callback&&r.error_callback(n)}catch(u){console.log("Unable to handle failed response"),console.error(u)}})};frappe.request.is_fresh=function(r,t){frappe.request.logs[r.cmd]||(frappe.request.logs[r.cmd]=[]);for(let e of frappe.request.logs[r.cmd])if(new Date-e.timestamp<t&&frappe.utils.deep_equal(r,e.args))return console.log("throttled"),!0;return frappe.request.logs[r.cmd].push({args:r,timestamp:new Date}),!1};frappe.request.prepare=function(r){$("body").attr("data-ajax-state","triggered"),r.btn&&$(r.btn).prop("disabled",!0),r.freeze&&frappe.dom.freeze(r.freeze_message);for(var t in r.args)r.args[t]&&($.isPlainObject(r.args[t])||$.isArray(r.args[t]))&&(r.args[t]=JSON.stringify(r.args[t]));if(!r.args.cmd&&!r.url)throw console.log(r),"Incomplete Request";r.success_callback=r.success,r.error_callback=r.error,delete r.success,delete r.error};frappe.request.cleanup=function(r,t){if(r.btn&&$(r.btn).prop("disabled",!1),$("body").attr("data-ajax-state","complete"),r.freeze&&frappe.dom.unfreeze(),t){if(t.session_expired||frappe.session.user==="Guest"&&frappe.session.logged_in_user!=="Guest"){frappe.app.handle_session_expired();return}let e=frappe.request.error_handlers[t.exc_type]||[],i=r.error_handlers?r.error_handlers[t.exc_type]:null,n=[].concat(e,i).filter(Boolean);t.exc_type&&n.forEach(o=>{o(t)}),t._server_messages&&!r.silent&&n.length===0&&(t._server_messages=JSON.parse(t._server_messages),frappe.hide_msgprint(),frappe.msgprint(t._server_messages)),t.exc&&(t.exc=JSON.parse(t.exc),t.exc instanceof Array?t.exc.forEach(o=>{o&&console.error(o)}):console.error(t.exc)),t._debug_messages&&(r.args&&(console.log("======== arguments ========"),console.log(r.args),console.log("========")),$.each(JSON.parse(t._debug_messages),function(o,a){console.log(a)}),console.log("======== response ========"),delete t._debug_messages,console.log(t),console.log("========"))}frappe.last_response=t};frappe.after_server_call=()=>frappe.request.ajax_count?new Promise(r=>{frappe.request.waiting_for_ajax.push(()=>{r()})}):null;frappe.after_ajax=function(r){return new Promise(t=>{if(frappe.request.ajax_count)frappe.request.waiting_for_ajax.push(()=>{if(r)return t(r());t()});else{if(r)return t(r());t()}})};frappe.request.report_error=function(r,t){var e=JSON.parse(r.responseText),i;if(e.exc){try{i=(JSON.parse(e.exc)||[]).join(`
`)}catch(s){i=e.exc}delete e.exc}else i="";let n=()=>{let s=d=>"```\n"+d+"\n```",l=["### App Versions",s(JSON.stringify(frappe.boot.versions,null,"	")),"### Route",s(frappe.get_route_str()),"### Traceback",s(i),"### Request Data",s(JSON.stringify(t,null,"	")),"### Response Data",s(JSON.stringify(e,null,"	"))].join(`
`);frappe.utils.copy_to_clipboard(l)};var o=function(){var s=["<h5>Please type some additional information that could help us reproduce this issue:</h5>",'<div style="min-height: 100px; border: 1px solid #bbb; 				border-radius: 5px; padding: 15px; margin-bottom: 15px;"></div>',"<hr>","<h5>App Versions</h5>","<pre>"+JSON.stringify(frappe.boot.versions,null,"	")+"</pre>","<h5>Route</h5>","<pre>"+frappe.get_route_str()+"</pre>","<hr>","<h5>Error Report</h5>","<pre>"+i+"</pre>","<hr>","<h5>Request Data</h5>","<pre>"+JSON.stringify(t,null,"	")+"</pre>","<hr>","<h5>Response JSON</h5>","<pre>"+JSON.stringify(e,null,"	")+"</pre>"].join(`
`),l=new frappe.views.CommunicationComposer({subject:"Error Report ["+frappe.datetime.nowdate()+"]",recipients:a,message:s,doc:{doctype:"User",name:frappe.session.user}});l.dialog.$wrapper.css("z-index",cint(frappe.msg_dialog.$wrapper.css("z-index"))+1)};if(i){var a=frappe.boot.error_report_email;t=frappe.request.cleanup_request_opts(t),frappe.error_dialog||(frappe.error_dialog=new frappe.ui.Dialog({title:__("Server Error"),primary_action_label:__("Report"),primary_action:()=>{a?o():frappe.msgprint(__("Support Email Address Not Specified")),frappe.error_dialog.hide()},secondary_action_label:__("Copy error to clipboard"),secondary_action:()=>{n(),frappe.error_dialog.hide()}}),frappe.error_dialog.wrapper.classList.add("msgprint-dialog"));let s=strip(i).split(`
`);frappe.error_dialog.$body.html(s[s.length-1]),frappe.error_dialog.show()}};frappe.request.cleanup_request_opts=function(r){var t=(r.args||{}).doc;return t&&(t=JSON.parse(t),$.each(Object.keys(t),function(e,i){i.indexOf("password")!==-1&&t[i]&&(t[i]="*****")}),r.args.doc=JSON.stringify(t)),r};frappe.request.on_error=function(r,t){frappe.request.error_handlers[r]=frappe.request.error_handlers[r]||[],frappe.request.error_handlers[r].push(t)};$(document).ajaxSend(function(){frappe.request.ajax_count++});$(document).ajaxComplete(function(){frappe.request.ajax_count--,frappe.request.ajax_count||($.each(frappe.request.waiting_for_ajax||[],function(r,t){t()}),frappe.request.waiting_for_ajax=[])});var ar=Object.create(null);ar.open="0";ar.close="1";ar.ping="2";ar.pong="3";ar.message="4";ar.upgrade="5";ar.noop="6";var ri=Object.create(null);Object.keys(ar).forEach(r=>{ri[ar[r]]=r});var Sa={type:"error",data:"parser error"};var mp=typeof Blob=="function"||typeof Blob!="undefined"&&Object.prototype.toString.call(Blob)==="[object BlobConstructor]",vp=typeof ArrayBuffer=="function",bp=r=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(r):r&&r.buffer instanceof ArrayBuffer,yp=({type:r,data:t},e,i)=>mp&&t instanceof Blob?e?i(t):Ta(t,i):vp&&(t instanceof ArrayBuffer||bp(t))?e?i(t):Ta(new Blob([t]),i):i(ar[r]+(t||"")),Ta=(r,t)=>{let e=new FileReader;return e.onload=function(){let i=e.result.split(",")[1];t("b"+i)},e.readAsDataURL(r)},ji=yp;var Ea="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",ii=typeof Uint8Array=="undefined"?[]:new Uint8Array(256);for(let r=0;r<Ea.length;r++)ii[Ea.charCodeAt(r)]=r;var Aa=r=>{let t=r.length*.75,e=r.length,i,n=0,o,a,s,l;r[r.length-1]==="="&&(t--,r[r.length-2]==="="&&t--);let d=new ArrayBuffer(t),u=new Uint8Array(d);for(i=0;i<e;i+=4)o=ii[r.charCodeAt(i)],a=ii[r.charCodeAt(i+1)],s=ii[r.charCodeAt(i+2)],l=ii[r.charCodeAt(i+3)],u[n++]=o<<2|a>>4,u[n++]=(a&15)<<4|s>>2,u[n++]=(s&3)<<6|l&63;return d};var wp=typeof ArrayBuffer=="function",kp=(r,t)=>{if(typeof r!="string")return{type:"message",data:Oa(r,t)};let e=r.charAt(0);return e==="b"?{type:"message",data:xp(r.substring(1),t)}:ri[e]?r.length>1?{type:ri[e],data:r.substring(1)}:{type:ri[e]}:Sa},xp=(r,t)=>{if(wp){let e=Aa(r);return Oa(e,t)}else return{base64:!0,data:r}},Oa=(r,t)=>{switch(t){case"blob":return r instanceof ArrayBuffer?new Blob([r]):r;case"arraybuffer":default:return r}},Di=kp;var Ma=String.fromCharCode(30),$a=(r,t)=>{let e=r.length,i=new Array(e),n=0;r.forEach((o,a)=>{ji(o,!1,s=>{i[a]=s,++n===e&&t(i.join(Ma))})})},La=(r,t)=>{let e=r.split(Ma),i=[];for(let n=0;n<e.length;n++){let o=Di(e[n],t);if(i.push(o),o.type==="error")break}return i},Xn=4;function gt(r){if(r)return Cp(r)}function Cp(r){for(var t in gt.prototype)r[t]=gt.prototype[t];return r}gt.prototype.on=gt.prototype.addEventListener=function(r,t){return this._callbacks=this._callbacks||{},(this._callbacks["$"+r]=this._callbacks["$"+r]||[]).push(t),this};gt.prototype.once=function(r,t){function e(){this.off(r,e),t.apply(this,arguments)}return e.fn=t,this.on(r,e),this};gt.prototype.off=gt.prototype.removeListener=gt.prototype.removeAllListeners=gt.prototype.removeEventListener=function(r,t){if(this._callbacks=this._callbacks||{},arguments.length==0)return this._callbacks={},this;var e=this._callbacks["$"+r];if(!e)return this;if(arguments.length==1)return delete this._callbacks["$"+r],this;for(var i,n=0;n<e.length;n++)if(i=e[n],i===t||i.fn===t){e.splice(n,1);break}return e.length===0&&delete this._callbacks["$"+r],this};gt.prototype.emit=function(r){this._callbacks=this._callbacks||{};for(var t=new Array(arguments.length-1),e=this._callbacks["$"+r],i=1;i<arguments.length;i++)t[i-1]=arguments[i];if(e){e=e.slice(0);for(var i=0,n=e.length;i<n;++i)e[i].apply(this,t)}return this};gt.prototype.emitReserved=gt.prototype.emit;gt.prototype.listeners=function(r){return this._callbacks=this._callbacks||{},this._callbacks["$"+r]||[]};gt.prototype.hasListeners=function(r){return!!this.listeners(r).length};var Zt=(()=>typeof self!="undefined"?self:typeof window!="undefined"?window:Function("return this")())();function Fi(r,...t){return t.reduce((e,i)=>(r.hasOwnProperty(i)&&(e[i]=r[i]),e),{})}var Sp=setTimeout,Tp=clearTimeout;function gr(r,t){t.useNativeTimers?(r.setTimeoutFn=Sp.bind(Zt),r.clearTimeoutFn=Tp.bind(Zt)):(r.setTimeoutFn=setTimeout.bind(Zt),r.clearTimeoutFn=clearTimeout.bind(Zt))}var Ep=1.33;function Ba(r){return typeof r=="string"?Ap(r):Math.ceil((r.byteLength||r.size)*Ep)}function Ap(r){let t=0,e=0;for(let i=0,n=r.length;i<n;i++)t=r.charCodeAt(i),t<128?e+=1:t<2048?e+=2:t<55296||t>=57344?e+=3:(i++,e+=4);return e}var Ia=class extends Error{constructor(t,e,i){super(t);this.description=e,this.context=i,this.type="TransportError"}},Lr=class extends gt{constructor(t){super();this.writable=!1,gr(this,t),this.opts=t,this.query=t.query,this.readyState="",this.socket=t.socket}onError(t,e,i){return super.emitReserved("error",new Ia(t,e,i)),this}open(){return(this.readyState==="closed"||this.readyState==="")&&(this.readyState="opening",this.doOpen()),this}close(){return(this.readyState==="opening"||this.readyState==="open")&&(this.doClose(),this.onClose()),this}send(t){this.readyState==="open"&&this.write(t)}onOpen(){this.readyState="open",this.writable=!0,super.emitReserved("open")}onData(t){let e=Di(t,this.socket.binaryType);this.onPacket(e)}onPacket(t){super.emitReserved("packet",t)}onClose(t){this.readyState="closed",super.emitReserved("close",t)}};var ja="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-_".split(""),Kn=64,Op={},Ra=0,zi=0,Pa;function Na(r){let t="";do t=ja[r%Kn]+t,r=Math.floor(r/Kn);while(r>0);return t}function Hi(){let r=Na(+new Date);return r!==Pa?(Ra=0,Pa=r):r+"."+Na(Ra++)}for(;zi<Kn;zi++)Op[ja[zi]]=zi;function qi(r){let t="";for(let e in r)r.hasOwnProperty(e)&&(t.length&&(t+="&"),t+=encodeURIComponent(e)+"="+encodeURIComponent(r[e]));return t}function Da(r){let t={},e=r.split("&");for(let i=0,n=e.length;i<n;i++){let o=e[i].split("=");t[decodeURIComponent(o[0])]=decodeURIComponent(o[1])}return t}var Fa=!1;try{Fa=typeof XMLHttpRequest!="undefined"&&"withCredentials"in new XMLHttpRequest}catch(r){}var za=Fa;function Jn(r){let t=r.xdomain;try{if(typeof XMLHttpRequest!="undefined"&&(!t||za))return new XMLHttpRequest}catch(e){}if(!t)try{return new Zt[["Active"].concat("Object").join("X")]("Microsoft.XMLHTTP")}catch(e){}}function Mp(){}var $p=function(){return new Jn({xdomain:!1}).responseType!=null}(),Zn=class extends Lr{constructor(t){super(t);if(this.polling=!1,typeof location!="undefined"){let i=location.protocol==="https:",n=location.port;n||(n=i?"443":"80"),this.xd=typeof location!="undefined"&&t.hostname!==location.hostname||n!==t.port,this.xs=t.secure!==i}let e=t&&t.forceBase64;this.supportsBinary=$p&&!e}get name(){return"polling"}doOpen(){this.poll()}pause(t){this.readyState="pausing";let e=()=>{this.readyState="paused",t()};if(this.polling||!this.writable){let i=0;this.polling&&(i++,this.once("pollComplete",function(){--i||e()})),this.writable||(i++,this.once("drain",function(){--i||e()}))}else e()}poll(){this.polling=!0,this.doPoll(),this.emitReserved("poll")}onData(t){let e=i=>{if(this.readyState==="opening"&&i.type==="open"&&this.onOpen(),i.type==="close")return this.onClose({description:"transport closed by the server"}),!1;this.onPacket(i)};La(t,this.socket.binaryType).forEach(e),this.readyState!=="closed"&&(this.polling=!1,this.emitReserved("pollComplete"),this.readyState==="open"&&this.poll())}doClose(){let t=()=>{this.write([{type:"close"}])};this.readyState==="open"?t():this.once("open",t)}write(t){this.writable=!1,$a(t,e=>{this.doWrite(e,()=>{this.writable=!0,this.emitReserved("drain")})})}uri(){let t=this.query||{},e=this.opts.secure?"https":"http",i="";this.opts.timestampRequests!==!1&&(t[this.opts.timestampParam]=Hi()),!this.supportsBinary&&!t.sid&&(t.b64=1),this.opts.port&&(e==="https"&&Number(this.opts.port)!==443||e==="http"&&Number(this.opts.port)!==80)&&(i=":"+this.opts.port);let n=qi(t),o=this.opts.hostname.indexOf(":")!==-1;return e+"://"+(o?"["+this.opts.hostname+"]":this.opts.hostname)+i+this.opts.path+(n.length?"?"+n:"")}request(t={}){return Object.assign(t,{xd:this.xd,xs:this.xs},this.opts),new sr(this.uri(),t)}doWrite(t,e){let i=this.request({method:"POST",data:t});i.on("success",e),i.on("error",(n,o)=>{this.onError("xhr post error",n,o)})}doPoll(){let t=this.request();t.on("data",this.onData.bind(this)),t.on("error",(e,i)=>{this.onError("xhr poll error",e,i)}),this.pollXhr=t}},sr=class extends gt{constructor(t,e){super();gr(this,e),this.opts=e,this.method=e.method||"GET",this.uri=t,this.async=e.async!==!1,this.data=e.data!==void 0?e.data:null,this.create()}create(){let t=Fi(this.opts,"agent","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","autoUnref");t.xdomain=!!this.opts.xd,t.xscheme=!!this.opts.xs;let e=this.xhr=new Jn(t);try{e.open(this.method,this.uri,this.async);try{if(this.opts.extraHeaders){e.setDisableHeaderCheck&&e.setDisableHeaderCheck(!0);for(let i in this.opts.extraHeaders)this.opts.extraHeaders.hasOwnProperty(i)&&e.setRequestHeader(i,this.opts.extraHeaders[i])}}catch(i){}if(this.method==="POST")try{e.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch(i){}try{e.setRequestHeader("Accept","*/*")}catch(i){}"withCredentials"in e&&(e.withCredentials=this.opts.withCredentials),this.opts.requestTimeout&&(e.timeout=this.opts.requestTimeout),e.onreadystatechange=()=>{e.readyState===4&&(e.status===200||e.status===1223?this.onLoad():this.setTimeoutFn(()=>{this.onError(typeof e.status=="number"?e.status:0)},0))},e.send(this.data)}catch(i){this.setTimeoutFn(()=>{this.onError(i)},0);return}typeof document!="undefined"&&(this.index=sr.requestsCount++,sr.requests[this.index]=this)}onError(t){this.emitReserved("error",t,this.xhr),this.cleanup(!0)}cleanup(t){if(!(typeof this.xhr=="undefined"||this.xhr===null)){if(this.xhr.onreadystatechange=Mp,t)try{this.xhr.abort()}catch(e){}typeof document!="undefined"&&delete sr.requests[this.index],this.xhr=null}}onLoad(){let t=this.xhr.responseText;t!==null&&(this.emitReserved("data",t),this.emitReserved("success"),this.cleanup())}abort(){this.cleanup()}};sr.requestsCount=0;sr.requests={};if(typeof document!="undefined"){if(typeof attachEvent=="function")attachEvent("onunload",Ha);else if(typeof addEventListener=="function"){let r="onpagehide"in Zt?"pagehide":"unload";addEventListener(r,Ha,!1)}}function Ha(){for(let r in sr.requests)sr.requests.hasOwnProperty(r)&&sr.requests[r].abort()}var qa=(()=>typeof Promise=="function"&&typeof Promise.resolve=="function"?t=>Promise.resolve().then(t):(t,e)=>e(t,0))(),ni=Zt.WebSocket||Zt.MozWebSocket,Wi=!0,Wa="arraybuffer";var Ua=typeof navigator!="undefined"&&typeof navigator.product=="string"&&navigator.product.toLowerCase()==="reactnative",Qn=class extends Lr{constructor(t){super(t);this.supportsBinary=!t.forceBase64}get name(){return"websocket"}doOpen(){if(!this.check())return;let t=this.uri(),e=this.opts.protocols,i=Ua?{}:Fi(this.opts,"agent","perMessageDeflate","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","localAddress","protocolVersion","origin","maxPayload","family","checkServerIdentity");this.opts.extraHeaders&&(i.headers=this.opts.extraHeaders);try{this.ws=Wi&&!Ua?e?new ni(t,e):new ni(t):new ni(t,e,i)}catch(n){return this.emitReserved("error",n)}this.ws.binaryType=this.socket.binaryType||Wa,this.addEventListeners()}addEventListeners(){this.ws.onopen=()=>{this.opts.autoUnref&&this.ws._socket.unref(),this.onOpen()},this.ws.onclose=t=>this.onClose({description:"websocket connection closed",context:t}),this.ws.onmessage=t=>this.onData(t.data),this.ws.onerror=t=>this.onError("websocket error",t)}write(t){this.writable=!1;for(let e=0;e<t.length;e++){let i=t[e],n=e===t.length-1;ji(i,this.supportsBinary,o=>{let a={};Wi||(i.options&&(a.compress=i.options.compress),this.opts.perMessageDeflate&&(typeof o=="string"?Buffer.byteLength(o):o.length)<this.opts.perMessageDeflate.threshold&&(a.compress=!1));try{Wi?this.ws.send(o):this.ws.send(o,a)}catch(s){}n&&qa(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){typeof this.ws!="undefined"&&(this.ws.close(),this.ws=null)}uri(){let t=this.query||{},e=this.opts.secure?"wss":"ws",i="";this.opts.port&&(e==="wss"&&Number(this.opts.port)!==443||e==="ws"&&Number(this.opts.port)!==80)&&(i=":"+this.opts.port),this.opts.timestampRequests&&(t[this.opts.timestampParam]=Hi()),this.supportsBinary||(t.b64=1);let n=qi(t),o=this.opts.hostname.indexOf(":")!==-1;return e+"://"+(o?"["+this.opts.hostname+"]":this.opts.hostname)+i+this.opts.path+(n.length?"?"+n:"")}check(){return!!ni}};var eo={websocket:Qn,polling:Zn};var Lp=/^(?:(?![^:@]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,Bp=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];function Br(r){let t=r,e=r.indexOf("["),i=r.indexOf("]");e!=-1&&i!=-1&&(r=r.substring(0,e)+r.substring(e,i).replace(/:/g,";")+r.substring(i,r.length));let n=Lp.exec(r||""),o={},a=14;for(;a--;)o[Bp[a]]=n[a]||"";return e!=-1&&i!=-1&&(o.source=t,o.host=o.host.substring(1,o.host.length-1).replace(/;/g,":"),o.authority=o.authority.replace("[","").replace("]","").replace(/;/g,":"),o.ipv6uri=!0),o.pathNames=Ip(o,o.path),o.queryKey=Rp(o,o.query),o}function Ip(r,t){let e=/\/{2,9}/g,i=t.replace(e,"/").split("/");return(t.substr(0,1)=="/"||t.length===0)&&i.splice(0,1),t.substr(t.length-1,1)=="/"&&i.splice(i.length-1,1),i}function Rp(r,t){let e={};return t.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,function(i,n,o){n&&(e[n]=o)}),e}var Qt=class extends gt{constructor(t,e={}){super();t&&typeof t=="object"&&(e=t,t=null),t?(t=Br(t),e.hostname=t.host,e.secure=t.protocol==="https"||t.protocol==="wss",e.port=t.port,t.query&&(e.query=t.query)):e.host&&(e.hostname=Br(e.host).host),gr(this,e),this.secure=e.secure!=null?e.secure:typeof location!="undefined"&&location.protocol==="https:",e.hostname&&!e.port&&(e.port=this.secure?"443":"80"),this.hostname=e.hostname||(typeof location!="undefined"?location.hostname:"localhost"),this.port=e.port||(typeof location!="undefined"&&location.port?location.port:this.secure?"443":"80"),this.transports=e.transports||["polling","websocket"],this.readyState="",this.writeBuffer=[],this.prevBufferLen=0,this.opts=Object.assign({path:"/engine.io",agent:!1,withCredentials:!1,upgrade:!0,timestampParam:"t",rememberUpgrade:!1,rejectUnauthorized:!0,perMessageDeflate:{threshold:1024},transportOptions:{},closeOnBeforeunload:!0},e),this.opts.path=this.opts.path.replace(/\/$/,"")+"/",typeof this.opts.query=="string"&&(this.opts.query=Da(this.opts.query)),this.id=null,this.upgrades=null,this.pingInterval=null,this.pingTimeout=null,this.pingTimeoutTimer=null,typeof addEventListener=="function"&&(this.opts.closeOnBeforeunload&&addEventListener("beforeunload",()=>{this.transport&&(this.transport.removeAllListeners(),this.transport.close())},!1),this.hostname!=="localhost"&&(this.offlineEventListener=()=>{this.onClose("transport close",{description:"network connection lost"})},addEventListener("offline",this.offlineEventListener,!1))),this.open()}createTransport(t){let e=Object.assign({},this.opts.query);e.EIO=Xn,e.transport=t,this.id&&(e.sid=this.id);let i=Object.assign({},this.opts.transportOptions[t],this.opts,{query:e,socket:this,hostname:this.hostname,secure:this.secure,port:this.port});return new eo[t](i)}open(){let t;if(this.opts.rememberUpgrade&&Qt.priorWebsocketSuccess&&this.transports.indexOf("websocket")!==-1)t="websocket";else if(this.transports.length===0){this.setTimeoutFn(()=>{this.emitReserved("error","No transports available")},0);return}else t=this.transports[0];this.readyState="opening";try{t=this.createTransport(t)}catch(e){this.transports.shift(),this.open();return}t.open(),this.setTransport(t)}setTransport(t){this.transport&&this.transport.removeAllListeners(),this.transport=t,t.on("drain",this.onDrain.bind(this)).on("packet",this.onPacket.bind(this)).on("error",this.onError.bind(this)).on("close",e=>this.onClose("transport close",e))}probe(t){let e=this.createTransport(t),i=!1;Qt.priorWebsocketSuccess=!1;let n=()=>{i||(e.send([{type:"ping",data:"probe"}]),e.once("packet",h=>{if(!i)if(h.type==="pong"&&h.data==="probe"){if(this.upgrading=!0,this.emitReserved("upgrading",e),!e)return;Qt.priorWebsocketSuccess=e.name==="websocket",this.transport.pause(()=>{i||this.readyState!=="closed"&&(u(),this.setTransport(e),e.send([{type:"upgrade"}]),this.emitReserved("upgrade",e),e=null,this.upgrading=!1,this.flush())})}else{let p=new Error("probe error");p.transport=e.name,this.emitReserved("upgradeError",p)}}))};function o(){i||(i=!0,u(),e.close(),e=null)}let a=h=>{let p=new Error("probe error: "+h);p.transport=e.name,o(),this.emitReserved("upgradeError",p)};function s(){a("transport closed")}function l(){a("socket closed")}function d(h){e&&h.name!==e.name&&o()}let u=()=>{e.removeListener("open",n),e.removeListener("error",a),e.removeListener("close",s),this.off("close",l),this.off("upgrading",d)};e.once("open",n),e.once("error",a),e.once("close",s),this.once("close",l),this.once("upgrading",d),e.open()}onOpen(){if(this.readyState="open",Qt.priorWebsocketSuccess=this.transport.name==="websocket",this.emitReserved("open"),this.flush(),this.readyState==="open"&&this.opts.upgrade&&this.transport.pause){let t=0,e=this.upgrades.length;for(;t<e;t++)this.probe(this.upgrades[t])}}onPacket(t){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing")switch(this.emitReserved("packet",t),this.emitReserved("heartbeat"),t.type){case"open":this.onHandshake(JSON.parse(t.data));break;case"ping":this.resetPingTimeout(),this.sendPacket("pong"),this.emitReserved("ping"),this.emitReserved("pong");break;case"error":let e=new Error("server error");e.code=t.data,this.onError(e);break;case"message":this.emitReserved("data",t.data),this.emitReserved("message",t.data);break}}onHandshake(t){this.emitReserved("handshake",t),this.id=t.sid,this.transport.query.sid=t.sid,this.upgrades=this.filterUpgrades(t.upgrades),this.pingInterval=t.pingInterval,this.pingTimeout=t.pingTimeout,this.maxPayload=t.maxPayload,this.onOpen(),this.readyState!=="closed"&&this.resetPingTimeout()}resetPingTimeout(){this.clearTimeoutFn(this.pingTimeoutTimer),this.pingTimeoutTimer=this.setTimeoutFn(()=>{this.onClose("ping timeout")},this.pingInterval+this.pingTimeout),this.opts.autoUnref&&this.pingTimeoutTimer.unref()}onDrain(){this.writeBuffer.splice(0,this.prevBufferLen),this.prevBufferLen=0,this.writeBuffer.length===0?this.emitReserved("drain"):this.flush()}flush(){if(this.readyState!=="closed"&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length){let t=this.getWritablePackets();this.transport.send(t),this.prevBufferLen=t.length,this.emitReserved("flush")}}getWritablePackets(){if(!(this.maxPayload&&this.transport.name==="polling"&&this.writeBuffer.length>1))return this.writeBuffer;let e=1;for(let i=0;i<this.writeBuffer.length;i++){let n=this.writeBuffer[i].data;if(n&&(e+=Ba(n)),i>0&&e>this.maxPayload)return this.writeBuffer.slice(0,i);e+=2}return this.writeBuffer}write(t,e,i){return this.sendPacket("message",t,e,i),this}send(t,e,i){return this.sendPacket("message",t,e,i),this}sendPacket(t,e,i,n){if(typeof e=="function"&&(n=e,e=void 0),typeof i=="function"&&(n=i,i=null),this.readyState==="closing"||this.readyState==="closed")return;i=i||{},i.compress=i.compress!==!1;let o={type:t,data:e,options:i};this.emitReserved("packetCreate",o),this.writeBuffer.push(o),n&&this.once("flush",n),this.flush()}close(){let t=()=>{this.onClose("forced close"),this.transport.close()},e=()=>{this.off("upgrade",e),this.off("upgradeError",e),t()},i=()=>{this.once("upgrade",e),this.once("upgradeError",e)};return(this.readyState==="opening"||this.readyState==="open")&&(this.readyState="closing",this.writeBuffer.length?this.once("drain",()=>{this.upgrading?i():t()}):this.upgrading?i():t()),this}onError(t){Qt.priorWebsocketSuccess=!1,this.emitReserved("error",t),this.onClose("transport error",t)}onClose(t,e){(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing")&&(this.clearTimeoutFn(this.pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),typeof removeEventListener=="function"&&removeEventListener("offline",this.offlineEventListener,!1),this.readyState="closed",this.id=null,this.emitReserved("close",t,e),this.writeBuffer=[],this.prevBufferLen=0)}filterUpgrades(t){let e=[],i=0,n=t.length;for(;i<n;i++)~this.transports.indexOf(t[i])&&e.push(t[i]);return e}};Qt.protocol=Xn;var JC=Qt.protocol;function Va(r,t="",e){let i=r;e=e||typeof location!="undefined"&&location,r==null&&(r=e.protocol+"//"+e.host),typeof r=="string"&&(r.charAt(0)==="/"&&(r.charAt(1)==="/"?r=e.protocol+r:r=e.host+r),/^(https?|wss?):\/\//.test(r)||(typeof e!="undefined"?r=e.protocol+"//"+r:r="https://"+r),i=Br(r)),i.port||(/^(http|ws)$/.test(i.protocol)?i.port="80":/^(http|ws)s$/.test(i.protocol)&&(i.port="443")),i.path=i.path||"/";let o=i.host.indexOf(":")!==-1?"["+i.host+"]":i.host;return i.id=i.protocol+"://"+o+":"+i.port+t,i.href=i.protocol+"://"+o+(e&&e.port===i.port?"":":"+i.port),i}var io={};fp(io,{Decoder:()=>Ui,Encoder:()=>Ja,PacketType:()=>at,protocol:()=>Ka});var Pp=typeof ArrayBuffer=="function",Np=r=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(r):r.buffer instanceof ArrayBuffer,Ya=Object.prototype.toString,jp=typeof Blob=="function"||typeof Blob!="undefined"&&Ya.call(Blob)==="[object BlobConstructor]",Dp=typeof File=="function"||typeof File!="undefined"&&Ya.call(File)==="[object FileConstructor]";function ai(r){return Pp&&(r instanceof ArrayBuffer||Np(r))||jp&&r instanceof Blob||Dp&&r instanceof File}function oi(r,t){if(!r||typeof r!="object")return!1;if(Array.isArray(r)){for(let e=0,i=r.length;e<i;e++)if(oi(r[e]))return!0;return!1}if(ai(r))return!0;if(r.toJSON&&typeof r.toJSON=="function"&&arguments.length===1)return oi(r.toJSON(),!0);for(let e in r)if(Object.prototype.hasOwnProperty.call(r,e)&&oi(r[e]))return!0;return!1}function Ga(r){let t=[],e=r.data,i=r;return i.data=to(e,t),i.attachments=t.length,{packet:i,buffers:t}}function to(r,t){if(!r)return r;if(ai(r)){let e={_placeholder:!0,num:t.length};return t.push(r),e}else if(Array.isArray(r)){let e=new Array(r.length);for(let i=0;i<r.length;i++)e[i]=to(r[i],t);return e}else if(typeof r=="object"&&!(r instanceof Date)){let e={};for(let i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=to(r[i],t));return e}return r}function Xa(r,t){return r.data=ro(r.data,t),r.attachments=void 0,r}function ro(r,t){if(!r)return r;if(r&&r._placeholder)return t[r.num];if(Array.isArray(r))for(let e=0;e<r.length;e++)r[e]=ro(r[e],t);else if(typeof r=="object")for(let e in r)Object.prototype.hasOwnProperty.call(r,e)&&(r[e]=ro(r[e],t));return r}var Ka=5,at;(function(r){r[r.CONNECT=0]="CONNECT",r[r.DISCONNECT=1]="DISCONNECT",r[r.EVENT=2]="EVENT",r[r.ACK=3]="ACK",r[r.CONNECT_ERROR=4]="CONNECT_ERROR",r[r.BINARY_EVENT=5]="BINARY_EVENT",r[r.BINARY_ACK=6]="BINARY_ACK"})(at||(at={}));var Ja=class{constructor(t){this.replacer=t}encode(t){return(t.type===at.EVENT||t.type===at.ACK)&&oi(t)?(t.type=t.type===at.EVENT?at.BINARY_EVENT:at.BINARY_ACK,this.encodeAsBinary(t)):[this.encodeAsString(t)]}encodeAsString(t){let e=""+t.type;return(t.type===at.BINARY_EVENT||t.type===at.BINARY_ACK)&&(e+=t.attachments+"-"),t.nsp&&t.nsp!=="/"&&(e+=t.nsp+","),t.id!=null&&(e+=t.id),t.data!=null&&(e+=JSON.stringify(t.data,this.replacer)),e}encodeAsBinary(t){let e=Ga(t),i=this.encodeAsString(e.packet),n=e.buffers;return n.unshift(i),n}},Ui=class extends gt{constructor(t){super();this.reviver=t}add(t){let e;if(typeof t=="string")e=this.decodeString(t),e.type===at.BINARY_EVENT||e.type===at.BINARY_ACK?(this.reconstructor=new Za(e),e.attachments===0&&super.emitReserved("decoded",e)):super.emitReserved("decoded",e);else if(ai(t)||t.base64)if(this.reconstructor)e=this.reconstructor.takeBinaryData(t),e&&(this.reconstructor=null,super.emitReserved("decoded",e));else throw new Error("got binary data when not reconstructing a packet");else throw new Error("Unknown type: "+t)}decodeString(t){let e=0,i={type:Number(t.charAt(0))};if(at[i.type]===void 0)throw new Error("unknown packet type "+i.type);if(i.type===at.BINARY_EVENT||i.type===at.BINARY_ACK){let o=e+1;for(;t.charAt(++e)!=="-"&&e!=t.length;);let a=t.substring(o,e);if(a!=Number(a)||t.charAt(e)!=="-")throw new Error("Illegal attachments");i.attachments=Number(a)}if(t.charAt(e+1)==="/"){let o=e+1;for(;++e&&!(t.charAt(e)===","||e===t.length););i.nsp=t.substring(o,e)}else i.nsp="/";let n=t.charAt(e+1);if(n!==""&&Number(n)==n){let o=e+1;for(;++e;){let a=t.charAt(e);if(a==null||Number(a)!=a){--e;break}if(e===t.length)break}i.id=Number(t.substring(o,e+1))}if(t.charAt(++e)){let o=this.tryParse(t.substr(e));if(Ui.isPayloadValid(i.type,o))i.data=o;else throw new Error("invalid payload")}return i}tryParse(t){try{return JSON.parse(t,this.reviver)}catch(e){return!1}}static isPayloadValid(t,e){switch(t){case at.CONNECT:return typeof e=="object";case at.DISCONNECT:return e===void 0;case at.CONNECT_ERROR:return typeof e=="string"||typeof e=="object";case at.EVENT:case at.BINARY_EVENT:return Array.isArray(e)&&e.length>0;case at.ACK:case at.BINARY_ACK:return Array.isArray(e)}}destroy(){this.reconstructor&&this.reconstructor.finishedReconstruction()}},Za=class{constructor(t){this.packet=t,this.buffers=[],this.reconPack=t}takeBinaryData(t){if(this.buffers.push(t),this.buffers.length===this.reconPack.attachments){let e=Xa(this.reconPack,this.buffers);return this.finishedReconstruction(),e}return null}finishedReconstruction(){this.reconPack=null,this.buffers=[]}};function Yt(r,t,e){return r.on(t,e),function(){r.off(t,e)}}var Fp=Object.freeze({connect:1,connect_error:1,disconnect:1,disconnecting:1,newListener:1,removeListener:1}),si=class extends gt{constructor(t,e,i){super();this.connected=!1,this.receiveBuffer=[],this.sendBuffer=[],this.ids=0,this.acks={},this.flags={},this.io=t,this.nsp=e,i&&i.auth&&(this.auth=i.auth),this.io._autoConnect&&this.open()}get disconnected(){return!this.connected}subEvents(){if(this.subs)return;let t=this.io;this.subs=[Yt(t,"open",this.onopen.bind(this)),Yt(t,"packet",this.onpacket.bind(this)),Yt(t,"error",this.onerror.bind(this)),Yt(t,"close",this.onclose.bind(this))]}get active(){return!!this.subs}connect(){return this.connected?this:(this.subEvents(),this.io._reconnecting||this.io.open(),this.io._readyState==="open"&&this.onopen(),this)}open(){return this.connect()}send(...t){return t.unshift("message"),this.emit.apply(this,t),this}emit(t,...e){if(Fp.hasOwnProperty(t))throw new Error('"'+t+'" is a reserved event name');e.unshift(t);let i={type:at.EVENT,data:e};if(i.options={},i.options.compress=this.flags.compress!==!1,typeof e[e.length-1]=="function"){let a=this.ids++,s=e.pop();this._registerAckCallback(a,s),i.id=a}let n=this.io.engine&&this.io.engine.transport&&this.io.engine.transport.writable;return this.flags.volatile&&(!n||!this.connected)||(this.connected?(this.notifyOutgoingListeners(i),this.packet(i)):this.sendBuffer.push(i)),this.flags={},this}_registerAckCallback(t,e){let i=this.flags.timeout;if(i===void 0){this.acks[t]=e;return}let n=this.io.setTimeoutFn(()=>{delete this.acks[t];for(let o=0;o<this.sendBuffer.length;o++)this.sendBuffer[o].id===t&&this.sendBuffer.splice(o,1);e.call(this,new Error("operation has timed out"))},i);this.acks[t]=(...o)=>{this.io.clearTimeoutFn(n),e.apply(this,[null,...o])}}packet(t){t.nsp=this.nsp,this.io._packet(t)}onopen(){typeof this.auth=="function"?this.auth(t=>{this.packet({type:at.CONNECT,data:t})}):this.packet({type:at.CONNECT,data:this.auth})}onerror(t){this.connected||this.emitReserved("connect_error",t)}onclose(t,e){this.connected=!1,delete this.id,this.emitReserved("disconnect",t,e)}onpacket(t){if(t.nsp===this.nsp)switch(t.type){case at.CONNECT:if(t.data&&t.data.sid){let n=t.data.sid;this.onconnect(n)}else this.emitReserved("connect_error",new Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"));break;case at.EVENT:case at.BINARY_EVENT:this.onevent(t);break;case at.ACK:case at.BINARY_ACK:this.onack(t);break;case at.DISCONNECT:this.ondisconnect();break;case at.CONNECT_ERROR:this.destroy();let i=new Error(t.data.message);i.data=t.data.data,this.emitReserved("connect_error",i);break}}onevent(t){let e=t.data||[];t.id!=null&&e.push(this.ack(t.id)),this.connected?this.emitEvent(e):this.receiveBuffer.push(Object.freeze(e))}emitEvent(t){if(this._anyListeners&&this._anyListeners.length){let e=this._anyListeners.slice();for(let i of e)i.apply(this,t)}super.emit.apply(this,t)}ack(t){let e=this,i=!1;return function(...n){i||(i=!0,e.packet({type:at.ACK,id:t,data:n}))}}onack(t){let e=this.acks[t.id];typeof e=="function"&&(e.apply(this,t.data),delete this.acks[t.id])}onconnect(t){this.id=t,this.connected=!0,this.emitBuffered(),this.emitReserved("connect")}emitBuffered(){this.receiveBuffer.forEach(t=>this.emitEvent(t)),this.receiveBuffer=[],this.sendBuffer.forEach(t=>{this.notifyOutgoingListeners(t),this.packet(t)}),this.sendBuffer=[]}ondisconnect(){this.destroy(),this.onclose("io server disconnect")}destroy(){this.subs&&(this.subs.forEach(t=>t()),this.subs=void 0),this.io._destroy(this)}disconnect(){return this.connected&&this.packet({type:at.DISCONNECT}),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}close(){return this.disconnect()}compress(t){return this.flags.compress=t,this}get volatile(){return this.flags.volatile=!0,this}timeout(t){return this.flags.timeout=t,this}onAny(t){return this._anyListeners=this._anyListeners||[],this._anyListeners.push(t),this}prependAny(t){return this._anyListeners=this._anyListeners||[],this._anyListeners.unshift(t),this}offAny(t){if(!this._anyListeners)return this;if(t){let e=this._anyListeners;for(let i=0;i<e.length;i++)if(t===e[i])return e.splice(i,1),this}else this._anyListeners=[];return this}listenersAny(){return this._anyListeners||[]}onAnyOutgoing(t){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.push(t),this}prependAnyOutgoing(t){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.unshift(t),this}offAnyOutgoing(t){if(!this._anyOutgoingListeners)return this;if(t){let e=this._anyOutgoingListeners;for(let i=0;i<e.length;i++)if(t===e[i])return e.splice(i,1),this}else this._anyOutgoingListeners=[];return this}listenersAnyOutgoing(){return this._anyOutgoingListeners||[]}notifyOutgoingListeners(t){if(this._anyOutgoingListeners&&this._anyOutgoingListeners.length){let e=this._anyOutgoingListeners.slice();for(let i of e)i.apply(this,t.data)}}};function Ar(r){r=r||{},this.ms=r.min||100,this.max=r.max||1e4,this.factor=r.factor||2,this.jitter=r.jitter>0&&r.jitter<=1?r.jitter:0,this.attempts=0}Ar.prototype.duration=function(){var r=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var t=Math.random(),e=Math.floor(t*this.jitter*r);r=(Math.floor(t*10)&1)==0?r-e:r+e}return Math.min(r,this.max)|0};Ar.prototype.reset=function(){this.attempts=0};Ar.prototype.setMin=function(r){this.ms=r};Ar.prototype.setMax=function(r){this.max=r};Ar.prototype.setJitter=function(r){this.jitter=r};var li=class extends gt{constructor(t,e){var i;super();this.nsps={},this.subs=[],t&&typeof t=="object"&&(e=t,t=void 0),e=e||{},e.path=e.path||"/socket.io",this.opts=e,gr(this,e),this.reconnection(e.reconnection!==!1),this.reconnectionAttempts(e.reconnectionAttempts||1/0),this.reconnectionDelay(e.reconnectionDelay||1e3),this.reconnectionDelayMax(e.reconnectionDelayMax||5e3),this.randomizationFactor((i=e.randomizationFactor)!==null&&i!==void 0?i:.5),this.backoff=new Ar({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(e.timeout==null?2e4:e.timeout),this._readyState="closed",this.uri=t;let n=e.parser||io;this.encoder=new n.Encoder,this.decoder=new n.Decoder,this._autoConnect=e.autoConnect!==!1,this._autoConnect&&this.open()}reconnection(t){return arguments.length?(this._reconnection=!!t,this):this._reconnection}reconnectionAttempts(t){return t===void 0?this._reconnectionAttempts:(this._reconnectionAttempts=t,this)}reconnectionDelay(t){var e;return t===void 0?this._reconnectionDelay:(this._reconnectionDelay=t,(e=this.backoff)===null||e===void 0||e.setMin(t),this)}randomizationFactor(t){var e;return t===void 0?this._randomizationFactor:(this._randomizationFactor=t,(e=this.backoff)===null||e===void 0||e.setJitter(t),this)}reconnectionDelayMax(t){var e;return t===void 0?this._reconnectionDelayMax:(this._reconnectionDelayMax=t,(e=this.backoff)===null||e===void 0||e.setMax(t),this)}timeout(t){return arguments.length?(this._timeout=t,this):this._timeout}maybeReconnectOnOpen(){!this._reconnecting&&this._reconnection&&this.backoff.attempts===0&&this.reconnect()}open(t){if(~this._readyState.indexOf("open"))return this;this.engine=new Qt(this.uri,this.opts);let e=this.engine,i=this;this._readyState="opening",this.skipReconnect=!1;let n=Yt(e,"open",function(){i.onopen(),t&&t()}),o=Yt(e,"error",a=>{i.cleanup(),i._readyState="closed",this.emitReserved("error",a),t?t(a):i.maybeReconnectOnOpen()});if(this._timeout!==!1){let a=this._timeout;a===0&&n();let s=this.setTimeoutFn(()=>{n(),e.close(),e.emit("error",new Error("timeout"))},a);this.opts.autoUnref&&s.unref(),this.subs.push(function(){clearTimeout(s)})}return this.subs.push(n),this.subs.push(o),this}connect(t){return this.open(t)}onopen(){this.cleanup(),this._readyState="open",this.emitReserved("open");let t=this.engine;this.subs.push(Yt(t,"ping",this.onping.bind(this)),Yt(t,"data",this.ondata.bind(this)),Yt(t,"error",this.onerror.bind(this)),Yt(t,"close",this.onclose.bind(this)),Yt(this.decoder,"decoded",this.ondecoded.bind(this)))}onping(){this.emitReserved("ping")}ondata(t){this.decoder.add(t)}ondecoded(t){this.emitReserved("packet",t)}onerror(t){this.emitReserved("error",t)}socket(t,e){let i=this.nsps[t];return i||(i=new si(this,t,e),this.nsps[t]=i),i}_destroy(t){let e=Object.keys(this.nsps);for(let i of e)if(this.nsps[i].active)return;this._close()}_packet(t){let e=this.encoder.encode(t);for(let i=0;i<e.length;i++)this.engine.write(e[i],t.options)}cleanup(){this.subs.forEach(t=>t()),this.subs.length=0,this.decoder.destroy()}_close(){this.skipReconnect=!0,this._reconnecting=!1,this.onclose("forced close"),this.engine&&this.engine.close()}disconnect(){return this._close()}onclose(t,e){this.cleanup(),this.backoff.reset(),this._readyState="closed",this.emitReserved("close",t,e),this._reconnection&&!this.skipReconnect&&this.reconnect()}reconnect(){if(this._reconnecting||this.skipReconnect)return this;let t=this;if(this.backoff.attempts>=this._reconnectionAttempts)this.backoff.reset(),this.emitReserved("reconnect_failed"),this._reconnecting=!1;else{let e=this.backoff.duration();this._reconnecting=!0;let i=this.setTimeoutFn(()=>{t.skipReconnect||(this.emitReserved("reconnect_attempt",t.backoff.attempts),!t.skipReconnect&&t.open(n=>{n?(t._reconnecting=!1,t.reconnect(),this.emitReserved("reconnect_error",n)):t.onreconnect()}))},e);this.opts.autoUnref&&i.unref(),this.subs.push(function(){clearTimeout(i)})}}onreconnect(){let t=this.backoff.attempts;this._reconnecting=!1,this.backoff.reset(),this.emitReserved("reconnect",t)}};var ci={};function Ir(r,t){typeof r=="object"&&(t=r,r=void 0),t=t||{};let e=Va(r,t.path||"/socket.io"),i=e.source,n=e.id,o=e.path,a=ci[n]&&o in ci[n].nsps,s=t.forceNew||t["force new connection"]||t.multiplex===!1||a,l;return s?l=new li(i,t):(ci[n]||(ci[n]=new li(i,t)),l=ci[n]),e.query&&!t.query&&(t.query=e.queryKey),l.socket(e.path,t)}Object.assign(Ir,{Manager:li,Socket:si,io:Ir,connect:Ir});frappe.socketio={open_tasks:{},open_docs:[],emit_queue:[],init:function(r=3e3){if(!frappe.boot.disable_async&&!frappe.socketio.socket){if(window.location.protocol=="https:"?frappe.socketio.socket=Ir.connect(frappe.socketio.get_host(r),{secure:!0,withCredentials:!0,reconnectionAttempts:3}):window.location.protocol=="http:"&&(frappe.socketio.socket=Ir.connect(frappe.socketio.get_host(r),{withCredentials:!0,reconnectionAttempts:3})),!frappe.socketio.socket){console.log("Unable to connect to "+frappe.socketio.get_host(r));return}frappe.socketio.socket.on("msgprint",function(t){frappe.msgprint(t)}),frappe.socketio.socket.on("progress",function(t){t.progress&&(t.percent=flt(t.progress[0])/t.progress[1]*100),t.percent&&frappe.show_progress(t.title||__("Progress"),t.percent,100,t.description,!0)}),frappe.socketio.setup_listeners(),frappe.socketio.setup_reconnect(),$(document).on("form-load form-rename",function(t,e){if(!(!e.doc||e.is_new())){for(var i=0,n=frappe.socketio.open_docs.length;i<n;i++){var o=frappe.socketio.open_docs[i];if(e.doctype==o.doctype&&e.docname==o.name)return!1}frappe.socketio.doc_subscribe(e.doctype,e.docname)}}),$(document).on("form-refresh",function(t,e){!e.doc||e.is_new()||frappe.socketio.doc_open(e.doctype,e.docname)}),$(document).on("form-unload",function(t,e){!e.doc||e.is_new()||frappe.socketio.doc_close(e.doctype,e.docname)}),$(document).on("form-typing",function(t,e){frappe.socketio.form_typing(e.doctype,e.docname)}),$(document).on("form-stopped-typing",function(t,e){frappe.socketio.form_stopped_typing(e.doctype,e.docname)}),window.addEventListener("beforeunload",()=>{!cur_frm||!cur_frm.doc||cur_frm.is_new()||frappe.socketio.doc_close(cur_frm.doctype,cur_frm.docname)})}},get_host:function(r=3e3){var t=window.location.origin;if(window.dev_server){var e=t.split(":");r=frappe.boot.socketio_port||r.toString()||"3000",e.length>2&&(t=e[0]+":"+e[1]),t=t+":"+r}return t},subscribe:function(r,t){frappe.socketio.socket.emit("task_subscribe",r),frappe.socketio.socket.emit("progress_subscribe",r),frappe.socketio.open_tasks[r]=t},task_subscribe:function(r){frappe.socketio.socket.emit("task_subscribe",r)},task_unsubscribe:function(r){frappe.socketio.socket.emit("task_unsubscribe",r)},doctype_subscribe:function(r){frappe.socketio.socket.emit("doctype_subscribe",r)},doctype_unsubscribe:function(r){frappe.socketio.socket.emit("doctype_unsubscribe",r)},doc_subscribe:function(r,t){if(frappe.flags.doc_subscribe){console.log("throttled");return}frappe.flags.doc_subscribe=!0,setTimeout(function(){frappe.flags.doc_subscribe=!1},1e3),frappe.socketio.socket.emit("doc_subscribe",r,t),frappe.socketio.open_docs.push({doctype:r,docname:t})},doc_unsubscribe:function(r,t){frappe.socketio.socket.emit("doc_unsubscribe",r,t),frappe.socketio.open_docs=$.filter(frappe.socketio.open_docs,function(e){return e.doctype===r&&e.name===t?null:e})},doc_open:function(r,t){(!frappe.socketio.last_doc||frappe.socketio.last_doc[0]!=r||frappe.socketio.last_doc[1]!=t)&&(frappe.socketio.socket.emit("doc_open",r,t),frappe.socketio.last_doc&&frappe.socketio.doc_close(frappe.socketio.last_doc[0],frappe.socketio.last_doc[1])),frappe.socketio.last_doc=[r,t]},doc_close:function(r,t){frappe.socketio.socket.emit("doc_close",r,t),frappe.socketio.socket.emit("doc_typing_stopped",r,t)},form_typing:function(r,t){frappe.socketio.socket.emit("doc_typing",r,t)},form_stopped_typing:function(r,t){frappe.socketio.socket.emit("doc_typing_stopped",r,t)},setup_listeners:function(){frappe.socketio.socket.on("task_status_change",function(r){frappe.socketio.process_response(r,r.status.toLowerCase())}),frappe.socketio.socket.on("task_progress",function(r){frappe.socketio.process_response(r,"progress")})},setup_reconnect:function(){frappe.socketio.socket.on("connect",function(){setTimeout(function(){$.each(frappe.socketio.open_tasks,function(r,t){frappe.socketio.subscribe(r,t)}),$.each(frappe.socketio.open_docs,function(r){locals[r.doctype]&&locals[r.doctype][r.name]&&frappe.socketio.doc_subscribe(r.doctype,r.name)}),cur_frm&&cur_frm.doc&&!cur_frm.is_new()&&frappe.socketio.doc_open(cur_frm.doc.doctype,cur_frm.doc.name)},5e3)})},process_response:function(r,t){if(!!r){var e=frappe.socketio.open_tasks[r.task_id];e[t]&&e[t](r),t==="success"&&e.callback&&e.callback(r),frappe.request.cleanup(e,r),e.always&&e.always(r),r.status_code&&r.status_code>400&&e.error&&e.error(r)}}};frappe.provide("frappe.realtime");frappe.realtime.on=function(r,t){frappe.socketio.socket&&frappe.socketio.socket.on(r,t)};frappe.realtime.off=function(r,t){frappe.socketio.socket&&frappe.socketio.socket.off(r,t)};frappe.realtime.publish=function(r,t){frappe.socketio.socket&&frappe.socketio.socket.emit(r,t)};var rd=Vt(rs());var no={default:[{divisor:1e12,symbol:__("T",null,"Number system")},{divisor:1e9,symbol:__("B",null,"Number system")},{divisor:1e6,symbol:__("M",null,"Number system")},{divisor:1e3,symbol:__("K",null,"Number system")}],indian:[{divisor:1e7,symbol:__("Cr",null,"Number system")},{divisor:1e5,symbol:__("Lakh",null,"Number system")},{divisor:1e3,symbol:__("K",null,"Number system")}]};var id=Vt(td());frappe.provide("frappe.utils");Array.prototype.uniqBy||(Object.defineProperty(Array.prototype,"uniqBy",{value:function(r){var t={};return this.filter(function(e){var i=r(e);return i in t?!1:t[i]=!0})}}),Object.defineProperty(Array.prototype,"move",{value:function(r,t){this.splice(t,0,this.splice(r,1)[0])}}));Object.defineProperty(Object.prototype,"setDefault",{value:function(r,t){return r in this||(this[r]=t),this[r]},writable:!0});String.prototype.plural=function(r){let t={"(quiz)$":"$1zes","^(ox)$":"$1en","([m|l])ouse$":"$1ice","(matr|vert|ind)ix|ex$":"$1ices","(x|ch|ss|sh)$":"$1es","([^aeiouy]|qu)y$":"$1ies","(hive)$":"$1s","(?:([^f])fe|([lr])f)$":"$1$2ves","(shea|lea|loa|thie)f$":"$1ves",sis$:"ses","([ti])um$":"$1a","(tomat|potat|ech|her|vet)o$":"$1oes","(bu)s$":"$1ses","(alias)$":"$1es","(octop)us$":"$1i","(ax|test)is$":"$1es","(us)$":"$1es","([^s]+)$":"$1s"},e={"(quiz)zes$":"$1","(matr)ices$":"$1ix","(vert|ind)ices$":"$1ex","^(ox)en$":"$1","(alias)es$":"$1","(octop|vir)i$":"$1us","(cris|ax|test)es$":"$1is","(shoe)s$":"$1","(o)es$":"$1","(bus)es$":"$1","([m|l])ice$":"$1ouse","(x|ch|ss|sh)es$":"$1","(m)ovies$":"$1ovie","(s)eries$":"$1eries","([^aeiouy]|qu)ies$":"$1y","([lr])ves$":"$1f","(tive)s$":"$1","(hive)s$":"$1","(li|wi|kni)ves$":"$1fe","(shea|loa|lea|thie)ves$":"$1f","(^analy)ses$":"$1sis","((a)naly|(b)a|(d)iagno|(p)arenthe|(p)rogno|(s)ynop|(t)he)ses$":"$1$2sis","([ti])a$":"$1um","(n)ews$":"$1ews","(h|bl)ouses$":"$1ouse","(corpse)s$":"$1","(us)es$":"$1",s$:""},i={move:"moves",foot:"feet",goose:"geese",sex:"sexes",child:"children",man:"men",tooth:"teeth",person:"people"};if(["sheep","fish","deer","moose","series","species","money","rice","information","equipment"].indexOf(this.toLowerCase())>=0)return this;let o,a,s;for(o in i)if(r?(a=new RegExp(i[o]+"$","i"),s=o):(a=new RegExp(o+"$","i"),s=i[o]),a.test(this))return this.replace(a,s);let l;r?l=e:l=t;let d;for(d in l)if(a=new RegExp(d,"i"),a.test(this))return this.replace(a,l[d]);return this};Object.assign(frappe.utils,{get_random:function(r){for(var t="",e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz",i=0;i<r;i++)t+=e.charAt(Math.floor(Math.random()*e.length));return t},get_file_link:function(r){return r=cstr(r),frappe.utils.is_url(r)?r:r.indexOf("/")===-1?"files/"+r:r},replace_newlines(r){return r?r.replace(/\n/g,"<br>"):""},is_html:function(r){return!(!r||r.indexOf("<br>")==-1&&r.indexOf("<p")==-1&&r.indexOf("<img")==-1&&r.indexOf("<div")==-1&&!r.includes("<span"))},is_mac:function(){return window.navigator.platform==="MacIntel"},is_xs:function(){return $(document).width()<768},is_sm:function(){return $(document).width()<991&&$(document).width()>=768},is_md:function(){return $(document).width()<1199&&$(document).width()>=991},is_json:function(r){try{JSON.parse(r)}catch(t){return!1}return!0},parse_json:function(r){let t="";try{t=JSON.parse(r)}catch(e){return r}return t},strip_whitespace:function(r){return(r||"").replace(/<p>\s*<\/p>/g,"").replace(/<br>(\s*<br>\s*)+/g,"<br><br>")},encode_tags:function(r){var t={"&":"&amp;","<":"&lt;",">":"&gt;"};function e(i){return t[i]||i}return r.replace(/[&<>]/g,e)},strip_original_content:function(r){var t=[],e=[],i=r.indexOf("<br>")===-1?`
`:"<br>";return $.each(r.split(i),function(n,o){var a=strip(o);a&&(a.substr(0,1)===">"||a.substr(0,4)==="&gt;")?e.push(o):(t=t.concat(e),t.push(o),e=[])}),t.join(i)},escape_html:function(r){if(!r)return"";let t={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;","`":"&#x60;","=":"&#x3D;"};return String(r).replace(/[&<>"'`=/]/g,e=>t[e]||e)},unescape_html:function(r){let t={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'","&#x2F;":"/","&#x60;":"`","&#x3D;":"="};return String(r).replace(/&amp;|&lt;|&gt;|&quot;|&#39;|&#x2F;|&#x60;|&#x3D;/g,e=>t[e]||e)},html2text:function(r){return new DOMParser().parseFromString(r,"text/html").body.textContent},is_url:function(r){return r.toLowerCase().substr(0,7)=="http://"||r.toLowerCase().substr(0,8)=="https://"},to_title_case:function(r,t=!1){let e=r.toLowerCase().replace(/(?:^|[\s-/])\w/g,function(n){return n.toUpperCase()}),i=t?" ":"";return e.replace(/-|_/g,i)},toggle_blockquote:function(r){if(!r)return r;var t=$("<div></div>").html(r);return t.find("blockquote").parent("blockquote").addClass("hidden").before('<p><a class="text-muted btn btn-default toggle-blockquote" style="padding: 2px 7px 0px; line-height: 1;"> 					\u2022 \u2022 \u2022 				</a></p>'),t.html()},scroll_to:function(r,t=!0,e,i,n,o=!1){if(frappe.flags.disable_auto_scroll)return;i=i||$("html, body");let a=0;r&&(a=typeof r=="number"?r-cint(e):this.get_scroll_position(r,e)),a<0&&(a=0),a!=i.scrollTop()&&(t?i.animate({scrollTop:a}).promise().then(()=>{o&&($(r).addClass("highlight"),document.addEventListener("click",function(){$(r).removeClass("highlight")},{once:!0})),n&&n()}):i.scrollTop(a))},get_scroll_position:function(r,t){let e=$(".navbar").height()+$(".page-head:visible").height()||$(".navbar").height();return $(r).offset().top-e-cint(t)},filter_dict:function(r,t){var e=[];return typeof t=="string"?[r[t]]:($.each(r,function(i,n){for(var o in t)if($.isArray(t[o])){if(t[o][0]=="in"){if(t[o][1].indexOf(n[o])==-1)return}else if(t[o][0]=="not in"){if(t[o][1].indexOf(n[o])!=-1)return}else if(t[o][0]=="<"){if(!(n[o]<t[o]))return}else if(t[o][0]=="<="){if(!(n[o]<=t[o]))return}else if(t[o][0]==">"){if(!(n[o]>t[o]))return}else if(t[o][0]==">="&&!(n[o]>=t[o]))return}else if(n[o]!=t[o])return;e.push(n)}),e)},comma_or:function(r){return frappe.utils.comma_sep(r," "+__("or")+" ")},comma_and:function(r){return frappe.utils.comma_sep(r," "+__("and")+" ")},comma_sep:function(r,t){return r instanceof Array?r.length==0?"":r.length==1?r[0]:r.slice(0,r.length-1).join(", ")+t+r.slice(-1)[0]:r},set_footnote:function(r,t,e){return r||(r=$('<div class="text-muted footnote-area level">').appendTo(t)),e?r.html(e):(r.remove(),r=null),r},get_args_dict_from_url:function(r){var t={};return $.each(decodeURIComponent(r).split("&"),function(e,i){i=i.split("="),t[i[0]]=i[1]}),t},get_url_from_dict:function(r){return $.map(r,function(t,e){return t!==null?encodeURIComponent(e)+"="+encodeURIComponent(t):null}).join("&")||""},validate_type:function(r,t){var e;switch(t){case"phone":e=/^([0-9 +_\-,.*#()]){1,20}$/;break;case"name":e=/^[\w][\w'-]*([ \w][\w'-]+)*$/;break;case"number":e=/^-?(?:\d+|\d{1,3}(?:,\d{3})+)?(?:\.\d+)?$/;break;case"digits":e=/^\d+$/;break;case"alphanum":e=/^\w+$/;break;case"email":e=/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;break;case"url":e=/^((([A-Za-z0-9.+-]+:(?:\/\/)?)(?:[-;:&=\+\,\w]@)?[A-Za-z0-9.-]+(:[0-9]+)?|(?:www.|[-;:&=\+\$,\w]+@)[A-Za-z0-9.-]+)((?:\/[\+~%\/.\w-_]*)?\??(?:[-\+=&;%@.\w_]*)#?(?:[\w]*))?)$/i;break;case"dateIso":e=/^(\d{4})\D?(0[1-9]|1[0-2])\D?([12]\d|0[1-9]|3[01])$/;break;default:return!1}return r!==""?e.test(r):!1},guess_style:function(r,t,e){var i=t||"default",n="gray";return r&&(has_words(["Pending","Review","Medium","Not Approved"],r)?(i="warning",n="orange"):has_words(["Open","Urgent","High","Failed","Rejected","Error"],r)?(i="danger",n="red"):has_words(["Closed","Finished","Converted","Completed","Complete","Confirmed","Approved","Yes","Active","Available","Paid","Success"],r)?(i="success",n="green"):has_words(["Submitted"],r)&&(i="info",n="blue")),e?n:i},guess_colour:function(r){return frappe.utils.guess_style(r,null,!0)},get_indicator_color:function(r){return frappe.db.get_list("Workflow State",{filters:{name:r},fields:["name","style"]}).then(t=>{let e=t[0];if(!e.style)return frappe.utils.guess_colour(e.name);let i=e.style;return{Success:"green",Warning:"orange",Danger:"red",Primary:"blue"}[i]})},sort:function(r,t,e,i){if(!r||r.length<2)return r||[];var n={string:function(o,a){return cstr(o[t]).localeCompare(cstr(a[t]))},number:function(o,a){return flt(o[t])-flt(a[t])}};return e||(e=typeof r[0][t]=="string"?"string":"number"),r.sort(n[e]),i&&r.reverse(),r},unique:function(r){for(var t={},e=[],i=0,n=r.length;i<n;i++)r[i]in t||(t[r[i]]=null,e.push(r[i]));return e},remove_nulls:function(r){for(var t=[],e=0,i=r.length;e<i;e++)is_null(r[e])||t.push(r[e]);return t},all:function(r){for(var t=0,e=r.length;t<e;t++)if(!r[t])return!1;return!0},dict:function(r,t){var e=[];return $.each(t,function(i,n){var o={};$.each(r,function(a,s){o[s]=n[a]}),e.push(o)}),e},sum:function(r){return r.reduce(function(t,e){return flt(t)+flt(e)},0)},arrays_equal:function(r,t){if(!r||!t||r.length!=t.length)return!1;for(var e=0;e<r.length;e++)if($.isArray(r[e])){if(!frappe.utils.arrays_equal(r[e],t[e]))return!1}else if(r[e]!==t[e])return!1;return!0},intersection:function(r,t){var e=0,i=0,n=new Array;for(r=[].concat(r).sort(),t=[].concat(t).sort();e<r.length&&i<t.length;)r[e]<t[i]?e++:(r[e]>t[i]||(n.push(r[e]),e++),i++);return n},resize_image:function(r,t,e,i){var n=new Image;e||(e=600),i||(i=400),n.src=r.result,n.onload=function(){var o=n.width,a=n.height;o>a?o>e&&(a*=e/o,o=e):a>i&&(o*=i/a,a=i);var s=document.createElement("canvas");s.width=o,s.height=a;var l=s.getContext("2d");l.drawImage(this,0,0,o,a);var d=s.toDataURL("image/jpeg");setTimeout(function(){t(d)},10)}},csv_to_array:function(r,t){t=t||",";for(var e=new RegExp("(\\"+t+'|\\r?\\n|\\r|^)(?:"([^"]*(?:""[^"]*)*)"|([^"\\'+t+"\\r\\n]*))","gi"),i=[[]],n=null;n=e.exec(r);){var o=n[1];o.length&&o!==t&&i.push([]);var a;n[2]?a=n[2].replace(new RegExp('""',"g"),'"'):a=n[3],i[i.length-1].push(a)}return i},warn_page_name_change:function(){frappe.msgprint(__("Note: Changing the Page Name will break previous URL to this page."))},notify:function(r,t,e,i){console.log("push notifications are evil and deprecated")},set_title:function(r){frappe._original_title=r,frappe._title_prefix&&(r=frappe._title_prefix+" "+r.replace(/<[^>]*>/g,"")),document.title=r;let t=frappe.router.get_sub_path();frappe.route_titles[t]=r},set_title_prefix:function(r){frappe._title_prefix=r,frappe.utils.set_title(frappe._original_title)},is_image_file:function(r){return r?(r=r.split("?")[0],/\.(gif|jpg|jpeg|tiff|png|svg)$/i.test(r)):!1},is_video_file:function(r){return r?(r=r.split("?")[0],/\.(mov|mp4|mkv|webm)$/i.test(r)):!1},play_sound:function(r){try{if(frappe.boot.user.mute_sounds)return;var t=$("#sound-"+r)[0];t.volume=t.getAttribute("volume"),t.play()}catch(e){console.log("Cannot play sound",r,e)}},split_emails:function(r){var t=[];return r&&r.split(/[,\n](?=(?:[^"]|"[^"]*")*$)/g).forEach(function(e){e=e.trim(),e&&t.push(e)}),t},supportsES6:function(){try{return new Function("(a = 0) => a"),!0}catch(r){return!1}}(),throttle:function(r,t,e){var i,n,o,a=null,s=0;e||(e={});let l=function(){s=e.leading===!1?0:Date.now(),a=null,o=r.apply(i,n),a||(i=n=null)};return function(){var d=Date.now();!s&&e.leading===!1&&(s=d);let u=t-(d-s);return i=this,n=arguments,u<=0||u>t?(a&&(clearTimeout(a),a=null),s=d,o=r.apply(i,n),a||(i=n=null)):!a&&e.trailing!==!1&&(a=setTimeout(l,u)),o}},debounce:function(r,t,e){var i;return function(){var n=this,o=arguments,a=function(){i=null,e||r.apply(n,o)},s=e&&!i;clearTimeout(i),i=setTimeout(a,t),s&&r.apply(n,o)}},get_form_link:function(r,t,e=!1,i=null,n=null){i=i||t,t=encodeURIComponent(t);let o=`/app/${encodeURIComponent(r.toLowerCase().replace(/ /g,"-"))}/${t}`;return n&&(o+=frappe.utils.make_query_string(n)),e?`<a href="${o}">${i}</a>`:o},get_route_label(r){let t=r.split("/");return t[2]==="Report"||t[0]==="query-report"?__("{0} Report",[t[3]||t[1]]):t[0]==="List"?__("{0} List",[t[1]]):t[0]==="modules"?__("{0} Modules",[t[1]]):t[0]==="dashboard"?__("{0} Dashboard",[t[1]]):__(frappe.utils.to_title_case(t[0],!0))},report_column_total:function(r,t,e){return t.column.disable_total?"":r.length>0?t.column.fieldtype=="Percent"||e==="mean"?r.reduce((i,n)=>i+flt(n))/r.length:t.column.fieldtype=="Int"?r.reduce((i,n)=>i+cint(n)):frappe.model.is_numeric_field(t.column.fieldtype)?r.reduce((i,n)=>i+flt(n)):null:null},setup_search(r,t,e,i){let n=r.find('[data-element="search"]').show();n.focus().val("");let o=r.find(t).show();n.off("keyup").on("keyup",()=>{let a=n.val().toLowerCase();a=a.replace(/^\s+|\s+$/g,"");for(let s=0;s<o.length;s++){let l=o.eq(s).find(e),d=l.text().toLowerCase(),u="";i&&l.attr(i)&&(u=l.attr(i).toLowerCase()),d.includes(a)||u.includes(a)?o.eq(s).css("display",""):o.eq(s).css("display","none")}})},setup_timer(r,t,e){let i=t>r,n=r,o=setInterval(()=>{if(i?n++:n--,i?n>t:n<t){clearInterval(o);return}e.text(n)},1e3)},deep_equal(r,t){return(0,rd.default)(r,t)},deep_clone(r,t){return(0,id.default)(r,t)},file_name_ellipsis(r,t){let e=t*2/3,i=t-e,n=r.split("."),o=n.pop(),a=n.join(""),s=a.slice(0,e),l=a.slice(-i);return a.length>t?`${s}...${l}.${o}`:r},get_decoded_string(r){let e=r.split(",")[1],i=atob(e);try{let n=escape(i);i=decodeURIComponent(n)}catch(n){}return i},copy_to_clipboard(r){let t=()=>{frappe.show_alert({indicator:"green",message:__("Copied to clipboard.")})};if(navigator.clipboard&&window.isSecureContext)navigator.clipboard.writeText(r).then(t);else{let e=$("<textarea>");$("body").append(e),e.val(r).select(),document.execCommand("copy"),t(),e.remove()}},is_rtl(r=null){return["ar","he","fa","ps"].includes(r||frappe.boot.lang)},bind_actions_with_object(r,t){return $(r).off("click.class_actions"),$(r).on("click.class_actions","[data-action]",e=>{let i=$(e.currentTarget),n=i.data("action");t[n]&&t[n](e,i)}),r},eval(r,t={}){let e=Object.keys(t),i=Object.values(t);r=`let out = ${r}; return out`;try{return new Function(...e,r)(...i)}catch(n){throw console.log("Error evaluating the following expression:"),console.error(r),n}},get_browser(){let r=navigator.userAgent,t,e=r.match(/(opera|chrome|safari|firefox|msie|trident(?=\/))\/?\s*(\d+)/i)||[];return/trident/i.test(e[1])?(t=/\brv[ :]+(\d+)/g.exec(r)||[],{name:"IE",version:t[1]||""}):e[1]==="Chrome"&&(t=r.match(/\bOPR|Edge\/(\d+)/),t!=null)?{name:"Opera",version:t[1]}:(e=e[2]?[e[1],e[2]]:[navigator.appName,navigator.appVersion,"-?"],(t=r.match(/version\/(\d+)/i))!=null&&e.splice(1,1,t[1]),{name:e[0],version:e[1]})},get_formatted_duration(r,t=null){let e="";if(t||(t={hide_days:0,hide_seconds:0}),r){let i=frappe.utils.seconds_to_duration(r,t);i.days&&(e+=i.days+__("d",null,"Days (Field: Duration)")),i.hours&&(e+=e.length?" ":"",e+=i.hours+__("h",null,"Hours (Field: Duration)")),i.minutes&&(e+=e.length?" ":"",e+=i.minutes+__("m",null,"Minutes (Field: Duration)")),i.seconds&&(e+=e.length?" ":"",e+=i.seconds+__("s",null,"Seconds (Field: Duration)"))}return e},seconds_to_duration(r,t){let e=r>0?Math.floor:Math.ceil,i={days:e(r/86400),hours:e(r%86400/3600),minutes:e(r%3600/60),seconds:e(r%60)};return t&&t.hide_days&&(i.hours=e(r/3600),i.days=0),i},duration_to_seconds(r=0,t=0,e=0,i=0){let n=0;return r&&(n+=r*24*60*60),t&&(n+=t*60*60),e&&(n+=e*60),i&&(n+=i),n},get_duration_options:function(r){return{hide_days:r.hide_days,hide_seconds:r.hide_seconds}},get_number_system:function(r){return["Bangladesh","India","Myanmar","Pakistan"].includes(r)?no.indian:no.default},map_defaults:{center:[19.08,72.8961],zoom:13,tiles:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",options:{attribution:'&copy; <a href="http://osm.org/copyright">OpenStreetMap</a> contributors'}},icon(r,t="sm",e="",i="",n=""){let o="";return typeof t=="object"?i+=` width: ${t.width}; height: ${t.height}`:o=`icon-${t}`,`<svg class="icon ${n} ${o}" style="${i}">
			<use class="${e}" href="#icon-${r}"></use>
		</svg>`},flag(r){return`<img
		src="https://flagcdn.com/${r}.svg"
		width="20" height="15">`},make_chart(r,t={}){let e={type:"bar",colors:["light-blue"],axisOptions:{xIsSeries:1,shortenYAxisNumbers:1,xAxisMode:"tick",numberFormatter:frappe.utils.format_chart_axis_number}};for(let i in t)typeof e[i]=="object"&&typeof t[i]=="object"?e[i]=Object.assign(e[i],t[i]):e[i]=t[i];return new frappe.Chart(r,e)},format_chart_axis_number(r,t){let e=frappe.sys_defaults.country;return frappe.utils.shorten_number(r,t||e,3)},generate_route(r){let t=r.type.toLowerCase();t==="doctype"&&(r.doctype=r.name);let e="";if(r.route)e=r.route;else if(r.link)e=strip(r.link,"#");else if(t==="doctype"){let i=frappe.router.slug(r.doctype);if(frappe.model.is_single(r.doctype))e=i;else switch(r.doc_view){case"List":r.filters&&(frappe.route_options=r.filters),e=`${i}/view/list`;break;case"Tree":e=`${i}/view/tree`;break;case"Report Builder":e=`${i}/view/report`;break;case"Dashboard":e=`${i}/view/dashboard`;break;case"New":e=`${i}/new`;break;case"Calendar":e=`${i}/view/calendar/default`;break;case"Kanban":e=`${i}/view/kanban`;break;default:e=i}}else t==="report"?r.is_query_report?e="query-report/"+r.name:r.doctype?e=frappe.router.slug(r.doctype)+"/view/report/"+r.name:e="/report/"+r.name:t==="page"?e=r.name:t==="dashboard"&&(e=`dashboard-view/${r.name}`);return r.route_options&&(e+="?"+$.map(r.route_options,function(i,n){return encodeURIComponent(n)+"="+encodeURIComponent(i)}).join("&")),`/app/${e}`},shorten_number:function(r,t,e=4,i=2){if(String(r).match(/\d/g).length<e)return r.toString();let o=this.get_number_system(t),a=Math.abs(Math.round(r));for(let s of o)if(a>=s.divisor){let l=r/s.divisor;return l=this.get_number_of_decimals(l)>i?l.toFixed(i):l,l+" "+s.symbol}return r.toFixed(i)},get_number_of_decimals:function(r){return Math.floor(r)===r?0:r.toString().split(".")[1].length||0},build_summary_item(r){if(r.type=="separator")return $(`<div class="summary-separator">
				<div class="summary-value ${r.color?r.color.toLowerCase():"text-muted"}">${r.value}</div>
			</div>`);let t={fieldtype:r.datatype},e=null;r.datatype=="Currency"&&(t.options="currency",e={currency:r.currency});let i=frappe.format(r.value,t,{only_value:!0},e),n=r.indicator?r.indicator.toLowerCase():r.color?r.color.toLowerCase():"";return $(`<div class="summary-item">
			<span class="summary-label">${__(r.label)}</span>
			<div class="summary-value ${n}">${i}</div>
		</div>`)},print(r,t,e,i,n){if(!window.open(frappe.urllib.get_full_url("/printview?doctype="+encodeURIComponent(r)+"&name="+encodeURIComponent(t)+"&trigger_print=1&format="+encodeURIComponent(e)+"&no_letterhead="+(i?"0":"1")+"&letterhead="+encodeURIComponent(i)+(n?"&_lang="+n:"")))){frappe.msgprint(__("Please enable pop-ups"));return}},get_clipboard_data(r){let t=r;return(t.clipboardData||window.clipboardData||t.originalEvent.clipboardData).getData("Text")},add_custom_button(r,t,e="",i="",n,o,a){n||(n="btn-secondary");let s=$(`<button class="btn ${n} btn-xs ${e}" title="${i}">${r}</button>`);s.click(l=>{l.stopPropagation(),t&&t(l)}),!a&&s.appendTo(o),a&&o.prepend(s)},sleep(r){return new Promise(t=>setTimeout(t,r))},parse_array(r){if(r&&r.length!==0)return r},range(r,t){t||(t=r,r=0);let e=[];for(let i=r;i<t;i++)e.push(i);return e},get_link_title(r,t){if(!(!r||!t||!frappe._link_titles))return frappe._link_titles[r+"::"+t]},add_link_title(r,t,e){!r||!t||(frappe._link_titles||(frappe._link_titles={}),frappe._link_titles[r+"::"+t]=e)},fetch_link_title(r,t){try{return frappe.xcall("frappe.desk.search.get_link_title",{doctype:r,docname:t}).then(e=>(frappe.utils.add_link_title(r,t,e),e))}catch(e){return console.log("Error while fetching link title."),console.log(e),Promise.resolve(t)}},only_allow_num_decimal(r){r.on("input",t=>{let e=$(t.target);e.val(e.val().replace(/[^0-9.]/g,"")),(t.which!=46||e.val().indexOf(".")!=-1)&&(t.which<48||t.which>57)&&t.preventDefault()})},string_to_boolean(r){switch(r.toLowerCase().trim()){case"t":case"true":case"y":case"yes":case"1":return!0;case"f":case"false":case"n":case"no":case"0":case null:return!1;default:return r}},get_filter_as_json(r){let t=null;return r.length&&(t={},r.forEach(e=>{t[e[1]]=[e[2],e[3]]}),t=JSON.stringify(t)),t},get_filter_from_json(r,t){if(r){if(!r.length)return[];let e=new Function(`return ${r}`)();return t?Object.keys(e).map(i=>{let n=e[i];return[t,i,n[0],n[1],!1]}):e||[]}},load_video_player(){return frappe.require("video_player.bundle.js")},is_current_user(r){return r===frappe.session.user},debug:{watch_property(r,t,e=console.trace){if(!frappe.boot.developer_mode)return;console.warn("Adding property watcher, make sure to remove it after debugging.");let i="$_"+t+"_$";r[i]=r[t],Object.defineProperty(r,t,{get:function(){return r[i]},set:function(n){e(),r[i]=n}})}}});frappe.provide("frappe.utils");var pw={init(){this.jq=jQuery({})},trigger(r,t){!this.jq&&this.init(),this.jq.trigger(r,t)},once(r,t){!this.jq&&this.init(),this.jq.one(r,(e,i)=>t(i))},on(r,t){!this.jq&&this.init(),this.jq.bind(r,(e,i)=>t(i))},off(r,t){!this.jq&&this.init(),this.jq.unbind(r,(e,i)=>t(i))}};frappe.utils.make_event_emitter=function(r){return Object.assign(r,pw),r};frappe.provide("frappe.views");frappe.re_route={"#login":""};frappe.route_titles={};frappe.route_flags={};frappe.route_history=[];frappe.view_factory={};frappe.view_factories=[];frappe.route_options=null;frappe.open_in_new_tab=!1;frappe.route_hooks={};$(window).on("hashchange",function(r){if(window.location.hash&&!frappe.router.is_app_route(r.currentTarget.pathname)){let t=frappe.router.get_sub_path(window.location.hash);return frappe.router.push_state(t),!1}});window.addEventListener("popstate",r=>(frappe.router.route(),r.preventDefault(),!1));$("body").on("click","a",function(r){let t=o=>(r.preventDefault(),frappe.set_route(o),!1),e=r.currentTarget,i=e.getAttribute("href"),n=e.hostname===window.location.hostname;if(!(e.getAttribute("onclick")||r.ctrlKey||r.metaKey||i==="#")){if(i==="")return t("/app");if(i&&i.startsWith("#"))return t(e.hash);if(n&&frappe.router.is_app_route(e.pathname)){if(e.search){frappe.route_options={};let o=new URLSearchParams(e.search);for(let[a,s]of o)frappe.route_options[a]=s}return t(e.pathname+e.hash)}}});frappe.router={current_route:null,routes:{},factory_views:["form","list","report","tree","print","dashboard"],list_views:["list","kanban","report","calendar","tree","gantt","dashboard","image","inbox","map"],list_views_route:{list:"List",kanban:"Kanban",report:"Report",calendar:"Calendar",tree:"Tree",gantt:"Gantt",dashboard:"Dashboard",image:"Image",inbox:"Inbox",file:"Home",map:"Map"},layout_mapped:{},is_app_route(r){if(r.substr(0,1)==="/"&&(r=r.substr(1)),r=r.split("/"),r[0])return r[0]==="app"},setup(){for(let r of frappe.boot.user.can_read)this.routes[this.slug(r)]={doctype:r};if(frappe.boot.doctype_layouts)for(let r of frappe.boot.doctype_layouts)this.routes[this.slug(r.name)]={doctype:r.document_type,doctype_layout:r.name}},async route(){if(!frappe.app)return;let r=this.get_sub_path();this.re_route(r)||(this.current_sub_path=r,this.current_route=await this.parse(),this.set_history(r),this.render(),this.set_title(r),this.trigger("change"))},async parse(r){return r=this.get_sub_path_string(r).split("/"),r?(r=$.map(r,this.decode_component),this.set_route_options_from_url(),await this.convert_to_standard_route(r)):[]},async convert_to_standard_route(r){let t=r[1]&&`${r[1]}-${frappe.user.name.toLowerCase()}`;return frappe.workspaces[r[0]]?r=["Workspaces",frappe.workspaces[r[0]].title]:r[0]=="private"&&frappe.workspaces[t]?r=["Workspaces","private",frappe.workspaces[t].title]:this.routes[r[0]]&&(r=await this.set_doctype_route(r)),r},doctype_route_exist(r){return r=this.get_sub_path_string(r).split("/"),this.routes[r[0]]},set_doctype_route(r){let t=this.routes[r[0]];return frappe.model.with_doctype(t.doctype).then(()=>{let e=frappe.get_meta(t.doctype);if(r[1]&&r[1]==="view"&&r[2])r=this.get_standard_route_for_list(r,t,e.force_re_route_to_default_view&&e.default_view?e.default_view:null);else if(r[1]&&r[1]!=="view"){let i=r[1];r.length>2&&(i=r.slice(1).join("/")),r=["Form",t.doctype,i]}else frappe.model.is_single(t.doctype)?r=["Form",t.doctype,t.doctype]:e.default_view?r=["List",t.doctype,this.list_views_route[e.default_view.toLowerCase()]]:r=["List",t.doctype,"List"];return this.doctype_layout=t.doctype_layout,r})},get_standard_route_for_list(r,t,e){let i,n=e||r[2]||"";if(n.toLowerCase()==="tree")i=["Tree",t.doctype];else{let o=this.list_views_route[n.toLowerCase()];r[2].toLowerCase()!==o.toLowerCase()&&(frappe.route_flags.replace_route=!0,r[2]=n.toLowerCase(),this.set_route(r)),i=["List",t.doctype,this.list_views_route[n.toLowerCase()]],r[3]&&i.push(...r.slice(3,r.length))}return i},set_history(){frappe.route_history.push(this.current_route),frappe.ui.hide_open_dialog()},render(){this.current_route[0]?this.render_page():frappe.views.pageview.show("")},render_page(){let r=this.current_route,t=frappe.utils.to_title_case(r[0]);if(r[1]&&frappe.views[t+"Factory"])r[0]=t,frappe.view_factory[t]||(frappe.view_factory[t]=new frappe.views[t+"Factory"]),frappe.view_factory[t].show();else{let e=frappe.utils.xss_sanitise(r[0]);frappe.views.pageview&&frappe.views.pageview.show(e)}},re_route(r){if(frappe.re_route[r]!==void 0){let t=this.get_sub_path(frappe.re_route[r]);return t===this.current_sub_path?window.history.back():frappe.set_route(t),!0}},set_title(r){frappe.route_titles[r]&&frappe.utils.set_title(frappe.route_titles[r])},set_route(){let r=Array.from(arguments);return new Promise(t=>{r=this.get_route_from_arguments(r),r=this.convert_from_standard_route(r);let e=this.make_url(r);frappe.open_in_new_tab?(localStorage.route_options=JSON.stringify(frappe.route_options),window.open(e,"_blank"),frappe.open_in_new_tab=!1):this.push_state(e),setTimeout(()=>{frappe.after_ajax&&frappe.after_ajax(()=>{t()})},100)}).finally(()=>frappe.route_flags={})},get_route_from_arguments(r){return r.length===1&&$.isArray(r[0])&&(r=r[0]),r.length===1&&r[0]&&r[0].includes("/")&&(r=$.map(r[0].split("/"),this.decode_component)),r&&r[0]==""&&r.shift(),r&&["desk","app"].includes(r[0])&&r.shift(),r},convert_from_standard_route(r){let t=r[0]?r[0].toLowerCase():"",e=r;return t==="list"?r[2]&&r[2]!=="list"&&!$.isPlainObject(r[2])?(e=[this.slug(r[1]),"view",r[2].toLowerCase()],r[3]&&e.push(...r.slice(3,r.length))):($.isPlainObject(r[2])&&(frappe.route_options=r[2]),e=[this.slug(r[1])]):t==="form"?(e=[this.slug(r[1])],r[2]&&e.push(r[2])):t==="tree"&&(e=[this.slug(r[1]),"view","tree"]),e},slug_parts(r){return r[0]&&this.factory_views.includes(r[0].toLowerCase())&&(r[0]=r[0].toLowerCase(),r[1]=this.slug(r[1])),r},make_url(r){let t=$.map(r,function(n){return $.isPlainObject(n)?(frappe.route_options=n,null):encodeURIComponent(String(n))}).join("/"),i=frappe.workspaces[`home-${frappe.user.name.toLowerCase()}`]?"private/home":frappe.workspaces.home?"home":Object.keys(frappe.workspaces)[0];return"/app/"+(t||i)},push_state(r){if(window.location.pathname!==r){let t=frappe.route_flags.replace_route?"replaceState":"pushState";history[t](null,null,r),this.route()}},get_sub_path_string(r){return r||(r=window.location.pathname,r.includes("app#")&&(r=window.location.hash)),this.strip_prefix(r)},strip_prefix(r){return r.substr(0,1)=="/"&&(r=r.substr(1)),r.startsWith("app/")&&(r=r.substr(4)),r=="app"&&(r=r.substr(4)),r.substr(0,1)=="/"&&(r=r.substr(1)),r.substr(0,1)=="#"&&(r=r.substr(1)),r.substr(0,1)=="!"&&(r=r.substr(1)),r},get_sub_path(r){var t=this.get_sub_path_string(r);return r=$.map(t.split("/"),this.decode_component).join("/"),r},set_route_options_from_url(){let r=window.location.search;frappe.route_options||(frappe.route_options={}),localStorage.getItem("route_options")&&(frappe.route_options=JSON.parse(localStorage.getItem("route_options")),localStorage.removeItem("route_options"));let t=new URLSearchParams(r);for(let[e,i]of t)frappe.route_options[e]=i},decode_component(r){try{return decodeURIComponent(r)}catch(t){if(t instanceof URIError)return r;throw t}},slug(r){return r.toLowerCase().replace(/ /g,"-")}};frappe.get_route=()=>frappe.router.current_route;frappe.get_route_str=()=>frappe.router.current_route.join("/");frappe.set_route=function(){return frappe.router.set_route.apply(frappe.router,arguments)};frappe.get_prev_route=function(){return frappe.route_history&&frappe.route_history.length>1?frappe.route_history[frappe.route_history.length-2]:[]};frappe.set_re_route=function(){var r=frappe.router.get_sub_path();frappe.set_route.apply(null,arguments),frappe.re_route[r]=frappe.router.get_sub_path()};frappe.has_route_options=function(){return Boolean(Object.keys(frappe.route_options||{}).length)};frappe.utils.make_event_emitter(frappe.router);frappe.route_history_queue=[];var hw=["Form","social","setup-wizard","recorder"],_w=frappe.utils.debounce(()=>{if(frappe.session.user==="Guest")return;let r=frappe.route_history_queue;!r.length||(frappe.route_history_queue=[],frappe.xcall("frappe.desk.doctype.route_history.route_history.deferred_insert",{routes:r}).catch(()=>{frappe.route_history_queue.concat(r)}))},1e4);frappe.router.on("change",()=>{let r=frappe.get_route();gw(r)&&(frappe.route_history_queue.push({creation:frappe.datetime.now_datetime(),route:frappe.get_route_str()}),_w())});function gw(r){return r[1]?!(r[0]==="List"&&!r[2]||hw.includes(r[0])):!1}frappe.defaults={get_user_default:function(r){let t=frappe.boot.user.defaults,e=t[r];if(!e&&frappe.defaults.is_a_user_permission_key(r)&&(e=t[frappe.model.scrub(r)],user_default=this.get_user_permission_default(r,t),user_default&&(e=user_default)),$.isArray(e)&&(e=e[0]),!!frappe.defaults.in_user_permission(r,e))return e},get_user_permission_default:function(r,t){let e=this.get_user_permissions(),i=null;return e[r]&&(e[r].forEach(n=>{t[r]==n.doc&&(i=n.doc)}),e[r].forEach(n=>{n.is_default&&(i=n.doc)})),i},get_user_defaults:function(r){var t=frappe.boot.user.defaults,e=t[r];return frappe.defaults.is_a_user_permission_key(r)&&(e&&$.isArray(e)&&e.length===1?e=e[0]:e=t[r]||t[frappe.model.scrub(r)]),$.isArray(e)||(e=[e]),e.filter(i=>{if(frappe.defaults.in_user_permission(r,i))return i}),e},get_global_default:function(r){var t=frappe.sys_defaults[r];return $.isArray(t)&&(t=t[0]),t},get_global_defaults:function(r){var t=frappe.sys_defaults[r];return $.isArray(t)||(t=[t]),t},set_user_default_local:function(r,t){frappe.boot.user.defaults[r]=t},get_default:function(r){var t=frappe.boot.user.defaults,e=t[r];if(frappe.defaults.is_a_user_permission_key(r)&&(e&&$.isArray(e)&&e.length===1?e=e[0]:e=t[frappe.model.scrub(r)]),!!frappe.defaults.in_user_permission(r,e)&&e)try{return JSON.parse(e)}catch(i){return e}},is_a_user_permission_key:function(r){return r.indexOf(":")===-1&&r!==frappe.model.scrub(r)},in_user_permission:function(r,t){let e=this.get_user_permissions()[frappe.model.unscrub(r)];return e&&e.length?e.some(n=>n.doc===t):!0},get_user_permissions:function(){return this._user_permissions||{}},update_user_permissions:function(){let r="frappe.core.doctype.user_permission.user_permission.get_user_permissions";frappe.call(r).then(t=>{t.message&&(this._user_permissions=Object.assign({},t.message))})}};frappe.RoleEditor=class{constructor(r,t,e){this.frm=t,this.wrapper=r,this.disable=e;let i=this.frm.doc.roles.map(o=>o.role);this.multicheck=frappe.ui.form.make_control({parent:r,df:{fieldname:"roles",fieldtype:"MultiCheck",select_all:!0,columns:3,get_data:()=>frappe.xcall("frappe.core.doctype.user.user.get_all_roles").then(o=>o.map(a=>({label:__(a),value:a,checked:i.includes(a)}))),on_change:()=>{this.set_roles_in_table(),this.frm.dirty()}},render_input:!0});let n=this.multicheck.make_checkboxes;this.multicheck.make_checkboxes=()=>{n.call(this.multicheck),this.multicheck.$wrapper.find(".label-area").click(o=>{let a=$(o.target).data("unit");a&&this.show_permissions(a),o.preventDefault()})}}set_enable_disable(){$(this.wrapper).find('input[type="checkbox"]').attr("disabled",!!this.disable)}show_permissions(r){return this.perm_dialog||this.make_perm_dialog(),$(this.perm_dialog.body).empty(),frappe.xcall("frappe.core.doctype.user.user.get_perm_info",{role:r}).then(t=>{let e=$(this.perm_dialog.body);t.length?(e.append(`
						<table class="user-perm">
							<thead>
								<tr>
									<th> ${__("Document Type")} </th>
									<th> ${__("Level")} </th>
									${frappe.perm.rights.map(i=>`<th> ${__(frappe.unscrub(i))}</th>`).join("")}
								</tr>
							</thead>
							<tbody></tbody>
						</table>
					`),t.forEach(i=>{e.find("tbody").append(`
							<tr>
								<td>${__(i.parent)}</td>
								<td>${i.permlevel}</td>
								${frappe.perm.rights.map(n=>`<td class="text-muted bold">${i[n]?frappe.utils.icon("check","xs"):"-"}</td>`).join("")}
							</tr>
						`)})):e.append(`<div class="text-muted text-center padding">
						${__("{0} role does not have permission on any doctype",[__(r)])}
					</div>`),this.perm_dialog.set_title(__(r)),this.perm_dialog.show()})}make_perm_dialog(){this.perm_dialog=new frappe.ui.Dialog({title:__("Role Permissions")}),this.perm_dialog.$wrapper.find(".modal-dialog").css("width","auto").css("max-width","1200px"),this.perm_dialog.$wrapper.find(".modal-body").css("overflow","overlay")}show(){this.reset(),this.set_enable_disable()}reset(){let r=(this.frm.doc.roles||[]).map(t=>t.role);this.multicheck.selected_options=r,this.multicheck.refresh_input()}set_roles_in_table(){let r=this.frm.doc.roles||[],t=this.multicheck.get_checked_options();r.map(e=>{t.includes(e.role)||frappe.model.clear_doc(e.doctype,e.name)}),t.map(e=>{if(!r.find(i=>i.role===e)){let i=frappe.model.add_child(this.frm.doc,"Has Role","roles");i.role=e}})}get_roles(){return{checked_roles:this.multicheck.get_checked_options(),unchecked_roles:this.multicheck.get_unchecked_options()}}};frappe.ModuleEditor=class{constructor(t,e){this.frm=t,this.wrapper=e;let i=this.frm.doc.block_modules.map(n=>n.module);this.multicheck=frappe.ui.form.make_control({parent:e,df:{fieldname:"block_modules",fieldtype:"MultiCheck",select_all:!0,columns:3,get_data:()=>this.frm.doc.__onload.all_modules.map(n=>({label:__(n),value:n,checked:!i.includes(n)})),on_change:()=>{this.set_modules_in_table(),this.frm.dirty()}},render_input:!0})}show(){let t=this.frm.doc.block_modules.map(i=>i.module),e=this.frm.doc.__onload.all_modules;this.multicheck.selected_options=e.filter(i=>!t.includes(i)),this.multicheck.refresh_input()}set_modules_in_table(){let t=this.frm.doc.block_modules||[],e=this.multicheck.get_unchecked_options();t.map(i=>{e.includes(i.module)||frappe.model.clear_doc(i.doctype,i.name)}),e.map(i=>{if(!t.find(n=>n.module===i)){let n=frappe.model.add_child(this.frm.doc,"Block Module","block_modules");n.module=i}})}};frappe.template={compiled:{},debug:{}};frappe.template.compile=function(r,t){var e=t||r;if(!frappe.template.compiled[e]){let o=function(a,s,l,d,u){var h=frappe.utils.get_random(3),p=frappe.utils.get_random(3);return"{% for (var "+h+"=0, "+p+"="+l+".length; "+h+"<"+p+"; "+h+"++) { var "+s+" = "+l+"["+h+"]; "+s+"._index = "+h+"; %}"};var n=o;r.indexOf("'")!==-1&&r.replace(/'/g,"\\'"),r=r.replace(/{{/g,"{%=").replace(/}}/g,"%}"),r=r.replace(/{%\s?if\s?\s?not\s?([^\(][^%{]+)\s?%}/g,"{% if (! $1) { %}"),r=r.replace(/{%\s?if\s?([^\(][^%{]+)\s?%}/g,"{% if ($1) { %}"),r=r.replace(/{%\s?for\s([a-z._]+)\sin\s([a-z._]+)\s?%}/g,o),r=r.replace(/{%\s?endif\s?%}/g,"{% }; %}"),r=r.replace(/{%\s?else\s?%}/g,"{% } else { %}"),r=r.replace(/{%\s?endfor\s?%}/g,"{% }; %}");var i=`var _p=[],print=function(){_p.push.apply(_p,arguments)};with(obj){
_p.push('`+r.replace(/[\r\t\n]/g," ").split("{%").join("	").replace(/((^|%})[^\t]*)'/g,"$1\r").replace(/\t=(.*?)%}/g,"',$1,'").split("	").join(`');
`).split("%}").join(`
_p.push('`).split("\r").join("\\'")+"');}return _p.join('');";frappe.template.debug[t]=i;try{frappe.template.compiled[e]=new Function("obj",i)}catch(a){console.log("Error in Template:"),console.log(i),a.lineNumber&&(console.log("Error in Line "+a.lineNumber+", Col "+a.columnNumber+":"),console.log(i.split(`
`)[a.lineNumber-1]))}}return frappe.template.compiled[e]};frappe.render=function(r,t,e){return frappe.template.compile(r,e)(t)};frappe.render_template=function(r,t){if(r.indexOf(" ")!==-1)var e=r;else var e=frappe.templates[r];return t===void 0&&(t={}),e||frappe.throw(`Template <b>${r}</b> not found.`),frappe.render(e,t,r)};frappe.render_grid=function(r){r.grid&&(r.columns=r.grid.getColumns(),r.data=r.grid.getData().getItems()),r.print_settings&&r.print_settings.orientation&&r.print_settings.orientation.toLowerCase()==="landscape"&&(r.landscape=!0),r.landscape==null&&(r.columns&&r.columns.length>10?r.landscape=!0:r.landscape=!1),r.content||(r.content=frappe.render_template(r.template||"print_grid",r)),r.base_url=frappe.urllib.get_base_url(),r.print_css=frappe.boot.print_css,r.lang=r.lang||frappe.boot.lang,r.layout_direction=r.layout_direction||frappe.utils.is_rtl()?"rtl":"ltr";var t=frappe.render_template("print_template",r),e=window.open();e||frappe.msgprint(__("Please enable pop-ups in your browser")),e.document.write(t),e.document.close()},frappe.render_tree=function(r){r.base_url=frappe.urllib.get_base_url(),r.landscape=!1,r.print_css=frappe.boot.print_css,r.print_format_css_path=frappe.assets.bundled_asset("print_format.bundle.css");var t=frappe.render_template("print_tree",r),e=window.open();e||frappe.msgprint(__("Please enable pop-ups in your browser")),e.document.write(t),e.document.close()};frappe.render_pdf=function(r,t={}){var e=new FormData;e.append("html",r),t.orientation&&e.append("orientation",t.orientation);var i=new Blob([],{type:"text/xml"});e.append("blob",i);var n=new XMLHttpRequest;n.open("POST","/api/method/frappe.utils.print_format.report_to_pdf"),n.setRequestHeader("X-Frappe-CSRF-Token",frappe.csrf_token),n.responseType="arraybuffer",n.onload=function(o){if(this.status===200){var a=new Blob([o.currentTarget.response],{type:"application/pdf"}),s=URL.createObjectURL(a);let l=document.createElement("a");document.body.appendChild(l),l.style="display: none",l.href=s,l.download=t.report_name||"report.pdf",l.click(),window.URL.revokeObjectURL(s)}},n.send(e)};frappe.templates.page=`<div class="page-head flex">
	<div class="container">
		<div class="row flex align-center page-head-content justify-between">
			<div class="col-md-4 col-sm-6 col-xs-8 page-title">
				<!-- <div class="title-image hide hidden-md hidden-lg"></div> -->
				<!-- title -->
				<span class="sidebar-toggle-btn">
					<svg class="icon icon-md sidebar-toggle-placeholder">
						<use href="#icon-menu"></use>
					</svg>
					<span class="sidebar-toggle-icon">
						<svg class="icon icon-md">
							<use href="#icon-sidebar-collapse">
							</use>
						</svg>
					</span>
				</span>
				<div class="flex fill-width title-area">
					<div>
						<div class="flex">
							<h3 class="ellipsis title-text"></h3>
							<span class="indicator-pill whitespace-nowrap"></span>
						</div>
						<div class="ellipsis sub-heading hide text-muted"></div>
					</div>
					<button class="btn btn-default more-button hide">
						<svg class="icon icon-sm">
							<use href="#icon-dot-horizontal">
							</use>
						</svg>
					</button>
				</div>
			</div>
			<div class="flex col page-actions justify-content-end">
				<!-- buttons -->
				<div class="custom-actions hide hidden-xs hidden-md"></div>
				<div class="standard-actions flex">
					<span class="page-icon-group hide hidden-xs hidden-sm"></span>
					<div class="menu-btn-group hide">
						<button type="button" class="btn btn-default icon-btn" data-toggle="dropdown" aria-expanded="false">
							<span>
								<span class="menu-btn-group-label">
									<svg class="icon icon-sm">
										<use href="#icon-dot-horizontal">
										</use>
									</svg>
								</span>
							</span>
						</button>
						<ul class="dropdown-menu dropdown-menu-right" role="menu"></ul>
					</div>
					<button class="btn btn-secondary btn-default btn-sm hide"></button>
					<div class="actions-btn-group hide">
						<button type="button" class="btn btn-primary btn-sm" data-toggle="dropdown" aria-expanded="false">
							<span>
								<span class="hidden-xs actions-btn-group-label">{%= __("Actions") %}</span>
								<svg class="icon icon-xs">
									<use href="#icon-select">
									</use>
								</svg>
							</span>
						</button>
						<ul class="dropdown-menu dropdown-menu-right" role="menu">
						</ul>
					</div>
					<button class="btn btn-primary btn-sm hide primary-action"></button>
				</div>
			</div>
		</div>
	</div>
</div>
<div class="container page-body">
	<div class="page-toolbar hide">
		<div class="container">
		</div>
	</div>
	<div class="page-wrapper">
		<div class="page-content">
			<div class="workflow-button-area btn-group pull-right hide"></div>
			<div class="clearfix"></div>
		</div>
	</div>
</div>
`;frappe.ui.make_app_page=function(r){return r.parent.page=new frappe.ui.Page(r),r.parent.page};frappe.ui.pages={};frappe.ui.Page=class{constructor(t){$.extend(this,t),this.set_document_title=!0,this.buttons={},this.fields_dict={},this.views={},this.make(),frappe.ui.pages[frappe.get_route_str()]=this}make(){this.wrapper=$(this.parent),this.add_main_section(),this.setup_scroll_handler(),this.setup_sidebar_toggle()}setup_scroll_handler(){let t=0;$(window).scroll(frappe.utils.throttle(()=>{$(".page-head").toggleClass("drop-shadow",!!document.documentElement.scrollTop);let e=document.documentElement.scrollTop;e>0&&t<=e?$(".page-head").css("top","-15px"):$(".page-head").css("top","var(--navbar-height)"),t=e},500))}get_empty_state(t,e,i){return $(`<div class="page-card-container">
			<div class="page-card">
				<div class="page-card-head">
					<span class="indicator blue">
						${t}</span>
				</div>
				<p>${e}</p>
				<div>
					<button class="btn btn-primary btn-sm">${i}</button>
				</div>
			</div>
		</div>`)}load_lib(t){frappe.require(this.required_libs,t)}add_main_section(){$(frappe.render_template("page",{})).appendTo(this.wrapper),this.single_column?this.add_view("main",'<div class="row layout-main">					<div class="col-md-12 layout-main-section-wrapper">						<div class="layout-main-section"></div>						<div class="layout-footer hide"></div>					</div>				</div>'):this.add_view("main",`
				<div class="row layout-main">
					<div class="col-lg-2 layout-side-section"></div>
					<div class="col layout-main-section-wrapper">
						<div class="layout-main-section"></div>
						<div class="layout-footer hide"></div>
					</div>
				</div>
			`),this.setup_page()}setup_page(){this.$title_area=this.wrapper.find(".title-area"),this.$sub_title_area=this.wrapper.find("h6"),this.title&&this.set_title(this.title),this.icon&&this.get_main_icon(this.icon),this.body=this.main=this.wrapper.find(".layout-main-section"),this.container=this.wrapper.find(".page-body"),this.sidebar=this.wrapper.find(".layout-side-section"),this.footer=this.wrapper.find(".layout-footer"),this.indicator=this.wrapper.find(".indicator-pill"),this.page_actions=this.wrapper.find(".page-actions"),this.btn_primary=this.page_actions.find(".primary-action"),this.btn_secondary=this.page_actions.find(".btn-secondary"),this.menu=this.page_actions.find(".menu-btn-group .dropdown-menu"),this.menu_btn_group=this.page_actions.find(".menu-btn-group"),this.actions=this.page_actions.find(".actions-btn-group .dropdown-menu"),this.actions_btn_group=this.page_actions.find(".actions-btn-group"),this.standard_actions=this.page_actions.find(".standard-actions"),this.custom_actions=this.page_actions.find(".custom-actions"),this.page_form=$('<div class="page-form row hide"></div>').prependTo(this.main),this.inner_toolbar=this.custom_actions,this.icon_group=this.page_actions.find(".page-icon-group"),this.make_page&&this.make_page(),this.card_layout&&this.main.addClass("frappe-card");let t=this.menu_btn_group.find("button");t.attr("title",__("Menu")).tooltip({delay:{show:600,hide:100}}),frappe.ui.keys.get_shortcut_group(this.page_actions[0]).add(t,t.find(".menu-btn-group-label"));let e=this.actions_btn_group.find("button");frappe.ui.keys.get_shortcut_group(this.page_actions[0]).add(e,e.find(".actions-btn-group-label"))}setup_sidebar_toggle(){let t=$(".page-head").find(".sidebar-toggle-btn"),e=this.wrapper.find(".layout-side-section");this.disable_sidebar_toggle||!e.length?t.remove():(t.attr("title",__("Toggle Sidebar")).tooltip({delay:{show:600,hide:100},trigger:"hover"}),t.click(()=>{frappe.utils.is_xs()||frappe.utils.is_sm()?this.setup_overlay_sidebar():e.toggle(),$(document.body).trigger("toggleSidebar"),this.update_sidebar_icon()}))}setup_overlay_sidebar(){this.sidebar.find(".close-sidebar").remove();let t=this.sidebar.find(".overlay-sidebar").addClass("opened");$('<div class="close-sidebar">').hide().appendTo(this.sidebar).fadeIn();let e=$("html").css("overflow-y","hidden");this.sidebar.find(".close-sidebar").on("click",i=>this.close_sidebar(i)),this.sidebar.on("click","button:not(.dropdown-toggle)",i=>this.close_sidebar(i)),this.close_sidebar=()=>{e.css("overflow-y",""),this.sidebar.find("div.close-sidebar").fadeOut(()=>{t.removeClass("opened").find(".dropdown-toggle").removeClass("text-muted")})}}update_sidebar_icon(){let e=$(".page-head").find(".sidebar-toggle-btn").find(".sidebar-toggle-icon"),i=this.wrapper.find(".layout-side-section"),n=$(i).is(":visible");e.html(frappe.utils.icon(n?"sidebar-collapse":"sidebar-expand","md"))}set_indicator(t,e){this.clear_indicator().removeClass("hide").html(`<span>${t}</span>`).addClass(e)}add_action_icon(t,e,i="",n){let o=$(`
			<button class="text-muted btn btn-default ${i} icon-btn">
				${frappe.utils.icon(t)}
			</button>
		`);return o.appendTo(this.icon_group.removeClass("hide")),o.click(e),o.attr("title",__(n||frappe.unscrub(t))).tooltip({delay:{show:600,hide:100},trigger:"hover"}),o}clear_indicator(){return this.indicator.removeClass().addClass("indicator-pill whitespace-nowrap hide")}get_icon_label(t,e){let i=t,n="xs";return typeof t=="object"&&(i=t.icon,n=t.size||"xs"),`${t?frappe.utils.icon(i,n):""} <span class="hidden-xs"> ${__(e)} </span>`}set_action(t,e){let i=this;e.icon&&(e.label=this.get_icon_label(e.icon,e.label)),this.clear_action_of(t),t.removeClass("hide").prop("disabled",!1).html(e.label).on("click",function(){let o=e.click.apply(this,[t]);i.btn_disable_enable(t,o)}),e.working_label&&t.attr("data-working-label",e.working_label);let n=t.find("span");frappe.ui.keys.get_shortcut_group(this).add(t,n.length?n:t)}set_primary_action(t,e,i,n){return this.set_action(this.btn_primary,{label:t,click:e,icon:i,working_label:n}),this.btn_primary}set_secondary_action(t,e,i,n){return this.set_action(this.btn_secondary,{label:t,click:e,icon:i,working_label:n}),this.btn_secondary}clear_action_of(t){t.addClass("hide").unbind("click").removeAttr("data-working-label")}clear_primary_action(){this.clear_action_of(this.btn_primary)}clear_secondary_action(){this.clear_action_of(this.btn_secondary)}clear_actions(){this.clear_primary_action(),this.clear_secondary_action()}clear_custom_actions(){this.custom_actions.addClass("hide").empty()}clear_icons(){this.icon_group.addClass("hide").empty()}add_menu_item(t,e,i,n,o){return this.add_dropdown_item({label:t,click:e,standard:i,parent:this.menu,shortcut:n,show_parent:o})}add_custom_menu_item(t,e,i,n,o,a=null){return this.add_dropdown_item({label:e,click:i,standard:n,parent:t,shortcut:o,icon:a})}clear_menu(){this.clear_btn_group(this.menu)}show_menu(){this.menu_btn_group.removeClass("hide")}hide_menu(){this.menu_btn_group.addClass("hide")}show_icon_group(){this.icon_group.removeClass("hide")}hide_icon_group(){this.icon_group.addClass("hide")}show_actions_menu(){this.actions_btn_group.removeClass("hide")}hide_actions_menu(){this.actions_btn_group.addClass("hide")}add_action_item(t,e,i){return this.add_dropdown_item({label:t,click:e,standard:i,parent:this.actions})}add_actions_menu_item(t,e,i,n){return this.add_dropdown_item({label:t,click:e,standard:i,shortcut:n,parent:this.actions,show_parent:!1})}clear_actions_menu(){this.clear_btn_group(this.actions)}add_dropdown_item({label:t,click:e,standard:i,parent:n,shortcut:o,show_parent:a=!0,icon:s=null}){a&&n.parent().removeClass("hide hidden-xl");let l=this.is_in_group_button_dropdown(n,"li > a.grey-link > span",t);if(l)return l;let d,u="";if(s&&(u=`<span class="menu-item-icon">${frappe.utils.icon(s)}</span>`),o){let h=this.prepare_shortcut_obj(o,e,t);d=$(`
				<li>
					<a class="grey-link dropdown-item" href="#" onClick="return false;">
						${u}
						<span class="menu-item-label">${t}</span>
						<kbd class="pull-right">
							<span>${h.shortcut_label}</span>
						</kbd>
					</a>
				</li>
			`),frappe.ui.keys.add_shortcut(h)}else d=$(`
				<li>
					<a class="grey-link dropdown-item" href="#" onClick="return false;">
						${u}
						<span class="menu-item-label">${t}</span>
					</a>
				</li>
			`);return l=d.find("a").on("click",h=>((h.ctrlKey||h.metaKey)&&(frappe.open_in_new_tab=!0),e())),i?d.appendTo(n):(this.divider=n.find(".dropdown-divider"),this.divider.length||(this.divider=$('<li class="dropdown-divider user-action"></li>').prependTo(n)),d.addClass("user-action").insertBefore(this.divider)),frappe.ui.keys.get_shortcut_group(n.get(0)).add(l,l.find(".menu-item-label")),l}prepare_shortcut_obj(t,e,i){let n;return typeof t=="string"?n={shortcut:t}:n=t,frappe.utils.is_mac()?n.shortcut_label=n.shortcut.replace("Ctrl","\u2318"):n.shortcut_label=n.shortcut,n.shortcut=n.shortcut.toLowerCase(),n.action||(n.action=e),n.description||(n.description=i),n.page=this,n}is_in_group_button_dropdown(t,e,i){if(e||(e="li"),!i||!t)return!1;let n=`${e}[data-label="${encodeURIComponent(i)}"]`,o=$(t).find(n);return(o==null?void 0:o.length)>0&&o}clear_btn_group(t){t.empty(),t.parent().addClass("hide")}add_divider(){return $('<li class="dropdown-divider"></li>').appendTo(this.menu)}get_or_add_inner_group_button(t){var e=this.inner_toolbar.find(`.inner-group-button[data-label="${encodeURIComponent(t)}"]`);return e.length||(e=$(`<div class="inner-group-button" data-label="${encodeURIComponent(t)}">
					<button type="button" class="btn btn-default ellipsis" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
						${t}
						${frappe.utils.icon("select","xs")}
					</button>
					<div role="menu" class="dropdown-menu"></div>
				</div>`).appendTo(this.inner_toolbar)),e}get_inner_group_button(t){return this.inner_toolbar.find(`.inner-group-button[data-label="${encodeURIComponent(t)}"]`)}set_inner_btn_group_as_primary(t){this.get_or_add_inner_group_button(t).find("button").removeClass("btn-default").addClass("btn-primary")}btn_disable_enable(t,e){e&&e.then?(t.prop("disabled",!0),e.then(()=>{t.prop("disabled",!1)})):e&&e.always&&(t.prop("disabled",!0),e.always(()=>{t.prop("disabled",!1)}))}add_inner_button(t,e,i,n="default"){var o=this;let a=function(){let u=$(this),h=e();o.btn_disable_enable(u,h)},s=i?`${i} > ${t}`:t;if(this.add_menu_item(s,a,!1,!1,!1).parent().addClass("hidden-xl"),this.menu_btn_group.hasClass("hide")&&this.menu_btn_group.removeClass("hide").addClass("hidden-xl"),i){var d=this.get_or_add_inner_group_button(i);if($(this.inner_toolbar).removeClass("hide"),!this.is_in_group_button_dropdown(d.find(".dropdown-menu"),"a",t))return $(`<a class="dropdown-item" href="#" onclick="return false;" data-label="${encodeURIComponent(t)}">${t}</a>`).on("click",a).appendTo(d.find(".dropdown-menu"))}else{let u=this.inner_toolbar.find(`button[data-label="${encodeURIComponent(t)}"]`);return u.length==0&&(u=$(`<button data-label="${encodeURIComponent(t)}" class="btn btn-${n} ellipsis">
					${__(t)}
				</button>`),u.on("click",a),u.appendTo(this.inner_toolbar.removeClass("hide"))),u}}remove_inner_button(t,e){if(typeof t=="string"&&(t=[t]),t=t.map(n=>__(n)),e){var i=this.get_inner_group_button(__(e));i.length&&i.find(`.dropdown-item[data-label="${encodeURIComponent(t)}"]`).remove(),i.find(".dropdown-item").length===0&&i.remove()}else this.inner_toolbar.find(`button[data-label="${encodeURIComponent(t)}"]`).remove()}change_inner_button_type(t,e,i){let n;if(e){var o=this.get_inner_group_button(__(e));o.length&&(n=o.find(`.dropdown-item[data-label="${encodeURIComponent(t)}"]`))}else n=this.inner_toolbar.find(`button[data-label="${encodeURIComponent(t)}"]`);n&&n.removeClass().addClass(`btn btn-${i} ellipsis`)}add_inner_message(t){let e=$(`<span class='inner-page-message text-muted small'>${t}</div>`);return this.inner_toolbar.find(".inner-page-message").remove(),this.inner_toolbar.removeClass("hide").prepend(e),e}clear_inner_toolbar(){this.inner_toolbar.empty().addClass("hide")}add_sidebar_item(t,e,i,n){var o=this.sidebar.find(".sidebar-menu.standard-actions"),a=$("<li>"),s=$("<a>").html(t).on("click",e).appendTo(a);return i?a.insertAfter(o.find(i)):n?a.prependTo(o):a.appendTo(o),s}clear_user_actions(){this.menu.find(".user-action").remove()}get_title_area(){return this.$title_area}set_title(t,e=null,i=!0,n=""){t||(t=""),i&&(t=strip_html(t)),this.title=t,frappe.utils.set_title(n||t),e&&(t=`${frappe.utils.icon(e)} ${t}`);let o=this.$title_area.find(".title-text");o.html(t),o.attr("title",this.title)}set_title_sub(t){this.$sub_title_area.html(t).toggleClass("hide",!t)}get_main_icon(t){return this.$title_area.find(".title-icon").html('<i class="'+t+' fa-fw"></i> ').toggle(!0)}add_help_button(t){}add_button(t,e,i){i||(i={});let n=$(`<button
			class="btn ${i.btn_class||"btn-default"} ${i.btn_size||"btn-sm"} ellipsis">
				${i.icon?frappe.utils.icon(i.icon):""}
				${t}
		</button>`);return this.add_menu_item(t,e,!1).parent().addClass("hidden-xl"),n.appendTo(this.custom_actions),n.on("click",e),this.custom_actions.removeClass("hide"),n}add_custom_button_group(t,e,i){let n=`<span class="hidden-xs">
			<span class="custom-btn-group-label">${__(t)}</span>
			${frappe.utils.icon("select","xs")}
		</span>`;e&&(n=`<span class="hidden-xs">
				${frappe.utils.icon(e)}
				<span class="custom-btn-group-label">${__(t)}</span>
				${frappe.utils.icon("select","xs")}
			</span>
			<span class="visible-xs">
				${frappe.utils.icon(e)}
			</span>`);let o=$(`
			<div class="custom-btn-group">
				<button type="button" class="btn btn-default btn-sm ellipsis" data-toggle="dropdown" aria-expanded="false">
					${n}
				</button>
				<ul class="dropdown-menu" role="menu"></ul>
			</div>
		`);return i||(i=this.custom_actions),i.removeClass("hide").append(o),o.find(".dropdown-menu")}add_dropdown_button(t,e,i,n){frappe.ui.toolbar.add_dropdown_button(t,e,i,n)}add_label(t){return this.show_form(),$("<label class='col-md-1 page-only-label'>"+t+" </label>").appendTo(this.page_form)}add_select(t,e){var i=this.add_field({label:t,fieldtype:"Select"});return i.$wrapper.find("select").empty().add_options(e)}add_data(t){var e=this.add_field({label:t,fieldtype:"Data"});return e.$wrapper.find("input").attr("placeholder",t)}add_date(t,e){var i=this.add_field({label:t,fieldtype:"Date",default:e});return i.$wrapper.find("input").attr("placeholder",t)}add_check(t){return $("<div class='checkbox'><label><input type='checkbox'>"+t+"</label></div>").appendTo(this.page_form).find("input")}add_break(){this.page_form.append('<div class="clearfix invisible-xs"></div>')}add_field(t,e){this.show_form(),t.placeholder||(t.placeholder=t.label),t.input_class="input-xs";var i=frappe.ui.form.make_control({df:t,parent:e||this.page_form,only_input:t.fieldtype!="Check"});if(i.refresh(),$(i.wrapper).addClass("col-md-2").attr("title",__(t.label)).tooltip({delay:{show:600,hide:100},trigger:"hover"}),t.fieldtype!="HTML")return i.$input||i.make_input(),i.$input.attr("placeholder",__(t.label)),t.fieldtype==="Check"&&$(i.wrapper).find(":first-child").removeClass("col-md-offset-4 col-md-8"),t.fieldtype=="Button"&&($(i.wrapper).find(".page-control-label").html("&nbsp;"),i.$input.addClass("btn-xs").css({width:"100%","margin-top":"-1px"})),t.default&&i.set_input(t.default),this.fields_dict[t.fieldname||t.label]=i,i}clear_fields(){this.page_form.empty()}show_form(){this.page_form.removeClass("hide")}hide_form(){this.page_form.addClass("hide")}get_form_values(){var t={};for(let e in this.fields_dict){let i=this.fields_dict[e];t[e]=i.get_value()}return t}add_view(t,e){let i=e;return typeof e=="string"&&(i=$(e)),this.views[t]=i.appendTo($(this.wrapper).find(".page-content")),this.current_view?this.views[t].toggle(!1):this.current_view=this.views[t],this.views[t]}set_view(t){this.current_view_name!==t&&(this.current_view&&this.current_view.toggle(!1),this.current_view=this.views[t],this.previous_view_name=this.current_view_name,this.current_view_name=t,this.views[t].toggle(!0),this.wrapper.trigger("view-change"))}};frappe.provide("frappe.ui");frappe.ui.Slide=class{constructor(t=null){$.extend(this,t),this.setup()}setup(){this.$wrapper=$('<div class="slide-wrapper hidden"></div>').attr({"data-slide-id":this.id,"data-slide-name":this.name}).appendTo(this.parent)}make(){this.before_load&&this.before_load(this),this.$body=$(`<div class="slide-body">
			<div class="content text-center">
				<h1 class="title slide-title">${__(this.title)}</h1>
			</div>
			<div class="form-wrapper">
				<div class="form"></div>
				<div class="add-more text-center" style="margin-top: 5px;">
					<button class="form-more-btn hide btn btn-default btn-xs">
						<span>Add More</span>
					</button>
				</div>
			</div>
		</div>`).appendTo(this.$wrapper),this.$content=this.$body.find(".content"),this.$form=this.$body.find(".form"),this.$primary_btn=this.slides_footer.find(".primary"),this.$form_wrapper=this.$body.find(".form-wrapper"),this.image_src&&this.$content.append($(`<img src="${this.image_src}" style="margin: 20px;">`)),this.help&&this.$content.append($(`<p class="slide-help">${__(this.help)}</p>`)),this.reqd_fields=[],this.refresh(),this.made=!0}refresh(){this.render_parent_dots(),this.done?this.setup_done_state():this.setup_form()}setup_form(){this.form=new frappe.ui.FieldGroup({fields:this.get_atomic_fields(),body:this.$form[0],no_submit_on_enter:!0}),this.form.make(),this.add_more&&this.bind_more_button(),this.set_reqd_fields(),this.onload&&this.onload(this),this.set_reqd_fields()}setup_done_state(){}get_atomic_fields(){var t=JSON.parse(JSON.stringify(this.fields));return this.add_more&&(this.count=1,t=t.map((e,i)=>(e.fieldname&&(e.fieldname+="_1"),i===1&&this.mandatory_entry&&(e.reqd=1),e.static||e.label&&e.label,e))),t}set_reqd_fields(){var t=this.form.fields_dict;this.reqd_fields=[],Object.keys(t).map(e=>{t[e].df.reqd&&this.reqd_fields.push(t[e])})}set_values(t){return this.values=this.form.get_values(t),!(this.values===null||this.validate&&!this.validate())}bind_more_button(){this.$more=this.$body.find(".form-more-btn"),this.$more.removeClass("hide").on("click",()=>{this.count++;var t=JSON.parse(JSON.stringify(this.fields));this.form.add_fields(t.map(e=>(e.fieldname&&(e.fieldname+="_"+this.count),e.static||e.label&&e.label,e.reqd=0,e))),this.count===this.max_count&&this.$more.addClass("hide")})}resetup_primary_button(){this.unbind_primary_action(),this.bind_fields_to_action_btn(),this.reset_action_button_state(),this.bind_primary_action()}bind_fields_to_action_btn(){var t=this;this.reqd_fields.map(e=>{e.$wrapper.on("change input click",()=>{t.reset_action_button_state()}),e.$wrapper.on("keydown","input",i=>{i.key=="Enter"&&t.reset_action_button_state()})})}reset_action_button_state(){var t=this.reqd_fields.filter(e=>!e.get_value());t.length?this.slides_footer.find(".action").addClass("disabled"):this.slides_footer.find(".action").removeClass("disabled")}unbind_primary_action(){this.slides_footer.find(".primary").off()}bind_primary_action(){this.slides_footer.find(".primary").on("click.primary_action",()=>{this.primary_action()})}is_last_slide(){return this.id===this.parent[0].children.length-1}before_show(){}show_slide(){this.$wrapper.removeClass("hidden"),this.before_show(),this.resetup_primary_button(),this.done?this.$primary_btn.hide():(this.$body.find(".form-control").first().focus(),this.$primary_btn.show())}hide_slide(){this.$wrapper.addClass("hidden")}get_input(t){return this.form.get_input(t)}get_field(t){return this.form.get_field(t)}get_value(t){return this.form.get_value(t)}destroy(){this.$body.remove()}primary_action(){}};frappe.ui.Slides=class{constructor({parent:t=null,slides:e=[],slide_class:i=null,unidirectional:n=0,done_state:o=0,before_load:a=null,on_update:s=null}){this.parent=t,this.slides=e,this.slide_class=i,this.unidirectional=n,this.done_state=o,this.before_load=a,this.on_update=s,this.page_name="setup-wizard",this.slide_dict={},this.made_slide_ids=[],this.values={},this.make()}make(){this.$slide_progress=$("<div>").addClass("slides-progress text-center text-extra-muted").appendTo(this.parent),this.container=$("<div>").addClass("slides-wrapper").attr({tabindex:-1}).appendTo(this.parent),this.$body=$("<div>").addClass("slide-container").appendTo(this.container),this.$footer=$("<div>").addClass("slide-footer").appendTo(this.container),this.render_progress_dots(),this.make_prev_next_complete_buttons(),this.before_load&&this.before_load(this.$footer),this.setup(),this.show_slide(0)}setup(){this.slides.map((t,e)=>{this.slide_dict[e]?this.made_slide_ids.includes(e+"")&&(this.slide_dict[e].done=!1,this.slide_dict[e].destroy(),this.slide_dict[e].make()):(this.slide_dict[e]=new this.slide_class($.extend(this.slides[e],{parent:this.$body,slides_footer:this.$footer,render_parent_dots:this.render_progress_dots.bind(this),id:e})),this.unidirectional||this.slide_dict[e].make())})}refresh(t){this.render_progress_dots(),this.make_prev_next_complete_buttons(),this.show_hide_prev_next(t),this.$body.find(".form-control").first().focus()}render_progress_dots(){this.$slide_progress.empty(),!(this.slides.length<=1)&&(this.slides.map((t,e)=>{let i=$(`<div class="slide-step">
				<div class="slide-step-indicator"></div>
				<div class="slide-step-complete">${frappe.utils.icon("tick","xs")}</div>
			</div>`).attr({"data-step-id":e});this.done_state&&(this.slide_dict[e]&&this.slide_dict[e].done||t.done)&&i.addClass("step-success"),this.unidirectional&&e===this.current_id&&i.addClass("active"),this.$slide_progress.append(i)}),this.completed=0,this.slides.map((t,e)=>{this.slide_dict[e]?this.slide_dict[e].done&&this.completed++:t.done&&this.completed++}),this.on_update&&this.on_update(this.completed,this.slides.length),this.unidirectional||this.bind_progress_dots())}make_prev_next_complete_buttons(){this.$footer.empty(),$(`<div class="row">
			<div class="col-sm-4 text-left prev-div">
				<button class="prev-btn btn btn-secondary btn-sm" tabindex="0">${__("Previous",null,"Go to previous slide")}</button>
			</div>
			<div class="col-sm-8 text-right next-div">
				<button class="complete-btn btn btn-sm primary">${__("Complete Setup",null,"Finish the setup wizard")}</button>
				<button class="next-btn btn btn-default btn-sm" tabindex="0">${__("Next",null,"Go to next slide")}</button>
			</div>
		</div>`).appendTo(this.$footer),this.$prev_btn=this.$footer.find(".prev-btn").attr("tabIndex",0).on("click",()=>this.show_slide(this.current_id-1)),this.$next_btn=this.$footer.find(".next-btn").attr("tabIndex",0).on("click",()=>{this.done_state&&(this.slide&&(this.slide.done=!0),this.current_slide&&(this.current_slide.done=!0)),(!this.unidirectional||this.unidirectional&&this.current_slide.set_values())&&this.show_slide(this.current_id+1)}),this.$complete_btn=this.$footer.find(".complete-btn").attr("tabIndex",0)}bind_progress_dots(){var t=this;this.$slide_progress.find(".fa-circle").addClass("link").on("click",function(){let e=$(this).attr("data-step-id");t.show_slide(e)})}before_show_slide(){return!0}show_slide(t){t=cint(t),!(!this.before_show_slide()||this.current_slide&&this.current_id===t)&&(this.update_values(),this.current_slide&&this.current_slide.hide_slide(),this.unidirectional&&!this.slide_dict[t].made&&this.slide_dict[t].make(),this.current_id=t,this.current_slide=this.slide_dict[t],this.current_slide.show_slide(),this.refresh(t))}destroy_slide(t){this.slide_dict[t]&&this.slide_dict[t].destroy(),this.slide_dict[t]=null}on_update(t,e){}show_hide_prev_next(t){t===0?this.$prev_btn.hide():this.$prev_btn.show(),t+1===this.slides.length?this.$next_btn.hide():this.$next_btn.show()}get_values(){var t={};return $.each(this.slide_dict,function(e,i){i.values&&$.extend(t,i.values)}),t}update_values(){this.values=$.extend(this.values,this.get_values())}};frappe.find={page_primary_action:()=>$(".page-actions:visible .btn-primary"),field:(r,t)=>new Promise(e=>{let i=$(`[data-fieldname="${r}"] :input`);t?(i.val(t).trigger("change"),frappe.after_ajax(()=>{e(i)})):e(i)})};frappe.ui.IconBar=class{constructor(t,e){this.parent=t,this.buttons={},this.make(e)}make(t){this.$wrapper=$('<div class="iconbar-wrapper hide"></div>').appendTo(this.parent);for(var e=0;e<t;e++)this.get_group(e+1)}get_group(t){var e=this.$wrapper.find(".iconbar-"+t+" ul");return e.length||(e=$('<div class="iconbar iconbar-'+t+' hide"><ul></ul></div>').appendTo(this.$wrapper).find("ul")),e}add_btn(t,e,i,n){var o=this.get_group(t),a=$('<li><i class="'+e+'"></i></li>').appendTo(o).on("click",function(){return n.apply(this),!1});return a.find("i").attr("title",i).tooltip({delay:{show:600,hide:100},trigger:"hover"}),this.$wrapper.find(".iconbar-"+t).removeClass("hide"),this.show(),a}hide(t){t?(this.$wrapper.find(".iconbar-"+t).addClass("hide"),this.check_if_all_hidden()):this.$wrapper.addClass("hide").trigger("hidden")}show(t){t?(this.$wrapper.find(".iconbar-"+t).removeClass("hide"),this.show()):this.$wrapper.hasClass("hide")&&this.$wrapper.removeClass("hide").trigger("shown")}clear(t){var e=this;this.$wrapper.find(".iconbar-"+t).addClass("hide").find("ul").empty(),this.check_if_all_hidden()}check_if_all_hidden(){this.$wrapper.find(".iconbar:visible").length||this.hide()}};frappe.ui.form.LinkSelector=class{constructor(t){$.extend(this,t);var e=this;this.doctype!="[Select]"?frappe.model.with_doctype(this.doctype,function(i){e.make()}):this.make()}make(){var t=this;this.start=0,this.dialog=new frappe.ui.Dialog({title:__("Select {0}",[this.doctype=="[Select]"?__("value"):__(this.doctype)]),fields:[{fieldtype:"Data",fieldname:"txt",label:__("Beginning with"),description:__("You can use wildcard %")},{fieldtype:"HTML",fieldname:"results"},{fieldtype:"Button",fieldname:"more",label:__("More"),click:()=>{t.start+=20,t.search()}}],primary_action_label:__("Search"),primary_action:function(){t.start=0,t.search()}}),this.txt&&this.dialog.fields_dict.txt.set_input(this.txt),this.dialog.get_input("txt").on("keypress",function(e){e.which===13&&(t.start=0,t.search())}),this.dialog.show(),this.search()}search(){var t={txt:this.dialog.fields_dict.txt.get_value(),searchfield:"name",start:this.start},e=this;this.target.set_custom_query&&this.target.set_custom_query(t),this.target.is_grid&&this.target.fieldinfo[this.fieldname]&&this.target.fieldinfo[this.fieldname].get_query&&$.extend(t,this.target.fieldinfo[this.fieldname].get_query(cur_frm.doc)),frappe.link_search(this.doctype,t,function(i){var n=e.dialog.fields_dict.results.$wrapper;if(t.start===0&&n.empty(),i.values.length?$.each(i.values,function(a,s){var l=$(repl('<div class="row link-select-row">						<div class="col-xs-4">							<b><a href="#">%(name)s</a></b></div>						<div class="col-xs-8">							<span class="text-muted">%(values)s</span></div>						</div>',{name:s[0],values:s.splice(1).join(", ")})).appendTo(n);l.find("a").attr("data-value",s[0]).click(function(){var d=$(this).attr("data-value");return e.target.is_grid?e.set_in_grid(d).then(()=>e.search()):(e.target.doctype?e.target.parse_validate_and_set_in_model(d):(e.target.set_input(d),e.target.$input.trigger("change")),e.dialog.hide()),!1})}):$('<p><br><span class="text-muted">'+__("No Results")+"</span>"+(frappe.model.can_create(e.doctype)?'<br><br><a class="new-doc btn btn-default btn-sm">'+__("Create a new {0}",[__(e.doctype)])+"</a>":"")+"</p>").appendTo(n).find(".new-doc").click(function(){frappe.new_doc(e.doctype)}),i.values.length<20){var o=e.dialog.fields_dict.more.$wrapper;o.hide()}},this.dialog.get_primary_btn())}set_in_grid(t){return new Promise(e=>{if(this.qty_fieldname)frappe.prompt({fieldname:"qty",fieldtype:"Float",label:"Qty",default:1,reqd:1},i=>{if(!(this.target.frm.doc[this.target.df.fieldname]||[]).some(o=>{if(o[this.fieldname]===t)return frappe.model.set_value(o.doctype,o.name,this.qty_fieldname,i.qty).then(()=>{frappe.show_alert(__("Added {0} ({1})",[t,o[this.qty_fieldname]])),e()}),!0})){let o=null;frappe.run_serially([()=>o=this.target.add_new_row(),()=>frappe.timeout(.1),()=>{let a={};return a[this.fieldname]=t,a[this.qty_fieldname]=i.qty,frappe.model.set_value(o.doctype,o.name,a)},()=>frappe.show_alert(__("Added {0} ({1})",[t,i.qty])),()=>e()])}},__("Set Quantity"),__("Set Quantity"));else if(this.dynamic_link_field){let i=this.target.add_new_row();frappe.model.set_value(i.doctype,i.name,this.dynamic_link_field,this.dynamic_link_reference),frappe.model.set_value(i.doctype,i.name,this.fieldname,t).then(()=>{frappe.show_alert(__("{0} {1} added",[this.dynamic_link_reference,t])),e()})}else{let i=this.target.add_new_row();frappe.model.set_value(i.doctype,i.name,this.fieldname,t).then(()=>{frappe.show_alert(__("{0} added",[t])),e()})}})}};frappe.link_search=function(r,t,e,i){t||(t={txt:""}),t.doctype=r,t.searchfield||(t.searchfield="name"),frappe.call({method:"frappe.desk.search.search_widget",type:"GET",args:t,callback:function(n){e&&e(n)},btn:i})};frappe.ui.form.MultiSelectDialog=class{constructor(t){Object.assign(this,t),this.for_select=this.doctype=="[Select]",this.for_select?this.init():frappe.model.with_doctype(this.doctype,()=>this.init())}init(){this.page_length=20,this.child_page_length=20,this.fields=this.get_fields(),this.make()}get_fields(){let t=this.get_primary_filters(),e=this.get_result_fields(),i=this.get_data_fields(),n=this.get_child_selection_fields();return[...t,...e,...i,...n]}get_result_fields(){let t=()=>{this.page_length+=20,this.get_results()};return[{fieldtype:"HTML",fieldname:"results_area"},{fieldtype:"Button",fieldname:"more_btn",label:__("More"),click:t.bind(this)}]}get_data_fields(){return this.data_fields&&this.data_fields.length?[{fieldtype:"Section Break"},...this.data_fields]:[]}get_child_selection_fields(){let t=[];if(this.allow_child_item_selection&&this.child_fieldname){let e=()=>{this.child_page_length+=20,this.show_child_results()};t.push({fieldtype:"HTML",fieldname:"child_selection_area"}),t.push({fieldtype:"Button",fieldname:"more_child_btn",hidden:1,label:__("More"),click:e.bind(this)})}return t}make(){let t=__(this.doctype).plural(),e=__("Select {0}",[this.for_select?__("value"):t]);this.dialog=new frappe.ui.Dialog({title:e,fields:this.fields,size:this.size,primary_action_label:this.primary_action_label||__("Get Items"),secondary_action_label:__("Make {0}",[__(this.doctype)]),primary_action:()=>{let i=this.get_custom_filters(),n=cur_dialog.get_values(),o=this.get_selected_child_names(),a=[...this.get_checked_values(),...this.get_parent_name_of_selected_children()];this.action(a,Ht(lt(lt(lt({},this.args),n),i),{filtered_children:o}))},secondary_action:this.make_new_document.bind(this)}),this.add_filters_group&&this.make_filter_area(),this.args={},this.setup_results(),this.bind_events(),this.get_results(),this.dialog.show()}make_new_document(t){t&&(this.set_route_options(),frappe.new_doc(this.doctype,!0))}set_route_options(){if(frappe.route_options={},Array.isArray(this.setters))for(let t of this.setters)frappe.route_options[t.fieldname]=this.dialog.fields_dict[t.fieldname].get_value()||void 0;else Object.keys(this.setters).forEach(t=>{frappe.route_options[t]=this.dialog.fields_dict[t].get_value()||void 0})}setup_results(){this.$parent=$(this.dialog.body),this.$wrapper=this.dialog.fields_dict.results_area.$wrapper.append(`<div class="results my-3"
			style="border: 1px solid #d1d8dd; border-radius: 3px; height: 300px; overflow: auto;"></div>`),this.$results=this.$wrapper.find(".results"),this.$results.append(this.make_list_row())}show_child_results(){this.get_child_result().then(t=>{this.child_results=t.message||[],this.render_child_datatable(),this.$wrapper.addClass("hidden"),this.$child_wrapper.removeClass("hidden"),this.dialog.fields_dict.more_btn.$wrapper.hide()})}is_child_selection_enabled(){var t;return(t=this.dialog.fields_dict.allow_child_item_selection)==null?void 0:t.get_value()}toggle_child_selection(){this.is_child_selection_enabled()?this.show_child_results():(this.child_results=[],this.get_results(),this.$wrapper.removeClass("hidden"),this.$child_wrapper.addClass("hidden"))}render_child_datatable(){this.child_datatable?setTimeout(()=>{this.child_datatable.rowmanager.checkMap=[],this.child_datatable.refresh(this.get_child_datatable_rows()),this.$child_wrapper.find(".dt-scrollable").css("height","300px"),this.$child_wrapper.find(".dt-scrollable").css("overflow-y","scroll")},500):this.setup_child_datatable()}get_child_datatable_columns(){return[this.doctype,...this.child_columns].map(e=>({name:frappe.unscrub(e),editable:!1}))}get_child_datatable_rows(){return this.child_results.length>this.child_page_length?this.dialog.fields_dict.more_child_btn.toggle(!0):this.dialog.fields_dict.more_child_btn.toggle(!1),this.child_results.slice(0,this.child_page_length).map(t=>Object.values(t).slice(1))}setup_child_datatable(){let t=this.get_child_datatable_columns(),e=this.get_child_datatable_rows();this.$child_wrapper=this.dialog.fields_dict.child_selection_area.$wrapper,this.$child_wrapper.addClass("my-3"),this.child_datatable=new frappe.DataTable(this.$child_wrapper.get(0),{columns:t,data:e,layout:"fluid",inlineFilters:!0,serialNoColumn:!1,checkboxColumn:!0,cellHeight:35,noDataMessage:__("No Data"),disableReorderColumn:!0}),this.$child_wrapper.find(".dt-scrollable").css("height","300px")}get_primary_filters(){let t=[],e=new Array(3);return e[0]=[{fieldtype:"Data",label:__("Name"),fieldname:"search_term"}],e[1]=[],e[2]=[],$.isArray(this.setters)?this.setters.forEach((i,n)=>{e[(n+1)%3].push(i)}):Object.keys(this.setters).forEach((i,n)=>{let o=frappe.meta.docfield_map[this.doctype][i];e[(n+1)%3].push({fieldtype:o.fieldtype,label:o.label,fieldname:i,options:o.options,default:this.setters[i]})}),Object.seal&&Object.seal(e),this.allow_child_item_selection&&(this.child_doctype=frappe.meta.get_docfield(this.doctype,this.child_fieldname).options,e[0].push({fieldtype:"Check",label:__("Select {0}",[this.child_doctype]),fieldname:"allow_child_item_selection",onchange:this.toggle_child_selection.bind(this)})),t=[...e[0],{fieldtype:"Column Break"},...e[1],{fieldtype:"Column Break"},...e[2],{fieldtype:"Section Break",fieldname:"primary_filters_sb"}],this.add_filters_group&&t.push({fieldtype:"HTML",fieldname:"filter_area"}),t}make_filter_area(){this.filter_group=new frappe.ui.FilterGroup({parent:this.dialog.get_field("filter_area").$wrapper,doctype:this.doctype,on_change:()=>{this.is_child_selection_enabled()?this.show_child_results():this.get_results()}}),this.filter_group.wrapper.find(".apply-filters").hide()}get_custom_filters(){return this.add_filters_group&&this.filter_group?this.filter_group.get_filters().reduce((t,e)=>Object.assign(t,{[e[1]]:[e[2],e[3]]}),{}):{}}bind_events(){let t=this;this.$results.on("click",".list-item-container",function(e){!$(e.target).is(":checkbox")&&!$(e.target).is("a")&&$(this).find(":checkbox").trigger("click")}),this.$results.on("click",".list-item--head :checkbox",e=>{this.$results.find(".list-item-container .list-row-check").prop("checked",$(e.target).is(":checked"))}),this.$parent.find(".input-with-feedback").on("change",()=>{frappe.flags.auto_scroll=!1,this.is_child_selection_enabled()?this.show_child_results():this.get_results()}),this.$parent.find('[data-fieldtype="Data"]').on("input",()=>{var e=$(this);clearTimeout(e.data("timeout")),e.data("timeout",setTimeout(function(){frappe.flags.auto_scroll=!1,t.is_child_selection_enabled()?t.show_child_results():(t.empty_list(),t.get_results())},300))})}get_parent_name_of_selected_children(){return!this.child_datatable||!this.child_datatable.datamanager.rows.length?[]:this.child_datatable.rowmanager.checkMap.reduce((e,i,n)=>{if(i==1){let o=this.child_results[n].parent;e.includes(o)||e.push(o)}return e},[])}get_selected_child_names(){return!this.child_datatable||!this.child_datatable.datamanager.rows.length?[]:this.child_datatable.rowmanager.checkMap.reduce((e,i,n)=>{if(i==1){let o=this.child_results[n].name;e.push(o)}return e},[])}get_checked_values(){return this.$results.find(".list-item-container").map(function(){if($(this).find(".list-row-check:checkbox:checked").length>0)return $(this).attr("data-item-name")}).get()}get_checked_items(){let t=this.get_checked_values();return this.results.filter(e=>t.includes(e.name))}get_datatable_columns(){return this.get_query&&this.get_query().query&&this.columns?this.columns:Array.isArray(this.setters)?["name",...this.setters.map(t=>t.fieldname)]:["name",...Object.keys(this.setters)]}make_list_row(t={}){var e=this;let i=Object.keys(t).length===0,n="";this.get_datatable_columns().forEach(function(a){n+=`<div class="list-item__content ellipsis">
				${i?`<span class="ellipsis text-muted" title="${__(frappe.model.unscrub(a))}">${__(frappe.model.unscrub(a))}</span>`:a!=="name"?`<span class="ellipsis result-row" title="${__(t[a]||"")}">${__(t[a]||"")}</span>`:`<a href="${"/app/"+frappe.router.slug(e.doctype)+"/"+t[a]||""}" class="list-id ellipsis" title="${__(t[a]||"")}">
							${__(t[a]||"")}</a>`}
			</div>`});let o=$(`<div class="list-item">
			<div class="list-item__content" style="flex: 0 0 10px;">
				<input type="checkbox" class="list-row-check" data-item-name="${t.name}" ${t.checked?"checked":""}>
			</div>
			${n}
		</div>`);return i?o.addClass("list-item--head"):o=$(`<div class="list-item-container" data-item-name="${t.name}"></div>`).append(o),o}render_result_list(t,e=0,i=!0){var n=this,o=n.dialog.fields_dict.more_btn.$wrapper;if(!frappe.flags.auto_scroll&&i&&this.empty_list(),o.hide(),$(".modal-dialog .list-item--head").css("z-index",1),t.length===0)return;e&&o.show();let a=this.get_checked_values();t.filter(s=>!a.includes(s.name)).forEach(s=>{n.$results.append(n.make_list_row(s))}),this.$results.find(".list-item--head").css("z-index",1),frappe.flags.auto_scroll&&this.$results.animate({scrollTop:n.$results.prop("scrollHeight")},500)}empty_list(){let t=this.get_checked_items().map(e=>Ht(lt({},e),{checked:!0}));this.$results.find(".list-item-container").remove(),this.render_result_list(t,0,!1)}get_filters_from_setters(){let t=this,e=(this.get_query?this.get_query().filters:{})||{},i=[];if($.isArray(this.setters))for(let n of this.setters)e[n.fieldname]=t.dialog.fields_dict[n.fieldname].get_value()||void 0,t.args[n.fieldname]=e[n.fieldname],i.push(n.fieldname);else Object.keys(this.setters).forEach(function(n){var o=t.dialog.fields_dict[n].get_value();t.dialog.fields_dict[n].df.fieldtype=="Data"&&o?e[n]=["like","%"+o+"%"]:(e[n]=o||void 0,t.args[n]=e[n],i.push(n))});return[e,i]}get_args_for_search(){let[t,e]=this.get_filters_from_setters(),i=this.get_custom_filters();return Object.assign(t,i),{doctype:this.doctype,txt:this.dialog.fields_dict.search_term.get_value(),filters:t,filter_fields:e,page_length:this.page_length+5,query:this.get_query?this.get_query().query:"",as_dict:1}}async perform_search(t){let e=await frappe.call({type:"GET",method:"frappe.desk.search.search_widget",no_spinner:!0,args:t}),i=e.values.length&&e.values.length>this.page_length?1:0;return[e,i]}async get_results(){let t=this.get_args_for_search(),[e,i]=await this.perform_search(t);i&&(e.values=e.values.splice(0,this.page_length)),this.results=[],e.values.length&&e.values.forEach(n=>{n.checked=0,this.results.push(n)}),this.render_result_list(this.results,i)}async get_filtered_parents_for_child_search(){let t=this.get_args_for_search();t.filter_fields=["name"];let[e,i]=await this.perform_search(t),n=[];return e.values.length&&(n=e.values.map(o=>o.name)),n}async add_parent_filters(t){let e=await this.get_filtered_parents_for_child_search();e.length&&t.push(["parent","in",e])}add_custom_child_filters(t){this.add_filters_group&&this.filter_group&&this.filter_group.get_filters().forEach(e=>{e[0]==this.child_doctype&&t.push([e[1],e[2],e[3]])})}async get_child_result(){let t=[["parentfield","=",this.child_fieldname]];return await this.add_parent_filters(t),this.add_custom_child_filters(t),frappe.call({method:"frappe.client.get_list",args:{doctype:this.child_doctype,filters:t,fields:["name","parent",...this.child_columns],parent:this.doctype,limit_page_length:this.child_page_length+5,order_by:"parent"}})}};frappe._.get_data_uri=r=>{let t=r.videoWidth,e=r.videoHeight,i=$("<canvas/>");return i[0].width=t,i[0].height=e,i[0].getContext("2d").drawImage(r,0,0,t,e),i[0].toDataURL("image/png")};function mw(){let r=document.createElement("input");return r.setAttribute("type","file"),r.setAttribute("accept","image/*"),r.setAttribute("multiple",""),r}function vw(r){return new Promise((t,e)=>{let i=new FileReader;i.onload=()=>t(i.result),i.onerror=e,i.readAsDataURL(r)})}frappe.ui.Capture=class{constructor(r={}){this.options=frappe.ui.Capture.OPTIONS,this.set_options(r),this.facing_mode="environment",this.images=[]}set_options(r){return this.options=lt(lt({},frappe.ui.Capture.OPTIONS),r),this}show(){this.build_dialog(),frappe.is_mobile()?this.show_for_mobile():this.show_for_desktop()}build_dialog(){let r=this;r.dialog=new frappe.ui.Dialog({title:this.options.title,animate:this.options.animate,fields:[{fieldtype:"HTML",fieldname:"capture"},{fieldtype:"HTML",fieldname:"total_count"}],on_hide:this.stop_media_stream()}),r.$template=$(frappe.ui.Capture.TEMPLATE);let t=r.dialog.get_field("capture");$(t.wrapper).html(r.$template),r.dialog.get_close_btn().on("click",()=>{r.hide()})}show_for_mobile(){let r=this;r.input||(r.input=mw()),r.input.onchange=async()=>{for(let t of r.input.files){let e=await vw(t);r.images.push(e)}r.render_preview(),r.dialog.show()},r.input.click()}show_for_desktop(){let r=this;this.render_stream().then(()=>{r.dialog.show()}).catch(t=>{throw r.options.error&&frappe.show_alert(frappe.ui.Capture.ERR_MESSAGE,3),t})}render_stream(){let r=this,t={video:{facingMode:this.facing_mode}};return navigator.mediaDevices.getUserMedia(t).then(e=>{r.stream=e,r.dialog.custom_actions.empty(),r.dialog.get_primary_btn().off("click"),r.setup_take_photo_action(),r.setup_preview_action(),r.setup_toggle_camera(),r.$template.find(".fc-stream-container").show(),r.$template.find(".fc-preview-container").hide(),r.video=r.$template.find("video")[0],r.video.srcObject=r.stream,r.video.load(),r.video.play()})}render_preview(){this.stop_media_stream(),this.$template.find(".fc-stream-container").hide(),this.$template.find(".fc-preview-container").show(),this.dialog.get_primary_btn().off("click");let r="";this.images.forEach((t,e)=>{r+=`
				<div class="mt-1 p-1 rounded col-md-3 col-sm-4 col-xs-4" data-idx="${e}">
					<span class="capture-remove-btn" data-idx="${e}">
						${frappe.utils.icon("close","lg")}
					</span>
					<img class="rounded" src="${t}" data-idx="${e}">
				</div>
			`}),this.$template.find(".fc-preview-container").empty(),$(this.$template.find(".fc-preview-container")).html(`<div class="row">
				${r}
			</div>`),this.setup_capture_action(),this.setup_submit_action(),this.setup_remove_action(),this.update_count(),this.dialog.custom_actions.empty()}setup_take_photo_action(){let r=this;this.dialog.set_primary_action(__("Take Photo"),()=>{let t=frappe._.get_data_uri(r.video);r.images.push(t),r.setup_preview_action(),r.update_count()})}setup_preview_action(){let r=this;!this.images.length||(this.dialog.set_secondary_action_label(__("Preview")),this.dialog.set_secondary_action(()=>{r.dialog.get_primary_btn().off("click"),r.render_preview()}))}setup_remove_action(){let r=this;this.$template[0].getElementsByClassName("capture-remove-btn").forEach(e=>{e.onclick=()=>{let i=parseInt(e.getAttribute("data-idx"));r.images.splice(i,1),r.render_preview()}})}update_count(){let r=this.dialog.get_field("total_count"),t=`${__("Total Images")}: <b>${this.images.length}`;this.images.length===0&&(t=__("No Images")),$(r.wrapper).html(`
			<div class="row mt-2">
				<div class="offset-4 col-4 d-flex justify-content-center">${t}</b></div>
			</div>
		`)}setup_toggle_camera(){let r=this;this.dialog.add_custom_action(__("Switch Camera"),()=>{r.facing_mode=r.facing_mode=="environment"?"user":"environment",frappe.show_alert({message:__("Switching Camera")}),r.stop_media_stream(),r.render_stream()},"btn-switch")}setup_capture_action(){let r=this;this.dialog.set_secondary_action_label(__("Capture")),this.dialog.set_secondary_action(()=>{frappe.is_mobile()?r.show_for_mobile():r.render_stream()})}setup_submit_action(){let r=this;this.dialog.set_primary_action(__("Submit"),()=>{r.hide(),r.callback&&r.callback(r.images)})}hide(){this.dialog&&this.dialog.hide(),this.stop_media_stream()}stop_media_stream(){this.stream&&this.stream.getTracks().forEach(r=>{r.stop()})}submit(r){this.callback=r}};frappe.ui.Capture.OPTIONS={title:__("Camera"),animate:!1,error:!1};frappe.ui.Capture.ERR_MESSAGE=__("Unable to load camera.");frappe.ui.Capture.TEMPLATE=`
<div class="frappe-capture">
	<div class="embed-responsive embed-responsive-16by9 fc-stream-container">
		<video class="fc-stream embed-responsive-item">${frappe.ui.Capture.ERR_MESSAGE}</video>
	</div>
	<div class="fc-preview-container px-2" style="display: none;">

	</div>
</div>
`;frappe.provide("frappe.ui");frappe.ui.app_icon={get_html:function(r,t){var e=r.icon,i=r.color;e&&e.match(/([\uE000-\uF8FF]|\uD83C[\uDF00-\uDFFF]|\uD83D[\uDC00-\uDDFF])/g)&&(r.emoji=r.icon);var n="";return r.reverse&&(n="color: #36414C;"),i||(i="#4aa3df"),!e||r.emoji?e='<span class="inner" '+(r.reverse?'style="'+n+'"':"")+">"+(r.emoji||r._label[0].toUpperCase())+"</span>":e.split(".").slice(-1)[0]==="svg"?($.ajax({url:frappe.urllib.get_full_url(e),dataType:"text",async:!1,success:function(o){e=o}}),e='<object class="app-icon-svg">'+e+"</object>"):e='<i class="'+e+'" title="'+r._label+'" style="'+n+'"></i>','<div class="app-icon'+(t?" app-icon-small":"")+'" style="background-color: '+i+'" title="'+r._label+'">'+e+"</div>"}};frappe.provide("frappe.ui");frappe.ui.ThemeSwitcher=class{constructor(){this.setup_dialog(),this.refresh()}setup_dialog(){this.dialog=new frappe.ui.Dialog({title:__("Switch Theme")}),this.body=$('<div class="theme-grid"></div>').appendTo(this.dialog.$body),this.bind_events()}bind_events(){this.dialog.$wrapper.on("keydown",t=>{if(!this.themes)return;let e=frappe.ui.keys.get_key(t),i;if(e==="right")i=1;else if(e==="left")i=-1;else if(t.keyCode===13)this.hide();else return;let n=this.themes.findIndex(a=>a.name===this.current_theme),o=this.themes[n+i];if(!!o)return o.$html.click(),!1})}refresh(){this.current_theme=document.documentElement.getAttribute("data-theme-mode")||"light",this.fetch_themes().then(()=>{this.render()})}fetch_themes(){return new Promise(t=>{this.themes=[{name:"light",label:__("Frappe Light"),info:__("Light Theme")},{name:"dark",label:__("Timeless Night"),info:__("Dark Theme")},{name:"automatic",label:__("Automatic"),info:__("Uses system's theme to switch between light and dark mode")}],t(this.themes)})}render(){this.themes.forEach(t=>{let e=this.get_preview_html(t);e.appendTo(this.body),t.$html=e})}get_preview_html(t){let e=t.name==="automatic",i=$(`<div class="${this.current_theme==t.name?"selected":""}">
			<div data-theme=${e?"light":t.name}
				data-is-auto-theme="${e}" title="${t.info}">
				<div class="background">
					<div>
						<div class="preview-check" data-theme=${e?"dark":t.name}>
							${frappe.utils.icon("tick","xs")}
						</div>
					</div>
					<div class="navbar"></div>
					<div class="p-2">
						<div class="toolbar">
							<span class="text"></span>
							<span class="primary"></span>
						</div>
						<div class="foreground"></div>
						<div class="foreground"></div>
					</div>
				</div>
			</div>
			<div class="mt-3 text-center">
				<h5 class="theme-title">${t.label}</h5>
			</div>
		</div>`);return i.on("click",()=>{this.current_theme!==t.name&&(this.themes.forEach(n=>{n.$html.removeClass("selected")}),i.addClass("selected"),this.toggle_theme(t.name))}),i}toggle_theme(t){this.current_theme=t.toLowerCase(),document.documentElement.setAttribute("data-theme-mode",this.current_theme),frappe.show_alert(__("Theme Changed"),3),frappe.xcall("frappe.core.doctype.user.user.switch_theme",{theme:toTitle(t)})}show(){this.dialog.show()}hide(){this.dialog.hide()}};frappe.ui.add_system_theme_switch_listener=()=>{frappe.ui.dark_theme_media_query.addEventListener("change",()=>{frappe.ui.set_theme()})};frappe.ui.dark_theme_media_query=window.matchMedia("(prefers-color-scheme: dark)");frappe.ui.set_theme=r=>{let t=document.documentElement,e=t.getAttribute("data-theme-mode");r||e==="automatic"&&(r=frappe.ui.dark_theme_media_query.matches?"dark":"light"),t.setAttribute("data-theme",r||e)};var hE=Vt(nd());frappe.db={get_list:function(r,t){return t||(t={}),t.doctype=r,t.fields||(t.fields=["name"]),"limit"in t||(t.limit=20),new Promise(e=>{frappe.call({method:"frappe.desk.reportview.get_list",args:t,type:"GET",callback:function(i){e(i.message)}})})},exists:function(r,t){return new Promise(e=>{frappe.db.get_value(r,{name:t},"name").then(i=>{i.message&&i.message.name?e(!0):e(!1)})})},get_value:function(r,t,e,i,n){return frappe.call({method:"frappe.client.get_value",type:"GET",args:{doctype:r,fieldname:e,filters:t,parent:n},callback:function(o){i&&i(o.message)}})},get_single_value:(r,t)=>new Promise(e=>{frappe.call({method:"frappe.client.get_single_value",args:{doctype:r,field:t},type:"GET"}).then(i=>e(i?i.message:null))}),set_value:function(r,t,e,i,n){return frappe.call({method:"frappe.client.set_value",args:{doctype:r,name:t,fieldname:e,value:i},callback:function(o){n&&n(o.message)}})},get_doc:function(r,t,e){return new Promise((i,n)=>{frappe.call({method:"frappe.client.get",type:"GET",args:{doctype:r,name:t,filters:e},callback:o=>{frappe.model.sync(o.message),i(o.message)}}).fail(n)})},insert:function(r){return frappe.xcall("frappe.client.insert",{doc:r})},delete_doc:function(r,t){return new Promise(e=>{frappe.call("frappe.client.delete",{doctype:r,name:t},i=>e(i.message))})},count:function(r,t={}){let e=t.filters||{},i=Array.isArray(e)&&e.some(o=>o[0]!==r),n=[];return frappe.xcall("frappe.desk.reportview.get_count",{doctype:r,filters:e,fields:n,distinct:i})},get_link_options(r,t="",e={}){return new Promise(i=>{frappe.call({type:"GET",method:"frappe.desk.search.search_link",args:{doctype:r,txt:t,filters:e},callback(n){i(n.results)}})})}};frappe.provide("frappe.meta.docfield_map");frappe.provide("frappe.meta.docfield_copy");frappe.provide("frappe.meta.docfield_list");frappe.provide("frappe.meta.doctypes");frappe.provide("frappe.meta.precision_map");frappe.get_meta=function(r){return locals.DocType?locals.DocType[r]:null};$.extend(frappe.meta,{sync:function(r){$.each(r.fields,function(t,e){frappe.meta.add_field(e)}),frappe.meta.sync_messages(r),r.__print_formats&&frappe.model.sync(r.__print_formats),r.__workflow_docs&&frappe.model.sync(r.__workflow_docs)},add_field:function(r){frappe.provide("frappe.meta.docfield_map."+r.parent),frappe.meta.docfield_map[r.parent][r.fieldname||r.label]=r,frappe.meta.docfield_list[r.parent]||(frappe.meta.docfield_list[r.parent]=[]);for(var t in frappe.meta.docfield_list[r.parent]){var e=frappe.meta.docfield_list[r.parent][t];if(r.fieldname==e.fieldname)return}frappe.meta.docfield_list[r.parent].push(r)},make_docfield_copy_for:function(r,t,e=null){var i=frappe.meta.docfield_copy;i[r]||(i[r]={}),i[r][t]||(i[r][t]={}),e=e||frappe.meta.docfield_list[r]||[];for(var n=0,o=e.length;n<o;n++){var a=e[n];i[r][t][a.fieldname||a.label]=copy_dict(a)}},get_field:function(r,t,e){var i=frappe.meta.get_docfield(r,t,e);return i||frappe.model.std_fields.every(function(n){return n.fieldname===t?(i=n,!1):!0}),i},get_docfield:function(r,t,e){var i=frappe.meta.get_docfield_copy(r,e);return i?i[t]:null},set_formatter:function(r,t,e,i){frappe.meta.get_docfield(r,t,e).formatter=i},set_indicator_formatter:function(r,t,e,i,n){frappe.meta.get_docfield(r,t,e).formatter=function(o,a,s,l){return repl('<span class="indicator %(color)s">%(name)s</span>',{color:n(),name:i()})}},get_docfields:function(r,t,e){var i=frappe.meta.get_docfield_copy(r,t),n=frappe.meta.sort_docfields(i);return e&&(n=frappe.utils.filter_dict(n,e)),n},get_linked_fields:function(r){return $.map(frappe.get_meta(r).fields,function(t){return t.fieldtype=="Link"?t.options:null})},get_fields_to_check_permissions:function(r){var t=$.map(frappe.meta.get_docfields(r,name),function(e){return e.fieldtype==="Link"&&e.ignore_user_permissions!==1?e:null});return t=t.concat({label:"ID",fieldname:name,options:r}),t},sort_docfields:function(r){return $.map(r,function(t){return t}).sort(function(t,e){return t.idx-e.idx})},get_docfield_copy:function(r,t){return t?(frappe.meta.docfield_copy[r]&&frappe.meta.docfield_copy[r][t]||frappe.meta.make_docfield_copy_for(r,t),frappe.meta.docfield_copy[r][t]):frappe.meta.docfield_map[r]},get_fieldnames:function(r,t,e){return $.map(frappe.utils.filter_dict(frappe.meta.docfield_map[r],e),function(i){return i.fieldname})},has_field:function(r,t){let e=frappe.meta.docfield_map[r];return e&&e[t]},get_table_fields:function(r){return $.map(frappe.meta.docfield_list[r],function(t){return frappe.model.table_fields.includes(t.fieldtype)?t:null})},get_doctype_for_field:function(r,t){var e=null;return in_list(frappe.model.std_fields_list,t)||frappe.meta.has_field(r,t)?e=r:(frappe.meta.get_table_fields(r).every(function(i){return frappe.meta.has_field(i.options,t)||in_list(frappe.model.child_table_field_list,t)?(e=i.options,!1):!0}),e||console.log(__("Warning: Unable to find {0} in any table related to {1}",[t,__(r)]))),e},get_parentfield:function(r,t){var e=(frappe.get_doc("DocType",r).fields||[]).filter(i=>frappe.model.table_fields.includes(i.fieldtype)&&i.options===t);if(!e.length)throw"parentfield not found for "+r+", "+t;return e[0].fieldname},get_label:function(r,t,e){var i={name:__("ID"),creation:__("Created On"),docstatus:__("Document Status"),idx:__("Index"),modified:__("Last Updated On"),modified_by:__("Last Updated By"),owner:__("Created By"),_user_tags:__("Tags"),_liked_by:__("Liked By"),_comments:__("Comments"),_assign:__("Assigned To")};if(i[t])return i[t];var n=this.get_docfield(r,t,e);return(n?n.label:"")||t},get_print_sizes:function(){return["A0","A1","A2","A3","A4","A5","A6","A7","A8","A9","B0","B1","B2","B3","B4","B5","B6","B7","B8","B9","B10","C5E","Comm10E","DLE","Executive","Folio","Ledger","Legal","Letter","Tabloid","Custom"]},get_print_formats:function(r){var t=["Standard"],e=locals.DocType[r].default_print_format;let i=frappe.model.get_doc(":Print Settings","Print Settings").enable_raw_printing;var n=frappe.get_list("Print Format",{doc_type:r}).sort(function(a,s){return a>s?1:-1});if($.each(n,function(a,s){!in_list(t,s.name)&&s.print_format_type!=="JS"&&(cint(i)||!s.raw_printing)&&t.push(s.name)}),e&&e!="Standard"){var o=t.indexOf(e);t.splice(o,1).sort(),t.unshift(e)}return t},sync_messages:function(r){r.__messages&&$.extend(frappe._messages,r.__messages)},get_field_currency:function(r,t){var e=frappe.boot.sysdefaults.currency;if(!t&&cur_frm&&(t=cur_frm.doc),r&&r.options)if(t&&r.options.indexOf(":")!=-1){var i=r.options.split(":");if(i.length==3){var n=t[i[1]];!n&&cur_frm&&(n=cur_frm.doc[i[1]]),e=frappe.model.get_value(i[0],n,i[2])||frappe.model.get_value(":"+i[0],n,i[2])||e}}else t&&t[r.options]?e=t[r.options]:cur_frm&&cur_frm.doc[r.options]&&(e=cur_frm.doc[r.options]);return e},get_field_precision:function(r,t){var e=null;if(r&&r.precision)e=cint(r.precision);else if(r&&r.fieldtype==="Currency"){if(e=cint(frappe.defaults.get_default("currency_precision")),!e){var i=get_number_format(),n=get_number_format_info(i);e=n.precision}}else e=cint(frappe.defaults.get_default("float_precision"))||3;return e}});Object.assign(frappe.model,{docinfo:{},sync:function(r){var t;if(!r.docs&&!r.docinfo&&(r={docs:r}),t=$.isPlainObject(r.docs),t&&(r.docs=[r.docs]),r.docs)for(var e=0,i=r.docs.length;e<i;e++){var n=r.docs[e];locals[n.doctype]&&locals[n.doctype][n.name]?frappe.model.update_in_locals(n):frappe.model.add_to_locals(n),n.__last_sync_on=new Date,n.doctype==="DocType"&&frappe.meta.sync(n),n.localname&&frappe.model.rename_after_save(n,e)}return frappe.model.sync_docinfo(r),r.docs},rename_after_save:(r,t)=>{frappe.model.new_names[r.localname]=r.name,$(document).trigger("rename",[r.doctype,r.localname,r.name]),delete locals[r.doctype][r.localname],t===0&&(frappe.model.docinfo[r.doctype][r.name]=frappe.model.docinfo[r.doctype][r.localname],frappe.model.docinfo[r.doctype][r.localname]=void 0)},sync_docinfo:r=>{if(r.docinfo){let{doctype:t,name:e}=r.docinfo;frappe.model.docinfo[t]||(frappe.model.docinfo[t]={}),frappe.model.docinfo[t][e]=r.docinfo,Object.assign(frappe.boot.user_info,r.docinfo.user_info)}return r.docs},add_to_locals:function(r){locals[r.doctype]||(locals[r.doctype]={}),!r.name&&r.__islocal&&(r.parentfield||frappe.model.clear_doc(r),r.name=frappe.model.get_new_name(r.doctype),r.parentfield||frappe.provide("frappe.model.docinfo."+r.doctype+"."+r.name)),locals[r.doctype][r.name]=r;let t=frappe.get_meta(r.doctype);if(!(t?t.istable:r.parentfield))for(var i in r){var n=r[i];if($.isArray(n))for(var o=0,a=n.length;o<a;o++){var s=n[o];typeof s=="object"&&!s.parent&&(s.parent=r.name),frappe.model.add_to_locals(s)}}},update_in_locals:function(r){let t=locals[r.doctype][r.name],e=function(i,n){Object.keys(n).map(o=>{i[o]==null&&delete n[o]})};for(let i in r){let n=frappe.meta.get_field(r.doctype,i);if(n&&frappe.model.table_fields.includes(n.fieldtype)){r[i]instanceof Array||(r[i]=[]),t[i]instanceof Array||(t[i]=[]);for(let o=0;o<r[i].length;o++){let a=r[i][o],s=t[i][o];s?(locals[a.doctype]||(locals[a.doctype]={}),a.name||(a.name=frappe.model.get_new_name(r.doctype)),locals[a.doctype][a.name]||(delete locals[a.doctype][s.name],locals[a.doctype][a.name]=s),Object.assign(s,a),e(a,s)):(t[i].push(a),a.parent||(a.parent=r.name),frappe.model.add_to_locals(a))}if(t[i].length>r[i].length){for(let o=r[i].length;o<t[i].length;o++){let a=t[i][o];locals[a.doctype]&&locals[a.doctype][a.name]&&delete locals[a.doctype][a.name]}t[i].length=r[i].length}}else t[i]=r[i]}e(r,t)}});frappe.provide("frappe.model");$.extend(frappe.model,{new_names:{},new_name_count:{},get_new_doc:function(r,t,e,i){frappe.provide("locals."+r);var n={docstatus:0,doctype:r,name:frappe.model.get_new_name(r),__islocal:1,__unsaved:1,owner:frappe.session.user};if(frappe.model.set_default_values(n,t),t?($.extend(n,{parent:t.name,parentfield:e,parenttype:t.doctype}),t[e]||(t[e]=[]),n.idx=t[e].length+1,t[e].push(n)):frappe.provide("frappe.model.docinfo."+r+"."+n.name),frappe.model.add_to_locals(n),i&&frappe.model.create_mandatory_children(n),t||(n.__run_link_triggers=1),frappe.route_options&&frappe.route_options.name_field){var o=frappe.get_meta(r);o.autoname&&o.autoname.indexOf("field:")!==-1?n[o.autoname.substr(6)]=frappe.route_options.name_field:o.title_field&&(n[o.title_field]=frappe.route_options.name_field),delete frappe.route_options.name_field}return frappe.route_options&&!n.parent&&($.each(frappe.route_options,function(a,s){var l=frappe.meta.has_field(r,a);l&&in_list(["Link","Data","Select","Dynamic Link"],l.fieldtype)&&!l.no_copy&&(n[a]=s)}),frappe.route_options=null),n},make_new_doc_and_get_name:function(r,t){return frappe.model.get_new_doc(r,null,null,t).name},get_new_name:function(r){var t=frappe.model.new_name_count;return t[r]||(t[r]=0),t[r]++,frappe.router.slug(`new-${r}-${t[r]}`)},set_default_values:function(r,t){for(var e=r.doctype,i=frappe.meta.get_docfields(e),n=[],o=0;o<i.length;o++){var a=i[o];if(!in_list(frappe.model.no_value_type,a.fieldtype)&&r[a.fieldname]==null){if(a.no_default)continue;var s=frappe.model.get_default_value(a,r,t);s?(in_list(["Int","Check"],a.fieldtype)?s=cint(s):in_list(["Currency","Float"],a.fieldtype)&&(s=flt(s)),r[a.fieldname]=s,n.push(a.fieldname)):a.fieldtype=="Select"&&a.options&&typeof a.options=="string"&&!in_list(["[Select]","Loading..."],a.options)&&(r[a.fieldname]=a.options.split(`
`)[0])}}return n},create_mandatory_children:function(r){var t=frappe.get_meta(r.doctype);t&&t.istable||frappe.meta.get_docfields(r.doctype).forEach(function(e){e.fieldtype==="Table"&&e.reqd&&frappe.model.add_child(r,e.fieldname)})},get_default_value:function(r,t,e){var i="",n=frappe.defaults.get_user_permissions();let o=[],a=null,s=null;n&&({allowed_records:o,default_doc:a}=frappe.perm.filter_allowed_docs_for_doctype(n[r.options],t.doctype));var l=frappe.get_meta(t.doctype),d=r.fieldtype==="Link"&&!$.isEmptyObject(n)&&r.ignore_user_permissions!=1&&o.length;if(r.fieldtype==="Link"&&r.options!=="User")if(d&&a)s=a;else{if(!r.ignore_user_permissions){var u=frappe.defaults.get_user_defaults(r.options);u&&u.length===1&&(i=u[0])}i?!i&&r.remember_last_selected_value&&frappe.boot.user.last_selected_values&&(i=frappe.boot.user.last_selected_values[r.options]):i=frappe.defaults.get_user_default(r.fieldname);var h=i&&(!d||o.includes(i));h&&(s=i)}if(!s||r.default){let y=String(r.default);if(y=="__user"||y.toLowerCase()=="user")s=frappe.session.user;else if(y=="user_fullname")s=frappe.session.user_fullname;else if(y=="Today")s=frappe.datetime.get_today();else if((y||"").toLowerCase()==="now")r.fieldtype=="Time"?s=frappe.datetime.now_time():s=frappe.datetime.system_datetime();else if(y[0]===":"){var p=frappe.model.get_default_from_boot_docs(r,t,e),m=!d||o.includes(p);m&&(s=p)}else if(r.fieldname===l.title_field)s="";else{var x=!d||o.includes(r.default);(r.fieldtype!=="Link"||r.options==="User"||x)&&(s=r.default)}}else r.fieldtype=="Time"&&(s=frappe.datetime.now_time());return r.__default_value=s,s},get_default_from_boot_docs:function(r,t,e){if(frappe.get_list(r.default).length>0){var i=r.default.slice(1).toLowerCase().replace(" ","_"),n=e?e[i]:frappe.defaults.get_user_default(i),o=n?frappe.get_doc(r.default,n):null;if(o&&o[r.fieldname])return o[r.fieldname]}},add_child:function(r,t,e,i){arguments.length===2&&(e=t,t=frappe.meta.get_field(r.doctype,e).options),i=i?i-.1:(r[e]||[]).length+1;var n=frappe.model.get_new_doc(t,r,e);if(n.idx=i,i!==cint(i))for(var o=r[e].sort(function(d,u){return d.idx-u.idx}),a=0,s=o.length;a<s;a++){var l=o[a];l.idx=a+1}return cur_frm&&cur_frm.doc==r&&cur_frm.dirty(),n},copy_doc:function(r,t,e,i){var n=["name","amended_from","amendment_date","cancel_reason"],o=frappe.model.get_new_doc(r.doctype,e,i);for(var a in r){var s=frappe.meta.get_docfield(r.doctype,a);if(s&&a.substr(0,2)!="__"&&!in_list(n,a)&&!(s&&!t&&cint(s.no_copy)==1)){var l=r[a]||[];if(frappe.model.table_fields.includes(s.fieldtype))for(var d=0,u=l.length;d<u;d++){var h=l[d];frappe.model.copy_doc(h,t,o,s.fieldname)}else o[a]=r[a]}}var p=frappe.session.user;return o.__islocal=1,o.docstatus=0,o.owner=p,o.creation="",o.modified_by=p,o.modified="",o.lft=null,o.rgt=null,o},open_mapped_doc:function(r){return r.frm&&r.frm.doc.__unsaved?frappe.throw(__("You have unsaved changes in this form. Please save before you continue.")):!r.source_name&&r.frm?r.source_name=r.frm.doc.name:!r.frm&&!r.source_name&&(r.source_name=null),frappe.call({type:"POST",method:"frappe.model.mapper.make_mapped_doc",args:{method:r.method,source_name:r.source_name,args:r.args||null,selected_children:r.frm?r.frm.get_selected():null},freeze:!0,freeze_message:r.freeze_message||"",callback:function(t){t.exc||(frappe.model.sync(t.message),r.run_link_triggers&&(frappe.get_doc(t.message.doctype,t.message.name).__run_link_triggers=!0),frappe.set_route("Form",t.message.doctype,t.message.name))}})}});frappe.create_routes={};frappe.new_doc=function(r,t,e){if(r==="File"){new frappe.ui.FileUploader({folder:t?t.folder:"Home"});return}return new Promise(i=>{t&&$.isPlainObject(t)&&(frappe.route_options=t),frappe.model.with_doctype(r,function(){frappe.create_routes[r]?frappe.set_route(frappe.create_routes[r]).then(()=>i()):frappe.ui.form.make_quick_entry(r,null,e).then(()=>i())})})};frappe.provide("frappe.perm");Object.assign(window,{READ:"read",WRITE:"write",CREATE:"create",DELETE:"delete",SUBMIT:"submit",CANCEL:"cancel",AMEND:"amend"});$.extend(frappe.perm,{rights:["select","read","write","create","delete","submit","cancel","amend","report","import","export","print","email","share","set_user_permissions"],doctype_perm:{},has_perm:(r,t=0,e="read",i)=>{var o;let n=frappe.perm.get_perm(r,i);return!!((o=n==null?void 0:n[t])!=null&&o[e])},get_perm:(r,t)=>{var e,i;return t&&!t.__islocal?frappe.perm._get_perm(r,t):(i=(e=frappe.perm.doctype_perm)[r])!=null?i:e[r]=frappe.perm._get_perm(r)},_get_perm:(r,t)=>{let e=[{read:0,permlevel:0}],i=frappe.get_doc("DocType",r),n=frappe.session.user;if((n==="Administrator"||frappe.user_roles.includes("Administrator"))&&(e[0].read=1),!i)return e;e=frappe.perm.get_role_permissions(i);let o=e[0];if(t){let a=frappe.model.get_docinfo(r,t.name);if(a&&a.permissions&&Object.keys(a.permissions).forEach(s=>{o[s]=a.permissions[s]}),t.owner!==n)for(let s of frappe.perm.rights)o[s]&&!o.rights_without_if_owner.has(s)&&(o[s]=0);if(a&&a.shared){for(let s of a.shared)if(s.user===n){for(let l of["read","write","submit","share"])o[l]||(o[l]=s[l]);s.read&&(o.email=frappe.boot.user.can_email.indexOf(r)!==-1?1:0,o.print=frappe.boot.user.can_print.indexOf(r)!==-1?1:0)}}}return!o.read&&frappe.model.can_read(r)&&(o.read=1),e},get_role_permissions:r=>{let t=[{read:0,permlevel:0}];return(r.permissions||[]).forEach(e=>{var o,a;let i=cint(e.permlevel),n=(o=t[i])!=null?o:t[i]={permlevel:i};i===0&&((a=n.rights_without_if_owner)!=null||(n.rights_without_if_owner=new Set)),frappe.user_roles.includes(e.role)&&frappe.perm.rights.forEach(s=>{!e[s]||(n[s]=1,i===0&&!e.if_owner&&n.rights_without_if_owner.add(s))})}),t=t.map(e=>e||{}),t},get_match_rules:(r,t)=>{let e=[];t||(t="read");let i=frappe.perm.get_perm(r),n=frappe.defaults.get_user_permissions();if(n&&!$.isEmptyObject(n)){let a={},s=frappe.meta.get_fields_to_check_permissions(r);$.each(s,(l,d)=>{let u=n[d.options]||[],h=frappe.perm.get_allowed_docs_for_doctype(u,r);h.length&&(a[d.label]=h)}),$.isEmptyObject(a)||e.push(a)}let o=i[0];return o.read&&!o.rights_without_if_owner.has("read")&&e.push({Owner:frappe.session.user}),e},get_field_display_status:(r,t,e,i)=>{if(!e&&t&&(e=frappe.perm.get_perm(t.doctype,t)),!e){let s=r&&(cint(r.hidden)||cint(r.hidden_due_to_dependency)),l=r&&cint(r.read_only);return s?"None":l?"Read":"Write"}r.permlevel||(r.permlevel=0);let n=e[r.permlevel],o="None";if(n&&(n.write&&!r.disabled?o="Write":n.read&&(o="Read")),i&&console.log("By Permission:"+o),cint(r.hidden)&&(o="None"),i&&console.log("By Hidden:"+o),cint(r.hidden_due_to_dependency)&&(o="None"),i&&console.log("By Hidden Due To Dependency:"+o),!t)return o;o==="Write"&&cint(t.docstatus)>0&&(o="Read"),i&&console.log("By Submit:"+o);let a=cint(r.allow_on_submit);return o==="Read"&&a&&cint(t.docstatus)===1&&n.write&&(o="Write"),i&&console.log("By Allow on Submit:"+o),o==="Read"&&cur_frm&&cur_frm.state_fieldname&&(cint(cur_frm.read_only)||in_list(cur_frm.states.update_fields,r.fieldname)||r.fieldname==cur_frm.state_fieldname)&&(o="Read"),i&&console.log("By Workflow:"+o),o==="Write"&&(cint(r.read_only)||r.fieldtype==="Read Only")&&(o="Read"),i&&console.log("By Read Only:"+o),o==="Write"&&r.set_only_once&&!t.__islocal&&(o="Read"),i&&console.log("By Set Only Once:"+o),o},is_visible:(r,t,e)=>(typeof r=="string"&&(r=frappe.meta.get_docfield(t.doctype,r,t.parent||t.name)),frappe.perm.get_field_display_status(r,t,e)!=="None"),get_allowed_docs_for_doctype:(r,t)=>frappe.perm.filter_allowed_docs_for_doctype(r,t,!1),filter_allowed_docs_for_doctype:(r,t,e=!0)=>{let i=(r||[]).filter(o=>o.applicable_for===t||!o.applicable_for),n=i.map(o=>o.doc);if(e){let o=n.length===1?n:i.filter(a=>a.is_default).map(a=>a.doc);return{allowed_records:n,default_doc:o[0]}}else return n}});frappe.provide("frappe.workflow");frappe.workflow={state_fields:{},workflows:{},setup:function(r){var t=frappe.get_list("Workflow",{document_type:r});t.length?(frappe.workflow.workflows[r]=t[0],frappe.workflow.state_fields[r]=t[0].workflow_state_field):frappe.workflow.state_fields[r]=null},get_state_fieldname:function(r){return frappe.workflow.state_fields[r]===void 0&&frappe.workflow.setup(r),frappe.workflow.state_fields[r]},get_default_state:function(r,t){frappe.workflow.setup(r);var e=null;return $.each(frappe.workflow.workflows[r].states,function(i,n){if(cint(n.doc_status)===cint(t))return e=n.state,!1}),e},get_transitions:function(r){return frappe.workflow.setup(r.doctype),frappe.xcall("frappe.model.workflow.get_transitions",{doc:r})},get_document_state:function(r,t){return frappe.workflow.setup(r),frappe.get_children(frappe.workflow.workflows[r],"states",{state:t})[0]},is_self_approval_enabled:function(r){return frappe.workflow.workflows[r].allow_self_approval},is_read_only:function(r,t){var e=frappe.workflow.get_state_fieldname(r);if(e){var i=locals[r][t];if(!i||i.__islocal)return!1;var n=i[e]||frappe.workflow.get_default_state(r,i.docstatus),o=n?frappe.workflow.get_document_state(r,n)&&frappe.workflow.get_document_state(r,n).allow_edit:null;if(!frappe.user_roles.includes(o))return!0}return!1},get_update_fields:function(r){var t=$.unique($.map(frappe.workflow.workflows[r].states||[],function(e){return e.update_field}));return t},get_state(r){let t=this.get_state_fieldname(r.doctype),e=r[t];return e||(e=this.get_default_state(r.doctype,r.docstatus)),e},get_all_transitions(r){return frappe.workflow.workflows[r].transitions||[]},get_all_transition_actions(r){return this.get_all_transitions(r).map(e=>e.action)}};frappe.provide("frappe.model.user_settings");$.extend(frappe.model.user_settings,{get:function(r){return frappe.call("frappe.model.utils.user_settings.get",{doctype:r}).then(t=>JSON.parse(t.message||"{}"))},save:function(r,t,e){if(frappe.session.user==="Guest")return Promise.resolve();let i=frappe.model.user_settings[r]||{},n=$.extend(!0,{},i);$.isPlainObject(e)?(n[t]=n[t]||{},$.extend(n[t],e)):n[t]=e;let o=JSON.stringify(i),a=JSON.stringify(n);return o!==a?this.update(r,n):Promise.resolve(n)},remove:function(r,t){var e=frappe.model.user_settings[r]||{};return delete e[t],this.update(r,e)},update:function(r,t){return frappe.session.user==="Guest"?Promise.resolve():frappe.call({method:"frappe.model.utils.user_settings.save",args:{doctype:r,user_settings:t},callback:function(e){frappe.model.user_settings[r]=e.message}})}});frappe.get_user_settings=function(r,t){var e=frappe.model.user_settings[r]||{};return t&&(e=e[t]||{}),e};frappe.user_info=function(r){if(r||(r=frappe.session.user),frappe.boot.user_info&&frappe.boot.user_info[r])var t=frappe.boot.user_info[r];else var t={fullname:r||"Unknown"};return t.abbr=frappe.get_abbr(t.fullname),t.color=frappe.get_palette(t.fullname),t};frappe.update_user_info=function(r){for(let t in r)frappe.boot.user_info[t]?Object.assign(frappe.boot.user_info[t],r[t]):frappe.boot.user_info[t]=r[t]};frappe.provide("frappe.user");$.extend(frappe.user,{name:"Guest",full_name:function(r){return r===frappe.session.user?__("You",null,"Name of the current user. For example: You edited this 5 hours ago."):frappe.user_info(r).fullname},image:function(r){return frappe.user_info(r).image},abbr:function(r){return frappe.user_info(r).abbr},has_role:function(r){typeof r=="string"&&(r=[r]);for(var t in r)if((frappe.boot?frappe.boot.user.roles:["Guest"]).indexOf(r[t])!=-1)return!0},get_desktop_items:function(){var r=$.map(frappe.boot.allowed_modules,function(t){var e=t.module_name,i=frappe.modules[e]&&frappe.modules[e].type;if(frappe.boot.user.allow_modules.indexOf(e)===-1)return null;var n=null;return i==="module"?(frappe.boot.user.allow_modules.indexOf(e)!=-1||frappe.modules[e].is_help)&&(n=e):i==="page"?frappe.boot.allowed_pages.indexOf(frappe.modules[e].link)!=-1&&(n=e):i==="list"?frappe.model.can_read(frappe.modules[e]._doctype)&&(n=e):i==="view"?n=e:i==="setup"?(frappe.user.has_role("System Manager")||frappe.user.has_role("Administrator"))&&(n=e):n=e,n});return r},is_report_manager:function(){return frappe.user.has_role(["Administrator","System Manager","Report Manager"])},get_formatted_email:function(r){var t=frappe.user.full_name(r);if(t){var e="";return t.search(/[\[\]\\()<>@,:;".]/)!==-1&&(e='"'),repl("%(quote)s%(fullname)s%(quote)s <%(email)s>",{fullname:t,email:r,quote:e})}else return r},get_emails:()=>Object.keys(frappe.boot.user_info).map(r=>frappe.boot.user_info[r].email),toString:function(){return this.name}});frappe.session_alive=!0;$(document).bind("mousemove",function(){frappe.session_alive===!1&&$(document).trigger("session_alive"),frappe.session_alive=!0,frappe.session_alive_timeout&&clearTimeout(frappe.session_alive_timeout),frappe.session_alive_timeout=setTimeout("frappe.session_alive=false;",3e4)});var $o=Vt(fd());frappe.avatar=function(r,t,e,i=null,n=!1,o=!1){let a;if(r)a=frappe.user_info(r);else{let l=e||frappe.get_cookie("full_name");a={image:i===null?frappe.get_cookie("user_image"):i,fullname:l,abbr:frappe.get_abbr(l),color:frappe.get_palette(l)}}e||(e=a.fullname);let s="";return o&&(t+=" filterable",s=`data-filter="_assign,like,%${r}%"`),frappe.get_avatar(t,e,i||a.image,n,s)};frappe.get_avatar=function(r,t,e=null,i,n){if(r||(r="avatar-small"),e){let o=window.cordova&&e.indexOf("http")===-1?frappe.base_url+e:e;return`<span class="avatar ${r}" title="${t}" ${n}>
				<span class="avatar-frame" style='background-image: url("${o}")'
					title="${t}"></span>
			</span>`}else{let o=frappe.get_abbr(t),a="";if(!i){let s=frappe.get_palette(t);a=`background-color: var(${s[0]}); color: var(${s[1]})`}return(r==="avatar-small"||r=="avatar-xs")&&(o=o.substr(0,1)),`<span class="avatar ${r}" title="${t}" ${n}>
			<div class="avatar-frame standard-image"
				style="${a}">
					${o}
			</div>
		</span>`}};frappe.avatar_group=function(r,t=4,e={}){let i="",n=r.slice(0,t),o=r.slice(t),a=e.css_class||"",s=n.map(d=>frappe.avatar(d,"avatar-small "+a,null,null,!1,e.filterable)).join("");o.length===1?s+=frappe.avatar(o[0],"avatar-small "+a,null,null,!1,e.filterable):o.length>1&&(s=`
			${s}
			<span class="avatar avatar-small ${a}">
				<div class="avatar-frame standard-image avatar-extra-count"
					title="${o.map(d=>frappe.user_info(d).fullname).join(", ")}">
					+${o.length}
				</div>
			</span>
		`),e.action_icon&&(i=`
			<span class="avatar avatar-small">
				<div class="avatar-frame avatar-action">
					${frappe.utils.icon(e.action_icon,"sm")}
				</div>
			</span>
		`);let l=$(`<div class="avatar-group ${e.align||"right"} ${e.overlap!=!1?"overlap":""}">
			${s}
			${i}
		</div>`);return l.find(".avatar-action").on("click",e.action),l};frappe.ui.scroll=function(r,t,e){var i=$(".navbar").height()+$(".page-head").height(),n=$(r).offset().top-i-cint(e);t?$("html, body").animate({scrollTop:n}):$(window).scrollTop(n)};frappe.palette=[["--orange-avatar-bg","--orange-avatar-color"],["--pink-avatar-bg","--pink-avatar-color"],["--blue-avatar-bg","--blue-avatar-color"],["--green-avatar-bg","--green-avatar-color"],["--dark-green-avatar-bg","--dark-green-avatar-color"],["--red-avatar-bg","--red-avatar-color"],["--yellow-avatar-bg","--yellow-avatar-color"],["--purple-avatar-bg","--purple-avatar-color"],["--gray-avatar-bg","--gray-avatar-color0"]];frappe.get_palette=function(r){var t=cint((parseInt((0,$o.default)(r).substr(4,2),16)+1)/5.33);return frappe.palette[t%8]};frappe.get_abbr=function(r,t){if(!r)return"";var e="";return $.each(r.split(" "),function(i,n){if(e.length>=(t||2))return!1;if(!n.trim().length)return!0;e+=n.trim()[0]}),e||"?"};frappe.gravatars={};frappe.get_gravatar=function(r,t=0){var e=t?"s="+t:"d=retro";return frappe.gravatars[r]||(frappe.gravatars[r]="https://secure.gravatar.com/avatar/"+(0,$o.default)(r)+"?"+e),frappe.gravatars[r]};window.repl=function(t,e){if(t==null)return"";for(var i in e)t=t.split("%("+i+")s").join(e[i]);return t};window.replace_all=function(r,t,e){return r.split(t).join(e)};window.strip_html=function(r){return cstr(r).replace(/<[^>]*>/g,"")};window.strip=function(r,t){if(r)return r=lstrip(r,t),r=rstrip(r,t),r};window.lstrip=function(t,e){e||(e=[`
`,"	"," "]);let i=t.substr(0,1);for(;in_list(e,i);)t=t.substr(1),i=t.substr(0,1);return t};window.rstrip=function(r,t){t||(t=[`
`,"	"," "]);let e=r.substr(r.length-1);for(;in_list(t,e);)r=r.substr(0,r.length-1),e=r.substr(r.length-1);return r};frappe.get_cookie=function(t){return frappe.get_cookies()[t]};frappe.get_cookies=function(){var t=document.cookie,e=0,i={};return document.cookie.match(/^\s*\$Version=(?:"1"|1);\s*(.*)/)&&(t=RegExp.$1,e=1),e===0?t.split(/[,;]/).map(function(n){var o=n.split(/=/,2),a=decodeURIComponent(o[0].trimLeft()),s=o.length>1?decodeURIComponent(o[1].trimRight()):null;s&&s.charAt(0)==='"'&&(s=s.substr(1,s.length-2)),i[a]=s}):t.match(/(?:^|\s+)([!#$%&'*+\-.0-9A-Z^`a-z|~]+)=([!#$%&'*+\-.0-9A-Z^`a-z|~]*|"(?:[\x20-\x7E\x80\xFF]|\\[\x00-\x7F])*")(?=\s*[,;]|$)/g).map(function(n,o){var a=n,s=o.charAt(0)==='"'?o.substr(1,-1).replace(/\\(.)/g,"$1"):o;i[a]=s}),i};frappe.is_mobile=function(){return $(document).width()<768};frappe.utils.xss_sanitise=function(r,t){let e=r,i={strategies:["html","js"]},n={"<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","/":"&#x2F;"},o=/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,a=/confirm\(.*\)|alert\(.*\)|prompt\(.*\)/gi;if(t=Object.assign({},i,t),t.strategies.includes("js")&&(e=e.replace(o,""),e=e.replace(a,"")),t.strategies.includes("html"))for(let s in n){let l=n[s],d=new RegExp(s,"g");e=e.replace(d,l)}return e};frappe.utils.sanitise_redirect=r=>{let t=(()=>i=>{function n(a){let s=/^(?:https?:\/\/)?(?:[^@\n]+@)?(?:www\.)?([^:/\n?]+)/gim.exec(a);return s==null?"":s[1]}function o(a){return/^(?:[a-z]+:)?\/\//i.test(a)}return o(i)?n(location.href)!==n(i):!1})(),e=i=>{let n=/j[\s]*(&#x.{1,7})?a[\s]*(&#x.{1,7})?v[\s]*(&#x.{1,7})?a[\s]*(&#x.{1,7})?s[\s]*(&#x.{1,7})?c[\s]*(&#x.{1,7})?r[\s]*(&#x.{1,7})?i[\s]*(&#x.{1,7})?p[\s]*(&#x.{1,7})?t/gi;return i.replace(n,"")};return r=frappe.utils.strip_url(r),t(r)?"":e(frappe.utils.xss_sanitise(r,{strategies:["js"]}))};frappe.utils.strip_url=r=>r.replace(/^[^A-Za-z0-9(//)#]+/g,"");frappe.utils.new_auto_repeat_prompt=function(r){let t=[{fieldname:"frequency",fieldtype:"Select",label:__("Frequency"),reqd:1,options:[{label:__("Daily"),value:"Daily"},{label:__("Weekly"),value:"Weekly"},{label:__("Monthly"),value:"Monthly"},{label:__("Quarterly"),value:"Quarterly"},{label:__("Half-yearly"),value:"Half-yearly"},{label:__("Yearly"),value:"Yearly"}]},{fieldname:"start_date",fieldtype:"Date",label:__("Start Date"),reqd:1,default:frappe.datetime.nowdate()},{fieldname:"end_date",fieldtype:"Date",label:__("End Date")}];frappe.prompt(t,function(e){frappe.call({method:"frappe.automation.doctype.auto_repeat.auto_repeat.make_auto_repeat",args:{doctype:r.doc.doctype,docname:r.doc.name,frequency:e.frequency,start_date:e.start_date,end_date:e.end_date},callback:function(i){i.message&&(frappe.show_alert({message:__("Auto Repeat created for this document"),indicator:"green"}),r.reload_doc())}})},__("Auto Repeat"),__("Save"))};frappe.utils.get_page_view_count=function(r){return frappe.call("frappe.website.doctype.web_page_view.web_page_view.get_page_view_count",{path:r})};frappe.urllib={get_arg:function(r){r=r.replace(/[[]/,"\\[").replace(/[\]]/,"\\]");var t="[\\?&]"+r+"=([^&#]*)",e=new RegExp(t),i=e.exec(window.location.href);return i==null?"":decodeURIComponent(i[1])},get_dict:function(){var r={},t=window.location.href.split("?")[1];if(!t||(t.indexOf("#")!=-1&&(t=t.split("#")[0]),!t))return r;t=t.split("&");for(var e=0;e<t.length;e++){var i=t[e].split("=");r[decodeURIComponent(i[0])]=decodeURIComponent(i[1])}return r},get_base_url:function(){var r=frappe.base_url||window.location.origin;return r.substr(r.length-1,1)=="/"&&(r=r.substr(0,r.length-1)),r},get_full_url:function(r){return r.indexOf("http://")===0||r.indexOf("https://")===0?r:r.substr(0,1)==="/"?frappe.urllib.get_base_url()+r:frappe.urllib.get_base_url()+"/"+r}};window.open_url_post=function(t,e,i){if(window.cordova){let l=t+"api/method/"+e.cmd+frappe.utils.make_query_string(e,!1);window.location.href=l}else{var n=document.createElement("form");n.action=t,n.method="POST",n.style.display="none",i&&(n.target="_blank"),e.csrf_token=frappe.csrf_token;for(var o in e){var a=document.createElement("textarea");a.name=o;var s=e[o];typeof s!="string"&&(s=JSON.stringify(s)),a.value=s,n.appendChild(a)}return document.body.appendChild(n),n.submit(),n}};window.get_url_arg=frappe.urllib.get_arg;window.get_url_dict=frappe.urllib.get_dict;function Lo(r,t){if(!r)return"";typeof r=="string"&&(r=frappe.datetime.convert_to_user_tz(r),r=new Date((r||"").replace(/-/g,"/").replace(/[TZ]/g," ").replace(/\.[0-9]*/,"")));let e=(new Date(frappe.datetime.now_datetime()).getTime()-r.getTime())/1e3,i=Math.floor(e/86400);if(isNaN(i)||i<0)return"";if(t)if(i==0){if(e<60)return __("now");if(e<3600)return __("{0} m",[Math.floor(e/60)]);if(e<86400)return __("{0} h",[Math.floor(e/3600)])}else return i<7?__("{0} d",[i]):i<31?__("{0} w",[Math.floor(i/7)]):i<365?__("{0} M",[Math.floor(i/30)]):__("{0} y",[Math.floor(i/365)]);else if(i==0){if(e<60)return __("just now");if(e<120)return __("1 minute ago");if(e<3600)return __("{0} minutes ago",[Math.floor(e/60)]);if(e<7200)return __("1 hour ago");if(e<86400)return __("{0} hours ago",[Math.floor(e/3600)])}else return i==1?__("yesterday"):i<7?__("{0} days ago",[i]):i<14?__("1 week ago"):i<31?__("{0} weeks ago",[Math.floor(i/7)]):i<62?__("1 month ago"):i<365?__("{0} months ago",[Math.floor(i/30)]):i<730?__("1 year ago"):__("{0} years ago",[Math.floor(i/365)])}frappe.provide("frappe.datetime");window.comment_when=function(r,t){var e=frappe.datetime.str_to_user?frappe.datetime.str_to_user(r):r;return'<span class="frappe-timestamp '+(t?" mini":"")+'" data-timestamp="'+r+'" title="'+e+'">'+Lo(r,t)+"</span>"};frappe.datetime.comment_when=comment_when;frappe.datetime.prettyDate=Lo;frappe.datetime.refresh_when=function(){jQuery&&$(".frappe-timestamp").each(function(){$(this).html(Lo($(this).attr("data-timestamp"),$(this).hasClass("mini")))})};setInterval(function(){frappe.datetime.refresh_when()},6e4);var _d=Vt(hd());frappe.provide("frappe.tools");frappe.tools.downloadify=function(r,t,e){if(t&&t.length&&!has_common(t,t)){frappe.msgprint(__("Export not allowed. You need {0} role to export.",[frappe.utils.comma_or(t)]));return}var i=e+".csv",n=frappe.tools.to_csv(r),o=document.createElement("a");if("download"in o){var a=new Blob([n],{type:"text/csv;charset=UTF-8"});o.href=URL.createObjectURL(a),o.download=i}else o.href="data:attachment/csv,"+encodeURIComponent(n),o.download=i,o.target="_blank";document.body.appendChild(o),o.click(),document.body.removeChild(o)};frappe.markdown=function(r){for(frappe.md2html||(frappe.md2html=new _d.default.Converter);r.substr(0,1)===`
`;)r=r.substr(1);for(var t=0,e=r.split(`
`)[0];[`
`,"	"].indexOf(e.substr(0,1))!==-1;)t++,e=e.substr(1);if(t&&t!=e.length){var i=[];$.each(r.split(`
`),function(n,o){i.push(o.substr(t))}),r=i.join(`
`)}return frappe.md2html.makeHtml(r)};frappe.tools.to_csv=function(r){var t=[];return $.each(r,function(e,i){i=$.map(i,function(n){return n==null&&(n=""),typeof n=="string"?'"'+$("<i>").html(n.replace(/"/g,'""')).text()+'"':n}),t.push(i.join(","))}),t.join(`
`)};frappe.provide("frappe.datetime");frappe.defaultDateFormat="YYYY-MM-DD";frappe.defaultTimeFormat="HH:mm:ss";frappe.defaultDatetimeFormat=frappe.defaultDateFormat+" "+frappe.defaultTimeFormat;moment.defaultFormat=frappe.defaultDateFormat;frappe.provide("frappe.datetime");$.extend(frappe.datetime,{convert_to_user_tz:function(r,t){let e=null;return frappe.boot.time_zone&&frappe.boot.time_zone.system&&frappe.boot.time_zone.user?e=moment.tz(r,frappe.boot.time_zone.system).clone().tz(frappe.boot.time_zone.user):e=moment(r),t===!1?e:e.format(frappe.defaultDatetimeFormat)},convert_to_system_tz:function(r,t){let e=null;return frappe.boot.time_zone&&frappe.boot.time_zone.system&&frappe.boot.time_zone.user?e=moment.tz(r,frappe.boot.time_zone.user).clone().tz(frappe.boot.time_zone.system):e=moment(r),t===!1?e:e.format(frappe.defaultDatetimeFormat)},is_system_time_zone:function(){return frappe.boot.time_zone&&frappe.boot.time_zone.system&&frappe.boot.time_zone.user?moment().tz(frappe.boot.time_zone.system).utcOffset()===moment().tz(frappe.boot.time_zone.user).utcOffset():!0},is_timezone_same:function(){return frappe.datetime.is_system_time_zone()},str_to_obj:function(r){return moment(r,frappe.defaultDatetimeFormat)._d},obj_to_str:function(r){return moment(r).locale("en").format()},obj_to_user:function(r){return moment(r).format(frappe.datetime.get_user_date_fmt().toUpperCase())},get_diff:function(r,t){return moment(r).diff(t,"days")},get_hour_diff:function(r,t){return moment(r).diff(t,"hours")},get_day_diff:function(r,t){return moment(r).diff(t,"days")},add_days:function(r,t){return moment(r).add(t,"days").format()},add_months:function(r,t){return moment(r).add(t,"months").format()},week_start:function(){return moment().startOf("week").format()},week_end:function(){return moment().endOf("week").format()},month_start:function(){return moment().startOf("month").format()},month_end:function(){return moment().endOf("month").format()},quarter_start:function(){return moment().startOf("quarter").format()},quarter_end:function(){return moment().endOf("quarter").format()},year_start:function(){return moment().startOf("year").format()},year_end:function(){return moment().endOf("year").format()},get_user_time_fmt:function(){return frappe.sys_defaults&&frappe.sys_defaults.time_format||"HH:mm:ss"},get_user_date_fmt:function(){return frappe.sys_defaults&&frappe.sys_defaults.date_format||"yyyy-mm-dd"},get_user_fmt:function(){return frappe.sys_defaults&&frappe.sys_defaults.date_format||"yyyy-mm-dd"},str_to_user:function(r,t=!1,e=!1){if(!r)return"";let i=frappe.datetime.get_user_date_fmt().toUpperCase(),n=frappe.datetime.get_user_time_fmt(),o=n;if(t)return moment(r,frappe.defaultTimeFormat).format(o);if(e)return moment(r,frappe.defaultDateFormat).format(i);{let a=moment.tz(r,frappe.boot.time_zone.system);return typeof r!="string"||r.indexOf(" ")===-1?o=i:o=i+" "+n,a.clone().tz(frappe.boot.time_zone.user).format(o)}},get_datetime_as_string:function(r){return moment(r).format("YYYY-MM-DD HH:mm:ss")},user_to_str:function(r,t=!1){var e=frappe.datetime.get_user_time_fmt();if(t)return moment(r,e).format(frappe.defaultTimeFormat);var i=frappe.datetime.get_user_date_fmt().toUpperCase(),n="YYYY-MM-DD";return r.indexOf(" ")!==-1&&(i+=" "+e,n+=" HH:mm:ss"),moment(r,[i.replace("YYYY","YY"),i]).locale("en").format(n)},user_to_obj:function(r){return frappe.datetime.str_to_obj(frappe.datetime.user_to_str(r))},global_date_format:function(r){var t=moment(r);return t._f&&t._f.indexOf("HH")!==-1?t.format("Do MMMM YYYY, hh:mm A"):t.format("Do MMMM YYYY")},now_date:function(r=!1){return frappe.datetime._date(frappe.defaultDateFormat,r)},now_time:function(r=!1){return frappe.datetime._date(frappe.defaultTimeFormat,r)},now_datetime:function(r=!1){return frappe.datetime._date(frappe.defaultDatetimeFormat,r)},system_datetime:function(r=!1){return frappe.datetime._date(frappe.defaultDatetimeFormat,r,!0)},_date:function(r,t=!1,e=!1){var o,a;let i=((o=frappe.boot.time_zone)==null?void 0:o.system)||frappe.sys_defaults.time_zone;e||(i=((a=frappe.boot.time_zone)==null?void 0:a.user)||i);let n=moment.tz(i);return t?frappe.datetime.moment_to_date_obj(n):n.format(r)},moment_to_date_obj:function(r){let t=new Date,e=r.toArray();return t.setFullYear(e[0]),t.setMonth(e[1]),t.setDate(e[2]),t.setHours(e[3]),t.setMinutes(e[4]),t.setSeconds(e[5]),t.setMilliseconds(e[6]),t},nowdate:function(){return frappe.datetime.now_date()},get_today:function(){return frappe.datetime.now_date()},get_time:r=>moment(r).format("hh:mm A"),validate:function(r){return moment(r,[frappe.defaultDateFormat,frappe.defaultDatetimeFormat,frappe.defaultTimeFormat],!0).isValid()},get_first_day_of_the_week_index(){let r=frappe.sys_defaults.first_day_of_the_week||"Sunday";return moment.weekdays().indexOf(r)}});Object.defineProperties(window,{dateutil:{get:function(){return console.warn("Please use `frappe.datetime` instead of `dateutil`. It will be deprecated soon."),frappe.datetime},configurable:!0},date:{get:function(){return console.warn("Please use `frappe.datetime` instead of `date`. It will be deprecated soon."),frappe.datetime},configurable:!0},get_today:{get:function(){return console.warn("Please use `frappe.datetime.get_today` instead of `get_today`. It will be deprecated soon."),frappe.datetime.get_today},configurable:!0}});window.cstr=function(r){return r==null?"":r+""};window.cint=function(r,t){return r===!0?1:r===!1?0:(r=r+"",r!=="0"&&(r=lstrip(r,["0"])),r=parseInt(r),isNaN(r)&&(r=t===void 0?0:t),r)};window.toTitle=function(r){var t=r.split(" "),e=[];for(var i in t)e[i]=t[i].charAt(0).toUpperCase()+t[i].slice(1);return e.join(" ")};window.is_null=function(r){if(r==null||cstr(r).trim()==="")return!0};window.copy_dict=function(r){var t={};for(var e in r)t[e]=r[e];return t};window.validate_email=function(r){return frappe.utils.validate_type(r,"email")};window.validate_phone=function(r){return frappe.utils.validate_type(r,"phone")};window.validate_name=function(r){return frappe.utils.validate_type(r,"name")};window.validate_url=function(r){return frappe.utils.validate_type(r,"url")};window.nth=function(r){r=cint(r);var t="th";return(r+"").substr(-1)=="1"&&(t="st"),(r+"").substr(-1)=="2"&&(t="nd"),(r+"").substr(-1)=="3"&&(t="rd"),r+t};window.has_words=function(r,t){if(!t)return!0;if(!r)return!1;for(var e=0,i=r.length;e<i;e++)if(t.indexOf(r[e])!=-1)return!0;return!1};window.has_common=function(r,t){if(!r||!t)return!1;for(var e=0,i=r.length;e<i;e++)if(in_list(t,r[e]))return!0;return!1};window.frappe||(window.frappe={});function an(r,t,e,i){if(r==null||r=="")return 0;if(!(typeof r=="number"||String(parseFloat(r))==r)){if(r=r+"",r.indexOf(" ")!=-1){var n=r.split(" ");r=isNaN(parseFloat(n[0]))?n.slice(n.length-1).join(" "):r}r=gd(r,e),r=parseFloat(r),isNaN(r)&&(r=0)}return r=parseFloat(r),t!=null?ln(r,t,i):r}function gd(r,t){t||(t=sn());var e=Bo(t),i=new RegExp(e.group_sep==="."?"\\.":e.group_sep,"g");if(r=r.replace(i,""),e.decimal_str!=="."&&e.decimal_str!==""){var n=new RegExp(e.decimal_str,"g");r=r.replace(n,".")}return r}frappe.number_format_info={"#,###.##":{decimal_str:".",group_sep:","},"#.###,##":{decimal_str:",",group_sep:"."},"# ###.##":{decimal_str:".",group_sep:" "},"# ###,##":{decimal_str:",",group_sep:" "},"#'###.##":{decimal_str:".",group_sep:"'"},"#, ###.##":{decimal_str:".",group_sep:", "},"#,##,###.##":{decimal_str:".",group_sep:","},"#,###.###":{decimal_str:".",group_sep:","},"#.###":{decimal_str:"",group_sep:"."},"#,###":{decimal_str:"",group_sep:","}};window.format_number=function(r,t,e){t||(t=sn(),e==null&&(e=cint(frappe.defaults.get_default("float_precision"))||3));var i=Bo(t);e==null&&(e=i.precision),r=an(r,e,t);let n=!1;r<0&&(n=!0),r=Math.abs(r),r=r.toFixed(e);var o=r.split("."),a=i.group_sep?3:0;if(a){for(var s=o[0],l="",d=s.length%a,u=s.length;u>=0;u--){var h=replace_all(l,i.group_sep,"").length;t=="#,##,###.##"&&l.indexOf(",")!=-1&&(a=2,h+=1),l+=s.charAt(u),h&&!((h+1)%a)&&u!=0&&(l+=i.group_sep)}o[0]=l.split("").reverse().join("")}return o[0]+""==""&&(o[0]="0"),o[1]=o[1]&&i.decimal_str?i.decimal_str+o[1]:"",(n?"-":"")+o[0]+o[1]};function md(r,t,e){var a;let i=sn(t),n=vd(t),o=(a=frappe.model.get_value(":Currency",t,"symbol_on_right"))!=null?a:!1;return e===void 0&&(e=frappe.boot.sysdefaults.currency_precision||null),n?o?format_number(r,i,e)+" "+__(n):__(n)+" "+format_number(r,i,e):format_number(r,i,e)}function vd(r){return frappe.boot?frappe.boot.sysdefaults&&frappe.boot.sysdefaults.hide_currency_symbol=="Yes"?null:(r||(r=frappe.boot.sysdefaults.currency),frappe.model.get_value(":Currency",r,"symbol")||r):frappe.currency_symbols[r]}function sn(r){return frappe.boot&&frappe.boot.sysdefaults&&frappe.boot.sysdefaults.number_format||"#,###.##"}function Bo(r){var t=frappe.number_format_info[r];return t||(t={decimal_str:".",group_sep:","}),t.precision=r.split(t.decimal_str).slice(1)[0].length,t}function ln(r,t,e){e=e||frappe.boot.sysdefaults.rounding_method||"Banker's Rounding (legacy)";let i=r<0;if(e=="Banker's Rounding (legacy)"){var n=cint(t),o=Math.pow(10,n),a=+(n?Math.abs(r)*o:Math.abs(r)).toFixed(8),s=Math.floor(a),l=a-s,d=!t&&l==.5?s%2==0?s:s+1:Math.round(a);return d=n?d/o:d,i?-d:d}else if(e=="Banker's Rounding"){if(r==0)return 0;t=cint(t);let u=Math.pow(10,t);r=Math.abs(r)*u;let h=Math.floor(r),p=r-h,m=2**(Math.log2(Math.abs(r))-52);return Math.abs(p-.5)<m?r=h%2==0?h:h+1:r=Math.round(r),r=r/u,i?-r:r}else if(e=="Commercial Rounding"){if(r==0)return 0;let u=cint(t),h=Math.pow(10,u);r=r*h;let p=2**(Math.log2(Math.abs(r))-52);return i&&(p=-1*p),r=Math.round(r+p),r/h}else throw new Error(`Unknown rounding method ${e}`)}function yw(r,t){return ln(r,t)}function ww(r,t){if(cur_frm){t||(t=cur_frm.doc);var e=frappe.meta.get_docfield(t.doctype,r,t.parent||t.name);return e||console.log(r+": could not find docfield in method precision()"),frappe.meta.get_field_precision(e,t)}else return frappe.boot.sysdefaults.float_precision}function kw(r,t){return r.includes(t)}function bd(r,t,e){e=cint(e);var i=Math.pow(10,e);if(e)var n=r*i%(t*i)/i;else var n=r%t;return an(n,e)}function xw(r,t,e){var i=an(frappe.model.get_value(":Currency",t,"smallest_currency_fraction_value"));if(i){var n=bd(r,i,e);n>i/2?r+=i-n:r-=n}else r=ln(r);return r}function Cw(r,t){return md(r,t)}Object.assign(window,{flt:an,cint,strip_number_groups:gd,format_currency:md,fmt_money:Cw,get_currency_symbol:vd,get_number_format:sn,get_number_format_info:Bo,_round:ln,roundNumber:yw,precision:ww,remainder:bd,round_based_on_smallest_currency_fraction:xw,in_list:kw});frappe.provide("frappe.help");frappe.help.youtube_id={};frappe.help.has_help=function(r){return frappe.help.youtube_id[r]};frappe.help.show=function(r){frappe.help.youtube_id[r]&&frappe.help.show_video(frappe.help.youtube_id[r])};frappe.help.show_video=function(r,t){if(frappe.utils.is_url(r)){let o='(?:youtube.com/(?:[^/]+/.+/|(?:v|e(?:mbed)?)/|.*[?&]v=)|youtu.be/)([^"&?\\s]{11})';r=r.match(o)[1]}let e=new frappe.ui.Dialog({title:t||__("Help"),size:"large"}),i=$(`<div class="video-player" data-plyr-provider="youtube" data-plyr-embed-id="${r}"></div>`);i.appendTo(e.body),e.show(),e.$wrapper.addClass("video-modal");let n;frappe.utils.load_video_player().then(()=>{n=new frappe.Plyr(i[0],{hideControls:!0,resetOnEnd:!0})}),e.onhide=()=>{n==null||n.destroy()}};$("body").on("click","a.help-link",function(){var r=$(this).attr("data-doctype");r&&frappe.help.show(r)});frappe.provide("frappe.help.help_links");frappe.help.help_links["data-import-tool"]=[{label:"Importing and Exporting Data",url:"https://frappe.github.io/erpnext/user/manual/en/setting-up/data/data-import-tool.html"}];frappe.help.help_links["modules/Setup"]=[{label:"Users and Permissions",url:"http://frappe.github.io/erpnext/user/manual/en/setting-up/users-and-permissions/"},{label:"Settings",url:"http://frappe.github.io/erpnext/user/manual/en/setting-up/settings/"},{label:"Data Management",url:"http://frappe.github.io/erpnext/user/manual/en/setting-up/data/"},{label:"Email",url:"http://frappe.github.io/erpnext/user/manual/en/setting-up/email/"},{label:"Printing",url:"http://frappe.github.io/erpnext/user/manual/en/setting-up/print/"}];frappe.help.help_links["List/User"]=[{label:"Adding Users",url:"https://frappe.github.io/erpnext/user/manual/en/setting-up/users-and-permissions/adding-users"},{label:"Rename User",url:"https://frappe.github.io/erpnext/user/manual/en/setting-up/articles/rename-user"}];frappe.help.help_links["permission-manager"]=[{label:"Role Permissions Manager",url:"https://frappe.github.io/erpnext/user/manual/en/setting-up/users-and-permissions/role-based-permissions"}];frappe.help.help_links["user-permissions"]=[{label:"User Permissions",url:"https://frappe.github.io/erpnext/user/manual/en/setting-up/users-and-permissions/user-permissions"}];frappe.help.help_links["Form/System Settings"]=[{label:"System Settings",url:"https://frappe.github.io/erpnext/user/manual/en/setting-up/settings/system-settings"}];frappe.help.help_links["List/Email Account"]=[{label:"Email Account",url:"https://frappe.github.io/erpnext/user/manual/en/setting-up/email/email-account"}];frappe.help.help_links["List/Notification"]=[{label:"Notification",url:"https://frappe.github.io/erpnext/user/manual/en/setting-up/email/email-alerts"}];frappe.help.help_links["Form/Print Settings"]=[{label:"Print Settings",url:"https://frappe.github.io/erpnext/user/manual/en/setting-up/print/print-settings"}];frappe.help.help_links["print-format-builder"]=[{label:"Print Format Builder",url:"https://frappe.github.io/erpnext/user/manual/en/setting-up/print/print-format-builder"}];frappe.provide("frappe.contacts");$.extend(frappe.contacts,{clear_address_and_contact:function(r){$(r.fields_dict.address_html.wrapper).html(""),r.fields_dict.contact_html&&$(r.fields_dict.contact_html.wrapper).html("")},render_address_and_contact:function(r){r.fields_dict.address_html&&"addr_list"in r.doc.__onload&&$(r.fields_dict.address_html.wrapper).html(frappe.render_template("address_list",r.doc.__onload)).find(".btn-address").on("click",function(){frappe.new_doc("Address")}),r.fields_dict.contact_html&&"contact_list"in r.doc.__onload&&$(r.fields_dict.contact_html.wrapper).html(frappe.render_template("contact_list",r.doc.__onload)).find(".btn-contact").on("click",function(){frappe.new_doc("Contact")})},get_last_doc:function(r){let e=frappe.route_history.slice().reverse().find(o=>o[0]==="Form"&&o[1]!==r.doctype),i=e&&e[1],n=e&&e[2];return e&&e.length>3&&(n=e.slice(2).join("/")),{doctype:i,docname:n}}});frappe.preview_email=function(r,t,e,i=!1,n=!1){return frappe.call({method:"frappe.email.email_body.get_email_html",args:{subject:"Test",template:r,args:t,header:e,with_container:i}}).then(o=>{var a=o.message;if(a=a.replace(/embed=/,"src="),n)return a;var s=frappe.msgprint({message:'<iframe width="100%" height="600px" style="border: none;"></iframe>',wide:!0});setTimeout(()=>{s.$wrapper.find("iframe").contents().find("html").html(a),s.$wrapper.find(".modal-dialog").css("width","70%")},1e3)})};frappe.provide("frappe.file_manager");frappe.file_manager=function(){let r=[],t=null,e=null;function i(a,s){r=a,t=s}function n(a){return new Promise((s,l)=>{if(r.length===0||!t){o(),s();return}e=a,frappe.call({method:"frappe.core.api.file.move_file",args:{file_list:r,new_parent:e,old_parent:t},callback:d=>{o(),s(d)}}).fail(l)})}function o(){r=[],t=null,e=null}return{cut:i,paste:n,get can_paste(){return Boolean(r.length>0&&t)},get old_folder(){return t},get files_to_move(){return r}}}();frappe.provide("frappe.ui");frappe.ui.DiffView=class{constructor(t,e,i){this.dialog=null,this.handler=null,this.doctype=t,this.fieldname=e,this.docname=i,this.dialog=this.make_dialog(),this.set_empty_state(),this.dialog.show()}make_dialog(){let t=()=>({query:"frappe.utils.diff.version_query",filters:{docname:this.docname,ref_doctype:this.doctype}}),e=()=>this.compute_diff();return new frappe.ui.Dialog({title:__("Compare Versions"),fields:[{label:__("From version"),fieldtype:"Link",fieldname:"from_version",options:"Version",reqd:1,get_query:t,onchange:e},{fieldtype:"Column Break",fieldname:"cb"},{label:__("To version"),fieldtype:"Link",fieldname:"to_version",options:"Version",reqd:1,get_query:t,onchange:e},{fieldtype:"Section Break",fieldname:"sb"},{label:__("Diff"),fieldtype:"HTML",fieldname:"diff"}],size:"extra-large"})}compute_diff(){let t=this.dialog.get_value("from_version"),e=this.dialog.get_value("to_version"),i=this.fieldname;t&&e?frappe.xcall("frappe.utils.diff.get_version_diff",{from_version:t,to_version:e,fieldname:i}).then(n=>{this.dialog.set_value("diff",this.prettify_diff(n))}):this.set_empty_state()}prettify_diff(t){let e="";return t.forEach(i=>{let n="";i.startsWith("+")?n="insert":i.startsWith("-")&&(n="delete"),e+=`<div class="${n} text-wrap">${i}</div>`}),`<div class='diffview'>${e}</div>`}set_empty_state(){this.dialog.set_value("diff",__("Select two versions to view the diff."))}};frappe.provide("frappe.utils.datatable");frappe.utils.datatable.get_translations=function(){let r={};return r[frappe.boot.lang]={"Sort Ascending":__("Sort Ascending"),"Sort Descending":__("Sort Descending"),"Reset sorting":__("Reset sorting"),"Remove column":__("Remove column"),"No Data":__("No Data"),"{count} cells copied":{1:__("{count} cell copied"),default:__("{count} cells copied")},"{count} rows selected":{1:__("{count} row selected"),default:__("{count} rows selected")}},r};var Sw={name:"ProgressRing",props:{primary:String,secondary:String,radius:Number,progress:Number,stroke:Number},data(){let r=this.radius-this.stroke*2,t=r*2*Math.PI;return{normalizedRadius:r,circumference:t}},computed:{strokeDashoffset(){return this.circumference-this.progress/100*this.circumference}}},yd=function(){var r=this,t=r.$createElement,e=r._self._c||t;return e("svg",{attrs:{height:r.radius*2,width:r.radius*2}},[e("circle",{style:{stroke:r.secondary,strokeDashoffset:0},attrs:{"stroke-dasharray":r.circumference+" "+r.circumference,"stroke-width":r.stroke,fill:"transparent",r:r.normalizedRadius,cx:r.radius,cy:r.radius}}),r._v(" "),e("circle",{style:{stroke:r.primary,strokeDashoffset:r.strokeDashoffset},attrs:{"stroke-dasharray":r.circumference+" "+r.circumference,"stroke-width":r.stroke,fill:"transparent",r:r.normalizedRadius,cx:r.radius,cy:r.radius}}),r._v(" "),e("text",{style:{color:"var(--text-color)",fontSize:"var(--text-xs)",fontWeight:"var(--text-bold)"},attrs:{"dominant-baseline":"middle","text-anchor":"middle",x:r.radius,y:r.radius}},[r._v(`
		`+r._s(r.progress)+`%
	`)])])},Tw=[];yd._withStripped=!0;var Ew=function(r){!r||r("data-v-0f538d8f_0",{source:`
circle[data-v-0f538d8f] {
	transition: stroke-dashoffset 0.35s;
	transform: rotate(-90deg);
	transform-origin: 50% 50%;
}
`,map:{version:3,sources:["frappe/public/js/frappe/file_uploader/ProgressRing.vue"],names:[],mappings:";AAsEA;CACA,mCAAA;CACA,yBAAA;CACA,yBAAA;AACA",file:"ProgressRing.vue",sourcesContent:[`<template>
	<svg :height="radius * 2" :width="radius * 2">
		<circle
			:stroke-dasharray="circumference + ' ' + circumference"
			:style="{
				stroke: secondary,
				strokeDashoffset: 0
			}"
			:stroke-width="stroke"
			fill="transparent"
			:r="normalizedRadius"
			:cx="radius"
			:cy="radius"
		/>
		<circle
			:stroke-dasharray="circumference + ' ' + circumference"
			:style="{
				stroke: primary,
				strokeDashoffset: strokeDashoffset
			}"
			:stroke-width="stroke"
			fill="transparent"
			:r="normalizedRadius"
			:cx="radius"
			:cy="radius"
		/>
		<text
			dominant-baseline="middle"
			text-anchor="middle"
			:x="radius"
			:y="radius"
			:style="{
				color: 'var(--text-color)',
				fontSize: 'var(--text-xs)',
				fontWeight: 'var(--text-bold)'
			}"
		>
			{{ progress }}%
		</text>
	</svg>
</template>
<script>
export default {
	name: "ProgressRing",
	props: {
		primary: String,
		secondary: String,
		radius: Number,
		progress: Number,
		stroke: Number
	},
	data() {
		const normalizedRadius = this.radius - this.stroke * 2;
		const circumference = normalizedRadius * 2 * Math.PI;

		return {
			normalizedRadius,
			circumference
		};
	},
	computed: {
		strokeDashoffset() {
			return (
				this.circumference - (this.progress / 100) * this.circumference
			);
		}
	}
};
<\/script>
<style scoped>
circle {
	transition: stroke-dashoffset 0.35s;
	transform: rotate(-90deg);
	transform-origin: 50% 50%;
}
</style>
`]},media:void 0})},Aw="data-v-0f538d8f",Ow=void 0,Mw=!1;function $w(r,t,e,i,n,o,a,s,l,d){let u=(typeof e=="function"?e.options:e)||{};u.__file="frappe/public/js/frappe/file_uploader/ProgressRing.vue",u.render||(u.render=r.render,u.staticRenderFns=r.staticRenderFns,u._compiled=!0,n&&(u.functional=!0)),u._scopeId=i;{let h;if(t&&(h=a?function(p){t.call(this,d(p,this.$root.$options.shadowRoot))}:function(p){t.call(this,s(p))}),h!==void 0)if(u.functional){let p=u.render;u.render=function(x,y){return h.call(y),p(x,y)}}else{let p=u.beforeCreate;u.beforeCreate=p?[].concat(p,h):[h]}}return u}function Io(){let r=Io.styles||(Io.styles={}),t=typeof navigator!="undefined"&&/msie [6-9]\\b/.test(navigator.userAgent.toLowerCase());return function(i,n){if(document.querySelector('style[data-vue-ssr-id~="'+i+'"]'))return;let o=t?n.media||"default":i,a=r[o]||(r[o]={ids:[],parts:[],element:void 0});if(!a.ids.includes(i)){let s=n.source,l=a.ids.length;if(a.ids.push(i),t&&(a.element=a.element||document.querySelector("style[data-group="+o+"]")),!a.element){let d=document.head||document.getElementsByTagName("head")[0],u=a.element=document.createElement("style");u.type="text/css",n.media&&u.setAttribute("media",n.media),t&&(u.setAttribute("data-group",o),u.setAttribute("data-next-index","0")),d.appendChild(u)}if(t&&(l=parseInt(a.element.getAttribute("data-next-index")),a.element.setAttribute("data-next-index",l+1)),a.element.styleSheet)a.parts.push(s),a.element.styleSheet.cssText=a.parts.filter(Boolean).join(`
`);else{let d=document.createTextNode(s),u=a.element.childNodes;u[l]&&a.element.removeChild(u[l]),u.length?a.element.insertBefore(d,u[l]):a.element.appendChild(d)}}}}var Lw=$w({render:yd,staticRenderFns:Tw},Ew,Sw,Aw,Mw,Ow,!1,Io,void 0,void 0),wd=Lw;var Bw={name:"FilePreview",props:["file"],components:{ProgressRing:wd},data(){return{src:null,optimize:this.file.optimize}},mounted(){if(this.is_image&&window.FileReader){let r=new FileReader;r.onload=()=>this.src=r.result,r.readAsDataURL(this.file.file_obj)}},filters:{file_size(r){return frappe.form.formatters.FileSize(r)},file_name(r){return r}},computed:{is_private(){return this.file.doc?this.file.doc.is_private:this.file.private},uploaded(){return this.file.request_succeeded},is_image(){return this.file.file_obj.type.startsWith("image")},is_optimizable(){let r=this.file.file_obj.type=="image/svg+xml";return this.is_image&&!r&&!this.uploaded&&!this.file.failed},is_cropable(){let r=["image/jpeg","image/png"];return!this.uploaded&&!this.file.uploading&&!this.file.failed&&r.includes(this.file.file_obj.type)},progress(){let r=Math.round(this.file.progress*100/this.file.total);return isNaN(r)&&(r=0),r}}},kd=function(){var r=this,t=r.$createElement,e=r._self._c||t;return e("div",{staticClass:"file-preview"},[e("div",{staticClass:"file-icon"},[r.is_image?e("img",{attrs:{src:r.src,alt:r.file.name}}):e("div",{staticClass:"fallback",domProps:{innerHTML:r._s(r.frappe.utils.icon("file","md"))}})]),r._v(" "),e("div",[e("div",[r.file.doc?e("a",{staticClass:"flex",attrs:{href:r.file.doc.file_url,target:"_blank"}},[e("span",{staticClass:"file-name"},[r._v(r._s(r._f("file_name")(r.file.name)))])]):e("span",{staticClass:"file-name"},[r._v(r._s(r._f("file_name")(r.file.name)))])]),r._v(" "),e("div",[e("span",{staticClass:"file-size"},[r._v(`
				`+r._s(r._f("file_size")(r.file.file_obj.size))+`
			`)])]),r._v(" "),e("div",{staticClass:"flex config-area"},[r.is_optimizable?e("label",{staticClass:"frappe-checkbox"},[e("input",{attrs:{type:"checkbox"},domProps:{checked:r.optimize},on:{change:function(i){return r.$emit("toggle_optimize")}}}),r._v("Optimize")]):r._e(),r._v(" "),e("label",{staticClass:"frappe-checkbox"},[e("input",{attrs:{type:"checkbox"},domProps:{checked:r.file.private},on:{change:function(i){return r.$emit("toggle_private")}}}),r._v("Private")])]),r._v(" "),e("div",[r.file.error_message?e("span",{staticClass:"file-error text-danger"},[r._v(`
				`+r._s(r.file.error_message)+`
			`)]):r._e()])]),r._v(" "),e("div",{staticClass:"file-actions"},[e("ProgressRing",{directives:[{name:"show",rawName:"v-show",value:r.file.uploading&&!r.uploaded&&!r.file.failed,expression:"file.uploading && !uploaded && !file.failed"}],attrs:{primary:"var(--primary-color)",secondary:"var(--gray-200)",radius:24,progress:r.progress,stroke:3}}),r._v(" "),r.uploaded?e("div",{domProps:{innerHTML:r._s(r.frappe.utils.icon("solid-success","lg"))}}):r._e(),r._v(" "),r.file.failed?e("div",{domProps:{innerHTML:r._s(r.frappe.utils.icon("solid-error","lg"))}}):r._e(),r._v(" "),e("div",{staticClass:"file-action-buttons"},[r.is_cropable?e("button",{staticClass:"btn btn-crop muted",domProps:{innerHTML:r._s(r.frappe.utils.icon("crop","md"))},on:{click:function(i){return r.$emit("toggle_image_cropper")}}}):r._e(),r._v(" "),!r.uploaded&&!r.file.uploading&&!r.file.failed?e("button",{staticClass:"btn muted",domProps:{innerHTML:r._s(r.frappe.utils.icon("delete","md"))},on:{click:function(i){return r.$emit("remove")}}}):r._e()])],1)])},Iw=[];kd._withStripped=!0;var Rw=function(r){!r||r("data-v-78fcc692_0",{source:`
.file-preview {
	display: flex;
	align-items: center;
	padding: 0.75rem;
	border: 1px solid transparent;
}
.file-preview + .file-preview {
	border-top-color: var(--border-color);
}
.file-preview:hover {
	background-color: var(--bg-color);
	border-color: var(--dark-border-color);
	border-radius: var(--border-radius);
}
.file-preview:hover + .file-preview {
	border-top-color: transparent;
}
.file-icon {
	border-radius: var(--border-radius);
	width: 2.625rem;
	height: 2.625rem;
	overflow: hidden;
	margin-right: var(--margin-md);
	flex-shrink: 0;
}
.file-icon img {
	width: 100%;
	height: 100%;
	object-fit: cover;
}
.file-icon .fallback {
	width: 100%;
	height: 100%;
	display: flex;
	align-items: center;
	justify-content: center;
	border: 1px solid var(--border-color);
	border-radius: var(--border-radius);
}
.file-name {
	font-size: var(--text-base);
	font-weight: var(--text-bold);
	color: var(--text-color);
	display: -webkit-box;
	-webkit-line-clamp: 1;
	-webkit-box-orient: vertical;
	overflow: hidden;
}
.file-size {
	font-size: var(--text-sm);
	color: var(--text-light);
}
.file-actions {
	width: 3rem;
	flex-shrink: 0;
	margin-left: auto;
	text-align: center;
}
.file-actions .btn {
	padding: var(--padding-xs);
	box-shadow: none;
}
.file-action-buttons {
	display: flex;
	justify-content: flex-end;
}
.muted {
	opacity: 0.5;
	transition: 0.3s;
}
.muted:hover {
	opacity: 1;
}
.frappe-checkbox {
	font-size: var(--text-sm);
	color: var(--text-light);
	display: flex;
	align-items: center;
	padding-top: 0.25rem;
}
.config-area {
	gap: 0.5rem;
}
.file-error {
	font-size: var(--text-sm);
	font-weight: var(--text-bold);
}
`,map:{version:3,sources:["frappe/public/js/frappe/file_uploader/FilePreview.vue"],names:[],mappings:";AAoHA;CACA,aAAA;CACA,mBAAA;CACA,gBAAA;CACA,6BAAA;AACA;AAEA;CACA,qCAAA;AACA;AAEA;CACA,iCAAA;CACA,sCAAA;CACA,mCAAA;AACA;AAEA;CACA,6BAAA;AACA;AAEA;CACA,mCAAA;CACA,eAAA;CACA,gBAAA;CACA,gBAAA;CACA,8BAAA;CACA,cAAA;AACA;AAEA;CACA,WAAA;CACA,YAAA;CACA,iBAAA;AACA;AAEA;CACA,WAAA;CACA,YAAA;CACA,aAAA;CACA,mBAAA;CACA,uBAAA;CACA,qCAAA;CACA,mCAAA;AACA;AAEA;CACA,2BAAA;CACA,6BAAA;CACA,wBAAA;CACA,oBAAA;CACA,qBAAA;CACA,4BAAA;CACA,gBAAA;AACA;AAEA;CACA,yBAAA;CACA,wBAAA;AACA;AAEA;CACA,WAAA;CACA,cAAA;CACA,iBAAA;CACA,kBAAA;AACA;AAEA;CACA,0BAAA;CACA,gBAAA;AACA;AAEA;CACA,aAAA;CACA,yBAAA;AACA;AAEA;CACA,YAAA;CACA,gBAAA;AACA;AAEA;CACA,UAAA;AACA;AAEA;CACA,yBAAA;CACA,wBAAA;CACA,aAAA;CACA,mBAAA;CACA,oBAAA;AACA;AAEA;CACA,WAAA;AACA;AAEA;CACA,yBAAA;CACA,6BAAA;AACA",file:"FilePreview.vue",sourcesContent:[`<template>
	<div class="file-preview">
		<div class="file-icon">
			<img
				v-if="is_image"
				:src="src"
				:alt="file.name"
			>
			<div class="fallback" v-else v-html="frappe.utils.icon('file', 'md')">
			</div>
		</div>
		<div>
			<div>
				<a class="flex" :href="file.doc.file_url" v-if="file.doc" target="_blank">
					<span class="file-name">{{ file.name | file_name }}</span>
				</a>
				<span class="file-name" v-else>{{ file.name | file_name }}</span>
			</div>

			<div>
				<span class="file-size">
					{{ file.file_obj.size | file_size }}
				</span>
			</div>

			<div class="flex config-area">
				<label v-if="is_optimizable" class="frappe-checkbox"><input type="checkbox" :checked="optimize" @change="$emit('toggle_optimize')">Optimize</label>
				<label class="frappe-checkbox"><input type="checkbox" :checked="file.private" @change="$emit('toggle_private')">Private</label>
			</div>
			<div>
				<span v-if="file.error_message" class="file-error text-danger">
					{{ file.error_message }}
				</span>
			</div>
		</div>
		<div class="file-actions">
			<ProgressRing
				v-show="file.uploading && !uploaded && !file.failed"
				primary="var(--primary-color)"
				secondary="var(--gray-200)"
				:radius="24"
				:progress="progress"
				:stroke="3"
			/>
			<div v-if="uploaded" v-html="frappe.utils.icon('solid-success', 'lg')"></div>
			<div v-if="file.failed" v-html="frappe.utils.icon('solid-error', 'lg')"></div>
			<div class="file-action-buttons">
				<button v-if="is_cropable" class="btn btn-crop muted" @click="$emit('toggle_image_cropper')" v-html="frappe.utils.icon('crop', 'md')"></button>
				<button v-if="!uploaded && !file.uploading && !file.failed" class="btn muted" @click="$emit('remove')" v-html="frappe.utils.icon('delete', 'md')"></button>
			</div>
		</div>
	</div>
</template>

<script>
import ProgressRing from './ProgressRing.vue';
export default {
	name: 'FilePreview',
	props: ['file'],
	components: {
		ProgressRing
	},
	data() {
		return {
			src: null,
			optimize: this.file.optimize
		}
	},
	mounted() {
		if (this.is_image) {
			if (window.FileReader) {
				let fr = new FileReader();
				fr.onload = () => this.src = fr.result;
				fr.readAsDataURL(this.file.file_obj);
			}
		}
	},
	filters: {
		file_size(value) {
			return frappe.form.formatters.FileSize(value);
		},
		file_name(value) {
			return value;
			// return frappe.utils.file_name_ellipsis(value, 9);
		}
	},
	computed: {
		is_private() {
			return this.file.doc ? this.file.doc.is_private : this.file.private;
		},
		uploaded() {
			return this.file.request_succeeded;
		},
		is_image() {
			return this.file.file_obj.type.startsWith('image');
		},
		is_optimizable() {
			let is_svg = this.file.file_obj.type == 'image/svg+xml';
			return this.is_image && !is_svg && !this.uploaded && !this.file.failed;
		},
		is_cropable() {
			let croppable_types = ['image/jpeg', 'image/png'];
			return !this.uploaded && !this.file.uploading && !this.file.failed && croppable_types.includes(this.file.file_obj.type);
		},
		progress() {
			let value = Math.round((this.file.progress * 100) / this.file.total);
			if (isNaN(value)) {
				value = 0;
			}
			return value;
		}
	}
}
<\/script>

<style>
.file-preview {
	display: flex;
	align-items: center;
	padding: 0.75rem;
	border: 1px solid transparent;
}

.file-preview + .file-preview {
	border-top-color: var(--border-color);
}

.file-preview:hover {
	background-color: var(--bg-color);
	border-color: var(--dark-border-color);
	border-radius: var(--border-radius);
}

.file-preview:hover + .file-preview {
	border-top-color: transparent;
}

.file-icon {
	border-radius: var(--border-radius);
	width: 2.625rem;
	height: 2.625rem;
	overflow: hidden;
	margin-right: var(--margin-md);
	flex-shrink: 0;
}

.file-icon img {
	width: 100%;
	height: 100%;
	object-fit: cover;
}

.file-icon .fallback {
	width: 100%;
	height: 100%;
	display: flex;
	align-items: center;
	justify-content: center;
	border: 1px solid var(--border-color);
	border-radius: var(--border-radius);
}

.file-name {
	font-size: var(--text-base);
	font-weight: var(--text-bold);
	color: var(--text-color);
	display: -webkit-box;
	-webkit-line-clamp: 1;
	-webkit-box-orient: vertical;
	overflow: hidden;
}

.file-size {
	font-size: var(--text-sm);
	color: var(--text-light);
}

.file-actions {
	width: 3rem;
	flex-shrink: 0;
	margin-left: auto;
	text-align: center;
}

.file-actions .btn {
	padding: var(--padding-xs);
	box-shadow: none;
}

.file-action-buttons {
	display: flex;
	justify-content: flex-end;
}

.muted {
	opacity: 0.5;
	transition: 0.3s;
}

.muted:hover {
	opacity: 1;
}

.frappe-checkbox {
	font-size: var(--text-sm);
	color: var(--text-light);
	display: flex;
	align-items: center;
	padding-top: 0.25rem;
}

.config-area {
	gap: 0.5rem;
}

.file-error {
	font-size: var(--text-sm);
	font-weight: var(--text-bold);
}
</style>
`]},media:void 0})},Pw=void 0,Nw=void 0,jw=!1;function Dw(r,t,e,i,n,o,a,s,l,d){let u=(typeof e=="function"?e.options:e)||{};u.__file="frappe/public/js/frappe/file_uploader/FilePreview.vue",u.render||(u.render=r.render,u.staticRenderFns=r.staticRenderFns,u._compiled=!0,n&&(u.functional=!0)),u._scopeId=i;{let h;if(t&&(h=a?function(p){t.call(this,d(p,this.$root.$options.shadowRoot))}:function(p){t.call(this,s(p))}),h!==void 0)if(u.functional){let p=u.render;u.render=function(x,y){return h.call(y),p(x,y)}}else{let p=u.beforeCreate;u.beforeCreate=p?[].concat(p,h):[h]}}return u}function Ro(){let r=Ro.styles||(Ro.styles={}),t=typeof navigator!="undefined"&&/msie [6-9]\\b/.test(navigator.userAgent.toLowerCase());return function(i,n){if(document.querySelector('style[data-vue-ssr-id~="'+i+'"]'))return;let o=t?n.media||"default":i,a=r[o]||(r[o]={ids:[],parts:[],element:void 0});if(!a.ids.includes(i)){let s=n.source,l=a.ids.length;if(a.ids.push(i),t&&(a.element=a.element||document.querySelector("style[data-group="+o+"]")),!a.element){let d=document.head||document.getElementsByTagName("head")[0],u=a.element=document.createElement("style");u.type="text/css",n.media&&u.setAttribute("media",n.media),t&&(u.setAttribute("data-group",o),u.setAttribute("data-next-index","0")),d.appendChild(u)}if(t&&(l=parseInt(a.element.getAttribute("data-next-index")),a.element.setAttribute("data-next-index",l+1)),a.element.styleSheet)a.parts.push(s),a.element.styleSheet.cssText=a.parts.filter(Boolean).join(`
`);else{let d=document.createTextNode(s),u=a.element.childNodes;u[l]&&a.element.removeChild(u[l]),u.length?a.element.insertBefore(d,u[l]):a.element.appendChild(d)}}}}var Fw=Dw({render:kd,staticRenderFns:Iw},Rw,Bw,Pw,jw,Nw,!1,Ro,void 0,void 0),xd=Fw;var zw={name:"TreeNode",props:["node","selected_node"],components:{TreeNode:()=>frappe.ui.components.TreeNode},computed:{icon(){let r={open:frappe.utils.icon("folder-open","md"),closed:frappe.utils.icon("folder-normal","md"),leaf:frappe.utils.icon("primitive-dot","xs"),search:frappe.utils.icon("search")};return this.node.by_search?r.search:this.node.is_leaf?r.leaf:this.node.open?r.open:r.closed}}},Cd=function(){var r=this,t=r.$createElement,e=r._self._c||t;return e("div",{staticClass:"tree-node",class:{opened:r.node.open}},[e("span",{staticClass:"tree-link",class:{active:r.node.value===r.selected_node.value},attrs:{disabled:r.node.fetching},on:{click:function(i){return r.$emit("node-click",r.node)}}},[e("div",{domProps:{innerHTML:r._s(r.icon)}}),r._v(" "),e("a",{staticClass:"tree-label"},[r._v(r._s(r.node.label))])]),r._v(" "),e("ul",{directives:[{name:"show",rawName:"v-show",value:r.node.open,expression:"node.open"}],staticClass:"tree-children"},[r._l(r.node.children,function(i){return e("TreeNode",{key:i.value,attrs:{node:i,selected_node:r.selected_node},on:{"node-click":function(n){return r.$emit("node-click",n)},"load-more":function(n){return r.$emit("load-more",n)}}})}),r._v(" "),r.node.has_more_children?e("button",{staticClass:"btn btn-xs btn-load-more",attrs:{disabled:r.node.children_loading},on:{click:function(i){return r.$emit("load-more",r.node)}}},[r._v(`
			`+r._s(r.node.children_loading?r.__("Loading..."):r.__("Load more"))+`
		`)]):r._e()],2)])},Hw=[];Cd._withStripped=!0;var qw=function(r){!r||r("data-v-23974a16_0",{source:`
.btn-load-more[data-v-23974a16] {
	margin-left: 1.6rem;
	margin-top: 0.5rem;
}
`,map:{version:3,sources:["frappe/public/js/frappe/file_uploader/TreeNode.vue"],names:[],mappings:";AAwDA;CACA,mBAAA;CACA,kBAAA;AACA",file:"TreeNode.vue",sourcesContent:[`<template>
	<div class="tree-node" :class="{ opened: node.open }">
		<span
			class="tree-link"
			@click="$emit('node-click', node)"
			:class="{ active: node.value === selected_node.value }"
			:disabled="node.fetching"
		>
			<div v-html="icon"></div>
			<a class="tree-label">{{ node.label }}</a>
		</span>
		<ul class="tree-children" v-show="node.open">
			<TreeNode
				v-for="n in node.children"
				:key="n.value"
				:node="n"
				:selected_node="selected_node"
				@node-click="n => $emit('node-click', n)"
				@load-more="n => $emit('load-more', n)"
			/>
			<button
				class="btn btn-xs btn-load-more"
				v-if="node.has_more_children"
				@click="$emit('load-more', node)"
				:disabled="node.children_loading"
			>
				{{ node.children_loading ? __("Loading...") : __("Load more") }}
			</button>
		</ul>
	</div>
</template>
<script>
export default {
	name: "TreeNode",
	props: ["node", "selected_node"],
	components: {
		TreeNode: () => frappe.ui.components.TreeNode
	},
	computed: {
		icon() {
			let icons = {
				open: frappe.utils.icon("folder-open", "md"),
				closed: frappe.utils.icon("folder-normal", "md"),
				leaf: frappe.utils.icon("primitive-dot", "xs"),
				search: frappe.utils.icon("search")
			};

			if (this.node.by_search) return icons.search;
			if (this.node.is_leaf) return icons.leaf;
			if (this.node.open) return icons.open;
			return icons.closed;
		}
	}
};
<\/script>
<style scoped>
.btn-load-more {
	margin-left: 1.6rem;
	margin-top: 0.5rem;
}
</style>
`]},media:void 0})},Ww="data-v-23974a16",Uw=void 0,Vw=!1;function Yw(r,t,e,i,n,o,a,s,l,d){let u=(typeof e=="function"?e.options:e)||{};u.__file="frappe/public/js/frappe/file_uploader/TreeNode.vue",u.render||(u.render=r.render,u.staticRenderFns=r.staticRenderFns,u._compiled=!0,n&&(u.functional=!0)),u._scopeId=i;{let h;if(t&&(h=a?function(p){t.call(this,d(p,this.$root.$options.shadowRoot))}:function(p){t.call(this,s(p))}),h!==void 0)if(u.functional){let p=u.render;u.render=function(x,y){return h.call(y),p(x,y)}}else{let p=u.beforeCreate;u.beforeCreate=p?[].concat(p,h):[h]}}return u}function Po(){let r=Po.styles||(Po.styles={}),t=typeof navigator!="undefined"&&/msie [6-9]\\b/.test(navigator.userAgent.toLowerCase());return function(i,n){if(document.querySelector('style[data-vue-ssr-id~="'+i+'"]'))return;let o=t?n.media||"default":i,a=r[o]||(r[o]={ids:[],parts:[],element:void 0});if(!a.ids.includes(i)){let s=n.source,l=a.ids.length;if(a.ids.push(i),t&&(a.element=a.element||document.querySelector("style[data-group="+o+"]")),!a.element){let d=document.head||document.getElementsByTagName("head")[0],u=a.element=document.createElement("style");u.type="text/css",n.media&&u.setAttribute("media",n.media),t&&(u.setAttribute("data-group",o),u.setAttribute("data-next-index","0")),d.appendChild(u)}if(t&&(l=parseInt(a.element.getAttribute("data-next-index")),a.element.setAttribute("data-next-index",l+1)),a.element.styleSheet)a.parts.push(s),a.element.styleSheet.cssText=a.parts.filter(Boolean).join(`
`);else{let d=document.createTextNode(s),u=a.element.childNodes;u[l]&&a.element.removeChild(u[l]),u.length?a.element.insertBefore(d,u[l]):a.element.appendChild(d)}}}}var Gw=Yw({render:Cd,staticRenderFns:Hw},qw,zw,Ww,Vw,Uw,!1,Po,void 0,void 0),Sd=Gw;var Xw={name:"FileBrowser",components:{TreeNode:Sd},data(){return{node:{label:__("Home"),value:"Home",children:[],children_start:0,children_loading:!1,is_leaf:!1,fetching:!1,fetched:!1,open:!1,filtered:!0},selected_node:{},search_text:"",page_length:10}},mounted(){this.toggle_node(this.node)},methods:{toggle_node(r){!r.fetched&&!r.is_leaf?(r.fetching=!0,r.children_start=0,r.children_loading=!1,this.get_files_in_folder(r.value,0).then(({files:t,has_more:e})=>{r.open=!0,r.children=t,r.fetched=!0,r.fetching=!1,r.children_start+=this.page_length,r.has_more_children=e})):(r.open=!r.open,this.select_node(r))},load_more(r){if(r.has_more_children){let t=r.children_start;r.children_loading=!0,this.get_files_in_folder(r.value,t).then(({files:e,has_more:i})=>{r.children=r.children.concat(e),r.children_start+=this.page_length,r.has_more_children=i,r.children_loading=!1})}},select_node(r){r.is_leaf&&(this.selected_node=r)},get_files_in_folder(r,t){return frappe.call("frappe.core.api.file.get_files_in_folder",{folder:r,start:t,page_length:this.page_length}).then(e=>{let{files:i=[],has_more:n=!1}=e.message||{};return i.sort((o,a)=>o.is_folder&&a.is_folder?o.modified<a.modified?-1:1:o.is_folder?-1:a.is_folder?1:0),i=i.map(o=>this.make_file_node(o)),{files:i,has_more:n}})},search_by_name:frappe.utils.debounce(function(){if(this.search_text===""){this.node=this.folder_node;return}this.search_text.length<3||frappe.call("frappe.core.api.file.get_files_by_search_text",{text:this.search_text}).then(r=>{let t=r.message||[];t=t.map(e=>this.make_file_node(e)),this.folder_node||(this.folder_node=this.node),this.node={label:__("Search Results"),value:"",children:t,by_search:!0,open:!0,filtered:!0}})},300),make_file_node(r){let t=r.file_name||r.name;return{label:frappe.utils.file_name_ellipsis(t,40),filename:t,file_url:r.file_url,value:r.name,is_leaf:!r.is_folder,fetched:!r.is_folder,children:[],children_loading:!1,children_start:0,open:!1,fetching:!1,filtered:!0}}}},Td=function(){var r=this,t=r.$createElement,e=r._self._c||t;return e("div",{staticClass:"file-browser"},[e("div",[e("a",{staticClass:"text-muted text-medium",attrs:{href:""},on:{click:function(i){return i.preventDefault(),r.$emit("hide-browser")}}},[r._v(`
			`+r._s(r.__("\u2190 Back to upload files"))+`
		`)])]),r._v(" "),e("div",{staticClass:"file-browser-list"},[e("div",{staticClass:"file-filter"},[e("input",{directives:[{name:"model",rawName:"v-model",value:r.search_text,expression:"search_text"}],staticClass:"form-control input-xs",attrs:{type:"search",placeholder:r.__("Search by filename or extension")},domProps:{value:r.search_text},on:{input:[function(i){i.target.composing||(r.search_text=i.target.value)},r.search_by_name]}})]),r._v(" "),e("TreeNode",{staticClass:"tree with-skeleton",attrs:{node:r.node,selected_node:r.selected_node},on:{"node-click":function(i){return r.toggle_node(i)},"load-more":function(i){return r.load_more(i)}}})],1)])},Kw=[];Td._withStripped=!0;var Jw=function(r){!r||r("data-v-1c4eadd2_0",{source:`
.file-browser-list {
	height: 300px;
	overflow: hidden;
	margin-top: 10px;
}
.file-filter {
	padding: 3px;
}
.tree {
	overflow: auto;
	height: 100%;
	padding-left: 0;
	padding-right: 0;
	padding-bottom: 4rem;
}
`,map:{version:3,sources:["frappe/public/js/frappe/file_uploader/FileBrowser.vue"],names:[],mappings:";AAkLA;CACA,aAAA;CACA,gBAAA;CACA,gBAAA;AACA;AAEA;CACA,YAAA;AACA;AAEA;CACA,cAAA;CACA,YAAA;CACA,eAAA;CACA,gBAAA;CACA,oBAAA;AACA",file:"FileBrowser.vue",sourcesContent:[`<template>
	<div class="file-browser">
		<div>
			<a
				href=""
				class="text-muted text-medium"
				@click.prevent="$emit('hide-browser')"
			>
				{{ __("\u2190 Back to upload files") }}
			</a>
		</div>
		<div class="file-browser-list">
			<div class="file-filter">
				<input
					type="search"
					class="form-control input-xs"
					:placeholder="__('Search by filename or extension')"
					v-model="search_text"
					@input="search_by_name"
				/>
			</div>
			<TreeNode
				class="tree with-skeleton"
				:node="node"
				:selected_node="selected_node"
				@node-click="n => toggle_node(n)"
				@load-more="n => load_more(n)"
			/>
		</div>
	</div>
</template>
<script>
import TreeNode from "./TreeNode.vue";

export default {
	name: "FileBrowser",
	components: {
		TreeNode
	},
	data() {
		return {
			node: {
				label: __("Home"),
				value: "Home",
				children: [],
				children_start: 0,
				children_loading: false,
				is_leaf: false,
				fetching: false,
				fetched: false,
				open: false,
				filtered: true
			},
			selected_node: {},
			search_text: "",
			page_length: 10
		};
	},
	mounted() {
		this.toggle_node(this.node);
	},
	methods: {
		toggle_node(node) {
			if (!node.fetched && !node.is_leaf) {
				node.fetching = true;
				node.children_start = 0;
				node.children_loading = false;
				this.get_files_in_folder(node.value, 0).then(
					({ files, has_more }) => {
						node.open = true;
						node.children = files;
						node.fetched = true;
						node.fetching = false;
						node.children_start += this.page_length;
						node.has_more_children = has_more;
					}
				);
			} else {
				node.open = !node.open;
				this.select_node(node);
			}
		},
		load_more(node) {
			if (node.has_more_children) {
				let start = node.children_start;
				node.children_loading = true;
				this.get_files_in_folder(node.value, start).then(
					({ files, has_more }) => {
						node.children = node.children.concat(files);
						node.children_start += this.page_length;
						node.has_more_children = has_more;
						node.children_loading = false;
					}
				);
			}
		},
		select_node(node) {
			if (node.is_leaf) {
				this.selected_node = node;
			}
		},
		get_files_in_folder(folder, start) {
			return frappe
				.call("frappe.core.api.file.get_files_in_folder", {
					folder,
					start,
					page_length: this.page_length
				})
				.then(r => {
					let { files = [], has_more = false } = r.message || {};
					files.sort((a, b) => {
						if (a.is_folder && b.is_folder) {
							return a.modified < b.modified ? -1 : 1;
						}
						if (a.is_folder) {
							return -1;
						}
						if (b.is_folder) {
							return 1;
						}
						return 0;
					});
					files = files.map(file => this.make_file_node(file));
					return { files, has_more };
				});
		},
		search_by_name: frappe.utils.debounce(function() {
			if (this.search_text === "") {
				this.node = this.folder_node;
				return;
			}
			if (this.search_text.length < 3) return;
			frappe
				.call(
					"frappe.core.api.file.get_files_by_search_text",
					{
						text: this.search_text
					}
				)
				.then(r => {
					let files = r.message || [];
					files = files.map(file => this.make_file_node(file));
					if (!this.folder_node) {
						this.folder_node = this.node;
					}
					this.node = {
						label: __("Search Results"),
						value: "",
						children: files,
						by_search: true,
						open: true,
						filtered: true
					};
				});
		}, 300),
		make_file_node(file) {
			let filename = file.file_name || file.name;
			let label = frappe.utils.file_name_ellipsis(filename, 40);
			return {
				label: label,
				filename: filename,
				file_url: file.file_url,
				value: file.name,
				is_leaf: !file.is_folder,
				fetched: !file.is_folder, // fetched if node is leaf
				children: [],
				children_loading: false,
				children_start: 0,
				open: false,
				fetching: false,
				filtered: true
			};
		}
	}
};
<\/script>

<style>
.file-browser-list {
	height: 300px;
	overflow: hidden;
	margin-top: 10px;
}

.file-filter {
	padding: 3px;
}

.tree {
	overflow: auto;
	height: 100%;
	padding-left: 0;
	padding-right: 0;
	padding-bottom: 4rem;
}
</style>
`]},media:void 0})},Zw=void 0,Qw=void 0,e0=!1;function t0(r,t,e,i,n,o,a,s,l,d){let u=(typeof e=="function"?e.options:e)||{};u.__file="frappe/public/js/frappe/file_uploader/FileBrowser.vue",u.render||(u.render=r.render,u.staticRenderFns=r.staticRenderFns,u._compiled=!0,n&&(u.functional=!0)),u._scopeId=i;{let h;if(t&&(h=a?function(p){t.call(this,d(p,this.$root.$options.shadowRoot))}:function(p){t.call(this,s(p))}),h!==void 0)if(u.functional){let p=u.render;u.render=function(x,y){return h.call(y),p(x,y)}}else{let p=u.beforeCreate;u.beforeCreate=p?[].concat(p,h):[h]}}return u}function No(){let r=No.styles||(No.styles={}),t=typeof navigator!="undefined"&&/msie [6-9]\\b/.test(navigator.userAgent.toLowerCase());return function(i,n){if(document.querySelector('style[data-vue-ssr-id~="'+i+'"]'))return;let o=t?n.media||"default":i,a=r[o]||(r[o]={ids:[],parts:[],element:void 0});if(!a.ids.includes(i)){let s=n.source,l=a.ids.length;if(a.ids.push(i),t&&(a.element=a.element||document.querySelector("style[data-group="+o+"]")),!a.element){let d=document.head||document.getElementsByTagName("head")[0],u=a.element=document.createElement("style");u.type="text/css",n.media&&u.setAttribute("media",n.media),t&&(u.setAttribute("data-group",o),u.setAttribute("data-next-index","0")),d.appendChild(u)}if(t&&(l=parseInt(a.element.getAttribute("data-next-index")),a.element.setAttribute("data-next-index",l+1)),a.element.styleSheet)a.parts.push(s),a.element.styleSheet.cssText=a.parts.filter(Boolean).join(`
`);else{let d=document.createTextNode(s),u=a.element.childNodes;u[l]&&a.element.removeChild(u[l]),u.length?a.element.insertBefore(d,u[l]):a.element.appendChild(d)}}}}var r0=t0({render:Td,staticRenderFns:Kw},Jw,Xw,Zw,e0,Qw,!1,No,void 0,void 0),Ed=r0;var i0={name:"WebLink",data(){return{url:""}}},Ad=function(){var r=this,t=r.$createElement,e=r._self._c||t;return e("div",{staticClass:"file-web-link margin-bottom"},[e("a",{staticClass:"text-muted text-medium",attrs:{href:""},on:{click:function(i){return i.preventDefault(),r.$emit("hide-web-link")}}},[r._v(`
		`+r._s(r.__("\u2190 Back to upload files"))+`
	`)]),r._v(" "),e("div",{staticClass:"input-group"},[e("input",{directives:[{name:"model",rawName:"v-model",value:r.url,expression:"url"}],staticClass:"form-control",attrs:{type:"text",placeholder:r.__("Attach a web link")},domProps:{value:r.url},on:{input:function(i){i.target.composing||(r.url=i.target.value)}}})])])},n0=[];Ad._withStripped=!0;var o0=function(r){!r||r("data-v-3d6cb693_0",{source:`
.file-web-link .input-group {
	margin-top: 10px;
}
`,map:{version:3,sources:["frappe/public/js/frappe/file_uploader/WebLink.vue"],names:[],mappings:";AA6BA;CACA,gBAAA;AACA",file:"WebLink.vue",sourcesContent:[`<template>
	<div class="file-web-link margin-bottom">
		<a href class="text-muted text-medium"
			@click.prevent="$emit('hide-web-link')"
		>
			{{ __('\u2190 Back to upload files') }}
		</a>
		<div class="input-group">
			<input
				type="text"
				class="form-control"
				:placeholder="__('Attach a web link')"
				v-model="url"
			>
		</div>
	</div>
</template>
<script>
export default {
	name: 'WebLink',
	data() {
		return {
			url: '',
		}
	}
}
<\/script>

<style>
.file-web-link .input-group {
	margin-top: 10px;
}
</style>
`]},media:void 0})},a0=void 0,s0=void 0,l0=!1;function c0(r,t,e,i,n,o,a,s,l,d){let u=(typeof e=="function"?e.options:e)||{};u.__file="frappe/public/js/frappe/file_uploader/WebLink.vue",u.render||(u.render=r.render,u.staticRenderFns=r.staticRenderFns,u._compiled=!0,n&&(u.functional=!0)),u._scopeId=i;{let h;if(t&&(h=a?function(p){t.call(this,d(p,this.$root.$options.shadowRoot))}:function(p){t.call(this,s(p))}),h!==void 0)if(u.functional){let p=u.render;u.render=function(x,y){return h.call(y),p(x,y)}}else{let p=u.beforeCreate;u.beforeCreate=p?[].concat(p,h):[h]}}return u}function jo(){let r=jo.styles||(jo.styles={}),t=typeof navigator!="undefined"&&/msie [6-9]\\b/.test(navigator.userAgent.toLowerCase());return function(i,n){if(document.querySelector('style[data-vue-ssr-id~="'+i+'"]'))return;let o=t?n.media||"default":i,a=r[o]||(r[o]={ids:[],parts:[],element:void 0});if(!a.ids.includes(i)){let s=n.source,l=a.ids.length;if(a.ids.push(i),t&&(a.element=a.element||document.querySelector("style[data-group="+o+"]")),!a.element){let d=document.head||document.getElementsByTagName("head")[0],u=a.element=document.createElement("style");u.type="text/css",n.media&&u.setAttribute("media",n.media),t&&(u.setAttribute("data-group",o),u.setAttribute("data-next-index","0")),d.appendChild(u)}if(t&&(l=parseInt(a.element.getAttribute("data-next-index")),a.element.setAttribute("data-next-index",l+1)),a.element.styleSheet)a.parts.push(s),a.element.styleSheet.cssText=a.parts.filter(Boolean).join(`
`);else{let d=document.createTextNode(s),u=a.element.childNodes;u[l]&&a.element.removeChild(u[l]),u.length?a.element.insertBefore(d,u[l]):a.element.appendChild(d)}}}}var u0=c0({render:Ad,staticRenderFns:n0},o0,i0,a0,l0,s0,!1,jo,void 0,void 0),Od=u0;var cn=class{constructor({pickerCallback:t,enabled:e,appId:i,developerKey:n,clientId:o}={}){this.scope=["https://www.googleapis.com/auth/drive.readonly"],this.pickerApiLoaded=!1,this.enabled=e,this.appId=i,this.pickerCallback=t,this.developerKey=n,this.clientId=o}loadPicker(){$.ajax({method:"GET",url:"https://apis.google.com/js/api.js",dataType:"script",cache:!0}).done(this.loadGapi.bind(this))}loadGapi(){frappe.boot.user.google_drive_token||gapi.load("auth",this.onAuthApiLoad.bind(this)),gapi.load("picker",this.onPickerApiLoad.bind(this))}onAuthApiLoad(){gapi.auth.authorize({client_id:this.clientId,scope:this.scope,immediate:!1},this.handleAuthResult.bind(this))}handleAuthResult(t){let e={popup_closed_by_user:__("Google Authentication was closed abruptly by the user")};if(t&&!t.error)frappe.boot.user.google_drive_token=t.access_token,this.createPicker();else{let i=e[t.error]||__("Google Authentication Error");frappe.throw(i)}}onPickerApiLoad(){this.pickerApiLoaded=!0,this.createPicker()}createPicker(){this.pickerApiLoaded&&frappe.boot.user.google_drive_token&&(this.view=new google.picker.DocsView(google.picker.ViewId.DOCS).setParent("root").setIncludeFolders(!0),this.picker=new google.picker.PickerBuilder().setAppId(this.appId).setDeveloperKey(this.developerKey).setOAuthToken(frappe.boot.user.google_drive_token).addView(this.view).setLocale(frappe.boot.lang).setCallback(this.pickerCallback).build(),this.picker.setVisible(!0),this.setupHide())}setupHide(){let t=$(".picker-dialog-bg");for(let e of t)e.onclick=()=>{this.picker.setVisible(!1),this.picker.Ob({action:google.picker.Action.CANCEL})}}};var $d=Vt(Md()),d0={name:"ImageCropper",props:["file","fixed_aspect_ratio"],data(){let r=this.fixed_aspect_ratio!=null?this.fixed_aspect_ratio:NaN;return{src:null,cropper:null,image:null,aspect_ratio:r}},watch:{aspect_ratio(r){this.cropper&&this.cropper.setAspectRatio(r)}},mounted(){if(window.FileReader){let t=new FileReader;t.onload=()=>this.src=t.result,t.readAsDataURL(this.file.cropper_file)}let r=this.file.crop_box_data;this.image=this.$refs.image,this.image.onload=()=>{this.cropper=new $d.default(this.image,{zoomable:!1,scalable:!1,viewMode:1,data:r,aspectRatio:this.aspect_ratio}),window.cropper=this.cropper}},computed:{aspect_ratio_buttons(){return[{label:__("1:1"),value:1},{label:__("4:3"),value:4/3},{label:__("16:9"),value:16/9},{label:__("Free"),value:NaN}]}},methods:{crop_image(){this.file.crop_box_data=this.cropper.getData();let r=this.cropper.getCroppedCanvas(),t=this.file.file_obj.type;r.toBlob(e=>{var i=new File([e],this.file.name,{type:e.type});this.file.file_obj=i,this.$emit("toggle_image_cropper")},t)}}},Ld=function(){var r=this,t=r.$createElement,e=r._self._c||t;return e("div",[e("div",[e("img",{ref:"image",attrs:{src:r.src,alt:r.file.name}})]),r._v(" "),e("div",{staticClass:"image-cropper-actions"},[e("div",[r.fixed_aspect_ratio==null?e("div",{staticClass:"btn-group"},r._l(r.aspect_ratio_buttons,function(i){return e("button",{key:i.label,staticClass:"btn btn-default btn-sm",class:{active:isNaN(r.aspect_ratio)?isNaN(i.value):i.value===r.aspect_ratio},attrs:{type:"button"},on:{click:function(n){r.aspect_ratio=i.value}}},[r._v(`
					`+r._s(i.label)+`
				`)])}),0):r._e()]),r._v(" "),e("div",[r.fixed_aspect_ratio==null?e("button",{staticClass:"btn btn-sm margin-right",on:{click:function(i){return r.$emit("toggle_image_cropper")}}},[r._v(`
				`+r._s(r.__("Back"))+`
			`)]):r._e(),r._v(" "),e("button",{staticClass:"btn btn-primary btn-sm",on:{click:r.crop_image}},[r._v(`
				`+r._s(r.__("Crop"))+`
			`)])])])])},f0=[];Ld._withStripped=!0;var p0=function(r){!r||r("data-v-07cb5b9d_0",{source:`
img {
	display: block;
	max-width: 100%;
	max-height: 600px;
}
.image-cropper-actions {
	display: flex;
	align-items: center;
	justify-content: space-between;
	margin-top: var(--margin-md);
}
`,map:{version:3,sources:["frappe/public/js/frappe/file_uploader/ImageCropper.vue"],names:[],mappings:";AAwHA;CACA,cAAA;CACA,eAAA;CACA,iBAAA;AACA;AAEA;CACA,aAAA;CACA,mBAAA;CACA,8BAAA;CACA,4BAAA;AACA",file:"ImageCropper.vue",sourcesContent:[`<template>
	<div>
		<div>
			<img ref="image" :src="src" :alt="file.name" />
		</div>
		<div class="image-cropper-actions">
			<div>
				<div class="btn-group" v-if="fixed_aspect_ratio == null">
					<button
						v-for="button in aspect_ratio_buttons"
						type="button"
						class="btn btn-default btn-sm"
						:class="{
							active: isNaN(aspect_ratio)
								? isNaN(button.value)
								: button.value === aspect_ratio
						}"
						:key="button.label"
						@click="aspect_ratio = button.value"
					>
						{{ button.label }}
					</button>
				</div>
			</div>
			<div>
				<button
					class="btn btn-sm margin-right"
					@click="$emit('toggle_image_cropper')"
					v-if="fixed_aspect_ratio == null"
				>
					{{ __("Back") }}
				</button>
				<button class="btn btn-primary btn-sm" @click="crop_image">
					{{ __("Crop") }}
				</button>
			</div>
		</div>
	</div>
</template>

<script>
import Cropper from "cropperjs";
export default {
	name: "ImageCropper",
	props: ["file", "fixed_aspect_ratio"],
	data() {
		let aspect_ratio =
			this.fixed_aspect_ratio != null ? this.fixed_aspect_ratio : NaN;
		return {
			src: null,
			cropper: null,
			image: null,
			aspect_ratio
		};
	},
	watch: {
		aspect_ratio(value) {
			if (this.cropper) {
				this.cropper.setAspectRatio(value);
			}
		}
	},
	mounted() {
		if (window.FileReader) {
			let fr = new FileReader();
			fr.onload = () => (this.src = fr.result);
			fr.readAsDataURL(this.file.cropper_file);
		}
		let crop_box = this.file.crop_box_data;
		this.image = this.$refs.image;
		this.image.onload = () => {
			this.cropper = new Cropper(this.image, {
				zoomable: false,
				scalable: false,
				viewMode: 1,
				data: crop_box,
				aspectRatio: this.aspect_ratio
			});
			window.cropper = this.cropper;
		};
	},
	computed: {
		aspect_ratio_buttons() {
			return [
				{
					label: __("1:1"),
					value: 1
				},
				{
					label: __("4:3"),
					value: 4 / 3
				},
				{
					label: __("16:9"),
					value: 16 / 9
				},
				{
					label: __("Free"),
					value: NaN
				}
			];
		}
	},
	methods: {
		crop_image() {
			this.file.crop_box_data = this.cropper.getData();
			const canvas = this.cropper.getCroppedCanvas();
			const file_type = this.file.file_obj.type;
			canvas.toBlob(blob => {
				var cropped_file_obj = new File([blob], this.file.name, {
					type: blob.type
				});
				this.file.file_obj = cropped_file_obj;
				this.$emit("toggle_image_cropper");
			}, file_type);
		}
	}
};
<\/script>
<style>
img {
	display: block;
	max-width: 100%;
	max-height: 600px;
}

.image-cropper-actions {
	display: flex;
	align-items: center;
	justify-content: space-between;
	margin-top: var(--margin-md);
}
</style>
`]},media:void 0})},h0=void 0,_0=void 0,g0=!1;function m0(r,t,e,i,n,o,a,s,l,d){let u=(typeof e=="function"?e.options:e)||{};u.__file="frappe/public/js/frappe/file_uploader/ImageCropper.vue",u.render||(u.render=r.render,u.staticRenderFns=r.staticRenderFns,u._compiled=!0,n&&(u.functional=!0)),u._scopeId=i;{let h;if(t&&(h=a?function(p){t.call(this,d(p,this.$root.$options.shadowRoot))}:function(p){t.call(this,s(p))}),h!==void 0)if(u.functional){let p=u.render;u.render=function(x,y){return h.call(y),p(x,y)}}else{let p=u.beforeCreate;u.beforeCreate=p?[].concat(p,h):[h]}}return u}function zo(){let r=zo.styles||(zo.styles={}),t=typeof navigator!="undefined"&&/msie [6-9]\\b/.test(navigator.userAgent.toLowerCase());return function(i,n){if(document.querySelector('style[data-vue-ssr-id~="'+i+'"]'))return;let o=t?n.media||"default":i,a=r[o]||(r[o]={ids:[],parts:[],element:void 0});if(!a.ids.includes(i)){let s=n.source,l=a.ids.length;if(a.ids.push(i),t&&(a.element=a.element||document.querySelector("style[data-group="+o+"]")),!a.element){let d=document.head||document.getElementsByTagName("head")[0],u=a.element=document.createElement("style");u.type="text/css",n.media&&u.setAttribute("media",n.media),t&&(u.setAttribute("data-group",o),u.setAttribute("data-next-index","0")),d.appendChild(u)}if(t&&(l=parseInt(a.element.getAttribute("data-next-index")),a.element.setAttribute("data-next-index",l+1)),a.element.styleSheet)a.parts.push(s),a.element.styleSheet.cssText=a.parts.filter(Boolean).join(`
`);else{let d=document.createTextNode(s),u=a.element.childNodes;u[l]&&a.element.removeChild(u[l]),u.length?a.element.insertBefore(d,u[l]):a.element.appendChild(d)}}}}var v0=m0({render:Ld,staticRenderFns:f0},p0,d0,h0,g0,_0,!1,zo,void 0,void 0),Bd=v0;var b0={name:"FileUploader",props:{show_upload_button:{default:!0},disable_file_browser:{default:!1},allow_multiple:{default:!0},as_dataurl:{default:!1},doctype:{default:null},docname:{default:null},fieldname:{default:null},folder:{default:"Home"},method:{default:null},on_success:{default:null},make_attachments_public:{default:null},restrictions:{default:()=>({max_file_size:null,max_number_of_files:null,allowed_file_types:[],crop_image_aspect_ratio:null})},attach_doc_image:{default:!1},upload_notes:{default:null}},components:{FilePreview:xd,FileBrowser:Ed,WebLink:Od,ImageCropper:Bd},data(){return{files:[],is_dragging:!1,currently_uploading:-1,show_file_browser:!1,show_web_link:!1,show_image_cropper:!1,crop_image_with_index:-1,trigger_upload:!1,close_dialog:!1,hide_dialog_footer:!1,allow_take_photo:!1,allow_web_link:!0,google_drive_settings:{enabled:!1},wrapper_ready:!1}},created(){var r;this.allow_take_photo=window.navigator.mediaDevices,frappe.user_id!=="Guest"&&frappe.call({method:"frappe.integrations.doctype.google_settings.google_settings.get_file_picker_settings",callback:t=>{t.exc||(this.google_drive_settings=t.message)}}),this.restrictions.max_file_size==null&&frappe.call("frappe.core.api.file.get_max_file_size").then(t=>{this.restrictions.max_file_size=Number(t.message)}),this.restrictions.max_number_of_files==null&&this.doctype&&(this.restrictions.max_number_of_files=(r=frappe.get_meta(this.doctype))==null?void 0:r.max_attachments)},watch:{files(r,t){!this.allow_multiple&&r.length>1&&(this.files=[r[r.length-1]])}},computed:{upload_complete(){return this.files.length>0&&this.files.every(r=>r.total!==0&&r.progress===r.total)}},methods:{dragover(){this.is_dragging=!0},dragleave(){this.is_dragging=!1},dropfiles(r){this.is_dragging=!1,this.add_files(r.dataTransfer.files)},browse_files(){this.$refs.file_input.click()},on_file_input(r){this.add_files(this.$refs.file_input.files)},remove_file(r){this.files=this.files.filter(t=>t!==r)},toggle_image_cropper(r){this.crop_image_with_index=this.show_image_cropper?-1:r,this.hide_dialog_footer=!this.show_image_cropper,this.show_image_cropper=!this.show_image_cropper},toggle_all_private(){let r;this.files.filter(e=>e.private).length<this.files.length?r=!0:r=!1,this.files=this.files.map(e=>(e.private=r,e))},show_max_files_number_warning(r){console.warn(`File skipped because it exceeds the allowed specified limit of ${max_number_of_files} uploads`,r),this.doctype?MSG=__('File "{0}" was skipped because only {1} uploads are allowed for DocType "{2}"',[r.name,max_number_of_files,this.doctype]):MSG=__('File "{0}" was skipped because only {1} uploads are allowed',[r.name,max_number_of_files]),frappe.show_alert({message:MSG,indicator:"orange"})},add_files(r){let t=Array.from(r).filter(this.check_restrictions).map(e=>{let i=e.type.startsWith("image"),n=e.size/1024;return{file_obj:e,cropper_file:e,crop_box_data:null,optimize:n>200&&i&&!e.type.includes("svg"),name:e.name,doc:null,progress:0,total:0,failed:!1,request_succeeded:!1,error_message:null,uploading:!1,private:!this.make_attachments_public}});max_number_of_files=this.restrictions.max_number_of_files,max_number_of_files&&t.length>max_number_of_files&&(t.slice(max_number_of_files).forEach(e=>{this.show_max_files_number_warning(e,this.doctype)}),t=t.slice(0,max_number_of_files)),this.files=this.files.concat(t),this.files.length===1&&!this.allow_multiple&&this.restrictions.crop_image_aspect_ratio!=null&&(this.files[0].file_obj.type.includes("svg")||this.toggle_image_cropper(0))},check_restrictions(r){let{max_file_size:t,allowed_file_types:e=[]}=this.restrictions,i=!0,n=!0;return e&&e.length&&(i=e.some(o=>o.includes("/")?r.type?r.type.match(o):!1:o[0]==="."?r.name.endsWith(o):!1)),t&&r.size!=null&&(n=r.size<t),i||(console.warn("File skipped because of invalid file type",r),frappe.show_alert({message:__('File "{0}" was skipped because of invalid file type',[r.name]),indicator:"orange"})),n||(console.warn("File skipped because of invalid file size",r.size,r),frappe.show_alert({message:__('File "{0}" was skipped because size exceeds {1} MB',[r.name,t/(1024*1024)]),indicator:"orange"})),i&&n},upload_files(){return this.show_file_browser?this.upload_via_file_browser():this.show_web_link?this.upload_via_web_link():this.as_dataurl?this.return_as_dataurl():frappe.run_serially(this.files.map((r,t)=>()=>this.upload_file(r,t)))},upload_via_file_browser(){let r=this.$refs.file_browser.selected_node;return r.value?(this.close_dialog=!0,this.upload_file({file_url:r.file_url})):(frappe.msgprint(__("Click on a file to select it.")),this.close_dialog=!0,Promise.reject())},upload_via_web_link(){let r=this.$refs.web_link.url;return r?(r=decodeURI(r),this.close_dialog=!0,this.upload_file({file_url:r})):(frappe.msgprint(__("Invalid URL")),this.close_dialog=!0,Promise.reject())},return_as_dataurl(){let r=this.files.map(t=>frappe.dom.file_to_base64(t.file_obj).then(e=>{t.dataurl=e,this.on_success&&this.on_success(t)}));return this.close_dialog=!0,Promise.all(r)},upload_file(r,t){return this.currently_uploading=t,new Promise((e,i)=>{let n=new XMLHttpRequest;n.upload.addEventListener("loadstart",a=>{r.uploading=!0}),n.upload.addEventListener("progress",a=>{a.lengthComputable&&(r.progress=a.loaded,r.total=a.total)}),n.upload.addEventListener("load",a=>{r.uploading=!1,e()}),n.addEventListener("error",a=>{r.failed=!0,i()}),n.onreadystatechange=()=>{if(n.readyState==XMLHttpRequest.DONE)if(n.status===200){r.request_succeeded=!0;let a=null,s=null;try{a=JSON.parse(n.responseText),a.message.doctype==="File"&&(s=a.message)}catch(l){a=n.responseText}r.doc=s,this.on_success&&this.on_success(s,a),t==this.files.length-1&&this.files.every(l=>l.request_succeeded)&&(this.close_dialog=!0)}else if(n.status===403){r.failed=!0;let a=JSON.parse(n.responseText);r.error_message=`Not permitted. ${a._error_message||""}`}else if(n.status===413)r.failed=!0,r.error_message="Size exceeds the maximum allowed file size.";else{r.failed=!0,r.error_message=n.status===0?"XMLHttpRequest Error":`${n.status} : ${n.statusText}`;let a=null;try{a=JSON.parse(n.responseText)}catch(s){}frappe.request.cleanup({},a)}},n.open("POST","/api/method/upload_file",!0),n.setRequestHeader("Accept","application/json"),n.setRequestHeader("X-Frappe-CSRF-Token",frappe.csrf_token);let o=new FormData;r.file_obj&&o.append("file",r.file_obj,r.name),o.append("is_private",+r.private),o.append("folder",this.folder),r.file_url&&o.append("file_url",r.file_url),r.file_name&&o.append("file_name",r.file_name),this.doctype&&this.docname&&(o.append("doctype",this.doctype),o.append("docname",this.docname)),this.fieldname&&o.append("fieldname",this.fieldname),this.method&&o.append("method",this.method),r.optimize&&o.append("optimize",!0),this.attach_doc_image&&(o.append("max_width",200),o.append("max_height",200)),n.send(o)})},capture_image(){let r=new frappe.ui.Capture({animate:!1,error:!0});r.show(),r.submit(t=>{t.forEach(e=>{let i=`capture_${frappe.datetime.now_datetime().replaceAll(/[: -]/g,"_")}.png`;this.url_to_file(e,i,"image/png").then(n=>this.add_files([n]))})})},show_google_drive_picker(){this.close_dialog=!0,new cn(lt({pickerCallback:t=>this.google_drive_callback(t)},this.google_drive_settings)).loadPicker()},google_drive_callback(r){r.action==google.picker.Action.PICKED?this.upload_file({file_url:r.docs[0].url,file_name:r.docs[0].name}):r.action==google.picker.Action.CANCEL&&cur_frm.attachments.new_attachment()},url_to_file(r,t,e){return fetch(r).then(i=>i.arrayBuffer()).then(i=>new File([i],t,{type:e}))}}},Id=function(){var r=this,t=r.$createElement,e=r._self._c||t;return e("div",{staticClass:"file-uploader",on:{dragover:function(i){return i.preventDefault(),r.dragover.apply(null,arguments)},dragleave:function(i){return i.preventDefault(),r.dragleave.apply(null,arguments)},drop:function(i){return i.preventDefault(),r.dropfiles.apply(null,arguments)}}},[e("div",{directives:[{name:"show",rawName:"v-show",value:r.files.length===0&&!r.show_file_browser&&!r.show_web_link,expression:"files.length === 0 && !show_file_browser && !show_web_link"}],staticClass:"file-upload-area"},[r.is_dragging?e("div",[r._v(`
			`+r._s(r.__("Drop files here"))+`
		`)]):e("div",[e("div",{staticClass:"text-center"},[r._v(`
				`+r._s(r.__("Drag and drop files here or upload from"))+`
			`)]),r._v(" "),e("div",{staticClass:"mt-2 text-center"},[e("button",{staticClass:"btn btn-file-upload",on:{click:r.browse_files}},[e("svg",{attrs:{width:"30",height:"30",viewBox:"0 0 30 30",fill:"none",xmlns:"http://www.w3.org/2000/svg"}},[e("circle",{attrs:{cx:"15",cy:"15",r:"15",fill:"url(#paint0_linear)"}}),r._v(" "),e("path",{attrs:{d:"M13.5 22V19",stroke:"white","stroke-linecap":"round","stroke-linejoin":"round"}}),r._v(" "),e("path",{attrs:{d:"M16.5 22V19",stroke:"white","stroke-linecap":"round","stroke-linejoin":"round"}}),r._v(" "),e("path",{attrs:{d:"M10.5 22H19.5",stroke:"white","stroke-linecap":"round","stroke-linejoin":"round"}}),r._v(" "),e("path",{attrs:{d:"M7.5 16H22.5",stroke:"white","stroke-linecap":"round","stroke-linejoin":"round"}}),r._v(" "),e("path",{attrs:{d:"M21 8H9C8.17157 8 7.5 8.67157 7.5 9.5V17.5C7.5 18.3284 8.17157 19 9 19H21C21.8284 19 22.5 18.3284 22.5 17.5V9.5C22.5 8.67157 21.8284 8 21 8Z",stroke:"white","stroke-linecap":"round","stroke-linejoin":"round"}}),r._v(" "),e("defs",[e("linearGradient",{attrs:{id:"paint0_linear",x1:"0",y1:"0",x2:"0",y2:"30",gradientUnits:"userSpaceOnUse"}},[e("stop",{attrs:{"stop-color":"#2C9AF1"}}),r._v(" "),e("stop",{attrs:{offset:"1","stop-color":"#2490EF"}})],1)],1)]),r._v(" "),e("div",{staticClass:"mt-1"},[r._v(r._s(r.__("My Device")))])]),r._v(" "),e("input",{ref:"file_input",staticClass:"hidden",attrs:{type:"file",multiple:r.allow_multiple,accept:(r.restrictions.allowed_file_types||[]).join(", ")},on:{change:r.on_file_input}}),r._v(" "),r.disable_file_browser?r._e():e("button",{staticClass:"btn btn-file-upload",on:{click:function(i){r.show_file_browser=!0}}},[e("svg",{attrs:{width:"30",height:"30",viewBox:"0 0 30 30",fill:"none",xmlns:"http://www.w3.org/2000/svg"}},[e("circle",{attrs:{cx:"15",cy:"15",r:"15",fill:"#48BB74"}}),r._v(" "),e("path",{attrs:{d:"M13.0245 11.5H8C7.72386 11.5 7.5 11.7239 7.5 12V20C7.5 21.1046 8.39543 22 9.5 22H20.5C21.6046 22 22.5 21.1046 22.5 20V14.5C22.5 14.2239 22.2761 14 22 14H15.2169C15.0492 14 14.8926 13.9159 14.8 13.776L13.4414 11.724C13.3488 11.5841 13.1922 11.5 13.0245 11.5Z",stroke:"white","stroke-miterlimit":"10","stroke-linecap":"square"}}),r._v(" "),e("path",{attrs:{d:"M8.87939 9.5V8.5C8.87939 8.22386 9.10325 8 9.37939 8H20.6208C20.8969 8 21.1208 8.22386 21.1208 8.5V12",stroke:"white","stroke-miterlimit":"10","stroke-linecap":"round","stroke-linejoin":"round"}})]),r._v(" "),e("div",{staticClass:"mt-1"},[r._v(r._s(r.__("Library")))])]),r._v(" "),r.allow_web_link?e("button",{staticClass:"btn btn-file-upload",on:{click:function(i){r.show_web_link=!0}}},[e("svg",{attrs:{width:"30",height:"30",viewBox:"0 0 30 30",fill:"none",xmlns:"http://www.w3.org/2000/svg"}},[e("circle",{attrs:{cx:"15",cy:"15",r:"15",fill:"#ECAC4B"}}),r._v(" "),e("path",{attrs:{d:"M12.0469 17.9543L17.9558 12.0454",stroke:"white","stroke-linecap":"round","stroke-linejoin":"round"}}),r._v(" "),e("path",{attrs:{d:"M13.8184 11.4547L15.7943 9.47873C16.4212 8.85205 17.2714 8.5 18.1578 8.5C19.0443 8.5 19.8945 8.85205 20.5214 9.47873V9.47873C21.1481 10.1057 21.5001 10.9558 21.5001 11.8423C21.5001 12.7287 21.1481 13.5789 20.5214 14.2058L18.5455 16.1818",stroke:"white","stroke-linecap":"round","stroke-linejoin":"round"}}),r._v(" "),e("path",{attrs:{d:"M11.4547 13.8184L9.47873 15.7943C8.85205 16.4212 8.5 17.2714 8.5 18.1578C8.5 19.0443 8.85205 19.8945 9.47873 20.5214V20.5214C10.1057 21.1481 10.9558 21.5001 11.8423 21.5001C12.7287 21.5001 13.5789 21.1481 14.2058 20.5214L16.1818 18.5455",stroke:"white","stroke-linecap":"round","stroke-linejoin":"round"}})]),r._v(" "),e("div",{staticClass:"mt-1"},[r._v(r._s(r.__("Link")))])]):r._e(),r._v(" "),r.allow_take_photo?e("button",{staticClass:"btn btn-file-upload",on:{click:r.capture_image}},[e("svg",{attrs:{width:"30",height:"30",viewBox:"0 0 30 30",fill:"none",xmlns:"http://www.w3.org/2000/svg"}},[e("circle",{attrs:{cx:"15",cy:"15",r:"15",fill:"#CE315B"}}),r._v(" "),e("path",{attrs:{d:"M11.5 10.5H9.5C8.67157 10.5 8 11.1716 8 12V20C8 20.8284 8.67157 21.5 9.5 21.5H20.5C21.3284 21.5 22 20.8284 22 20V12C22 11.1716 21.3284 10.5 20.5 10.5H18.5L17.3 8.9C17.1111 8.64819 16.8148 8.5 16.5 8.5H13.5C13.1852 8.5 12.8889 8.64819 12.7 8.9L11.5 10.5Z",stroke:"white","stroke-linejoin":"round"}}),r._v(" "),e("circle",{attrs:{cx:"15",cy:"16",r:"2.5",stroke:"white"}})]),r._v(" "),e("div",{staticClass:"mt-1"},[r._v(r._s(r.__("Camera")))])]):r._e(),r._v(" "),r.google_drive_settings.enabled?e("button",{staticClass:"btn btn-file-upload",on:{click:r.show_google_drive_picker}},[e("svg",{attrs:{width:"30",height:"30"}},[e("image",{attrs:{href:"/assets/frappe/icons/social/google_drive.svg",width:"30",height:"30"}})]),r._v(" "),e("div",{staticClass:"mt-1"},[r._v(r._s(r.__("Google Drive")))])]):r._e()]),r._v(" "),e("div",{staticClass:"text-muted text-medium"},[r._v(`
				`+r._s(r.upload_notes)+`
			`)])])]),r._v(" "),e("div",{directives:[{name:"show",rawName:"v-show",value:r.files.length&&!r.show_file_browser&&!r.show_web_link,expression:"files.length && !show_file_browser && !show_web_link"}],staticClass:"file-preview-area"},[r.show_image_cropper?r._e():e("div",{staticClass:"file-preview-container"},r._l(r.files,function(i,n){return e("FilePreview",{key:i.name,attrs:{file:i},on:{remove:function(o){return r.remove_file(i)},toggle_private:function(o){i.private=!i.private},toggle_optimize:function(o){i.optimize=!i.optimize},toggle_image_cropper:function(o){return r.toggle_image_cropper(n)}}})}),1),r._v(" "),r.show_upload_button&&r.currently_uploading===-1?e("div",{staticClass:"flex align-center"},[e("button",{staticClass:"btn btn-primary btn-sm margin-right",on:{click:r.upload_files}},[r.files.length===1?e("span",[r._v(`
					`+r._s(r.__("Upload file"))+`
				`)]):e("span",[r._v(`
					`+r._s(r.__("Upload {0} files",[r.files.length]))+`
				`)])]),r._v(" "),e("div",{staticClass:"text-muted text-medium"},[r._v(`
				`+r._s(r.__("Click on the lock icon to toggle public/private"))+`
			`)])]):r._e()]),r._v(" "),r.show_image_cropper&&r.wrapper_ready?e("ImageCropper",{attrs:{file:r.files[r.crop_image_with_index],fixed_aspect_ratio:r.restrictions.crop_image_aspect_ratio},on:{toggle_image_cropper:function(i){return r.toggle_image_cropper(-1)},upload_after_crop:function(i){r.trigger_upload=!0}}}):r._e(),r._v(" "),r.show_file_browser&&!r.disable_file_browser?e("FileBrowser",{ref:"file_browser",on:{"hide-browser":function(i){r.show_file_browser=!1}}}):r._e(),r._v(" "),r.show_web_link?e("WebLink",{ref:"web_link",on:{"hide-web-link":function(i){r.show_web_link=!1}}}):r._e()],1)},y0=[];Id._withStripped=!0;var w0=function(r){!r||r("data-v-ae1e69a6_0",{source:`
.file-upload-area {
	min-height: 16rem;
	display: flex;
	align-items: center;
	justify-content: center;
	border: 1px dashed var(--dark-border-color);
	border-radius: var(--border-radius);
	cursor: pointer;
	background-color: var(--bg-color);
}
.btn-file-upload {
	background-color: transparent;
	border: none;
	box-shadow: none;
	font-size: var(--text-xs);
}
`,map:{version:3,sources:["frappe/public/js/frappe/file_uploader/FileUploader.vue"],names:[],mappings:";AAulBA;CACA,iBAAA;CACA,aAAA;CACA,mBAAA;CACA,uBAAA;CACA,2CAAA;CACA,mCAAA;CACA,eAAA;CACA,iCAAA;AACA;AAEA;CACA,6BAAA;CACA,YAAA;CACA,gBAAA;CACA,yBAAA;AACA",file:"FileUploader.vue",sourcesContent:[`<template>
	<div class="file-uploader"
		@dragover.prevent="dragover"
		@dragleave.prevent="dragleave"
		@drop.prevent="dropfiles"
	>
		<div
			class="file-upload-area"
			v-show="files.length === 0 && !show_file_browser && !show_web_link"
		>
			<div v-if="!is_dragging">
				<div class="text-center">
					{{ __('Drag and drop files here or upload from') }}
				</div>
				<div class="mt-2 text-center">
					<button class="btn btn-file-upload" @click="browse_files">
						<svg width="30" height="30" viewBox="0 0 30 30" fill="none" xmlns="http://www.w3.org/2000/svg">
							<circle cx="15" cy="15" r="15" fill="url(#paint0_linear)"/>
							<path d="M13.5 22V19" stroke="white" stroke-linecap="round" stroke-linejoin="round"/>
							<path d="M16.5 22V19" stroke="white" stroke-linecap="round" stroke-linejoin="round"/>
							<path d="M10.5 22H19.5" stroke="white" stroke-linecap="round" stroke-linejoin="round"/>
							<path d="M7.5 16H22.5" stroke="white" stroke-linecap="round" stroke-linejoin="round"/>
							<path d="M21 8H9C8.17157 8 7.5 8.67157 7.5 9.5V17.5C7.5 18.3284 8.17157 19 9 19H21C21.8284 19 22.5 18.3284 22.5 17.5V9.5C22.5 8.67157 21.8284 8 21 8Z" stroke="white" stroke-linecap="round" stroke-linejoin="round"/>
							<defs>
							<linearGradient id="paint0_linear" x1="0" y1="0" x2="0" y2="30" gradientUnits="userSpaceOnUse">
							<stop stop-color="#2C9AF1"/>
							<stop offset="1" stop-color="#2490EF"/>
							</linearGradient>
							</defs>
						</svg>
						<div class="mt-1">{{ __('My Device') }}</div>
					</button>
					<input
						type="file"
						class="hidden"
						ref="file_input"
						@change="on_file_input"
						:multiple="allow_multiple"
						:accept="(restrictions.allowed_file_types || []).join(', ')"
					>
					<button class="btn btn-file-upload" v-if="!disable_file_browser" @click="show_file_browser = true">
						<svg width="30" height="30" viewBox="0 0 30 30" fill="none" xmlns="http://www.w3.org/2000/svg">
							<circle cx="15" cy="15" r="15" fill="#48BB74"/>
							<path d="M13.0245 11.5H8C7.72386 11.5 7.5 11.7239 7.5 12V20C7.5 21.1046 8.39543 22 9.5 22H20.5C21.6046 22 22.5 21.1046 22.5 20V14.5C22.5 14.2239 22.2761 14 22 14H15.2169C15.0492 14 14.8926 13.9159 14.8 13.776L13.4414 11.724C13.3488 11.5841 13.1922 11.5 13.0245 11.5Z" stroke="white" stroke-miterlimit="10" stroke-linecap="square"/>
							<path d="M8.87939 9.5V8.5C8.87939 8.22386 9.10325 8 9.37939 8H20.6208C20.8969 8 21.1208 8.22386 21.1208 8.5V12" stroke="white" stroke-miterlimit="10" stroke-linecap="round" stroke-linejoin="round"/>
						</svg>
						<div class="mt-1">{{ __('Library') }}</div>
					</button>
					<button class="btn btn-file-upload" v-if="allow_web_link" @click="show_web_link = true">
						<svg width="30" height="30" viewBox="0 0 30 30" fill="none" xmlns="http://www.w3.org/2000/svg">
							<circle cx="15" cy="15" r="15" fill="#ECAC4B"/>
							<path d="M12.0469 17.9543L17.9558 12.0454" stroke="white" stroke-linecap="round" stroke-linejoin="round"/>
							<path d="M13.8184 11.4547L15.7943 9.47873C16.4212 8.85205 17.2714 8.5 18.1578 8.5C19.0443 8.5 19.8945 8.85205 20.5214 9.47873V9.47873C21.1481 10.1057 21.5001 10.9558 21.5001 11.8423C21.5001 12.7287 21.1481 13.5789 20.5214 14.2058L18.5455 16.1818" stroke="white" stroke-linecap="round" stroke-linejoin="round"/>
							<path d="M11.4547 13.8184L9.47873 15.7943C8.85205 16.4212 8.5 17.2714 8.5 18.1578C8.5 19.0443 8.85205 19.8945 9.47873 20.5214V20.5214C10.1057 21.1481 10.9558 21.5001 11.8423 21.5001C12.7287 21.5001 13.5789 21.1481 14.2058 20.5214L16.1818 18.5455" stroke="white" stroke-linecap="round" stroke-linejoin="round"/>
						</svg>
						<div class="mt-1">{{ __('Link') }}</div>
					</button>
					<button v-if="allow_take_photo" class="btn btn-file-upload" @click="capture_image">
						<svg width="30" height="30" viewBox="0 0 30 30" fill="none" xmlns="http://www.w3.org/2000/svg">
							<circle cx="15" cy="15" r="15" fill="#CE315B"/>
							<path d="M11.5 10.5H9.5C8.67157 10.5 8 11.1716 8 12V20C8 20.8284 8.67157 21.5 9.5 21.5H20.5C21.3284 21.5 22 20.8284 22 20V12C22 11.1716 21.3284 10.5 20.5 10.5H18.5L17.3 8.9C17.1111 8.64819 16.8148 8.5 16.5 8.5H13.5C13.1852 8.5 12.8889 8.64819 12.7 8.9L11.5 10.5Z" stroke="white" stroke-linejoin="round"/>
							<circle cx="15" cy="16" r="2.5" stroke="white"/>
						</svg>
						<div class="mt-1">{{ __('Camera') }}</div>
					</button>
					<button v-if="google_drive_settings.enabled" class="btn btn-file-upload" @click="show_google_drive_picker">
						<svg width="30" height="30">
							<image href="/assets/frappe/icons/social/google_drive.svg" width="30" height="30"/>
						</svg>
						<div class="mt-1">{{ __('Google Drive') }}</div>
					</button>
				</div>
				<div class="text-muted text-medium">
					{{ upload_notes }}
				</div>
			</div>
			<div v-else>
				{{ __('Drop files here') }}
			</div>
		</div>
		<div class="file-preview-area" v-show="files.length && !show_file_browser && !show_web_link">
			<div class="file-preview-container" v-if="!show_image_cropper">
				<FilePreview
					v-for="(file, i) in files"
					:key="file.name"
					:file="file"
					@remove="remove_file(file)"
					@toggle_private="file.private = !file.private"
					@toggle_optimize="file.optimize = !file.optimize"
					@toggle_image_cropper="toggle_image_cropper(i)"
				/>
			</div>
			<div class="flex align-center" v-if="show_upload_button && currently_uploading === -1">
				<button
					class="btn btn-primary btn-sm margin-right"
					@click="upload_files"
				>
					<span v-if="files.length === 1">
						{{ __('Upload file') }}
					</span>
					<span v-else>
						{{ __('Upload {0} files', [files.length]) }}
					</span>
				</button>
				<div class="text-muted text-medium">
					{{ __('Click on the lock icon to toggle public/private') }}
				</div>
			</div>
		</div>
		<ImageCropper
			v-if="show_image_cropper && wrapper_ready"
			:file="files[crop_image_with_index]"
			:fixed_aspect_ratio="restrictions.crop_image_aspect_ratio"
			@toggle_image_cropper="toggle_image_cropper(-1)"
			@upload_after_crop="trigger_upload=true"
		/>
		<FileBrowser
			ref="file_browser"
			v-if="show_file_browser && !disable_file_browser"
			@hide-browser="show_file_browser = false"
		/>
		<WebLink
			ref="web_link"
			v-if="show_web_link"
			@hide-web-link="show_web_link = false"
		/>
	</div>
</template>

<script>
import FilePreview from './FilePreview.vue';
import FileBrowser from './FileBrowser.vue';
import WebLink from './WebLink.vue';
import GoogleDrivePicker from '../../integrations/google_drive_picker';
import ImageCropper from './ImageCropper.vue';

export default {
	name: 'FileUploader',
	props: {
		show_upload_button: {
			default: true
		},
		disable_file_browser: {
			default: false
		},
		allow_multiple: {
			default: true
		},
		as_dataurl: {
			default: false
		},
		doctype: {
			default: null
		},
		docname: {
			default: null
		},
		fieldname: {
			default: null
		},
		folder: {
			default: 'Home'
		},
		method: {
			default: null
		},
		on_success: {
			default: null
		},
		make_attachments_public: {
			default: null,
		},
		restrictions: {
			default: () => ({
				max_file_size: null, // 2048 -> 2KB
				max_number_of_files: null,
				allowed_file_types: [], // ['image/*', 'video/*', '.jpg', '.gif', '.pdf'],
				crop_image_aspect_ratio: null // 1, 16 / 9, 4 / 3, NaN (free)
			})
		},
		attach_doc_image: {
			default: false
		},
		upload_notes: {
			default: null // "Images or video, upto 2MB"
		}
	},
	components: {
		FilePreview,
		FileBrowser,
		WebLink,
		ImageCropper
	},
	data() {
		return {
			files: [],
			is_dragging: false,
			currently_uploading: -1,
			show_file_browser: false,
			show_web_link: false,
			show_image_cropper: false,
			crop_image_with_index: -1,
			trigger_upload: false,
			close_dialog: false,
			hide_dialog_footer: false,
			allow_take_photo: false,
			allow_web_link: true,
			google_drive_settings: {
				enabled: false
			},
			wrapper_ready: false
		}
	},
	created() {
		this.allow_take_photo = window.navigator.mediaDevices;
		if (frappe.user_id !== "Guest") {
			frappe.call({
				// method only available after login
				method: "frappe.integrations.doctype.google_settings.google_settings.get_file_picker_settings",
				callback: (resp) => {
					if (!resp.exc) {
						this.google_drive_settings = resp.message;
					}
				}
			});
		}
		if (this.restrictions.max_file_size == null) {
			frappe.call('frappe.core.api.file.get_max_file_size')
				.then(res => {
					this.restrictions.max_file_size = Number(res.message);
				});
		}
		if (this.restrictions.max_number_of_files == null && this.doctype) {
			this.restrictions.max_number_of_files = frappe.get_meta(this.doctype)?.max_attachments;
		}
	},
	watch: {
		files(newvalue, oldvalue) {
			if (!this.allow_multiple && newvalue.length > 1) {
				this.files = [newvalue[newvalue.length - 1]];
			}
		}
	},
	computed: {
		upload_complete() {
			return this.files.length > 0
				&& this.files.every(
					file => file.total !== 0 && file.progress === file.total);
		}
	},
	methods: {
		dragover() {
			this.is_dragging = true;
		},
		dragleave() {
			this.is_dragging = false;
		},
		dropfiles(e) {
			this.is_dragging = false;
			this.add_files(e.dataTransfer.files);
		},
		browse_files() {
			this.$refs.file_input.click();
		},
		on_file_input(e) {
			this.add_files(this.$refs.file_input.files);
		},
		remove_file(file) {
			this.files = this.files.filter(f => f !== file);
		},
		toggle_image_cropper(index) {
			this.crop_image_with_index = this.show_image_cropper ? -1 : index;
			this.hide_dialog_footer = !this.show_image_cropper;
			this.show_image_cropper = !this.show_image_cropper;
		},
		toggle_all_private() {
			let flag;
			let private_values = this.files.filter(file => file.private);
			if (private_values.length < this.files.length) {
				// there are some private and some public
				// set all to private
				flag = true;
			} else {
				// all are private, set all to public
				flag = false;
			}
			this.files = this.files.map(file => {
				file.private = flag;
				return file;
			});
		},
		show_max_files_number_warning(file) {
			console.warn(
				\`File skipped because it exceeds the allowed specified limit of \${max_number_of_files} uploads\`,
				file,
			);
			if (this.doctype) {
				MSG = __('File "{0}" was skipped because only {1} uploads are allowed for DocType "{2}"', [file.name, max_number_of_files, this.doctype])
			} else {
				MSG = __('File "{0}" was skipped because only {1} uploads are allowed', [file.name, max_number_of_files])
			}
			frappe.show_alert({
				message: MSG,
				indicator: "orange",
			});
		},
		add_files(file_array) {
			let files = Array.from(file_array)
				.filter(this.check_restrictions)
				.map(file => {
					let is_image = file.type.startsWith('image');
					let size_kb = file.size / 1024;
					return {
						file_obj: file,
						cropper_file: file,
						crop_box_data: null,
						optimize: size_kb > 200 && is_image && !file.type.includes('svg'),
						name: file.name,
						doc: null,
						progress: 0,
						total: 0,
						failed: false,
						request_succeeded: false,
						error_message: null,
						uploading: false,
						private: !this.make_attachments_public,
					};
				});

			// pop extra files as per FileUploader.restrictions.max_number_of_files
			max_number_of_files = this.restrictions.max_number_of_files;
			if (max_number_of_files && files.length > max_number_of_files) {
				files.slice(max_number_of_files).forEach(file => {
					this.show_max_files_number_warning(file, this.doctype);
				});

				files = files.slice(0, max_number_of_files);
			}

			this.files = this.files.concat(files);
			// if only one file is allowed and crop_image_aspect_ratio is set, open cropper immediately
			if (this.files.length === 1 && !this.allow_multiple && this.restrictions.crop_image_aspect_ratio != null) {
				if (!this.files[0].file_obj.type.includes('svg')) {
					this.toggle_image_cropper(0);
				}
			}
		},
		check_restrictions(file) {
			let { max_file_size, allowed_file_types = [] } = this.restrictions;

			let is_correct_type = true;
			let valid_file_size = true;

			if (allowed_file_types && allowed_file_types.length) {
				is_correct_type = allowed_file_types.some((type) => {
					// is this is a mime-type
					if (type.includes('/')) {
						if (!file.type) return false;
						return file.type.match(type);
					}

					// otherwise this is likely an extension
					if (type[0] === '.') {
						return file.name.endsWith(type);
					}
					return false;
				});
			}

			if (max_file_size && file.size != null) {
				valid_file_size = file.size < max_file_size;
			}

			if (!is_correct_type) {
				console.warn('File skipped because of invalid file type', file);
				frappe.show_alert({
					message: __('File "{0}" was skipped because of invalid file type', [file.name]),
					indicator: 'orange'
				});
			}
			if (!valid_file_size) {
				console.warn('File skipped because of invalid file size', file.size, file);
				frappe.show_alert({
					message: __('File "{0}" was skipped because size exceeds {1} MB', [file.name, max_file_size / (1024 * 1024)]),
					indicator: 'orange'
				});
			}

			return is_correct_type && valid_file_size;
		},
		upload_files() {
			if (this.show_file_browser) {
				return this.upload_via_file_browser();
			}
			if (this.show_web_link) {
				return this.upload_via_web_link();
			}
			if (this.as_dataurl) {
				return this.return_as_dataurl();
			}
			return frappe.run_serially(
				this.files.map(
					(file, i) =>
						() => this.upload_file(file, i)
				)
			);
		},
		upload_via_file_browser() {
			let selected_file = this.$refs.file_browser.selected_node;
			if (!selected_file.value) {
				frappe.msgprint(__('Click on a file to select it.'));
				this.close_dialog = true;
				return Promise.reject();
			}
			this.close_dialog = true;
			return this.upload_file({
				file_url: selected_file.file_url
			});
		},
		upload_via_web_link() {
			let file_url = this.$refs.web_link.url;
			if (!file_url) {
				frappe.msgprint(__('Invalid URL'));
				this.close_dialog = true;
				return Promise.reject();
			}
			file_url = decodeURI(file_url)
			this.close_dialog = true;
			return this.upload_file({
				file_url
			});
		},
		return_as_dataurl() {
			let promises = this.files.map(file =>
				frappe.dom.file_to_base64(file.file_obj)
					.then(dataurl => {
						file.dataurl = dataurl;
						this.on_success && this.on_success(file);
					})
			);
			this.close_dialog = true;
			return Promise.all(promises);
		},
		upload_file(file, i) {
			this.currently_uploading = i;

			return new Promise((resolve, reject) => {
				let xhr = new XMLHttpRequest();
				xhr.upload.addEventListener('loadstart', (e) => {
					file.uploading = true;
				})
				xhr.upload.addEventListener('progress', (e) => {
					if (e.lengthComputable) {
						file.progress = e.loaded;
						file.total = e.total;
					}
				})
				xhr.upload.addEventListener('load', (e) => {
					file.uploading = false;
					resolve();
				})
				xhr.addEventListener('error', (e) => {
					file.failed = true;
					reject();
				})
				xhr.onreadystatechange = () => {
					if (xhr.readyState == XMLHttpRequest.DONE) {
						if (xhr.status === 200) {
							file.request_succeeded = true;
							let r = null;
							let file_doc = null;
							try {
								r = JSON.parse(xhr.responseText);
								if (r.message.doctype === 'File') {
									file_doc = r.message;
								}
							} catch(e) {
								r = xhr.responseText;
							}

							file.doc = file_doc;

							if (this.on_success) {
								this.on_success(file_doc, r);
							}

							if (i == this.files.length - 1 && this.files.every(file => file.request_succeeded)) {
								this.close_dialog = true;
							}

						} else if (xhr.status === 403) {
							file.failed = true;
							let response = JSON.parse(xhr.responseText);
							file.error_message = \`Not permitted. \${response._error_message || ''}\`;

						} else if (xhr.status === 413) {
							file.failed = true;
							file.error_message = 'Size exceeds the maximum allowed file size.';

						} else {
							file.failed = true;
							file.error_message = xhr.status === 0 ? 'XMLHttpRequest Error' : \`\${xhr.status} : \${xhr.statusText}\`;

							let error = null;
							try {
								error = JSON.parse(xhr.responseText);
							} catch(e) {
								// pass
							}
							frappe.request.cleanup({}, error);
						}
					}
				}
				xhr.open('POST', '/api/method/upload_file', true);
				xhr.setRequestHeader('Accept', 'application/json');
				xhr.setRequestHeader('X-Frappe-CSRF-Token', frappe.csrf_token);

				let form_data = new FormData();
				if (file.file_obj) {
					form_data.append('file', file.file_obj, file.name);
				}
				form_data.append('is_private', +file.private);
				form_data.append('folder', this.folder);

				if (file.file_url) {
					form_data.append('file_url', file.file_url);
				}

				if (file.file_name) {
					form_data.append('file_name', file.file_name);
				}

				if (this.doctype && this.docname) {
					form_data.append('doctype', this.doctype);
					form_data.append('docname', this.docname);
				}

				if (this.fieldname) {
					form_data.append('fieldname', this.fieldname);
				}

				if (this.method) {
					form_data.append('method', this.method);
				}

				if (file.optimize) {
					form_data.append('optimize', true);
				}

				if (this.attach_doc_image) {
					form_data.append('max_width', 200);
					form_data.append('max_height', 200);
				}

				xhr.send(form_data);
			});
		},
		capture_image() {
			const capture = new frappe.ui.Capture({
				animate: false,
				error: true
			});
			capture.show();
			capture.submit(data_urls => {
				data_urls.forEach(data_url => {
					let filename = \`capture_\${frappe.datetime.now_datetime().replaceAll(/[: -]/g, '_')}.png\`;
					this.url_to_file(data_url, filename, 'image/png').then((file) =>
						this.add_files([file])
					);
				});
			});
		},
		show_google_drive_picker() {
			this.close_dialog = true;
			let google_drive = new GoogleDrivePicker({
				pickerCallback: data => this.google_drive_callback(data),
				...this.google_drive_settings
			});
			google_drive.loadPicker();
		},
		google_drive_callback(data) {
			if (data.action == google.picker.Action.PICKED) {
				this.upload_file({
					file_url: data.docs[0].url,
					file_name: data.docs[0].name
				});
			} else if (data.action == google.picker.Action.CANCEL) {
				cur_frm.attachments.new_attachment()
			}
		},
		url_to_file(url, filename, mime_type) {
			return fetch(url)
					.then(res => res.arrayBuffer())
					.then(buffer => new File([buffer], filename, { type: mime_type }));
		},
	}
}
<\/script>
<style>
.file-upload-area {
	min-height: 16rem;
	display: flex;
	align-items: center;
	justify-content: center;
	border: 1px dashed var(--dark-border-color);
	border-radius: var(--border-radius);
	cursor: pointer;
	background-color: var(--bg-color);
}

.btn-file-upload {
	background-color: transparent;
	border: none;
	box-shadow: none;
	font-size: var(--text-xs);
}
</style>
`]},media:void 0})},k0=void 0,x0=void 0,C0=!1;function S0(r,t,e,i,n,o,a,s,l,d){let u=(typeof e=="function"?e.options:e)||{};u.__file="frappe/public/js/frappe/file_uploader/FileUploader.vue",u.render||(u.render=r.render,u.staticRenderFns=r.staticRenderFns,u._compiled=!0,n&&(u.functional=!0)),u._scopeId=i;{let h;if(t&&(h=a?function(p){t.call(this,d(p,this.$root.$options.shadowRoot))}:function(p){t.call(this,s(p))}),h!==void 0)if(u.functional){let p=u.render;u.render=function(x,y){return h.call(y),p(x,y)}}else{let p=u.beforeCreate;u.beforeCreate=p?[].concat(p,h):[h]}}return u}function Ho(){let r=Ho.styles||(Ho.styles={}),t=typeof navigator!="undefined"&&/msie [6-9]\\b/.test(navigator.userAgent.toLowerCase());return function(i,n){if(document.querySelector('style[data-vue-ssr-id~="'+i+'"]'))return;let o=t?n.media||"default":i,a=r[o]||(r[o]={ids:[],parts:[],element:void 0});if(!a.ids.includes(i)){let s=n.source,l=a.ids.length;if(a.ids.push(i),t&&(a.element=a.element||document.querySelector("style[data-group="+o+"]")),!a.element){let d=document.head||document.getElementsByTagName("head")[0],u=a.element=document.createElement("style");u.type="text/css",n.media&&u.setAttribute("media",n.media),t&&(u.setAttribute("data-group",o),u.setAttribute("data-next-index","0")),d.appendChild(u)}if(t&&(l=parseInt(a.element.getAttribute("data-next-index")),a.element.setAttribute("data-next-index",l+1)),a.element.styleSheet)a.parts.push(s),a.element.styleSheet.cssText=a.parts.filter(Boolean).join(`
`);else{let d=document.createTextNode(s),u=a.element.childNodes;u[l]&&a.element.removeChild(u[l]),u.length?a.element.insertBefore(d,u[l]):a.element.appendChild(d)}}}}var T0=S0({render:Id,staticRenderFns:y0},w0,b0,k0,C0,x0,!1,Ho,void 0,void 0),Rd=T0;var un=class{constructor({wrapper:t,method:e,on_success:i,doctype:n,docname:o,fieldname:a,files:s,folder:l,restrictions:d={},upload_notes:u,allow_multiple:h,as_dataurl:p,disable_file_browser:m,dialog_title:x,attach_doc_image:y,frm:v,make_attachments_public:w}={}){v&&v.attachments.max_reached(!0),t?this.wrapper=t.get?t.get(0):t:this.make_dialog(x),this.$fileuploader=new Vue({el:this.wrapper,render:k=>k(Rd,{props:{show_upload_button:!Boolean(this.dialog),doctype:n,docname:o,fieldname:a,method:e,folder:l,on_success:i,restrictions:d,upload_notes:u,allow_multiple:h,as_dataurl:p,disable_file_browser:m,attach_doc_image:y,make_attachments_public:w}})}),this.uploader=this.$fileuploader.$children[0],this.dialog||(this.uploader.wrapper_ready=!0),this.uploader.$watch("files",k=>{let c=k.every(_=>_.private);this.dialog&&this.dialog.set_secondary_action_label(c?__("Set all public"):__("Set all private"))},{deep:!0}),this.uploader.$watch("trigger_upload",k=>{k&&this.upload_files()}),this.uploader.$watch("close_dialog",k=>{k&&this.dialog&&this.dialog.hide()}),this.uploader.$watch("hide_dialog_footer",k=>{k?(this.dialog&&this.dialog.footer.addClass("hide"),this.dialog.$wrapper.data("bs.modal")._config.backdrop="static"):(this.dialog&&this.dialog.footer.removeClass("hide"),this.dialog.$wrapper.data("bs.modal")._config.backdrop=!0)}),s&&s.length&&this.uploader.add_files(s)}upload_files(){return this.dialog&&this.dialog.get_primary_btn().prop("disabled",!0),this.dialog&&this.dialog.get_secondary_btn().prop("disabled",!0),this.uploader.upload_files()}make_dialog(t){this.dialog=new frappe.ui.Dialog({title:t||__("Upload"),primary_action_label:__("Upload"),primary_action:()=>this.upload_files(),secondary_action_label:__("Set all private"),secondary_action:()=>{this.uploader.toggle_all_private()},on_page_show:()=>{this.uploader.wrapper_ready=!0}}),this.wrapper=this.dialog.body,this.dialog.show(),this.dialog.$wrapper.on("hidden.bs.modal",function(){$(this).data("bs.modal",null),$(this).remove()})}};frappe.provide("frappe.ui");frappe.ui.FileUploader=un;frappe.provide("frappe.ui");frappe.ui.Tree=class{constructor({parent:r,label:t,root_value:e,icon_set:i,toolbar:n,expandable:o,with_skeleton:a=1,args:s,method:l,get_label:d,on_render:u,on_click:h}){$.extend(this,arguments[0]),e==null&&(this.root_value=t),this.setup_treenode_class(),this.nodes={},this.wrapper=$('<div class="tree">').appendTo(this.parent),a&&this.wrapper.addClass("with-skeleton"),i||(this.icon_set={open:frappe.utils.icon("folder-open","md"),closed:frappe.utils.icon("folder-normal","md"),leaf:frappe.utils.icon("primitive-dot","xs")}),this.setup_root_node()}get_nodes(r,t){var e=Object.assign({},this.args);return e.parent=r,e.is_root=t,new Promise(i=>{frappe.call({method:this.method,args:e,callback:n=>{this.on_get_node&&this.on_get_node(n.message),i(n.message)}})})}get_all_nodes(r,t,e){var i=Object.assign({},this.args);return i.label=e||r,i.parent=r,i.is_root=t,i.tree_method=this.method,new Promise(n=>{frappe.call({method:"frappe.desk.treeview.get_all_nodes",args:i,callback:o=>{this.on_get_node&&this.on_get_node(o.message,!0),n(o.message)}})})}setup_treenode_class(){let r=this;this.TreeNode=class{constructor({parent:t,label:e,parent_label:i,expandable:n,is_root:o,data:a}){$.extend(this,arguments[0]),this.loaded=0,this.expanded=0,this.parent_label&&(this.parent_node=r.nodes[this.parent_label]),r.nodes[this.label]=this,r.make_node_element(this),r.on_render&&r.on_render(this)}}}setup_root_node(){this.root_node=new this.TreeNode({parent:this.wrapper,label:this.label,parent_label:null,expandable:!0,is_root:!0,data:{value:this.root_value}}),this.expand_node(this.root_node,!1)}refresh(){this.selected_node.parent_node&&this.load_children(this.selected_node.parent_node,!0)}make_node_element(r){r.$tree_link=$('<span class="tree-link">').attr("data-label",r.label).data("node",r).appendTo(r.parent),r.$ul=$('<ul class="tree-children">').hide().appendTo(r.parent),this.make_icon_and_label(r),this.toolbar&&(r.$toolbar=this.get_toolbar(r).insertAfter(r.$tree_link))}add_node(r,t){var e=$('<li class="tree-node">');return new this.TreeNode({parent:e.appendTo(r.$ul),parent_label:r.label,label:t.value,title:t.title,expandable:t.expandable,data:t})}reload_node(r){return this.load_children(r)}toggle(){this.get_selected_node().toggle()}get_selected_node(){return this.selected_node}set_selected_node(r){this.selected_node=r}load_children(r,t=!1){let e=r.data.value,i=r.is_root;return t?frappe.run_serially([()=>this.get_all_nodes(e,i,r.label),n=>this.render_children_of_all_nodes(n),()=>this.set_selected_node(r)]):frappe.run_serially([()=>this.get_nodes(e,i),n=>this.render_node_children(r,n),()=>this.set_selected_node(r)])}render_children_of_all_nodes(r){r.map(t=>this.render_node_children(this.nodes[t.parent],t.data))}render_node_children(r,t){r.$ul.empty(),t&&$.each(t,(e,i)=>{var n=this.add_node(r,i);n.$tree_link.data("node-data",i).data("node",n)}),r.expanded=!1,r.loaded=!0,this.expand_node(r)}on_node_click(r){this.expand_node(r),frappe.dom.activate(this.wrapper,r.$tree_link,"tree-link"),r.$toolbar&&this.show_toolbar(r)}expand_node(r,t=!0){this.set_selected_node(r),t&&this.on_click&&this.on_click(r),r.expandable&&this.toggle_node(r),this.select_link(r),r.expanded=!r.expanded,r.parent.toggleClass("opened",r.expanded)}toggle_node(r){if(r.expandable&&this.get_nodes&&!r.loaded)return this.load_children(r);r.$ul&&(r.$ul.children().length&&r.$ul.toggle(!r.expanded),this.icon_set&&(r.expanded?r.$tree_link.find(".icon").parent().addClass("node-parent").html(this.icon_set.closed):r.$tree_link.find(".icon").parent().html(this.icon_set.open)))}select_link(r){this.wrapper.find(".selected").removeClass("selected"),r.$tree_link.toggleClass("selected")}show_toolbar(r){this.cur_toolbar&&$(this.cur_toolbar).hide(),this.cur_toolbar=r.$toolbar,r.$toolbar.show()}get_node_label(r){return this.get_label?this.get_label(r):r.title&&r.title!=r.label?__(r.title)+` <span class='text-muted'>(${r.label})</span>`:__(r.title||r.label)}make_icon_and_label(r){let t="";this.icon_set&&(r.expandable?t=`<span class="node-parent">${this.icon_set.closed}</span>`:t=`<span>${this.icon_set.leaf}</span>`),$(t).appendTo(r.$tree_link),$(`<a class="tree-label"> ${this.get_node_label(r)}</a>`).appendTo(r.$tree_link),r.$tree_link.on("click",()=>{setTimeout(()=>{this.on_node_click(r)},100)}),r.$tree_link.hover(function(){$(this).parent().addClass("hover-active")},function(){$(this).parent().removeClass("hover-active")})}get_toolbar(r){let t=$('<span class="tree-node-toolbar btn-group"></span>').hide();return Object.keys(this.toolbar).map(e=>{let i=this.toolbar[e];if(!!i.label&&!(i.condition&&!i.condition(r))){var n=i.get_label?i.get_label():i.label,o=$("<button class='btn btn-default btn-xs'></button>").html(n).addClass("tree-toolbar-button "+(i.btnClass||"")).appendTo(t);o.on("click",()=>{i.click(r)})}}),t}};frappe.provide("frappe.pages");frappe.provide("frappe.views");window.cur_page=null;frappe.views.Container=class{constructor(){this.container=$("#body").get(0),this.page=null,this.pagewidth=$(this.container).width(),this.pagemargin=50;var t=this;$(document).on("page-change",function(){var e=frappe.get_route_str();$("body").attr("data-route",e),$("body").attr("data-sidebar",t.has_sidebar()?1:0)}),$(document).bind("rename",function(e,i,n,o){frappe.breadcrumbs.rename(i,n,o)})}add_page(t){var e=$('<div class="content page-container"></div>').attr("id","page-"+t).attr("data-page-route",t).hide().appendTo(this.container).get(0);return e.label=t,frappe.pages[t]=e,e}change_to(t){if(cur_page=this,t.tagName)var e=t;else var e=frappe.pages[t];if(!e){console.log(__("Page not found")+": "+t);return}return window.cur_dialog&&cur_dialog.display&&!cur_dialog.keep_open&&(cur_dialog.minimizable?cur_dialog.is_minimized||cur_dialog.toggle_minimize():cur_dialog.hide()),this.page&&this.page!=e&&($(this.page).hide(),$(this.page).trigger("hide")),(!this.page||this.page!=e)&&(this.page=e,$(this.page).show()),$(document).trigger("page-change"),this.page._route=frappe.router.get_sub_path(),$(this.page).trigger("show"),!this.page.disable_scroll_to_top&&frappe.utils.scroll_to(0),frappe.breadcrumbs.update(),this.page}has_sidebar(){var t=0,e=frappe.get_route_str();if(t=frappe.ui.pages[e]&&!frappe.ui.pages[e].single_column,!t){var i=e.split("/").slice(0,2).join("/");t=$(`.page-container[data-page-route="${i}"] .layout-side-section`).length?1:0}return t}};frappe.breadcrumbs={all:{},preferred:{File:"",Dashboard:"Customization","Dashboard Chart":"Customization","Dashboard Chart Source":"Customization"},module_map:{Core:"Settings",Email:"Settings",Custom:"Settings",Workflow:"Settings",Printing:"Settings",Setup:"Settings","Event Streaming":"Tools",Automation:"Tools"},set_doctype_module(r,t){localStorage["preferred_breadcrumbs:"+r]=t},get_doctype_module(r){return localStorage["preferred_breadcrumbs:"+r]},add(r,t,e){let i;typeof r=="object"?i=r:i={module:r,doctype:t,type:e},this.all[frappe.breadcrumbs.current_page()]=i,this.update()},current_page(){return frappe.get_route_str()},update(){var r=this.all[frappe.breadcrumbs.current_page()];if(this.clear(),!r)return this.toggle(!1);if(r.type==="Custom")this.set_custom_breadcrumbs(r);else{this.set_workspace_breadcrumb(r);let t=frappe.get_route()[0];t=t?t.toLowerCase():null,r.doctype&&["print","form"].includes(t)?(this.set_list_breadcrumb(r),this.set_form_breadcrumb(r,t)):r.doctype&&t==="list"?this.set_list_breadcrumb(r):r.doctype&&t=="dashboard-view"&&(this.set_list_breadcrumb(r),this.set_dashboard_breadcrumb(r))}this.toggle(!0)},set_custom_breadcrumbs(r){let t=`<li><a href="${r.route}">${r.label}</a></li>`;this.$breadcrumbs.append(t)},get last_route(){return frappe.route_history.slice(-2)[0]},set_workspace_breadcrumb(r){r.workspace||this.set_workspace(r),r.workspace&&(r.module_info&&(r.module_info.blocked||!frappe.visible_modules.includes(r.module_info.module))||$(`<li><a href="/app/${frappe.router.slug(r.workspace)}">${__(r.workspace)}</a></li>`).appendTo(this.$breadcrumbs))},set_workspace(r){var e,i;this.setup_modules();var t=this.get_doctype_module(r.doctype);if(t?r.module=t:this.preferred[r.doctype]!==void 0&&(r.module=this.preferred[r.doctype]),((e=this.last_route)==null?void 0:e[0])=="Workspaces"){let n=this.last_route[1];if(r.module&&((i=frappe.boot.module_wise_workspaces[r.module])==null?void 0:i.includes(n))){r.workspace=n;return}}r.module&&(this.module_map[r.module]&&(r.module=this.module_map[r.module]),r.module_info=frappe.get_module(r.module),r.module_info&&frappe.boot.module_wise_workspaces[r.module]&&(r.workspace=frappe.boot.module_wise_workspaces[r.module][0]))},set_list_breadcrumb(r){let t=r.doctype,e=frappe.get_doc("DocType",t);if(!(t==="User"&&!frappe.user.has_role("System Manager")||(e==null?void 0:e.issingle))){let i,n=frappe.router.slug(frappe.router.doctype_layout||t);if(e!=null&&e.is_tree){let o=frappe.model.user_settings[t].last_view||"Tree";i=`${n}/view/${o}`}else i=n;$(`<li><a href="/app/${i}">${__(t)}</a></li>`).appendTo(this.$breadcrumbs)}},set_form_breadcrumb(r,t){let e=r.doctype,i=frappe.get_route().slice(2).join("/"),n=`/app/${frappe.router.slug(e)}/${i}`;if($(`<li><a href="${n}">${__(i)}</a></li>`).appendTo(this.$breadcrumbs),t==="form"){let o=this.$breadcrumbs.find("li").last();o.addClass("disabled"),o.css("cursor","copy"),o.click(a=>{a.stopImmediatePropagation(),frappe.utils.copy_to_clipboard(o.text())})}},set_dashboard_breadcrumb(r){let t=r.doctype,e=frappe.get_route()[1],i=`/app/${frappe.router.slug(t)}/${e}`;$(`<li><a href="${i}">${__(e)}</a></li>`).appendTo(this.$breadcrumbs)},setup_modules(){frappe.visible_modules||(frappe.visible_modules=$.map(frappe.boot.allowed_workspaces,r=>r.module))},rename(r,t,e){var i=["Form",r,t].join("/"),n=["Form",r,e].join("/");this.all[n]=this.all[i],delete frappe.breadcrumbs.all[i],this.update()},clear(){this.$breadcrumbs=$("#navbar-breadcrumbs").empty()},toggle(r){r?$("body").addClass("no-breadcrumbs"):$("body").removeClass("no-breadcrumbs")}};frappe.provide("frappe.pages");frappe.provide("frappe.views");frappe.views.Factory=class{constructor(t){$.extend(this,t)}show(){this.route=frappe.get_route(),this.page_name=frappe.get_route_str(),!(this.before_show&&this.before_show()===!1)&&(frappe.pages[this.page_name]?(frappe.container.change_to(this.page_name),this.on_show&&this.on_show()):this.route[1]?this.make(this.route):frappe.show_not_found(this.route))}make_page(t,e){return frappe.make_page(t,e)}};frappe.make_page=function(r,t){t||(t=frappe.get_route_str());let e=frappe.container.add_page(t);return frappe.ui.make_app_page({parent:e,single_column:!r}),frappe.container.change_to(t),e};frappe.provide("frappe.views.pageview");frappe.provide("frappe.standard_pages");frappe.views.pageview={with_page:function(r,t){if(frappe.standard_pages[r]){frappe.pages[r]||frappe.standard_pages[r](),t();return}if(locals.Page&&locals.Page[r]&&locals.Page[r].script||r==window.page_name)t();else if(localStorage["_page:"+r]&&frappe.boot.developer_mode!=1)frappe.model.sync(JSON.parse(localStorage["_page:"+r])),t();else if(r)return frappe.call({method:"frappe.desk.desk_page.getpage",args:{name:r},callback:function(e){e.docs._dynamic_page||(localStorage["_page:"+r]=JSON.stringify(e.docs)),t()},freeze:!0})},show:function(r){r||(r=frappe.boot?frappe.boot.home_page:window.page_name),frappe.model.with_doctype("Page",function(){frappe.views.pageview.with_page(r,function(t){t&&t.exc?t["403"]||frappe.show_not_found(r):frappe.pages[r]||new frappe.views.Page(r),frappe.container.change_to(r)})})}};frappe.views.Page=class{constructor(t){this.name=t;var e=this;if(t==window.page_name)this.wrapper=document.getElementById("page-"+t),this.wrapper.label=document.title||window.page_name,this.wrapper.page_name=window.page_name,frappe.pages[window.page_name]=this.wrapper;else{if(this.pagedoc=locals.Page[this.name],!this.pagedoc){frappe.show_not_found(t);return}this.wrapper=frappe.container.add_page(this.name),this.wrapper.page_name=this.pagedoc.name,this.pagedoc.content&&(this.wrapper.innerHTML=this.pagedoc.content),frappe.dom.eval(this.pagedoc.__script||this.pagedoc.script||""),frappe.dom.set_style(this.pagedoc.style||""),frappe.breadcrumbs.add(this.pagedoc.module||null)}this.trigger_page_event("on_page_load"),$(this.wrapper).on("show",function(){window.cur_frm=null,e.trigger_page_event("on_page_show"),e.trigger_page_event("refresh")})}trigger_page_event(t){var e=this;e.wrapper[t]&&e.wrapper[t](e.wrapper)}};frappe.show_not_found=function(r){frappe.show_message_page({page_name:r,message:__("Sorry! I could not find what you were looking for."),img:"/assets/frappe/images/ui/bubble-tea-sorry.svg"})};frappe.show_not_permitted=function(r){frappe.show_message_page({page_name:r,message:__("Sorry! You are not permitted to view this page."),img:"/assets/frappe/images/ui/bubble-tea-sorry.svg"})};frappe.show_message_page=function(r){r.page_name||(r.page_name=frappe.get_route_str()),r.icon?r.img=repl('<span class="%(icon)s message-page-icon"></span> ',r):r.img&&(r.img=repl('<img src="%(img)s" class="message-page-image">',r));var t=frappe.pages[r.page_name]||frappe.container.add_page(r.page_name);$(t).html(repl('<div class="page message-page">			<div class="text-center message-page-content">				%(img)s				<p class="lead">%(message)s</p>				<a class="btn btn-default btn-sm btn-home" href="/app">%(home)s</a>			</div>		</div>',{img:r.img||"",message:r.message||"",home:__("Home")})),frappe.container.change_to(r.page_name)};var HE=Vt(Pd());frappe.provide("frappe.search");frappe.ui.Notifications=class{constructor(){this.tabs={},this.notification_settings=frappe.boot.notification_settings,this.make()}make(){this.dropdown=$(".navbar").find(".dropdown-notifications").removeClass("hidden"),this.dropdown_list=this.dropdown.find(".notifications-list"),this.header_items=this.dropdown_list.find(".header-items"),this.header_actions=this.dropdown_list.find(".header-actions"),this.body=this.dropdown_list.find(".notification-list-body"),this.panel_events=this.dropdown_list.find(".panel-events"),this.panel_notifications=this.dropdown_list.find(".panel-notifications"),this.user=frappe.session.user,this.setup_headers(),this.setup_dropdown_events()}setup_headers(){$(`<span class="notification-settings pull-right" data-action="go_to_settings">
			${frappe.utils.icon("setting-gear")}
		</span>`).on("click",i=>{i.stopImmediatePropagation(),this.dropdown.dropdown("hide"),frappe.set_route("Form","Notification Settings",frappe.session.user)}).appendTo(this.header_actions).attr("title",__("Notification Settings")).tooltip({delay:{show:600,hide:100},trigger:"hover"}),$(`<span class="mark-all-read pull-right" data-action="mark_all_as_read">
			${frappe.utils.icon("mark-as-read")}
		</span>`).on("click",i=>this.mark_all_as_read(i)).appendTo(this.header_actions).attr("title",__("Mark all as read")).tooltip({delay:{show:600,hide:100},trigger:"hover"}),this.categories=[{label:__("Notifications"),id:"notifications",view:Nd,el:this.panel_notifications},{label:__("Today's Events"),id:"todays_events",view:jd,el:this.panel_events}];let t=i=>`<li class="notifications-category ${i.id=="notifications"?"active":""}"
					id="${i.id}"
					data-toggle="collapse"
				>${i.label}</li>`,e=$('<ul class="notification-item-tabs nav nav-tabs" role="tablist"></ul>');this.categories=this.categories.map(i=>(i.$tab=$(t(i)),i.$tab.on("click",n=>{n.stopImmediatePropagation(),this.switch_tab(i)}),e.append(i.$tab),i)),e.appendTo(this.header_items),this.categories.forEach(i=>{this.make_tab_view(i)}),this.switch_tab(this.categories[0])}switch_tab(t){this.categories.forEach(e=>{e.$tab.removeClass("active")}),t.$tab.addClass("active"),Object.keys(this.tabs).forEach(e=>this.tabs[e].hide()),this.tabs[t.id].show()}make_tab_view(t){let e=new t.view(t.el,this.dropdown,this.notification_settings);this.tabs[t.id]=e}mark_all_as_read(t){t.stopImmediatePropagation(),this.dropdown_list.find(".unread").removeClass("unread"),frappe.call("frappe.desk.doctype.notification_log.notification_log.mark_all_as_read")}setup_dropdown_events(){this.dropdown.on("hide.bs.dropdown",t=>{let e=$(t.currentTarget).data("closable");return $(t.currentTarget).data("closable",!0),e}),this.dropdown.on("click",t=>{$(t.currentTarget).data("closable",!0)})}};frappe.ui.notifications={get_notification_config(){return frappe.xcall("frappe.desk.notifications.get_notification_info").then(r=>(frappe.ui.notifications.config=r,r))},show_open_count_list(r){frappe.ui.notifications.config?this.route_to_list_with_filters(r):this.get_notification_config().then(()=>{this.route_to_list_with_filters(r)})},route_to_list_with_filters(r){let t=frappe.ui.notifications.config.conditions[r];t&&$.isPlainObject(t)&&(frappe.route_options||(frappe.route_options={}),$.extend(frappe.route_options,t)),frappe.set_route("List",r)}};var qo=class{constructor(t,e,i){this.wrapper=t,this.parent=e,this.settings=i,this.max_length=20,this.container=$("<div></div>").appendTo(this.wrapper),this.make()}show(){this.container.show()}hide(){this.container.hide()}},Nd=class extends qo{make(){this.notifications_icon=this.parent.find(".notifications-icon"),this.notifications_icon.attr("title",__("Notifications")).tooltip({delay:{show:600,hide:100},trigger:"hover"}),this.setup_notification_listeners(),this.get_notifications_list(this.max_length).then(t=>{!t.message||(this.dropdown_items=t.message.notification_logs,frappe.update_user_info(t.message.user_info),this.render_notifications_dropdown(),this.settings.seen==0&&this.dropdown_items.length>0&&this.toggle_notification_icon(!1))})}update_dropdown(){this.get_notifications_list(1).then(t=>{if(!t.message)return;let e=t.message.notification_logs[0];frappe.update_user_info(t.message.user_info),this.dropdown_items.unshift(e),this.dropdown_items.length>this.max_length&&(this.container.find(".recent-notification").last().remove(),this.dropdown_items.pop()),this.insert_into_dropdown()})}change_activity_status(){this.container.find(".activity-status")&&this.container.find(".activity-status").replaceWith(`<a class="recent-item text-center text-muted"
					href="/app/List/Notification Log">
					<div class="full-log-btn">${__("View Full Log")}</div>
				</a>`)}mark_as_read(t,e){frappe.call("frappe.desk.doctype.notification_log.notification_log.mark_as_read",{docname:t}).then(()=>{e.removeClass("unread")})}insert_into_dropdown(){let t=this.dropdown_items[0],e=this.get_dropdown_item_html(t);$(e).prependTo(this.container),this.change_activity_status()}get_dropdown_item_html(t){let e=this.get_item_link(t),i=t.read?"":"unread",n=t.subject,o=n.match(/<b class="subject-title">(.*?)<\/b>/);n=o?n.replace(o[1],frappe.ellipsis(strip_html(o[1]),100)):n;let a=frappe.datetime.comment_when(t.creation),s=`<div class="message">
			<div>${n}</div>
			<div class="notification-timestamp text-muted">
				${a}
			</div>
		</div>`,l=t.from_user,d=frappe.avatar(l,"avatar-medium user-avatar"),u=$(`<a class="recent-item notification-item ${i}"
				href="${e}"
				data-name="${t.name}"
			>
				<div class="notification-body">
					${d}
					${s}
				</div>
				<div class="mark-as-read" title="${__("Mark as Read")}">
				</div>
			</a>`);if(!t.read){let h=u.find(".mark-as-read");h.tooltip({delay:{show:600,hide:100},trigger:"hover"}),h.on("click",p=>{p.preventDefault(),p.stopImmediatePropagation(),this.mark_as_read(t.name,u)})}return u.on("click",()=>{!t.read&&this.mark_as_read(t.name,u),this.notifications_icon.trigger("click")}),u}render_notifications_dropdown(){this.settings&&!this.settings.enabled?this.container.html(`<li class="recent-item notification-item">
				<span class="text-muted">
					${__("Notifications Disabled")}
				</span></li>`):this.dropdown_items.length?(this.container.empty(),this.dropdown_items.forEach(t=>{this.container.append(this.get_dropdown_item_html(t))}),this.container.append(`<a class="list-footer"
					href="/app/List/Notification Log">
						<div class="full-log-btn">${__("See all Activity")}</div>
					</a>`)):this.container.append($(`<div class="notification-null-state">
					<div class="text-center">
						<img src="/assets/frappe/images/ui-states/notification-empty-state.svg" alt="Generic Empty State" class="null-state">
						<div class="title">${__("No New notifications")}</div>
						<div class="subtitle">
							${__("Looks like you haven\u2019t received any notifications.")}
					</div></div></div>`))}get_notifications_list(t){return frappe.call("frappe.desk.doctype.notification_log.notification_log.get_notification_logs",{limit:t})}get_item_link(t){let e=t.document_type?t.document_type:"Notification Log",i=t.document_name?t.document_name:t.name;return frappe.utils.get_form_link(e,i)}toggle_notification_icon(t){this.notifications_icon.find(".notifications-seen").toggle(t),this.notifications_icon.find(".notifications-unseen").toggle(!t)}toggle_seen(t){frappe.call("frappe.desk.doctype.notification_settings.notification_settings.set_seen_value",{value:cint(t),user:frappe.session.user})}setup_notification_listeners(){frappe.realtime.on("notification",()=>{this.toggle_notification_icon(!1),this.update_dropdown()}),frappe.realtime.on("indicator_hide",()=>{this.toggle_notification_icon(!0)}),this.parent.on("show.bs.dropdown",()=>{this.toggle_seen(!0),this.notifications_icon.find(".notifications-unseen").is(":visible")&&(this.toggle_notification_icon(!0),frappe.call("frappe.desk.doctype.notification_log.notification_log.trigger_indicator_hide"))})}},jd=class extends qo{make(){let t=frappe.datetime.get_today();frappe.xcall("frappe.desk.doctype.event.event.get_events",{start:t,end:t}).then(e=>{this.render_events_html(e)})}render_events_html(t){let e="";if(t.length){let i=n=>{let o=__("All Day");if(!n.all_day){let l=frappe.datetime.get_time(n.starts_on),d=frappe.datetime.get_day_diff(n.ends_on,n.starts_on),u=frappe.datetime.get_time(n.ends_on);d>1&&(u=__("Rest of the day")),o=`${l} - ${u}`}let a="";n.particpants&&(a=frappe.avatar_group(n.particpants,3));let s="";return n.location&&(s=`, ${n.location}`),`<a class="recent-item event" href="/app/event/${n.name}">
					<div class="event-border" style="border-color: ${n.color}"></div>
					<div class="event-item">
						<div class="event-subject">${n.subject}</div>
						<div class="event-time">${o}${s}</div>
						${a}
					</div>
				</a>`};e=t.map(i).join("")}else e=`
				<div class="notification-null-state">
					<div class="text-center">
					<img src="/assets/frappe/images/ui-states/event-empty-state.svg" alt="Generic Empty State" class="null-state">
					<div class="title">${__("No Upcoming Events")}</div>
					<div class="subtitle">
						${__("There are no upcoming events for you.")}
				</div></div></div>
			`;this.container.html(e)}};frappe.provide("frappe.search");frappe.search.SearchDialog=class{constructor(r){$.extend(this,r),this.make()}make(){this.search_dialog=new frappe.ui.Dialog({minimizable:!0,size:"large"}),this.set_header(),this.$wrapper=$(this.search_dialog.$wrapper).addClass("search-dialog"),this.$body=$(this.search_dialog.body),this.$input=this.$wrapper.find(".search-input"),this.setup()}set_header(){this.search_dialog.header.addClass("search-header").find(".title-section").html(`<div class="input-group text-muted">
					<input type="text" class="form-control search-input">
				</div>
				<span class="search-icon">
					${frappe.utils.icon("search")}
				</span>`)}setup(){this.modal_state=0,this.current_keyword="",this.more_count=20,this.full_lists={},this.nav_lists={},this.init_search_objects(),this.bind_input(),this.bind_events()}init_search_objects(){this.searches={global_search:{input_placeholder:__("Search"),empty_state_text:__("Search for anything"),no_results_status:()=>__("No Results found"),get_results:(r,t)=>{let e=0,i=1e3,n=frappe.search.utils.get_nav_results(r);frappe.search.utils.get_global_results(r,e,i).then(o=>{n=n.concat(o),t(n,r)},o=>{console.error(o)})}},tags:{input_placeholder:__("Search"),empty_state_text:__("Search for anything"),no_results_status:r=>"<div>"+__("No documents found tagged with {0}",[r])+"</div>",get_results:(r,t)=>{var e=frappe.search.utils.get_nav_results(r);frappe.tags.utils.get_tag_results(r).then(i=>{e=e.concat(i),t(e,r)},i=>{console.error(i)})}}}}update(r){this.$wrapper.find(".loading-state").addClass("hide"),this.$body.append(r),this.$body.find(".search-results").length>1?(this.$body.find(".search-results").first().addClass("hide"),r.removeClass("hide"),this.$body.find(".search-results").first().remove()):r.removeClass("hide")}put_placeholder(r){var t=$(`<div class="row search-results hide">
			<div class="empty-state">
				<div class="text-center">
					<img src="/assets/frappe/images/ui-states/search-empty-state.svg"
						alt="Generic Empty State"
						class="null-state"
					>
					<div class="empty-state-text">${r}</div>
				</div>
			</div>
		</div>`);this.update(t)}bind_input(){this.$input.on("input",r=>{let t=$(r.currentTarget);clearTimeout(t.data("timeout")),t.data("timeout",setTimeout(()=>{if(this.$input.val()===this.current_keyword)return;let e=this.$input.val();e.length>1?this.get_results(e):(this.current_keyword="",this.put_placeholder(this.search.empty_state_text))},300))})}bind_events(){this.$body.on("click",".list-link",r=>{let t=$(r.currentTarget);this.$body.find(".search-sidebar").find(".list-link").removeClass("active selected"),t.addClass("active selected");let e=t.attr("data-category");this.$body.find(".results-area").empty().html(this.full_lists[e]),this.$body.find(".module-section-link").first().focus()}),this.$body.on("click",".section-more",r=>{let e=$(r.currentTarget).attr("data-category");this.$body.find(".search-sidebar").find('*[data-category="'+e+'"]').trigger("click")}),this.$body.on("click",".all-results-link",()=>{this.$body.find(".search-sidebar").find('*[data-category="All Results"]').trigger("click")}),this.$body.on("click",".list-more",r=>{let t=$(r.currentTarget),e=t.attr("data-category"),i=t.attr("data-search");var n=this.$body.find(".result").length;if(i==="Global")frappe.search.utils.get_global_results(this.current_keyword,n,this.more_count,e).then(o=>{o.length&&this.add_more_results(o)},o=>{console.error(o)});else{let o=this.nav_lists[e].slice(0,this.more_count);this.nav_lists[e].splice(0,this.more_count),this.add_more_results([{title:e,results:o}])}}),this.$body.on("click",".switch-to-global-search",()=>{this.search=this.searches.global_search,this.$input.attr("placeholder",this.search.input_placeholder),this.put_placeholder(this.search.empty_state_text),this.get_results(this.current_keyword)})}init_search(r,t){this.search=this.searches[t],this.$input.attr("placeholder",this.search.input_placeholder),this.put_placeholder(this.search.empty_state_text),this.get_results(r),this.search_dialog.show(),this.$input.val(r),setTimeout(()=>this.$input.select(),500)}get_results(r){this.current_keyword=r,this.$body.find(".empty-state").length>0?this.put_placeholder(__("Searching ...")):this.$wrapper.find(".loading-state").removeClass("hide"),this.current_keyword.charAt(0)==="#"?this.search=this.searches.tags:this.search=this.searches.global_search,this.search.get_results(r,this.parse_results.bind(this))}parse_results(r,t){r=r.filter(function(e){return e.results.length>0}),r.length>0?this.render_data(r):this.put_placeholder(this.search.no_results_status(t))}render_data(r){let t=$(frappe.render_template("search")).addClass("hide"),e=t.find(".search-sidebar").empty(),i='<li class="search-sidebar-item standard-sidebar-item list-link" data-category="{0}"><a><span class="ellipsis">{1}</span></a></li>';this.modal_state=0,this.full_lists={"All Results":$('<div class="results-summary"></div>')},this.nav_lists={},r.forEach(n=>{e.append($(__(i,[n.title,__(n.title)]))),this.add_section_to_summary(n.title,n.results),this.full_lists[n.title]=this.render_full_list(n.title,n.results,n.fetch_type)}),r.length>1&&e.prepend($(__(i,["All Results",__("All Results")]))),this.update(t.clone()),this.$body.find(".list-link").first().trigger("click")}render_full_list(r,t,e){let i=20,n=$(`<div class="results-summary">
			<div class="result-section full-list ${r}-section col-sm-12">
				<div class="result-title"> ${__(r)}</div>
				<div class="result-body">
				</div>
			</div>
		</div>`);return t.slice(0,i).forEach(o=>{n.find(".result-body").append(this.render_result(r,o))}),t.length>0&&(e==="Nav"&&(this.nav_lists[r]=t),t.length>i&&$(`<a class="list-more" data-search="${e}"
					data-category="${r}" data-count="${i}">
						${__("More")}
				</a>`).appendTo(n.find(".result-body"))),n}add_section_to_summary(r,t){let e=4,i="",n=a=>this.render_result(r,a);t.length>e&&(i=`<div>
				<a class="section-more" data-category="${r}">${__("More")}</a>
			</div>`),$(`<div class="col-sm-12 result-section" data-type="${r}">
			<div class="result-title">${__(r)}</div>
			<div class="result-body">
				${i}
			</div>
		</div>`).appendTo(this.full_lists["All Results"]).find(".result-body").prepend(t.slice(0,e).map(n))}get_link(r){let t="";return r.route?t=`href="/app/${r.route.join("/")}"`:r.data_path&&(t=`data-path=${r.data_path}"`),t}render_result(r,t){let e="";if(t.image!==void 0){let s=frappe.get_avatar("avatar-medium",t.label,t.image);e=`<a ${this.get_link(t)}>
				<div class="result-image">
					${s}
				</div>
			</a>`}let i=`<a ${this.get_link(t)} class="result-section-link">${t.label}</a>`,o=`<div class="result-text">
			${t.description?`<b>${i}</b><div class="description"> ${t.description} </div>`:i}
		</div>`,a=$(`<div class="result ${r}-result">
			${e}
			${o}
			${t.subtypes||""}
		</div>`);return t.description||this.handle_result_click(t,a),a}handle_result_click(r,t){r.route_options&&(frappe.route_options=r.route_options),t.on("click",()=>{if(r.onclick)r.onclick(r.match);else{var e=window.location.hash;frappe.set_route(r.route),window.location.hash==e&&frappe.router.route()}})}add_more_results(r){let t=$('<div class="more-results last"></div>');if(r[0].results&&r[0].results.forEach(e=>{t.append(this.render_result(r[0].title,e))}),this.$body.find(".list-more").before(t),r[0].results.length<this.more_count){this.$body.find(".list-more").hide();let e=this.$body.find(".result").length,i=$('<div class="results-status">'+e+" results found</div>");this.$body.find(".more-results:last").append(i)}this.$body.find(".more-results.last").slideDown(200,function(){})}};frappe.provide("frappe.tags");frappe.tags.utils={get_tags:function(r){r=r.slice(1);let t=[];for(let e in frappe.tags.tags){let i=frappe.tags.tags[e],n=frappe.search.utils.fuzzy_search(r,i);n&&t.push({type:"Tag",label:__("#{0}",[frappe.search.utils.bolden_match_part(__(i),r)]),value:__("#{0}",[__(i)]),index:1+n,match:i,onclick(){frappe.searchdialog.search.init_search("#".concat(i),"tags")}})}return t},fetch_tags(){frappe.call({method:"frappe.desk.doctype.tag.tag.get_tags_list_for_awesomebar",callback:function(r){r&&r.message&&(frappe.tags.tags=$.extend([],r.message))}})},get_tag_results:function(r){function t(e){var i=[],n,o;function a(l){return i.find(function(d){return d.title===l})}function s(l){var d=110,u=null;if(l.length>d)u=l.slice(0,d)+"...";else{var h=l.length;u=l.slice(0,h)+"..."}return u}return e.forEach(function(l){var d="";l.content&&(d=s(l.content)),n={label:l.name,value:l.name,description:d,route:["Form",l.doctype,l.name]},o=a(l.doctype),o?o.results.push(n):(o={title:l.doctype,results:[n],fetch_type:"Global"},i.push(o))}),i}return new Promise(function(e){frappe.call({method:"frappe.desk.doctype.tag.tag.get_documents_for_tag",args:{tag:r},callback:function(i){i.message?e(t(i.message)):e([])}})})}};frappe.templates.search=`<div class="search-results flex">
	<div class="col-md-3 col-sm-3 hidden-xs layout-side-section">
		<ul class="overlay-sidebar list-unstyled search-sidebar"></ul>
	</div>
	<div class="col-md-9 col-sm-9 layout-main-section results-area">

	</div>
</div>
`;function Wo(r,t){return Dd(r,t,0,0,null,[],256,0,0,10)}function Dd(r,t,e,i,n,o,a,s,l,d){let u=0;if(++l>=d)return[!1,u];if(e===r.length||i===t.length)return[!1,u];let h=!1,p=[],m=0,x=!0;for(;e<r.length&&i<t.length;){if(r[e].toLowerCase()===t[i].toLowerCase()){if(s>=a)return[!1,u];x&&n&&(o=[...n],x=!1);let v=[],[w,k]=Dd(r,t,e,i+1,o,v,a,s,l,d);w&&((!h||k>m)&&(p=[...v],m=k),h=!0),o[s++]=i,++e}++i}let y=e===r.length;if(y){u=100;let v=-5*o[0];v=v<-15?-15:v,u+=v;let w=t.length-s;u+=-1*w;for(let k=0;k<s;k++){let c=o[k];if(k>0){let _=o[k-1];c==_+1&&(u+=25)}if(c>0){let _=t[c-1],g=t[c];_!==_.toUpperCase()&&g!==g.toLowerCase()&&(u+=30),(_=="_"||_==" ")&&(u+=30)}else u+=15}return h&&(!y||m>u)?(o=[...p],u=m,[!0,u]):y?[!0,u]:[!1,u]}return[!1,u]}frappe.provide("frappe.search");frappe.search.utils={setup_recent:function(){this.recent=JSON.parse(frappe.boot.user.recent||"[]")||[]},get_recent_pages:function(r){r===null&&(r="");var t=this,e=[],i=[];function n(o,a,s){o.forEach(function(l,d){var u=$.isArray(l)?l[0]:l;if(u=__(u||"").toLowerCase().replace(/-/g," "),a===u||u.indexOf(a)!==-1){var h=s(l);h&&($.isPlainObject(h)&&(h=[h]),h.forEach(function(p){p.match=l,p.recent=!0}),i=h.concat(i))}})}return t.recent.forEach(function(o,a){e.push([o[1],["Form",o[0],o[1]]])}),e=e.reverse(),frappe.route_history.forEach(function(o,a){o[0]==="Form"?e.push([o[2],o]):["List","Tree","Workspaces","query-report"].includes(o[0])||o[2]==="Report"?o[1]&&e.push([o[1],o]):o[0]&&e.push([frappe.route_titles[o.join("/")]||o[0],o])}),n(e,r,function(o){var a={route:o[1]};if(o[1][0]==="Form")o[1].length>2&&o[1][1]!==o[1][2]?(a.label=__(o[1][1])+" "+o[1][2].bold(),a.value=__(o[1][1])+" "+o[1][2]):(a.label=__(o[1][1]).bold(),a.value=__(o[1][1]));else if(["List","Tree","Workspaces","query-report"].includes(o[1][0])&&o[1].length>1){var s=o[1][0],l=s;s==="Workspaces"?l="Workspace":(s==="query-report"||o[1][2]==="Report")&&(l="Report"),a.label=__(`{0} ${l}`,[__(o[1][1]).bold()]),a.value=__(`{0} ${l}`,[__(o[1][1])])}else o[0]?(a.label=o[0].bold(),a.value=o[0]):console.log("Illegal match",o);return a.index=80,a}),i},get_frequent_links(){let r=[];return frappe.boot.frequently_visited_links.forEach(t=>{let e=frappe.utils.get_route_label(t.route);r.push({route:t.route,label:e,value:e,index:t.count})}),r.length?r:this.get_recent_pages("")},get_search_in_list:function(r){var t=this,e=[];if(in_list(r.split(" "),"in")&&r.slice(-2)!=="in"){var i=r.split(" in ");frappe.boot.user.can_read.forEach(function(n){if(frappe.boot.user.can_search.includes(n)){var o=t.fuzzy_search(i[1],n);o&&e.push({type:"In List",label:__("Find {0} in {1}",[__(i[0]),t.bolden_match_part(__(n),i[1])]),value:__("Find {0} in {1}",[__(i[0]),__(n)]),route_options:{name:["like","%"+i[0]+"%"]},index:1+o,route:["List",n]})}})}return e},get_creatables:function(r){var t=this,e=[],i=r.split(" ")[0];return i.toLowerCase()===__("new")&&frappe.boot.user.can_create.forEach(function(n){var o=t.fuzzy_search(r.substr(4),n);o&&e.push({type:"New",label:__("New {0}",[t.bolden_match_part(__(n),r.substr(4))]),value:__("New {0}",[__(n)]),index:1+o,match:n,onclick:function(){frappe.new_doc(n,!0)}})}),e},get_doctypes:function(r){var t=this,e=[],i,n,o=function(a,s,l){let d=a==="List"&&n.endsWith("List"),u=t.bolden_match_part(__(n),r);if(d)var h=u;else h=__(`{0} ${d?"":a}`,[u]);return{type:a,label:h,value:__(`{0} ${a}`,[n]),index:i+l,match:n,route:s}};return frappe.boot.user.can_read.forEach(function(a){if(i=t.fuzzy_search(r,a),i){if(n=a,in_list(frappe.boot.single_types,a))e.push(o("",["Form",a,a],.05));else if(frappe.boot.user.can_search.includes(a)){if(in_list(frappe.boot.user.can_create,a)){var s=a;e.push({type:"New",label:__("New {0}",[t.bolden_match_part(__(a),r)]),value:__("New {0}",[__(a)]),index:i+.015,match:a,onclick:function(){frappe.new_doc(s,!0)}})}e.push(o("List",["List",a],.05)),frappe.model.can_get_report(a)&&e.push(o("Report",["List",a,"Report"],.04))}}}),e},get_reports:function(r){var t=this,e=[],i;return Object.keys(frappe.boot.user.all_reports).forEach(function(n){var o=t.fuzzy_search(r,n);if(o>0){var a=frappe.boot.user.all_reports[n];a.report_type=="Report Builder"?i=["List",a.ref_doctype,"Report",n]:i=["query-report",n],e.push({type:"Report",label:__("Report {0}",[t.bolden_match_part(__(n),r)]),value:__("Report {0}",[__(n)]),index:o,route:i})}}),e},get_pages:function(r){var t=this,e=[];this.pages={},$.each(frappe.boot.page_info,function(n,o){t.pages[o.title]=o,o.name=n}),Object.keys(this.pages).forEach(function(n){if(!(n=="Hub"||n=="hub")){var o=t.fuzzy_search(r,n);if(o){var a=t.pages[n];e.push({type:"Page",label:__("Open {0}",[t.bolden_match_part(__(n),r)]),value:__("Open {0}",[__(n)]),match:n,index:o,route:[a.route||a.name]})}}});var i="Calendar";return __("calendar").indexOf(r.toLowerCase())===0&&e.push({type:"Calendar",value:__("Open {0}",[__(i)]),index:t.fuzzy_search(r,"Calendar"),match:i,route:["List","Event",i]}),i="Hub",__("hub").indexOf(r.toLowerCase())===0&&e.push({type:"Hub",value:__("Open {0}",[__(i)]),index:t.fuzzy_search(r,"Hub"),match:i,route:[i,"Item"]}),__("email inbox").indexOf(r.toLowerCase())===0&&e.push({type:"Inbox",value:__("Open {0}",[__("Email Inbox")]),index:t.fuzzy_search(r,"email inbox"),match:i,route:["List","Communication","Inbox"]}),e},get_workspaces:function(r){var t=this,e=[];return frappe.boot.allowed_workspaces.forEach(function(i){var n=t.fuzzy_search(r,i.name);if(n>0){var o={type:"Workspace",label:__("Open {0}",[t.bolden_match_part(__(i.name),r)]),value:__("Open {0}",[__(i.name)]),index:n,route:[frappe.router.slug(i.name)]};e.push(o)}}),e},get_dashboards:function(r){var t=this,e=[];return frappe.boot.dashboards.forEach(function(i){var n=t.fuzzy_search(r,i.name);if(n>0){var o={type:"Dashboard",label:__("{0} Dashboard",[t.bolden_match_part(__(i.name),r)]),value:__("{0} Dashboard",[__(i.name)]),index:n,route:["dashboard-view",i.name]};e.push(o)}}),e},get_global_results:function(r,t,e,i=""){var n=this;function o(a){var s=[],l,d;function u(p){return s.find(function(m){return m.title===p})}function h(p,m){for(var x=p.split(" ||| "),y=300,v=120,w=[],k=0,c="",_=0;_<x.length;_++){var g=x[_];if(g.toLowerCase().indexOf(r)!==-1){if(g.indexOf(" &&& ")!==-1)var b=g.indexOf(" &&& "),E=g.slice(b+5);else var b=g.indexOf(" : "),E=g.slice(b+3);if(E.length>v){var T="",C=E.indexOf(r);T+=C<v/2?E.slice(0,C):"..."+E.slice(C-v/2,C),T+=E.slice(C,C+v/2),T+=C+v/2<E.length?"...":"",E=T}var S=g.slice(0,b),A=y-k;if(k+=S.length+E.length+2,k<y)c='<span class="field-name text-muted">'+n.bolden_match_part(S,r)+": </span> "+n.bolden_match_part(E,r),w.indexOf(c)===-1&&m!==E&&w.push(c);else{S.length<A?(A-=S.length,c='<span class="field-name text-muted">'+n.bolden_match_part(S,r)+": </span> ",E=E.slice(0,A),E=E.slice(0,E.lastIndexOf(" "))+" ...",c+=n.bolden_match_part(E,r),w.push(c)):w.push("...");break}}}return w.join(", ")}return a.forEach(function(p){l={label:p.name,value:p.name,description:h(p.content,p.name),route:["Form",p.doctype,p.name]},(p.image||p.image===null)&&(l.image=p.image),d=u(p.doctype),d?d.results.push(l):(d={title:p.doctype,results:[l],fetch_type:"Global"},s.push(d))}),s}return new Promise(function(a,s){frappe.call({method:"frappe.utils.global_search.search",args:{text:r,start:t,limit:e,doctype:i},callback:function(l){l.message?a(o(l.message)):a([])}})})},get_nav_results:function(r){function t(a){var s=[],l=[];return a.forEach(function(d){if(d.route){d.route[0]==="List"&&d.route[2]&&d.route.splice(2);var u=d.route.join("/");if(s.indexOf(u)===-1)s.push(u),l.push(d);else{var h=s.indexOf(u);l[h].index>d.index&&(l[h]=d)}}else l.push(d)}),l.sort(function(d,u){return u.index-d.index})}var e=[],i=[],n=t(this.get_doctypes(r));n.forEach(function(a){a.type===""?i.push(a):e.push(a)});var o=r.split(" in ")[0];return[{title:__("Recents"),fetch_type:"Nav",results:t(this.get_recent_pages(r))},{title:__("Create a new ..."),fetch_type:"Nav",results:t(this.get_creatables(r))},{title:__("Lists"),fetch_type:"Nav",results:e},{title:__("Reports"),fetch_type:"Nav",results:t(this.get_reports(r))},{title:__("Administration"),fetch_type:"Nav",results:t(this.get_pages(r))},{title:__("Workspace"),fetch_type:"Nav",results:t(this.get_workspaces(r))},{title:__("Dashboard"),fetch_type:"Nav",results:t(this.get_dashboards(r))},{title:__("Setup"),fetch_type:"Nav",results:i},{title:__("Find '{0}' in ...",[o]),fetch_type:"Nav",results:t(this.get_search_in_list(r))}]},fuzzy_search:function(r,t){r=r||"";var e=__(t||""),i=Wo(r,e);return i[1]},bolden_match_part:function(r,t){if(Wo(t,r)[0]===!1)return r;if(r.indexOf(t)==0){var e=r.split(t)[1];return"<mark>"+t+"</mark>"+e}var i="",n=r,o=r.length;r=r.toLowerCase(),t=t.toLowerCase();e:for(var a=0,s=0;a<t.length;a++){for(var l=t.charCodeAt(a);s<o;){if(r.charCodeAt(s)===l){var d=n.charAt(s);d===d.toLowerCase()?i+="<mark>"+t.charAt(a)+"</mark>":i+="<mark>"+t.charAt(a).toUpperCase()+"</mark>",s++;continue e}i+=n.charAt(s),s++}return n}return i+=n.slice(s),i},get_executables(r){let t=[];return this.searchable_functions.forEach(e=>{let i=e.label.toLowerCase(),n=r.toLowerCase();(n===i||i.indexOf(n)===0)&&t.push({type:"Executable",value:this.bolden_match_part(__(e.label),n),index:this.fuzzy_search(n,i),match:e.label,onclick:()=>e.action.apply(this,e.args)})}),t},make_function_searchable(r,t=null,e=null){if(typeof r!="function")throw new Error("First argument should be a function");this.searchable_functions.push({label:t||r.name,action:r,args:e})},searchable_functions:[]};frappe.provide("frappe.ui.misc");frappe.ui.misc.about=function(){if(!frappe.ui.misc.about_dialog){var r=new frappe.ui.Dialog({title:__("Frappe Framework")});$(r.body).html(repl("<div>		<p>"+__("Open Source Applications for the Web")+"</p>  		<p><i class='fa fa-globe fa-fw'></i>			Website: <a href='https://frappeframework.com' target='_blank'>https://frappeframework.com</a></p>		<p><i class='fa fa-github fa-fw'></i>			Source: <a href='https://github.com/frappe' target='_blank'>https://github.com/frappe</a></p>		<p><i class='fa fa-linkedin fa-fw'></i>			Linkedin: <a href='https://linkedin.com/company/frappe-tech' target='_blank'>https://linkedin.com/company/frappe-tech</a></p>		<p><i class='fa fa-facebook fa-fw'></i>			Facebook: <a href='https://facebook.com/erpnext' target='_blank'>https://facebook.com/erpnext</a></p>		<p><i class='fa fa-twitter fa-fw'></i>			Twitter: <a href='https://twitter.com/erpnext' target='_blank'>https://twitter.com/erpnext</a></p>		<hr>		<h4>Installed Apps</h4>		<div id='about-app-versions'>Loading versions...</div>		<hr>		<p class='text-muted'>&copy; Frappe Technologies Pvt. Ltd. and contributors </p> 		</div>",frappe.app)),frappe.ui.misc.about_dialog=r,frappe.ui.misc.about_dialog.on_page_show=function(){frappe.versions?t(frappe.versions):frappe.call({method:"frappe.utils.change_log.get_versions",callback:function(e){t(e.message)}})};var t=function(e){var i=$("#about-app-versions").empty();$.each(Object.keys(e).sort(),function(n,o){var a=e[o];if(a.branch)var s=$.format("<p><b>{0}:</b> v{1} ({2})<br></p>",[a.title,a.branch_version||a.version,a.branch]);else var s=$.format("<p><b>{0}:</b> v{1}<br></p>",[a.title,a.version]);$(s).appendTo(i)}),frappe.versions=e}}frappe.ui.misc.about_dialog.show()};frappe.templates.navbar=`<header class="navbar navbar-expand sticky-top" role="navigation">
	<div class="container">
		<a class="navbar-brand navbar-home" href="/app">
			<img class="app-logo" style="width: {{ navbar_settings.logo_width || 24 }}px" src="{{ frappe.boot.app_logo_url }}">
		</a>
		<ul class="nav navbar-nav d-none d-sm-flex" id="navbar-breadcrumbs"></ul>
		<div class="collapse navbar-collapse justify-content-end">
			<form class="form-inline fill-width justify-content-end" role="search" onsubmit="return false;">
				{% if (frappe.boot.read_only) { %}
					<span class="indicator-pill yellow no-indicator-dot" title="{%= __("Your site is getting upgraded.") %}">
						{%= __("Read Only Mode") %}
					</span>
				{% } %}
				<div class="input-group search-bar text-muted hidden">
					<input
						id="navbar-search"
						type="text"
						class="form-control"
						placeholder="{%= __("Search or type a command (Ctrl + G)") %}"
						aria-haspopup="true"
					>
					<span class="search-icon">
						<svg class="icon icon-sm"><use href="#icon-search"></use></svg>
					</span>
				</div>
			</form>
			<ul class="navbar-nav">
				<li class="nav-item dropdown dropdown-notifications dropdown-mobile hidden">
					<a
						class="nav-link notifications-icon text-muted"
						data-toggle="dropdown"
						aria-haspopup="true"
						aria-expanded="true"
						href="#"
						onclick="return false;">
						<span class="notifications-seen">
							<svg class="icon icon-md"><use href="#icon-notification"></use></svg>
						</span>
						<span class="notifications-unseen">
							<svg class="icon icon-md"><use href="#icon-notification-with-indicator"></use></svg>
						</span>
					</a>
					<div class="dropdown-menu notifications-list dropdown-menu-right" role="menu">
						<div class="notification-list-header">
							<div class="header-items"></div>
							<div class="header-actions"></div>
						</div>
						<div class="notification-list-body">
							<div class="panel-notifications"></div>
							<div class="panel-events"></div>
						</div>
					</div>
				</li>
				<li class="nav-item dropdown dropdown-message dropdown-mobile hidden">
					<a
						class="nav-link notifications-icon text-muted"
						data-toggle="dropdown"
						aria-haspopup="true"
						aria-expanded="true"
						href="#"
						onclick="return false;">
						<span>
							<svg class="icon icon-md"><use href="#icon-small-message"></use></svg>
						</span>
					</a>
				</li>
				<li class="vertical-bar d-none d-sm-block"></li>
				<li class="nav-item dropdown dropdown-help dropdown-mobile d-none d-lg-block">
					<a class="nav-link" data-toggle="dropdown" href="#" onclick="return false;">
						{{ __("Help") }}
						<span>
							<svg class="icon icon-xs"><use href="#icon-small-down"></use></svg>
						</span>
					</a>
					<div class="dropdown-menu dropdown-menu-right" id="toolbar-help" role="menu">
						<div id="help-links"></div>
						<div class="dropdown-divider documentation-links"></div>
						{% for item in navbar_settings.help_dropdown %}
							{% if (!item.hidden) { %}
								{% if (item.route) { %}
									<a class="dropdown-item" href="{{ item.route }}">
										{%= __(item.item_label) %}
									</a>
								{% } else if (item.action) { %}
									<a class="dropdown-item" onclick="return {{ item.action }}">
										{%= __(item.item_label) %}
									</a>
								{% } else { %}
									<div class="dropdown-divider"></div>
								{% } %}
							{% } %}
						{% endfor %}
					</div>
				</li>
				<li class="nav-item dropdown dropdown-navbar-user dropdown-mobile">
					<a class="nav-link" data-toggle="dropdown" href="#" onclick="return false;">
						{{ avatar }}
					</a>
					<div class="dropdown-menu dropdown-menu-right" id="toolbar-user" role="menu">
						{% for item in navbar_settings.settings_dropdown %}
							{% if (!item.hidden) { %}
								{% if (item.route) { %}
									<a class="dropdown-item" href="{{ item.route }}">
										{%= __(item.item_label) %}
									</a>
								{% } else if (item.action) { %}
									<a class="dropdown-item" onclick="return {{ item.action }}">
										{%= __(item.item_label) %}
									</a>
								{% } else { %}
									<div class="dropdown-divider"></div>
								{% } %}
							{% } %}
						{% endfor %}
					</div>
				</li>
			</ul>
		</div>
	</div>
</header>
`;frappe.provide("frappe.ui.toolbar");frappe.provide("frappe.search");frappe.ui.toolbar.Toolbar=class{constructor(){$("header").replaceWith(frappe.render_template("navbar",{avatar:frappe.avatar(frappe.session.user,"avatar-medium"),navbar_settings:frappe.boot.navbar_settings})),$(".dropdown-toggle").dropdown(),$("#toolbar-user a[href]").click(function(){$(this).closest(".dropdown-menu").prev().dropdown("toggle")}),this.setup_awesomebar(),this.setup_notifications(),this.setup_help(),this.make()}make(){this.bind_events(),$(document).trigger("toolbar_setup")}bind_events(){$(document).on("page-change",function(){$("header .navbar .custom-menu").remove()}),$("#search-modal").on("shown.bs.modal",function(){var r=$(this);setTimeout(function(){r.find("#modal-search").focus()},300)}),$(".navbar-toggle-full-width").click(()=>{frappe.ui.toolbar.toggle_full_width()})}setup_help(){if(!frappe.boot.desk_settings.notifications){$(".navbar .vertical-bar").removeClass("d-sm-block"),$(".dropdown-help").removeClass("d-lg-block");return}frappe.provide("frappe.help"),frappe.help.show_results=t,this.search=new frappe.search.SearchDialog,frappe.provide("frappe.searchdialog"),frappe.searchdialog.search=this.search,$(".dropdown-help .dropdown-toggle").on("click",function(){$(".dropdown-help input").focus()}),$(".dropdown-help .dropdown-menu").on("click","input, button",function(e){e.stopPropagation()}),$("#input-help").on("keydown",function(e){e.which==13&&$(this).val("")}),$(document).on("page-change",function(){var e=$(".dropdown-help #help-links");e.html("");for(var i=frappe.get_route_str(),n=i.split("/"),o=[],a=0;a<n.length;a++){var s=i.split("/",a+1),l=s.join("/"),d=frappe.help.help_links[l]||[];o=$.merge(o,d)}o.length===0?e.next().hide():e.next().show();for(var a=0;a<o.length;a++){var u=o[a],h=u.url;$("<a>",{href:h,class:"dropdown-item",text:__(u.label),target:"_blank"}).appendTo(e)}$(".dropdown-help .dropdown-menu").on("click","a",t)});var r=frappe.get_modal("","");r.addClass("help-modal"),$(document).on("click",".help-modal a",t);function t(e){var i=e.target.href;i.indexOf("blob")>0&&window.open(i,"_blank");var n=$(e.target).attr("data-path");n&&e.preventDefault()}}setup_awesomebar(){frappe.boot.desk_settings.search_bar&&(new frappe.search.AwesomeBar().setup("#navbar-search"),frappe.model.with_doctype("RQ Job").then(()=>{frappe.perm.has_perm("RQ Job",0,"read")&&frappe.search.utils.make_function_searchable(function(){frappe.set_route("List","RQ Job")},__("Background Jobs"))}))}setup_notifications(){frappe.boot.desk_settings.notifications&&frappe.session.user!=="Guest"&&(this.notifications=new frappe.ui.Notifications)}};$.extend(frappe.ui.toolbar,{add_dropdown_button:function(r,t,e,i){var n=frappe.ui.toolbar.get_menu(r);return n.find("li:not(.custom-menu)").length&&!n.find(".divider").length&&frappe.ui.toolbar.add_menu_divider(n),$('<li class="custom-menu"><a><i class="fa-fw '+i+'"></i> '+t+"</a></li>").insertBefore(n.find(".divider")).find("a").click(function(){e.apply(this)})},get_menu:function(r){return $("#navbar-"+r.toLowerCase())},add_menu_divider:function(r){r=typeof r=="string"?frappe.ui.toolbar.get_menu(r):r,$('<li class="divider custom-menu"></li>').prependTo(r)},add_icon_link(r,t,e,i){let n=$(".navbar-right").get(0),o=$(`<li class="${i}">
			<a class="btn" href="${r}" title="${frappe.utils.to_title_case(i,!0)}" aria-haspopup="true" aria-expanded="true">
				<div>
					<i class="octicon ${t}"></i>
				</div>
			</a>
		</li>`).get(0);n.insertBefore(o,n.children[e])},toggle_full_width(){let r=JSON.parse(localStorage.container_fullwidth||"false");r=!r,localStorage.container_fullwidth=r,frappe.ui.toolbar.set_fullwidth_if_enabled(),$(document.body).trigger("toggleFullWidth")},set_fullwidth_if_enabled(){let r=JSON.parse(localStorage.container_fullwidth||"false");$(document.body).toggleClass("full-width",r)},show_shortcuts(r){return r.preventDefault(),frappe.ui.keys.show_keyboard_shortcut_dialog(),!1}});frappe.ui.toolbar.clear_cache=frappe.utils.throttle(function(){frappe.assets.clear_local_storage(),frappe.xcall("frappe.sessions.clear").then(r=>{frappe.show_alert({message:r,indicator:"info"}),location.reload(!0)})},1e4);frappe.ui.toolbar.show_about=function(){try{frappe.ui.misc.about()}catch(r){console.log(r)}return!1};frappe.ui.toolbar.route_to_user=function(){frappe.set_route("Form","User",frappe.session.user)};frappe.ui.toolbar.view_website=function(){let r=window.open();r.opener=null,r.location="/index"};frappe.ui.toolbar.setup_session_defaults=function(){let r=[];frappe.call({method:"frappe.core.doctype.session_default_settings.session_default_settings.get_session_default_values",callback:function(t){r=JSON.parse(t.message);let e=frappe.perm.get_perm("Session Default Settings");(in_list(frappe.user_roles,"System Manager")||e[0].read==1)&&(r[r.length]={fieldname:"settings",fieldtype:"Button",label:__("Settings"),click:()=>{frappe.set_route("Form","Session Default Settings","Session Default Settings")}}),frappe.prompt(r,function(i){r.forEach(function(n){i[n.fieldname]||(i[n.fieldname]="")}),frappe.call({method:"frappe.core.doctype.session_default_settings.session_default_settings.set_session_default_values",args:{default_values:i},callback:function(n){n.message=="success"?(frappe.show_alert({message:__("Session Defaults Saved"),indicator:"green"}),frappe.ui.toolbar.clear_cache()):frappe.show_alert({message:__("An error occurred while setting Session Defaults"),indicator:"red"})}})},__("Session Defaults"),__("Save"))}})};var dn=Vt(zd());frappe.last_edited_communication={};var Hd="<div>---</div>";frappe.views.CommunicationComposer=class{constructor(r){$.extend(this,r),this.doc||(this.doc=this.frm&&this.frm.doc||{}),this.make()}make(){let r=this;this.dialog=new frappe.ui.Dialog({title:this.title||this.subject||__("New Email"),no_submit_on_enter:!0,fields:this.get_fields(),primary_action_label:__("Send"),primary_action(){r.send_action()},secondary_action_label:__("Discard"),secondary_action(){r.dialog.hide(),r.clear_cache()},size:"large",minimizable:!0}),$(this.dialog.$wrapper.find(".form-section").get(0)).addClass("to_section"),this.prepare(),this.dialog.show(),this.frm&&$(document).trigger("form-typing",[this.frm])}get_fields(){let r=[{label:__("To"),fieldtype:"MultiSelect",reqd:0,fieldname:"recipients"},{fieldtype:"Button",label:frappe.utils.icon("down"),fieldname:"option_toggle_button",click:()=>{this.toggle_more_options()}},{fieldtype:"Section Break",hidden:1,fieldname:"more_options"},{label:__("CC"),fieldtype:"MultiSelect",fieldname:"cc"},{label:__("BCC"),fieldtype:"MultiSelect",fieldname:"bcc"},{label:__("Email Template"),fieldtype:"Link",options:"Email Template",fieldname:"email_template"},{fieldtype:"Section Break"},{label:__("Subject"),fieldtype:"Data",reqd:1,fieldname:"subject",length:524288},{label:__("Message"),fieldtype:"Text Editor",fieldname:"content",onchange:frappe.utils.debounce(this.save_as_draft.bind(this),300)},{fieldtype:"Button",label:__("Add Signature"),fieldname:"add_signature",hidden:1,click:async()=>{let e=this.dialog.get_value("sender")||"";this.content_set=!1,await this.set_content(e)}},{fieldtype:"Section Break"},{label:__("Send me a copy"),fieldtype:"Check",fieldname:"send_me_a_copy",default:frappe.boot.user.send_me_a_copy},{label:__("Send Read Receipt"),fieldtype:"Check",fieldname:"send_read_receipt"},{label:__("Attach Document Print"),fieldtype:"Check",fieldname:"attach_document_print"},{label:__("Select Print Format"),fieldtype:"Select",fieldname:"select_print_format"},{label:__("Select Languages"),fieldtype:"Select",fieldname:"language_sel"},{fieldtype:"Column Break"},{label:__("Select Attachments"),fieldtype:"HTML",fieldname:"select_attachments"}],t=frappe.boot.email_accounts.filter(e=>!in_list(["All Accounts","Sent","Spam","Trash"],e.email_account)&&e.enable_outgoing);return t.length&&(this.user_email_accounts=t.map(function(e){return e.email_id}),r.unshift({label:__("From"),fieldtype:"Select",reqd:1,fieldname:"sender",options:this.user_email_accounts}),this.user_email_accounts.length==1&&(this.sender=this.user_email_accounts)),r}toggle_more_options(r){r=r||this.dialog.fields_dict.more_options.df.hidden,this.dialog.set_df_property("more_options","hidden",!r);let t=frappe.utils.icon(r?"up-line":"down");this.dialog.get_field("option_toggle_button").set_label(t)}prepare(){this.setup_multiselect_queries(),this.setup_subject_and_recipients(),this.setup_print_language(),this.setup_print(),this.setup_attach(),this.setup_email(),this.setup_email_template(),this.setup_last_edited_communication(),this.setup_add_signature_button(),this.set_values()}setup_add_signature_button(){let r=this.dialog.has_field("sender");this.dialog.set_df_property("add_signature","hidden",!r)}setup_multiselect_queries(){["recipients","cc","bcc"].forEach(r=>{this.dialog.fields_dict[r].get_data=()=>{let e=this.dialog.fields_dict[r].get_value().match(/[^,\s*]*$/)[0]||"";frappe.call({method:"frappe.email.get_contact_list",args:{txt:e},callback:i=>{this.dialog.fields_dict[r].set_data(i.message)}})}})}setup_subject_and_recipients(){if(this.subject=this.subject||"",!this.forward&&!this.recipients&&this.last_email&&(this.recipients=this.last_email.sender,this.cc=this.last_email.cc,this.bcc=this.last_email.bcc),!this.forward&&!this.recipients&&(this.recipients=this.frm&&this.frm.timeline.get_recipient()),!this.subject&&this.frm){let r=this.frm.timeline.get_last_email();r&&(this.subject=r.subject,this.recipients||(this.recipients=r.sender),strip(this.subject.toLowerCase().split(":")[0])!="re"&&(this.subject=__("Re: {0}",[this.subject]))),this.subject||(this.subject=this.frm.doc.name,this.frm.meta.subject_field&&this.frm.doc[this.frm.meta.subject_field]?this.subject=this.frm.doc[this.frm.meta.subject_field]:this.frm.meta.title_field&&this.frm.doc[this.frm.meta.title_field]&&(this.subject=this.frm.doc[this.frm.meta.title_field]));let t=`#${this.frm.doc.name}`;cstr(this.subject).includes(t)||(this.subject=`${this.subject} (${t})`)}this.frm&&!this.recipients&&(this.recipients=this.frm.doc[this.frm.email_field])}setup_email_template(){let r=this;this.dialog.fields_dict.email_template.df.onchange=()=>{let t=r.dialog.fields_dict.email_template.get_value();if(!t)return;function e(i){if(r.reply_added===t)return;let n=r.dialog.fields_dict.content,o=r.dialog.fields_dict.subject,a=n.get_value()||"";n.set_value(`${i.message}<br>${a}`),o.set_value(i.subject),r.reply_added=t}frappe.call({method:"frappe.email.doctype.email_template.email_template.get_email_template",args:{template_name:t,doc:r.doc,_lang:r.dialog.get_value("language_sel")},callback(i){e(i.message)}})}}setup_last_edited_communication(){this.frm?(this.doctype=this.frm.doctype,this.key=this.frm.docname):this.doctype=this.key="Inbox",this.last_email&&(this.key=this.key+":"+this.last_email.name),this.subject&&(this.key=this.key+":"+this.subject),this.dialog.on_hide=()=>{$.extend(this.get_last_edited_communication(!0),this.dialog.get_values(!0)),this.frm&&$(document).trigger("form-stopped-typing",[this.frm])}}get_last_edited_communication(r){return frappe.last_edited_communication[this.doctype]||(frappe.last_edited_communication[this.doctype]={}),(r||!frappe.last_edited_communication[this.doctype][this.key])&&(frappe.last_edited_communication[this.doctype][this.key]={}),frappe.last_edited_communication[this.doctype][this.key]}async set_values(){for(let t of["recipients","cc","bcc","sender"])await this.dialog.set_value(t,this[t]||"");let r=this.subject?frappe.utils.html2text(this.subject):"";if(await this.dialog.set_value("subject",r),await this.set_values_from_last_edited_communication(),await this.set_content(),this.frm&&!this.is_a_reply&&!this.content_set){let t=this.frm.meta.default_email_template||"";await this.dialog.set_value("email_template",t)}for(let t of["email_template","cc","bcc"])if(this.dialog.get_value(t)){this.toggle_more_options(!0);break}}async set_values_from_last_edited_communication(){if(this.message)return;let r=this.get_last_edited_communication();!r.content||(r.email_template&&(await this.dialog.fields_dict.email_template.set_model_value(r.email_template),delete r.email_template),await this.dialog.set_values(r),this.content_set=!0)}selected_format(){return this.dialog.fields_dict.select_print_format.input.value||this.frm&&this.frm.meta.default_print_format||"Standard"}get_print_format(r){return r||(r=this.selected_format()),locals["Print Format"]&&locals["Print Format"][r]?locals["Print Format"][r]:{}}setup_print_language(){let r=this.dialog.fields_dict;this.lang_code=this.doc.language||this.get_print_format().default_print_language||frappe.boot.lang;let t=this;$(r.language_sel.input).change(function(){t.lang_code=this.value}),$(r.language_sel.input).empty().add_options(frappe.get_languages()),this.lang_code&&$(r.language_sel.input).val(this.lang_code)}setup_print(){let r=this.dialog.fields_dict;if($(r.attach_document_print.input).click(function(){$(r.select_print_format.wrapper).toggle($(this).prop("checked"))}),$(r.select_print_format.wrapper).toggle(!1),this.frm){let t=frappe.meta.get_print_formats(this.frm.meta.name);$(r.select_print_format.input).empty().add_options(t).val(t[0])}else $(r.attach_document_print.wrapper).toggle(!1)}setup_attach(){let r=this.dialog.fields_dict,t=$(r.select_attachments.wrapper);this.attachments||(this.attachments=[]);let e={folder:"Home/Attachments",on_success:i=>{this.attachments.push(i),this.render_attachment_rows(i)}};this.frm&&(e={doctype:this.frm.doctype,docname:this.frm.docname,folder:"Home/Attachments",on_success:i=>{this.frm.attachments.attachment_uploaded(i),this.render_attachment_rows(i)}}),$(`
			<label class="control-label">
				${__("Select Attachments")}
			</label>
			<div class='attach-list'></div>
			<p class='add-more-attachments'>
				<button class='btn btn-xs btn-default'>
					${frappe.utils.icon("small-add","xs")}&nbsp;
					${__("Add Attachment")}
				</button>
			</p>
		`).appendTo(t.empty()),t.find(".add-more-attachments button").on("click",()=>new frappe.ui.FileUploader(e)),this.render_attachment_rows()}render_attachment_rows(r){let t=this.dialog.fields_dict.select_attachments,e=$(t.wrapper).find(".attach-list");if(r)e.append(this.get_attachment_row(r,!0));else{let i=[];this.attachments&&this.attachments.length&&(i=i.concat(this.attachments)),this.frm&&(i=i.concat(this.frm.get_files())),i.length&&$.each(i,(n,o)=>{!o.file_name||e.find(`[data-file-name="${o.name}"]`).length||(o.file_url=frappe.urllib.get_full_url(o.file_url),e.append(this.get_attachment_row(o)))})}}get_attachment_row(r,t){return $(`<p class="checkbox flex">
			<label class="ellipsis" title="${r.file_name}">
				<input
					type="checkbox"
					data-file-name="${r.name}"
					${t?"checked":""}>
				</input>
				<span class="ellipsis">${r.file_name}</span>
			</label>
			&nbsp;
			<a href="${r.file_url}" target="_blank" class="btn-linkF">
				${frappe.utils.icon("link-url")}
			</a>
		</p>`)}setup_email(){let r=this.dialog.fields_dict;this.attach_document_print&&($(r.attach_document_print.input).click(),$(r.select_print_format.wrapper).toggle(!0)),$(r.send_me_a_copy.input).on("click",()=>{let t=r.send_me_a_copy.get_value();frappe.db.set_value("User",frappe.session.user,"send_me_a_copy",t),frappe.boot.user.send_me_a_copy=t})}send_action(){let r=this,t=r.dialog.get_primary_btn(),e=this.get_values();if(!e)return;let i=$.map($(r.dialog.wrapper).find("[data-file-name]:checked"),function(n){return $(n).attr("data-file-name")});e.attach_document_print?r.send_email(t,e,i,null,e.select_print_format||""):r.send_email(t,e,i)}get_values(){let r=this.dialog.get_values();for(let t=0,e=this.dialog.fields.length;t<e;t++){let i=this.dialog.fields[t];i.is_cc_checkbox&&(r[i.fieldname]&&(r.cc=(r.cc?r.cc+", ":"")+i.fieldname,r.bcc=(r.bcc?r.bcc+", ":"")+i.fieldname),delete r[i.fieldname])}return r}save_as_draft(){if(this.dialog&&this.frm){let r=this.dialog.get_value("content");r=r.split(Hd)[0],dn.default.setItem(this.frm.doctype+this.frm.docname,r).catch(t=>{t&&(console.log(t),console.warn("[Communication] IndexedDB is full. Cannot save message as draft"))})}}clear_cache(){this.delete_saved_draft(),this.get_last_edited_communication(!0)}delete_saved_draft(){this.dialog&&this.frm&&dn.default.removeItem(this.frm.doctype+this.frm.docname).catch(r=>{r&&(console.log(r),console.warn("[Communication] IndexedDB is full. Cannot save message as draft"))})}send_email(r,t,e,i,n){let o=this;if(this.dialog.hide(),!t.recipients){frappe.msgprint(__("Enter Email Recipient(s)"));return}if(t.attach_document_print||(i=null,n=null),this.frm&&!frappe.model.can_email(this.doc.doctype,this.frm)){frappe.msgprint(__("You are not allowed to send emails related to this document"));return}return frappe.call({method:"frappe.core.doctype.communication.email.make",args:{recipients:t.recipients,cc:t.cc,bcc:t.bcc,subject:t.subject,content:t.content,doctype:o.doc.doctype,name:o.doc.name,send_email:1,print_html:i,send_me_a_copy:t.send_me_a_copy,print_format:n,sender:t.sender,sender_full_name:t.sender?frappe.user.full_name():void 0,email_template:t.email_template,attachments:e,_lang:o.lang_code,read_receipt:t.send_read_receipt,print_letterhead:o.is_print_letterhead_checked()},btn:r,callback(a){if(a.exc){if(frappe.msgprint(__("There were errors while sending email. Please try again.")),o.error)try{o.error(a)}catch(s){console.log(s)}}else if(frappe.utils.play_sound("email"),a.message.emails_not_sent_to&&frappe.msgprint(__("Email not sent to {0} (unsubscribed / disabled)",[frappe.utils.escape_html(a.message.emails_not_sent_to)])),o.clear_cache(),o.frm&&o.frm.reload_doc(),o.success)try{o.success(a)}catch(s){console.log(s)}}})}is_print_letterhead_checked(){return this.frm&&$(this.frm.wrapper).find(".form-print-wrapper").is(":visible")?$(this.frm.wrapper).find(".print-letterhead").prop("checked")?1:0:(frappe.model.get_doc(":Print Settings","Print Settings")||{with_letterhead:1}).with_letterhead?1:0}async set_content(r){if(this.content_set)return;let t=this.message||"";if(!t&&this.frm){let{doctype:e,docname:i}=this.frm;t=await dn.default.getItem(e+i)||""}t&&(this.content_set=!0),t+=await this.get_signature(r||null),this.is_a_reply&&!this.reply_set&&(t+=this.get_earlier_reply()),await this.dialog.set_value("content",t)}async get_signature(r){let t=frappe.boot.user.email_signature;if(!t){let e={add_signature:1};r?e.email_id=r:e.default_outgoing=1;let i=await frappe.db.get_list("Email Account",{filters:e,fields:["signature","email_id"],limit:1}),n=null;i.length&&(t=i[0].signature,n=i[0].email_id),!r&&n&&this.user_email_accounts&&this.user_email_accounts.includes(n)&&this.dialog.set_value("sender",n)}return t?(frappe.utils.is_html(t)||(t=t.replace(/\n/g,"<br>")),"<br>"+t):""}get_earlier_reply(){this.reply_set=!1;let r=this.last_email||this.frm&&this.frm.timeline.get_last_email(!0);if(!r)return"";let t=r.original_comment||r.content;t=this.html2text(t).replace(/\n/g,"<br>"),t.length>20*1024&&(t+="<div>"+__("Message clipped")+"</div>"+t,t=t.slice(0,20*1024));let e=frappe.datetime.global_date_format(r.communication_date||r.creation);return this.reply_set=!0,`
			<div><br></div>
			${Hd||""}
			<p>
			${__("On {0}, {1} wrote:",[e,r.sender])}
			</p>
			<blockquote>
			${t}
			</blockquote>
		`}html2text(r){return r=r.replace(/<\/div>/g,"<br></div>").replace(/<\/p>/g,"<br></p>").replace(/<br>/g,`
`),frappe.utils.html2text(r).replace(/\n{3,}/g,`

`)}};frappe.views.TranslationManager=class{constructor(t){Object.assign(this,t),this.make()}make(){this.data=[],this.dialog=new frappe.ui.Dialog({fields:this.get_fields(),title:__("Translate {0}",[this.df.label]),no_submit_on_enter:!0,primary_action_label:__("Update Translations"),primary_action:t=>this.update_translations(t).then(()=>{this.dialog.hide(),this.data=[],frappe.msgprint({title:__("Success"),message:__("Successfully updated translations"),indicator:"green"})})}),this.get_translations_data().then(t=>{this.data.push(...t||[]),this.dialog.refresh(),this.dialog.show()})}get_fields(){var t=[{label:__("Source Text"),fieldname:"source",fieldtype:"Data",read_only:1,bold:1,default:this.source_text},{label:__("Translations"),fieldname:"translation_data",fieldtype:"Table",fields:[{label:"Language",fieldname:"language",fieldtype:"Link",options:"Language",in_list_view:1,columns:3},{label:"Translation",fieldname:"translation",fieldtype:"Text",in_list_view:1,columns:7}],data:this.data,get_data:()=>this.data}];return t}get_translations_data(){return frappe.db.get_list("Translation",{fields:["name","language","translated_text as translation"],filters:{source_text:strip_html(this.source_text)}})}update_translations({source:t,translation_data:e=[]}){let i={};return e.map(n=>{i[n.language]=n.translation}),frappe.call({method:"frappe.translate.update_translations_for_source",btn:this.dialog.get_primary_btn(),args:{source:t,translation_dict:i}}).fail(()=>{frappe.msgprint({title:__("Something went wrong"),message:__("Please try again"),indicator:"red"})})}};var Ud=Vt(qd()),Vd=Vt(Wd());frappe.standard_pages.Workspaces=function(){var r=frappe.container.add_page("Workspaces");frappe.ui.make_app_page({parent:r,name:"Workspaces",title:__("Workspace")}),frappe.workspace=new frappe.views.Workspace(r),$(r).bind("show",function(){frappe.workspace.show()})};frappe.views.Workspace=class{constructor(t){this.wrapper=$(t),this.page=t.page,this.blocks=frappe.workspace_block.blocks,this.is_read_only=!0,this.pages={},this.sorted_public_items=[],this.sorted_private_items=[],this.current_page={},this.sidebar_items={public:{},private:{}},this.sidebar_categories=["My Workspaces","Public"],this.prepare_container(),this.setup_pages(),this.register_awesomebar_shortcut()}prepare_container(){let t=$(`
			<div class="list-sidebar overlay-sidebar hidden-xs hidden-sm">
				<div class="desk-sidebar list-unstyled sidebar-menu"></div>
			</div>
		`).appendTo(this.wrapper.find(".layout-side-section"));this.sidebar=t.find(".desk-sidebar"),this.body=this.wrapper.find(".layout-main-section")}async setup_pages(t){if(!this.discard&&this.create_page_skeleton(),!this.discard&&this.create_sidebar_skeleton(),this.sidebar_pages=this.discard?this.sidebar_pages:await this.get_pages(),this.cached_pages=$.extend(!0,{},this.sidebar_pages),this.all_pages=this.sidebar_pages.pages,this.has_access=this.sidebar_pages.has_access,this.all_pages.forEach(e=>{e.is_editable=!e.public||this.has_access}),this.public_pages=this.all_pages.filter(e=>e.public),this.private_pages=this.all_pages.filter(e=>!e.public),this.all_pages){frappe.workspaces={};for(let e of this.all_pages)frappe.workspaces[frappe.router.slug(e.name)]={title:e.title};this.make_sidebar(),t&&this.show()}}get_pages(){return frappe.xcall("frappe.desk.desktop.get_workspace_sidebar_items")}sidebar_item_container(t){return $(`
			<div
				class="sidebar-item-container ${t.is_editable?"is-draggable":""}"
				item-parent="${t.parent_page}"
				item-name="${t.title}"
				item-public="${t.public||0}"
				item-is-hidden="${t.is_hidden||0}"
			>
				<div class="desk-sidebar-item standard-sidebar-item ${t.selected?"selected":""}">
					<a
						href="/app/${t.public?frappe.router.slug(t.title):"private/"+frappe.router.slug(t.title)}"
						class="item-anchor ${t.is_editable?"":"block-click"}" title="${__(t.title)}"
					>
						<span class="sidebar-item-icon" item-icon=${t.icon||"folder-normal"}>${frappe.utils.icon(t.icon||"folder-normal","md")}</span>
						<span class="sidebar-item-label">${__(t.title)}<span>
					</a>
					<div class="sidebar-item-control"></div>
				</div>
				<div class="sidebar-child-item nested-container"></div>
			</div>
		`)}make_sidebar(){this.sidebar.find(".standard-sidebar-section")[0]&&this.sidebar.find(".standard-sidebar-section").remove(),this.sidebar_categories.forEach(t=>{let e=this.public_pages.filter(i=>i.parent_page==""||i.parent_page==null);t!="Public"&&(e=this.private_pages.filter(i=>i.parent_page==""||i.parent_page==null)),e=e.uniqBy(i=>i.title),this.build_sidebar_section(t,e)}),this.sidebar.find(".selected").length&&!frappe.dom.is_element_in_viewport(this.sidebar.find(".selected"))&&this.sidebar.find(".selected")[0].scrollIntoView(),this.remove_sidebar_skeleton()}build_sidebar_section(t,e){let i=$(`<div class="standard-sidebar-section nested-container" data-title="${t}"></div>`),n=$(`<div class="standard-sidebar-label">
			<span>${frappe.utils.icon("small-down","xs")}</span>
			<span class="section-title">${__(t)}<span>
		</div>`).appendTo(i);this.prepare_sidebar(e,i,this.sidebar),n.on("click",o=>{let a=$(o.target).find("span use").attr("href")==="#icon-small-down"?"#icon-right":"#icon-small-down";$(o.target).find("span use").attr("href",a),$(o.target).parent().find(".sidebar-item-container").toggleClass("hidden")}),Object.keys(e).length===0&&i.addClass("hidden"),i.find(".sidebar-item-container").length&&i.find("> [item-is-hidden='0']").length==0&&i.addClass("hidden show-in-edit-mode")}prepare_sidebar(t,e,i){t.forEach(n=>this.append_item(n,e)),e.appendTo(i)}append_item(t,e){let i=frappe.router.slug(t.title)==frappe.router.slug(this.get_page_to_show().name)&&t.public==this.get_page_to_show().public;t.selected=i,i&&(this.current_page={name:t.title,public:t.public});let n=this.sidebar_item_container(t),o=n.find(".sidebar-item-control");this.add_sidebar_actions(t,o);let s=(t.public?this.public_pages:this.private_pages).filter(l=>l.parent_page==t.title);if(s.length>0){let l=n.find(".sidebar-child-item");l.addClass("hidden"),this.prepare_sidebar(s,l,n)}n.appendTo(e),this.sidebar_items[t.public?"public":"private"][t.title]=n,n.parent().hasClass("hidden")&&i&&n.parent().toggleClass("hidden"),this.add_drop_icon(t,o,n),s.length>0&&n.find(".drop-icon").first().addClass("show-in-edit-mode")}add_drop_icon(t,e,i){let n="small-down";i.find(`[item-name="${this.current_page.name}"]`).length&&(n="small-up");let o=i.find(".sidebar-child-item"),a=$(`<span class="drop-icon hidden">${frappe.utils.icon(n,"sm")}</span>`).appendTo(e);(t.public?this.public_pages:this.private_pages).some(l=>l.parent_page==t.title&&(l.is_hidden==0||!this.is_read_only))&&a.removeClass("hidden"),a.on("click",()=>{let l=a.find("use").attr("href")==="#icon-small-down"?"#icon-small-up":"#icon-small-down";a.find("use").attr("href",l),o.toggleClass("hidden")})}show(){if(!this.all_pages){setTimeout(()=>this.show(),100);return}let t=this.get_page_to_show();this.page.set_title(__(t.name)),this.update_selected_sidebar(this.current_page,!1),this.update_selected_sidebar(t,!0),this.show_page(t)}update_selected_sidebar(t,e){let i=t.public?"public":"private";if(this.sidebar&&this.sidebar_items[i]&&this.sidebar_items[i][t.name]){let n=this.sidebar_items[i][t.name],a=(t.public?this.public_pages:this.private_pages).find(s=>s.title==t.name);e?(n[0].firstElementChild.classList.add("selected"),a&&(a.selected=!0),n.parent().hasClass("sidebar-child-item")&&n.parent().hasClass("hidden")&&n.parent().removeClass("hidden"),this.current_page={name:t.name,public:t.public},localStorage.current_page=t.name,localStorage.is_current_page_public=t.public):(n[0].firstElementChild.classList.remove("selected"),a&&(a.selected=!1))}}get_data(t){return frappe.call("frappe.desk.desktop.get_desktop_page",{page:t}).then(e=>{if(this.page_data=e.message,this.pages[t.name]&&delete this.pages[t.name],this.pages[t.name]=e.message,!(!this.page_data||Object.keys(this.page_data).length===0)&&!(this.page_data.charts&&this.page_data.charts.items.length===0))return frappe.dashboard_utils.get_dashboard_settings().then(i=>{if(i){let n=i.chart_config?JSON.parse(i.chart_config):{};this.page_data.charts.items.map(o=>{o.chart_settings=n[o.chart_name]||{}}),this.pages[t.name]=this.page_data}})})}get_page_to_show(){let t;localStorage.current_page&&this.all_pages.filter(n=>n.title==localStorage.current_page).length!=0?t={name:localStorage.current_page,public:localStorage.is_current_page_public=="true"}:Object.keys(this.all_pages).length!==0?t={name:this.all_pages[0].title,public:!0}:t={name:"Build",public:!0};let e=(frappe.get_route()[1]=="private"?frappe.get_route()[2]:frappe.get_route()[1])||t.name,i=frappe.get_route()[1]?frappe.get_route()[1]!="private":t.public;return{name:e,public:i}}async show_page(t){if(this.body.find("#editorjs")[0]||(this.$page=$(`
				<div id="editorjs" class="desk-page page-main-content"></div>
			`).appendTo(this.body)),this.all_pages){this.create_page_skeleton();let i=(t.public?this.public_pages:this.private_pages).filter(n=>n.title==t.name)[0];this.content=i&&JSON.parse(i.content),this.add_custom_cards_in_content(),$(".item-anchor").addClass("disable-click"),this.pages&&this.pages[i.name]?this.page_data=this.pages[i.name]:await frappe.after_ajax(()=>this.get_data(i)),this.setup_actions(t),this.prepare_editorjs(),$(".item-anchor").removeClass("disable-click"),this.remove_page_skeleton()}}add_custom_cards_in_content(){let t=-1;this.content.find((e,i)=>{e.type=="card"&&(t=i)}),t!==-1&&(this.content.splice(t+1,0,{type:"card",data:{card_name:"Custom Documents",col:4}}),this.content.splice(t+2,0,{type:"card",data:{card_name:"Custom Reports",col:4}}))}prepare_editorjs(){this.editor?this.editor.isReady.then(()=>{this.editor.configuration.tools.chart.config.page_data=this.page_data,this.editor.configuration.tools.shortcut.config.page_data=this.page_data,this.editor.configuration.tools.card.config.page_data=this.page_data,this.editor.configuration.tools.onboarding.config.page_data=this.page_data,this.editor.configuration.tools.quick_list.config.page_data=this.page_data,this.editor.configuration.tools.number_card.config.page_data=this.page_data,this.editor.render({blocks:this.content||[]})}):this.initialize_editorjs(this.content)}setup_actions(t){let i=(t.public?this.public_pages:this.private_pages).filter(n=>n.title==t.name)[0];if(!this.is_read_only){this.setup_customization_buttons(i);return}this.clear_page_actions(),this.page.set_secondary_action(__("Edit"),async()=>{!this.editor||!this.editor.readOnly||(this.is_read_only=!1,this.toggle_hidden_workspaces(!0),await this.editor.readOnly.toggle(),this.editor.isReady.then(()=>{this.initialize_editorjs_undo(),this.setup_customization_buttons(i),this.show_sidebar_actions(),this.make_blocks_sortable()}))}),this.page.add_inner_button(__("Create Workspace"),()=>{this.initialize_new_page()})}initialize_editorjs_undo(){this.undo=new Vd.default({editor:this.editor}),this.undo.initialize({blocks:this.content||[]}),this.undo.readOnly=!1}clear_page_actions(){this.page.clear_primary_action(),this.page.clear_secondary_action(),this.page.clear_inner_toolbar()}setup_customization_buttons(t){this.clear_page_actions(),t.is_editable&&this.page.set_primary_action(__("Save"),()=>{this.clear_page_actions(),this.save_page(t).then(e=>{!e||(this.undo.readOnly=!0,this.editor.readOnly.toggle(),this.is_read_only=!0)})},null,__("Saving")),this.page.set_secondary_action(__("Discard"),async()=>{this.discard=!0,this.clear_page_actions(),this.toggle_hidden_workspaces(!1),await this.editor.readOnly.toggle(),this.is_read_only=!0,this.sidebar_pages=this.cached_pages,this.reload(),frappe.show_alert({message:__("Customizations Discarded"),indicator:"info"})}),t.name&&this.has_access&&this.page.add_inner_button(__("Settings"),()=>{frappe.set_route(`workspace/${t.name}`)})}toggle_hidden_workspaces(t){$(".desk-sidebar").toggleClass("show-hidden-workspaces",t)}show_sidebar_actions(){this.sidebar.find(".standard-sidebar-section").addClass("show-control"),this.make_sidebar_sortable()}add_sidebar_actions(t,e,i){t.is_editable?t.is_hidden?frappe.utils.add_custom_button(frappe.utils.icon("unhide","sm"),n=>this.unhide_workspace(t,n),"unhide-workspace-btn",__("Unhide Workspace"),null,e):(frappe.utils.add_custom_button(frappe.utils.icon("drag","xs"),null,"drag-handle",__("Drag"),null,e),!i&&this.add_settings_button(t,e)):(e.parent().click(()=>{!this.is_read_only&&frappe.show_alert({message:__("Only Workspace Manager can sort or edit this page"),indicator:"info"},5)}),frappe.utils.add_custom_button(frappe.utils.icon("duplicate","sm"),()=>this.duplicate_page(t),"duplicate-page",__("Duplicate Workspace"),null,e))}get_parent_pages(t){if(this.public_parent_pages=["",...this.public_pages.filter(e=>!e.parent_page).map(e=>e.title)],this.private_parent_pages=["",...this.private_pages.filter(e=>!e.parent_page).map(e=>e.title)],t)return t.public?this.public_parent_pages:this.private_parent_pages}edit_page(t){var e=this;let i=t,n=this.get_parent_pages(t),o=n.findIndex(s=>s==t.title);o!==-1&&n.splice(o,1);let a=new frappe.ui.Dialog({title:__("Update Details"),fields:[{label:__("Title"),fieldtype:"Data",fieldname:"title",reqd:1,default:t.title},{label:__("Parent"),fieldtype:"Select",fieldname:"parent",options:n,default:t.parent_page},{label:__("Public"),fieldtype:"Check",fieldname:"is_public",depends_on:`eval:${this.has_access}`,default:t.public,onchange:function(){a.set_df_property("parent","options",this.get_value()?e.public_parent_pages:e.private_parent_pages)}},{fieldtype:"Column Break"},{label:__("Icon"),fieldtype:"Icon",fieldname:"icon",default:t.icon}],primary_action_label:__("Update"),primary_action:s=>{let l=s.title!=i.title,d=s.is_public!=i.public;if(!((l||d)&&!this.validate_page(s,i))){if(a.hide(),frappe.call({method:"frappe.desk.doctype.workspace.workspace.update_page",args:{name:i.name,title:s.title,icon:s.icon||"",parent:s.parent||"",public:s.is_public||0},callback:function(u){if(u.message){let h=__("Workspace {0} Edited Successfully",[i.title.bold()]);frappe.show_alert({message:h,indicator:"green"})}}}),this.update_sidebar(i,s),this.make_page_selected){let h=(s.is_public?"":"private/")+frappe.router.slug(s.title);frappe.set_route(h),this.make_page_selected=!1}this.make_sidebar(),this.show_sidebar_actions()}}});a.show()}update_sidebar(t,e){let i=t.public!=(e.is_public||0),n=t.title!=e.title,o=lt({},t),s=(t.public?this.public_pages:this.private_pages).filter(l=>l.parent_page==t.title);if(this.make_page_selected=t.selected,o.title=e.title,o.icon=e.icon,o.parent_page=e.parent||"",o.public=e.is_public,n||i)if(e.is_public)o.name=e.title,o.label=e.title,o.for_user="";else{let l=frappe.session.user;o.name=`${e.title}-${l}`,o.label=`${e.title}-${l}`,o.for_user=l}this.update_cached_values(t,o),s.length&&s.forEach(l=>{l.parent_page=e.title,i&&this.update_child_sidebar(l,e)})}update_child_sidebar(t,e){let i=lt({},t);if(this.make_page_selected=t.selected,t.public=e.is_public,e.is_public)t.name=t.title,t.label=t.title,t.for_user="";else{let n=frappe.session.user;t.name=`${t.title}-${n}`,t.label=`${t.title}-${n}`,t.for_user=n}this.update_cached_values(i,t)}update_cached_values(t,e,i,n){let[o,a]=t.public?[this.public_pages,this.private_pages]:[this.private_pages,this.public_pages],s=o.findIndex(l=>l.title==t.title);i&&s++,(frappe.workspaces[frappe.router.slug(t.name)]||n)&&(!i&&delete frappe.workspaces[frappe.router.slug(t.name)],e&&(frappe.workspaces[frappe.router.slug(e.name)]={title:e.title})),(this.pages&&this.pages[t.name]||n)&&(e&&(this.pages[e.name]=this.pages[t.name]||{}),!i&&delete this.pages[t.name]),e?t.public!=(e.is_public||e.public||0)?(!i&&o.splice(s,1),a.push(e)):n?o.push(e):o.splice(s,i?0:1,e):o.splice(s,1),this.sidebar_pages.pages=[...this.public_pages,...this.private_pages],this.cached_pages=this.sidebar_pages}add_settings_button(t,e){this.dropdown_list=[{label:__("Edit"),title:__("Edit Workspace"),icon:frappe.utils.icon("edit","sm"),action:()=>this.edit_page(t)},{label:__("Duplicate"),title:__("Duplicate Workspace"),icon:frappe.utils.icon("duplicate","sm"),action:()=>this.duplicate_page(t)},{label:__("Hide"),title:__("Hide Workspace"),icon:frappe.utils.icon("hide","sm"),action:o=>this.hide_workspace(t,o)}],this.is_item_deletable(t)&&this.dropdown_list.push({label:__("Delete"),title:__("Delete Workspace"),icon:frappe.utils.icon("delete-active","sm"),action:()=>this.delete_page(t)});let i=$(`
			<div class="btn btn-secondary btn-xs setting-btn dropdown-btn" title="${__("Setting")}">
				${frappe.utils.icon("dot-horizontal","xs")}
			</div>
			<div class="dropdown-list hidden"></div>
		`),n=function(o,a,s,l){let d=$(`
				<div class="dropdown-item" title="${a}">
					<span class="dropdown-item-icon">${s}</span>
					<span class="dropdown-item-label">${o}</span>
				</div>
			`);return d.click(u=>{u.stopPropagation(),l&&l(u)}),d};i.filter(".dropdown-btn").click(o=>{o.stopPropagation(),i.filter(".dropdown-list.hidden").length&&$(".dropdown-list:not(.hidden)").addClass("hidden"),i.filter(".dropdown-list").toggleClass("hidden")}),e.append(i),this.dropdown_list.forEach(o=>{i.filter(".dropdown-list").append(n(o.label,o.title,o.icon,o.action))})}is_item_deletable(t){return!!(!t.public||t.public&&(!t.module||t.module&&frappe.boot.developer_mode))}delete_page(t){frappe.confirm(__("Are you sure you want to delete page {0}?",[t.title.bold()]),()=>{frappe.call({method:"frappe.desk.doctype.workspace.workspace.delete_page",args:{page:t},callback:function(e){if(e.message){let i=e.message,n=__("Workspace {0} Deleted Successfully",[i.title.bold()]);frappe.show_alert({message:n,indicator:"green"})}}}),this.page.clear_primary_action(),this.update_cached_values(t),this.current_page.name==t.title&&this.current_page.public==t.public&&frappe.set_route("/"),this.make_sidebar(),this.show_sidebar_actions()})}duplicate_page(t){var e=this;let i=lt({},t);!this.has_access&&i.public&&(i.public=0);let n=this.get_parent_pages({public:i.public}),o=new frappe.ui.Dialog({title:__("Create Duplicate"),fields:[{label:__("Title"),fieldtype:"Data",fieldname:"title",reqd:1},{label:__("Parent"),fieldtype:"Select",fieldname:"parent",options:n,default:i.parent_page},{label:__("Public"),fieldtype:"Check",fieldname:"is_public",depends_on:`eval:${this.has_access}`,default:i.public,onchange:function(){o.set_df_property("parent","options",this.get_value()?e.public_parent_pages:e.private_parent_pages)}},{fieldtype:"Column Break"},{label:__("Icon"),fieldtype:"Icon",fieldname:"icon",default:i.icon}],primary_action_label:__("Duplicate"),primary_action:a=>{if(!this.validate_page(a))return;o.hide(),frappe.call({method:"frappe.desk.doctype.workspace.workspace.duplicate_page",args:{page_name:t.name,new_page:a},callback:function(d){if(d.message){let u=d.message,h=__("Duplicate of {0} named as {1} is created successfully",[t.title.bold(),u.title.bold()]);frappe.show_alert({message:h,indicator:"green"})}}}),i.title=a.title,i.public=a.is_public||0,i.name=a.title+(i.public?"":"-"+frappe.session.user),i.label=i.name,i.icon=a.icon,i.parent_page=a.parent||"",i.for_user=i.public?"":frappe.session.user,i.is_editable=!i.public,i.selected=!0,this.update_cached_values(t,i,!0);let l=(a.is_public?"":"private/")+frappe.router.slug(a.title);frappe.set_route(l),e.make_sidebar(),e.show_sidebar_actions()}});o.show()}hide_unhide_workspace(t,e,i){t.is_hidden=i;let n=e.target.closest(".sidebar-item-control"),o=n.closest(".sidebar-item-container");$(o).attr("item-is-hidden",i),$(n).empty(),this.add_sidebar_actions(t,$(n)),this.add_drop_icon(t,$(n),$(o));let a=this.cached_pages.pages.findIndex(l=>l.name===t.name);a!==-1&&(this.cached_pages.pages[a].is_hidden=i);let s=i?"hide_page":"unhide_page";frappe.call({method:"frappe.desk.doctype.workspace.workspace."+s,args:{page_name:t.name},callback:l=>{if(!l.message)return;let d=i?"{0} is hidden successfully":"{0} is unhidden successfully";d=__(d,[t.title.bold()]),frappe.show_alert({message:d,indicator:"green"})}})}hide_workspace(t,e){this.hide_unhide_workspace(t,e,1)}unhide_workspace(t,e){this.hide_unhide_workspace(t,e,0)}make_sidebar_sortable(){let t=this;$(".nested-container").each(function(){new Sortable(this,{handle:".drag-handle",draggable:".sidebar-item-container.is-draggable",group:"nested",animation:150,fallbackOnBody:!0,swapThreshold:.65,onEnd:function(e){let i=$(e.item).attr("item-public")=="1";t.prepare_sorted_sidebar(i),t.update_sorted_sidebar()}})})}prepare_sorted_sidebar(t){let e=t?this.public_pages:this.private_pages;t?this.sorted_public_items=this.sort_sidebar(this.sidebar.find(".standard-sidebar-section").last(),e):this.sorted_private_items=this.sort_sidebar(this.sidebar.find(".standard-sidebar-section").first(),e),this.sidebar_pages.pages=[...this.public_pages,...this.private_pages],this.cached_pages=this.sidebar_pages}sort_sidebar(t,e){let i=[];return Array.from(t.find(".sidebar-item-container")).forEach((n,o)=>{let a="";n.closest(".nested-container").classList.contains("sidebar-child-item")&&(a=n.parentElement.parentElement.attributes["item-name"].value),i.push({title:n.attributes["item-name"].value,parent_page:a,public:n.attributes["item-public"].value});let s=$(n).find(".sidebar-item-control .drop-icon").first();$(n).find(".sidebar-child-item > *").length!=0?s.removeClass("hidden"):s.addClass("hidden");let l=e.findIndex(u=>u.title==n.attributes["item-name"].value),d=e[l];d.parent_page=a,l!=o&&(e.splice(l,1),e.splice(o,0,d))}),i}update_sorted_sidebar(){(this.sorted_public_items||this.sorted_private_items)&&frappe.call({method:"frappe.desk.doctype.workspace.workspace.sort_pages",args:{sb_public_items:this.sorted_public_items,sb_private_items:this.sorted_private_items},callback:function(t){if(t.message){let e="Sidebar Updated Successfully";frappe.show_alert({message:__(e),indicator:"green"})}}})}make_blocks_sortable(){let t=this;this.page_sortable=Sortable.create(this.page.main.find(".codex-editor__redactor").get(0),{handle:".drag-handle",draggable:".ce-block",animation:150,onEnd:function(e){t.editor.blocks.move(e.newIndex,e.oldIndex)},setData:function(){}})}initialize_new_page(){var t=this;this.get_parent_pages();let e=new frappe.ui.Dialog({title:__("New Workspace"),fields:[{label:__("Title"),fieldtype:"Data",fieldname:"title",reqd:1},{label:__("Parent"),fieldtype:"Select",fieldname:"parent",options:this.private_parent_pages},{label:__("Public"),fieldtype:"Check",fieldname:"is_public",depends_on:`eval:${this.has_access}`,onchange:function(){e.set_df_property("parent","options",this.get_value()?t.public_parent_pages:t.private_parent_pages)}},{fieldtype:"Column Break"},{label:__("Icon"),fieldtype:"Icon",fieldname:"icon"}],primary_action_label:__("Create"),primary_action:i=>{if(!this.validate_page(i))return;e.hide(),this.initialize_editorjs_undo(),this.setup_customization_buttons({is_editable:!0});let n=i.title+(i.is_public?"":"-"+frappe.session.user),o=[{type:"header",data:{text:i.title}}],a={content:JSON.stringify(o),name:n,label:n,title:i.title,public:i.is_public||0,for_user:i.is_public?"":frappe.session.user,icon:i.icon,parent_page:i.parent||"",is_editable:!0,selected:!0};this.editor.render({blocks:o}).then(async()=>{this.editor.configuration.readOnly&&(this.is_read_only=!1,await this.editor.readOnly.toggle()),frappe.call({method:"frappe.desk.doctype.workspace.workspace.new_page",args:{new_page:a},callback:function(d){if(d.message){let u=__("Workspace {0} Created Successfully",[a.title.bold()]);frappe.show_alert({message:u,indicator:"green"})}}}),this.update_cached_values(a,a,!0,!0);let l=(a.public?"":"private/")+frappe.router.slug(a.title);frappe.set_route(l),this.make_sidebar(),this.show_sidebar_actions()})}});e.show()}validate_page(t,e){let i="",[n,o]=t.is_public?[this.private_pages,this.public_pages]:[this.public_pages,this.private_pages],a=this.sidebar_categories[t.is_public];o&&o.filter(l=>l.title==t.title)[0]&&(i=__("Page with title {0} already exist.",[t.title.bold()])),frappe.router.doctype_route_exist(frappe.router.slug(t.title))&&(i=__("Doctype with same route already exist. Please choose different title."));let s=e&&n.filter(l=>l.parent_page==e.title);return s&&s.every(l=>o&&o.find(d=>d.title==l.title)?(i=__("One of the child page with name {0} already exist in {1} Section. Please update the name of the child page first before moving",[l.title.bold(),a.bold()]),cur_dialog.hide(),!1):!0),i?(frappe.throw(__(i)),!1):!0}add_page_to_sidebar(t){let e=$(".standard-sidebar-section"),i=lt({},t);i.selected=!0,i.is_editable=!0;let n=this.sidebar_item_container(i);this.add_sidebar_actions(i,n.find(".sidebar-item-control"),!0),n.find(".sidebar-item-control .drag-handle").css("margin-right","8px");let o=i.is_public?e[1]:e[0];if(!i.parent)!i.is_public&&e.first().removeClass("hidden"),n.appendTo(o);else{let s=$(o).find(`[item-name="${i.parent}"]`),l=s.find(".sidebar-child-item"),d=s.find(".drop-icon");l[0]||(l=$('<div class="sidebar-child-item hidden nested-container"></div>').appendTo(s),d.toggleClass("hidden")),n.appendTo(l),l.removeClass("hidden"),s.find(".drop-icon.hidden").removeClass("hidden"),s.find(".drop-icon use").attr("href","#icon-small-up")}let a=i.is_public?"public":"private";this.sidebar_items&&this.sidebar_items[a]&&!this.sidebar_items[a][i.title]&&(this.sidebar_items[a][i.title]=n)}initialize_editorjs(t){this.tools={header:{class:this.blocks.header,inlineToolbar:["HeaderSize","bold","italic","link"],config:{default_size:4}},paragraph:{class:this.blocks.paragraph,inlineToolbar:["HeaderSize","bold","italic","link"],config:{placeholder:__("Choose a block or continue typing")}},chart:{class:this.blocks.chart,config:{page_data:this.page_data||[]}},card:{class:this.blocks.card,config:{page_data:this.page_data||[]}},shortcut:{class:this.blocks.shortcut,config:{page_data:this.page_data||[]}},onboarding:{class:this.blocks.onboarding,config:{page_data:this.page_data||[]}},quick_list:{class:this.blocks.quick_list,config:{page_data:this.page_data||[]}},number_card:{class:this.blocks.number_card,config:{page_data:this.page_data||[]}},spacer:this.blocks.spacer,HeaderSize:frappe.workspace_block.tunes.header_size},this.editor=new Ud.default({data:{blocks:t||[]},tools:this.tools,autofocus:!1,readOnly:!0,logLevel:"ERROR"})}save_page(t){let e=this;return this.current_page={name:t.title,public:t.public},this.editor.save().then(i=>{let n={};i.blocks.forEach(a=>{a.data.new&&(n[a.type]||(n[a.type]=[]),n[a.type].push(a.data.new),delete a.data.new)});let o=i.blocks.filter(a=>a.type!="card"||a.data.card_name!=="Custom Documents"&&a.data.card_name!=="Custom Reports");return t.content==JSON.stringify(o)&&Object.keys(n).length===0?(this.setup_customization_buttons(t),frappe.show_alert({message:__("No changes made on the page"),indicator:"warning"}),!1):(this.create_page_skeleton(),t.content=JSON.stringify(o),frappe.call({method:"frappe.desk.doctype.workspace.workspace.save_page",args:{title:t.title,public:t.public||0,new_widgets:n,blocks:JSON.stringify(o)},callback:function(a){a.message&&(e.discard=!0,e.update_cached_values(t,t),e.reload(),frappe.show_alert({message:__("Page Saved Successfully"),indicator:"green"}))}}),!0)}).catch(i=>{})}reload(){this.sorted_public_items=[],this.sorted_private_items=[],this.setup_pages(!0),this.discard=!1,this.undo.readOnly=!0}create_page_skeleton(){this.body.find(".workspace-skeleton").length||(this.body.prepend(frappe.render_template("workspace_loading_skeleton")),this.body.find(".codex-editor").addClass("hidden"))}remove_page_skeleton(){this.body.find(".codex-editor").removeClass("hidden"),this.body.find(".workspace-skeleton").remove()}create_sidebar_skeleton(){$(".workspace-sidebar-skeleton").length||($(frappe.render_template("workspace_sidebar_loading_skeleton")).insertBefore(this.sidebar),this.sidebar.addClass("hidden"))}remove_sidebar_skeleton(){this.sidebar.removeClass("hidden"),$(".workspace-sidebar-skeleton").remove()}register_awesomebar_shortcut(){"abcdefghijklmnopqrstuvwxyz".split("").forEach(t=>{let e={action:i=>($("#navbar-search").focus(),!1),page:this.page};frappe.ui.keys.add_shortcut(lt({shortcut:t},e)),frappe.ui.keys.add_shortcut(lt({shortcut:`shift+${t}`},e))})}};var wr=class{constructor(t){Object.assign(this,t),this.editing=Boolean(this.values&&Object.keys(this.values).length)}make(){this.make_dialog(),this.setup_dialog_events(),this.dialog.show(),window.cur_dialog=this.dialog,this.editing&&this.set_default_values()}make_dialog(){this.dialog=new frappe.ui.Dialog({title:this.get_title(),fields:this.get_fields(),primary_action:t=>{t=this.process_data(t),!this.editing&&!t.name&&(t.name=`${this.type}-${this.label}-${frappe.utils.get_random(20)}`),this.dialog.hide(),this.primary_action(t)},primary_action_label:this.primary_action_label||__("Add")})}get_title(){let t=this.editing?"Edit":"Add",e=t=t+" "+frappe.model.unscrub(this.type);return __(e)}get_fields(){}set_default_values(){return this.dialog.set_values(this.values)}process_data(t){return t}setup_dialog_events(){}hide_field(t){this.dialog.set_df_property(t,"hidden",!0)}show_field(t){this.dialog.set_df_property(t,"hidden",!1)}setup_filter(t){this.filter_group&&(this.filter_group.wrapper.empty(),delete this.filter_group);let e=this.dialog.get_field("filter_area_loading").$wrapper;$(`<span class="text-muted">${__("Loading Filters...")}</span>`).appendTo(e),this.filters=[],this.generate_filter_from_json&&this.generate_filter_from_json(),this.filter_group=new frappe.ui.FilterGroup({parent:this.dialog.get_field("filter_area").$wrapper,doctype:t,on_change:()=>{}}),frappe.model.with_doctype(t,()=>{this.filter_group.add_filters_to_filter_group(this.filters),this.hide_field("filter_area_loading"),this.show_field("filter_area")})}},Yd=class extends wr{constructor(t){super(t)}get_fields(){return[{fieldtype:"Link",fieldname:"chart_name",label:"Chart Name",options:"Dashboard Chart",reqd:1},{fieldtype:"Data",fieldname:"label",label:"Label"}]}process_data(t){return t.label=t.label?t.label:t.chart_name,t}},Gd=class extends wr{constructor(t){super(t)}get_fields(){return[{fieldtype:"Link",fieldname:"document_type",label:"DocType",options:"DocType",reqd:1,onchange:()=>{this.document_type=this.dialog.get_value("document_type"),this.document_type&&this.setup_filter(this.document_type)},get_query:()=>({filters:{issingle:0,istable:0}})},{fieldtype:"Column Break",fieldname:"column_break_4"},{fieldtype:"Data",fieldname:"label",label:"Label"},{fieldtype:"Section Break",fieldname:"filter_section",label:__("Add Filters"),depends_on:"eval: doc.document_type"},{fieldtype:"HTML",fieldname:"filter_area_loading"},{fieldtype:"HTML",fieldname:"filter_area"}]}generate_filter_from_json(){this.values&&this.values.quick_list_filter&&(this.filters=frappe.utils.get_filter_from_json(this.values.quick_list_filter,this.values.document_type))}process_data(t){if(this.filter_group){let e=this.filter_group.get_filters();t.quick_list_filter=frappe.utils.get_filter_as_json(e)}return t.label=t.label?t.label:t.document_type,t}},Xd=class extends wr{constructor(t){super(t)}get_fields(){return[{fieldtype:"Link",fieldname:"onboarding_name",label:"Onboarding Name",options:"Module Onboarding",reqd:1}]}},Kd=class extends wr{constructor(t){super(t)}get_fields(){let t=this;return[{fieldtype:"Data",fieldname:"label",label:"Label"},{fieldname:"links",fieldtype:"Table",label:__("Card Links"),editable_grid:1,data:t.values?JSON.parse(t.values.links):[],get_data:()=>t.values?JSON.parse(t.values.links):[],fields:[{fieldname:"label",fieldtype:"Data",in_list_view:1,label:"Label"},{fieldname:"icon",fieldtype:"Icon",label:"Icon"},{fieldname:"link_type",fieldtype:"Select",in_list_view:1,label:"Link Type",reqd:1,options:["DocType","Page","Report"]},{fieldname:"link_to",fieldtype:"Dynamic Link",in_list_view:1,label:"Link To",reqd:1,get_options:e=>e.doc.link_type},{fieldname:"column_break_7",fieldtype:"Column Break"},{fieldname:"dependencies",fieldtype:"Data",label:"Dependencies"},{fieldname:"only_for",fieldtype:"Link",label:"Only for",options:"Country"},{default:"0",fieldname:"onboard",fieldtype:"Check",label:"Onboard"},{default:"0",fieldname:"is_query_report",fieldtype:"Check",label:"Is Query Report"}]}]}process_data(t){let e="";return t.links?t.links.map((i,n)=>{let o=n+1;i.link_type||(e=__("Following fields have missing values")+": <br><br><ul>",e+=`<li>${__("Link Type in Row")} ${o}</li>`),i.link_to||(e+=`<li>${__("Link To in Row")} ${o}</li>`),i.label=i.label?i.label:i.link_to}):e=__("You must add atleast one link."),e&&(e+="</ul>",frappe.throw({message:__(e),title:__("Missing Values Required"),indicator:"orange"})),t.label=t.label?t.label:t.chart_name,t}},Jd=class extends wr{constructor(t){super(t)}hide_filters(){this.hide_field("count_section_break"),this.hide_field("filters_section_break")}show_filters(){this.show_field("count_section_break"),this.show_field("filters_section_break")}get_fields(){return[{fieldtype:"Select",fieldname:"type",label:"Type",reqd:1,options:`DocType
Report
Page
Dashboard
URL`,onchange:()=>{this.dialog.get_value("type")=="DocType"?this.dialog.fields_dict.link_to.get_query=()=>({query:"frappe.core.report.permitted_documents_for_user.permitted_documents_for_user.query_doctypes",filters:{user:frappe.session.user}}):this.dialog.fields_dict.link_to.get_query=null}},{fieldtype:"Data",fieldname:"label",label:"Label"},{fieldtype:"Column Break",fieldname:"column_break_4"},{fieldtype:"Dynamic Link",fieldname:"link_to",label:"Link To",options:"type",onchange:()=>{let t=this.dialog.get_value("link_to");t&&this.dialog.get_value("type")=="DocType"?frappe.model.with_doctype(t,()=>{let e=frappe.get_meta(t);t&&frappe.boot.single_types.includes(t)?this.hide_filters():t&&(this.setup_filter(t),this.show_filters());let i=["List","Report Builder","Dashboard","New"];e.is_tree==="Tree"&&i.push("Tree"),frappe.boot.calendars.includes(t)&&i.push("Calendar"),this.dialog.set_df_property("doc_view","options",i.join(`
`))}):this.hide_filters()},depends_on:t=>t.type!="URL",mandatory_depends_on:t=>t.type!="URL"},{fieldtype:"Data",fieldname:"url",label:"URL",options:"URL",default:"",depends_on:t=>t.type=="URL",mandatory_depends_on:t=>t.type=="URL"},{fieldtype:"Select",fieldname:"doc_view",label:"DocType View",options:`List
Report Builder
Dashboard
Tree
New
Calendar
Kanban`,description:__("Which view of the associated DocType should this shortcut take you to?"),default:"List",depends_on:t=>{if(this.dialog){let e=this.dialog.get_value("link_to"),i=frappe.boot.single_types.includes(e);return t.type=="DocType"&&!i}return!1}},{fieldtype:"Section Break",fieldname:"filters_section_break",label:__("Count Filter"),hidden:1},{fieldtype:"HTML",fieldname:"filter_area_loading"},{fieldtype:"HTML",fieldname:"filter_area",hidden:1},{fieldtype:"Section Break",fieldname:"count_section_break",label:__("Count Customizations"),hidden:1},{fieldtype:"Select",fieldname:"color",label:__("Color"),options:["Grey","Green","Red","Orange","Pink","Yellow","Blue","Cyan"],default:"Grey",input_class:"color-select",onchange:()=>{let t=this.dialog.fields_dict.color.value.toLowerCase(),e=this.dialog.fields_dict.color.$input;e.parent().find(".color-box").get(0)||$('<div class="color-box"></div>').insertBefore(e.get(0)),e.parent().find(".color-box").get(0).style.backgroundColor=`var(--text-on-${t})`}},{fieldtype:"Column Break",fieldname:"column_break_3"},{fieldtype:"Data",fieldname:"format",label:__("Format"),description:__("For Example: {} Open")}]}set_default_values(){super.set_default_values().then(()=>{this.dialog.fields_dict.link_to.df.onchange()})}generate_filter_from_json(){this.values&&this.values.stats_filter&&(this.filters=frappe.utils.get_filter_from_json(this.values.stats_filter,this.values.link_to))}process_data(t){if(this.dialog.get_value("type")=="DocType"&&this.filter_group){let e=this.filter_group.get_filters();t.stats_filter=frappe.utils.get_filter_as_json(e)}return t.label=t.label?t.label:frappe.model.unscrub(t.link_to),t.url&&(!validate_url(t.url)&&frappe.throw({message:__("<b>{0}</b> is not a valid URL",[t.url]),title:__("Invalid URL"),indicator:"red"}),t.label||(t.label="No Label (URL)")),t}},Zd=class extends wr{constructor(t){super(t)}get_fields(){let t;return this.for_workspace?[{fieldtype:"Link",fieldname:"number_card_name",label:__("Number Cards"),options:"Number Card",reqd:1,get_query:()=>({query:"frappe.desk.doctype.number_card.number_card.get_cards_for_user",filters:{document_type:this.document_type}})},{fieldtype:"Data",fieldname:"label",label:__("Label")}]:(t=[{fieldtype:"Select",label:__("Choose Existing Card or create New Card"),fieldname:"new_or_existing",options:["New Card","Existing Card"]},{fieldtype:"Link",fieldname:"card",label:__("Number Cards"),options:"Number Card",get_query:()=>({query:"frappe.desk.doctype.number_card.number_card.get_cards_for_user",filters:{document_type:this.document_type}}),depends_on:'eval: doc.new_or_existing == "Existing Card"'},{fieldtype:"Section Break",fieldname:"sb_1",depends_on:'eval: doc.new_or_existing == "New Card"'},{label:__("Label"),fieldname:"label",fieldtype:"Data",mandatory_depends_on:'eval: doc.new_or_existing == "New Card"'},{label:__("Doctype"),fieldname:"document_type",fieldtype:"Link",options:"DocType",onchange:()=>{this.document_type=this.dialog.get_value("document_type"),this.set_aggregate_function_fields(this.dialog.get_values()),this.setup_filter(this.document_type)},hidden:1},{label:__("Color"),fieldname:"color",fieldtype:"Color"},{fieldtype:"Column Break",fieldname:"cb_1"},{label:__("Function"),fieldname:"function",fieldtype:"Select",options:["Count","Sum","Average","Minimum","Maximum"],mandatory_depends_on:'eval: doc.new_or_existing == "New Card"'},{label:__("Function Based On"),fieldname:"aggregate_function_based_on",fieldtype:"Select",depends_on:"eval: doc.function !== 'Count'",mandatory_depends_on:'eval: doc.function !== "Count" && doc.new_or_existing == "New Card"'},{fieldtype:"Section Break",fieldname:"sb_1",label:__("Add Filters"),depends_on:'eval: doc.new_or_existing == "New Card"'},{fieldtype:"HTML",fieldname:"filter_area_loading"},{fieldtype:"HTML",fieldname:"filter_area",hidden:1},{fieldtype:"Section Break",fieldname:"sb_1"}],t)}setup_dialog_events(){!this.document_type&&!this.for_workspace&&(this.default_values&&this.default_values.doctype?(this.document_type=this.default_values.doctype,this.setup_filter(this.default_values.doctype),this.set_aggregate_function_fields()):this.show_field("document_type"))}set_aggregate_function_fields(){let t=[];this.document_type&&frappe.get_meta(this.document_type)&&frappe.get_meta(this.document_type).fields.map(e=>{if(frappe.model.numeric_fieldtypes.includes(e.fieldtype)){if(e.fieldtype=="Currency"&&(!e.options||e.options!=="Company:company:default_currency"))return;t.push({label:e.label,value:e.fieldname})}}),this.dialog.set_df_property("aggregate_function_based_on","options",t)}process_data(t){return this.for_workspace?(t.label=t.label?t.label:t.number_card_name,t):(t.new_or_existing=="Existing Card"&&(t.name=t.card),t.stats_filter=this.filter_group&&JSON.stringify(this.filter_group.get_filters()),t.document_type=this.document_type,t)}};function mr(r){return{chart:Yd,shortcut:Jd,links:Kd,onboarding:Xd,quick_list:Gd,number_card:Zd}[r]||wr}var Tt=class{constructor(t){Object.assign(this,t)}make(t,e,i=t){let n=this.config.page_data[t+"s"].items.find(o=>frappe.utils.unescape_html(o.label)==frappe.utils.unescape_html(__(e)));return n?(this.wrapper.innerHTML="",n.in_customize_mode=!this.readOnly,this.block_widget=new frappe.widget.SingleWidgetGroup({container:this.wrapper,type:i,class_name:t=="chart"?"widget-charts":"",options:this.options,widgets:n,api:this.api,block:this.block}),this.wrapper.setAttribute(t+"_name",e),this.readOnly||this.block_widget.customize(),!0):!1}rendered(t){t&&(this.wrapper=t),!this.readOnly&&this.resizer();let e=this.wrapper.closest(".ce-block");this.set_col_class(e,this.get_col())}resizer(){this.wrapper.className=this.wrapper.className+" resizable";var t=document.createElement("div");t.className="resizer",this.wrapper.parentElement.appendChild(t),t.addEventListener("mousedown",o,!1);let e=this;var i,n;function o(d){i=d.clientX,n=this.parentElement.offsetWidth,document.documentElement.addEventListener("mousemove",a,!1),document.documentElement.addEventListener("mouseup",l,!1)}function a(d){$(this).css("cursor","col-resize"),$(".widget").css("pointer-events","none"),$(e.wrapper.parentElement).find(".resizer").css("border-right","3px solid var(--gray-400)"),s(),n+d.clientX-i-n>60?(i=d.clientX,e.increase_width()):n+d.clientX-i-n<-60&&(i=d.clientX,e.decrease_width())}function s(){document.selection?document.selection.empty():window.getSelection().removeAllRanges()}function l(){$(this).css("cursor","default"),$(".widget").css("pointer-events","auto"),$(e.wrapper.parentElement).find(".resizer").css("border-right","0px solid transparent"),document.documentElement.removeEventListener("mousemove",a,!1),document.documentElement.removeEventListener("mouseup",l,!1)}}new(t,e=t){let i=this,n=mr(e),o=t+"_name";this.dialog=new n({for_workspace:!0,label:this.label,type:e,primary_action:a=>{a.in_customize_mode=1,this.block_widget=frappe.widget.make_widget(Ht(lt({},a),{widget_type:e,container:this.wrapper,options:Ht(lt({},this.options),{on_delete:()=>this.api.blocks.delete(),on_edit:()=>this.on_edit(this.block_widget)})})),this.block_widget.customize(this.options),this.wrapper.setAttribute(o,this.block_widget.label),$(this.wrapper).find(".widget").addClass(`${e} edit-mode`),this.new_block_widget=this.block_widget.get_config(),this.add_settings_button()}}),!this.readOnly&&this.data&&!this.data[o]&&(this.dialog.make(),this.dialog.dialog.get_close_btn().click(()=>{i.wrapper.closest(".ce-block").remove()}))}on_edit(t){let e=t.edit_dialog.type+"_name";t.edit_dialog.type=="links"&&(e="card_name");let i=t.get_config();this.block_widget.widgets=i,this.wrapper.setAttribute(e,i.label),this.new_block_widget=t.get_config()}add_new_block_button(){let t=$(`
			<div class="new-block-button">${frappe.utils.icon("add-round","lg")}</div>
		`);t.appendTo(this.wrapper),t.click(e=>{e.stopPropagation();let i=this.api.blocks.getCurrentBlockIndex()+1;this.api.blocks.insert("paragraph",{},{},i),this.api.caret.setToBlock(i)})}add_settings_button(){let t=this;this.dropdown_list=[{label:"Delete",title:"Delete Block",icon:frappe.utils.icon("delete-active","sm"),action:()=>this.api.blocks.delete()},{label:"Expand",title:"Expand Block",icon:frappe.utils.icon("expand-alt","sm"),action:()=>this.increase_width()},{label:"Shrink",title:"Shrink Block",icon:frappe.utils.icon("shrink","sm"),action:()=>this.decrease_width()},{label:"Move Up",title:"Move Up",icon:frappe.utils.icon("up-arrow","sm"),action:()=>this.move_block("up")},{label:"Move Down",title:"Move Down",icon:frappe.utils.icon("down-arrow","sm"),action:()=>this.move_block("down")}];let e=$(this.wrapper).find(".widget-control"),i=$(`
			<div class="dropdown-btn">
				<button class="btn btn-secondary btn-xs setting-btn" title="${__("Setting")}">
					${frappe.utils.icon("dot-horizontal","xs")}
				</button>
				<div class="dropdown-list hidden"></div>
			</div>
		`),n=function(o,a,s,l){let d=$(`
				<div class="dropdown-item" title="${__(a)}">
					<span class="dropdown-item-icon">${s}</span>
					<span class="dropdown-item-label">${__(o)}</span>
				</div>
			`);return d.click(u=>{u.stopPropagation(),l&&l()}),d};i.click(o=>{o.stopPropagation(),i.find(".dropdown-list").toggleClass("hidden")}),e.prepend(i),this.dropdown_list.forEach(o=>{(o.label=="Expand"||o.label=="Shrink")&&t.options&&!t.options.allow_resize||i.find(".dropdown-list").append(n(o.label,o.title,o.icon,o.action))})}get_col(){let t=this.col||12,e="col-xs-12",i=this.wrapper.closest(".ce-block"),n=new RegExp(/\bcol-.+?\b/,"g");if(i&&i.className.match(n)){i.classList.forEach(function(a){a.match(n)&&(e=a)});let o=e.split("-");t=parseInt(o[2])}return t}decrease_width(){this.update_width("decrease")}increase_width(){this.update_width("increase")}update_width(t){let e=this.options&&this.options.min_width||3,i=this.api.blocks.getCurrentBlockIndex();if(i<0)return;let n=this.api.blocks.getBlockByIndex(i);if(!n)return;let o=n.holder,a="col-xs-12",s=new RegExp(/\bcol-.+?\b/,"g");if(o.className.match(s)){o.classList.forEach(h=>{h.match(s)&&(a=h)});let l=a.split("-"),d=parseInt(l[2]),u=!0;t=="increase"?(u=d<=11,d=d+1):t=="decrease"&&(u=d>e,d=d-1),u&&this.set_col_class(o,d)}}set_col_class(t,e){let i=$.grep(t.classList,function(o){return o.indexOf("col-")!==0});t.classList="",i.forEach(o=>{t.classList.add(o)});let n="col-xs-12";e<=12&&e>=7?n="col-xs-"+e:e==6||e==5?(t.classList.add("col-xs-12"),n="col-sm-"+e):e==4?(t.classList.add("col-xs-12"),t.classList.add("col-sm-6"),n="col-md-"+e):e==3&&(t.classList.add("col-xs-12"),t.classList.add("col-sm-6"),t.classList.add("col-md-4"),n="col-lg-"+e),t.classList.add(n)}move_block(t){let e=this.api.blocks.getCurrentBlockIndex(),i=e+(t=="down"?1:-1);this.api.blocks.move(i,e)}};var hn=class extends Tt{constructor({data:t,config:e,api:i,readOnly:n}){super({config:e,api:i,readOnly:n});this._settings=this.config,this._data=this.normalizeData(t),this._element=this.getTag(),this.data=t,this.col=this.data.col?this.data.col:"12"}normalizeData(t){let e={};return typeof t!="object"&&(t={}),e.text=t.text||"",e.col=parseInt(t.col)||12,e}render(){if(this.wrapper=document.createElement("div"),!this.readOnly){let t=$('<div class="widget-head"></div>'),e=$('<div class="widget-control"></div>');return t[0].appendChild(this._element),e.appendTo(t),t.appendTo(this.wrapper),this.wrapper.classList.add("widget","header","edit-mode"),this.add_settings_button(),this.add_new_block_button(),frappe.utils.add_custom_button(frappe.utils.icon("drag","xs"),null,"drag-handle",__("Drag"),null,e),this.wrapper}return this._element}merge(t){let e={text:this.data.text+t.text};this.data=e}validate(t){return t.text.trim()!==""}save(){return this.wrapper=this._element,{text:this.wrapper.innerHTML.replace(/&nbsp;/gi,""),col:this.get_col()}}rendered(){super.rendered(this._element)}static get sanitize(){return{level:!1,text:{br:!0,b:!0,i:!0,a:!0,span:!0}}}static get isReadOnlySupported(){return!0}get data(){return this._data.text=this._element.innerHTML,this._data}set data(t){if(this._data=this.normalizeData(t),t.text!==void 0){let e=this._data.text||"",i=/<[a-z][\s\S]*>/i.test(e);this._element.innerHTML=i?e:`<span class="h${this._settings.default_size}">${e}</span>`}!this.readOnly&&this.wrapper&&this.wrapper.classList.add("widget","header")}getTag(){let t=document.createElement("DIV"),e=this._data.text||"&nbsp";return t.innerHTML=`<span class="h${this._settings.default_size}"><b>${e}</b></span>`,t.classList.add("ce-header"),this.readOnly||(t.contentEditable=!0),t.dataset.placeholder=this.api.i18n.t(this._settings.placeholder||""),t}static get toolbox(){return{title:"Heading",icon:frappe.utils.icon("header","sm")}}};var Ur=class extends Tt{static get DEFAULT_PLACEHOLDER(){return""}constructor({data:t,config:e,api:i,readOnly:n}){super({config:e,api:i,readOnly:n});this._CSS={block:this.api.styles.block,wrapper:"ce-paragraph"},this.readOnly||(this.onKeyUp=this.onKeyUp.bind(this)),this._placeholder=this.config.placeholder?this.config.placeholder:Ur.DEFAULT_PLACEHOLDER,this._data={},this._element=this.drawView(),this._preserveBlank=this.config.preserveBlank!==void 0?this.config.preserveBlank:!1,this.data=t,this.col=this.data.col?this.data.col:"12"}onKeyUp(t){if(!this.wrapper||(this.show_hide_block_list(!0),t.code!=="Backspace"&&t.code!=="Delete"))return;let{textContent:e}=this._element;e===""&&(this.show_hide_block_list(),this._element.innerHTML="")}show_hide_block_list(t){let i=($(this.wrapper).hasClass("ce-paragraph")?$(this.wrapper.parentElement):$(this.wrapper)).find(".block-list-container.dropdown-list");i.removeClass("hidden"),t&&i.addClass("hidden")}drawView(){let t=document.createElement("DIV");return t.classList.add(this._CSS.wrapper,this._CSS.block,"widget"),t.contentEditable=!1,this.readOnly||(t.contentEditable=!0,t.addEventListener("focus",()=>{let{textContent:e}=this._element;e===""&&this.show_hide_block_list()}),t.addEventListener("blur",()=>{!this.over_block_list_item&&this.show_hide_block_list(!0)}),t.dataset.placeholder=this.api.i18n.t(this._placeholder),t.addEventListener("keyup",this.onKeyUp)),t}open_block_list(){let t=__("Templates"),e=$(`
			<div class="block-list-container dropdown-list">
				<div class="dropdown-title">${t.toUpperCase()}</div>
			</div>
		`),i=frappe.workspace_block.blocks;Object.keys(i).forEach(n=>{let o=$(`
				<div class="block-list-item dropdown-item">
					<span class="dropdown-item-icon">${i[n].toolbox.icon}</span>
					<span class="dropdown-item-label">${__(i[n].toolbox.title)}</span>
				</div>
			`);o.click(a=>{a.stopPropagation();let s=this.api.blocks.getCurrentBlockIndex();this.api.blocks.delete(),this.api.blocks.insert(n,{},{},s),this.api.caret.setToBlock(s)}),o.mouseenter(()=>{this.over_block_list_item=!0}).mouseleave(()=>{this.over_block_list_item=!1}),e.append(o)}),e.addClass("hidden"),e.appendTo(this.wrapper)}render(){if(this.wrapper=document.createElement("div"),!this.readOnly){let t=$('<div class="widget-control paragraph-control"></div>');return this.wrapper.appendChild(this._element),this._element.classList.remove("widget"),t.appendTo(this.wrapper),this.wrapper.classList.add("widget","paragraph","edit-mode"),this.open_block_list(),this.add_new_block_button(),this.add_settings_button(),frappe.utils.add_custom_button(frappe.utils.icon("drag","xs"),null,"drag-handle",__("Drag"),null,t),this.wrapper}return this._element}merge(t){let e={text:this.data.text+t.text};this.data=e}validate(t){return!(t.text.trim()===""&&!this._preserveBlank)}save(){return this.wrapper=this._element,{text:this.wrapper.innerHTML,col:this.get_col()}}rendered(){super.rendered(this._element)}onPaste(t){let e={text:t.detail.data.innerHTML};this.data=e}static get sanitize(){return{text:{br:!0,b:!0,i:!0,a:!0,span:!0}}}static get isReadOnlySupported(){return!0}get data(){let t=this._element.innerHTML;return this._data.text=t,this._data}set data(t){this._data=t||{},this._element.innerHTML=__(this._data.text)||""}static get pasteConfig(){return{tags:["P"]}}static get toolbox(){return{title:"Text",icon:frappe.utils.icon("text","sm")}}};var _n=class extends Tt{static get toolbox(){return{title:"Card",icon:frappe.utils.icon("card","sm")}}static get isReadOnlySupported(){return!0}constructor({data:t,api:e,config:i,readOnly:n,block:o}){super({data:t,api:e,config:i,readOnly:n,block:o});this.sections={},this.col=this.data.col?this.data.col:"4",this.allow_customization=!this.readOnly,this.options={allow_sorting:this.allow_customization,allow_create:this.allow_customization,allow_delete:this.allow_customization,allow_hiding:!1,allow_edit:!0,allow_resize:!0}}render(){if(this.wrapper=document.createElement("div"),this.new("card","links"),!(this.data&&this.data.card_name&&!this.make("card",this.data.card_name,"links")))return this.readOnly||($(this.wrapper).find(".widget").addClass("links edit-mode"),this.add_settings_button(),this.add_new_block_button()),this.wrapper}validate(t){return!!t.card_name}save(){return{card_name:this.wrapper.getAttribute("card_name"),col:this.get_col(),new:this.new_block_widget}}};var gn=class extends Tt{static get toolbox(){return{title:"Chart",icon:frappe.utils.icon("chart","sm")}}static get isReadOnlySupported(){return!0}constructor({data:t,api:e,config:i,readOnly:n,block:o}){super({data:t,api:e,config:i,readOnly:n,block:o});this.col=this.data.col?this.data.col:"12",this.allow_customization=!this.readOnly,this.options={allow_sorting:this.allow_customization,allow_create:this.allow_customization,allow_delete:this.allow_customization,allow_hiding:!1,allow_edit:!0,allow_resize:!0,min_width:6,max_widget_count:2}}render(){if(this.wrapper=document.createElement("div"),this.new("chart"),!(this.data&&this.data.chart_name&&!this.make("chart",this.data.chart_name)))return this.readOnly||($(this.wrapper).find(".widget").addClass("chart edit-mode"),this.add_settings_button(),this.add_new_block_button()),this.wrapper}validate(t){return!!t.chart_name}save(){return{chart_name:this.wrapper.getAttribute("chart_name"),col:this.get_col(),new:this.new_block_widget}}};var mn=class extends Tt{static get toolbox(){return{title:"Shortcut",icon:frappe.utils.icon("shortcut","sm")}}static get isReadOnlySupported(){return!0}constructor({data:t,api:e,config:i,readOnly:n,block:o}){super({data:t,api:e,config:i,readOnly:n,block:o});this.col=this.data.col?this.data.col:"3",this.allow_customization=!this.readOnly,this.options={allow_sorting:this.allow_customization,allow_create:this.allow_customization,allow_delete:this.allow_customization,allow_hiding:!1,allow_edit:!0,allow_resize:!0}}rendered(){super.rendered(),this.remove_last_divider(),$(window).resize(()=>{this.remove_last_divider()})}remove_last_divider(){let t=this.wrapper.closest(".ce-block"),e=$(".layout-main-section")[0].offsetWidth,i=t.offsetLeft+t.offsetWidth;e-i<=110?$(t).find(".divider").addClass("hidden"):$(t).find(".divider").removeClass("hidden")}render(){if(this.wrapper=document.createElement("div"),this.new("shortcut"),!(this.data&&this.data.shortcut_name&&!this.make("shortcut",this.data.shortcut_name))){if(!this.readOnly)$(this.wrapper).find(".widget").addClass("shortcut edit-mode"),this.add_settings_button(),this.add_new_block_button();else{let t=frappe.utils.icon("arrow-up-right","xs","","stroke: grey","ml-2");$(this.wrapper).find(".widget .widget-title").append(t),$(this.wrapper).append($('<div class="divider"></div>'))}return this.wrapper}}validate(t){return!!t.shortcut_name}save(){return{shortcut_name:this.wrapper.getAttribute("shortcut_name"),col:this.get_col(),new:this.new_block_widget}}};var vn=class extends Tt{static get toolbox(){return{title:"Spacer",icon:frappe.utils.icon("spacer","sm")}}static get isReadOnlySupported(){return!0}constructor({data:t,api:e,config:i,readOnly:n}){super({data:t,api:e,config:i,readOnly:n});this.col=this.data.col?this.data.col:"12"}render(){if(this.wrapper=document.createElement("div"),this.wrapper.classList.add("widget","spacer"),!this.readOnly){let t=$(`
				<div class="widget-head">
					<div class="spacer-left"></div>
					<div>${__("Spacer")}</div>
					<div class="widget-control"></div>
				</div>
			`);t.appendTo(this.wrapper),this.wrapper.classList.add("edit-mode"),this.wrapper.style.minHeight=40+"px";let e=t.find(".widget-control");this.add_settings_button(),this.add_new_block_button(),frappe.utils.add_custom_button(frappe.utils.icon("drag","xs"),null,"drag-handle",__("Drag"),null,e)}return this.wrapper}save(){return{col:this.get_col()}}};var bn=class extends Tt{static get toolbox(){return{title:"Onboarding",icon:frappe.utils.icon("onboarding","sm")}}static get isReadOnlySupported(){return!0}constructor({data:t,api:e,config:i,readOnly:n,block:o}){super({data:t,api:e,config:i,readOnly:n,block:o});this.col=this.data.col?this.data.col:"12",this.allow_customization=!this.readOnly,this.options={allow_sorting:this.allow_customization,allow_create:this.allow_customization,allow_delete:this.allow_customization,allow_hiding:!1,allow_edit:!0,allow_resize:!1}}rendered(){let t=this.wrapper.closest(".ce-block");this.readOnly&&!$(this.wrapper).find(".onboarding-widget-box").is(":visible")&&$(t).hide(),this.set_col_class(t,this.get_col())}new(t,e=t){let i=this,n=mr(e),o=t+"_name";this.dialog=new n({label:this.label,type:e,primary_action:a=>{a.in_customize_mode=1,this.block_widget=frappe.widget.make_widget(Ht(lt({},a),{widget_type:e,container:this.wrapper,options:Ht(lt({},this.options),{on_delete:()=>this.api.blocks.delete(),on_edit:()=>this.on_edit(this.block_widget)}),new:!0})),this.block_widget.customize(this.options),this.wrapper.setAttribute(o,this.block_widget.label||this.block_widget.onboarding_name),$(this.wrapper).find(".widget").addClass(`${e} edit-mode`),this.new_block_widget=this.block_widget.get_config(),this.add_settings_button()}}),!this.readOnly&&this.data&&!this.data[o]&&(this.dialog.make(),this.dialog.dialog.get_close_btn().click(()=>{i.wrapper.closest(".ce-block").remove()}))}make(t,e){let i=this.config.page_data.onboardings.items.find(n=>n.label==__(e));return i?(this.wrapper.innerHTML="",i.in_customize_mode=!this.readOnly,this.block_widget=frappe.widget.make_widget({container:this.wrapper,widget_type:"onboarding",in_customize_mode:i.in_customize_mode,options:Ht(lt({},this.options),{on_delete:()=>this.api.blocks.delete(),on_edit:()=>this.on_edit(this.block_widget)}),label:i.label,title:i.title||__("Let's Get Started"),subtitle:i.subtitle,steps:i.items,success:i.success,docs_url:i.docs_url,user_can_dismiss:i.user_can_dismiss}),this.wrapper.setAttribute(t+"_name",e),this.readOnly||this.block_widget.customize(this.options),!0):!1}render(){if(this.wrapper=document.createElement("div"),this.new("onboarding"),!(this.data&&this.data.onboarding_name&&!this.make("onboarding",this.data.onboarding_name)))return this.readOnly||($(this.wrapper).find(".widget").addClass("onboarding edit-mode"),this.add_settings_button(),this.add_new_block_button()),$(this.wrapper).css("padding-bottom","20px"),this.wrapper}validate(t){return!!t.onboarding_name}save(){return{onboarding_name:this.wrapper.getAttribute("onboarding_name"),col:this.get_col(),new:this.new_block_widget}}};var yn=class extends Tt{static get toolbox(){return{title:"Quick List",icon:frappe.utils.icon("list","sm")}}static get isReadOnlySupported(){return!0}constructor({data:t,api:e,config:i,readOnly:n,block:o}){super({data:t,api:e,config:i,readOnly:n,block:o});this.col=this.data.col?this.data.col:"4",this.allow_customization=!this.readOnly,this.options={allow_sorting:this.allow_customization,allow_create:this.allow_customization,allow_delete:this.allow_customization,allow_hiding:!1,allow_edit:!0,allow_resize:!0,min_width:4,max_widget_count:2}}render(){if(this.wrapper=document.createElement("div"),this.new("quick_list"),!(this.data&&this.data.quick_list_name&&!this.make("quick_list",this.data.quick_list_name)))return this.readOnly||($(this.wrapper).find(".widget").addClass("quick_list edit-mode"),this.add_settings_button(),this.add_new_block_button()),this.wrapper}validate(t){return!!t.quick_list_name}save(){return{quick_list_name:this.wrapper.getAttribute("quick_list_name"),col:this.get_col(),new:this.new_block_widget}}};var wn=class extends Tt{static get toolbox(){return{title:"Number Card",icon:frappe.utils.icon("number-card","sm")}}static get isReadOnlySupported(){return!0}constructor({data:t,api:e,config:i,readOnly:n,block:o}){super({data:t,api:e,config:i,readOnly:n,block:o});this.sections={},this.col=this.data.col?this.data.col:"4",this.allow_customization=!this.readOnly,this.options={allow_sorting:this.allow_customization,allow_create:this.allow_customization,allow_delete:this.allow_customization,allow_hiding:!1,allow_edit:!0,allow_resize:!0,for_workspace:!0}}render(){if(this.wrapper=document.createElement("div"),this.new("number_card"),!(this.data&&this.data.number_card_name&&!this.make("number_card",this.data.number_card_name)))return this.readOnly||($(this.wrapper).find(".widget").addClass("number_card edit-mode"),this.add_settings_button(),this.add_new_block_button()),this.wrapper}validate(t){return!!t.number_card_name}save(){return{number_card_name:this.wrapper.getAttribute("number_card_name"),col:this.get_col(),new:this.new_block_widget}}};var kn=class{static get isInline(){return!0}get state(){return this._state}set state(t){this._state=t}get title(){return"Header Size"}constructor({api:t}){this.api=t,this.button=null,this._state=!0,this.selectedText=null,this.range=null,this.headerLevels=[]}render(){return this.button=document.createElement("button"),this.button.type="button",this.button.innerHTML=`${frappe.utils.icon("header","sm")}${frappe.utils.icon("small-down","xs")}`,this.button.classList="header-inline-tool",this.button}checkState(t){let e=this.api.selection.findParentTag("SPAN");for(let n of["h1","h2","h3","h4","h5","h6"])if(e&&e.classList.contains(n)){let o=n.match(/\d+/)[0];$(".header-inline-tool svg:first-child").replaceWith(frappe.utils.icon(`header-${o}`,"md"))}t.anchorNode}change_size(t,e){if(!t)return;let i=document.createElement("SPAN");i.classList.add(`h${e}`),i.innerText=t.toString(),this.remove_parent_tag(t,t.commonAncestorContainer,i),t.extractContents(),t.insertNode(i),this.api.inlineToolbar.close()}remove_parent_tag(t,e,i){let n=t.startContainer.data,o=i.innerText,a=e.parentElement;n!==o&&(a=e),a.innerText==o&&!a.classList.contains("ce-header")&&!a.classList.contains("ce-paragraph")&&(this.remove_parent_tag(t,e.parentElement,i),a.remove())}surround(t){this.selectedText=t.cloneContents(),this.actions.hidden=!this.actions.hidden,this.range=this.actions.hidden?null:t,this.state=!this.actions.hidden}renderActions(){this.actions=document.createElement("div"),this.actions.classList="header-level-select",this.headerLevels=new Array(6).fill().map((t,e)=>{let i=document.createElement("div");return i.classList.add(`h${e+1}`,"header-level"),i.innerText=`Header ${e+1}`,i});for(let[t,e]of this.headerLevels.entries())this.actions.appendChild(e),this.api.listeners.on(e,"click",()=>{this.change_size(this.range,t+1)});return this.actions.hidden=!0,this.actions}destroy(){for(let t of this.headerLevels)this.api.listeners.off(t,"click")}};frappe.provide("frappe.workspace_block");frappe.workspace_block.blocks={header:hn,paragraph:Ur,card:_n,chart:gn,shortcut:mn,spacer:vn,onboarding:bn,quick_list:yn,number_card:wn};frappe.workspace_block.tunes={header_size:kn};var Ft=class{constructor(t){Object.assign(this,t),this.make()}refresh(){this.set_title(),this.set_actions(),this.set_body(),this.setup_events(),this.set_footer()}get_config(){return{name:this.name,label:this.label}}customize(t){if(this.in_customize_mode=!0,this.action_area.empty(),t.allow_sorting&&frappe.utils.add_custom_button(frappe.utils.icon("drag","xs"),null,"drag-handle",__("Drag"),null,this.action_area),t.allow_hiding){this.hidden&&(this.widget.removeClass("hidden"),this.body.css("opacity",.5),this.title_field.css("opacity",.5),this.footer.css("opacity",.5));let e=this.hidden?"fa fa-eye":"fa fa-eye-slash",i=this.hidden?__("Show"):__("Hide");frappe.utils.add_custom_button(`<i class="${e}" aria-hidden="true"></i>`,()=>this.hide_or_show(),"show-or-hide-button",i,null,this.action_area),this.show_or_hide_button=this.action_area.find(".show-or-hide-button")}t.allow_edit&&frappe.utils.add_custom_button(frappe.utils.icon("edit","xs"),()=>this.edit(),"edit-button",__("Edit"),null,this.action_area)}make(){this.make_widget(),this.widget.appendTo(this.container)}make_widget(){this.widget=$(`<div class="widget" data-widget-name="${this.name?this.name:""}">
			<div class="widget-head">
				<div class="widget-label">
					<div class="widget-title"></div>
					<div class="widget-subtitle"></div>
				</div>
				<div class="widget-control"></div>
			</div>
			<div class="widget-body"></div>
			<div class="widget-footer"></div>
		</div>`),this.title_field=this.widget.find(".widget-title"),this.subtitle_field=this.widget.find(".widget-subtitle"),this.body=this.widget.find(".widget-body"),this.action_area=this.widget.find(".widget-control"),this.head=this.widget.find(".widget-head"),this.footer=this.widget.find(".widget-footer"),this.refresh()}set_title(t){let e=this.title||this.label||this.name,i=t?frappe.ellipsis(e,t):e;if(this.icon){let n=frappe.utils.icon(this.icon,"lg");this.title_field[0].innerHTML=`${n} <span class="ellipsis" title="${i}">${i}</span>`}else this.title_field[0].innerHTML=`<span class="ellipsis" title="${i}">${i}</span>`,t&&this.title_field[0].setAttribute("title",this.title||this.label);this.subtitle&&this.subtitle_field.html(this.subtitle)}delete(t=!0,e=!1){let i=n=>{this.widget.remove(),!e&&this.options.on_delete&&this.options.on_delete(this.name,n)};t?(this.widget.addClass("zoom-out"),setTimeout(()=>{i(!0)},300)):i(!1)}edit(){var e;let t=mr(this.widget_type);this.edit_dialog=new t({for_workspace:(e=this.options)==null?void 0:e.for_workspace,label:this.label,type:this.widget_type,values:this.get_config(),primary_action:i=>{Object.assign(this,i),i.name=this.name,this.new=!0,this.refresh(),this.options.on_edit&&this.options.on_edit(i)},primary_action_label:__("Save")}),this.edit_dialog.make()}toggle_width(){this.width=="Full"?(this.widget.removeClass("full-width"),this.width=null,this.refresh()):(this.widget.addClass("full-width"),this.width="Full",this.refresh());let t=this.width=="Full"?__("Collapse"):__("Expand");this.resize_button.attr("title",t)}hide_or_show(){this.hidden?(this.body.css("opacity",1),this.title_field.css("opacity",1),this.footer.css("opacity",1),this.hidden=!1):(this.body.css("opacity",.5),this.title_field.css("opacity",.5),this.footer.css("opacity",.5),this.hidden=!0),this.show_or_hide_button.empty();let t=this.hidden?"fa fa-eye":"fa fa-eye-slash",e=this.hidden?__("Show"):__("Hide");$(`<i class="${t}" aria-hidden="true" title="${e}"></i>`).appendTo(this.show_or_hide_button)}setup_events(){}set_actions(){}set_body(){}set_footer(){}};frappe.provide("frappe.widget.utils");frappe.provide("frappe.dashboards");frappe.provide("frappe.dashboards.chart_sources");var xn=class extends Ft{constructor(t){t.shadow=!0;super(t);this.height=this.height||240}get_config(){return{name:this.name,chart_name:this.chart_name,label:this.label,hidden:this.hidden,width:this.width}}refresh(){delete this.dashboard_chart,this.set_body(),this.make_chart()}set_chart_title(){let t=this.widget.width()<600?40:60;this.set_title(t)}set_body(){this.widget.addClass("dashboard-widget-box"),this.width=="Full"&&this.widget.addClass("full-width")}setup_container(){this.body.empty(),this.chart_doc.type=="Heatmap"&&this.setup_heatmap_container(),this.loading=$(`<div class="chart-loading-state text-muted" style="height: ${this.height}px;">${__("Loading...")}</div>`),this.loading.appendTo(this.body),this.empty=$(`<div class="chart-loading-state text-muted" style="height: ${this.height}px;">${__("No Data")}</div>`),this.empty.hide().appendTo(this.body),this.chart_wrapper=$("<div></div>"),this.chart_wrapper.appendTo(this.body),this.$heatmap_legend=null,this.set_chart_title()}setup_heatmap_container(){this.widget.addClass("heatmap-chart"),this.widget.removeClass("full-width").addClass("full-width"),this.width="Full"}set_summary(){this.$summary?this.$summary.empty():(this.$summary=$('<div class="report-summary"></div>').hide(),this.head.after(this.$summary)),this.summary.forEach(t=>{frappe.utils.build_summary_item(t).appendTo(this.$summary)}),this.summary.length&&this.$summary.show()}make_chart(){this.get_settings().then(()=>{if(!this.settings){this.deleted=!0,this.widget.remove();return}this.chart_settings||(this.chart_settings={}),this.setup_container(),this.in_customize_mode||(this.action_area.empty(),this.prepare_chart_actions(),this.chart_doc.timeseries&&this.chart_doc.chart_type!=="Custom"&&this.render_time_series_filters()),frappe.run_serially([()=>this.prepare_chart_object(),()=>this.setup_filter_button(),()=>this.fetch_and_update_chart()])})}render_time_series_filters(){let t=this.get_time_series_filters();frappe.dashboard_utils.render_chart_filters(t,"chart-actions",this.action_area,0)}get_time_series_filters(){let t;return this.chart_doc.type=="Heatmap"?t=[{label:this.chart_settings.heatmap_year||this.chart_doc.heatmap_year,options:frappe.dashboard_utils.get_years_since_creation(frappe.boot.user.creation),action:e=>{this.selected_heatmap_year=e,this.save_chart_config_for_user({heatmap_year:this.selected_heatmap_year}),this.fetch_and_update_chart()}}]:t=[{label:this.chart_settings.time_interval||this.chart_doc.time_interval,options:["Yearly","Quarterly","Monthly","Weekly","Daily"],icon:"calendar",class:"time-interval-filter",action:e=>{this.selected_time_interval=e,this.save_chart_config_for_user({time_interval:this.selected_time_interval}),this.fetch_and_update_chart()}},{label:this.chart_settings.timespan||this.chart_doc.timespan,options:["Select Date Range","Last Year","Last Quarter","Last Month","Last Week"],class:"timespan-filter",action:e=>{this.selected_timespan=e,this.selected_timespan==="Select Date Range"?this.render_date_range_field():(this.selected_from_date=null,this.selected_to_date=null,this.date_field_wrapper&&(this.date_field_wrapper.hide(),this.title_field.show(),this.subtitle_field.show(),this.head.css("flex-direction","row")),this.save_chart_config_for_user({timespan:this.selected_timespan,from_date:null,to_date:null}),this.fetch_and_update_chart())}}],t}fetch_and_update_chart(){this.args={timespan:this.selected_timespan||this.chart_settings.timespan,time_interval:this.selected_time_interval||this.chart_settings.time_interval,from_date:this.selected_from_date||this.chart_settings.from_date,to_date:this.selected_to_date||this.chart_settings.to_date,heatmap_year:this.selected_heatmap_year||this.chart_settings.heatmap_year},this.fetch(this.filters,!0,this.args).then(t=>{this.chart_doc.chart_type=="Report"&&(this.report_result=t,this.summary=t.report_summary,t=this.get_report_chart_data(t)),this.update_chart_object(),this.data=t,this.render()})}render_date_range_field(){(!this.date_field_wrapper||!this.date_field_wrapper.is(":visible"))&&(this.date_field_wrapper=$('<div class="dashboard-date-field pull-right"></div>').insertAfter(this.action_area.find(".timespan-filter")),this.width!=="Full"&&this.widget.width()<700&&(this.title_field.hide(),this.subtitle_field.hide(),this.head.css("flex-direction","row-reverse")),this.date_range_field=frappe.ui.form.make_control({df:{fieldtype:"DateRange",fieldname:"from_date",placeholder:"Date Range",input_class:"input-xs",default:[this.chart_settings.from_date,this.chart_settings.to_date],value:[this.chart_settings.from_date,this.chart_settings.to_date],reqd:1,change:()=>{let t=this.date_range_field.get_value();this.selected_from_date=t[0],this.selected_to_date=t[1],t&&t.length==2&&(this.save_chart_config_for_user({timespan:this.selected_timespan,from_date:this.selected_from_date,to_date:this.selected_to_date}),this.fetch_and_update_chart())}},parent:this.date_field_wrapper,render_input:1}),this.date_range_field.$input.focus())}get_report_chart_data(t){if(t.chart&&this.chart_doc.use_report_chart)return t.chart.data;{let e=[];this.chart_doc.y_axis.map(a=>{e.push(a.y_field)});let i={y_fields:e,x_field:this.chart_doc.x_field,chart_type:this.chart_doc.type,color:this.chart_doc.color},n=t.columns.map(a=>frappe.report_utils.prepare_field_from_column(a));return frappe.report_utils.make_chart_options(n,t,i).data}}prepare_chart_actions(){let t=[{label:__("Refresh"),action:"action-refresh",handler:()=>{delete this.dashboard_chart,this.make_chart()}},{label:__("Edit"),action:"action-edit",handler:()=>{frappe.set_route("Form","Dashboard Chart",this.chart_doc.name)}},{label:__("Reset Chart"),action:"action-reset",handler:()=>{this.reset_chart(),delete this.dashboard_chart,this.make_chart()}}];this.chart_doc.document_type?t.push({label:__("{0} List",[this.chart_doc.document_type]),action:"action-list",handler:()=>{frappe.set_route("List",this.chart_doc.document_type)}}):this.chart_doc.chart_type==="Report"&&t.push({label:__("{0} Report",[this.chart_doc.report_name]),action:"action-list",handler:()=>{frappe.set_route("query-report",this.chart_doc.report_name,this.filters)}}),this.set_chart_actions(t)}setup_filter_button(){this.in_customize_mode||(this.is_document_type=this.chart_doc.chart_type!=="Report"&&this.chart_doc.chart_type!=="Custom",this.filter_button=$(`<div class="filter-chart btn btn-xs pull-right">
				${frappe.utils.icon("filter","sm")}
			</div>`),this.filter_button.appendTo(this.action_area),this.is_document_type?(this.filter_group&&(this.filters=this.filter_group.get_filters()),this.create_filter_group_and_add_filters()):this.filter_button.on("click",()=>{let t;frappe.dashboard_utils.get_filters_for_chart_type(this.chart_doc).then(e=>{this.is_document_type?t=[{fieldtype:"HTML",fieldname:"filter_area"}]:e?t=e.filter(i=>i.fieldname).map(i=>(Object.assign(i,i.dashboard_config||{}),i)):t=[{fieldtype:"HTML",options:__("No Filters Set")}],this.setup_filter_dialog(t)})}))}setup_filter_dialog(t){let e=this,i=new frappe.ui.Dialog({title:__("Set Filters for {0}",[this.chart_doc.chart_name]),fields:t,primary_action:function(){let n=this.get_values();n&&(this.hide(),e.filters=n,e.save_chart_config_for_user({filters:e.filters}),e.fetch_and_update_chart())},primary_action_label:"Set"});i.show(),this.chart_doc.chart_type=="Report"&&(frappe.query_report=new frappe.views.QueryReport({filters:i.fields_list}),frappe.query_reports[this.chart_doc.report_name].onload&&frappe.query_reports[this.chart_doc.report_name].onload(frappe.query_report)),i.set_values(this.filters)}reset_chart(){this.save_chart_config_for_user(null,1),this.chart_settings={},this.filters=null,this.selected_time_interval=null,this.selected_timespan=null,this.selected_heatmap_year=null}save_chart_config_for_user(t,e=0){Object.assign(this.chart_settings,t),frappe.xcall("frappe.desk.doctype.dashboard_settings.dashboard_settings.save_chart_config",{reset:e,config:this.chart_settings,chart_name:this.chart_doc.chart_name})}create_filter_group_and_add_filters(){this.filter_group=new frappe.ui.FilterGroup({doctype:this.chart_doc.document_type,parent_doctype:this.chart_doc.parent_document_type,filter_button:this.filter_button,on_change:()=>{this.filters=this.filter_group.get_filters(),this.save_chart_config_for_user({filters:this.filters}),this.fetch_and_update_chart()}}),this.filters&&frappe.model.with_doctype(this.chart_doc.document_type,()=>{this.filter_group.add_filters_to_filter_group(this.filters)})}set_chart_actions(t){this.chart_actions=$(`<div class="chart-actions dropdown pull-right">
			<button data-toggle="dropdown"
				aria-haspopup="true"aria-expanded="false"
				class="btn btn-xs btn-secondary chart-menu"
			>
				<svg class="icon icon-sm">
					<use href="#icon-dot-horizontal">
					</use>
				</svg>
			</button>
			<ul class="dropdown-menu dropdown-menu-right">
				${t.map(e=>`<li><a class="dropdown-item" data-action="${e.action}">${e.label}</a></li>`).join("")}
			</ul>
		</div>
		`),this.chart_actions.find("a[data-action]").each((e,i)=>{let n=i.dataset.action;$(i).click(t.find(o=>o.action===n))}),this.chart_actions.appendTo(this.action_area)}fetch(t,e=!1,i){let n=this.settings.method;return this.chart_doc.chart_type=="Report"?i={report_name:this.chart_doc.report_name,filters:t,ignore_prepared_report:1}:i={chart_name:this.chart_doc.name,filters:t,refresh:e?1:0,time_interval:i&&i.time_interval?i.time_interval:null,timespan:i&&i.timespan?i.timespan:null,from_date:i&&i.from_date?i.from_date:null,to_date:i&&i.to_date?i.to_date:null,heatmap_year:i&&i.heatmap_year?i.heatmap_year:null},frappe.xcall(n,i)}async get_source_doctype(){if(this.chart_doc.document_type)return this.chart_doc.document_type;if(this.chart_doc.chart_type=="Report"&&this.chart_doc.report_name)return await frappe.db.get_value("Report",this.chart_doc.report_name,"ref_doctype").then(t=>t.message.ref_doctype)}async render(){let t=()=>{let e=this.get_chart_args();this.dashboard_chart?this.dashboard_chart.update(this.data):this.dashboard_chart=frappe.utils.make_chart(this.chart_wrapper[0],e)};!this.data||!this.data.labels||!Object.keys(this.data).length?(this.chart_wrapper.hide(),this.loading.hide(),this.$summary&&this.$summary.hide(),this.empty.show()):(this.loading.hide(),this.empty.hide(),this.chart_wrapper.show(),this.chart_doc.document_type=await this.get_source_doctype(),this.chart_doc.document_type?frappe.model.with_doctype(this.chart_doc.document_type,t):t(),this.width=="Full"&&this.summary&&this.set_summary(),this.chart_doc.type=="Heatmap"&&this.render_heatmap_legend())}get_chart_args(){var l,d;let t=this.get_chart_colors(),e,i,n={Line:"line",Bar:"bar",Percentage:"percentage",Pie:"pie",Donut:"donut",Heatmap:"heatmap"},o=["Pie","Donut"].includes(this.chart_doc.type)?6:9,a={data:this.data,type:n[this.chart_doc.type],colors:t,height:this.height,maxSlices:this.chart_doc.number_of_groups||o,axisOptions:{xIsSeries:this.chart_doc.timeseries,shortenYAxisNumbers:1}};if(this.chart_doc.document_type){let h=frappe.get_meta(this.chart_doc.document_type).fields.find(p=>p.fieldname==this.chart_doc.value_based_on);e=h==null?void 0:h.fieldtype,i=h==null?void 0:h.options}if(this.chart_doc.chart_type=="Report"&&((d=(l=this.report_result)==null?void 0:l.chart)==null?void 0:d.fieldtype)&&(e=this.report_result.chart.fieldtype,i=this.report_result.chart.options),a.tooltipOptions={formatTooltipY:u=>frappe.format(u,{fieldtype:e,options:i},{always_show_decimals:!0,inline:!0})},this.chart_doc.type=="Heatmap"){let u=parseInt(this.selected_heatmap_year||this.chart_settings.heatmap_year||this.chart_doc.heatmap_year);a.data.start=new Date(`${u}-01-01`),a.data.end=new Date(`${u+1}-01-01`)}let s=u=>{let h=JSON.parse(u);for(let p in h)typeof a[p]=="object"&&typeof h[p]=="object"?a[p]=Object.assign(a[p],h[p]):a[p]=h[p]};return this.custom_options&&s(this.custom_options),this.chart_doc.custom_options&&s(this.chart_doc.custom_options),a}get_chart_colors(){let t=[];return this.chart_doc.y_axis.length?this.chart_doc.y_axis.map(e=>{t.push(e.color)}):["Line","Bar"].includes(this.chart_doc.type)?t=[this.chart_doc.color||[]]:this.chart_doc.type=="Heatmap"&&(t=[]),t}render_heatmap_legend(){let t,e=i=>{t=JSON.parse(i).colors};this.custom_options&&e(this.custom_options),this.chart_doc.custom_options&&e(this.chart_doc.custom_options),!this.$heatmap_legend&&this.widget.width()>991&&(this.$heatmap_legend=$(`
				<div class="heatmap-legend">
					<ul class="legend-colors">
						<li style="background-color: ${t[0]||"#ebedf0"}"></li>
						<li style="background-color: ${t[1]||"#c6e48b"}"></li>
						<li style="background-color: ${t[2]||"#7bc96f"}"></li>
						<li style="background-color: ${t[3]||"#239a3b"}"></li>
						<li style="background-color: ${t[4]||"#196127"}"></li>
					</ul>
					<div class="legend-label">
						<div style="margin-bottom: 45px">${__("Less")}</div>
						<div>${__("More")}</div>
					</div>
				</div>
				`),this.body.append(this.$heatmap_legend))}update_last_synced(){if(!this.chart_doc.last_synced_on)return;let t=__("Last synced {0}",[comment_when(this.chart_doc.last_synced_on)]);this.subtitle_field.html(t)}update_chart_object(){frappe.db.get_doc("Dashboard Chart",this.chart_doc.name).then(t=>{this.chart_doc=t,this.update_last_synced()})}prepare_chart_object(){return this.chart_doc.type=="Heatmap"&&!this.chart_doc.heatmap_year&&(this.chart_doc.heatmap_year=frappe.dashboard_utils.get_year(frappe.datetime.now_date())),this.set_chart_filters()}set_chart_filters(){let t=this.chart_settings.filters||null,e=frappe.dashboard_utils.get_all_filters(this.chart_doc);return this.chart_doc.chart_type=="Report"?frappe.dashboard_utils.get_filters_for_chart_type(this.chart_doc).then(i=>{e=this.update_default_date_filters(i,e),this.filters=frappe.utils.parse_array(t)||frappe.utils.parse_array(this.filters)||frappe.utils.parse_array(e)}):(this.filters=frappe.utils.parse_array(t)||frappe.utils.parse_array(this.filters)||frappe.utils.parse_array(e),Promise.resolve())}update_default_date_filters(t,e){return t&&t.map(i=>{["Date","DateRange"].includes(i.fieldtype)&&i.default&&(i.reqd||e[i.fieldname])&&(e[i.fieldname]=i.default)}),e}get_settings(){return frappe.model.with_doc("Dashboard Chart",this.chart_name).then(t=>{if(t)if(this.chart_doc=t,this.chart_doc.chart_type=="Custom"){if(frappe.dashboards.chart_sources[this.chart_doc.source])return this.settings=frappe.dashboards.chart_sources[this.chart_doc.source],Promise.resolve();{let e="frappe.desk.doctype.dashboard_chart_source.dashboard_chart_source.get_config";return frappe.xcall(e,{name:this.chart_doc.source}).then(i=>{frappe.dom.eval(i),this.settings=frappe.dashboards.chart_sources[this.chart_doc.source]})}}else return this.chart_doc.chart_type=="Report"?(this.settings={method:"frappe.desk.query_report.run"},Promise.resolve()):(this.settings={method:"frappe.desk.doctype.dashboard_chart.dashboard_chart.get"},Promise.resolve())})}};frappe.provide("frappe.utils");var Cn=class extends Ft{constructor(t){t.shadow=!0;super(t)}get_config(){return{name:this.name,icon:this.icon,label:this.label,format:this.format,link_to:this.link_to,doc_view:this.doc_view,color:this.color,restrict_to_domain:this.restrict_to_domain,stats_filter:this.stats_filter,type:this.type,url:this.url}}setup_events(){this.widget.click(t=>{if(this.in_customize_mode)return;let e=frappe.utils.generate_route({route:this.route,name:this.link_to,type:this.type,is_query_report:this.is_query_report,doctype:this.ref_doctype,doc_view:this.doc_view}),i=frappe.utils.get_filter_from_json(this.stats_filter);if(this.type=="DocType"&&i&&(frappe.route_options=i),(t.ctrlKey||t.metaKey)&&(frappe.open_in_new_tab=!0),this.type=="URL"){frappe.open_in_new_tab?(window.open(this.url,"_blank"),frappe.open_in_new_tab=!1):window.location.href=this.url;return}frappe.set_route(e)})}set_actions(){if(this.in_customize_mode)return;this.widget.addClass("shortcut-widget-box");let t=frappe.utils.get_filter_from_json(this.stats_filter);this.type=="DocType"&&t&&frappe.db.count(this.link_to,{filters:t}).then(e=>this.set_count(e))}set_count(t){let e=()=>this.format?__(this.format).replace(/{}/g,t):t;this.action_area.empty();let i=e(),n=this.color&&t?this.color.toLowerCase():"gray";$(`<div class="indicator-pill ellipsis ${n}">${i}</div>`).appendTo(this.action_area)}};frappe.provide("frappe.utils");var Sn=class extends Ft{constructor(t){t.icon=t.icon||"file";super(t)}get_config(){return{name:this.name,links:JSON.stringify(this.links),link_count:this.links.length,label:this.label,hidden:this.hidden}}set_body(){this.options||(this.options={},this.options.links=this.links),this.widget.addClass("links-widget-box");let t=o=>o.dependencies&&o.incomplete_dependencies,e=o=>t(o)?"disabled-link":"",i=o=>o.open_count?"red":o.onboard?o.count?"blue":"yellow":"gray",n=o=>t(o)?`<span class="link-content ellipsis disabled-link">${o.label?o.label:o.name}</span>
					<div class="module-link-popover popover fade top in" role="tooltip" style="display: none;">
						<div class="arrow"></div>
						<h3 class="popover-title" style="display: none;"></h3>
						<div class="popover-content" style="padding: 12px;">
							<div class="small text-muted">${__("You need to create these first: ")}</div>
							<div class="small">${o.incomplete_dependencies.join(", ")}</div>
						</div>
					</div>`:o.youtube_id?`<span class="link-content help-video-link ellipsis" data-youtubeid="${o.youtube_id}">
						${o.label?o.label:o.name}</span>`:`<span class="link-content ellipsis">${o.label?o.label:o.name}</span>`;this.link_list=this.links.map(o=>{let a={name:o.link_to,type:o.link_type,doctype:o.doctype,is_query_report:o.is_query_report};o.link_type.toLowerCase()=="report"&&!o.is_query_report&&(a.doctype=o.dependencies);let s=frappe.utils.generate_route(a);return $(`<a href="${s}" class="link-item ellipsis ${o.onboard?"onboard-spotlight":""} ${e(o)}" type="${o.type}" title="${o.label?o.label:o.name}">
					<span class="indicator-pill no-margin ${i(o)}"></span>
					${n(o)}
			</a>`)}),this.in_customize_mode&&this.body.empty(),this.link_list.forEach(o=>o.appendTo(this.body))}setup_events(){this.link_list.forEach(t=>{let e=t.find(".link-content");if(t.hasClass("disabled-link")){let i=t.find(".module-link-popover");e.mouseover(()=>{this.in_customize_mode||i.show()}),e.mouseout(()=>i.hide())}else e.click(i=>{if(!this.in_customize_mode&&e.hasClass("help-video-link")){let n=i.currentTarget.dataset.youtubeid;frappe.help.show_video(n)}})})}};frappe.provide("frappe.utils");var Tn=class extends Ft{async refresh(){frappe.utils.load_video_player(),this.new&&await this.get_onboarding_data(),this.set_title(),this.set_actions(),this.set_body(),this.setup_events()}get_config(){return{label:this.onboarding_name}}make_body(){this.body.empty(),this.steps_wrapper=$('<div class="onboarding-steps-wrapper"></div>').appendTo(this.body),this.step_preview=$(`<div class="onboarding-step-preview">
			<div class="onboarding-step-body"></div>
			<div class="onboarding-step-footer"></div>
		</div>`).appendTo(this.body),this.step_body=this.step_preview.find(".onboarding-step-body"),this.step_footer=this.step_preview.find(".onboarding-step-footer"),this.steps.forEach((t,e)=>{this.add_step(t,e)}),this.show_step(this.steps[0])}add_step(t,e){let i="pending";t.is_skipped&&(i="skipped"),t.is_complete&&(i="complete");let n=$(`<a class="onboarding-step ${i}">
				<div class="step-title">
					<div class="step-index step-pending">${__(e+1)}</div>
					<div class="step-index step-skipped">${frappe.utils.icon("tick","xs")}</div>
					<div class="step-index step-complete">${frappe.utils.icon("tick","xs")}</div>
					<div>${__(t.title)}</div>
				</div>
			</a>`);if(t.$step=n,!t.is_complete&&!t.is_skipped){let o=$(`<div class="step-skip">${__("Skip")}</div>`);o.appendTo(n),o.on("click",()=>{this.skip_step(t),event.stopPropagation()})}return n.on("click",()=>this.show_step(t)),n.appendTo(this.steps_wrapper),n}show_step(t){this.active_step&&this.active_step.$step.removeClass("active"),t.$step.addClass("active"),this.active_step=t;let e={"Watch Video":a=>this.show_video(a),"Create Entry":a=>{a.is_complete?frappe.set_route(`/app/List/${a.reference_document}`):a.show_full_form?this.create_entry(a):this.show_quick_entry(a)},"Show Form Tour":a=>this.show_form_tour(a),"Update Settings":a=>this.update_settings(a),"View Report":a=>this.open_report(a),"Go to Page":a=>this.go_to_page(a)},i=()=>{this.step_body.empty(),this.step_footer.empty(),n(),t.intro_video_url?$(`<button class="btn btn-primary btn-sm">${__("Watch Tutorial")}</button>`).appendTo(this.step_footer).on("click",o):$(`<button class="btn btn-primary btn-sm">${__(t.action_label||t.action)}</button>`).appendTo(this.step_footer).on("click",()=>e[t.action](t))},n=()=>{let a=t.description?frappe.markdown(t.description):`<h1>${__(t.title)}</h1>`;t.action==="Create Entry"&&(a+=`<p>
					<a href='/app/${frappe.router.slug(t.reference_document)}'>
						${__("Show {0} List",[__(t.reference_document)])}</a>
				</p>`),this.step_body.html(a)},o=()=>{this.step_body.empty(),this.step_footer.empty();let a=$(`<div class="video-player" data-plyr-provider="youtube" data-plyr-embed-id="${t.intro_video_url}"></div>`);a.appendTo(this.step_body);let s=new frappe.Plyr(a[0],{hideControls:!0,resetOnEnd:!0});$(`<button class="btn btn-primary btn-sm">${__(t.action_label||t.action)}</button>`).appendTo(this.step_footer).on("click",()=>{s.pause(),e[t.action](t)}),$(window).one("hashchange",()=>{s.pause()}),$(`<button class="btn btn-secondary ml-2 btn-sm">${__("Back")}</button>`).appendTo(this.step_footer).on("click",i)};i()}go_to_page(t){this.mark_complete(t),frappe.set_route(t.path).then(()=>{let e=t.callback_message||__("You can continue with the onboarding after exploring this page"),i=t.callback_title||__("Awesome Work"),n=frappe.msgprint({message:e,title:i,primary_action:{action:()=>{n.hide()},label:()=>__("Continue")},wide:!0})})}open_report(t){let e=frappe.utils.generate_route({name:t.reference_report,type:"report",is_query_report:t.report_type!=="Report Builder",doctype:t.report_reference_doctype}),i=frappe.get_route();frappe.set_route(e).then(()=>{let n=frappe.msgprint({message:__(t.report_description),title:__(t.reference_report),primary_action:{action:()=>{frappe.set_route(i).then(()=>{this.mark_complete(t)}),n.hide()},label:()=>__("Continue")},secondary_action:{action:()=>{n.hide(),frappe.set_route(i).then(()=>{this.mark_complete(t)})},label:__("Go Back")}});frappe.msg_dialog.custom_onhide=()=>this.mark_complete(t)})}show_form_tour(t){let e;t.is_single?e=frappe.router.slug(t.reference_document):e=`${frappe.router.slug(t.reference_document)}/new`;let i=frappe.get_route();frappe.route_hooks={},frappe.route_hooks.after_load=n=>{let o=()=>{let s=frappe.msgprint({message:__("Let's take you back to onboarding"),title:__("Onboarding complete"),primary_action:{action:()=>{frappe.set_route(i).then(()=>{this.mark_complete(t)}),s.hide()},label:()=>__("Continue")}})},a=t.form_tour;n.tour.init({tour_name:a,on_finish:o}).then(()=>n.tour.start())},frappe.set_route(e)}update_settings(t){let e=frappe.get_route();frappe.route_hooks={},frappe.route_hooks.after_load=i=>{i.scroll_to_field(t.field),i.doc.__unsaved=!0},frappe.route_hooks.after_save=i=>{let n=!1,o={},a=i.doc[t.field],s=null;a&&t.value_to_validate=="%"&&(n=!0),a==t.value_to_validate&&(n=!0),cstr(a)==cstr(t.value_to_validate)&&(n=!0),n?(o.message=__("Let's take you back to onboarding"),o.title=__("Action Complete"),o.primary_action={action:()=>{frappe.set_route(e).then(()=>{this.mark_complete(t)})},label:__("Continue")},s=()=>o.primary_action.action()):(o.message=__("Looks like you didn't change the value"),o.title=__("Try Again"),o.secondary_action={action:()=>frappe.set_route(e),label:__("Go Back")},o.primary_action={action:()=>{frappe.set_route(e).then(()=>{setTimeout(()=>{this.skip_step(t)},300)})},label:__("Skip Step")},s=()=>o.secondary_action.action()),frappe.msgprint(o),frappe.msg_dialog.custom_onhide=()=>s()},frappe.set_route("Form",t.reference_document)}async create_entry(t){let e=frappe.get_route(),i=await this.get_first_document(t.reference_document);frappe.route_hooks={},frappe.route_hooks.after_load=o=>{let a=()=>{frappe.msgprint({message:__("Awesome, now try making an entry yourself"),title:__("Document Saved"),primary_action:{action:()=>{frappe.set_route(e).then(()=>{this.mark_complete(t)})},label:__("Continue")}}),frappe.msg_dialog.custom_onhide=()=>{this.mark_complete(t)}},s=t.form_tour;o.tour.init({tour_name:s,on_finish:a}).then(()=>o.tour.start())};let n=()=>{frappe.msgprint({message:__("Let's take you back to onboarding"),title:__("Action Complete"),primary_action:{action:()=>{frappe.set_route(e).then(()=>{this.mark_complete(t)})},label:__("Continue")}}),frappe.msg_dialog.custom_onhide=()=>{this.mark_complete(t)}};t.is_submittable?(frappe.route_hooks.after_save=()=>{frappe.msgprint({message:__("Submit this document to complete this step."),title:__("Document Saved")})},frappe.route_hooks.after_submit=n):frappe.route_hooks.after_save=n,frappe.set_route("Form",t.reference_document,i)}show_quick_entry(t){let e=frappe.get_route_str();frappe.ui.form.make_quick_entry(t.reference_document,()=>{if(frappe.get_route_str()!=e){let i=frappe.msgprint({message:__("Let's take you back to onboarding"),title:__("Document Saved"),primary_action:{action:()=>{i.hide(),frappe.set_route(e).then(()=>{this.mark_complete(t)})},label:__("Continue")}});frappe.msg_dialog.custom_onhide=()=>{frappe.set_route(e).then(()=>{this.mark_complete(t)})}}else frappe.msgprint({message:__("Let us continue with the onboarding"),title:__("Document Saved")}),this.mark_complete(t)},null,null,!0)}show_video(t){frappe.help.show_video(t.video_url,t.title),this.mark_complete(t)}mark_complete(t){let e=t.$step,i=()=>{t.is_complete=!0,e.removeClass("skipped"),e.addClass("complete")};this.update_step_status(t,"is_complete",1,i)}skip_step(t){let e=t.$step,i=()=>{t.is_skipped=!0,e.removeClass("complete"),e.removeClass("pending"),e.addClass("skipped")};this.update_step_status(t,"is_skipped",1,i)}update_step_status(t,e,i,n){let o={is_complete:"complete",is_skipped:"skipped"};frappe.route_hooks={},frappe.call("frappe.desk.desktop.update_onboarding_step",{name:t.name,field:e,value:i}).then(()=>{n(),t.$step.removeClass("pending").removeClass("complete").removeClass("skipped").addClass(o[e]),this.steps.filter(s=>!(s.is_complete||s.is_skipped)).length==0&&this.show_success()})}show_success(){let t=this.success||__("You seem good to go!"),e=this.success_state_image||"/assets/frappe/images/ui-states/success-color.png",i="";this.docs_url&&(i=__('Congratulations on completing the module setup. If you want to learn more you can refer to the documentation <a target="_blank" href="{0}">here</a>.',[this.docs_url]));let n=$(`<div class="text-center onboarding-success">
					<img src="${e}" alt="Success State" class="zoom-in success-state">
					<h3>${t}</h3>
					<div class="text-muted">${i}</div>
					<button class="btn btn-primary btn-sm">${__("Continue")}</button>
			</div>
		`);n.find(".btn").on("click",()=>this.delete()),this.step_preview.empty(),n.appendTo(this.step_preview)}set_body(){this.widget.addClass("onboarding-widget-box"),this.is_dismissed()?this.widget.hide():this.make_body()}is_dismissed(){if(this.in_customize_mode)return!1;let t=JSON.parse(localStorage.getItem("dismissed-onboarding")||"{}");if(Object.keys(t).includes(this.title)){let e=new Date(t[this.title]),i=new Date;return frappe.datetime.get_hour_diff(i,e)<24}return!1}set_actions(){if(this.in_customize_mode)return;this.action_area.empty();let t=$(`<div class="small" style="cursor:pointer;">${__("Dismiss",null,"Stop showing the onboarding widget.")}</div>`);t.on("click",()=>{let e=JSON.parse(localStorage.getItem("dismissed-onboarding")||"{}");e[this.title]=frappe.datetime.now_datetime(),localStorage.setItem("dismissed-onboarding",JSON.stringify(e)),this.delete(!0,!0),this.widget.closest(".ce-block").hide()}),t.appendTo(this.action_area)}get_onboarding_data(){return frappe.model.with_doc("Module Onboarding",this.onboarding_name).then(t=>{if(t){this.onboarding_doc=t,this.label=t.label,this.title=t.title||__("Let's Get Started"),this.subtitle=t.subtitle,this.success=t.success,this.docs_url=t.docs_url,this.user_can_dismiss=t.user_can_dismiss;let e="frappe.desk.doctype.onboarding_step.onboarding_step.get_onboarding_steps";return frappe.xcall(e,{ob_steps:t.steps}).then(i=>{this.steps=i})}})}async get_first_document(t){let{message:e}=await frappe.db.get_value("Form Tour",{reference_doctype:t},["first_document"]),i;return e.first_document&&await frappe.db.get_list(t,{order_by:"creation"}).then(n=>{Array.isArray(n)&&n.length&&(i=n[0].name)}),i||"new"}};var En=class{constructor(t){Object.assign(this,t),this.make()}customize(){}make(){this.make_widget(),this.widget.appendTo(this.container),this.setup_events()}get_title(){let t=`New ${frappe.model.unscrub(this.type)}`;return __(t)}make_widget(){let t=`new-${frappe.scrub(frappe.model.unscrub(this.type),"-")}-widget`;this.widget=$(`<div class="widget new-widget ${t}">
				+ ${this.get_title()}
			</div>`),this.body=this.widget}setup_events(){this.widget.on("click",()=>{this.custom_dialog?this.custom_dialog():this.open_dialog()})}open_dialog(){let t=mr(this.type);this.dialog=new t({label:this.label,type:this.type,values:!1,default_values:this.default_values,primary_action:this.on_create}),this.dialog.make()}delete(){this.widget.remove()}};frappe.provide("frappe.utils");var An=class extends Ft{constructor(t){t.shadow=!0;super(t)}get_config(){return{name:this.name,number_card_name:this.number_card_name,label:this.label,color:this.color,hidden:this.hidden}}refresh(){this.set_body()}set_body(){this.widget.addClass("number-widget-box"),this.make_card()}make_card(){frappe.model.with_doc("Number Card",this.number_card_name||this.name).then(t=>{if(t)this.card_doc=t,this.render_card();else if(this.document_type)frappe.run_serially([()=>this.create_number_card(),()=>this.render_card()]);else{this.delete(!1);return}this.set_events()})}create_number_card(){return this.set_doc_args(),frappe.xcall("frappe.desk.doctype.number_card.number_card.create_number_card",{args:this.card_doc}).then(t=>{this.name=t.name,this.card_doc=t,this.widget.attr("data-widget-name",this.name)})}set_events(){$(this.body).click(()=>{this.in_customize_mode||this.card_doc.type=="Custom"||this.set_route()})}set_route(){let t=this.card_doc.type!=="Report",e=t?this.card_doc.document_type:this.card_doc.report_name,i=frappe.utils.generate_route({name:e,type:t?"doctype":"report",is_query_report:!t});if(t){let n=JSON.parse(this.card_doc.filters_json);frappe.route_options=n.reduce((o,a)=>Object.assign(o,{[`${a[0]}.${a[1]}`]:[a[2],a[3]]}),{})}frappe.set_route(i)}set_doc_args(){this.card_doc=Object.assign({},{document_type:this.document_type,label:this.label,function:this.function,aggregate_function_based_on:this.aggregate_function_based_on,color:this.color,filters_json:this.stats_filter})}get_settings(t){return this.filters=this.get_filters(),{Custom:{method:this.card_doc.method,args:{filters:this.filters},get_number:i=>this.get_number_for_custom_card(i)},Report:{method:"frappe.desk.query_report.run",args:{report_name:this.card_doc.report_name,filters:this.filters,ignore_prepared_report:1},get_number:i=>this.get_number_for_report_card(i)},"Document Type":{method:"frappe.desk.doctype.number_card.number_card.get_result",args:{doc:this.card_doc,filters:this.filters},get_number:i=>this.get_number_for_doctype_card(i)}}[t]}get_filters(){return frappe.dashboard_utils.get_all_filters(this.card_doc)}render_card(){this.prepare_actions(),this.set_title(),this.set_loading_state(),this.card_doc.type||(this.card_doc.type="Document Type"),this.settings=this.get_settings(this.card_doc.type),frappe.run_serially([()=>this.render_number(),()=>this.render_stats()])}set_loading_state(){$(this.body).html(`<div class="number-card-loading text-muted">
			${__("Loading...")}
		</div>`)}get_number(){return frappe.xcall(this.settings.method,this.settings.args).then(t=>this.settings.get_number(t))}get_number_for_custom_card(t){typeof t=="object"?(this.number=t.value,this.set_formatted_number(t)):this.formatted_number=t}get_number_for_doctype_card(t){if(this.number=t,this.card_doc.function!=="Count")return frappe.model.with_doctype(this.card_doc.document_type,()=>{let e=frappe.meta.get_docfield(this.card_doc.document_type,this.card_doc.aggregate_function_based_on);this.set_formatted_number(e)});this.formatted_number=t}get_number_for_report_card(t){let e=this.card_doc.report_field,i=t.result.reduce((o,a)=>(a[e]&&o.push(a[e]),o),[]),n=t.columns.find(o=>o.fieldname==e);this.number=frappe.report_utils.get_result_of_fn(this.card_doc.report_function,i),this.set_formatted_number(n)}set_formatted_number(t){let e=frappe.sys_defaults.country,n=frappe.utils.shorten_number(this.number,e,5).split(" "),o=n[1]||"",a=$(frappe.format(n[0],t)).text();this.formatted_number=a+" "+__(o)}render_number(){return this.get_number().then(()=>{$(this.body).html(`<div class="widget-content">
				<div class="number" style="color:${this.card_doc.color}">${this.formatted_number}</div>
				</div>`)})}render_stats(){if(this.card_doc.type!=="Document Type")return;let t="",e="";return this.get_percentage_stats().then(()=>{this.percentage_stat==0||this.percentage_stat==null?e="grey-stat":this.percentage_stat>0?(t=`<span class="indicator-pill-round green">
						${frappe.utils.icon("arrow-up-right","xs")}
					</span>`,e="green-stat"):(t=`<span class="indicator-pill-round red">
						${frappe.utils.icon("arrow-down-left","xs")}
					</span>`,e="red-stat");let n={Daily:__("since yesterday"),Weekly:__("since last week"),Monthly:__("since last month"),Yearly:__("since last year")}[this.card_doc.stats_time_interval],o=(()=>{if(this.percentage_stat==null)return NaN;let a=this.percentage_stat.split(" "),s=a[1]||"";return Math.abs(a[0])+" "+s})();isNaN(o)||$(this.body).find(".widget-content").append(`<div class="card-stats ${e}">
				<span class="percentage-stat-area">
					${t}
					<span class="percentage-stat">
						${o} %
					</span>
				</span>
				<span class="stat-period text-muted">
					${n}
				</span>
			</div>`)})}get_percentage_stats(){return frappe.xcall("frappe.desk.doctype.number_card.number_card.get_percentage_difference",{doc:this.card_doc,filters:this.filters,result:this.number}).then(t=>{t!==void 0&&(this.percentage_stat=frappe.utils.shorten_number(t))})}prepare_actions(){if(this.in_customize_mode)return;let t=[{label:__("Refresh"),action:"action-refresh",handler:()=>{this.render_card()}},{label:__("Edit"),action:"action-edit",handler:()=>{let e=this.number_card_name||this.name;frappe.set_route("Form","Number Card",e)}}];this.set_card_actions(t)}set_card_actions(t){this.card_actions=$(`<div class="card-actions dropdown pull-right">
				<a data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
				...
				</a>
				<ul class="dropdown-menu" style="max-height: 300px; overflow-y: auto;">
					${t.map(e=>`<li class="dropdown-item">
									<a data-action="${e.action}">${e.label}</a>
								</li>`).join("")}
				</ul>
			</div>`),this.card_actions.find("a[data-action]").each((e,i)=>{let n=i.dataset.action;$(i).click(t.find(o=>o.action===n))}),this.action_area.html(this.card_actions)}};frappe.provide("frappe.utils");var On=class extends Ft{constructor(t){t.shadow=!0;super(t)}get_config(){return{document_type:this.document_type,label:this.label,quick_list_filter:this.quick_list_filter}}set_actions(){this.in_customize_mode||(this.setup_add_new_button(),this.setup_refresh_list_button(),this.setup_filter_list_button())}setup_add_new_button(){this.add_new_button=$(`<div class="add-new btn btn-xs pull-right"
			title="${__("Add New")}  ${__(this.document_type)}
			">
				${frappe.utils.icon("add","sm")}
			</div>`),this.add_new_button.appendTo(this.action_area),this.add_new_button.on("click",()=>{frappe.set_route(frappe.utils.generate_route({type:"doctype",name:this.document_type,doc_view:"New"}))})}setup_refresh_list_button(){this.refresh_list=$(`<div class="refresh-list btn btn-xs pull-right" title="${__("Refresh List")}">
				${frappe.utils.icon("refresh","sm")}
			</div>`),this.refresh_list.appendTo(this.action_area),this.refresh_list.on("click",()=>{this.body.empty(),this.set_body()})}setup_filter_list_button(){this.filter_list=$(`<div class="filter-list btn btn-xs pull-right" title="${__("Add/Update Filter")}">
				${frappe.utils.icon("filter","sm")}
			</div>`),this.filter_list.appendTo(this.action_area),this.filter_list.on("click",()=>this.setup_filter_dialog())}setup_filter(t){this.filter_group&&(this.filter_group.wrapper.empty(),delete this.filter_group),this.filters=frappe.utils.get_filter_from_json(this.quick_list_filter,t),this.filter_group=new frappe.ui.FilterGroup({parent:this.dialog.get_field("filter_area").$wrapper,doctype:t,on_change:()=>{}}),frappe.model.with_doctype(t,()=>{this.filter_group.add_filters_to_filter_group(this.filters),this.dialog.set_df_property("filter_area","hidden",!1)})}setup_filter_dialog(){let t=[{fieldtype:"HTML",fieldname:"filter_area"}],e=this;this.dialog=new frappe.ui.Dialog({title:__("Set Filters for {0}",[__(this.document_type)]),fields:t,primary_action:function(){let i=e.quick_list_filter,n=e.filter_group.get_filters();e.quick_list_filter=frappe.utils.get_filter_as_json(n),this.hide(),i!=e.quick_list_filter&&(e.body.empty(),e.set_footer(),e.set_body())},primary_action_label:__("Set")}),this.dialog.show(),this.setup_filter(this.document_type)}render_loading_state(){this.body.empty(),this.loading=$(`<div class="list-loading-state text-muted">${__("Loading...")}</div>`),this.loading.appendTo(this.body)}render_no_data_state(){this.loading=$(`<div class="list-no-data-state text-muted">${__("No Data...")}</div>`),this.loading.appendTo(this.body)}setup_quick_list_item(t){let e=frappe.get_indicator(t,this.document_type),i=$(`
			<div class="quick-list-item">
				<div class="ellipsis left">
					<div class="ellipsis title"
						title="${strip_html(t[this.title_field_name])}">
						${strip_html(t[this.title_field_name])}
					</div>
					<div class="timestamp text-muted">
						${frappe.datetime.prettyDate(t.modified)}
					</div>
				</div>
			</div>
		`);return e&&$(`
				<div class="status indicator-pill ${e[1]} ellipsis">
					${__(e[0])}
				</div>
			`).appendTo(i),$(`<div class="right-arrow">${frappe.utils.icon("right","xs")}</div>`).appendTo(i),i.click(n=>{(n.ctrlKey||n.metaKey)&&(frappe.open_in_new_tab=!0),frappe.set_route(`${frappe.utils.get_form_link(this.document_type,t.name)}`)}),i}set_body(){this.widget.addClass("quick-list-widget-box"),this.render_loading_state(),frappe.model.with_doctype(this.document_type,()=>{let t=["name"];if(!this.title_field_name){let n=frappe.get_meta(this.document_type);this.title_field_name=n&&n.title_field||"name"}if(this.title_field_name&&this.title_field_name!="name"&&t.push(this.title_field_name),this.has_status_field=frappe.meta.has_field(this.document_type,"status"),this.has_status_field){t.push("status"),t.push("docstatus");let n=frappe.workflow.get_state_fieldname(this.document_type);n&&t.push(n)}t.push("modified");let e=frappe.utils.get_filter_from_json(this.quick_list_filter),i={method:"frappe.desk.reportview.get",args:{doctype:this.document_type,fields:t,filters:e,order_by:"modified desc",start:0,page_length:4}};frappe.call(i).then(n=>{if(!n.message)return;let o=n.message;if(this.body.empty(),o=Array.isArray(o)?o:frappe.utils.dict(o.keys,o.values),!o.length){this.render_no_data_state();return}this.quick_list=o.map(a=>this.setup_quick_list_item(a)),this.quick_list.forEach(a=>a.appendTo(this.body))})})}set_footer(){this.footer.empty();let t=frappe.utils.get_filter_from_json(this.quick_list_filter),e=frappe.utils.generate_route({type:"doctype",name:this.document_type});this.see_all_button=$(`
			<div class="see-all btn btn-xs">${__("View List")}</div>
		`).appendTo(this.footer),this.see_all_button.click(i=>{(i.ctrlKey||i.metaKey)&&(frappe.open_in_new_tab=!0),t&&(frappe.route_options=t),frappe.set_route(e)})}};frappe.provide("frappe.widget");frappe.widget.widget_factory={chart:xn,base:Ft,shortcut:Cn,links:Sn,onboarding:Tn,number_card:An,quick_list:On};frappe.widget.make_widget=r=>{let t=frappe.widget.widget_factory[r.widget_type];if(t)return new t(r);console.warn("Invalid Widget Name: "+r.widget_type)};var Go=class{constructor(t){Object.assign(this,t),this.widgets_list=[],this.widgets_dict={},this.widget_order=[],this.make()}make(){this.make_container(),this.title?this.set_title():this.title_area.remove(),this.widgets&&this.make_widgets()}make_container(){let t=$(`<div class="widget-group ${this.class_name||""}">
				<div class="widget-group-head">
					<div class="widget-group-title"></div>
					<div class="widget-group-control"></div>
				</div>
				<div class="widget-group-body grid-col-${this.columns}">
				</div>
			</div>`);this.widget_area=t,this.hidden&&this.widget_area.hide(),this.title_area=t.find(".widget-group-title"),this.control_area=t.find(".widget-group-control"),this.body=t.find(".widget-group-body"),!this.widgets.length&&this.widget_area.hide(),t.appendTo(this.container)}set_title(){this.title_area[0].innerText=this.title}make_widgets(){this.body.empty(),this.widgets.forEach(t=>{this.add_widget(t)})}add_widget(t){let e=frappe.widget.make_widget(Ht(lt({},t),{widget_type:this.type,container:this.body,height:this.height||null,options:Ht(lt({},this.options),{on_delete:i=>this.on_delete(i)})}));return this.widgets_list.push(e),this.widgets_dict[t.name]=e,e}remove_widget(t){t.widget.remove(),this.widgets_list.filter(e=>{if(e.name==t.name)return!1}),delete this.widgets_dict[t.name]}customize(){this.hidden||this.widget_area.show(),this.widgets_list.forEach(t=>{t.customize(this.options)}),this.options.allow_create&&this.setup_new_widget(),this.options.allow_sorting&&this.setup_sortable()}setup_new_widget(){let t=this.options&&this.options.max_widget_count||Number.POSITIVE_INFINITY;this.widgets_list.length<t&&(this.new_widget=new En({container:this.body,type:this.type,custom_dialog:this.custom_dialog,default_values:this.default_values,on_create:e=>{this.new_widget.delete(),delete this.new_widget,e.in_customize_mode=1,this.add_widget(e).customize(this.options),this.widgets_list.length<t&&this.setup_new_widget()}}))}on_delete(t,e){this.widgets_list=this.widgets_list.filter(i=>t!=i.name),delete this.widgets_dict[t],this.update_widget_order(),!this.new_widget&&e&&this.setup_new_widget()}update_widget_order(){this.widget_order=[],this.body.children().each((t,e)=>{let i=e.dataset.widgetName;i&&this.widget_order.push(i)})}setup_sortable(){let t=this.body[0];this.sortable=new Sortable(t,{animation:150,handle:".drag-handle",onEnd:()=>this.update_widget_order()})}get_widget_config(){this.update_widget_order();let t={};return this.widgets_list.forEach(e=>{let i=e.get_config(),n=i.docname?i.docname:i.name;t[n]=i}),{order:this.widget_order,widgets:t}}},Qd=class{constructor(t){Object.assign(this,t),this.widgets_list=[],this.widgets_dict={},this.make()}make(){this.add_widget(this.widgets)}add_widget(t){let e=frappe.widget.make_widget(Ht(lt({},t),{widget_type:this.type,container:this.container,height:this.height||null,options:Ht(lt({},this.options),{on_delete:()=>this.on_delete(),on_edit:()=>this.on_edit(e)})}));return this.widgets_list.push(e),this.widgets_dict[t.name]=e,e}on_delete(){this.api.blocks.delete()}on_edit(t){this.block.call("on_edit",t)}customize(){this.widgets_list.forEach(t=>{t.customize(this.options)})}};frappe.widget.WidgetGroup=Go;frappe.widget.SingleWidgetGroup=Qd;frappe.templates.sort_selector=`<div class="sort-selector">
	<div class="btn-group">
		<button class="btn btn-default btn-sm btn-order"
			data-value="{{ sort_order }}"
			title="{{ sort_order==="desc" ? __("descending") : __("ascending") }}">
			<span class="sort-order">
				<svg class="icon icon-sm">
					<use href="#icon-{{ sort_order==="desc" ? "sort-descending" : "sort-ascending" }}"></use>
				</svg>
			</span>
		</button>
		<button type="button" class="btn btn-default btn-sm sort-selector-button" data-toggle="dropdown">
			<span class="dropdown-text">{{ __(sort_by_label) }}</span>
			<ul class="dropdown-menu dropdown-menu-right">
				{% for value in options %}
				<li>
					<a class="dropdown-item option" data-value="{{ value.fieldname }}">
						{{ __(value.label) }}
					</a>
				</li>
				{% endfor %}
			</ul>
		</button>
	</div>
</div>
`;frappe.ui.SortSelector=class{constructor(t){$.extend(this,t),this.labels={},this.make()}make(){this.prepare_args(),this.parent.find(".sort-selector").remove(),this.wrapper=$(frappe.render_template("sort_selector",this.args)).appendTo(this.parent),this.bind_events()}bind_events(){var t=this;this.wrapper.find(".btn-order").on("click",function(){let e=$(this),i=$(this).attr("data-value")==="desc"?"asc":"desc",n=$(this).attr("data-value")==="desc"?__("ascending"):__("descending");e.attr("data-value",i),e.attr("title",n),t.sort_order=i;let o=i==="asc"?"sort-ascending":"sort-descending";e.find(".sort-order").html(frappe.utils.icon(o,"sm")),(t.onchange||t.change)(t.sort_by,t.sort_order)}),this.wrapper.find(".dropdown-menu a.option").on("click",function(){t.sort_by=$(this).attr("data-value"),t.wrapper.find(".dropdown-text").html($(this).html()),(t.onchange||t.change)(t.sort_by,t.sort_order)})}prepare_args(){var t=this;if(this.args||(this.args={}),this.args&&typeof this.args=="string"){var e=this.args;this.args={},e.includes("`.`")&&(e=e.split(".")[1]);var i=e.split(" ");if(i.length===2){var n=strip(i[0],"`");this.args.sort_by=n,this.args.sort_order=i[1]}}this.args.options&&this.args.options.forEach(function(o){t.labels[o.fieldname]=o.label}),this.setup_from_doctype(),this.args.sort_by&&!this.args.sort_by_label&&this.args.options.every(function(o){return o.fieldname===t.args.sort_by?(t.args.sort_by_label=o.label,!1):!0})}setup_from_doctype(){var t=this,e=frappe.get_meta(this.doctype);if(!!e){var{meta_sort_field:i,meta_sort_order:n}=this.get_meta_sort_field();if(this.args.sort_by||(i?(this.args.sort_by=i,this.args.sort_order=n):(this.args.sort_by="modified",this.args.sort_order="desc")),this.args.sort_by_label||(this.args.sort_by_label=this.get_label(this.args.sort_by)),!this.args.options){var o=[{fieldname:"modified"},{fieldname:"name"},{fieldname:"creation"},{fieldname:"idx"}];e.title_field&&o.splice(1,0,{fieldname:e.title_field}),i&&o.splice(1,0,{fieldname:i}),e.fields.forEach(function(a){(a.mandatory||a.bold||a.in_list_view||a.reqd)&&frappe.model.is_value_type(a.fieldtype)&&frappe.perm.has_perm(t.doctype,a.permlevel,"read")&&o.push({fieldname:a.fieldname,label:a.label})}),o.forEach(a=>{a.label||(a.label=t.get_label(a.fieldname))}),this.args.options=o.uniqBy(a=>a.fieldname)}this.sort_by=this.args.sort_by,this.sort_order=this.args.sort_order}}get_meta_sort_field(){var t=frappe.get_meta(this.doctype);if(!t)return{meta_sort_field:null,meta_sort_order:null};if(t.sort_field&&t.sort_field.includes(",")){var e=t.sort_field.split(",")[0].split(" ");return{meta_sort_field:e[0],meta_sort_order:e[1]}}else return{meta_sort_field:t.sort_field||"modified",meta_sort_order:t.sort_order?t.sort_order.toLowerCase():""}}get_label(t){return t==="idx"?__("Most Used"):this.labels[t]||frappe.meta.get_label(this.doctype,t)}get_sql_string(){return"`tab"+this.doctype+"`.`"+this.sort_by+"` "+this.sort_order}};frappe.templates.change_log=`{% for (var i=0, l=change_log.length; i < l; i++) {
    var app_info = change_log[i]; %}
	{% if (i > 0) { %} <hr> {% } %}
	<div class="text-left app-change-log">
		<h2 style="margin-top: 10px;">
            {{ app_info.title }}
			<small>{{ __("updated to {0}", [app_info.version]) }}</small>
		</h2>
		<div class="app-change-log-body">
		{% for (var x=0, y=app_info.change_log.length; x < y; x++) {
            var version_info = app_info.change_log[x];
            if(version_info) { %}
    			<p>{{ frappe.markdown(version_info[1]) }}</p>
		    {% }
        } %}
    	</div>
	</div>
{% } %}
`;frappe.templates.workspace_loading_skeleton=`<div class="workspace-skeleton">
	<div class="widget-group">
		<div class="widget-group-head skeleton-header">
			<div class="widget-group-title skeleton-card"></div>
		</div>
		<div class="widget-group-body grid-col-3">
			<div class="widget shortcut-widget-box skeleton-card"></div>
			<div class="widget shortcut-widget-box skeleton-card"></div>
			<div class="widget shortcut-widget-box skeleton-card"></div>
		</div>
	</div>
	<div class="widget-group skeleton-body">
		<div class="widget-group-head skeleton-header">
			<div class="widget-group-title skeleton-card"></div>
		</div>
		<div class="widget-group-body grid-col-3">
			<div class="widget links-widget-box skeleton-card"></div>
			<div class="widget links-widget-box skeleton-card"></div>
			<div class="widget links-widget-box skeleton-card"></div>
			<div class="widget links-widget-box skeleton-card"></div>
			<div class="widget links-widget-box skeleton-card"></div>
		</div>
	</div>
</div>
`;frappe.templates.workspace_sidebar_loading_skeleton=`<div class="workspace-sidebar-skeleton">
	<div class="widget-group-body">
		<div class="widget sidebar-box skeleton-card"></div>
		<div class="widget sidebar-box child skeleton-card"></div>
		<div class="widget sidebar-box child skeleton-card"></div>
		<div class="widget sidebar-box skeleton-card"></div>
	</div>
	<div class="widget-group-body">
		<div class="widget sidebar-box skeleton-card"></div>
		<div class="widget sidebar-box skeleton-card"></div>
		<div class="widget sidebar-box skeleton-card"></div>
		<div class="widget sidebar-box child skeleton-card"></div>
		<div class="widget sidebar-box child skeleton-card"></div>
		<div class="widget sidebar-box child skeleton-card"></div>
		<div class="widget sidebar-box child skeleton-card"></div>
		<div class="widget sidebar-box skeleton-card"></div>
		<div class="widget sidebar-box skeleton-card"></div>
		<div class="widget sidebar-box skeleton-card"></div>
		<div class="widget sidebar-box skeleton-card"></div>
		<div class="widget sidebar-box skeleton-card"></div>
	</div>
</div>`;frappe.start_app=function(){!frappe.Application||(frappe.assets.check(),frappe.provide("frappe.app"),frappe.provide("frappe.desk"),frappe.app=new frappe.Application)};$(document).ready(function(){frappe.utils.supportsES6||frappe.msgprint({indicator:"red",title:__("Browser not supported"),message:__("Some of the features might not work in your browser. Please update your browser to the latest version.")}),frappe.start_app()});frappe.Application=class{constructor(){this.startup()}startup(){frappe.socketio.init(),frappe.model.init(),this.setup_frappe_vue(),this.load_bootinfo(),this.load_user_permissions(),this.make_nav_bar(),this.set_favicon(),this.setup_analytics(),this.set_fullwidth_if_enabled(),this.add_browser_class(),this.setup_energy_point_listeners(),this.setup_copy_doc_listener(),frappe.ui.keys.setup(),frappe.ui.keys.add_shortcut({shortcut:"shift+ctrl+g",description:__("Switch Theme"),action:()=>{frappe.theme_switcher&&frappe.theme_switcher.dialog.is_visible?frappe.theme_switcher.hide():(frappe.theme_switcher=new frappe.ui.ThemeSwitcher,frappe.theme_switcher.show())}}),frappe.ui.add_system_theme_switch_listener();let t=document.documentElement;if(new MutationObserver(()=>{frappe.ui.set_theme()}).observe(t,{attributes:!0,attributeFilter:["data-theme-mode"]}),frappe.ui.set_theme(),this.make_page_container(),this.set_route(),$(document).trigger("startup"),$(document).trigger("app_ready"),frappe.boot.messages&&frappe.msgprint(frappe.boot.messages),frappe.user_roles.includes("System Manager")&&setTimeout(()=>{this.show_change_log(),this.show_update_available()},1e3),!frappe.boot.developer_mode){let o=__("Using this console may allow attackers to impersonate you and steal your information. Do not enter or paste code that you do not understand.");console.log(`%c${o}`,"font-size: large")}if(this.show_notes(),frappe.ui.startup_setup_dialog&&!frappe.boot.setup_complete&&(frappe.ui.startup_setup_dialog.pre_show(),frappe.ui.startup_setup_dialog.show()),frappe.realtime.on("version-update",function(){var o=frappe.msgprint({message:__("The application has been updated to a new version, please refresh this page"),indicator:"green",title:__("Version Updated")});o.set_primary_action(__("Refresh"),function(){location.reload(!0)}),o.get_close_btn().toggle(!1)}),this.setup_build_events(),frappe.sys_defaults.email_user_password){var i=frappe.sys_defaults.email_user_password.split(",");for(var n in i)i[n]===frappe.user.name&&this.set_password(i[n])}this.link_preview=new frappe.ui.LinkPreview,frappe.boot.developer_mode||frappe.user.has_role("System Manager")&&setInterval(function(){frappe.call({method:"frappe.core.doctype.log_settings.log_settings.has_unseen_error_log",args:{user:frappe.session.user},callback:function(o){o.message&&o.message.show_alert&&frappe.show_alert({indicator:"red",message:o.message.message})}})},6e5)}set_route(){frappe.boot&&localStorage.getItem("session_last_route")?(frappe.set_route(localStorage.getItem("session_last_route")),localStorage.removeItem("session_last_route")):frappe.router.route(),frappe.router.on("change",()=>{$(".tooltip").hide()})}setup_frappe_vue(){Vue.prototype.__=window.__,Vue.prototype.frappe=window.frappe}set_password(t){var e=this;frappe.call({method:"frappe.core.doctype.user.user.get_email_awaiting",args:{user:t},callback:function(i){if(i=i.message,i){var n=0;n<i.length&&e.email_password_prompt(i,t,n)}}})}email_password_prompt(t,e,i){var n=this;let o=t[i].email_id,a=new frappe.ui.Dialog({title:__("Password missing in Email Account"),fields:[{fieldname:"password",fieldtype:"Password",label:__("Please enter the password for: <b>{0}</b>",[o],"Email Account"),reqd:1},{fieldname:"submit",fieldtype:"Button",label:__("Submit",null,"Submit password for Email Account")}]});a.get_input("submit").on("click",function(){a.hide();var s=new frappe.ui.Dialog({title:__("Checking one moment"),fields:[{fieldtype:"HTML",fieldname:"checking"}]});s.fields_dict.checking.$wrapper.html('<i class="fa fa-spinner fa-spin fa-4x"></i>'),s.show(),frappe.call({method:"frappe.email.doctype.email_account.email_account.set_email_password",args:{email_account:t[i].email_account,password:a.get_value("password")},callback:function(l){s.hide(),a.hide(),l.message?i+1<t.length&&(i=i+1,n.email_password_prompt(t,e,i)):(frappe.show_alert({message:__("Login Failed please try again"),indicator:"error"},5),n.email_password_prompt(t,e,i))}})}),a.show()}load_bootinfo(){frappe.boot?(this.setup_workspaces(),frappe.model.sync(frappe.boot.docs),this.check_metadata_cache_status(),this.set_globals(),this.sync_pages(),frappe.router.setup(),this.setup_moment(),frappe.boot.print_css&&frappe.dom.set_style(frappe.boot.print_css,"print-style"),frappe.user.name=frappe.boot.user.name,frappe.router.setup()):this.set_as_guest()}setup_workspaces(){frappe.modules={},frappe.workspaces={};for(let t of frappe.boot.allowed_workspaces||[])frappe.modules[t.module]=t,frappe.workspaces[frappe.router.slug(t.name)]=t}load_user_permissions(){frappe.defaults.update_user_permissions(),frappe.realtime.on("update_user_permissions",frappe.utils.debounce(()=>{frappe.defaults.update_user_permissions()},500))}check_metadata_cache_status(){frappe.boot.metadata_version!=localStorage.metadata_version&&(frappe.assets.clear_local_storage(),frappe.assets.init_local_storage())}set_globals(){frappe.session.user=frappe.boot.user.name,frappe.session.logged_in_user=frappe.boot.user.name,frappe.session.user_email=frappe.boot.user.email,frappe.session.user_fullname=frappe.user_info().fullname,frappe.user_defaults=frappe.boot.user.defaults,frappe.user_roles=frappe.boot.user.roles,frappe.sys_defaults=frappe.boot.sysdefaults,frappe.ui.py_date_format=frappe.boot.sysdefaults.date_format.replace("dd","%d").replace("mm","%m").replace("yyyy","%Y"),frappe.boot.user.last_selected_values={},Object.defineProperties(window,{user:{get:function(){return console.warn("Please use `frappe.session.user` instead of `user`. It will be deprecated soon."),frappe.session.user}},user_fullname:{get:function(){return console.warn("Please use `frappe.session.user_fullname` instead of `user_fullname`. It will be deprecated soon."),frappe.session.user}},user_email:{get:function(){return console.warn("Please use `frappe.session.user_email` instead of `user_email`. It will be deprecated soon."),frappe.session.user_email}},user_defaults:{get:function(){return console.warn("Please use `frappe.user_defaults` instead of `user_defaults`. It will be deprecated soon."),frappe.user_defaults}},roles:{get:function(){return console.warn("Please use `frappe.user_roles` instead of `roles`. It will be deprecated soon."),frappe.user_roles}},sys_defaults:{get:function(){return console.warn("Please use `frappe.sys_defaults` instead of `sys_defaults`. It will be deprecated soon."),frappe.user_roles}}})}sync_pages(){if(localStorage.page_info){frappe.boot.allowed_pages=[];var t=JSON.parse(localStorage.page_info);$.each(frappe.boot.page_info,function(e,i){(!t[e]||t[e].modified!=i.modified)&&delete localStorage["_page:"+e],frappe.boot.allowed_pages.push(e)})}else frappe.boot.allowed_pages=Object.keys(frappe.boot.page_info);localStorage.page_info=JSON.stringify(frappe.boot.page_info)}set_as_guest(){frappe.session.user="Guest",frappe.session.user_email="",frappe.session.user_fullname="Guest",frappe.user_defaults={},frappe.user_roles=["Guest"],frappe.sys_defaults={}}make_page_container(){$("#body").length&&($(".splash").remove(),frappe.temp_container=$("<div id='temp-container' style='display: none;'>").appendTo("body"),frappe.container=new frappe.views.Container)}make_nav_bar(){frappe.boot&&frappe.boot.home_page!=="setup-wizard"&&(frappe.frappe_toolbar=new frappe.ui.toolbar.Toolbar)}logout(){var t=this;return t.logged_out=!0,frappe.call({method:"logout",callback:function(e){e.exc||t.redirect_to_login()}})}handle_session_expired(){if(!frappe.app.session_expired_dialog){var t=new frappe.ui.Dialog({title:__("Session Expired"),keep_open:!0,fields:[{fieldtype:"Password",fieldname:"password",label:__("Please Enter Your Password to Continue")}],onhide:()=>{t.logged_in||frappe.app.redirect_to_login()}});t.get_field("password").disable_password_checks(),t.set_primary_action(__("Login"),()=>{t.set_message(__("Authenticating...")),frappe.call({method:"login",args:{usr:frappe.session.user,pwd:t.get_values().password},callback:e=>{e.message==="Logged In"&&(t.logged_in=!0,$(".modal-backdrop").css({opacity:"","background-color":"#334143"})),t.hide()},statusCode:()=>{t.hide()}})}),frappe.app.session_expired_dialog=t}frappe.app.session_expired_dialog.display||(frappe.app.session_expired_dialog.show(),$(".modal-backdrop").css({opacity:1,"background-color":"#4B4C9D"}))}redirect_to_login(){window.location.href="/"}set_favicon(){var t=$('link[type="image/x-icon"]').remove().attr("href");$('<link rel="shortcut icon" href="'+t+'" type="image/x-icon">').appendTo("head"),$('<link rel="icon" href="'+t+'" type="image/x-icon">').appendTo("head")}trigger_primary_action(){$(document.activeElement).blur(),setTimeout(()=>{window.cur_dialog&&cur_dialog.display?cur_dialog.get_primary_btn().trigger("click"):cur_frm&&cur_frm.page.btn_primary.is(":visible")?cur_frm.page.btn_primary.trigger("click"):frappe.container.page.save_action&&frappe.container.page.save_action()},100)}show_change_log(){var t=this;let e=frappe.boot.change_log;if(!(!Array.isArray(e)||!e.length||window.Cypress||cint(frappe.boot.sysdefaults.disable_change_log_notification))){var i=frappe.msgprint({message:frappe.render_template("change_log",{change_log:e}),title:__("Updated To A New Version \u{1F389}"),wide:!0});i.keep_open=!0,i.custom_onhide=function(){frappe.call({method:"frappe.utils.change_log.update_last_known_versions"}),t.show_notes()}}}show_update_available(){frappe.boot.sysdefaults.disable_system_update_notification||frappe.call({method:"frappe.utils.change_log.show_update_popup"})}setup_analytics(){window.mixpanel&&(window.mixpanel.identify(frappe.session.user),window.mixpanel.people.set({$first_name:frappe.boot.user.first_name,$last_name:frappe.boot.user.last_name,$created:frappe.boot.user.creation,$email:frappe.session.user}))}add_browser_class(){$("html").addClass(frappe.utils.get_browser().name.toLowerCase())}set_fullwidth_if_enabled(){frappe.ui.toolbar.set_fullwidth_if_enabled()}show_notes(){var t=this;frappe.boot.notes.length&&frappe.boot.notes.forEach(function(e){if(!e.seen||e.notify_on_every_login){var i=frappe.msgprint({message:e.content,title:e.title});i.keep_open=!0,i.custom_onhide=function(){e.seen=!0,e.notify_on_every_login||frappe.call({method:"frappe.desk.doctype.note.note.mark_as_seen",args:{note:e.name}}),t.show_notes()}}})}setup_build_events(){frappe.boot.developer_mode&&frappe.require("build_events.bundle.js")}setup_energy_point_listeners(){frappe.realtime.on("energy_point_alert",t=>{frappe.show_alert(t)})}setup_copy_doc_listener(){$("body").on("paste",t=>{try{let e=frappe.utils.get_clipboard_data(t),i=JSON.parse(e);if(i.doctype){t.preventDefault();let n=frappe.utils.sleep;frappe.dom.freeze(__("Creating {0}",[i.doctype])+"..."),n(500).then(()=>{let o=frappe.model.with_doctype(i.doctype,()=>{let a=frappe.model.copy_doc(i);a.__newname=i.name,delete i.name,a.idx=null,a.__run_link_triggers=!1,frappe.set_route("Form",a.doctype,a.name),frappe.dom.unfreeze()});o&&o.fail(frappe.dom.unfreeze)})}}catch(e){}})}setup_moment(){moment.updateLocale("en",{week:{dow:frappe.datetime.get_first_day_of_the_week_index()}}),moment.locale("en"),moment.user_utc_offset=moment().utcOffset(),frappe.boot.timezone_info&&moment.tz.add(frappe.boot.timezone_info)}};frappe.get_module=function(r,t){var e=frappe.modules[r]||t;if(!!e)return e._setup||(e.label||(e.label=r),e._label||(e._label=__(e.label)),e._setup=!0),e};frappe.provide("frappe.utils");function E0(r){return ef()[r]||""}function A0(r){return r.includes("?")?r.slice(r.indexOf("?")+1):""}function ef(r){var t={};r||(r=location.search.substring(1));for(var e=r.split("&"),i=0,n=e.length;i<n;i++){var o=e[i].split(/=(.+)/),a=o[0];if(!!a){var s=o[1];if(typeof s=="string"){s=s.replace(/\+/g,"%20");try{s=decodeURIComponent(s)}catch(l){}}a in t?(typeof t[a]=="undefined"?t[a]=[]:typeof t[a]=="string"&&(t[a]=[t[a]]),t[a].push(s)):t[a]=s}}return t}function O0(r,t=!0){let e=[];for(let i in r){let n=r[i];n===void 0||n===""||n===null||(typeof n=="object"&&(n=JSON.stringify(n)),t&&(i=encodeURIComponent(i),n=encodeURIComponent(n)),e.push(`${i}=${n}`))}return"?"+e.join("&")}Object.assign(frappe.utils,{get_url_arg:E0,get_query_string:A0,get_query_params:ef,make_query_string:O0});frappe.provide("frappe.energy_points");Object.assign(frappe.energy_points,{get_points(r){return`<span class="bold" style="color: ${r>=0?"#45A163":"#e42121"}">
			${r>0?"+":""}${r}
		</span>`},format_form_log(r){let t="<span>&nbsp;-&nbsp;</span>";return`<span>
			<!--${this.get_points(r.points)}&nbsp;-->
			<a href="/app/energy-point-log/${r.name}">${this.get_form_log_message(r)}</a>
			${r.reason?t+r.reason:""}
		</span>`},format_history_log(r){let t="<span>&nbsp;-&nbsp;</span>",e=frappe.utils.get_form_link(r.reference_doctype,r.reference_name);return`<div class="flex">
			<span class="${r.points>=0?"green":"red"} mr-2">
				${this.get_points(r.points)}
			</span>
			<a href="${e}" class="text-muted">${this.get_history_log_message(r)}</a>
			${r.reason?t+r.reason:""}
			${t+frappe.datetime.comment_when(r.creation)}
		</div>`},get_history_log_message(r){let t=frappe.user.full_name(r.owner).bold(),e=r.reference_name;return r.type==="Appreciation"?__("{0} appreciated on {1}",[t,e]):r.type==="Criticism"?__("{0} criticized on {1}",[t,e]):r.type==="Revert"?__("{0} reverted {1}",[t,r.revert_of]):__("via automatic rule {0} on {1}",[r.rule.bold(),e])},get_form_log_message(r){let t=frappe.user.full_name(r.owner).bold(),e=frappe.user.full_name(r.user).bold();return r.type==="Appreciation"?__("{0} appreciated {1}",[t,e]):r.type==="Criticism"?__("{0} criticized {1}",[t,e]):r.type==="Revert"?__("{0} reverted {1}",[t,r.revert_of]):__("gained by {0} via automatic rule {1}",[e,r.rule.bold()])}});var u4=Vt(tf());function In(r){return(In=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(r)}function pr(r,t){if(!(r instanceof t))throw new TypeError("Cannot call a class as a function")}function rf(r,t){for(var e=0;e<t.length;e++){var i=t[e];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(r,i.key,i)}}function vr(r,t,e){return t&&rf(r.prototype,t),e&&rf(r,e),r}function Gr(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");r.prototype=Object.create(t&&t.prototype,{constructor:{value:r,writable:!0,configurable:!0}}),t&&bf(r,t)}function Wt(r){return(Wt=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(r)}function bf(r,t){return(bf=Object.setPrototypeOf||function(e,i){return e.__proto__=i,e})(r,t)}function M0(r,t){return!t||typeof t!="object"&&typeof t!="function"?function(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(r):t}function Xr(r){var t=function(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var e,i=Wt(r);if(t){var n=Wt(this).constructor;e=Reflect.construct(i,arguments,n)}else e=i.apply(this,arguments);return M0(this,e)}}function cr(r,t,e){return(cr=typeof Reflect!="undefined"&&Reflect.get?Reflect.get:function(i,n,o){var a=function(l,d){for(;!Object.prototype.hasOwnProperty.call(l,d)&&(l=Wt(l))!==null;);return l}(i,n);if(a){var s=Object.getOwnPropertyDescriptor(a,n);return s.get?s.get.call(o):s.value}})(r,t,e||r)}function Rt(r,t){return function(e){if(Array.isArray(e))return e}(r)||function(e,i){if(!(typeof Symbol=="undefined"||!(Symbol.iterator in Object(e)))){var n=[],o=!0,a=!1,s=void 0;try{for(var l,d=e[Symbol.iterator]();!(o=(l=d.next()).done)&&(n.push(l.value),!i||n.length!==i);o=!0);}catch(u){a=!0,s=u}finally{try{o||d.return==null||d.return()}finally{if(a)throw s}}return n}}(r,t)||yf(r,t)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function ur(r){return function(t){if(Array.isArray(t))return Qo(t)}(r)||function(t){if(typeof Symbol!="undefined"&&Symbol.iterator in Object(t))return Array.from(t)}(r)||yf(r)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function yf(r,t){if(r){if(typeof r=="string")return Qo(r,t);var e=Object.prototype.toString.call(r).slice(8,-1);return e==="Object"&&r.constructor&&(e=r.constructor.name),e==="Map"||e==="Set"?Array.from(r):e==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e)?Qo(r,t):void 0}}function Qo(r,t){(t==null||t>r.length)&&(t=r.length);for(var e=0,i=new Array(t);e<t;e++)i[e]=r[e];return i}function kr(r,t){return typeof r=="string"?(t||document).querySelector(r):r||null}function Ln(r){var t=r.getBoundingClientRect();return{top:t.top+(document.documentElement.scrollTop||document.body.scrollTop),left:t.left+(document.documentElement.scrollLeft||document.body.scrollLeft)}}function $0(r){return r.offsetParent===null}function L0(r){var t=r.getBoundingClientRect();return t.top>=0&&t.left>=0&&t.bottom<=(window.innerHeight||document.documentElement.clientHeight)&&t.right<=(window.innerWidth||document.documentElement.clientWidth)}(function(r,t){t===void 0&&(t={});var e=t.insertAt;if(r&&typeof document!="undefined"){var i=document.head||document.getElementsByTagName("head")[0],n=document.createElement("style");n.type="text/css",e==="top"&&i.firstChild?i.insertBefore(n,i.firstChild):i.appendChild(n),n.styleSheet?n.styleSheet.cssText=r:n.appendChild(document.createTextNode(r))}})(`:root {
  --charts-label-color: #313b44;
  --charts-axis-line-color: #f4f5f6;
  --charts-tooltip-title: var(--charts-label-color);
  --charts-tooltip-label: var(--charts-label-color);
  --charts-tooltip-value: #192734;
  --charts-tooltip-bg: #ffffff;
  --charts-stroke-width: 2px;
  --charts-dataset-circle-stroke: #ffffff;
  --charts-dataset-circle-stroke-width: var(--charts-stroke-width);
  --charts-legend-label: var(--charts-label-color);
  --charts-legend-value: var(--charts-label-color); }

.chart-container {
  position: relative;
  /* for absolutely positioned tooltip */
  font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", "Roboto", "Oxygen", "Ubuntu", "Cantarell", "Fira Sans", "Droid Sans", "Helvetica Neue", sans-serif; }
  .chart-container .axis,
  .chart-container .chart-label {
    fill: var(--charts-label-color); }
    .chart-container .axis line,
    .chart-container .chart-label line {
      stroke: var(--charts-axis-line-color); }
  .chart-container .dataset-units circle {
    stroke: var(--charts-dataset-circle-stroke);
    stroke-width: var(--charts-dataset-circle-stroke-width); }
  .chart-container .dataset-units path {
    fill: none;
    stroke-opacity: 1;
    stroke-width: var(--charts-stroke-width); }
  .chart-container .dataset-path {
    stroke-width: var(--charts-stroke-width); }
  .chart-container .path-group path {
    fill: none;
    stroke-opacity: 1;
    stroke-width: var(--charts-stroke-width); }
  .chart-container line.dashed {
    stroke-dasharray: 5, 3; }
  .chart-container .axis-line .specific-value {
    text-anchor: start; }
  .chart-container .axis-line .y-line {
    text-anchor: end; }
  .chart-container .axis-line .x-line {
    text-anchor: middle; }
  .chart-container .legend-dataset-label {
    fill: var(--charts-legend-label);
    font-weight: 600; }
  .chart-container .legend-dataset-value {
    fill: var(--charts-legend-value); }

.graph-svg-tip {
  position: absolute;
  z-index: 99999;
  padding: 10px;
  font-size: 12px;
  text-align: center;
  background: var(--charts-tooltip-bg);
  box-shadow: 0px 1px 4px rgba(17, 43, 66, 0.1), 0px 2px 6px rgba(17, 43, 66, 0.08), 0px 40px 30px -30px rgba(17, 43, 66, 0.1);
  border-radius: 6px; }
  .graph-svg-tip ul {
    padding-left: 0;
    display: flex; }
  .graph-svg-tip ol {
    padding-left: 0;
    display: flex; }
  .graph-svg-tip ul.data-point-list li {
    min-width: 90px;
    font-weight: 600; }
  .graph-svg-tip .svg-pointer {
    position: absolute;
    height: 12px;
    width: 12px;
    border-radius: 2px;
    background: var(--charts-tooltip-bg);
    transform: rotate(45deg);
    margin-top: -7px;
    margin-left: -6px; }
  .graph-svg-tip.comparison {
    text-align: left;
    padding: 0px;
    pointer-events: none; }
    .graph-svg-tip.comparison .title {
      display: block;
      padding: 16px;
      margin: 0;
      color: var(--charts-tooltip-title);
      font-weight: 600;
      line-height: 1;
      pointer-events: none;
      text-transform: uppercase; }
      .graph-svg-tip.comparison .title strong {
        color: var(--charts-tooltip-value); }
    .graph-svg-tip.comparison ul {
      margin: 0;
      white-space: nowrap;
      list-style: none; }
      .graph-svg-tip.comparison ul.tooltip-grid {
        display: grid;
        grid-template-columns: repeat(4, minmax(0, 1fr));
        gap: 5px; }
    .graph-svg-tip.comparison li {
      display: inline-block;
      display: flex;
      flex-direction: row;
      font-weight: 600;
      line-height: 1;
      padding: 5px 15px 15px 15px; }
      .graph-svg-tip.comparison li .tooltip-legend {
        height: 12px;
        width: 12px;
        margin-right: 8px;
        border-radius: 2px; }
      .graph-svg-tip.comparison li .tooltip-label {
        margin-top: 4px;
        font-size: 11px;
        line-height: 1.25;
        max-width: 150px;
        white-space: normal;
        color: var(--charts-tooltip-label); }
      .graph-svg-tip.comparison li .tooltip-value {
        color: var(--charts-tooltip-value); }
`),kr.create=function(r,t){var e=document.createElement(r);for(var i in t){var n=t[i];if(i==="inside")kr(n).appendChild(e);else if(i==="around"){var o=kr(n);o.parentNode.insertBefore(e,o),e.appendChild(o)}else i==="styles"?In(n)==="object"&&Object.keys(n).map(function(a){e.style[a]=n[a]}):i in e?e[i]=n:e.setAttribute(i,n)}return e};var B0={margins:{top:10,bottom:10,left:20,right:20},paddings:{top:20,bottom:40,left:30,right:10},baseHeight:240,titleHeight:20,legendHeight:30,titleFontSize:12};function Bn(r){return r.titleHeight+r.margins.top+r.paddings.top}function $n(r){return r.margins.left+r.paddings.left}function aa(r){return r.margins.top+r.margins.bottom+r.paddings.top+r.paddings.bottom+r.titleHeight+r.legendHeight}function ea(r){return r.margins.left+r.margins.right+r.paddings.left+r.paddings.right}var wi=["pink","blue","green","grey","red","yellow","purple","teal","cyan","orange"],I0={bar:wi,line:wi,pie:wi,percentage:wi,heatmap:["#ebedf0","#c6e48b","#7bc96f","#239a3b","#196127"],donut:wi},nf=Math.PI/180,R0=function(){function r(t){var e=t.parent,i=e===void 0?null:e,n=t.colors,o=n===void 0?[]:n;pr(this,r),this.parent=i,this.colors=o,this.titleName="",this.titleValue="",this.listValues=[],this.titleValueFirst=0,this.x=0,this.y=0,this.top=0,this.left=0,this.setup()}return vr(r,[{key:"setup",value:function(){this.makeTooltip()}},{key:"refresh",value:function(){this.fill(),this.calcPosition()}},{key:"makeTooltip",value:function(){var t=this;this.container=kr.create("div",{inside:this.parent,className:"graph-svg-tip comparison",innerHTML:`<span class="title"></span>
				<ul class="data-point-list"></ul>
				<div class="svg-pointer"></div>`}),this.hideTip(),this.title=this.container.querySelector(".title"),this.list=this.container.querySelector(".data-point-list"),this.dataPointList=this.container.querySelector(".data-point-list"),this.parent.addEventListener("mouseleave",function(){t.hideTip()})}},{key:"fill",value:function(){var t,e=this;this.index&&this.container.setAttribute("data-point-index",this.index),t=this.titleValueFirst?"<strong>".concat(this.titleValue,"</strong>").concat(this.titleName):"".concat(this.titleName,"<strong>").concat(this.titleValue,"</strong>"),this.listValues.length>4?this.list.classList.add("tooltip-grid"):this.list.classList.remove("tooltip-grid"),this.title.innerHTML=t,this.dataPointList.innerHTML="",this.listValues.map(function(i,n){var o=e.colors[n]||"black",a=i.formatted===0||i.formatted?i.formatted:i.value,s=kr.create("li",{innerHTML:'<div class="tooltip-legend" style="background: '.concat(o,`;"></div>
					<div>
						<div class="tooltip-value">`).concat(a===0||a?a:"",`</div>
						<div class="tooltip-label">`).concat(i.title?i.title:"",`</div>
					</div>`)});e.dataPointList.appendChild(s)})}},{key:"calcPosition",value:function(){var t=this.container.offsetWidth;this.top=this.y-this.container.offsetHeight-7.48,this.left=this.x-t/2;var e=this.parent.offsetWidth-t,i=this.container.querySelector(".svg-pointer");if(this.left<0)i.style.left="calc(50% - ".concat(-1*this.left,"px)"),this.left=0;else if(this.left>e){var n=this.left-e,o="calc(50% + ".concat(n,"px)");i.style.left=o,this.left=e}else i.style.left="50%"}},{key:"setValues",value:function(t,e){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:[],o=arguments.length>4&&arguments[4]!==void 0?arguments[4]:-1;this.titleName=i.name,this.titleValue=i.value,this.listValues=n,this.x=t,this.y=e,this.titleValueFirst=i.valueFirst||0,this.index=o,this.refresh()}},{key:"hideTip",value:function(){this.container.style.top="0px",this.container.style.left="0px",this.container.style.opacity="0"}},{key:"showTip",value:function(){this.container.style.top=this.top+"px",this.container.style.left=this.left+"px",this.container.style.opacity="1"}}]),r}();function wf(r){return parseFloat(r.toFixed(2))}function ta(r,t,e){var i=arguments.length>3&&arguments[3]!==void 0&&arguments[3];e||(e=i?r[0]:r[r.length-1]);var n=new Array(Math.abs(t)).fill(e);return r=i?n.concat(r):r.concat(n)}function of(r,t){return(r+"").length*t}function Xo(r,t){return{x:Math.sin(r*nf)*t,y:Math.cos(r*nf)*t}}function Mr(r){var t=arguments.length>1&&arguments[1]!==void 0&&arguments[1];return!Number.isNaN(r)&&r!==void 0&&!!Number.isFinite(r)&&!(t&&r<0)}function kf(r){return Number(Math.round(r+"e4")+"e-4")}function ra(r){var t,e,i;if(r instanceof Date)return new Date(r.getTime());if(In(r)!=="object"||r===null)return r;for(i in t=Array.isArray(r)?[]:{},r)e=r[i],t[i]=ra(e);return t}function af(r,t){var e,i;return r<=t?(e=t-r,i=r):(e=r-t,i=t),[e,i]}function Gt(r,t){var e=arguments.length>2&&arguments[2]!==void 0?arguments[2]:t.length-r.length;return e>0?r=ta(r,e):t=ta(t,e),[r,t]}function P0(r,t){if(r)return r.length>t?r.slice(0,t-3)+"...":r}function N0(r){var t;if(typeof r=="number")t=r;else if(typeof r=="string"&&(t=Number(r),Number.isNaN(t)))return r;var e=Math.floor(Math.log10(Math.abs(t)));if(e<=2)return t;var i=Math.floor(e/3),n=Math.pow(10,e-3*i)*+(t/Math.pow(10,e)).toFixed(1);return Math.round(100*n)/100+["","K","M","B","T"][i]}function sf(r,t){for(var e=[],i=(Math.min(r.length,t.length),0);i<r.length;i++)e.push([r[i],t[i]]);var n=function(o,a,s,l){var d,u,h,p,m=(d=a||o,h=(u=s||o)[0]-d[0],p=u[1]-d[1],{length:Math.sqrt(Math.pow(h,2)+Math.pow(p,2)),angle:Math.atan2(p,h)}),x=m.angle+(l?Math.PI:0),y=.2*m.length;return[o[0]+Math.cos(x)*y,o[1]+Math.sin(x)*y]};return function(o,a){return o.reduce(function(s,l,d,u){return d===0?"".concat(l[0],",").concat(l[1]):"".concat(s," ").concat(a(l,d,u))},"")}(e,function(o,a,s){var l=n(s[a-1],s[a-2],o),d=n(o,s[a-1],s[a+1],!0);return"C ".concat(l[0],",").concat(l[1]," ").concat(d[0],",").concat(d[1]," ").concat(o[0],",").concat(o[1])})}function lf(r,t){return typeof r=="string"?(t||document).querySelector(r):r||null}function ut(r,t){var e=document.createElementNS("http://www.w3.org/2000/svg",r);for(var i in t){var n=t[i];if(i==="inside")lf(n).appendChild(e);else if(i==="around"){var o=lf(n);o.parentNode.insertBefore(e,o),e.appendChild(o)}else i==="styles"?In(n)==="object"&&Object.keys(n).map(function(a){e.style[a]=n[a]}):(i==="className"&&(i="class"),i==="innerHTML"?e.textContent=n:e.setAttribute(i,n))}return e}function j0(r,t){return ut("linearGradient",{inside:r,id:t,x1:0,x2:0,y1:0,y2:1})}function Ko(r,t,e,i){return ut("stop",{inside:r,style:"stop-color: ".concat(e),offset:t,"stop-opacity":i})}function ia(r){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"",e=arguments.length>2&&arguments[2]!==void 0?arguments[2]:void 0,i={className:r,transform:t};return e&&(i.inside=e),ut("g",i)}function Vr(r){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"",e=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"none",i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:"none",n=arguments.length>4&&arguments[4]!==void 0?arguments[4]:2;return ut("path",{className:t,d:r,styles:{stroke:e,fill:i,"stroke-width":n}})}function D0(r,t,e,i){var n=arguments.length>4&&arguments[4]!==void 0?arguments[4]:1,o=arguments.length>5&&arguments[5]!==void 0?arguments[5]:0,a=e.x+r.x,s=e.y+r.y,l=e.x+t.x,d=e.y+t.y;return"M".concat(e.x," ").concat(e.y,`
		L`).concat(a," ").concat(s,`
		A `).concat(i," ").concat(i," 0 ").concat(o," ").concat(n?1:0,`
		`).concat(l," ").concat(d," z")}function F0(r,t,e,i){var n=arguments.length>4&&arguments[4]!==void 0?arguments[4]:1,o=arguments.length>5&&arguments[5]!==void 0?arguments[5]:0,a=e.x+r.x,s=e.y+r.y,l=e.x+t.x,d=2*e.y,u=e.y+t.y;return"M".concat(e.x," ").concat(e.y,`
		L`).concat(a," ").concat(s,`
		A `).concat(i," ").concat(i," 0 ").concat(o," ").concat(n?1:0,`
		`).concat(l," ").concat(d,` z
		L`).concat(a," ").concat(d,`
		A `).concat(i," ").concat(i," 0 ").concat(o," ").concat(n?1:0,`
		`).concat(l," ").concat(u," z")}function z0(r,t,e,i){var n=arguments.length>4&&arguments[4]!==void 0?arguments[4]:1,o=arguments.length>5&&arguments[5]!==void 0?arguments[5]:0,a=e.x+r.x,s=e.y+r.y,l=e.x+t.x,d=e.y+t.y;return"M".concat(a," ").concat(s,`
		A `).concat(i," ").concat(i," 0 ").concat(o," ").concat(n?1:0,`
		`).concat(l," ").concat(d)}function H0(r,t,e,i){var n=arguments.length>4&&arguments[4]!==void 0?arguments[4]:1,o=arguments.length>5&&arguments[5]!==void 0?arguments[5]:0,a=e.x+r.x,s=e.y+r.y,l=e.x+t.x,d=2*i+s,u=e.y+r.y;return"M".concat(a," ").concat(s,`
		A `).concat(i," ").concat(i," 0 ").concat(o," ").concat(n?1:0,`
		`).concat(l," ").concat(d,`
		M`).concat(a," ").concat(d,`
		A `).concat(i," ").concat(i," 0 ").concat(o," ").concat(n?1:0,`
		`).concat(l," ").concat(u)}function cf(r,t){var e=arguments.length>2&&arguments[2]!==void 0&&arguments[2],i="path-fill-gradient-"+t+"-"+(e?"lighter":"default"),n=j0(r,i),o=[1,.6,.2];return e&&(o=[.15,.05,0]),Ko(n,"0%",t,o[0]),Ko(n,"50%",t,o[1]),Ko(n,"100%",t,o[2]),i}function q0(r,t,e){var i=e/2,n=t-i;return"M".concat(r,",0 h").concat(n," q").concat(i,",0 ").concat(i,",").concat(i," q0,").concat(i," -").concat(i,",").concat(i," h-").concat(n," v").concat(e,"z")}function W0(r,t,e){var i=e/2,n=t-i;return"M".concat(r+i,",0 h").concat(n," v").concat(e," h-").concat(n," q-").concat(i,", 0 -").concat(i,",-").concat(i," q0,-").concat(i," ").concat(i,",-").concat(i,"z")}function xf(r,t,e,i,n){var o=arguments.length>5&&arguments[5]!==void 0?arguments[5]:"none",a=arguments.length>6&&arguments[6]!==void 0?arguments[6]:{},s={className:r,x:t,y:e,width:i,height:i,rx:n,fill:o};return Object.keys(a).map(function(l){s[l]=a[l]}),ut("rect",s)}function Cf(r,t,e,i){var n=arguments.length>4&&arguments[4]!==void 0?arguments[4]:"none",o=arguments.length>5?arguments[5]:void 0,a=arguments.length>6?arguments[6]:void 0,s=arguments.length>7&&arguments[7]!==void 0?arguments[7]:null,l=arguments.length>8&&arguments[8]!==void 0&&arguments[8];s||(s=10);var d={className:"legend-dot",x:0,y:4-e,height:e,width:e,rx:i,fill:n},u=ut("text",{className:"legend-dataset-label",x:e,y:0,dx:s+"px",dy:s/3+"px","font-size":1.6*s+"px","text-anchor":"start",innerHTML:o=l?P0(o,18):o}),h=null;a&&(h=ut("text",{className:"legend-dataset-value",x:e,y:20,dx:"10px",dy:10/3+"px","font-size":"12px","text-anchor":"start",innerHTML:a}));var p=ut("g",{transform:"translate(".concat(r,", ").concat(t,")")});return p.appendChild(ut("rect",d)),p.appendChild(u),a&&h&&p.appendChild(h),p}function Si(r,t,e,i){var n=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{},o=n.fontSize||10,a=n.dy!==void 0?n.dy:o/2,s=n.fill||"var(--charts-label-color)",l=n.textAnchor||"start";return ut("text",{className:r,x:t,y:e,dy:a+"px","font-size":o+"px",fill:s,"text-anchor":l,innerHTML:i})}function U0(r,t,e,i){var n=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{},o=ut("line",{className:"line-vertical "+n.className,x1:0,x2:0,y1:e,y2:i,styles:{stroke:n.stroke}}),a=ut("text",{x:0,y:e>i?e+4:e-4-10,dy:"10px","font-size":"10px","text-anchor":"middle",innerHTML:t+""}),s=ut("g",{transform:"translate(".concat(r,", 0)")});return s.appendChild(o),s.appendChild(a),s}function uf(r,t,e,i){var n=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{};n.lineType||(n.lineType=""),n.shortenNumbers&&(t=n.numberFormatter?n.numberFormatter(t):N0(t));var o="line-horizontal "+n.className+(n.lineType==="dashed"?"dashed":""),a=ut("line",{className:o,x1:e,x2:i,y1:0,y2:0,styles:{stroke:n.stroke}}),s=ut("text",{x:e<i?e-4:e+4,y:0,dy:"3px","font-size":"10px","text-anchor":e<i?"end":"start",innerHTML:t+""}),l=ut("g",{transform:"translate(0, ".concat(r,")"),"stroke-opacity":1});return s!==0&&s!=="0"||(l.style.stroke="rgba(27, 31, 35, 0.6)"),l.appendChild(a),l.appendChild(s),l}function df(r,t,e,i){var n=arguments.length>4&&arguments[4]!==void 0?arguments[4]:"",o=arguments.length>5&&arguments[5]!==void 0?arguments[5]:0,a=arguments.length>6&&arguments[6]!==void 0&&arguments[6],s=ut("circle",{style:"fill: ".concat(i,"; ").concat(a?"stroke: ".concat(i):""),"data-point-index":o,cx:r,cy:t,r:e});if((n+="")||n.length){s.setAttribute("cy",0),s.setAttribute("cx",0);var l=ut("text",{className:"data-point-value",x:0,y:0,dy:-5-e+"px","font-size":"10px","text-anchor":"middle",innerHTML:n}),d=ut("g",{"data-point-index":o,transform:"translate(".concat(r,", ").concat(t,")")});return d.appendChild(s),d.appendChild(l),d}return s}var V0={bar:function(r){var t;r.nodeName!=="rect"&&(t=r.getAttribute("transform"),r=r.childNodes[0]);var e=r.cloneNode();return e.style.fill="#000000",e.style.opacity="0.4",t&&e.setAttribute("transform",t),e},dot:function(r){var t;r.nodeName!=="circle"&&(t=r.getAttribute("transform"),r=r.childNodes[0]);var e=r.cloneNode(),i=r.getAttribute("r"),n=r.getAttribute("fill");return e.setAttribute("r",parseInt(i)+4),e.setAttribute("fill",n),e.style.opacity="0.6",t&&e.setAttribute("transform",t),e},heat_square:function(r){var t;r.nodeName!=="circle"&&(t=r.getAttribute("transform"),r=r.childNodes[0]);var e=r.cloneNode(),i=r.getAttribute("r"),n=r.getAttribute("fill");return e.setAttribute("r",parseInt(i)+4),e.setAttribute("fill",n),e.style.opacity="0.6",t&&e.setAttribute("transform",t),e}},Y0={bar:function(r,t){var e;r.nodeName!=="rect"&&(e=r.getAttribute("transform"),r=r.childNodes[0]);var i=["x","y","width","height"];Object.values(r.attributes).filter(function(n){return i.includes(n.name)&&n.specified}).map(function(n){t.setAttribute(n.name,n.nodeValue)}),e&&t.setAttribute("transform",e)},dot:function(r,t){var e;r.nodeName!=="circle"&&(e=r.getAttribute("transform"),r=r.childNodes[0]);var i=["cx","cy"];Object.values(r.attributes).filter(function(n){return i.includes(n.name)&&n.specified}).map(function(n){t.setAttribute(n.name,n.nodeValue)}),e&&t.setAttribute("transform",e)},heat_square:function(r,t){var e;r.nodeName!=="circle"&&(e=r.getAttribute("transform"),r=r.childNodes[0]);var i=["cx","cy"];Object.values(r.attributes).filter(function(n){return i.includes(n.name)&&n.specified}).map(function(n){t.setAttribute(n.name,n.nodeValue)}),e&&t.setAttribute("transform",e)}},G0={pink:"#F683AE",blue:"#318AD8",green:"#48BB74",grey:"#A6B1B9",red:"#F56B6B",yellow:"#FACF7A",purple:"#44427B",teal:"#5FD8C4",cyan:"#15CCEF",orange:"#F8814F","light-pink":"#FED7E5","light-blue":"#BFDDF7","light-green":"#48BB74","light-grey":"#F4F5F6","light-red":"#F6DFDF","light-yellow":"#FEE9BF","light-purple":"#E8E8F7","light-teal":"#D3FDF6","light-cyan":"#DDF8FD","light-orange":"#FECDB8"};function xi(r,t,e,i){var n=typeof t=="string"?t:t.join(", ");return[r,{transform:e.join(", ")},i,"easein","translate",{transform:n}]}function ff(r,t,e){return xi(r,[0,e],[0,t],350)}function pf(r,t){return[r,{d:t},350,"easein"]}var X0={ease:"0.25 0.1 0.25 1",linear:"0 0 1 1",easein:"0.1 0.8 0.2 1",easeout:"0 0 0.58 1",easeinout:"0.42 0 0.58 1"};function K0(r,t,e){var i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:"linear",n=arguments.length>4&&arguments[4]!==void 0?arguments[4]:void 0,o=arguments.length>5&&arguments[5]!==void 0?arguments[5]:{},a=r.cloneNode(!0),s=r.cloneNode(!0);for(var l in t){var d=void 0;d=l==="transform"?document.createElementNS("http://www.w3.org/2000/svg","animateTransform"):document.createElementNS("http://www.w3.org/2000/svg","animate");var u=o[l]||r.getAttribute(l),h=t[l],p={attributeName:l,from:u,to:h,begin:"0s",dur:e/1e3+"s",values:u+";"+h,keySplines:X0[i],keyTimes:"0;1",calcMode:"spline",fill:"freeze"};for(var m in n&&(p.type=n),p)d.setAttribute(m,p[m]);a.appendChild(d),n?s.setAttribute(l,"translate(".concat(h,")")):s.setAttribute(l,h)}return[a,s]}function na(r,t){r.style.transform=t,r.style.webkitTransform=t,r.style.msTransform=t,r.style.mozTransform=t,r.style.oTransform=t}function J0(r,t){var e=[],i=[];t.map(function(o){var a,s,l=o[0],d=l.parentNode;o[0]=l;var u=Rt(K0.apply(void 0,ur(o)),2);a=u[0],s=u[1],e.push(s),i.push([a,d]),d.replaceChild(a,l)});var n=r.cloneNode(!0);return i.map(function(o,a){o[1].replaceChild(e[a],o[0]),t[a][0]=e[a]}),n}function Z0(r,t,e){if(e.length!==0){var i=J0(t,e);t.parentNode==r&&(r.removeChild(t),r.appendChild(i)),setTimeout(function(){i.parentNode==r&&(r.removeChild(i),r.appendChild(t))},250)}}var sa=function(){function r(t,e){if(pr(this,r),e=ra(e),this.parent=typeof t=="string"?document.querySelector(t):t,!(this.parent instanceof HTMLElement))throw new Error("No `parent` element to render on was provided.");this.rawChartArgs=e,this.title=e.title||"",this.type=e.type||"",this.realData=this.prepareData(e.data),this.data=this.prepareFirstData(this.realData),this.colors=this.validateColors(e.colors,this.type),this.config={showTooltip:1,showLegend:e.showLegend!==void 0?e.showLegend:1,isNavigable:e.isNavigable||0,animate:e.animate!==void 0?e.animate:1,disableEntryAnimation:e.disableEntryAnimation||0,truncateLegends:e.truncateLegends||1},this.measures=JSON.parse(JSON.stringify(B0));var i=this.measures;this.setMeasures(e),this.title.length||(i.titleHeight=0),this.config.showLegend||(i.legendHeight=0),this.argHeight=e.height||i.baseHeight,this.state={},this.options={},this.initTimeout=700,this.config.isNavigable&&(this.overlays=[]),this.configure(e)}return vr(r,[{key:"prepareData",value:function(t){return t}},{key:"prepareFirstData",value:function(t){return t}},{key:"validateColors",value:function(t,e){var i=[];return(t=(t||[]).concat(I0[e])).forEach(function(n){var o=function(a){return/rgb[a]{0,1}\([\d, ]+\)/gim.test(a)?/\D+(\d*)\D+(\d*)\D+(\d*)/gim.exec(a).map(function(s,l){return l!==0?Number(s).toString(16):"#"}).reduce(function(s,l){return"".concat(s).concat(l)}):G0[a]||a}(n);(function(a){return/(^\s*)(#)((?:[A-Fa-f0-9]{3}){1,2})$/i.test(a)||/(^\s*)(rgb|hsl)(a?)[(]\s*([\d.]+\s*%?)\s*,\s*([\d.]+\s*%?)\s*,\s*([\d.]+\s*%?)\s*(?:,\s*([\d.]+)\s*)?[)]$/i.test(a)})(o)?i.push(o):console.warn('"'+n+'" is not a valid color.')}),i}},{key:"setMeasures",value:function(){}},{key:"configure",value:function(){var t=this,e=this.argHeight;this.baseHeight=e,this.height=e-aa(this.measures),this.boundDrawFn=function(){return t.draw(!0)},ResizeObserver&&(this.resizeObserver=new ResizeObserver(this.boundDrawFn),this.resizeObserver.observe(this.parent)),window.addEventListener("resize",this.boundDrawFn),window.addEventListener("orientationchange",this.boundDrawFn)}},{key:"destroy",value:function(){this.resizeObserver&&this.resizeObserver.disconnect(),window.removeEventListener("resize",this.boundDrawFn),window.removeEventListener("orientationchange",this.boundDrawFn)}},{key:"setup",value:function(){this.makeContainer(),this.updateWidth(),this.makeTooltip(),this.draw(!1,!0)}},{key:"makeContainer",value:function(){this.parent.innerHTML="";var t={inside:this.parent,className:"chart-container"};this.independentWidth&&(t.styles={width:this.independentWidth+"px"}),this.container=kr.create("div",t)}},{key:"makeTooltip",value:function(){this.tip=new R0({parent:this.container,colors:this.colors}),this.bindTooltip()}},{key:"bindTooltip",value:function(){}},{key:"draw",value:function(){var t=this,e=arguments.length>0&&arguments[0]!==void 0&&arguments[0],i=arguments.length>1&&arguments[1]!==void 0&&arguments[1];e&&$0(this.parent)||(this.updateWidth(),this.calc(e),this.makeChartArea(),this.setupComponents(),this.components.forEach(function(n){return n.setup(t.drawArea)}),this.render(this.components,!1),i&&(this.data=this.realData,setTimeout(function(){t.update(t.data,!0)},this.initTimeout)),this.config.showLegend&&this.renderLegend(),this.setupNavigation(i))}},{key:"calc",value:function(){}},{key:"updateWidth",value:function(){var t,e,i;this.baseWidth=(t=this.parent,e=window.getComputedStyle(t),i=parseFloat(e.paddingLeft)+parseFloat(e.paddingRight),t.clientWidth-i),this.width=this.baseWidth-ea(this.measures)}},{key:"makeChartArea",value:function(){this.svg&&this.container.removeChild(this.svg);var t,e,i,n,o=this.measures;this.svg=(t=this.container,e="frappe-chart chart",i=this.baseWidth,n=this.baseHeight,ut("svg",{className:e,inside:t,width:i,height:n})),this.svgDefs=ut("defs",{inside:this.svg}),this.title.length&&(this.titleEL=Si("title",o.margins.left,o.margins.top,this.title,{fontSize:o.titleFontSize,fill:"#666666",dy:o.titleFontSize}));var a=Bn(o);this.drawArea=ia(this.type+"-chart chart-draw-area","translate(".concat($n(o),", ").concat(a,")")),this.config.showLegend&&(a+=this.height+o.paddings.bottom,this.legendArea=ia("chart-legend","translate(".concat($n(o),", ").concat(a,")"))),this.title.length&&this.svg.appendChild(this.titleEL),this.svg.appendChild(this.drawArea),this.config.showLegend&&this.svg.appendChild(this.legendArea),this.updateTipOffset($n(o),Bn(o))}},{key:"updateTipOffset",value:function(t,e){this.tip.offset={x:t,y:e}}},{key:"setupComponents",value:function(){this.components=new Map}},{key:"update",value:function(t){var e=arguments.length>1&&arguments[1]!==void 0&&arguments[1];t||console.error("No data to update."),e||(t=ra(t));var i=e?!this.config.disableEntryAnimation:this.config.animate;this.data=this.prepareData(t),this.calc(),this.render(this.components,i)}},{key:"render",value:function(){var t=this,e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.components,i=!(arguments.length>1&&arguments[1]!==void 0)||arguments[1];this.config.isNavigable&&this.overlays.map(function(o){return o.parentNode.removeChild(o)});var n=[];e.forEach(function(o){n=n.concat(o.update(i))}),n.length>0?(Z0(this.container,this.svg,n),setTimeout(function(){e.forEach(function(o){return o.make()}),t.updateNav()},400)):(e.forEach(function(o){return o.make()}),this.updateNav())}},{key:"updateNav",value:function(){this.config.isNavigable&&(this.makeOverlay(),this.bindUnits())}},{key:"renderLegend",value:function(t){var e=this;this.legendArea.textContent="";var i=0,n=0;t.map(function(o,a){var s=Math.floor(e.width/150);i>s&&(i=0,n+=e.config.legendRowHeight);var l=150*i,d=e.makeLegend(o,a,l,n);e.legendArea.appendChild(d),i++})}},{key:"makeLegend",value:function(){}},{key:"setupNavigation",value:function(){var t=this,e=arguments.length>0&&arguments[0]!==void 0&&arguments[0];this.config.isNavigable&&e&&(this.bindOverlay(),this.keyActions={13:this.onEnterKey.bind(this),37:this.onLeftArrow.bind(this),38:this.onUpArrow.bind(this),39:this.onRightArrow.bind(this),40:this.onDownArrow.bind(this)},document.addEventListener("keydown",function(i){L0(t.container)&&(i=i||window.event,t.keyActions[i.keyCode]&&t.keyActions[i.keyCode]())}))}},{key:"makeOverlay",value:function(){}},{key:"updateOverlay",value:function(){}},{key:"bindOverlay",value:function(){}},{key:"bindUnits",value:function(){}},{key:"onLeftArrow",value:function(){}},{key:"onRightArrow",value:function(){}},{key:"onUpArrow",value:function(){}},{key:"onDownArrow",value:function(){}},{key:"onEnterKey",value:function(){}},{key:"addDataPoint",value:function(){}},{key:"removeDataPoint",value:function(){}},{key:"getDataPoint",value:function(){}},{key:"setCurrentDataPoint",value:function(){}},{key:"updateDataset",value:function(){}},{key:"export",value:function(){var t=function(e){var i=e.cloneNode(!0);i.classList.add("chart-container"),i.setAttribute("xmlns","http://www.w3.org/2000/svg"),i.setAttribute("xmlns:xlink","http://www.w3.org/1999/xlink");var n=kr.create("style",{innerHTML:".chart-container{position:relative;font-family:-apple-system,BlinkMacSystemFont,'Segoe UI','Roboto','Oxygen','Ubuntu','Cantarell','Fira Sans','Droid Sans','Helvetica Neue',sans-serif}.chart-container .axis,.chart-container .chart-label{fill:#555b51}.chart-container .axis line,.chart-container .chart-label line{stroke:#dadada}.chart-container .dataset-units circle{stroke:#fff;stroke-width:2}.chart-container .dataset-units path{fill:none;stroke-opacity:1;stroke-width:2px}.chart-container .dataset-path{stroke-width:2px}.chart-container .path-group path{fill:none;stroke-opacity:1;stroke-width:2px}.chart-container line.dashed{stroke-dasharray:5,3}.chart-container .axis-line .specific-value{text-anchor:start}.chart-container .axis-line .y-line{text-anchor:end}.chart-container .axis-line .x-line{text-anchor:middle}.chart-container .legend-dataset-text{fill:#6c7680;font-weight:600}.graph-svg-tip{position:absolute;z-index:99999;padding:10px;font-size:12px;color:#959da5;text-align:center;background:rgba(0,0,0,.8);border-radius:3px}.graph-svg-tip ul{padding-left:0;display:flex}.graph-svg-tip ol{padding-left:0;display:flex}.graph-svg-tip ul.data-point-list li{min-width:90px;flex:1;font-weight:600}.graph-svg-tip strong{color:#dfe2e5;font-weight:600}.graph-svg-tip .svg-pointer{position:absolute;height:5px;margin:0 0 0 -5px;content:' ';border:5px solid transparent;}.graph-svg-tip.comparison{padding:0;text-align:left;pointer-events:none}.graph-svg-tip.comparison .title{display:block;padding:10px;margin:0;font-weight:600;line-height:1;pointer-events:none}.graph-svg-tip.comparison ul{margin:0;white-space:nowrap;list-style:none}.graph-svg-tip.comparison li{display:inline-block;padding:5px 10px}"});i.insertBefore(n,i.firstChild);var o=kr.create("div");return o.appendChild(i),o.innerHTML}(this.svg);(function(e,i){var n=document.createElement("a");n.style="display: none";var o=new Blob(i,{type:"image/svg+xml; charset=utf-8"}),a=window.URL.createObjectURL(o);n.href=a,n.download=e,document.body.appendChild(n),n.click(),setTimeout(function(){document.body.removeChild(n),window.URL.revokeObjectURL(a)},300)})(this.title||"Chart",[t])}}]),r}(),Sf=function(r){Gr(e,sa);var t=Xr(e);function e(i,n){return pr(this,e),t.call(this,i,n)}return vr(e,[{key:"configure",value:function(i){cr(Wt(e.prototype),"configure",this).call(this,i),this.config.formatTooltipY=(i.tooltipOptions||{}).formatTooltipY,this.config.maxSlices=i.maxSlices||20,this.config.maxLegendPoints=i.maxLegendPoints||20,this.config.legendRowHeight=60}},{key:"calc",value:function(){var i=this,n=this.state,o=this.config.maxSlices;n.sliceTotals=[];var a=this.data.labels.map(function(u,h){var p=0;return i.data.datasets.map(function(m){p+=m.values[h]}),[p,u]}).filter(function(u){return u[0]>=0}),s=a;if(a.length>o){a.sort(function(u,h){return h[0]-u[0]}),s=a.slice(0,o-1);var l=a.slice(o-1),d=0;l.map(function(u){d+=u[0]}),s.push([d,"Rest"]),this.colors[o-1]="grey"}n.labels=[],s.map(function(u){n.sliceTotals.push(kf(u[0])),n.labels.push(u[1])}),n.grandTotal=n.sliceTotals.reduce(function(u,h){return u+h},0),this.center={x:this.width/2,y:this.height/2}}},{key:"renderLegend",value:function(){var i=this.state;this.legendArea.textContent="",this.legendTotals=i.sliceTotals.slice(0,this.config.maxLegendPoints),cr(Wt(e.prototype),"renderLegend",this).call(this,this.legendTotals)}},{key:"makeLegend",value:function(i,n,o,a){var s=this.config.formatTooltipY?this.config.formatTooltipY(i):i;return Cf(o,a,12,3,this.colors[n],this.state.labels[n],s,null,this.config.truncateLegends)}}]),e}(),Q0=["January","February","March","April","May","June","July","August","September","October","November","December"],e1=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"];function hf(r){var t=new Date(r);return t.setMinutes(t.getMinutes()-t.getTimezoneOffset()),t}function Jo(r){var t=r.getDate(),e=r.getMonth()+1;return[r.getFullYear(),(e>9?"":"0")+e,(t>9?"":"0")+t].join("-")}function $r(r){return new Date(r.getTime())}function Zo(r,t){var e=Ef(r);return Math.ceil(function(i,n){return(hf(n)-hf(i))/864e5}(e,t)/7)}function t1(r,t){return r.getMonth()===t.getMonth()&&r.getFullYear()===t.getFullYear()}function Tf(r){var t=arguments.length>1&&arguments[1]!==void 0&&arguments[1],e=Q0[r];return t?e.slice(0,3):e}function _f(r,t){return new Date(t,r+1,0)}function Ef(r){var t=$r(r),e=t.getDay();return e!==0&&Yr(t,-1*e),t}function Yr(r,t){r.setDate(r.getDate()+t)}var r1=function(){function r(t){var e=t.layerClass,i=e===void 0?"":e,n=t.layerTransform,o=n===void 0?"":n,a=t.constants,s=t.getData,l=t.makeElements,d=t.animateElements;pr(this,r),this.layerTransform=o,this.constants=a,this.makeElements=l,this.getData=s,this.animateElements=d,this.store=[],this.labels=[],this.layerClass=i,this.layerClass=typeof this.layerClass=="function"?this.layerClass():this.layerClass,this.refresh()}return vr(r,[{key:"refresh",value:function(t){this.data=t||this.getData()}},{key:"setup",value:function(t){this.layer=ia(this.layerClass,this.layerTransform,t)}},{key:"make",value:function(){this.render(this.data),this.oldData=this.data}},{key:"render",value:function(t){var e=this;this.store=this.makeElements(t),this.layer.textContent="",this.store.forEach(function(i){e.layer.appendChild(i)}),this.labels.forEach(function(i){e.layer.appendChild(i)})}},{key:"update",value:function(){var t=!(arguments.length>0&&arguments[0]!==void 0)||arguments[0];this.refresh();var e=[];return t&&(e=this.animateElements(this.data)||[]),e}}]),r}(),gf={donutSlices:{layerClass:"donut-slices",makeElements:function(r){return r.sliceStrings.map(function(t,e){var i=Vr(t,"donut-path",r.colors[e],"none",r.strokeWidth);return i.style.transition="transform .3s;",i})},animateElements:function(r){return this.store.map(function(t,e){return pf(t,r.sliceStrings[e])})}},pieSlices:{layerClass:"pie-slices",makeElements:function(r){return r.sliceStrings.map(function(t,e){var i=Vr(t,"pie-path","none",r.colors[e]);return i.style.transition="transform .3s;",i})},animateElements:function(r){return this.store.map(function(t,e){return pf(t,r.sliceStrings[e])})}},percentageBars:{layerClass:"percentage-bars",makeElements:function(r){var t=this,e=r.xPositions.length;return r.xPositions.map(function(i,n){var o=n==e-1,a=n==0;return function(s,l,d,u,h,p){var m=arguments.length>6&&arguments[6]!==void 0?arguments[6]:"none";if(p){var x=q0(s,d,u);return Vr(x,"percentage-bar",null,m)}if(h){var y=W0(s,d,u);return Vr(y,"percentage-bar",null,m)}var v={className:"percentage-bar",x:s,y:l,width:d,height:u,fill:m};return ut("rect",v)}(i,0,r.widths[n],t.constants.barHeight,a,o,r.colors[n])})},animateElements:function(r){if(r)return[]}},yAxis:{layerClass:"y axis",makeElements:function(r){var t=this;return r.positions.map(function(e,i){return function(n,o,a){var s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};Mr(n)||(n=0),s.pos||(s.pos="left"),s.offset||(s.offset=0),s.mode||(s.mode="span"),s.stroke||(s.stroke="#E2E6E9"),s.className||(s.className="");var l=-6,d=s.mode==="span"?a+6:0;return s.mode==="tick"&&s.pos==="right"&&(l=a+6,d=a),l+=s.offset,d+=s.offset,typeof o=="number"&&(o=kf(o)),uf(n,o,l,d,{className:s.className,lineType:s.lineType,shortenNumbers:s.shortenNumbers,numberFormatter:s.numberFormatter})}(e,r.labels[i],t.constants.width,{mode:t.constants.mode,pos:t.constants.pos,shortenNumbers:t.constants.shortenNumbers,numberFormatter:t.constants.numberFormatter})})},animateElements:function(r){var t=r.positions,e=r.labels,i=this.oldData.positions,n=this.oldData.labels,o=Rt(Gt(i,t),2);i=o[0],t=o[1];var a=Rt(Gt(n,e),2);return n=a[0],e=a[1],this.render({positions:i,labels:e}),this.store.map(function(s,l){return ff(s,t[l],i[l])})}},xAxis:{layerClass:"x axis",makeElements:function(r){var t=this;return r.positions.map(function(e,i){return function(n,o,a){var s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};Mr(n)||(n=0),s.pos||(s.pos="bottom"),s.offset||(s.offset=0),s.mode||(s.mode="span"),s.className||(s.className="");var l=a+6,d=s.mode==="span"?-6:a;return s.mode==="tick"&&s.pos==="top"&&(l=-6,d=0),U0(n,o,l,d,{className:s.className,lineType:s.lineType})}(e,r.calcLabels[i],t.constants.height,{mode:t.constants.mode,pos:t.constants.pos})})},animateElements:function(r){var t=r.positions,e=r.calcLabels,i=this.oldData.positions,n=this.oldData.calcLabels,o=Rt(Gt(i,t),2);i=o[0],t=o[1];var a=Rt(Gt(n,e),2);return n=a[0],e=a[1],this.render({positions:i,calcLabels:e}),this.store.map(function(s,l){return function(d,u,h){return xi(d,[h,0],[u,0],350)}(s,t[l],i[l])})}},yMarkers:{layerClass:"y-markers",makeElements:function(r){var t=this;return r.map(function(e){return function(i,n,o){var a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};Mr(i)||(i=0),a.labelPos||(a.labelPos="right"),a.lineType||(a.lineType="dashed");var s=a.labelPos==="left"?4:o-of(n,5)-4,l=ut("text",{className:"chart-label",x:s,y:0,dy:"-5px","font-size":"10px","text-anchor":"start",innerHTML:n+""}),d=uf(i,"",0,o,{stroke:a.stroke||"#E2E6E9",className:a.className||"",lineType:a.lineType});return d.appendChild(l),d}(e.position,e.label,t.constants.width,{labelPos:e.options.labelPos,stroke:e.options.stroke,mode:"span",lineType:e.options.lineType})})},animateElements:function(r){var t=Rt(Gt(this.oldData,r),2);this.oldData=t[0];var e=(r=t[1]).map(function(a){return a.position}),i=r.map(function(a){return a.label}),n=r.map(function(a){return a.options}),o=this.oldData.map(function(a){return a.position});return this.render(o.map(function(a,s){return{position:o[s],label:i[s],options:n[s]}})),this.store.map(function(a,s){return ff(a,e[s],o[s])})}},yRegions:{layerClass:"y-regions",makeElements:function(r){var t=this;return r.map(function(e){return function(i,n,o,a){var s=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{},l=i-n,d=ut("rect",{className:"bar mini",styles:{fill:s.fill||"rgba(228, 234, 239, 0.49)",stroke:s.stroke||"#E2E6E9","stroke-dasharray":"".concat(o,", ").concat(l)},x:0,y:0,width:o,height:l});s.labelPos||(s.labelPos="right");var u=s.labelPos==="left"?4:o-of(a+"",4.5)-4,h=ut("text",{className:"chart-label",x:u,y:0,dy:"-5px","font-size":"10px","text-anchor":"start",innerHTML:a+""}),p=ut("g",{transform:"translate(0, ".concat(n,")")});return p.appendChild(d),p.appendChild(h),p}(e.startPos,e.endPos,t.constants.width,e.label,{labelPos:e.options.labelPos,stroke:e.options.stroke,fill:e.options.fill})})},animateElements:function(r){var t=Rt(Gt(this.oldData,r),2);this.oldData=t[0];var e=(r=t[1]).map(function(d){return d.endPos}),i=r.map(function(d){return d.label}),n=r.map(function(d){return d.startPos}),o=r.map(function(d){return d.options}),a=this.oldData.map(function(d){return d.endPos}),s=this.oldData.map(function(d){return d.startPos});this.render(a.map(function(d,u){return{startPos:s[u],endPos:a[u],label:i[u],options:o[u]}}));var l=[];return this.store.map(function(d,u){l=l.concat(function(h,p,m,x){var y=p-m,v=h.childNodes[0],w=v.getAttribute("width");return[[v,{height:y,"stroke-dasharray":"".concat(w,", ").concat(y)},350,"easein"],xi(h,[0,x],[0,m],350)]}(d,n[u],e[u],a[u]))}),l}},heatDomain:{layerClass:function(){return"heat-domain domain-"+this.constants.index},makeElements:function(r){var t=this,e=this.constants,i=e.index,n=e.colWidth,o=e.rowHeight,a=e.squareSize,s=e.radius,l=e.xTranslate,d=l,u=0;return this.serializedSubDomains=[],r.cols.map(function(h,p){p===1&&t.labels.push(Si("domain-name",d,-12,Tf(i,!0).toUpperCase(),{fontSize:9})),h.map(function(m,x){if(m.fill){var y={"data-date":m.yyyyMmDd,"data-value":m.dataValue,"data-day":x},v=xf("day",d,u,a,s,m.fill,y);t.serializedSubDomains.push(v)}u+=o}),u=0,d+=n}),this.serializedSubDomains},animateElements:function(r){if(r)return[]}},barGraph:{layerClass:function(){return"dataset-units dataset-bars dataset-"+this.constants.index},makeElements:function(r){var t=this.constants;return this.unitType="bar",this.units=r.yPositions.map(function(e,i){return function(n,o,a,s){var l=arguments.length>4&&arguments[4]!==void 0?arguments[4]:"",d=arguments.length>5&&arguments[5]!==void 0?arguments[5]:0,u=arguments.length>6&&arguments[6]!==void 0?arguments[6]:0,h=arguments.length>7&&arguments[7]!==void 0?arguments[7]:{},p=af(o,h.zeroLine),m=Rt(p,2),x=m[0],y=m[1];y-=u,x===0&&(x=h.minHeight,y-=h.minHeight),Mr(n)||(n=0),Mr(y)||(y=0),Mr(x,!0)||(x=0),Mr(a,!0)||(a=0);var v=ut("rect",{className:"bar mini",style:"fill: ".concat(s),"data-point-index":d,x:n,y,width:a,height:x});if((l+="")||l.length){v.setAttribute("y",0),v.setAttribute("x",0);var w=ut("text",{className:"data-point-value",x:a/2,y:0,dy:"-5px","font-size":"10px","text-anchor":"middle",innerHTML:l}),k=ut("g",{"data-point-index":d,transform:"translate(".concat(n,", ").concat(y,")")});return k.appendChild(v),k.appendChild(w),k}return v}(r.xPositions[i],e,r.barWidth,t.color,r.labels[i],i,r.offsets[i],{zeroLine:r.zeroLine,barsWidth:r.barsWidth,minHeight:t.minHeight})}),this.units},animateElements:function(r){var t=r.xPositions,e=r.yPositions,i=r.offsets,n=r.labels,o=this.oldData.xPositions,a=this.oldData.yPositions,s=this.oldData.offsets,l=this.oldData.labels,d=Rt(Gt(o,t),2);o=d[0],t=d[1];var u=Rt(Gt(a,e),2);a=u[0],e=u[1];var h=Rt(Gt(s,i),2);s=h[0],i=h[1];var p=Rt(Gt(l,n),2);l=p[0],n=p[1],this.render({xPositions:o,yPositions:a,offsets:s,labels:n,zeroLine:this.oldData.zeroLine,barsWidth:this.oldData.barsWidth,barWidth:this.oldData.barWidth});var m=[];return this.store.map(function(x,y){m=m.concat(function(v,w,k,c){var _=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0,g=arguments.length>5&&arguments[5]!==void 0?arguments[5]:{},b=af(k,g.zeroLine),E=Rt(b,2),T=E[0],C=E[1];if(C-=_,v.nodeName!=="rect"){var S=v.childNodes[0],A=[S,{width:c,height:T},350,"easein"],L=v.getAttribute("transform").split("(")[1].slice(0,-1),B=xi(v,L,[w,C],350);return[A,B]}return[[v,{width:c,height:T,x:w,y:C},350,"easein"]]}(x,t[y],e[y],r.barWidth,i[y],{zeroLine:r.zeroLine}))}),m}},lineGraph:{layerClass:function(){return"dataset-units dataset-line dataset-"+this.constants.index},makeElements:function(r){var t=this.constants;if(this.unitType="dot",this.paths={},t.hideLine||(this.paths=function(n,o,a){var s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},l=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{},d=o.map(function(v,w){return n[w]+","+v}),u=d.join("L");s.spline&&(u=sf(n,o));var h=Vr("M"+u,"line-graph-path",a);if(s.heatline){var p=cf(l.svgDefs,a);h.style.stroke="url(#".concat(p,")")}var m={path:h};if(s.regionFill){var x=cf(l.svgDefs,a,!0),y="M"+"".concat(n[0],",").concat(l.zeroLine,"L")+u+"L".concat(n.slice(-1)[0],",").concat(l.zeroLine);m.region=Vr(y,"region-fill","none","url(#".concat(x,")"))}return m}(r.xPositions,r.yPositions,t.color,{heatline:t.heatline,regionFill:t.regionFill,spline:t.spline},{svgDefs:t.svgDefs,zeroLine:r.zeroLine})),this.units=[],t.showDots&&(this.units=r.yPositions.map(function(n,o){return df(r.xPositions[o],n,r.radius,t.color,t.valuesOverPoints?r.values[o]:"",o,t.hideDotBorder)})),t.trailingDot&&!t.showDots){var e=r.yPositions.length-1,i=df(r.xPositions[e],r.yPositions[e],r.radius,t.color,t.valuesOverPoints?r.values[e]:"",e,t.hideDotBorder);this.units.push(i)}return Object.values(this.paths).concat(this.units)},animateElements:function(r){var t=r.xPositions,e=r.yPositions,i=r.values,n=this.oldData.xPositions,o=this.oldData.yPositions,a=this.oldData.values,s=Rt(Gt(n,t),2);n=s[0],t=s[1];var l=Rt(Gt(o,e),2);o=l[0],e=l[1];var d=Rt(Gt(a,i),2);a=d[0],i=d[1],this.render({xPositions:n,yPositions:o,values:i,zeroLine:this.oldData.zeroLine,radius:this.oldData.radius});var u=[];return Object.keys(this.paths).length&&(u=u.concat(function(h,p,m,x,y){var v=[],w=m.map(function(b,E){return p[E]+","+b}).join("L");y&&(w=sf(p,m));var k=[h.path,{d:"M"+w},350,"easein"];if(v.push(k),h.region){var c="".concat(p[0],",").concat(x,"L"),_="L".concat(p.slice(-1)[0],", ").concat(x),g=[h.region,{d:"M"+c+w+_},350,"easein"];v.push(g)}return v}(this.paths,t,e,r.zeroLine,this.constants.spline))),this.units.length&&this.units.map(function(h,p){u=u.concat(function(m,x,y){if(m.nodeName!=="circle"){var v=m.getAttribute("transform").split("(")[1].slice(0,-1);return[xi(m,v,[x,y],350)]}return[[m,{cx:x,cy:y},350,"easein"]]}(h,t[p],e[p]))}),u}}};function Ti(r,t,e){var i=Object.keys(gf).filter(function(o){return r.includes(o)}),n=gf[i[0]];return Object.assign(n,{constants:t,getData:e}),new r1(n)}var i1=function(r){Gr(e,Sf);var t=Xr(e);function e(i,n){var o;return pr(this,e),(o=t.call(this,i,n)).type="percentage",o.setup(),o}return vr(e,[{key:"setMeasures",value:function(i){var n=this.measures;this.barOptions=i.barOptions||{};var o=this.barOptions;o.height=o.height||16,n.paddings.right=30,n.paddings.top=60,n.paddings.bottom=0,n.legendHeight=80,n.baseHeight=8*o.height+aa(n)}},{key:"setupComponents",value:function(){var i=this.state,n=[["percentageBars",{barHeight:this.barOptions.height},function(){return{xPositions:i.xPositions,widths:i.widths,colors:this.colors}}.bind(this)]];this.components=new Map(n.map(function(o){var a=Ti.apply(void 0,ur(o));return[o[0],a]}))}},{key:"calc",value:function(){var i=this;cr(Wt(e.prototype),"calc",this).call(this);var n=this.state;n.xPositions=[],n.widths=[];var o=0;n.sliceTotals.map(function(a){var s=i.width*a/n.grandTotal;n.widths.push(s),n.xPositions.push(o),o+=s})}},{key:"makeDataByIndex",value:function(){}},{key:"bindTooltip",value:function(){var i=this,n=this.state;this.container.addEventListener("mousemove",function(o){var a=i.components.get("percentageBars").store,s=o.target;if(a.includes(s)){var l=a.indexOf(s),d=Ln(i.container),u=Ln(s),h=s.getAttribute("width")||s.getBoundingClientRect().width,p=u.left-d.left+parseInt(h)/2,m=u.top-d.top,x=(i.formattedLabels&&i.formattedLabels.length>0?i.formattedLabels[l]:i.state.labels[l])+": ",y=n.sliceTotals[l]/n.grandTotal;i.tip.setValues(p,m,{name:x,value:(100*y).toFixed(1)+"%"}),i.tip.showTip()}})}}]),e}(),mf=function(r){Gr(e,Sf);var t=Xr(e);function e(i,n){var o;return pr(this,e),(o=t.call(this,i,n)).initTimeout=0,o.init=1,o.setup(),o}return vr(e,[{key:"configure",value:function(i){cr(Wt(e.prototype),"configure",this).call(this,i),this.mouseMove=this.mouseMove.bind(this),this.mouseLeave=this.mouseLeave.bind(this),this.hoverRadio=i.hoverRadio||.1,this.config.startAngle=i.startAngle||0,this.type="pie",this.sliceName="pieSlices",this.arcFunc=D0,this.shapeFunc=F0,this.clockWise=i.clockWise||!1}},{key:"getRadius",value:function(){return this.height>this.width?this.center.x:this.center.y}},{key:"calc",value:function(){var i=this;cr(Wt(e.prototype),"calc",this).call(this);var n=this.state;this.radius=this.getRadius();var o=this.radius,a=this.clockWise,s=n.slicesProperties||[];n.sliceStrings=[],n.slicesProperties=[];var l=180-this.config.startAngle;n.sliceTotals.map(function(d,u){var h,p,m=l,x=d/n.grandTotal*360,y=x>180?1:0,v=a?-x:x,w=l+=v,k=Xo(m,o),c=Xo(w,o),_=i.init&&s[u];i.init?(h=_?_.startPosition:k,p=_?_.endPosition:k):(h=k,p=c);var g=x===360?i.shapeFunc(h,p,i.center,i.radius,a,y):i.arcFunc(h,p,i.center,i.radius,a,y);n.sliceStrings.push(g),n.slicesProperties.push({startPosition:k,endPosition:c,value:d,total:n.grandTotal,startAngle:m,endAngle:w,angle:v})}),this.init=0}},{key:"setupComponents",value:function(){var i=this.state,n=[["pieSlices",{},function(){return{sliceStrings:i.sliceStrings,colors:this.colors}}.bind(this)]];this.components=new Map(n.map(function(o){var a=Ti.apply(void 0,ur(o));return[o[0],a]}))}},{key:"calTranslateByAngle",value:function(i){var n=this.radius,o=this.hoverRadio,a=Xo(i.startAngle+i.angle/2,n);return"translate3d(".concat(a.x*o,"px,").concat(a.y*o,"px,0)")}},{key:"hoverSlice",value:function(i,n,o,a){if(i){var s=this.colors[n];if(o){na(i,this.calTranslateByAngle(this.state.slicesProperties[n]));var l=Ln(this.svg),d=a.pageX-l.left+10,u=a.pageY-l.top-10,h=(this.formatted_labels&&this.formatted_labels.length>0?this.formatted_labels[n]:this.state.labels[n])+": ",p=(100*this.state.sliceTotals[n]/this.state.grandTotal).toFixed(1);this.tip.setValues(d,u,{name:h,value:p+"%"}),this.tip.showTip()}else this.resetHover(i,s)}}},{key:"resetHover",value:function(i,n){na(i,"translate3d(0,0,0)"),this.tip.hideTip(),i.style.fill=n}},{key:"bindTooltip",value:function(){this.container.addEventListener("mousemove",this.mouseMove),this.container.addEventListener("mouseleave",this.mouseLeave)}},{key:"mouseMove",value:function(i){var n=i.target,o=this.components.get(this.sliceName).store,a=this.curActiveSliceIndex,s=this.curActiveSlice;if(o.includes(n)){var l=o.indexOf(n);this.hoverSlice(s,a,!1),this.curActiveSlice=n,this.curActiveSliceIndex=l,this.hoverSlice(n,l,!0,i)}else this.mouseLeave()}},{key:"mouseLeave",value:function(){this.hoverSlice(this.curActiveSlice,this.curActiveSliceIndex,!1)}}]),e}();function Ci(r){if(r===0)return[0,0];if(isNaN(r))return{mantissa:-6755399441055744,exponent:972};var t=r>0?1:-1;if(!isFinite(r))return{mantissa:4503599627370496*t,exponent:972};r=Math.abs(r);var e=Math.floor(Math.log10(r));return[t*(r/Math.pow(10,e)),e]}function n1(r){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,e=Math.ceil(r),i=Math.floor(t),n=e-i,o=n,a=1;n>5&&(n%2!=0&&(n=++e-i),o=n/2,a=2),n<=2&&(a=n/(o=4)),n===0&&(o=5,a=1);for(var s=[],l=0;l<=o;l++)s.push(i+a*l);return s}function ki(r){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,e=Ci(r),i=Rt(e,2),n=i[0],o=i[1],a=t?t/Math.pow(10,o):0,s=n1(n=n.toFixed(6),a);return s=s.map(function(l){return l*Math.pow(10,o)})}function o1(r){var t=arguments.length>1&&arguments[1]!==void 0&&arguments[1],e=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},i=Math.max.apply(Math,ur(r)),n=Math.min.apply(Math,ur(r));e.max!==void 0&&(i=i>e.max?i:e.max),e.min!==void 0&&(n=n<e.min?n:e.min);var o=[];function a(h,p){for(var m=ki(h),x=m[1]-m[0],y=0,v=1;y<p;v++)y+=x,m.unshift(-1*y);return m}if(i>=0&&n>=0)Ci(i)[1],o=t?ki(i,n):ki(i);else if(i>0&&n<0){var s=Math.abs(n);if(i>=s)Ci(i)[1],o=a(i,s);else{Ci(s)[1];var l=a(s,i);o=l.reverse().map(function(h){return-1*h})}}else if(i<=0&&n<=0){var d=Math.abs(n),u=Math.abs(i);Ci(d)[1],o=(o=t?ki(d,u):ki(d)).reverse().map(function(h){return-1*h})}return o}function a1(r){var t,e=Af(r);return r.indexOf(0)>=0?t=r.indexOf(0):r[0]>0?t=-1*r[0]/e:t=-1*r[r.length-1]/e+(r.length-1),t}function Af(r){return r[1]-r[0]}function s1(r){return r[r.length-1]-r[0]}function Mn(r,t){return wf(t.zeroLine-r*t.scaleMultiplier)}var l1=function(r){Gr(e,sa);var t=Xr(e);function e(i,n){var o;pr(this,e),(o=t.call(this,i,n)).type="heatmap",o.countLabel=n.countLabel||"";var a=["Sunday","Monday"],s=a.includes(n.startSubDomain)?n.startSubDomain:"Sunday";return o.startSubDomainIndex=a.indexOf(s),o.setup(),o}return vr(e,[{key:"setMeasures",value:function(i){var n=this.measures;this.discreteDomains=i.discreteDomains===0?0:1,n.paddings.top=36,n.paddings.bottom=0,n.legendHeight=24,n.baseHeight=84+aa(n);var o=this.data,a=this.discreteDomains?12:0;this.independentWidth=12*(Zo(o.start,o.end)+a)+ea(n)}},{key:"updateWidth",value:function(){var i=this.discreteDomains?12:0,n=this.state.noOfWeeks?this.state.noOfWeeks:52;this.baseWidth=12*(n+i)+ea(this.measures)}},{key:"prepareData",value:function(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.data;if(i.start&&i.end&&i.start>i.end)throw new Error("Start date cannot be greater than end date.");if(i.start||(i.start=new Date,i.start.setFullYear(i.start.getFullYear()-1)),i.end||(i.end=new Date),i.dataPoints=i.dataPoints||{},parseInt(Object.keys(i.dataPoints)[0])>1e5){var n={};Object.keys(i.dataPoints).forEach(function(o){var a=new Date(1e3*o);n[Jo(a)]=i.dataPoints[o]}),i.dataPoints=n}return i}},{key:"calc",value:function(){var i=this.state;i.start=$r(this.data.start),i.end=$r(this.data.end),i.firstWeekStart=$r(i.start),i.noOfWeeks=Zo(i.start,i.end),i.distribution=function(n,o){for(var a=Math.max.apply(Math,ur(n)),s=1/(o-1),l=[],d=0;d<o;d++){var u=a*(s*d);l.push(u)}return l}(Object.values(this.data.dataPoints),5),i.domainConfigs=this.getDomains()}},{key:"setupComponents",value:function(){var i=this,n=this.state,o=this.discreteDomains?0:1,a=n.domainConfigs.map(function(l,d){return["heatDomain",{index:l.index,colWidth:12,rowHeight:12,squareSize:10,radius:i.rawChartArgs.radius||0,xTranslate:12*n.domainConfigs.filter(function(u,h){return h<d}).map(function(u){return u.cols.length-o}).reduce(function(u,h){return u+h},0)},function(){return n.domainConfigs[d]}.bind(i)]});this.components=new Map(a.map(function(l,d){var u=Ti.apply(void 0,ur(l));return[l[0]+"-"+d,u]}));var s=0;e1.forEach(function(l,d){if([1,3,5].includes(d)){var u=Si("subdomain-name",-6,s,l,{fontSize:10,dy:8,textAnchor:"end"});i.drawArea.appendChild(u)}s+=12})}},{key:"update",value:function(i){i||console.error("No data to update."),this.data=this.prepareData(i),this.draw(),this.bindTooltip()}},{key:"bindTooltip",value:function(){var i=this;this.container.addEventListener("mousemove",function(n){i.components.forEach(function(o){var a=o.store,s=n.target;if(a.includes(s)){var l=s.getAttribute("data-value"),d=s.getAttribute("data-date").split("-"),u=Tf(parseInt(d[1])-1,!0),h=i.container.getBoundingClientRect(),p=s.getBoundingClientRect(),m=parseInt(n.target.getAttribute("width")),x=p.left-h.left+m/2,y=p.top-h.top,v=l+" "+i.countLabel,w=" on "+u+" "+d[0]+", "+d[2];i.tip.setValues(x,y,{name:w,value:v,valueFirst:1},[]),i.tip.showTip()}})})}},{key:"renderLegend",value:function(){var i=this;this.legendArea.textContent="";var n=0,o=this.rawChartArgs.radius||0,a=Si("subdomain-name",n,12,"Less",{fontSize:11,dy:9});n=30,this.legendArea.appendChild(a),this.colors.slice(0,5).map(function(l,d){var u=xf("heatmap-legend-unit",n+15*d,12,10,o,l);i.legendArea.appendChild(u)});var s=Si("subdomain-name",n+75+3,12,"More",{fontSize:11,dy:9});this.legendArea.appendChild(s)}},{key:"getDomains",value:function(){for(var i=this.state,n=[i.start.getMonth(),i.start.getFullYear()],o=n[0],a=n[1],s=[i.end.getMonth(),i.end.getFullYear()],l=s[0]-o+1+12*(s[1]-a),d=[],u=$r(i.start),h=0;h<l;h++){var p=i.end;if(!t1(u,i.end)){var m=[u.getMonth(),u.getFullYear()];p=_f(m[0],m[1])}d.push(this.getDomainConfig(u,p)),Yr(p,1),u=p}return d}},{key:"getDomainConfig",value:function(i){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"",o=[i.getMonth(),i.getFullYear()],a=o[0],s=o[1],l=Ef(i),d={index:a,cols:[]};Yr(n=$r(n)||_f(a,s),1);for(var u,h=Zo(l,n),p=[],m=0;m<h;m++)u=this.getCol(l,a),p.push(u),Yr(l=new Date(u[6].yyyyMmDd),1);return u[6].dataValue!==void 0&&(Yr(l,1),p.push(this.getCol(l,a,!0))),d.cols=p,d}},{key:"getCol",value:function(i,n){for(var o=arguments.length>2&&arguments[2]!==void 0&&arguments[2],a=this.state,s=$r(i),l=[],d=0;d<7;d++,Yr(s,1)){var u={},h=s>=a.start&&s<=a.end;o||s.getMonth()!==n||!h?u.yyyyMmDd=Jo(s):u=this.getSubDomainConfig(s),l.push(u)}return l}},{key:"getSubDomainConfig",value:function(i){var n,o,a=Jo(i),s=this.data.dataPoints[a];return{yyyyMmDd:a,dataValue:s||0,fill:this.colors[n=s,o=this.state.distribution,o.filter(function(l){return l<n}).length]}}}]),e}();function c1(r,t){r.labels=r.labels||[];var e=r.labels.length,i=r.datasets,n=new Array(e).fill(0);return i||(i=[{values:n}]),i.map(function(o){if(o.values){var a=o.values;a=(a=a.map(function(s){return isNaN(s)?0:s})).length>e?a.slice(0,e):ta(a,e-a.length,0),o.values=a}else o.values=n;o.chartType||(o.chartType=t)}),r.yRegions&&r.yRegions.map(function(o){if(o.end<o.start){var a=[o.end,o.start];o.start=a[0],o.end=a[1]}}),r}function u1(r){var t=r.labels.length,e=new Array(t).fill(0),i={labels:r.labels.slice(0,-1),datasets:r.datasets.map(function(n){return{name:"",values:e.slice(0,-1),chartType:n.chartType}})};return r.yMarkers&&(i.yMarkers=[{value:0,label:""}]),r.yRegions&&(i.yRegions=[{start:0,end:0,label:""}]),i}var oa=function(r){Gr(e,sa);var t=Xr(e);function e(i,n){var o;return pr(this,e),(o=t.call(this,i,n)).barOptions=n.barOptions||{},o.lineOptions=n.lineOptions||{},o.type=n.type||"line",o.init=1,o.setup(),o}return vr(e,[{key:"setMeasures",value:function(){this.data.datasets.length<=1&&(this.config.showLegend=0,this.measures.paddings.bottom=30)}},{key:"configure",value:function(i){cr(Wt(e.prototype),"configure",this).call(this,i),i.axisOptions=i.axisOptions||{},i.tooltipOptions=i.tooltipOptions||{},this.config.xAxisMode=i.axisOptions.xAxisMode||"span",this.config.yAxisMode=i.axisOptions.yAxisMode||"span",this.config.xIsSeries=i.axisOptions.xIsSeries||0,this.config.shortenYAxisNumbers=i.axisOptions.shortenYAxisNumbers||0,this.config.numberFormatter=i.axisOptions.numberFormatter,this.config.yAxisRange=i.axisOptions.yAxisRange||{},this.config.formatTooltipX=i.tooltipOptions.formatTooltipX,this.config.formatTooltipY=i.tooltipOptions.formatTooltipY,this.config.valuesOverPoints=i.valuesOverPoints,this.config.legendRowHeight=30}},{key:"prepareData",value:function(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.data;return c1(i,this.type)}},{key:"prepareFirstData",value:function(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.data;return u1(i)}},{key:"calc",value:function(){var i=arguments.length>0&&arguments[0]!==void 0&&arguments[0];this.calcXPositions(),i||this.calcYAxisParameters(this.getAllYValues(),this.type==="line"),this.makeDataByIndex()}},{key:"calcXPositions",value:function(){var i=this.state,n=this.data.labels;i.datasetLength=n.length,i.unitWidth=this.width/i.datasetLength,i.xOffset=i.unitWidth/2,i.xAxis={labels:n,positions:n.map(function(o,a){return wf(i.xOffset+a*i.unitWidth)})}}},{key:"calcYAxisParameters",value:function(i){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"false",o=o1(i,n,this.config.yAxisRange),a=this.height/s1(o),s=Af(o)*a,l=this.height-a1(o)*s;this.state.yAxis={labels:o,positions:o.map(function(d){return l-d*a}),scaleMultiplier:a,zeroLine:l},this.calcDatasetPoints(),this.calcYExtremes(),this.calcYRegions()}},{key:"calcDatasetPoints",value:function(){var i=this.state,n=function(o){return o.map(function(a){return Mn(a,i.yAxis)})};i.datasets=this.data.datasets.map(function(o,a){var s=o.values,l=o.cumulativeYs||[];return{name:o.name&&o.name.replace(/<|>|&/g,function(d){return d=="&"?"&amp;":d=="<"?"&lt;":"&gt;"}),index:a,chartType:o.chartType,values:s,yPositions:n(s),cumulativeYs:l,cumulativeYPos:n(l)}})}},{key:"calcYExtremes",value:function(){var i=this.state;this.barOptions.stacked?i.yExtremes=i.datasets[i.datasets.length-1].cumulativeYPos:(i.yExtremes=new Array(i.datasetLength).fill(9999),i.datasets.map(function(n){n.yPositions.map(function(o,a){o<i.yExtremes[a]&&(i.yExtremes[a]=o)})}))}},{key:"calcYRegions",value:function(){var i=this.state;this.data.yMarkers&&(this.state.yMarkers=this.data.yMarkers.map(function(n){return n.position=Mn(n.value,i.yAxis),n.options||(n.options={}),n})),this.data.yRegions&&(this.state.yRegions=this.data.yRegions.map(function(n){return n.startPos=Mn(n.start,i.yAxis),n.endPos=Mn(n.end,i.yAxis),n.options||(n.options={}),n}))}},{key:"getAllYValues",value:function(){var i,n=this,o="values";if(this.barOptions.stacked){o="cumulativeYs";var a=new Array(this.state.datasetLength).fill(0);this.data.datasets.map(function(l,d){var u=n.data.datasets[d].values;l[o]=a=a.map(function(h,p){return h+u[p]})})}var s=this.data.datasets.map(function(l){return l[o]});return this.data.yMarkers&&s.push(this.data.yMarkers.map(function(l){return l.value})),this.data.yRegions&&this.data.yRegions.map(function(l){s.push([l.end,l.start])}),(i=[]).concat.apply(i,ur(s))}},{key:"setupComponents",value:function(){var i=this,n=[["yAxis",{mode:this.config.yAxisMode,width:this.width,shortenNumbers:this.config.shortenYAxisNumbers,numberFormatter:this.config.numberFormatter},function(){return this.state.yAxis}.bind(this)],["xAxis",{mode:this.config.xAxisMode,height:this.height},function(){var h=this.state;return h.xAxis.calcLabels=function(p){var m=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],x=!(arguments.length>2&&arguments[2]!==void 0)||arguments[2],y=p/m.length*.6;y<=0&&(y=1);var v,w=y/7;if(x){var k=Math.max.apply(Math,ur(m.map(function(_){return _.length})));v=Math.ceil(k/w)}var c=m.map(function(_,g){return(_+="").length>w&&(x?g%v!=0?g!==m.length-1&&(_=""):g>m.length-v/2&&(_=""):_=w-3>0?_.slice(0,w-3)+" ...":_.slice(0,w)+".."),_});return c}(this.width,h.xAxis.labels,this.config.xIsSeries),h.xAxis}.bind(this)],["yRegions",{width:this.width,pos:"right"},function(){return this.state.yRegions}.bind(this)]],o=this.state.datasets.filter(function(h){return h.chartType==="bar"}),a=this.state.datasets.filter(function(h){return h.chartType==="line"}),s=o.map(function(h){var p=h.index;return["barGraph-"+h.index,{index:p,color:i.colors[p],stacked:i.barOptions.stacked,valuesOverPoints:i.config.valuesOverPoints,minHeight:0*i.height},function(){var m=this.state,x=m.datasets[p],y=this.barOptions.stacked,v=this.barOptions.spaceRatio||.5,w=m.unitWidth*(1-v),k=w/(y?1:o.length),c=m.xAxis.positions.map(function(b){return b-w/2});y||(c=c.map(function(b){return b+k*p}));var _=new Array(m.datasetLength).fill("");this.config.valuesOverPoints&&(_=y&&x.index===m.datasets.length-1?x.cumulativeYs:x.values);var g=new Array(m.datasetLength).fill(0);return y&&(g=x.yPositions.map(function(b,E){return b-x.cumulativeYPos[E]})),{xPositions:c,yPositions:x.yPositions,offsets:g,labels:_,zeroLine:m.yAxis.zeroLine,barsWidth:w,barWidth:k}}.bind(i)]}),l=a.map(function(h){var p=h.index;return["lineGraph-"+h.index,{index:p,color:i.colors[p],svgDefs:i.svgDefs,heatline:i.lineOptions.heatline,regionFill:i.lineOptions.regionFill,spline:i.lineOptions.spline,showDots:i.lineOptions.showDots,trailingDot:i.lineOptions.trailingDot,hideDotBorder:i.lineOptions.hideDotBorder,hideLine:i.lineOptions.hideLine,valuesOverPoints:i.config.valuesOverPoints},function(){var m=this.state,x=m.datasets[p],y=m.yAxis.positions[0]<m.yAxis.zeroLine?m.yAxis.positions[0]:m.yAxis.zeroLine;return{xPositions:m.xAxis.positions,yPositions:x.yPositions,values:x.values,zeroLine:y,radius:this.lineOptions.dotSize||4}}.bind(i)]}),d=[["yMarkers",{width:this.width,pos:"right"},function(){return this.state.yMarkers}.bind(this)]];n=n.concat(s,l,d);var u=["yMarkers","yRegions"];this.dataUnitComponents=[],this.components=new Map(n.filter(function(h){return!u.includes(h[0])||i.state[h[0]]}).map(function(h){var p=Ti.apply(void 0,ur(h));return(h[0].includes("lineGraph")||h[0].includes("barGraph"))&&i.dataUnitComponents.push(p),[h[0],p]}))}},{key:"makeDataByIndex",value:function(){var i=this;this.dataByIndex={};var n=this.state,o=this.config.formatTooltipX,a=this.config.formatTooltipY;n.xAxis.labels.map(function(s,l){var d=i.state.datasets.map(function(u,h){var p=u.values[l];return{title:u.name,value:p,yPos:u.yPositions[l],color:i.colors[h],formatted:a?a(p):p}});i.dataByIndex[l]={label:s,formattedLabel:o?o(s):s,xPos:n.xAxis.positions[l],values:d,yExtreme:n.yExtremes[l]}})}},{key:"bindTooltip",value:function(){var i=this;this.container.addEventListener("mousemove",function(n){var o=i.measures,a=Ln(i.container),s=n.pageX-a.left-$n(o),l=n.pageY-a.top;l<i.height+Bn(o)&&l>Bn(o)?i.mapTooltipXPosition(s):i.tip.hideTip()})}},{key:"mapTooltipXPosition",value:function(i){var n=this.state;if(n.yExtremes){var o=function(s,l){var d=arguments.length>2&&arguments[2]!==void 0&&arguments[2],u=l.reduce(function(h,p){return Math.abs(p-s)<Math.abs(h-s)?p:h},[]);return d?l.indexOf(u):u}(i,n.xAxis.positions,!0);if(o>=0){var a=this.dataByIndex[o];this.tip.setValues(a.xPos+this.tip.offset.x,a.yExtreme+this.tip.offset.y,{name:a.formattedLabel,value:""},a.values,o),this.tip.showTip()}}}},{key:"renderLegend",value:function(){var i=this.data;i.datasets.length>1&&cr(Wt(e.prototype),"renderLegend",this).call(this,i.datasets)}},{key:"makeLegend",value:function(i,n,o,a){return Cf(o,a+5,12,3,this.colors[n],i.name,null,8.75,this.config.truncateLegends)}},{key:"makeOverlay",value:function(){var i=this;this.init?this.init=0:(this.overlayGuides&&this.overlayGuides.forEach(function(n){var o=n.overlay;o.parentNode.removeChild(o)}),this.overlayGuides=this.dataUnitComponents.map(function(n){return{type:n.unitType,overlay:void 0,units:n.units}}),this.state.currentIndex===void 0&&(this.state.currentIndex=this.state.datasetLength-1),this.overlayGuides.map(function(n){var o=n.units[i.state.currentIndex];n.overlay=V0[n.type](o),i.drawArea.appendChild(n.overlay)}))}},{key:"updateOverlayGuides",value:function(){this.overlayGuides&&this.overlayGuides.forEach(function(i){var n=i.overlay;n.parentNode.removeChild(n)})}},{key:"bindOverlay",value:function(){var i=this;this.parent.addEventListener("data-select",function(){i.updateOverlay()})}},{key:"bindUnits",value:function(){var i=this;this.dataUnitComponents.map(function(n){n.units.map(function(o){o.addEventListener("click",function(){var a=o.getAttribute("data-point-index");i.setCurrentDataPoint(a)})})}),this.tip.container.addEventListener("click",function(){var n=i.tip.container.getAttribute("data-point-index");i.setCurrentDataPoint(n)})}},{key:"updateOverlay",value:function(){var i=this;this.overlayGuides.map(function(n){var o=n.units[i.state.currentIndex];Y0[n.type](o,n.overlay)})}},{key:"onLeftArrow",value:function(){this.setCurrentDataPoint(this.state.currentIndex-1)}},{key:"onRightArrow",value:function(){this.setCurrentDataPoint(this.state.currentIndex+1)}},{key:"getDataPoint",value:function(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.state.currentIndex,n=this.state,o={index:i,label:n.xAxis.labels[i],values:n.datasets.map(function(a){return a.values[i]})};return o}},{key:"setCurrentDataPoint",value:function(i){var n=this.state;(i=parseInt(i))<0&&(i=0),i>=n.xAxis.labels.length&&(i=n.xAxis.labels.length-1),i!==n.currentIndex&&(n.currentIndex=i,function(o,a,s){var l=document.createEvent("HTMLEvents");for(var d in l.initEvent(a,!0,!0),s)l[d]=s[d];o.dispatchEvent(l)}(this.parent,"data-select",this.getDataPoint()))}},{key:"addDataPoint",value:function(i,n){var o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.state.datasetLength;cr(Wt(e.prototype),"addDataPoint",this).call(this,i,n,o),this.data.labels.splice(o,0,i),this.data.datasets.map(function(a,s){a.values.splice(o,0,n[s])}),this.update(this.data)}},{key:"removeDataPoint",value:function(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.state.datasetLength-1;this.data.labels.length<=1||(cr(Wt(e.prototype),"removeDataPoint",this).call(this,i),this.data.labels.splice(i,1),this.data.datasets.map(function(n){n.values.splice(i,1)}),this.update(this.data))}},{key:"updateDataset",value:function(i){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;this.data.datasets[n].values=i,this.update(this.data)}},{key:"updateDatasets",value:function(i){this.data.datasets.map(function(n,o){i[o]&&(n.values=i[o])}),this.update(this.data)}}]),e}(),vf={bar:oa,line:oa,percentage:i1,heatmap:l1,pie:mf,donut:function(r){Gr(e,mf);var t=Xr(e);function e(i,n){return pr(this,e),t.call(this,i,n)}return vr(e,[{key:"configure",value:function(i){cr(Wt(e.prototype),"configure",this).call(this,i),this.type="donut",this.sliceName="donutSlices",this.arcFunc=z0,this.shapeFunc=H0,this.strokeWidth=i.strokeWidth||30}},{key:"getRadius",value:function(){return this.height>this.width?this.center.x-this.strokeWidth/2:this.center.y-this.strokeWidth/2}},{key:"resetHover",value:function(i,n){na(i,"translate3d(0,0,0)"),this.tip.hideTip(),i.style.stroke=n}},{key:"setupComponents",value:function(){var i=this.state,n=[[this.sliceName,{},function(){return{sliceStrings:i.sliceStrings,colors:this.colors,strokeWidth:this.strokeWidth}}.bind(this)]];this.components=new Map(n.map(function(o){var a=Ti.apply(void 0,ur(o));return[o[0],a]}))}}]),e}()},Of=function r(t,e){return pr(this,r),function(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"line",n=arguments.length>1?arguments[1]:void 0,o=arguments.length>2?arguments[2]:void 0;return i==="axis-mixed"?(o.type="line",new oa(n,o)):vf[i]?new vf[i](n,o):void console.error("Undefined chart type: "+i)}(e.type,t,e)};frappe.provide("frappe.ui");frappe.Chart=Of;frappe.ui.RealtimeChart=class extends frappe.Chart{constructor(t,e,i=8,n){super(t,n);n.data.datasets[0].values.length>i&&frappe.throw(__("Length of passed data array is greater than value of maximum allowed label points!")),this.currentSize=n.data.datasets[0].values.length,this.socketEvent=e,this.maxLabelPoints=i,this.start_updating=function(){frappe.realtime.on(this.socketEvent,o=>{this.update_chart(o.label,o.points)})},this.stop_updating=function(){frappe.realtime.off(this.socketEvent)},this.update_chart=function(o,a){this.currentSize>=this.maxLabelPoints?this.removeDataPoint(0):this.currentSize++,this.addDataPoint(o,a)}}};var ep=Vt(Qf());frappe.DataTable=ep.default;var rp=Vt(tp());frappe.Driver=rp.default;frappe.provide("frappe.ui");frappe.ui.Scanner=class{constructor(t){this.dialog=null,this.handler=null,this.options=t,this.is_alive=!1,"multiple"in this.options||(this.options.multiple=!1),t.container&&(this.$scan_area=$(t.container),this.scan_area_id=frappe.dom.set_unique_id(this.$scan_area)),t.dialog&&(this.dialog=this.make_dialog(),this.dialog.show())}scan(){this.load_lib().then(()=>this.start_scan())}start_scan(){this.handler||(this.handler=new Html5Qrcode(this.scan_area_id)),this.handler.start({facingMode:"environment"},{fps:10,qrbox:250},(t,e)=>{if(this.options.on_scan)try{this.options.on_scan(e)}catch(i){console.error(i)}this.options.multiple||(this.stop_scan(),this.hide_dialog())},t=>{}).catch(t=>{this.is_alive=!1,this.hide_dialog(),console.error(t)}),this.is_alive=!0}stop_scan(){this.handler&&this.is_alive&&this.handler.stop().then(()=>{this.is_alive=!1,this.$scan_area.empty(),this.hide_dialog()})}make_dialog(){let t=new frappe.ui.Dialog({title:__("Scan QRCode"),fields:[{fieldtype:"HTML",fieldname:"scan_area"}],on_page_show:()=>{this.$scan_area=t.get_field("scan_area").$wrapper,this.$scan_area.addClass("barcode-scanner"),this.scan_area_id=frappe.dom.set_unique_id(this.$scan_area),this.scan()},on_hide:()=>{this.stop_scan()}});return t}hide_dialog(){this.dialog&&this.dialog.hide()}load_lib(){return frappe.require("/assets/frappe/node_modules/html5-qrcode/dist/html5-qrcode.min.js")}};})();
/*!
    localForage -- Offline Storage, Improved
    Version 1.9.0
    https://localforage.github.io/localForage
    (c) 2013-2017 Mozilla, Apache License 2.0
*/
/*!
 * Cropper.js v1.5.12
 * https://fengyuanchen.github.io/cropperjs
 *
 * Copyright 2015-present Chen Fengyuan
 * Released under the MIT license
 *
 * Date: 2021-06-12T08:00:17.411Z
 */
/*!
 * Determine if an object is a Buffer
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */
/*! For license information please see editor.js.LICENSE.txt */
/*! showdown v 2.1.0 - 21-04-2022 */
/**!
 * Sortable
 * @author	RubaXa   <trash@rubaxa.org>
 * @author	owenm    <owen23355@gmail.com>
 * @license MIT
 */
//# sourceMappingURL=desk.bundle.MIYIXJ4E.js.map
